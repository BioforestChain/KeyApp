import{b as n}from"./bridge-DyWekW1m.js";var r=(e=>(e.getAddress="/wallet/authorize/address",e.signature="/wallet/authorize/signature",e.stakeAsset="/wallet/staking",e))(r||{}),t=(e=>(e[e.message=0]="message",e[e.transfer=1]="transfer",e[e.bioforestChainCertificateTransfer=2]="bioforestChainCertificateTransfer",e[e.json=3]="json",e[e.ENTITY=4]="ENTITY",e[e.assetTypeBalance=5]="assetTypeBalance",e[e.contract=6]="contract",e[e.destory=7]="destory",e))(t||{});function w(e,s,a){const o=i(s,a);return{getData:()=>o,abort:()=>{console.warn("[dweb-compat] abort is not supported in miniapp mode")}}}async function i(e,s){switch(e){case r.signature:if(Array.isArray(s))return await Promise.all(s.map(c));throw new Error("Invalid signature params: expected array");case r.getAddress:throw new Error("Use getWalleterAddresss for address requests");case r.stakeAsset:throw new Error("stakeAsset is not supported in miniapp mode");default:throw new Error(`Unknown pathname: ${e}`)}}async function c(e){switch(e.type){case t.transfer:return d(e);case t.message:return u(e);case t.json:return l(e);case t.destory:return h(e);case t.assetTypeBalance:return g(e);case t.contract:return y(e);default:return console.error("[dweb-compat] Unsupported signature type:",e.type),{error:!0,message:`Unsupported signature type: ${e.type}`}}}async function d(e){const s=await n("bio_sendTransaction",{from:e.senderAddress,to:e.receiveAddress,amount:e.balance,chain:e.chainName,asset:e.assetType,contractInfo:e.contractInfo});return{txId:s.txHash,transaction:s.transaction||s.txHash}}async function u(e){return await n("bio_signMessage",{address:e.senderAddress,message:e.message,chain:e.chainName})}async function l(e){return await n("bio_signTypedData",{address:e.senderAddress,data:e.json,chain:e.chainName,interpolation:e.jsonInterpolation})}async function h(e){return await n("bio_destroyAsset",{address:e.senderAddress,chain:e.chainName,assetType:e.assetType,amount:e.destoryAmount})}async function g(e){return await n("bio_getBalance",{address:e.senderAddress,chain:e.chainName,assets:e.assetTypes})}async function y(e){const s=await n("bio_signTransaction",{from:e.senderAddress,to:e.receiveAddress,chain:e.chainName,data:e.data,value:e.amount||"0"});return{txId:s.txId,transaction:s.signedTx}}export{t as $,r as a,w as g};
