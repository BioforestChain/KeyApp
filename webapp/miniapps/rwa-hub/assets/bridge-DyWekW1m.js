let c=0;function u(s,t){return new Promise((w,r)=>{const n=`dweb_compat_${++c}_${Date.now()}`,o=d=>{const e=d.data;if(e?.type==="bio_response"&&e.id===n)if(window.removeEventListener("message",o),e.success)w(e.result);else{const i=new Error(e.error?.message||"Unknown error");i.code=e.error?.code,r(i)}};window.addEventListener("message",o);const a={type:"bio_request",id:n,method:s,params:t!==void 0?[t]:[]};(window.parent!==window?window.parent:window).postMessage(a,"*"),setTimeout(()=>{window.removeEventListener("message",o),r(new Error(`Request timeout: ${s}`))},6e4)})}export{u as b};
