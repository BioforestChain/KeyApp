import{r as b,g as Fe,w as G,u as me,i as Be,c as A,a as ge,R as E,n as lt,h as He,f as $,k as m,l as Le,$ as u,m as Me,o as ut,p as Ae,q as De}from"./index-15D1tlVU.js";import{a as ct}from"./list-C2Pi8W4W.js";function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},he.apply(this,arguments)}const je=b.forwardRef((e,t)=>{const n=b.useRef(null),{className:i,id:s,style:o,mode:l,value:g,buttons:c,customButtons:I,dividers:a,imageUrlText:v,linkUrlText:p,placeholder:y,clearFormattingOnPaste:S,resizable:N=!1}=e,J=Fe(e),k=b.useRef(null),M=(O,z)=>{m(e,"textEditorChange",z)},Q=(O,z)=>{m(e,"textEditorInput",z)},X=()=>{m(e,"textEditorFocus")},Y=()=>{m(e,"textEditorBlur")},Z=(O,z)=>{m(e,"textEditorButtonClick",z)},_=()=>{m(e,"textEditorKeyboardOpen")},ee=()=>{m(e,"textEditorKeyboardClose")},te=()=>{m(e,"textEditorPopoverOpen")},ne=()=>{m(e,"textEditorPopoverClose")},ae=(O,z)=>{m(e,"textEditorInsertLink",z)},ie=(O,z)=>{m(e,"textEditorInsertImage",z)};b.useImperativeHandle(t,()=>({el:k.current,f7TextEditor:()=>n.current})),G(g,O=>{n.current&&n.current.setValue(O)});const re=()=>{const O=lt({el:k.current,mode:l,value:g,buttons:c,customButtons:I,dividers:a,imageUrlText:v,linkUrlText:p,placeholder:y,clearFormattingOnPaste:S,on:{change:M,input:Q,focus:X,blur:Y,buttonClick:Z,keyboardOpen:_,keyboardClose:ee,popoverOpen:te,popoverClose:ne,insertLink:ae,insertImage:ie}});He(()=>{n.current=$.textEditor.create(O)})},se=()=>{n.current&&n.current.destroy&&n.current.destroy(),n.current=null};me(()=>(re(),se),[]);const P=Be(e),oe=A(i,"text-editor",N&&"text-editor-resizable",ge(e));return E.createElement("div",he({ref:k,id:s,style:o,className:oe},J),P["root-start"],E.createElement("div",{className:"text-editor-content",contentEditable:!0},P.default),P["root-end"],P.root)});je.displayName="f7-text-editor";function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},H.apply(this,arguments)}const dt=b.forwardRef((e,t)=>{const{className:n,id:i,style:s,sortable:o,media:l,dropdown:g="auto",wrap:c=!0,input:I=!0,type:a="text",name:v,value:p,defaultValue:y,inputmode:S,readonly:N,required:J,disabled:k,placeholder:M,inputId:Q,size:X,accept:Y,autocomplete:Z,autocorrect:_,autocapitalize:ee,spellcheck:te,autofocus:ne,autosave:ae,max:ie,min:re,step:se,maxlength:P,minlength:oe,multiple:O,inputStyle:z,pattern:qe,validate:C,validateOnBlur:T,onValidate:j,tabindex:Ke,resizable:q,clearButton:Ue,noFormStoreData:We,noStoreData:Ge,ignoreStoreData:Je,errorMessage:K,errorMessageForce:D,info:le,outline:Qe,label:ve,floatingLabel:Xe,calendarParams:xe,colorPickerParams:Ee,textEditorParams:Ye}=e,[F,be]=b.useState(!1),[ye,we]=b.useState(!1),Ze=b.useContext(ct),{listIsSortable:_e=!1}=Ze||{},et=Fe(e),R=b.useRef(null),V=b.useRef(null),ue=b.useRef(null),d=b.useRef(null),Ce=b.useRef(null),ce=b.useRef(!1),Ie=()=>{if(d.current)return d.current.value},tt=()=>{if(a==="datepicker"&&Array.isArray(p)&&p.length===0)return!1;const r=Ie();return typeof p>"u"?r||r===0:p||p===0},U=()=>{if(!$||!d.current)return;const r=d.current.validity;r&&(r.valid?(j&&j(!0),F!==!1&&be(!1)):(j&&j(!1),F!==!0&&be(!0)))},ze=r=>{m(e,"textareaResize",r)},Te=r=>{m(e,"inputNotEmpty",r)},$e=r=>{m(e,"inputEmpty",r)},Oe=r=>{m(e,"inputClear",r)},Re=function(){for(var r=arguments.length,x=new Array(r),h=0;h<r;h++)x[h]=arguments[h];m(e,"input",...x),!(T||T==="")&&(C||C==="")&&d.current&&U(d.current)},Ve=function(){for(var r=arguments.length,x=new Array(r),h=0;h<r;h++)x[h]=arguments[h];m(e,"focus",...x),we(!0)},Se=function(){for(var r=arguments.length,x=new Array(r),h=0;h<r;h++)x[h]=arguments[h];m(e,"blur",...x),(C||C===""||T||T==="")&&d.current&&U(d.current),we(!1)},Ne=function(){for(var r=arguments.length,x=new Array(r),h=0;h<r;h++)x[h]=arguments[h];m(e,"change",...x),a==="texteditor"&&m(e,"textEditorChange",x[0])};b.useImperativeHandle(t,()=>({el:ue.current}));const nt=()=>{!ue.current&&!Ce.current||He(()=>{d.current&&(d.current.addEventListener("input:notempty",Te,!1),d.current.addEventListener("textarea:resize",ze,!1),d.current.addEventListener("input:empty",$e,!1),d.current.addEventListener("input:clear",Oe,!1),a==="datepicker"&&(R.current=$.calendar.create({inputEl:d.current,value:p,on:{change(r,x){m(e,"calendarChange",x)}},...xe||{}})),a==="colorpicker"&&(V.current=$.colorPicker.create({inputEl:d.current,value:p,on:{change(r,x){m(e,"colorpicker:change colorPickerChange",x)}},...Ee||{}})),!(T||T==="")&&(C||C==="")&&(typeof p<"u"&&p!==null&&p!==""||typeof y<"u"&&y!==null&&y!=="")&&setTimeout(()=>{U()},0),a==="textarea"&&q&&$.input.resizeTextarea(d.current))})},at=()=>{d.current&&(d.current.removeEventListener("input:notempty",Te,!1),d.current.removeEventListener("textarea:resize",ze,!1),d.current.removeEventListener("input:empty",$e,!1),d.current.removeEventListener("input:clear",Oe,!1)),R.current&&R.current.destroy&&(R.current.destroy(),R.current=null),V.current&&V.current.destroy&&(V.current.destroy(),V.current=null)};me(()=>(nt(),at),[]),me(()=>{if($&&ce.current){if(!d.current)return;ce.current=!1,C&&!T&&U(),a==="textarea"&&q&&$.input.resizeTextarea(d.current)}}),G(Ee,r=>{!$||!V.current||Le(V.current.params,r||{})}),G(xe,r=>{!$||!R.current||Le(R.current.params,r||{})}),G(p,r=>{$&&(ce.current=!0,R.current&&R.current.setValue(r),V.current&&V.current.setValue(r))});const f=Be(e),it=Ie(),ke=tt(),rt=o===!0||o===!1?o:_e;let L;const W=(r,x)=>{const h=a!=="file"&&a!=="datepicker"&&a!=="colorpicker",st=r==="input";let B=a;(B==="datepicker"||B==="colorpicker")&&(B="text");const ot=A({resizable:B==="textarea"&&q,"no-store-data":We||Ge||Je,"input-invalid":K&&D||F,"input-with-value":ke,"input-focused":ye});let pe;h&&(typeof p<"u"?pe=p:pe=it);const fe={};return a!=="datepicker"&&a!=="colorpicker"&&("value"in e&&(fe.value=pe),"defaultValue"in e&&(fe.defaultValue=y)),E.createElement(r,H({ref:d,style:z,name:v,type:st?B:void 0,placeholder:M,inputMode:S,id:Q,size:X,accept:Y,autoComplete:Z,autoCorrect:_,autoCapitalize:ee,spellCheck:te,autoFocus:ne,autoSave:ae,disabled:k,max:ie,maxLength:P,min:re,minLength:oe,step:se,multiple:O,readOnly:N,required:J,pattern:qe,validate:typeof C=="string"&&C.length?C:void 0,"data-validate":C===!0||C===""||T===!0||T===""?!0:void 0,"data-validate-on-blur":T===!0||T===""?!0:void 0,tabIndex:Ke,"data-error-message":D?void 0:K,className:ot,onFocus:Ve,onBlur:Se,onInput:Re,onChange:Ne},fe),x)};I&&(a==="select"||a==="textarea"||a==="file"?a==="select"?L=W("select",f.default):a==="file"?L=W("input"):L=W("textarea"):a==="texteditor"?L=E.createElement(je,H({value:p,resizable:q,placeholder:M,onTextEditorFocus:Ve,onTextEditorBlur:Se,onTextEditorInput:Re,onTextEditorChange:Ne},Ye||{})):L=W("input"));const de=!!K||f["error-message"]&&f["error-message"].length,Pe=E.createElement("div",{ref:Ce,className:A("item-content item-input",!c&&n,!c&&{disabled:k},!c&&ge(e),{"item-input-outline":Qe,"item-input-focused":ye,"item-input-with-info":!!le||f.info&&f.info.length,"item-input-with-value":ke,"item-input-with-error-message":de&&D||F,"item-input-invalid":de&&D||F})},f["content-start"],(l||f.media)&&E.createElement("div",{className:"item-media"},l&&E.createElement("img",{src:l}),f.media),E.createElement("div",{className:"item-inner"},f["inner-start"],(ve||f.label)&&E.createElement("div",{className:A("item-title item-label",{"item-floating-label":Xe})},ve,f.label),E.createElement("div",{className:A("item-input-wrap",{"input-dropdown":g==="auto"?a==="select":g})},L,f.input,de&&D&&E.createElement("div",{className:"item-input-error-message"},K,f["error-message"]),Ue&&E.createElement("span",{className:"input-clear-button"}),(le||f.info)&&E.createElement("div",{className:"item-input-info"},le,f.info)),f.inner,f["inner-end"]),f.content,f["content-end"]);return c?E.createElement("li",H({ref:ue,id:i,style:s,className:A(n,{disabled:k},ge(e))},et),f["root-start"],Pe,rt&&E.createElement("div",{className:"sortable-handler"}),f.root,f["root-end"]):Pe});dt.displayName="f7-list-input";const w={ignoreTypes:["checkbox","button","submit","range","radio","image"],createTextareaResizableShadow(){const e=De(),t=u(e.createElement("textarea"));t.addClass("textarea-resizable-shadow"),t.prop({disabled:!0,readonly:!0}),w.textareaResizableShadow=t},textareaResizableShadow:void 0,resizeTextarea(e){const t=this,n=Ae(),i=u(e);w.textareaResizableShadow||w.createTextareaResizableShadow();const s=w.textareaResizableShadow;if(!i.length||!i.hasClass("resizable"))return;w.textareaResizableShadow.parents().length===0&&t.$el.append(s);const o=n.getComputedStyle(i[0]);"padding-top padding-bottom padding-left padding-right margin-left margin-right margin-top margin-bottom width font-size font-family font-style font-weight line-height font-variant text-transform letter-spacing border box-sizing display".split(" ").forEach(I=>{let a=o[I];"font-size line-height letter-spacing width".split(" ").indexOf(I)>=0&&(a=a.replace(",",".")),s.css(I,a)});const l=i[0].clientHeight;s.val("");const g=s[0].scrollHeight;s.val(i.val()),s.css("height",0);const c=s[0].scrollHeight;l!==c&&(c>g?i.css("height",`${c}px`):c<l&&i.css("height",""),(c>g||c<l)&&(i.trigger("textarea:resize",{initialHeight:g,currentHeight:l,scrollHeight:c}),t.emit("textareaResize",{initialHeight:g,currentHeight:l,scrollHeight:c})))},validate(e){const t=u(e);if(!t.length)return!0;const n=t.parents(".item-input"),i=t.parents(".input");function s(){t[0].f7ValidateReadonly&&(t[0].readOnly=!1)}function o(){t[0].f7ValidateReadonly&&(t[0].readOnly=!0)}s();const l=t[0].validity,g=t.dataset().errorMessage||t[0].validationMessage||"";if(!l)return o(),!0;if(!l.valid){let c=t.nextAll(".item-input-error-message, .input-error-message");return g&&(c.length===0&&(c=u(`<div class="${i.length?"input-error-message":"item-input-error-message"}"></div>`),c.insertAfter(t)),c.text(g)),c.length>0&&(n.addClass("item-input-with-error-message"),i.addClass("input-with-error-message")),n.addClass("item-input-invalid"),i.addClass("input-invalid"),t.addClass("input-invalid"),o(),!1}return n.removeClass("item-input-invalid item-input-with-error-message"),i.removeClass("input-invalid input-with-error-message"),t.removeClass("input-invalid"),o(),!0},validateInputs(e){const t=this;return u(e).find("input, textarea, select").map(i=>t.input.validate(i)).indexOf(!1)<0},focus(e){const t=u(e),n=t.attr("type");w.ignoreTypes.indexOf(n)>=0||(t.parents(".item-input").addClass("item-input-focused"),t.parents(".input").addClass("input-focused"),t.addClass("input-focused"))},blur(e){const t=u(e);t.parents(".item-input").removeClass("item-input-focused"),t.parents(".input").removeClass("input-focused"),t.removeClass("input-focused")},checkEmptyState(e){const t=this;let n=u(e);if(n.is("input, select, textarea, .item-input [contenteditable]")||(n=n.find("input, select, textarea, .item-input [contenteditable]").eq(0)),!n.length)return;const i=n[0].hasAttribute("contenteditable");let s;i?n.find(".text-editor-placeholder").length?s="":s=n.html():s=n.val();const o=n.parents(".item-input"),l=n.parents(".input");s&&typeof s=="string"&&s.trim()!==""||Array.isArray(s)&&s.length>0?(o.addClass("item-input-with-value"),l.addClass("input-with-value"),n.addClass("input-with-value"),n.trigger("input:notempty"),t.emit("inputNotEmpty",n[0])):(o.removeClass("item-input-with-value"),l.removeClass("input-with-value"),n.removeClass("input-with-value"),n.trigger("input:empty"),t.emit("inputEmpty",n[0]))},scrollIntoView(e,t,n,i){t===void 0&&(t=0);const s=u(e),o=s.parents(".page-content, .panel, .card-expandable .card-content").eq(0);if(!o.length)return!1;const l=o[0].offsetHeight,g=o[0].scrollTop,c=parseInt(o.css("padding-top"),10),I=parseInt(o.css("padding-bottom"),10),a=o.offset().top-g,v=s.offset().top-a,p=s[0].offsetHeight,y=v+g-c,S=v+g-l+I+p,N=y+(S-y)/2;return g>y?(o.scrollTop(n?N:y,t),!0):g<S?(o.scrollTop(n?N:S,t),!0):(i&&o.scrollTop(n?N:S,t),!1)},init(){const e=this,t=Me(),n=Ae(),i=De();w.createTextareaResizableShadow();function s(){const a=this;e.params.input.scrollIntoViewOnFocus&&(t.android?u(n).once("resize",()=>{i&&i.activeElement===a&&e.input.scrollIntoView(a,e.params.input.scrollIntoViewDuration,e.params.input.scrollIntoViewCentered,e.params.input.scrollIntoViewAlways)}):e.input.scrollIntoView(a,e.params.input.scrollIntoViewDuration,e.params.input.scrollIntoViewCentered,e.params.input.scrollIntoViewAlways)),e.input.focus(a)}function o(){const a=u(this),v=a[0].nodeName.toLowerCase();e.input.blur(a),(a.dataset().validate||a.attr("validate")!==null||a.attr("data-validate-on-blur")!==null)&&e.input.validate(a),v==="textarea"&&a.hasClass("resizable")&&w.textareaResizableShadow&&w.textareaResizableShadow.remove()}function l(){const a=u(this),v=a.attr("type"),p=a[0].nodeName.toLowerCase(),y=a[0].hasAttribute("contenteditable");w.ignoreTypes.indexOf(v)>=0||(e.input.checkEmptyState(a),!y&&(a.attr("data-validate-on-blur")===null&&(a.dataset().validate||a.attr("validate")!==null)&&e.input.validate(a),p==="textarea"&&a.hasClass("resizable")&&e.input.resizeTextarea(a)))}function g(a){const v=u(this);v.attr("data-validate-on-blur")===null&&(v.dataset().validate||v.attr("validate")!==null)&&(a.preventDefault(),e.input.validate(v))}function c(){const v=u(this).siblings("input, textarea").eq(0),p=v.val();v.val("").trigger("input change").focus().trigger("input:clear",p),e.emit("inputClear",p)}function I(a){a.preventDefault()}u(i).on("click",".input-clear-button",c),u(i).on("mousedown",".input-clear-button",I),u(i).on("change input","input, textarea, select, .item-input [contenteditable]",l,!0),u(i).on("focus","input, textarea, select, .item-input [contenteditable]",s,!0),u(i).on("blur","input, textarea, select, .item-input [contenteditable]",o,!0),u(i).on("invalid","input, textarea, select",g,!0)}},pt={name:"input",params:{input:{scrollIntoViewOnFocus:void 0,scrollIntoViewCentered:!1,scrollIntoViewDuration:0,scrollIntoViewAlways:!1}},create(){const e=this;typeof e.params.input.scrollIntoViewOnFocus>"u"&&(e.params.input.scrollIntoViewOnFocus=Me().android),ut(e,{input:w})},on:{init(){this.input.init()},tabMounted(e){const t=this,n=u(e);n.find(".item-input, .input").each(i=>{u(i).find("input, select, textarea, [contenteditable]").each(o=>{const l=u(o);w.ignoreTypes.indexOf(l.attr("type"))>=0||t.input.checkEmptyState(l)})}),n.find("textarea.resizable").each(i=>{t.input.resizeTextarea(i)})},pageInit(e){const t=this,n=e.$el;n.find(".item-input, .input").each(i=>{u(i).find("input, select, textarea, [contenteditable]").each(o=>{const l=u(o);w.ignoreTypes.indexOf(l.attr("type"))>=0||t.input.checkEmptyState(l)})}),n.find("textarea.resizable").each(i=>{t.input.resizeTextarea(i)})},"panelBreakpoint panelCollapsedBreakpoint panelResize panelOpen panelSwipeOpen resize viewMasterDetailBreakpoint":function(t){const n=this;t&&t.$el?t.$el.find("textarea.resizable").each(i=>{n.input.resizeTextarea(i)}):u("textarea.resizable").each(i=>{n.input.resizeTextarea(i)})}}};await $.loadModule(pt);export{dt as L};
