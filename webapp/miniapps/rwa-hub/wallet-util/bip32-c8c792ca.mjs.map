{"version":3,"file":"bip32-c8c792ca.mjs","sources":["../../dist/lib/bip32/crypto.mjs","../../dist/lib/bip32/bip32.mjs"],"sourcesContent":["import { Buffer } from '../buffer.mjs';\nimport { createSHA512Sync } from '../hash-wasm/sha512.mjs';\nimport { createHMACSync } from '../hash-wasm/hmac.mjs';\nexport { hash160 } from '../bitcoin-lib/crypto.mjs';\n// const ZEROS = Buffer.alloc(128);\nexport function hmacSHA512(key, data) {\n    return Buffer.from(createHMACSync(createSHA512Sync(), key).update(data).digest());\n    // const alg = 'sha512';\n    // const blocksize = alg === 'sha512' || alg === 'sha384' ? 128 : 64;\n    // if (key.length > blocksize) {\n    //   key = Buffer.from(createSHA512Sync().update(key).digest());\n    // } else if (key.length < blocksize) {\n    //   key = Buffer.concat([key, ZEROS], blocksize);\n    // }\n    // const ipad = Buffer.allocUnsafe(blocksize);\n    // const opad = Buffer.allocUnsafe(blocksize);\n    // for (var i = 0; i < blocksize; i++) {\n    //   ipad[i] = key[i] ^ 0x36;\n    //   opad[i] = key[i] ^ 0x5c;\n    // }\n    // const hash = createSHA512Sync().update(ipad);\n    // /// update\n    // hash.update(data);\n    // /// final\n    // const hmac = createSHA512Sync().update(opad).update(hash.digest()).digest();\n    // return Buffer.from(hmac);\n}\n//# sourceMappingURL=crypto.mjs.map","import * as crypto from './crypto.mjs';\nimport { bs58check } from '../bs58check/index.mjs';\nimport { typeforce } from '../typeforce.mjs';\nimport * as wif from '../wif/index.mjs';\nimport { Buffer } from '../buffer.mjs';\nexport function BIP32Factory(ecc) {\n    const UINT256_TYPE = typeforce.BufferN(32);\n    const NETWORK_TYPE = typeforce.compile({\n        wif: typeforce.UInt8,\n        bip32: {\n            public: typeforce.UInt32,\n            private: typeforce.UInt32,\n        },\n    });\n    const BITCOIN = {\n        messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n        bech32: 'bc',\n        bip32: {\n            public: 0x0488b21e,\n            private: 0x0488ade4,\n        },\n        pubKeyHash: 0x00,\n        scriptHash: 0x05,\n        wif: 0x80,\n    };\n    const HIGHEST_BIT = 0x80000000;\n    const UINT31_MAX = Math.pow(2, 31) - 1;\n    function BIP32Path(value) {\n        return (typeforce.String(value) && value.match(/^(m\\/)?(\\d+'?\\/)*\\d+'?$/) !== null);\n    }\n    function UInt31(value) {\n        return typeforce.UInt32(value) && value <= UINT31_MAX;\n    }\n    function toXOnly(pubKey) {\n        return pubKey.length === 32 ? pubKey : pubKey.slice(1, 33);\n    }\n    class Bip32Signer {\n        constructor(__D, __Q) {\n            this.__D = __D;\n            this.__Q = __Q;\n            this.lowR = false;\n        }\n        get publicKey() {\n            if (this.__Q === undefined)\n                this.__Q = Buffer.from(ecc.pointFromScalar(this.__D, true));\n            return this.__Q;\n        }\n        get privateKey() {\n            return this.__D;\n        }\n        sign(hash, lowR) {\n            if (!this.privateKey)\n                throw new Error('Missing private key');\n            if (lowR === undefined)\n                lowR = this.lowR;\n            if (lowR === false) {\n                return Buffer.from(ecc.sign(hash, this.privateKey));\n            }\n            else {\n                let sig = Buffer.from(ecc.sign(hash, this.privateKey));\n                const extraData = Buffer.alloc(32, 0);\n                let counter = 0;\n                // if first try is lowR, skip the loop\n                // for second try and on, add extra entropy counting up\n                while (sig[0] > 0x7f) {\n                    counter++;\n                    extraData.writeUIntLE(counter, 0, 6);\n                    sig = Buffer.from(ecc.sign(hash, this.privateKey, extraData));\n                }\n                return sig;\n            }\n        }\n        signSchnorr(hash) {\n            if (!this.privateKey)\n                throw new Error('Missing private key');\n            if (!ecc.signSchnorr)\n                throw new Error('signSchnorr not supported by ecc library');\n            return Buffer.from(ecc.signSchnorr(hash, this.privateKey));\n        }\n        verify(hash, signature) {\n            return ecc.verify(hash, this.publicKey, signature);\n        }\n        verifySchnorr(hash, signature) {\n            if (!ecc.verifySchnorr)\n                throw new Error('verifySchnorr not supported by ecc library');\n            return ecc.verifySchnorr(hash, this.publicKey.subarray(1, 33), signature);\n        }\n    }\n    class BIP32 extends Bip32Signer {\n        constructor(__D, __Q, chainCode, network, __DEPTH = 0, __INDEX = 0, __PARENT_FINGERPRINT = 0x00000000) {\n            super(__D, __Q);\n            this.chainCode = chainCode;\n            this.network = network;\n            this.__DEPTH = __DEPTH;\n            this.__INDEX = __INDEX;\n            this.__PARENT_FINGERPRINT = __PARENT_FINGERPRINT;\n            typeforce(NETWORK_TYPE, network);\n        }\n        get depth() {\n            return this.__DEPTH;\n        }\n        get index() {\n            return this.__INDEX;\n        }\n        get parentFingerprint() {\n            return this.__PARENT_FINGERPRINT;\n        }\n        get identifier() {\n            return crypto.hash160(this.publicKey);\n        }\n        get fingerprint() {\n            return this.identifier.slice(0, 4);\n        }\n        get compressed() {\n            return true;\n        }\n        // Private === not neutered\n        // Public === neutered\n        isNeutered() {\n            return this.__D === undefined;\n        }\n        neutered() {\n            return fromPublicKeyLocal(this.publicKey, this.chainCode, this.network, this.depth, this.index, this.parentFingerprint);\n        }\n        toBase58() {\n            const network = this.network;\n            const version = !this.isNeutered()\n                ? network.bip32.private\n                : network.bip32.public;\n            const buffer = Buffer.allocUnsafe(78);\n            // 4 bytes: version bytes\n            buffer.writeUInt32BE(version, 0);\n            // 1 byte: depth: 0x00 for master nodes, 0x01 for level-1 descendants, ....\n            buffer.writeUInt8(this.depth, 4);\n            // 4 bytes: the fingerprint of the parent's key (0x00000000 if master key)\n            buffer.writeUInt32BE(this.parentFingerprint, 5);\n            // 4 bytes: child number. This is the number i in xi = xpar/i, with xi the key being serialized.\n            // This is encoded in big endian. (0x00000000 if master key)\n            buffer.writeUInt32BE(this.index, 9);\n            // 32 bytes: the chain code\n            this.chainCode.copy(buffer, 13);\n            // 33 bytes: the public key or private key data\n            if (!this.isNeutered()) {\n                // 0x00 + k for private keys\n                buffer.writeUInt8(0, 45);\n                this.privateKey.copy(buffer, 46);\n                // 33 bytes: the public key\n            }\n            else {\n                // X9.62 encoding for public keys\n                this.publicKey.copy(buffer, 45);\n            }\n            return bs58check.encode(buffer);\n        }\n        toWIF() {\n            if (!this.privateKey)\n                throw new TypeError('Missing private key');\n            return wif.encode(this.network.wif, this.privateKey, true);\n        }\n        // https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki#child-key-derivation-ckd-functions\n        derive(index) {\n            typeforce(typeforce.UInt32, index);\n            const isHardened = index >= HIGHEST_BIT;\n            const data = Buffer.allocUnsafe(37);\n            // Hardened child\n            if (isHardened) {\n                if (this.isNeutered())\n                    throw new TypeError('Missing private key for hardened child key');\n                // data = 0x00 || ser256(kpar) || ser32(index)\n                data[0] = 0x00;\n                this.privateKey.copy(data, 1);\n                data.writeUInt32BE(index, 33);\n                // Normal child\n            }\n            else {\n                // data = serP(point(kpar)) || ser32(index)\n                //      = serP(Kpar) || ser32(index)\n                this.publicKey.copy(data, 0);\n                data.writeUInt32BE(index, 33);\n            }\n            const I = crypto.hmacSHA512(this.chainCode, data);\n            const IL = I.slice(0, 32);\n            const IR = I.slice(32);\n            // if parse256(IL) >= n, proceed with the next value for i\n            if (!ecc.isPrivate(IL))\n                return this.derive(index + 1);\n            // Private parent key -> private child key\n            let hd;\n            if (!this.isNeutered()) {\n                // ki = parse256(IL) + kpar (mod n)\n                const ki = Buffer.from(ecc.privateAdd(this.privateKey, IL));\n                // In case ki == 0, proceed with the next value for i\n                if (ki == null)\n                    return this.derive(index + 1);\n                hd = fromPrivateKeyLocal(ki, IR, this.network, this.depth + 1, index, this.fingerprint.readUInt32BE(0));\n                // Public parent key -> public child key\n            }\n            else {\n                // Ki = point(parse256(IL)) + Kpar\n                //    = G*IL + Kpar\n                const Ki = Buffer.from(ecc.pointAddScalar(this.publicKey, IL, true));\n                // In case Ki is the point at infinity, proceed with the next value for i\n                if (Ki === null)\n                    return this.derive(index + 1);\n                hd = fromPublicKeyLocal(Ki, IR, this.network, this.depth + 1, index, this.fingerprint.readUInt32BE(0));\n            }\n            return hd;\n        }\n        deriveHardened(index) {\n            typeforce(UInt31, index);\n            // Only derives hardened private keys by default\n            return this.derive(index + HIGHEST_BIT);\n        }\n        derivePath(path) {\n            typeforce(BIP32Path, path);\n            let splitPath = path.split('/');\n            if (splitPath[0] === 'm') {\n                if (this.parentFingerprint)\n                    throw new TypeError('Expected master, got child');\n                splitPath = splitPath.slice(1);\n            }\n            return splitPath.reduce((prevHd, indexStr) => {\n                let index;\n                if (indexStr.slice(-1) === `'`) {\n                    index = parseInt(indexStr.slice(0, -1), 10);\n                    return prevHd.deriveHardened(index);\n                }\n                else {\n                    index = parseInt(indexStr, 10);\n                    return prevHd.derive(index);\n                }\n            }, this);\n        }\n        tweak(t) {\n            if (this.privateKey)\n                return this.tweakFromPrivateKey(t);\n            return this.tweakFromPublicKey(t);\n        }\n        tweakFromPublicKey(t) {\n            const xOnlyPubKey = toXOnly(this.publicKey);\n            const tweakedPublicKey = ecc.xOnlyPointAddTweak(xOnlyPubKey, t);\n            if (!tweakedPublicKey || tweakedPublicKey.xOnlyPubkey === null)\n                throw new Error('Cannot tweak public key!');\n            const parityByte = Buffer.from([\n                tweakedPublicKey.parity === 0 ? 0x02 : 0x03,\n            ]);\n            const tweakedPublicKeyCompresed = Buffer.concat([\n                parityByte,\n                tweakedPublicKey.xOnlyPubkey,\n            ]);\n            return new Bip32Signer(undefined, tweakedPublicKeyCompresed);\n        }\n        tweakFromPrivateKey(t) {\n            const hasOddY = this.publicKey[0] === 3 ||\n                (this.publicKey[0] === 4 && (this.publicKey[64] & 1) === 1);\n            const privateKey = hasOddY\n                ? ecc.privateNegate(this.privateKey)\n                : this.privateKey;\n            const tweakedPrivateKey = ecc.privateAdd(privateKey, t);\n            if (!tweakedPrivateKey)\n                throw new Error('Invalid tweaked private key!');\n            return new Bip32Signer(Buffer.from(tweakedPrivateKey), undefined);\n        }\n    }\n    function fromBase58(inString, network) {\n        const buffer = bs58check.decode(inString);\n        if (buffer.length !== 78)\n            throw new TypeError('Invalid buffer length');\n        network = network || BITCOIN;\n        // 4 bytes: version bytes\n        const version = buffer.readUInt32BE(0);\n        if (version !== network.bip32.private && version !== network.bip32.public)\n            throw new TypeError('Invalid network version');\n        // 1 byte: depth: 0x00 for master nodes, 0x01 for level-1 descendants, ...\n        const depth = buffer[4];\n        // 4 bytes: the fingerprint of the parent's key (0x00000000 if master key)\n        const parentFingerprint = buffer.readUInt32BE(5);\n        if (depth === 0) {\n            if (parentFingerprint !== 0x00000000)\n                throw new TypeError('Invalid parent fingerprint');\n        }\n        // 4 bytes: child number. This is the number i in xi = xpar/i, with xi the key being serialized.\n        // This is encoded in MSB order. (0x00000000 if master key)\n        const index = buffer.readUInt32BE(9);\n        if (depth === 0 && index !== 0)\n            throw new TypeError('Invalid index');\n        // 32 bytes: the chain code\n        const chainCode = buffer.slice(13, 45);\n        let hd;\n        // 33 bytes: private key data (0x00 + k)\n        if (version === network.bip32.private) {\n            if (buffer.readUInt8(45) !== 0x00)\n                throw new TypeError('Invalid private key');\n            const k = buffer.slice(46, 78);\n            hd = fromPrivateKeyLocal(k, chainCode, network, depth, index, parentFingerprint);\n            // 33 bytes: public key data (0x02 + X or 0x03 + X)\n        }\n        else {\n            const X = buffer.slice(45, 78);\n            hd = fromPublicKeyLocal(X, chainCode, network, depth, index, parentFingerprint);\n        }\n        return hd;\n    }\n    function fromPrivateKey(privateKey, chainCode, network) {\n        return fromPrivateKeyLocal(privateKey, chainCode, network);\n    }\n    function fromPrivateKeyLocal(privateKey, chainCode, network, depth, index, parentFingerprint) {\n        typeforce({\n            privateKey: UINT256_TYPE,\n            chainCode: UINT256_TYPE,\n        }, { privateKey, chainCode });\n        network = network || BITCOIN;\n        if (!ecc.isPrivate(privateKey))\n            throw new TypeError('Private key not in range [1, n)');\n        return new BIP32(privateKey, undefined, chainCode, network, depth, index, parentFingerprint);\n    }\n    function fromPublicKey(publicKey, chainCode, network) {\n        return fromPublicKeyLocal(publicKey, chainCode, network);\n    }\n    function fromPublicKeyLocal(publicKey, chainCode, network, depth, index, parentFingerprint) {\n        typeforce({\n            publicKey: typeforce.BufferN(33),\n            chainCode: UINT256_TYPE,\n        }, { publicKey, chainCode });\n        network = network || BITCOIN;\n        // verify the X coordinate is a point on the curve\n        if (!ecc.isPoint(publicKey))\n            throw new TypeError('Point is not on the curve');\n        return new BIP32(undefined, publicKey, chainCode, network, depth, index, parentFingerprint);\n    }\n    function fromSeed(seed, network) {\n        typeforce(typeforce.Buffer, seed);\n        if (seed.length < 16)\n            throw new TypeError('Seed should be at least 128 bits');\n        if (seed.length > 64)\n            throw new TypeError('Seed should be at most 512 bits');\n        network = network || BITCOIN;\n        const I = crypto.hmacSHA512(Buffer.from('Bitcoin seed', 'utf8'), seed);\n        const IL = I.slice(0, 32);\n        const IR = I.slice(32);\n        return fromPrivateKey(IL, IR, network);\n    }\n    return {\n        fromSeed,\n        fromBase58,\n        fromPublicKey,\n        fromPrivateKey,\n        toXOnly,\n    };\n}\n//# sourceMappingURL=bip32.mjs.map"],"names":["crypto.hash160","wif.encode","crypto.hmacSHA512"],"mappings":"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"}