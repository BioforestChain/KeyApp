import{r as f,j as e,f as N,d as te}from"./index-Dk9SKzm0.js";import{N as se,g as ae,a as re}from"./icon.component--OR8Byhv.js";import{A as O}from"./nilai-dialog-DovDa2gq.js";import{i as z,t as H,a as ne,z as a,u as P,b as ie}from"./dex-api-CqlE9Hln.js";import{n as ce,ad as oe,ae as le,af as de,b as me,i as R,H as xe,ag as ue,ah as he,N as fe,Z as T}from"./messages-SmdZefEg.js";import{u as S}from"./use_easy_state-DKYThI52.js";import{u as pe}from"./use_flow-BWxEPw_J.js";import{L as ge}from"./list-item-CGegUNIB.js";import{N as D,b as be}from"./navbar-Dn_WDVgk.js";import{d as X,P as K,g as Ne,K as je}from"./page-BOxexyJV.js";import{u as ve}from"./use_refresh-Bj36Twge.js";import{B as q}from"./big-Dt19vo1Q.js";import{L as we}from"./list-VPD3Xbib.js";import{w as ye}from"./clipboard-BTDzN7DF.js";import{B as Te}from"./dialog-DR_3qyGf.js";import"./pull-to-refresh-dnVFezrG.js";import{L as Fe}from"./loading-page-data-_vUbOxZx.js";import{N as _e}from"./no-data-BCjwUstT.js";import{g as Ee}from"./setting.page-LIpBvLLC.js";let A={name:""};const Be=()=>({...A}),Ze=X(c=>{const n=S(!0),l=S({name:""}),F=async()=>{const v=await(await Ne()).trpcClient.profile.getProfileInfo.query(ne());return A=l.value=v,v},j=async()=>{try{N.preloader.show(),n.value=!0,await F()}catch(x){throw H(String(x)),x}finally{N.preloader.hide(),n.value=!1}};return f.useEffect(()=>{j();const x=z(()=>{A=l.value={name:""},j()});return()=>{x()}},[]),e.jsxs(K,{name:"discover",style:{"--f7-page-toolbar-bottom-offset":"0"},children:[e.jsx(D,{className:"text-white !filter-none",style:{"--f7-bars-bg-color-rgb":"100,15,243","--f7-bars-border-color":"transparent"},children:e.jsx(D,{children:e.jsx(be,{children:e.jsxs("div",{className:"flex items-center justify-center text-white",onClick:()=>{c.safeF7Navigater.orgIntroduceList()},children:[e.jsx("img",{src:"./images/logo.webp",className:"mr-2 h-6 w-auto rounded-full",alt:""}),e.jsx("span",{className:"text-sm",children:l.value.name||"------"}),e.jsx(se,{name:"common-back",className:"flex -rotate-180"})]})})})}),e.jsx("div",{className:"min-h-full rounded-3 bg-white p-4 pb-[5rem]",children:l.value.basic_information?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-3 rounded-4 bg-grey p-4",children:[e.jsx("div",{className:"mb-2 text-base font-bold text-title",children:"基本信息"}),e.jsx("div",{className:"max-h-60 overflow-scroll break-all text-text",children:l.value.basic_information})]}),e.jsxs("div",{className:"mb-3 rounded-4 bg-grey p-4",children:[e.jsx("div",{className:"mb-2 text-base font-bold text-title",children:"投资与回报"}),e.jsx("div",{className:"max-h-60 overflow-scroll break-all text-text",children:l.value.investment_and_return})]}),e.jsxs("div",{className:"mb-3 rounded-4 bg-grey p-4",children:[e.jsx("div",{className:"mb-2 text-base font-bold text-title",children:"退出机制"}),e.jsx("div",{className:"max-h-60 overflow-scroll break-all text-text",children:l.value.exit_infomation})]}),e.jsxs("div",{className:"mb-3 rounded-4 bg-grey p-4",children:[e.jsx("div",{className:"mb-2 text-base font-bold text-title",children:"风险提示"}),e.jsx("div",{className:"max-h-60 overflow-scroll break-all text-text",children:l.value.risk_statement})]})]}):e.jsx("div",{children:n.value?e.jsx(Fe,{}):e.jsxs("div",{children:[e.jsx(_e,{prompt:"机构信息获取失败"}),e.jsx(Te,{type:"button",className:"mx-auto mt-4 w-[50%] bg-primary !text-white",onClick:()=>j(),children:"重新获取机构信息"})]})})})]})}),Se={[a.enum.Ethereum]:"0xdAC17F958D2ee523a2206206994597C13D831ec7",[a.enum.Tron]:"TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",[a.enum.Binance]:"0x55d398326f99059fF775485246999027B3197955"},Ge=(c,n)=>c===a.enum.BFMeta?8:c===a.enum.Binance?18:6,Ye=X(c=>{const n=[0,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10],l=()=>{const s=+(i.rwaExp||"0");return s<n[1]?0:s<n[2]?1:s<n[3]?2:s<n[4]?3:s<n[5]?4:s<n[6]?5:s<n[7]?6:s<n[8]?7:s<n[9]?8:9},F=()=>{const u=l()+1,d=n[u];return d?`${String(q(d).minus(i.rwaExp||0))}`:"0"},j=()=>{const u=l()+1;return!n[u]},x=S(!1),[v,U]=f.useState(!1),[Q,J]=f.useState(""),[W,Z]=f.useState(""),I=ve(),[i]=pe(ie),[k,G]=f.useState(!0),L=[{assetType:"BFM",chainName:a.enum.BFMeta,amount:"0",decimals:8,contractAddress:"",address:i.address},{assetType:"DEXT",chainName:a.enum.BFMeta,amount:"0",decimals:8,contractAddress:"",address:i.address},{assetType:"USDT",chainName:a.enum.BFMeta,amount:"0",decimals:8,contractAddress:"",address:i.address}];i.addressList.forEach(s=>{(s.chainName===a.enum.Tron||s.chainName===a.enum.Ethereum||s.chainName===a.enum.Binance)&&L.push({assetType:"USDT",chainName:s.chainName,amount:"0",decimals:s.chainName===a.enum.Binance?18:6,contractAddress:Se[s.chainName],address:s.address})});const p=f.useRef(L),C=Ee(),Y=(s,u)=>C?"********":new q(s).div(Math.pow(10,u)).toFixed(18),V=async s=>{await ye(s),H(fe())};function ee(s,u=8){const[d,g=""]=String(s).split("."),m=g.slice(0,u);return(m.length>0?`${d}.${m}`:d).replace(/(?:\.0*|(\.\d+?)0+)$/,"$1")}return f.useEffect(()=>{let s=!0;return(async()=>{for(;s;){try{const d=p.current,g=new Map;d.forEach(r=>{g.has(r.chainName)||g.set(r.chainName,r)});const m={[`${a.enum.BFMeta}-BFM`]:"",[`${a.enum.BFMeta}-DEXT`]:"",[`${a.enum.BFMeta}-USDT`]:"",[`${a.enum.Binance}-USDT`]:"",[`${a.enum.Ethereum}-USDT`]:"",[`${a.enum.Tron}-USDT`]:""},_=[];for await(const r of g.values()){if(r.chainName===a.enum.BFMeta){const o=await fetch("https://walletapi.bfmeta.info/wallet/bfm/address/asset",{headers:{accept:"application/json, text/plain, */*","content-type":"application/json;charset=UTF-8"},method:"POST",body:JSON.stringify({address:r.address})}).then(t=>t.json()).then(t=>{if(t.success!==!0)throw t;if("result"in t)return t.result;throw new Error(T())}).catch(t=>console.error);if(o){const t=o.assets||{},M=Object.keys(t).find(w=>!!t[w]),b=M&&t[M];if(b){const w=b.BFM?.assetNumber,E=b.USDT?.assetNumber,$=b.DEXT?.assetNumber;w&&(m[`${a.enum.BFMeta}-BFM`]=w),E&&(m[`${a.enum.BFMeta}-USDT`]=E),$&&(m[`${a.enum.BFMeta}-DEXT`]=$),Object.keys(b).filter(y=>!["BFM","USDT","DEXT"].includes(y)).forEach(y=>{const B=b[y];B&&_.push({assetType:y,chainName:"BFMeta",decimals:8,address:i.address,amount:B.assetNumber,contractAddress:"",iconUrl:B.iconUrl})})}}}if(r.chainName===a.enum.Ethereum){const o=await fetch("https://walletapi.bfmeta.info/wallet/eth/account/balance/v2",{headers:{accept:"application/json, text/plain, */*","content-type":"application/json;charset=UTF-8"},method:"POST",body:JSON.stringify({address:r.address,contracts:[r.contractAddress]})}).then(t=>t.json()).then(t=>{if(t.success!==!0)throw t;if("result"in t)return t.result;throw new Error(T())}).catch(t=>console.error(t));if(o.length){const t=o[0];if(t){const h=t.amount;h&&(m[`${a.enum.Ethereum}-USDT`]=h)}}}if(r.chainName===a.enum.Binance){const o=await fetch("https://walletapi.bfmeta.info/wallet/bsc/account/balance/v2",{headers:{accept:"application/json, text/plain, */*","content-type":"application/json;charset=UTF-8"},method:"POST",body:JSON.stringify({address:r.address,contracts:[r.contractAddress]})}).then(t=>t.json()).then(t=>{if(t.success!==!0)throw t;if("result"in t)return t.result;throw new Error(T())}).catch(t=>console.error(t));if(o.length){const t=o[0];if(t){const h=t.amount;h&&(m[`${a.enum.Binance}-USDT`]=h)}}}if(r.chainName===a.enum.Tron){const o=await fetch("https://walletapi.bfmeta.info/wallet/tron/account/balance/v2",{headers:{accept:"application/json, text/plain, */*","content-type":"application/json;charset=UTF-8"},method:"POST",body:JSON.stringify({address:r.address,contracts:[r.contractAddress]})}).then(t=>t.json()).then(t=>{if(t.success!==!0)throw t;if("result"in t)return t.result;throw new Error(T())}).catch(t=>console.error(t));if(o.length){const t=o[0];if(t){const h=t.amount;h&&(m[`${a.enum.Tron}-USDT`]=h)}}}}p.current.forEach(r=>{const o=m[`${r.chainName}-${r.assetType}`];o&&(r.amount=o)}),p.current=[...p.current.filter(r=>r.chainName==="BFMeta"&&["BFM","USDT","DEXT"].includes(r.assetType)),..._,...p.current.filter(r=>r.chainName!=="BFMeta")],k&&G(!1),I()}catch(d){console.error(d)}await te(3e4)}})(),()=>{s=!1}},[]),f.useEffect(()=>{const s=z(()=>{I()});return()=>{s()}}),e.jsxs(K,{name:"main",children:[e.jsx(D,{title:"Web3乐园",className:"text-white !filter-none",style:{"--f7-bars-bg-color-rgb":"100,15,243","--f7-bars-border-color":"transparent"}}),e.jsxs("div",{className:"relative z-10 mx-4 mt-14 flex h-42 bg-[url('../images/paradise/home-user-bg.webp')] bg-[length:100%_100%] bg-top bg-no-repeat",children:[e.jsx("img",{src:"./images/paradise/home-user-tx.webp",className:"relative -top-6 ml-[5%] w-[50%]",alt:""}),e.jsxs("div",{className:"flex w-[50%] flex-col justify-center p-5 pt-7 text-title",children:[e.jsxs("div",{className:"mb-1.5 flex items-center justify-start",children:[e.jsx("img",{src:`./images/paradise/level_${i.level}.svg`,className:"h-auto w-10",alt:""}),e.jsx("img",{src:`./images/es_${l()}.svg`,className:"ml-2 h-auto w-10",alt:"",onClick:()=>x.value=!0})]}),e.jsxs("div",{className:"mb-2 w-full",children:[ce(),": ",i.nickname]}),e.jsxs("div",{className:"w-full",children:[oe(),": ",C?"********":i.superiorId]})]}),e.jsxs("div",{className:"absolute -top-11 left-[78%] flex -translate-x-1/2 flex-col items-center justify-center",onClick:()=>{c.safeF7Navigater.friend()},children:[e.jsx("img",{src:"./images/paradise/my_friend.webp",className:"h-12 w-auto"}),e.jsx("span",{className:"relative bottom-2 text-sm text-subtext",children:"友圈"})]})]}),e.jsxs("div",{onClick:()=>{c.safeF7Navigater.dailyMotivation()},className:"relative -top-[2px] -z-10 mx-auto mb-1 flex h-12 w-[78%] items-center justify-center rounded-b-3 bg-[url('../images/paradise/bg_ecological_incentives.png')] bg-[length:100%_100%] bg-top bg-no-repeat",children:[e.jsx("img",{src:"./images/paradise/ecological_incentives_icon.webp",className:"relative top-0.5 mr-1 h-auto w-8"}),e.jsx("span",{className:"text-base font-bold text-title",children:"每日激励"})]}),e.jsx("div",{className:"mx-4.5 mb-1 rounded-5 bg-white py-1",children:e.jsxs("div",{className:"flex h-24 flex-col justify-center rounded-2 bg-[url('../images/paradise/reward_bg.webp')] bg-[length:100%_100%] bg-top bg-no-repeat px-4 text-sm font-bold text-white",children:[e.jsx("div",{className:"pt-2.5",children:le()}),e.jsx("div",{className:"mb-0.5",children:de()}),e.jsxs("div",{children:[e.jsx("button",{className:"bg-golden-text w-auto rounded-1 border border-white px-1 py-0.5 text-sm",onClick:()=>{c.safeF7Navigater.withdrawalInfo()},children:"领取收益"}),e.jsx("button",{className:"ml-4 w-auto rounded-1 border border-[#FFE645] bg-[#FFE645] px-1 py-0.5 text-sm text-[#A95406]",onClick:()=>{c.safeF7Navigater.airdropDetails()},children:"收益详情"})]})]})}),e.jsx("div",{className:"mx-4.5 mb-4 rounded-5 bg-white py-1",children:e.jsxs("div",{className:"flex h-24 flex-col justify-center rounded-2 bg-[url('../images/paradise/rwa_reward_bg.webp')] bg-[length:100%_100%] bg-top bg-no-repeat px-4 text-sm font-bold text-white",children:[e.jsx("div",{className:"pt-2.5",children:"RWA"}),e.jsx("div",{className:"mb-0.5",children:"空投/激励收益领取"}),e.jsxs("div",{children:[e.jsx("button",{className:"w-auto rounded-1 bg-[#904623] px-1 py-0.5 text-sm",onClick:()=>{c.safeF7Navigater.exchangeWithdrawalInfo()},children:"领取空投"}),e.jsx("button",{className:"ml-4 w-auto rounded-1 border border-white bg-white px-1 py-0.5 text-sm text-[#904623]",onClick:()=>{c.safeF7Navigater.motivationWithdrawalInfo()},children:"激励收益"})]})]})}),e.jsxs("div",{className:"medium-grid-cols-4 grid-gap mx-2.5 grid grid-cols-2 px-2",children:[e.jsx("div",{className:"mb-4 mr-2.5 flex h-18 items-center rounded-2 bg-[url('../images/paradise/home_fn_0.webp')] bg-[length:100%_100%] bg-top bg-no-repeat pl-2 text-lg font-bold text-title",onClick:()=>{c.safeF7Navigater.auditList()},children:me()}),e.jsx("div",{className:"mb-4 ml-2.5 flex h-18 items-center rounded-2 bg-[url('../images/paradise/home_fn_1.webp')] bg-[length:100%_100%] bg-top bg-no-repeat pl-2 text-lg font-bold text-title",onClick:()=>{V(i.uid),Z(R()),J(i.uid),U(!0)},children:R()}),e.jsx("div",{className:"mr-2.5 flex h-18 items-center rounded-2 bg-[url('../images/paradise/home_fn_2.webp')] bg-[length:100%_100%] bg-top bg-no-repeat pl-2 text-lg font-bold text-title",onClick:async()=>{try{N.preloader.show(),await P(i.uid)}finally{N.preloader.hide()}c.safeF7Navigater.promotedList()},children:xe()}),e.jsx("div",{className:"ml-2.5 flex h-18 items-center rounded-2 bg-[url('../images/paradise/home_fn_3.webp')] bg-[length:100%_100%] bg-top bg-no-repeat pl-2 text-lg font-bold text-title",onClick:async()=>{try{N.preloader.show(),await P(i.uid)}finally{N.preloader.hide()}c.safeF7Navigater.promoted()},children:ue()})]}),e.jsx("div",{className:"mt-5 px-5 text-xl font-bold text-title",children:he()}),e.jsx(we,{className:"mx-2.5 mt-2 rounded-3 bg-white p-2.5",children:p.current.map((s,u)=>e.jsx(ge,{className:"mb-3 rounded-2",style:{background:"linear-gradient(90deg, #f4f4fc 0%, #f4f4fc 99%)",boxShadow:"0px 4px 8px 0px #F6F7FC,0px 1px 1px 0px #F6F7FC"},children:e.jsxs("div",{className:"flex w-full items-center justify-between p-1",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ae(s.assetType,s.chainName,s.iconUrl),alt:"",className:"h-9 w-9"}),e.jsx("img",{src:re(s.chainName),alt:"",className:"absolute -bottom-1 -right-0.5 h-5 w-5"})]}),e.jsxs("div",{className:"ml-2",children:[e.jsx("div",{children:s.assetType}),e.jsx("div",{className:"text-xs text-text",children:s.chainName})]})]}),e.jsx("div",{children:k?e.jsx(je,{size:16,color:"black"}):ee(Y(s.amount,s.decimals))})]})},s.chainName+s.assetType))}),e.jsx(O,{open:v,onRequireClose:()=>{U(!1)},title:W,children:Q}),e.jsx(O,{open:x.value,onRequireClose:()=>{x.value=!1},title:"投资等级",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"mb-1 flex items-center justify-between",children:[e.jsx("div",{className:"mr-2 text-left text-text",children:"当前所在机构"}),e.jsx("div",{className:"text-right",children:Be().name})]}),e.jsxs("div",{className:"mb-1 flex items-center justify-between",children:[e.jsx("div",{className:"mr-2 text-left text-text",children:"当前投资等级"}),e.jsx("div",{className:"text-right",children:e.jsx("img",{src:`./images/es_${l()}.svg`,className:"ml-2 h-auto w-10",alt:""})})]}),e.jsxs("div",{className:"mb-1 flex items-center justify-between",children:[e.jsx("div",{className:"mr-2 text-left text-text",children:"已投资额度"}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-primary",children:i.rwaExp||"0"}),"USDT"]})]}),e.jsxs("div",{className:"mb-1 flex items-center justify-between",children:[e.jsx("div",{className:"mr-2 text-left text-text",children:"距升级投资额"}),e.jsx("div",{className:"text-right",children:j()?"已到达最高等级":e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-red",children:F()}),"USDT"]})})]})]})})]})});export{Ye as D,Ze as O,Se as c,Ge as g};
