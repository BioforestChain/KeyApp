import{_ as s,c as a,o as e,ag as d}from"./chunks/framework.B0we9iV-.js";const k=JSON.parse('{"title":"实现状态","description":"","frontmatter":{},"headers":[],"relativePath":"white-book/10-生态篇/05-实现状态.md","filePath":"white-book/10-生态篇/05-实现状态.md"}'),i={name:"white-book/10-生态篇/05-实现状态.md"};function n(r,t,l,o,p,h){return e(),a("div",null,[...t[0]||(t[0]=[d(`<h1 id="实现状态" tabindex="-1">实现状态 <a class="header-anchor" href="#实现状态" aria-label="Permalink to &quot;实现状态&quot;">​</a></h1><h2 id="已完成" tabindex="-1">已完成 <a class="header-anchor" href="#已完成" aria-label="Permalink to &quot;已完成&quot;">​</a></h2><h3 id="phase-1-基础设施-✅" tabindex="-1">Phase 1: 基础设施 ✅ <a class="header-anchor" href="#phase-1-基础设施-✅" aria-label="Permalink to &quot;Phase 1: 基础设施 ✅&quot;">​</a></h3><table tabindex="0"><thead><tr><th>组件</th><th>路径</th><th>状态</th></tr></thead><tbody><tr><td>Monorepo 配置</td><td><code>pnpm-workspace.yaml</code></td><td>✅ 完成</td></tr><tr><td>Bio SDK 包</td><td><code>packages/bio-sdk/</code></td><td>✅ 完成</td></tr><tr><td>一键传送小程序</td><td><code>miniapps/teleport/</code></td><td>✅ 完成</td></tr><tr><td>锻造小程序</td><td><code>miniapps/forge/</code></td><td>✅ 完成</td></tr><tr><td>订阅源配置</td><td><code>public/ecosystem.json</code></td><td>✅ 完成</td></tr></tbody></table><h3 id="phase-2-host-provider-✅" tabindex="-1">Phase 2: Host Provider ✅ <a class="header-anchor" href="#phase-2-host-provider-✅" aria-label="Permalink to &quot;Phase 2: Host Provider ✅&quot;">​</a></h3><table tabindex="0"><thead><tr><th>组件</th><th>路径</th><th>状态</th></tr></thead><tbody><tr><td>类型定义</td><td><code>src/services/ecosystem/types.ts</code></td><td>✅ 完成</td></tr><tr><td>PostMessage Bridge</td><td><code>src/services/ecosystem/bridge.ts</code></td><td>✅ 完成</td></tr><tr><td>Wallet Handlers</td><td><code>src/services/ecosystem/handlers/wallet.ts</code></td><td>✅ 完成</td></tr><tr><td>Signing Handlers</td><td><code>src/services/ecosystem/handlers/signing.ts</code></td><td>✅ 完成</td></tr><tr><td>Transfer Handlers</td><td><code>src/services/ecosystem/handlers/transfer.ts</code></td><td>✅ 完成</td></tr><tr><td>Registry</td><td><code>src/services/ecosystem/registry.ts</code></td><td>✅ 完成</td></tr><tr><td>Provider Entry</td><td><code>src/services/ecosystem/provider.ts</code></td><td>✅ 完成</td></tr></tbody></table><h3 id="phase-3-ui-集成-✅" tabindex="-1">Phase 3: UI 集成 ✅ <a class="header-anchor" href="#phase-3-ui-集成-✅" aria-label="Permalink to &quot;Phase 3: UI 集成 ✅&quot;">​</a></h3><table tabindex="0"><thead><tr><th>组件</th><th>路径</th><th>状态</th></tr></thead><tbody><tr><td>EcosystemTab</td><td><code>src/stackflow/activities/tabs/EcosystemTab.tsx</code></td><td>✅ 完成</td></tr><tr><td>MiniappActivity</td><td><code>src/stackflow/activities/MiniappActivity.tsx</code></td><td>✅ 完成</td></tr><tr><td>MiniappPage</td><td><code>src/pages/ecosystem/miniapp.tsx</code></td><td>✅ 完成</td></tr><tr><td>TabBar 更新</td><td><code>src/stackflow/components/TabBar.tsx</code></td><td>✅ 完成</td></tr><tr><td>路由注册</td><td><code>src/stackflow/stackflow.ts</code></td><td>✅ 完成</td></tr></tbody></table><h3 id="测试-✅" tabindex="-1">测试 ✅ <a class="header-anchor" href="#测试-✅" aria-label="Permalink to &quot;测试 ✅&quot;">​</a></h3><table tabindex="0"><thead><tr><th>测试文件</th><th>覆盖内容</th></tr></thead><tbody><tr><td><code>types.test.ts</code></td><td>错误码、响应构造函数</td></tr><tr><td><code>bridge.test.ts</code></td><td>Handler 注册、iframe 绑定、事件发送</td></tr><tr><td><code>registry.test.ts</code></td><td>源管理、刷新、应用查询</td></tr></tbody></table><h3 id="phase-4-ui-对话框-✅" tabindex="-1">Phase 4: UI 对话框 ✅ <a class="header-anchor" href="#phase-4-ui-对话框-✅" aria-label="Permalink to &quot;Phase 4: UI 对话框 ✅&quot;">​</a></h3><table tabindex="0"><thead><tr><th>组件</th><th>路径</th><th>状态</th></tr></thead><tbody><tr><td>AccountPickerJob</td><td><code>src/stackflow/activities/sheets/AccountPickerJob.tsx</code></td><td>✅ 完成</td></tr><tr><td>SigningConfirmJob</td><td><code>src/stackflow/activities/sheets/SigningConfirmJob.tsx</code></td><td>✅ 完成</td></tr><tr><td>PermissionRequestJob</td><td><code>src/stackflow/activities/sheets/PermissionRequestJob.tsx</code></td><td>✅ 完成</td></tr><tr><td>MiniappPage 回调注册</td><td><code>src/pages/ecosystem/miniapp.tsx</code></td><td>✅ 完成</td></tr></tbody></table><h3 id="phase-5-权限与架构-✅" tabindex="-1">Phase 5: 权限与架构 ✅ <a class="header-anchor" href="#phase-5-权限与架构-✅" aria-label="Permalink to &quot;Phase 5: 权限与架构 ✅&quot;">​</a></h3><table tabindex="0"><thead><tr><th>组件</th><th>路径</th><th>状态</th></tr></thead><tbody><tr><td>EcosystemStore</td><td><code>src/stores/ecosystem.ts</code></td><td>✅ 完成</td></tr><tr><td>权限控制模块</td><td><code>src/services/ecosystem/permissions.ts</code></td><td>✅ 完成</td></tr><tr><td>Bridge 权限检查</td><td><code>src/services/ecosystem/bridge.ts</code></td><td>✅ 完成</td></tr><tr><td>HandlerContext</td><td><code>src/services/ecosystem/handlers/context.ts</code></td><td>✅ 完成</td></tr><tr><td>Handler 重构</td><td><code>src/services/ecosystem/handlers/*.ts</code></td><td>✅ 完成</td></tr></tbody></table><h3 id="phase-6-功能完善-✅" tabindex="-1">Phase 6: 功能完善 ✅ <a class="header-anchor" href="#phase-6-功能完善-✅" aria-label="Permalink to &quot;Phase 6: 功能完善 ✅&quot;">​</a></h3><table tabindex="0"><thead><tr><th>组件</th><th>路径</th><th>状态</th></tr></thead><tbody><tr><td>MiniappTransferConfirmJob</td><td><code>src/stackflow/activities/sheets/MiniappTransferConfirmJob.tsx</code></td><td>✅ 完成</td></tr><tr><td>SettingsSourcesActivity</td><td><code>src/stackflow/activities/SettingsSourcesActivity.tsx</code></td><td>✅ 完成</td></tr><tr><td>设置页入口</td><td><code>src/pages/settings/index.tsx</code></td><td>✅ 完成</td></tr></tbody></table><h2 id="待完成" tabindex="-1">待完成 <a class="header-anchor" href="#待完成" aria-label="Permalink to &quot;待完成&quot;">​</a></h2><h3 id="phase-7-后续优化" tabindex="-1">Phase 7: 后续优化 <a class="header-anchor" href="#phase-7-后续优化" aria-label="Permalink to &quot;Phase 7: 后续优化&quot;">​</a></h3><ul><li>[ ] 实际签名服务集成（需要钱包解锁流程）</li><li>[ ] 实际转账服务集成</li><li>[ ] 订阅系统 v2：本地缓存（IndexedDB + ETag）</li><li>[ ] 订阅系统 v2：评分模型（official/community/featured）+ 部分列出策略</li><li>[ ] 订阅系统 v2：搜索接口（订阅列表以外的应用）</li><li>[ ] 交易流水线：createTransaction + signTransaction（不可省略）</li><li>[ ] AppId 命名规范（反向域名）校验与迁移策略</li><li>[ ] 自维护导航同步插件：<code>packages/plugin-navigation-sync</code>（URLPattern polyfill）</li></ul><h3 id="phase-8-小程序完善" tabindex="-1">Phase 8: 小程序完善 <a class="header-anchor" href="#phase-8-小程序完善" aria-label="Permalink to &quot;Phase 8: 小程序完善&quot;">​</a></h3><ul><li>[ ] 一键传送后端 API 集成</li><li>[ ] 锻造后端 API 集成</li><li>[ ] E2E 测试</li></ul><h3 id="phase-9-dweb-集成" tabindex="-1">Phase 9: DWEB 集成 <a class="header-anchor" href="#phase-9-dweb-集成" aria-label="Permalink to &quot;Phase 9: DWEB 集成&quot;">​</a></h3><ul><li>[ ] Transport 抽象层</li><li>[ ] DWEB 适配器</li></ul><h2 id="构建命令" tabindex="-1">构建命令 <a class="header-anchor" href="#构建命令" aria-label="Permalink to &quot;构建命令&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># SDK</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sdk:build</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # 构建 SDK</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sdk:dev</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             # 监听模式</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 小程序</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> miniapps:build</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 构建所有小程序</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> miniapps:dev:teleport</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 开发一键传送</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> miniapps:dev:forge</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 开发锻造</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 测试</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --testPathPattern=ecosystem</span></span></code></pre></div><h2 id="目录结构" tabindex="-1">目录结构 <a class="header-anchor" href="#目录结构" aria-label="Permalink to &quot;目录结构&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>packages/</span></span>
<span class="line"><span>└── bio-sdk/                 # @biochain/bio-sdk</span></span>
<span class="line"><span>    ├── src/</span></span>
<span class="line"><span>    │   ├── index.ts         # 入口，注入 window.bio</span></span>
<span class="line"><span>    │   ├── types.ts         # 类型定义</span></span>
<span class="line"><span>    │   ├── provider.ts      # BioProvider 实现</span></span>
<span class="line"><span>    │   └── events.ts        # 事件发射器</span></span>
<span class="line"><span>    └── dist/                # 构建输出</span></span>
<span class="line"><span></span></span>
<span class="line"><span>miniapps/</span></span>
<span class="line"><span>├── teleport/                # 一键传送</span></span>
<span class="line"><span>└── forge/                   # 锻造</span></span>
<span class="line"><span></span></span>
<span class="line"><span>src/services/ecosystem/</span></span>
<span class="line"><span>├── types.ts                 # Host 端类型</span></span>
<span class="line"><span>├── bridge.ts                # PostMessage 通信</span></span>
<span class="line"><span>├── provider.ts              # Provider 初始化</span></span>
<span class="line"><span>├── registry.ts              # 小程序注册表</span></span>
<span class="line"><span>├── handlers/</span></span>
<span class="line"><span>│   ├── wallet.ts            # 钱包方法</span></span>
<span class="line"><span>│   ├── signing.ts           # 签名方法</span></span>
<span class="line"><span>│   └── transfer.ts          # 转账方法</span></span>
<span class="line"><span>└── __tests__/               # 单元测试</span></span></code></pre></div>`,27)])])}const b=s(i,[["render",n]]);export{k as __pageData,b as default};
