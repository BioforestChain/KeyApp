import{_ as t,c as e,o as n,ag as s}from"./chunks/framework.B0we9iV-.js";const b=JSON.parse('{"title":"平台服务","description":"","frontmatter":{},"headers":[],"relativePath":"white-book/04-服务篇/03-平台服务/index.md","filePath":"white-book/04-服务篇/03-平台服务/index.md"}'),d={name:"white-book/04-服务篇/03-平台服务/index.md"};function r(i,a,l,p,o,h){return n(),e("div",null,[...a[0]||(a[0]=[s(`<h1 id="平台服务" tabindex="-1">平台服务 <a class="header-anchor" href="#平台服务" aria-label="Permalink to &quot;平台服务&quot;">​</a></h1><blockquote><p>跨平台能力的统一抽象</p></blockquote><hr><h2 id="概述" tabindex="-1">概述 <a class="header-anchor" href="#概述" aria-label="Permalink to &quot;概述&quot;">​</a></h2><p>BFM Pay 运行在多种环境（Web 浏览器、DWEB 容器），平台服务层提供统一抽象，屏蔽环境差异。</p><hr><h2 id="服务列表" tabindex="-1">服务列表 <a class="header-anchor" href="#服务列表" aria-label="Permalink to &quot;服务列表&quot;">​</a></h2><table tabindex="0"><thead><tr><th>服务</th><th>说明</th><th>Web</th><th>DWEB</th></tr></thead><tbody><tr><td><a href="./IBiometricService.html">IBiometricService</a></td><td>生物识别认证</td><td>WebAuthn</td><td>Plaoc</td></tr><tr><td><a href="./IStorageService.html">IStorageService</a></td><td>安全存储</td><td>IndexedDB+加密</td><td>Plaoc</td></tr><tr><td><a href="./IClipboardService.html">IClipboardService</a></td><td>剪贴板操作</td><td>Clipboard API</td><td>Plaoc</td></tr><tr><td><a href="./ICameraService.html">ICameraService</a></td><td>相机/扫码</td><td>MediaDevices</td><td>Plaoc</td></tr><tr><td><a href="./IShareService.html">IShareService</a></td><td>系统分享</td><td>Web Share</td><td>Plaoc</td></tr><tr><td><a href="./IHapticService.html">IHapticService</a></td><td>振动反馈</td><td>Vibration API</td><td>Plaoc</td></tr><tr><td><a href="./IDeepLinkService.html">IDeepLinkService</a></td><td>深度链接</td><td>URL handling</td><td>Plaoc</td></tr></tbody></table><hr><h2 id="平台检测" tabindex="-1">平台检测 <a class="header-anchor" href="#平台检测" aria-label="Permalink to &quot;平台检测&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>IPlatformDetector {</span></span>
<span class="line"><span>  // 当前平台类型</span></span>
<span class="line"><span>  platform: &#39;web&#39; | &#39;dweb&#39;</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  // 检查能力是否可用</span></span>
<span class="line"><span>  isAvailable(capability: Capability): boolean</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  // 获取平台服务实例</span></span>
<span class="line"><span>  getServices(): IPlatformServices</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Capability = </span></span>
<span class="line"><span>  | &#39;biometric&#39;</span></span>
<span class="line"><span>  | &#39;secure-storage&#39;</span></span>
<span class="line"><span>  | &#39;clipboard&#39;</span></span>
<span class="line"><span>  | &#39;camera&#39;</span></span>
<span class="line"><span>  | &#39;share&#39;</span></span>
<span class="line"><span>  | &#39;haptic&#39;</span></span>
<span class="line"><span>  | &#39;deep-link&#39;</span></span></code></pre></div><hr><h2 id="降级策略" tabindex="-1">降级策略 <a class="header-anchor" href="#降级策略" aria-label="Permalink to &quot;降级策略&quot;">​</a></h2><p>当某能力不可用时：</p><table tabindex="0"><thead><tr><th>能力</th><th>降级方案</th></tr></thead><tbody><tr><td>生物识别</td><td>仅使用图案锁认证</td></tr><tr><td>安全存储</td><td>使用加密的 IndexedDB</td></tr><tr><td>相机</td><td>隐藏扫码，提供手动输入</td></tr><tr><td>分享</td><td>提供复制功能替代</td></tr><tr><td>振动</td><td>静默失败</td></tr></tbody></table><hr><h2 id="权限管理" tabindex="-1">权限管理 <a class="header-anchor" href="#权限管理" aria-label="Permalink to &quot;权限管理&quot;">​</a></h2><h3 id="需要权限的服务" tabindex="-1">需要权限的服务 <a class="header-anchor" href="#需要权限的服务" aria-label="Permalink to &quot;需要权限的服务&quot;">​</a></h3><table tabindex="0"><thead><tr><th>服务</th><th>权限</th><th>请求时机</th></tr></thead><tbody><tr><td>相机</td><td>camera</td><td>首次扫码时</td></tr><tr><td>生物识别</td><td>biometric</td><td>启用生物识别时</td></tr><tr><td>剪贴板读取</td><td>clipboard-read</td><td>粘贴地址时</td></tr></tbody></table><h3 id="权限状态" tabindex="-1">权限状态 <a class="header-anchor" href="#权限状态" aria-label="Permalink to &quot;权限状态&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>PermissionStatus = &#39;granted&#39; | &#39;denied&#39; | &#39;prompt&#39;</span></span></code></pre></div><h3 id="权限被拒绝处理" tabindex="-1">权限被拒绝处理 <a class="header-anchor" href="#权限被拒绝处理" aria-label="Permalink to &quot;权限被拒绝处理&quot;">​</a></h3><ul><li><strong>MUST</strong> 显示引导用户到系统设置</li><li><strong>MUST NOT</strong> 反复请求被拒绝的权限</li><li><strong>SHOULD</strong> 提供替代操作方式</li></ul>`,23)])])}const m=t(d,[["render",r]]);export{b as __pageData,m as default};
