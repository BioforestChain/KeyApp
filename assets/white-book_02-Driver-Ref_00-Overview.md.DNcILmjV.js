import{_ as s,c as i,o as e,ag as n}from"./chunks/framework.B0we9iV-.js";const c=JSON.parse('{"title":"00. 适配层架构 (Overview)","description":"","frontmatter":{},"headers":[],"relativePath":"white-book/02-Driver-Ref/00-Overview.md","filePath":"white-book/02-Driver-Ref/00-Overview.md"}'),r={name:"white-book/02-Driver-Ref/00-Overview.md"};function l(t,a,p,h,o,d){return e(),i("div",null,[...a[0]||(a[0]=[n(`<h1 id="_00-适配层架构-overview" tabindex="-1">00. 适配层架构 (Overview) <a class="header-anchor" href="#_00-适配层架构-overview" aria-label="Permalink to &quot;00. 适配层架构 (Overview)&quot;">​</a></h1><p>Code: <code>src/services/chain-adapter/</code></p><p>为了支持多链 (EVM, UTXO, TVM)，KeyApp 引入了一个抽象层，称为 <strong>Driver Layer (或 HAL)</strong>。</p><h2 id="核心概念" tabindex="-1">核心概念 <a class="header-anchor" href="#核心概念" aria-label="Permalink to &quot;核心概念&quot;">​</a></h2><h3 id="_1-apiprovider-driver" tabindex="-1">1. ApiProvider (Driver) <a class="header-anchor" href="#_1-apiprovider-driver" aria-label="Permalink to &quot;1. ApiProvider (Driver)&quot;">​</a></h3><p>每个 Provider 代表一个特定的数据源驱动。</p><ul><li>例如：<code>EtherscanProvider</code>, <code>EvmRpcProvider</code>, <code>MempoolProvider</code>。</li><li>职责：负责与具体的后端 API 通信，并规范化数据格式。</li></ul><h3 id="_2-chainprovider-manager" tabindex="-1">2. ChainProvider (Manager) <a class="header-anchor" href="#_2-chainprovider-manager" aria-label="Permalink to &quot;2. ChainProvider (Manager)&quot;">​</a></h3><p>每个链 (<code>chainId</code>) 拥有一个 <code>ChainProvider</code> 实例。</p><ul><li>职责：聚合该链配置下的所有 <code>ApiProvider</code>。</li><li>策略：实现 <strong>Fallback</strong> 逻辑。如果 Etherscan 挂了，自动切换到 RPC。</li></ul><h3 id="_3-registry-factory" tabindex="-1">3. Registry (Factory) <a class="header-anchor" href="#_3-registry-factory" aria-label="Permalink to &quot;3. Registry (Factory)&quot;">​</a></h3><p>负责根据 <code>default-chains.json</code> 的配置，动态实例化对应的 Providers。</p><h2 id="架构图" tabindex="-1">架构图 <a class="header-anchor" href="#架构图" aria-label="Permalink to &quot;架构图&quot;">​</a></h2><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    User[UI / WalletStore]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph &quot;ChainProvider (Manager)&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        LB[Load Balancer / Fallback]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph &quot;Drivers&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        P1[Etherscan Provider]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        P2[RPC Provider]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        P3[WalletAPI Provider]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph &quot;External World&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        API1[api.etherscan.io]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        API2[infura.io]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        API3[walletapi.bfmeta.info]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    User --&gt; LB</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    LB --&gt; P1 &amp; P2 &amp; P3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    P1 --&gt; API1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    P2 --&gt; API2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    P3 --&gt; API3</span></span></code></pre></div>`,14)])])}const k=s(r,[["render",l]]);export{c as __pageData,k as default};
