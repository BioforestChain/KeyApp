import{_ as a,c as t,o as i,ag as n}from"./chunks/framework.B0we9iV-.js";const p=JSON.parse('{"title":"Transaction Lifecycle","description":"","frontmatter":{},"headers":[],"relativePath":"white-book/10-Wallet-Guide/03-Transaction-Flow/01-Lifecycle.md","filePath":"white-book/10-Wallet-Guide/03-Transaction-Flow/01-Lifecycle.md"}'),o={name:"white-book/10-Wallet-Guide/03-Transaction-Flow/01-Lifecycle.md"};function s(r,e,c,d,l,h){return i(),t("div",null,[...e[0]||(e[0]=[n('<h1 id="transaction-lifecycle" tabindex="-1">Transaction Lifecycle <a class="header-anchor" href="#transaction-lifecycle" aria-label="Permalink to &quot;Transaction Lifecycle&quot;">â€‹</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">â€‹</a></h2><p>Transactions in KeyApp follow a unified lifecycle state machine, regardless of the underlying blockchain (BioForest, EVM, UTXO, etc.). This ensures a consistent user experience across different networks.</p><h2 id="lifecycle-states" tabindex="-1">Lifecycle States <a class="header-anchor" href="#lifecycle-states" aria-label="Permalink to &quot;Lifecycle States&quot;">â€‹</a></h2><p>The transaction lifecycle is normalized into four primary states:</p><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stateDiagram-v2</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [*] --&gt; Pending: Build &amp; Broadcast</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Pending --&gt; Confirmed: Sufficient Confirmations</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Pending --&gt; Failed: Reverted/Rejected</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Pending --&gt; Cancelled: Replaced/Dropped</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Confirmed --&gt; [*]</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Failed --&gt; [*]</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Cancelled --&gt; [*]</span></span></code></pre></div><table tabindex="0"><thead><tr><th>State</th><th>Description</th><th>Color Code</th></tr></thead><tbody><tr><td><code>pending</code></td><td>Broadcasted but not yet included in a block (or insufficient confirmations).</td><td>ðŸŸ¨ Yellow</td></tr><tr><td><code>confirmed</code></td><td>Included in a block with sufficient confirmations.</td><td>ðŸŸ© Green</td></tr><tr><td><code>failed</code></td><td>Execution failed (e.g., out of gas, revert) or rejected by network.</td><td>ðŸŸ¥ Red</td></tr><tr><td><code>cancelled</code></td><td>Replaced by a new transaction (nonce reuse) or dropped from mempool.</td><td>â¬œ Gray</td></tr></tbody></table><h2 id="data-flow" tabindex="-1">Data Flow <a class="header-anchor" href="#data-flow" aria-label="Permalink to &quot;Data Flow&quot;">â€‹</a></h2><h3 id="_1-creation-build" tabindex="-1">1. Creation (<code>Build</code>) <a class="header-anchor" href="#_1-creation-build" aria-label="Permalink to &quot;1. Creation (`Build`)&quot;">â€‹</a></h3><ul><li><strong>Input</strong>: <code>TransferParams</code> (from, to, amount, memo)</li><li><strong>Service</strong>: <code>buildTransaction</code></li><li><strong>Output</strong>: <code>UnsignedTransaction</code> (chain-specific payload)</li></ul><h3 id="_2-signing-sign" tabindex="-1">2. Signing (<code>Sign</code>) <a class="header-anchor" href="#_2-signing-sign" aria-label="Permalink to &quot;2. Signing (`Sign`)&quot;">â€‹</a></h3><ul><li><strong>Input</strong>: <code>UnsignedTransaction</code>, <code>PrivateKey</code></li><li><strong>Service</strong>: <code>signTransaction</code></li><li><strong>Output</strong>: <code>SignedTransaction</code> (payload + signature)</li></ul><h3 id="_3-broadcasting-broadcast" tabindex="-1">3. Broadcasting (<code>Broadcast</code>) <a class="header-anchor" href="#_3-broadcasting-broadcast" aria-label="Permalink to &quot;3. Broadcasting (`Broadcast`)&quot;">â€‹</a></h3><ul><li><strong>Input</strong>: <code>SignedTransaction</code></li><li><strong>Service</strong>: <code>broadcastTransaction</code></li><li><strong>Output</strong>: <code>TransactionHash</code> (txID)</li></ul><h3 id="_4-monitoring-watch" tabindex="-1">4. Monitoring (<code>Watch</code>) <a class="header-anchor" href="#_4-monitoring-watch" aria-label="Permalink to &quot;4. Monitoring (`Watch`)&quot;">â€‹</a></h3><ul><li><strong>Input</strong>: <code>TransactionHash</code></li><li><strong>Service</strong>: <code>getTransactionStatus</code></li><li><strong>Mechanism</strong>: Polling or WebSocket subscription</li><li><strong>Normalization</strong>: <ul><li><code>BioforestTransactionService</code>: Queries <code>/transactions/query</code>.</li><li><code>EtherscanProvider</code>: Queries <code>/api?module=transaction</code>.</li><li><code>BtcWalletProvider</code>: Queries <code>/api/v2/tx</code>.</li></ul></li></ul><h2 id="transaction-types" tabindex="-1">Transaction Types <a class="header-anchor" href="#transaction-types" aria-label="Permalink to &quot;Transaction Types&quot;">â€‹</a></h2><p>The <code>WrappedTransactionProvider</code> normalizes various chain-specific operation types into a generic <code>Action</code> enum:</p><ul><li><strong><code>transfer</code></strong>: Native token transfer.</li><li><strong><code>contract</code></strong>: Smart contract interaction.</li><li><strong><code>stake</code> / <code>unstake</code></strong>: Staking operations.</li><li><strong><code>issueAsset</code></strong>: Asset creation (BioForest).</li><li><strong><code>dapp</code></strong>: Miniapp interaction (BioForest).</li></ul><h2 id="ui-representation" tabindex="-1">UI Representation <a class="header-anchor" href="#ui-representation" aria-label="Permalink to &quot;UI Representation&quot;">â€‹</a></h2><p>Transactions are displayed using the <code>TransactionItem</code> and <code>TransactionStatus</code> components.</p><h3 id="status-badge" tabindex="-1">Status Badge <a class="header-anchor" href="#status-badge" aria-label="Permalink to &quot;Status Badge&quot;">â€‹</a></h3><p>Located in <code>src/components/transaction/transaction-status.tsx</code>.</p><ul><li><strong>Success</strong>: Check icon, Green background.</li><li><strong>Failed</strong>: X icon, Red background.</li><li><strong>Pending</strong>: Clock icon, Yellow background.</li><li><strong>Cancelled</strong>: Ban icon, Gray background.</li></ul><h3 id="history-list" tabindex="-1">History List <a class="header-anchor" href="#history-list" aria-label="Permalink to &quot;History List&quot;">â€‹</a></h3><p>Located in <code>src/components/transaction/transaction-list.tsx</code>.</p><ul><li>Groups transactions by date.</li><li>Shows directional icons (Incoming/Outgoing).</li><li>Displays primary asset amount and symbol.</li></ul>',27)])])}const u=a(o,[["render",s]]);export{p as __pageData,u as default};
