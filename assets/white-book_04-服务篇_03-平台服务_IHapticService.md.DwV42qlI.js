import{_ as t,c as s,o as n,ag as e}from"./chunks/framework.B0we9iV-.js";const b=JSON.parse('{"title":"IHapticService 触觉反馈服务","description":"","frontmatter":{},"headers":[],"relativePath":"white-book/04-服务篇/03-平台服务/IHapticService.md","filePath":"white-book/04-服务篇/03-平台服务/IHapticService.md"}'),i={name:"white-book/04-服务篇/03-平台服务/IHapticService.md"};function l(d,a,p,r,o,c){return n(),s("div",null,[...a[0]||(a[0]=[e(`<h1 id="ihapticservice-触觉反馈服务" tabindex="-1">IHapticService 触觉反馈服务 <a class="header-anchor" href="#ihapticservice-触觉反馈服务" aria-label="Permalink to &quot;IHapticService 触觉反馈服务&quot;">​</a></h1><p>触觉反馈服务提供跨平台的振动和触觉反馈能力，增强用户交互体验。</p><h2 id="接口定义" tabindex="-1">接口定义 <a class="header-anchor" href="#接口定义" aria-label="Permalink to &quot;接口定义&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>IHapticService {</span></span>
<span class="line"><span>  // 预定义反馈</span></span>
<span class="line"><span>  impact(style: ImpactStyle): Promise&lt;void&gt;</span></span>
<span class="line"><span>  notification(type: NotificationType): Promise&lt;void&gt;</span></span>
<span class="line"><span>  selection(): Promise&lt;void&gt;</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  // 自定义振动</span></span>
<span class="line"><span>  vibrate(pattern: number[]): Promise&lt;void&gt;</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  // 能力查询</span></span>
<span class="line"><span>  isSupported(): Promise&lt;boolean&gt;</span></span>
<span class="line"><span>  getSupportedStyles(): Promise&lt;ImpactStyle[]&gt;</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  // 控制</span></span>
<span class="line"><span>  enable(): void</span></span>
<span class="line"><span>  disable(): void</span></span>
<span class="line"><span>  isEnabled(): boolean</span></span>
<span class="line"><span>}</span></span></code></pre></div><h2 id="枚举定义" tabindex="-1">枚举定义 <a class="header-anchor" href="#枚举定义" aria-label="Permalink to &quot;枚举定义&quot;">​</a></h2><h3 id="impactstyle" tabindex="-1">ImpactStyle <a class="header-anchor" href="#impactstyle" aria-label="Permalink to &quot;ImpactStyle&quot;">​</a></h3><table tabindex="0"><thead><tr><th>值</th><th>说明</th><th>使用场景</th></tr></thead><tbody><tr><td>light</td><td>轻微反馈</td><td>选择项目、轻触</td></tr><tr><td>medium</td><td>中等反馈</td><td>确认操作、切换</td></tr><tr><td>heavy</td><td>强烈反馈</td><td>重要操作、完成</td></tr><tr><td>soft</td><td>柔和反馈</td><td>滑动、拖拽</td></tr><tr><td>rigid</td><td>硬质反馈</td><td>碰撞、边界</td></tr></tbody></table><h3 id="notificationtype" tabindex="-1">NotificationType <a class="header-anchor" href="#notificationtype" aria-label="Permalink to &quot;NotificationType&quot;">​</a></h3><table tabindex="0"><thead><tr><th>值</th><th>说明</th><th>使用场景</th></tr></thead><tbody><tr><td>success</td><td>成功通知</td><td>操作完成、交易成功</td></tr><tr><td>warning</td><td>警告通知</td><td>需要注意、即将超时</td></tr><tr><td>error</td><td>错误通知</td><td>操作失败、验证错误</td></tr></tbody></table><h2 id="功能规范" tabindex="-1">功能规范 <a class="header-anchor" href="#功能规范" aria-label="Permalink to &quot;功能规范&quot;">​</a></h2><h3 id="冲击反馈" tabindex="-1">冲击反馈 <a class="header-anchor" href="#冲击反馈" aria-label="Permalink to &quot;冲击反馈&quot;">​</a></h3><p><strong>impact(style: ImpactStyle)</strong></p><ul><li>MUST 产生与 style 对应的触觉反馈</li><li>MUST 在不支持时静默失败</li><li>SHOULD 与视觉反馈同步触发</li><li>MAY 根据系统设置自动调整强度</li></ul><h3 id="通知反馈" tabindex="-1">通知反馈 <a class="header-anchor" href="#通知反馈" aria-label="Permalink to &quot;通知反馈&quot;">​</a></h3><p><strong>notification(type: NotificationType)</strong></p><ul><li>MUST 产生与通知类型对应的触觉模式</li><li>MUST 区分 success/warning/error</li><li>SHOULD 使用系统预定义的反馈模式</li></ul><h3 id="选择反馈" tabindex="-1">选择反馈 <a class="header-anchor" href="#选择反馈" aria-label="Permalink to &quot;选择反馈&quot;">​</a></h3><p><strong>selection()</strong></p><ul><li>MUST 产生轻微的选择反馈</li><li>SHOULD 用于列表选择、开关切换</li><li>SHOULD 频率限制避免过度振动</li></ul><h3 id="自定义振动" tabindex="-1">自定义振动 <a class="header-anchor" href="#自定义振动" aria-label="Permalink to &quot;自定义振动&quot;">​</a></h3><p><strong>vibrate(pattern: number[])</strong></p><ul><li>MUST 按模式数组执行振动</li><li>数组格式：[振动时长, 暂停时长, 振动时长, ...]</li><li>MUST 支持取消正在进行的振动</li><li>SHOULD 限制最大振动时长</li></ul><h2 id="使用场景" tabindex="-1">使用场景 <a class="header-anchor" href="#使用场景" aria-label="Permalink to &quot;使用场景&quot;">​</a></h2><h3 id="_1-交易成功" tabindex="-1">1. 交易成功 <a class="header-anchor" href="#_1-交易成功" aria-label="Permalink to &quot;1. 交易成功&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>交易确认完成</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>调用 notification(&#39;success&#39;)</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>同时显示成功动画</span></span></code></pre></div><h3 id="_2-图案锁输入" tabindex="-1">2. 图案锁输入 <a class="header-anchor" href="#_2-图案锁输入" aria-label="Permalink to &quot;2. 图案锁输入&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>用户输入每个数字</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>调用 impact(&#39;light&#39;)</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>图案错误时</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>调用 notification(&#39;error&#39;)</span></span></code></pre></div><h3 id="_3-下拉刷新" tabindex="-1">3. 下拉刷新 <a class="header-anchor" href="#_3-下拉刷新" aria-label="Permalink to &quot;3. 下拉刷新&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>用户下拉到阈值</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>调用 impact(&#39;medium&#39;)</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>释放触发刷新</span></span></code></pre></div><h3 id="_4-长按操作" tabindex="-1">4. 长按操作 <a class="header-anchor" href="#_4-长按操作" aria-label="Permalink to &quot;4. 长按操作&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>长按达到激活时间</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>调用 impact(&#39;heavy&#39;)</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>显示操作菜单</span></span></code></pre></div><h2 id="平台适配" tabindex="-1">平台适配 <a class="header-anchor" href="#平台适配" aria-label="Permalink to &quot;平台适配&quot;">​</a></h2><table tabindex="0"><thead><tr><th>平台</th><th>实现方式</th><th>精度</th></tr></thead><tbody><tr><td>Web</td><td>Vibration API</td><td>低</td></tr><tr><td>DWEB</td><td>dweb.haptic API</td><td>高</td></tr><tr><td>iOS</td><td>UIImpactFeedbackGenerator</td><td>高</td></tr><tr><td>Android</td><td>VibrationEffect</td><td>中</td></tr></tbody></table><h3 id="平台能力对照" tabindex="-1">平台能力对照 <a class="header-anchor" href="#平台能力对照" aria-label="Permalink to &quot;平台能力对照&quot;">​</a></h3><table tabindex="0"><thead><tr><th>能力</th><th>Web</th><th>DWEB</th><th>iOS</th><th>Android</th></tr></thead><tbody><tr><td>impact styles</td><td>否</td><td>是</td><td>是</td><td>部分</td></tr><tr><td>notification types</td><td>否</td><td>是</td><td>是</td><td>否</td></tr><tr><td>selection</td><td>否</td><td>是</td><td>是</td><td>否</td></tr><tr><td>custom pattern</td><td>是</td><td>是</td><td>否</td><td>是</td></tr></tbody></table><h2 id="配置选项" tabindex="-1">配置选项 <a class="header-anchor" href="#配置选项" aria-label="Permalink to &quot;配置选项&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>HapticConfig {</span></span>
<span class="line"><span>  enabled: boolean       // 全局开关</span></span>
<span class="line"><span>  respectSystemSetting: boolean  // 遵循系统设置</span></span>
<span class="line"><span>  intensityScale: number // 强度缩放 0-1</span></span>
<span class="line"><span>}</span></span></code></pre></div><h2 id="最佳实践" tabindex="-1">最佳实践 <a class="header-anchor" href="#最佳实践" aria-label="Permalink to &quot;最佳实践&quot;">​</a></h2><ol><li><strong>适度使用</strong> - 避免过度振动造成骚扰</li><li><strong>提供开关</strong> - 允许用户禁用触觉反馈</li><li><strong>配合视觉</strong> - 触觉应与视觉反馈同步</li><li><strong>考虑场景</strong> - 重要操作使用强反馈，日常操作使用轻反馈</li><li><strong>遵循系统</strong> - 尊重系统级别的触觉设置</li></ol><h2 id="错误处理" tabindex="-1">错误处理 <a class="header-anchor" href="#错误处理" aria-label="Permalink to &quot;错误处理&quot;">​</a></h2><table tabindex="0"><thead><tr><th>错误类型</th><th>说明</th><th>处理方式</th></tr></thead><tbody><tr><td>NotSupported</td><td>设备不支持触觉</td><td>静默忽略</td></tr><tr><td>Disabled</td><td>用户已禁用</td><td>静默忽略</td></tr><tr><td>InvalidPattern</td><td>振动模式无效</td><td>使用默认模式</td></tr></tbody></table><h2 id="可访问性" tabindex="-1">可访问性 <a class="header-anchor" href="#可访问性" aria-label="Permalink to &quot;可访问性&quot;">​</a></h2><ul><li>MUST 提供关闭触觉反馈的选项</li><li>SHOULD 与屏幕阅读器配合使用</li><li>SHOULD 在静音模式下仍可工作</li><li>MAY 根据用户偏好调整强度</li></ul>`,43)])])}const u=t(i,[["render",l]]);export{b as __pageData,u as default};
