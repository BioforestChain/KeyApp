import{_ as a,c as e,o as d,ag as s}from"./chunks/framework.B0we9iV-.js";const b=JSON.parse('{"title":"附录 I：外部服务提供商","description":"","frontmatter":{},"headers":[],"relativePath":"white-book/附录/I-外部服务提供商/index.md","filePath":"white-book/附录/I-外部服务提供商/index.md"}'),n={name:"white-book/附录/I-外部服务提供商/index.md"};function i(o,t,l,r,c,h){return d(),e("div",null,[...t[0]||(t[0]=[s(`<h1 id="附录-i-外部服务提供商" tabindex="-1">附录 I：外部服务提供商 <a class="header-anchor" href="#附录-i-外部服务提供商" aria-label="Permalink to &quot;附录 I：外部服务提供商&quot;">​</a></h1><blockquote><p>bnqkl_wallet 后端 API 文档</p></blockquote><hr><h2 id="概述" tabindex="-1">概述 <a class="header-anchor" href="#概述" aria-label="Permalink to &quot;概述&quot;">​</a></h2><p>本文档描述 <code>walletapi.bfmeta.info</code> 后端提供的 API 接口。不同链类型有完全不同的 API 模式。</p><p><strong>参考实现</strong>: <code>/Users/kzf/Dev/bioforestChain/legacy-apps/libs/wallet-base/services/wallet/</code></p><hr><h2 id="链类型分类" tabindex="-1">链类型分类 <a class="header-anchor" href="#链类型分类" aria-label="Permalink to &quot;链类型分类&quot;">​</a></h2><table tabindex="0"><thead><tr><th>类型</th><th>链</th><th>API 路径前缀</th><th>特点</th></tr></thead><tbody><tr><td><strong>bioforest</strong></td><td>bfm, ccchain, pmchain</td><td><code>/wallet/{chain}/</code></td><td>本地构建交易，支付密码</td></tr><tr><td><strong>evm</strong></td><td>eth, bsc</td><td><code>/wallet/eth/</code>, <code>/wallet/bsc/</code></td><td>web3.js, ERC20/BEP20</td></tr><tr><td><strong>bitcoin</strong></td><td>btc</td><td><code>/wallet/btc/blockbook/</code></td><td>UTXO 模型，blockbook 代理</td></tr><tr><td><strong>tron</strong></td><td>tron</td><td><code>/wallet/tron/</code></td><td>tronweb, TRC20</td></tr></tbody></table><hr><h2 id="目录结构" tabindex="-1">目录结构 <a class="header-anchor" href="#目录结构" aria-label="Permalink to &quot;目录结构&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>src/apis/</span></span>
<span class="line"><span>├── bnqkl_wallet/                # 本恩奇科技钱包后端</span></span>
<span class="line"><span>│   ├── index.ts                 # 统一导出</span></span>
<span class="line"><span>│   ├── client.ts                # 基础 HTTP 客户端</span></span>
<span class="line"><span>│   ├── bioforest/               # 生物链林系列 (bfm, ccchain, pmchain)</span></span>
<span class="line"><span>│   │   ├── index.ts</span></span>
<span class="line"><span>│   │   ├── api.ts               # API 方法</span></span>
<span class="line"><span>│   │   └── types.ts             # 类型定义</span></span>
<span class="line"><span>│   ├── evm/                     # EVM 兼容链 (eth, bsc)</span></span>
<span class="line"><span>│   │   ├── index.ts</span></span>
<span class="line"><span>│   │   ├── api.ts</span></span>
<span class="line"><span>│   │   └── types.ts</span></span>
<span class="line"><span>│   ├── bitcoin/                 # 比特币 (blockbook 代理)</span></span>
<span class="line"><span>│   │   ├── index.ts</span></span>
<span class="line"><span>│   │   ├── api.ts</span></span>
<span class="line"><span>│   │   └── types.ts</span></span>
<span class="line"><span>│   └── tron/                    # 波场</span></span>
<span class="line"><span>│       ├── index.ts</span></span>
<span class="line"><span>│       ├── api.ts</span></span>
<span class="line"><span>│       └── types.ts</span></span>
<span class="line"><span>└── index.ts                     # 全局导出</span></span></code></pre></div><hr><h2 id="一、bioforest-链-bioforest" tabindex="-1">一、BioForest 链 (bioforest) <a class="header-anchor" href="#一、bioforest-链-bioforest" aria-label="Permalink to &quot;一、BioForest 链 (bioforest)&quot;">​</a></h2><p><strong>路径前缀</strong>: <code>/wallet/{chain}/</code>（chain = bfm, ccchain, pmchain）</p><p><strong>参考</strong>: <code>bfmeta.service.ts</code>, <code>bioforest-chain.base.ts</code></p><p><strong>特点</strong>:</p><ul><li>本地构建交易 (<code>bundleCore</code>)</li><li>支持支付密码 (<code>secondPublicKey</code>)</li><li>统一响应格式 <code>{ success, result }</code></li></ul><h3 id="api-端点" tabindex="-1">API 端点 <a class="header-anchor" href="#api-端点" aria-label="Permalink to &quot;API 端点&quot;">​</a></h3><table tabindex="0"><thead><tr><th>方法</th><th>路径</th><th>说明</th></tr></thead><tbody><tr><td>POST</td><td><code>/wallet/{chain}/address/balance</code></td><td>获取余额</td></tr><tr><td>POST</td><td><code>/wallet/{chain}/address/info</code></td><td>获取地址信息（含 secondPublicKey）</td></tr><tr><td>POST</td><td><code>/wallet/{chain}/address/asset</code></td><td>获取地址资产</td></tr><tr><td>GET</td><td><code>/wallet/{chain}/lastblock</code></td><td>获取最新区块</td></tr><tr><td>POST</td><td><code>/wallet/{chain}/block/query</code></td><td>根据高度查区块</td></tr><tr><td>GET</td><td><code>/wallet/{chain}/blockAveFee</code></td><td>获取平均手续费</td></tr><tr><td>POST</td><td><code>/wallet/{chain}/transactions/broadcast</code></td><td>广播交易</td></tr><tr><td>POST</td><td><code>/wallet/{chain}/transactions/query</code></td><td>查询已上链交易</td></tr><tr><td>POST</td><td><code>/wallet/{chain}/pendingTr</code></td><td>查询未上链交易</td></tr><tr><td>POST</td><td><code>/wallet/{chain}/assets</code></td><td>获取代币列表</td></tr><tr><td>POST</td><td><code>/wallet/{chain}/asset/details</code></td><td>获取代币详情</td></tr></tbody></table><hr><h2 id="二、evm-兼容链-evm" tabindex="-1">二、EVM 兼容链 (evm) <a class="header-anchor" href="#二、evm-兼容链-evm" aria-label="Permalink to &quot;二、EVM 兼容链 (evm)&quot;">​</a></h2><p><strong>路径前缀</strong>: <code>/wallet/eth/</code>, <code>/wallet/bsc/</code></p><p><strong>参考</strong>: <code>ethereum.service.ts</code>, <code>binance.service.ts</code></p><p><strong>特点</strong>:</p><ul><li>使用 web3.js 签名</li><li>支持 ERC20/BEP20 合约</li><li>EIP-1559 (maxFeePerGas, maxPriorityFeePerGas)</li></ul><h3 id="api-端点-以-eth-为例" tabindex="-1">API 端点 (以 ETH 为例) <a class="header-anchor" href="#api-端点-以-eth-为例" aria-label="Permalink to &quot;API 端点 (以 ETH 为例)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>方法</th><th>路径</th><th>说明</th></tr></thead><tbody><tr><td>GET</td><td><code>/wallet/eth/balance</code></td><td>获取 ETH 余额</td></tr><tr><td>POST</td><td><code>/wallet/eth/balance/erc20</code></td><td>获取 ERC20 余额</td></tr><tr><td>GET</td><td><code>/wallet/eth/trans/count</code></td><td>获取 nonce</td></tr><tr><td>GET</td><td><code>/wallet/eth/gasPrice</code></td><td>获取 gasPrice</td></tr><tr><td>GET</td><td><code>/wallet/eth/baseGas</code></td><td>获取 gasLimit</td></tr><tr><td>POST</td><td><code>/wallet/eth/trans/prep</code></td><td>交易预备信息</td></tr><tr><td>POST</td><td><code>/wallet/eth/trans/erc20/data</code></td><td>获取合约 data</td></tr><tr><td>POST</td><td><code>/wallet/eth/trans/send</code></td><td>广播交易</td></tr><tr><td>GET</td><td><code>/wallet/eth/trans/query</code></td><td>查询交易</td></tr><tr><td>POST</td><td><code>/wallet/eth/trans/normal/history</code></td><td>普通交易历史</td></tr><tr><td>POST</td><td><code>/wallet/eth/trans/erc20/history</code></td><td>ERC20 交易历史</td></tr><tr><td>POST</td><td><code>/wallet/eth/trans/pending</code></td><td>查询 pending 交易</td></tr><tr><td>POST</td><td><code>/wallet/eth/contract/tokens</code></td><td>代币列表</td></tr><tr><td>POST</td><td><code>/wallet/eth/contract/token/detail</code></td><td>代币详情</td></tr><tr><td>POST</td><td><code>/wallet/eth/account/balance/v2</code></td><td>批量查余额</td></tr><tr><td>GET</td><td><code>/wallet/eth/getChainId</code></td><td>获取 chainId</td></tr></tbody></table><hr><h2 id="三、比特币-bitcoin" tabindex="-1">三、比特币 (bitcoin) <a class="header-anchor" href="#三、比特币-bitcoin" aria-label="Permalink to &quot;三、比特币 (bitcoin)&quot;">​</a></h2><p><strong>路径前缀</strong>: <code>/wallet/btc/blockbook/</code>（代理到 blockbook API）</p><p><strong>参考</strong>: <code>bitcoin.service.ts</code></p><p><strong>特点</strong>:</p><ul><li>UTXO 模型</li><li>代理 blockbook API</li><li>本地 PSBT 签名</li></ul><h3 id="api-端点-1" tabindex="-1">API 端点 <a class="header-anchor" href="#api-端点-1" aria-label="Permalink to &quot;API 端点&quot;">​</a></h3><table tabindex="0"><thead><tr><th>方法</th><th>路径</th><th>说明</th></tr></thead><tbody><tr><td>GET</td><td><code>/wallet/btc/blockbook</code> + <code>/api/v2/address/{address}</code></td><td>地址信息</td></tr><tr><td>GET</td><td><code>/wallet/btc/blockbook</code> + <code>/api/v2/utxo/{address}</code></td><td>获取 UTXO</td></tr><tr><td>GET</td><td><code>/wallet/btc/blockbook</code> + <code>/api/v2/tx/{txid}</code></td><td>交易详情</td></tr><tr><td>GET</td><td><code>/wallet/btc/blockbook</code> + <code>/api/v2/sendtx/{hex}</code></td><td>广播交易</td></tr><tr><td>GET</td><td><code>/wallet/btc/blockbook</code> + <code>/api/v2/estimatefee/{blocks}</code></td><td>费率估算</td></tr></tbody></table><p><strong>注意</strong>: Bitcoin API 使用代理模式，通过 POST 发送 <code>{ url, method }</code> 参数。</p><hr><h2 id="四、波场-tron" tabindex="-1">四、波场 (tron) <a class="header-anchor" href="#四、波场-tron" aria-label="Permalink to &quot;四、波场 (tron)&quot;">​</a></h2><p><strong>路径前缀</strong>: <code>/wallet/tron/</code></p><p><strong>参考</strong>: <code>tron.service.ts</code></p><p><strong>特点</strong>:</p><ul><li>使用 tronweb</li><li>地址有 hex/base58 转换</li><li>TRC20 合约</li></ul><h3 id="api-端点-2" tabindex="-1">API 端点 <a class="header-anchor" href="#api-端点-2" aria-label="Permalink to &quot;API 端点&quot;">​</a></h3><table tabindex="0"><thead><tr><th>方法</th><th>路径</th><th>说明</th></tr></thead><tbody><tr><td>GET</td><td><code>/wallet/tron/balance</code></td><td>获取 TRX 余额</td></tr><tr><td>POST</td><td><code>/wallet/tron/balance/trc20</code></td><td>获取 TRC20 余额</td></tr><tr><td>GET</td><td><code>/wallet/tron/account</code></td><td>账户信息</td></tr><tr><td>GET</td><td><code>/wallet/tron/account/resource</code></td><td>账户资源（带宽/能量）</td></tr><tr><td>POST</td><td><code>/wallet/tron/trans/create</code></td><td>创建 TRX 交易</td></tr><tr><td>POST</td><td><code>/wallet/tron/trans/contract</code></td><td>创建 TRC20 交易</td></tr><tr><td>POST</td><td><code>/wallet/tron/trans/broadcast</code></td><td>广播 TRX 交易</td></tr><tr><td>POST</td><td><code>/wallet/tron/trans/trc20/broadcast</code></td><td>广播 TRC20 交易</td></tr><tr><td>POST</td><td><code>/wallet/tron/trans/common/history</code></td><td>TRX 交易历史</td></tr><tr><td>POST</td><td><code>/wallet/tron/trans/trc20/history</code></td><td>TRC20 交易历史</td></tr><tr><td>POST</td><td><code>/wallet/tron/trans/pending</code></td><td>pending 交易</td></tr><tr><td>POST</td><td><code>/wallet/tron/trans/receipt</code></td><td>交易回执</td></tr><tr><td>POST</td><td><code>/wallet/tron/contract/tokens</code></td><td>代币列表</td></tr><tr><td>POST</td><td><code>/wallet/tron/contract/token/detail</code></td><td>代币详情</td></tr><tr><td>POST</td><td><code>/wallet/tron/account/balance/v2</code></td><td>批量查余额</td></tr></tbody></table><hr><h2 id="响应格式" tabindex="-1">响应格式 <a class="header-anchor" href="#响应格式" aria-label="Permalink to &quot;响应格式&quot;">​</a></h2><h3 id="bioforest-链" tabindex="-1">BioForest 链 <a class="header-anchor" href="#bioforest-链" aria-label="Permalink to &quot;BioForest 链&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ApiResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  success</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> T</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="evm-tron" tabindex="-1">EVM / Tron <a class="header-anchor" href="#evm-tron" aria-label="Permalink to &quot;EVM / Tron&quot;">​</a></h3><p>直接返回数据，错误通过 HTTP 状态码处理。</p><h3 id="bitcoin-blockbook" tabindex="-1">Bitcoin (blockbook) <a class="header-anchor" href="#bitcoin-blockbook" aria-label="Permalink to &quot;Bitcoin (blockbook)&quot;">​</a></h3><p>直接返回 blockbook 原始格式：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BlockbookAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  address</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  balance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  txs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  transactions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Transaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="下一步" tabindex="-1">下一步 <a class="header-anchor" href="#下一步" aria-label="Permalink to &quot;下一步&quot;">​</a></h2><ol><li>审阅此文档</li><li>确认设计方案</li><li>开始实现 <code>src/apis/bnqkl_wallet/</code> 模块</li></ol>`,57)])])}const k=a(n,[["render",i]]);export{b as __pageData,k as default};
