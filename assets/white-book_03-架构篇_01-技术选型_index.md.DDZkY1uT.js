import{_ as r,c as n,o as s,ag as d,j as t,a as l,t as h}from"./chunks/framework.B0we9iV-.js";const P=JSON.parse('{"title":"第七章：技术需求","description":"","frontmatter":{},"headers":[],"relativePath":"white-book/03-架构篇/01-技术选型/index.md","filePath":"white-book/03-架构篇/01-技术选型/index.md"}'),i={name:"white-book/03-架构篇/01-技术选型/index.md"},o={tabindex:"0"};function p(e,a,b,c,u,q){return s(),n("div",null,[a[7]||(a[7]=d(`<h1 id="第七章-技术需求" tabindex="-1">第七章：技术需求 <a class="header-anchor" href="#第七章-技术需求" aria-label="Permalink to &quot;第七章：技术需求&quot;">​</a></h1><blockquote><p>定义实现本产品所需的技术能力</p></blockquote><hr><h2 id="_7-1-概述" tabindex="-1">7.1 概述 <a class="header-anchor" href="#_7-1-概述" aria-label="Permalink to &quot;7.1 概述&quot;">​</a></h2><p>本章定义 BFM Pay 实现所需的<strong>技术能力需求</strong>，而非具体技术选型。任何满足这些需求的技术栈都可用于实现。</p><hr><h2 id="_7-2-运行时环境需求" tabindex="-1">7.2 运行时环境需求 <a class="header-anchor" href="#_7-2-运行时环境需求" aria-label="Permalink to &quot;7.2 运行时环境需求&quot;">​</a></h2><h3 id="目标平台" tabindex="-1">目标平台 <a class="header-anchor" href="#目标平台" aria-label="Permalink to &quot;目标平台&quot;">​</a></h3><table tabindex="0"><thead><tr><th>平台</th><th>优先级</th><th>最低版本</th></tr></thead><tbody><tr><td>iOS WebView</td><td>P0</td><td>iOS 14+</td></tr><tr><td>Android WebView</td><td>P0</td><td>Android 8+ (API 26)</td></tr><tr><td>现代浏览器</td><td>P1</td><td>Chrome 90+, Safari 14+, Firefox 90+</td></tr><tr><td>DWEB 容器</td><td>P0</td><td>Plaoc 最新版</td></tr></tbody></table><h3 id="运行时能力" tabindex="-1">运行时能力 <a class="header-anchor" href="#运行时能力" aria-label="Permalink to &quot;运行时能力&quot;">​</a></h3><table tabindex="0"><thead><tr><th>能力</th><th>必需性</th><th>说明</th></tr></thead><tbody><tr><td>JavaScript ES2020+</td><td>MUST</td><td>async/await, optional chaining, nullish coalescing</td></tr><tr><td>Web Crypto API</td><td>MUST</td><td>加密操作</td></tr><tr><td>IndexedDB</td><td>MUST</td><td>本地持久化存储</td></tr><tr><td>Fetch API</td><td>MUST</td><td>网络请求</td></tr><tr><td>Web Worker</td><td>SHOULD</td><td>后台计算（密钥派生）</td></tr><tr><td>Service Worker</td><td>MAY</td><td>离线支持</td></tr></tbody></table><hr><h2 id="_7-3-ui-框架需求" tabindex="-1">7.3 UI 框架需求 <a class="header-anchor" href="#_7-3-ui-框架需求" aria-label="Permalink to &quot;7.3 UI 框架需求&quot;">​</a></h2><h3 id="核心能力" tabindex="-1">核心能力 <a class="header-anchor" href="#核心能力" aria-label="Permalink to &quot;核心能力&quot;">​</a></h3><table tabindex="0"><thead><tr><th>需求</th><th>说明</th></tr></thead><tbody><tr><td>组件化</td><td>支持可复用 UI 组件的定义和组合</td></tr><tr><td>响应式渲染</td><td>状态变化自动触发 UI 更新</td></tr><tr><td>生命周期管理</td><td>组件挂载/卸载钩子，资源清理</td></tr><tr><td>类型安全</td><td>编译时类型检查（TypeScript）</td></tr></tbody></table><h3 id="性能指标" tabindex="-1">性能指标 <a class="header-anchor" href="#性能指标" aria-label="Permalink to &quot;性能指标&quot;">​</a></h3><table tabindex="0"><thead><tr><th>指标</th><th>目标值</th></tr></thead><tbody><tr><td>首屏渲染 (FCP)</td><td>&lt; 1.5s</td></tr><tr><td>可交互时间 (TTI)</td><td>&lt; 3s</td></tr><tr><td>包体积 (gzip)</td><td>&lt; 500KB（不含依赖）</td></tr><tr><td>60fps 滚动</td><td>MUST</td></tr></tbody></table><hr><h2 id="_7-4-导航系统需求" tabindex="-1">7.4 导航系统需求 <a class="header-anchor" href="#_7-4-导航系统需求" aria-label="Permalink to &quot;7.4 导航系统需求&quot;">​</a></h2><h3 id="核心能力-1" tabindex="-1">核心能力 <a class="header-anchor" href="#核心能力-1" aria-label="Permalink to &quot;核心能力&quot;">​</a></h3><table tabindex="0"><thead><tr><th>需求</th><th>说明</th></tr></thead><tbody><tr><td>栈式导航</td><td>页面以栈结构管理，支持 push/pop</td></tr><tr><td>手势返回</td><td>iOS 风格的边缘滑动返回</td></tr><tr><td>转场动画</td><td>平滑的页面切换动画</td></tr><tr><td>深度链接</td><td>URL 映射到特定页面和状态</td></tr><tr><td>状态保持</td><td>返回时保持页面滚动位置和表单状态</td></tr></tbody></table><h3 id="导航模式" tabindex="-1">导航模式 <a class="header-anchor" href="#导航模式" aria-label="Permalink to &quot;导航模式&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌─────────────────────────────────────┐</span></span>
<span class="line"><span>│              TabBar                  │</span></span>
<span class="line"><span>│  ┌───────┐ ┌───────┐ ┌───────┐     │</span></span>
<span class="line"><span>│  │ Tab A │ │ Tab B │ │ Tab C │     │</span></span>
<span class="line"><span>│  └───┬───┘ └───┬───┘ └───┬───┘     │</span></span>
<span class="line"><span>│      │         │         │          │</span></span>
<span class="line"><span>│      ▼         ▼         ▼          │</span></span>
<span class="line"><span>│   Stack A   Stack B   Stack C       │  ← 每个 Tab 独立栈</span></span>
<span class="line"><span>│   ┌─────┐   ┌─────┐   ┌─────┐      │</span></span>
<span class="line"><span>│   │ A1  │   │ B1  │   │ C1  │      │</span></span>
<span class="line"><span>│   │ A2  │   │     │   │ C2  │      │</span></span>
<span class="line"><span>│   │ A3  │   │     │   │     │      │</span></span>
<span class="line"><span>│   └─────┘   └─────┘   └─────┘      │</span></span>
<span class="line"><span>└─────────────────────────────────────┘</span></span></code></pre></div><hr><h2 id="_7-5-状态管理需求" tabindex="-1">7.5 状态管理需求 <a class="header-anchor" href="#_7-5-状态管理需求" aria-label="Permalink to &quot;7.5 状态管理需求&quot;">​</a></h2><h3 id="状态分类" tabindex="-1">状态分类 <a class="header-anchor" href="#状态分类" aria-label="Permalink to &quot;状态分类&quot;">​</a></h3><table tabindex="0"><thead><tr><th>类型</th><th>特征</th><th>生命周期</th></tr></thead><tbody><tr><td>UI 状态</td><td>组件内部，如 hover/focus</td><td>组件生命周期</td></tr><tr><td>表单状态</td><td>用户输入中的数据</td><td>表单生命周期</td></tr><tr><td>客户端状态</td><td>本地设置、钱包数据</td><td>持久化</td></tr><tr><td>服务端状态</td><td>从 API 获取的数据</td><td>需缓存和同步</td></tr></tbody></table><h3 id="核心能力-2" tabindex="-1">核心能力 <a class="header-anchor" href="#核心能力-2" aria-label="Permalink to &quot;核心能力&quot;">​</a></h3><table tabindex="0"><thead><tr><th>需求</th><th>说明</th></tr></thead><tbody><tr><td>响应式更新</td><td>状态变化自动通知订阅者</td></tr><tr><td>选择器</td><td>订阅状态的特定部分，避免不必要的更新</td></tr><tr><td>持久化</td><td>关键状态存储到本地</td></tr><tr><td>缓存策略</td><td>服务端数据缓存、过期、重新验证</td></tr><tr><td>乐观更新</td><td>立即更新 UI，后台同步服务端</td></tr></tbody></table><h3 id="服务端状态管理" tabindex="-1">服务端状态管理 <a class="header-anchor" href="#服务端状态管理" aria-label="Permalink to &quot;服务端状态管理&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌─────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                   Cache Layer                        │</span></span>
<span class="line"><span>├─────────────────────────────────────────────────────┤</span></span>
<span class="line"><span>│  Query Key        │ Data      │ State    │ StaleTime│</span></span>
<span class="line"><span>│  [&#39;balance&#39;, addr]│ 100 BFM   │ fresh    │ 30s      │</span></span>
<span class="line"><span>│  [&#39;txs&#39;, addr]    │ [...]     │ stale    │ 60s      │</span></span>
<span class="line"><span>│  [&#39;price&#39;, &#39;BFM&#39;] │ $0.15     │ fetching │ 10s      │</span></span>
<span class="line"><span>└─────────────────────────────────────────────────────┘</span></span>
<span class="line"><span></span></span>
<span class="line"><span>状态机：</span></span>
<span class="line"><span>  idle → fetching → success/error → stale → refetching → ...</span></span></code></pre></div><hr><h2 id="_7-6-表单处理需求" tabindex="-1">7.6 表单处理需求 <a class="header-anchor" href="#_7-6-表单处理需求" aria-label="Permalink to &quot;7.6 表单处理需求&quot;">​</a></h2><h3 id="核心能力-3" tabindex="-1">核心能力 <a class="header-anchor" href="#核心能力-3" aria-label="Permalink to &quot;核心能力&quot;">​</a></h3><table tabindex="0"><thead><tr><th>需求</th><th>说明</th></tr></thead><tbody><tr><td>受控输入</td><td>所有输入由状态驱动</td></tr><tr><td>验证</td><td>同步验证 + 异步验证</td></tr><tr><td>错误处理</td><td>字段级 + 表单级错误</td></tr><tr><td>提交管理</td><td>提交中状态、防重复提交</td></tr><tr><td>类型安全</td><td>表单值的完整类型推断</td></tr></tbody></table><h3 id="验证能力" tabindex="-1">验证能力 <a class="header-anchor" href="#验证能力" aria-label="Permalink to &quot;验证能力&quot;">​</a></h3><table tabindex="0"><thead><tr><th>类型</th><th>时机</th><th>示例</th></tr></thead><tbody><tr><td>同步验证</td><td>onChange/onBlur</td><td>必填、格式、长度</td></tr><tr><td>异步验证</td><td>onBlur/防抖</td><td>地址格式、余额检查</td></tr><tr><td>表单级验证</td><td>onSubmit</td><td>跨字段校验</td></tr></tbody></table><hr><h2 id="_7-7-样式系统需求" tabindex="-1">7.7 样式系统需求 <a class="header-anchor" href="#_7-7-样式系统需求" aria-label="Permalink to &quot;7.7 样式系统需求&quot;">​</a></h2><h3 id="核心能力-4" tabindex="-1">核心能力 <a class="header-anchor" href="#核心能力-4" aria-label="Permalink to &quot;核心能力&quot;">​</a></h3><table tabindex="0"><thead><tr><th>需求</th><th>说明</th></tr></thead><tbody><tr><td>组件化样式</td><td>样式与组件绑定，避免冲突</td></tr><tr><td>主题系统</td><td>支持浅色/深色主题切换</td></tr><tr><td>设计令牌</td><td>颜色、间距、字体等统一变量</td></tr><tr><td>响应式</td><td>适配不同屏幕尺寸</td></tr><tr><td>RTL 支持</td><td>阿拉伯语等从右到左布局</td></tr></tbody></table><h3 id="设计令牌结构" tabindex="-1">设计令牌结构 <a class="header-anchor" href="#设计令牌结构" aria-label="Permalink to &quot;设计令牌结构&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>tokens/</span></span>
<span class="line"><span>├── colors/</span></span>
<span class="line"><span>│   ├── semantic (primary, destructive, muted...)</span></span>
<span class="line"><span>│   └── palette (具体色值)</span></span>
<span class="line"><span>├── spacing/</span></span>
<span class="line"><span>│   └── scale (4, 8, 12, 16, 24, 32...)</span></span>
<span class="line"><span>├── typography/</span></span>
<span class="line"><span>│   ├── fontFamily</span></span>
<span class="line"><span>│   ├── fontSize</span></span>
<span class="line"><span>│   └── fontWeight</span></span>
<span class="line"><span>└── radius/</span></span>
<span class="line"><span>    └── scale (sm, md, lg, full)</span></span></code></pre></div><hr><h2 id="_7-8-国际化需求" tabindex="-1">7.8 国际化需求 <a class="header-anchor" href="#_7-8-国际化需求" aria-label="Permalink to &quot;7.8 国际化需求&quot;">​</a></h2><h3 id="核心能力-5" tabindex="-1">核心能力 <a class="header-anchor" href="#核心能力-5" aria-label="Permalink to &quot;核心能力&quot;">​</a></h3>`,46)),t("table",o,[a[6]||(a[6]=t("thead",null,[t("tr",null,[t("th",null,"需求"),t("th",null,"说明")])],-1)),t("tbody",null,[a[2]||(a[2]=t("tr",null,[t("td",null,"翻译管理"),t("td",null,"分离文本和代码")],-1)),t("tr",null,[a[1]||(a[1]=t("td",null,"插值",-1)),t("td",null,[a[0]||(a[0]=l("变量替换：",-1)),t("code",null,"欢迎，"+h(e.name),1)])]),a[3]||(a[3]=t("tr",null,[t("td",null,"复数"),t("td",null,"不同数量的文本变体")],-1)),a[4]||(a[4]=t("tr",null,[t("td",null,"日期/数字格式化"),t("td",null,"本地化格式")],-1)),a[5]||(a[5]=t("tr",null,[t("td",null,"RTL 布局"),t("td",null,"阿拉伯语、希伯来语支持")],-1))])]),a[8]||(a[8]=d('<h3 id="支持语言" tabindex="-1">支持语言 <a class="header-anchor" href="#支持语言" aria-label="Permalink to &quot;支持语言&quot;">​</a></h3><table tabindex="0"><thead><tr><th>语言</th><th>代码</th><th>优先级</th></tr></thead><tbody><tr><td>简体中文</td><td>zh-CN</td><td>P0</td></tr><tr><td>英语</td><td>en</td><td>P0</td></tr><tr><td>繁体中文</td><td>zh-TW</td><td>P1</td></tr><tr><td>日语</td><td>ja</td><td>P2</td></tr><tr><td>韩语</td><td>ko</td><td>P2</td></tr></tbody></table><hr><h2 id="_7-9-安全需求" tabindex="-1">7.9 安全需求 <a class="header-anchor" href="#_7-9-安全需求" aria-label="Permalink to &quot;7.9 安全需求&quot;">​</a></h2><h3 id="加密能力" tabindex="-1">加密能力 <a class="header-anchor" href="#加密能力" aria-label="Permalink to &quot;加密能力&quot;">​</a></h3><table tabindex="0"><thead><tr><th>能力</th><th>算法/标准</th></tr></thead><tbody><tr><td>助记词生成</td><td>BIP39</td></tr><tr><td>密钥派生</td><td>BIP44, SLIP-0010</td></tr><tr><td>签名</td><td>Ed25519, secp256k1</td></tr><tr><td>对称加密</td><td>AES-256-GCM</td></tr><tr><td>哈希</td><td>SHA-256, Keccak-256</td></tr><tr><td>密钥派生函数</td><td>PBKDF2, scrypt</td></tr></tbody></table><h3 id="存储安全" tabindex="-1">存储安全 <a class="header-anchor" href="#存储安全" aria-label="Permalink to &quot;存储安全&quot;">​</a></h3><table tabindex="0"><thead><tr><th>需求</th><th>说明</th></tr></thead><tbody><tr><td>加密存储</td><td>敏感数据 AES 加密后存储</td></tr><tr><td>内存保护</td><td>私钥使用后立即清除</td></tr><tr><td>无日志</td><td>敏感数据不写入日志</td></tr></tbody></table><hr><h2 id="_7-10-测试需求" tabindex="-1">7.10 测试需求 <a class="header-anchor" href="#_7-10-测试需求" aria-label="Permalink to &quot;7.10 测试需求&quot;">​</a></h2><h3 id="测试层级" tabindex="-1">测试层级 <a class="header-anchor" href="#测试层级" aria-label="Permalink to &quot;测试层级&quot;">​</a></h3><table tabindex="0"><thead><tr><th>层级</th><th>覆盖范围</th><th>目标覆盖率</th></tr></thead><tbody><tr><td>单元测试</td><td>工具函数、服务</td><td>&gt; 80%</td></tr><tr><td>组件测试</td><td>UI 组件行为</td><td>&gt; 70%</td></tr><tr><td>集成测试</td><td>模块交互</td><td>关键路径</td></tr><tr><td>E2E 测试</td><td>用户流程</td><td>核心流程</td></tr></tbody></table><h3 id="测试能力需求" tabindex="-1">测试能力需求 <a class="header-anchor" href="#测试能力需求" aria-label="Permalink to &quot;测试能力需求&quot;">​</a></h3><table tabindex="0"><thead><tr><th>需求</th><th>说明</th></tr></thead><tbody><tr><td>组件渲染测试</td><td>验证组件输出</td></tr><tr><td>用户交互模拟</td><td>点击、输入、滚动</td></tr><tr><td>异步测试</td><td>等待异步操作完成</td></tr><tr><td>Mock</td><td>模拟网络请求和服务</td></tr><tr><td>快照测试</td><td>UI 回归检测</td></tr><tr><td>视觉回归</td><td>截图对比</td></tr></tbody></table><hr><h2 id="_7-11-构建和部署需求" tabindex="-1">7.11 构建和部署需求 <a class="header-anchor" href="#_7-11-构建和部署需求" aria-label="Permalink to &quot;7.11 构建和部署需求&quot;">​</a></h2><h3 id="构建产物" tabindex="-1">构建产物 <a class="header-anchor" href="#构建产物" aria-label="Permalink to &quot;构建产物&quot;">​</a></h3><table tabindex="0"><thead><tr><th>目标</th><th>说明</th></tr></thead><tbody><tr><td>Web SPA</td><td>静态文件，可部署到 CDN</td></tr><tr><td>DWEB 包</td><td>Plaoc 容器格式</td></tr></tbody></table><h3 id="构建优化" tabindex="-1">构建优化 <a class="header-anchor" href="#构建优化" aria-label="Permalink to &quot;构建优化&quot;">​</a></h3><table tabindex="0"><thead><tr><th>需求</th><th>说明</th></tr></thead><tbody><tr><td>代码分割</td><td>按路由拆分，首屏最小化</td></tr><tr><td>Tree Shaking</td><td>移除未使用代码</td></tr><tr><td>压缩</td><td>JS/CSS 压缩</td></tr><tr><td>资源哈希</td><td>文件名包含内容哈希，支持长期缓存</td></tr></tbody></table><hr><h2 id="本章小结" tabindex="-1">本章小结 <a class="header-anchor" href="#本章小结" aria-label="Permalink to &quot;本章小结&quot;">​</a></h2><p>本章定义了实现 BFM Pay 所需的技术能力，包括：</p><ul><li>运行时环境和平台兼容性</li><li>UI 框架、导航、状态管理的能力需求</li><li>样式系统和国际化需求</li><li>安全和加密能力</li><li>测试和构建需求</li></ul><p>具体技术选型可根据团队熟悉度和项目需求决定。</p><hr><h2 id="下一章" tabindex="-1">下一章 <a class="header-anchor" href="#下一章" aria-label="Permalink to &quot;下一章&quot;">​</a></h2><p>继续阅读 <a href="./../02-系统架构/">第八章：系统架构</a>。</p>',28))])}const k=r(i,[["render",p]]);export{P as __pageData,k as default};
