import{_ as t,c as e,o,ag as i}from"./chunks/framework.B0we9iV-.js";const b=JSON.parse('{"title":"动作文案与状态语义规范","description":"","frontmatter":{},"headers":[],"relativePath":"white-book/09-i18n-Ref/03-Action-Status-Copy.md","filePath":"white-book/09-i18n-Ref/03-Action-Status-Copy.md"}'),d={name:"white-book/09-i18n-Ref/03-Action-Status-Copy.md"};function l(r,a,c,n,h,s){return o(),e("div",null,[...a[0]||(a[0]=[i('<h1 id="动作文案与状态语义规范" tabindex="-1">动作文案与状态语义规范 <a class="header-anchor" href="#动作文案与状态语义规范" aria-label="Permalink to &quot;动作文案与状态语义规范&quot;">​</a></h1><blockquote><p>目标：减少“文案看起来通过了，但语义误导用户”的问题。</p></blockquote><hr><h2 id="背景" tabindex="-1">背景 <a class="header-anchor" href="#背景" aria-label="Permalink to &quot;背景&quot;">​</a></h2><p>在交易、签名、授权等高风险流程中，<code>确认中</code> 这类模糊文案会掩盖真实阶段（例如：实际处于广播中）。 这类问题通常无法通过 lint / i18n key check 自动发现，必须在开发阶段做语义自检。</p><hr><h2 id="核心原则" tabindex="-1">核心原则 <a class="header-anchor" href="#核心原则" aria-label="Permalink to &quot;核心原则&quot;">​</a></h2><h3 id="_1-状态文案必须反映真实阶段" tabindex="-1">1) 状态文案必须反映真实阶段 <a class="header-anchor" href="#_1-状态文案必须反映真实阶段" aria-label="Permalink to &quot;1) 状态文案必须反映真实阶段&quot;">​</a></h3><ul><li>❌ 模糊：<code>确认中</code></li><li>✅ 明确：<code>广播中</code> / <code>等待上链</code> / <code>签名中</code></li></ul><p><strong>规则</strong>：文案要回答两个问题：</p><ol><li>当前动作是什么？（签名 / 广播 / 上链确认）</li><li>谁在执行？（本地钱包 / 链网络）</li></ol><h3 id="_2-ui-不直接透出底层硬编码错误" tabindex="-1">2) UI 不直接透出底层硬编码错误 <a class="header-anchor" href="#_2-ui-不直接透出底层硬编码错误" aria-label="Permalink to &quot;2) UI 不直接透出底层硬编码错误&quot;">​</a></h3><ul><li>❌ 直接显示：<code>Failed to broadcast transaction</code></li><li>✅ 映射到 i18n：<code>transaction:broadcast.failed</code></li></ul><p><strong>规则</strong>：底层 <code>error.message</code> 仅用于日志；展示给用户时必须走错误映射层。</p><h3 id="_3-一次异步动作只能有一个主状态文案" tabindex="-1">3) 一次异步动作只能有一个主状态文案 <a class="header-anchor" href="#_3-一次异步动作只能有一个主状态文案" aria-label="Permalink to &quot;3) 一次异步动作只能有一个主状态文案&quot;">​</a></h3><ul><li>同一时刻只显示一个“主进度词”（例如 <code>广播中</code>）。</li><li>不得在同一阶段混用 <code>确认中</code> + <code>广播中</code> 两套术语。</li></ul><hr><h2 id="推荐状态词典-转账示例" tabindex="-1">推荐状态词典（转账示例） <a class="header-anchor" href="#推荐状态词典-转账示例" aria-label="Permalink to &quot;推荐状态词典（转账示例）&quot;">​</a></h2><table tabindex="0"><thead><tr><th>阶段</th><th>推荐 key</th><th>说明</th></tr></thead><tbody><tr><td>本地签名</td><td><code>common:signing</code></td><td>钱包锁/私钥验证与签名中</td></tr><tr><td>广播交易</td><td><code>transaction:txStatus.broadcasting</code></td><td>向网络广播交易</td></tr><tr><td>等待区块确认</td><td><code>transaction:txStatus.confirming</code></td><td>广播成功后等待上链确认</td></tr><tr><td>失败</td><td><code>transaction:broadcast.failed</code> / <code>transaction:broadcast.timeout</code></td><td>用户可理解并可行动</td></tr></tbody></table><hr><h2 id="开发约束" tabindex="-1">开发约束 <a class="header-anchor" href="#开发约束" aria-label="Permalink to &quot;开发约束&quot;">​</a></h2><h3 id="must" tabindex="-1">MUST <a class="header-anchor" href="#must" aria-label="Permalink to &quot;MUST&quot;">​</a></h3><ul><li>所有用户可见状态/错误文案必须可 i18n。</li><li>交易类流程必须区分 <code>签名</code>、<code>广播</code>、<code>确认</code> 三阶段。</li><li>对底层错误进行统一映射（code + message pattern）。</li></ul><h3 id="should" tabindex="-1">SHOULD <a class="header-anchor" href="#should" aria-label="Permalink to &quot;SHOULD&quot;">​</a></h3><ul><li>使用纯函数做“错误 -&gt; 文案 key”映射，便于测试。</li><li>为映射层补单测（timeout、broadcast failed、unknown 等）。</li></ul><h3 id="must-not" tabindex="-1">MUST NOT <a class="header-anchor" href="#must-not" aria-label="Permalink to &quot;MUST NOT&quot;">​</a></h3><ul><li>在 UI 直接渲染英文异常文本。</li><li>用“确认中”替代所有异步状态。</li></ul><hr><h2 id="ai-开发前自检清单" tabindex="-1">AI 开发前自检清单 <a class="header-anchor" href="#ai-开发前自检清单" aria-label="Permalink to &quot;AI 开发前自检清单&quot;">​</a></h2><p>在改动任何状态文案/错误文案前，先逐条确认：</p><ol><li>该文案是否准确描述当前真实阶段？</li><li>是否存在更具体的阶段词可用（签名/广播/确认）？</li><li>是否仍有 <code>error.message</code> 直出到 UI？</li><li>是否为新增映射补了最小回归测试？</li><li>四语种（zh-CN/en/zh-TW/ar）是否补齐 key？</li></ol>',31)])])}const m=t(d,[["render",l]]);export{b as __pageData,m as default};
