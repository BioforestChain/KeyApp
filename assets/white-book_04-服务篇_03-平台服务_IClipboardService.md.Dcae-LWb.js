import{_ as t,c as s,o as n,ag as e}from"./chunks/framework.B0we9iV-.js";const b=JSON.parse('{"title":"IClipboardService 剪贴板服务","description":"","frontmatter":{},"headers":[],"relativePath":"white-book/04-服务篇/03-平台服务/IClipboardService.md","filePath":"white-book/04-服务篇/03-平台服务/IClipboardService.md"}'),i={name:"white-book/04-服务篇/03-平台服务/IClipboardService.md"};function l(d,a,r,p,o,h){return n(),s("div",null,[...a[0]||(a[0]=[e(`<h1 id="iclipboardservice-剪贴板服务" tabindex="-1">IClipboardService 剪贴板服务 <a class="header-anchor" href="#iclipboardservice-剪贴板服务" aria-label="Permalink to &quot;IClipboardService 剪贴板服务&quot;">​</a></h1><p>剪贴板服务提供跨平台的文本和数据复制粘贴能力。</p><h2 id="接口定义" tabindex="-1">接口定义 <a class="header-anchor" href="#接口定义" aria-label="Permalink to &quot;接口定义&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>IClipboardService {</span></span>
<span class="line"><span>  // 写入</span></span>
<span class="line"><span>  writeText(text: string): Promise&lt;void&gt;</span></span>
<span class="line"><span>  writeData(data: ClipboardData): Promise&lt;void&gt;</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  // 读取</span></span>
<span class="line"><span>  readText(): Promise&lt;string&gt;</span></span>
<span class="line"><span>  readData(): Promise&lt;ClipboardData&gt;</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  // 查询</span></span>
<span class="line"><span>  hasText(): Promise&lt;boolean&gt;</span></span>
<span class="line"><span>  getAvailableTypes(): Promise&lt;string[]&gt;</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  // 清空</span></span>
<span class="line"><span>  clear(): Promise&lt;void&gt;</span></span>
<span class="line"><span>}</span></span></code></pre></div><h2 id="数据模型" tabindex="-1">数据模型 <a class="header-anchor" href="#数据模型" aria-label="Permalink to &quot;数据模型&quot;">​</a></h2><h3 id="clipboarddata" tabindex="-1">ClipboardData <a class="header-anchor" href="#clipboarddata" aria-label="Permalink to &quot;ClipboardData&quot;">​</a></h3><table tabindex="0"><thead><tr><th>字段</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>type</td><td>string</td><td>是</td><td>MIME 类型</td></tr><tr><td>text</td><td>string</td><td>否</td><td>文本内容</td></tr><tr><td>html</td><td>string</td><td>否</td><td>HTML 内容</td></tr><tr><td>uri</td><td>string</td><td>否</td><td>URI/URL</td></tr><tr><td>blob</td><td>Blob</td><td>否</td><td>二进制数据</td></tr></tbody></table><h2 id="功能规范" tabindex="-1">功能规范 <a class="header-anchor" href="#功能规范" aria-label="Permalink to &quot;功能规范&quot;">​</a></h2><h3 id="文本写入" tabindex="-1">文本写入 <a class="header-anchor" href="#文本写入" aria-label="Permalink to &quot;文本写入&quot;">​</a></h3><p><strong>writeText(text: string)</strong></p><ul><li>MUST 将文本写入系统剪贴板</li><li>MUST 支持 Unicode 字符</li><li>MUST 在写入失败时抛出异常</li><li>SHOULD 支持大文本（&gt;1MB）</li></ul><h3 id="文本读取" tabindex="-1">文本读取 <a class="header-anchor" href="#文本读取" aria-label="Permalink to &quot;文本读取&quot;">​</a></h3><p><strong>readText()</strong></p><ul><li>MUST 从系统剪贴板读取文本</li><li>MUST 在无文本时返回空字符串</li><li>MUST 在无权限时抛出异常</li><li>SHOULD 支持多种文本编码</li></ul><h3 id="权限处理" tabindex="-1">权限处理 <a class="header-anchor" href="#权限处理" aria-label="Permalink to &quot;权限处理&quot;">​</a></h3><ul><li>MUST 在首次使用时请求剪贴板权限（如平台要求）</li><li>MUST 在权限被拒绝时提供清晰错误信息</li><li>SHOULD 缓存权限状态避免重复询问</li></ul><h2 id="使用场景" tabindex="-1">使用场景 <a class="header-anchor" href="#使用场景" aria-label="Permalink to &quot;使用场景&quot;">​</a></h2><h3 id="_1-复制地址" tabindex="-1">1. 复制地址 <a class="header-anchor" href="#_1-复制地址" aria-label="Permalink to &quot;1. 复制地址&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>用户点击复制按钮</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>调用 writeText(address)</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>显示复制成功反馈</span></span></code></pre></div><h3 id="_2-粘贴地址" tabindex="-1">2. 粘贴地址 <a class="header-anchor" href="#_2-粘贴地址" aria-label="Permalink to &quot;2. 粘贴地址&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>用户点击粘贴按钮</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>检查 hasText()</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>调用 readText()</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>验证地址格式</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>填入输入框</span></span></code></pre></div><h2 id="平台适配" tabindex="-1">平台适配 <a class="header-anchor" href="#平台适配" aria-label="Permalink to &quot;平台适配&quot;">​</a></h2><table tabindex="0"><thead><tr><th>平台</th><th>实现方式</th></tr></thead><tbody><tr><td>Web</td><td>Clipboard API</td></tr><tr><td>DWEB</td><td>dweb.clipboard API</td></tr><tr><td>iOS</td><td>UIPasteboard</td></tr><tr><td>Android</td><td>ClipboardManager</td></tr></tbody></table><h2 id="安全考虑" tabindex="-1">安全考虑 <a class="header-anchor" href="#安全考虑" aria-label="Permalink to &quot;安全考虑&quot;">​</a></h2><ul><li>MUST NOT 在后台自动读取剪贴板</li><li>MUST 在读取敏感数据后及时清空</li><li>SHOULD 提供剪贴板清空倒计时功能</li><li>MAY 支持加密剪贴板内容</li></ul><h2 id="错误处理" tabindex="-1">错误处理 <a class="header-anchor" href="#错误处理" aria-label="Permalink to &quot;错误处理&quot;">​</a></h2><table tabindex="0"><thead><tr><th>错误类型</th><th>说明</th><th>处理方式</th></tr></thead><tbody><tr><td>PermissionDenied</td><td>无剪贴板权限</td><td>提示用户授权</td></tr><tr><td>NotSupported</td><td>平台不支持</td><td>使用降级方案</td></tr><tr><td>ReadError</td><td>读取失败</td><td>重试或提示</td></tr><tr><td>WriteError</td><td>写入失败</td><td>重试或提示</td></tr></tbody></table>`,27)])])}const u=t(i,[["render",l]]);export{b as __pageData,u as default};
