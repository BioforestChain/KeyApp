import{_ as s,c as n,o as p,ag as l}from"./chunks/framework.B0we9iV-.js";const g=JSON.parse('{"title":"系统架构","description":"","frontmatter":{},"headers":[],"relativePath":"white-book/03-架构篇/02-系统架构/index.md","filePath":"white-book/03-架构篇/02-系统架构/index.md"}'),e={name:"white-book/03-架构篇/02-系统架构/index.md"};function i(t,a,r,o,c,h){return p(),n("div",null,[...a[0]||(a[0]=[l(`<h1 id="系统架构" tabindex="-1">系统架构 <a class="header-anchor" href="#系统架构" aria-label="Permalink to &quot;系统架构&quot;">​</a></h1><blockquote><p>定义分层架构和模块划分</p></blockquote><hr><h2 id="分层架构" tabindex="-1">分层架构 <a class="header-anchor" href="#分层架构" aria-label="Permalink to &quot;分层架构&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌──────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                       UI Layer                                │</span></span>
<span class="line"><span>│                 导航系统 + 组件 + 页面                         │</span></span>
<span class="line"><span>├──────────────────────────────────────────────────────────────┤</span></span>
<span class="line"><span>│                     State Layer                               │</span></span>
<span class="line"><span>│             客户端状态 + 服务端状态缓存                         │</span></span>
<span class="line"><span>├──────────────────────────────────────────────────────────────┤</span></span>
<span class="line"><span>│                    Service Layer                              │</span></span>
<span class="line"><span>│          链适配器 + 平台服务 + 工具函数                         │</span></span>
<span class="line"><span>├──────────────────────────────────────────────────────────────┤</span></span>
<span class="line"><span>│                    Platform Layer                             │</span></span>
<span class="line"><span>│              Web APIs / DWEB 平台插件                          │</span></span>
<span class="line"><span>└──────────────────────────────────────────────────────────────┘</span></span></code></pre></div><hr><h2 id="各层职责规范" tabindex="-1">各层职责规范 <a class="header-anchor" href="#各层职责规范" aria-label="Permalink to &quot;各层职责规范&quot;">​</a></h2><h3 id="ui-layer" tabindex="-1">UI Layer <a class="header-anchor" href="#ui-layer" aria-label="Permalink to &quot;UI Layer&quot;">​</a></h3><ul><li><strong>MUST</strong> 只负责界面渲染和用户交互</li><li><strong>MUST NOT</strong> 包含业务逻辑</li><li><strong>SHOULD</strong> 使用声明式组件模式</li><li><strong>SHOULD</strong> 支持组件热替换</li></ul><h3 id="state-layer" tabindex="-1">State Layer <a class="header-anchor" href="#state-layer" aria-label="Permalink to &quot;State Layer&quot;">​</a></h3><ul><li><strong>MUST</strong> 区分客户端状态和服务端状态</li><li><strong>MUST</strong> 提供响应式状态订阅</li><li><strong>SHOULD</strong> 支持状态持久化</li><li><strong>SHOULD</strong> 支持细粒度状态订阅（避免过度渲染）</li></ul><h3 id="service-layer" tabindex="-1">Service Layer <a class="header-anchor" href="#service-layer" aria-label="Permalink to &quot;Service Layer&quot;">​</a></h3><ul><li><strong>MUST</strong> 通过接口抽象隐藏实现细节</li><li><strong>MUST</strong> 支持依赖注入模式</li><li><strong>MUST NOT</strong> 依赖 UI 层</li><li><strong>SHOULD</strong> 提供适配器模式支持多链</li></ul><h3 id="platform-layer" tabindex="-1">Platform Layer <a class="header-anchor" href="#platform-layer" aria-label="Permalink to &quot;Platform Layer&quot;">​</a></h3><ul><li><strong>MUST</strong> 统一抽象平台差异</li><li><strong>MUST</strong> 提供能力检测机制</li><li><strong>SHOULD</strong> 提供降级策略</li></ul><hr><h2 id="目录结构规范" tabindex="-1">目录结构规范 <a class="header-anchor" href="#目录结构规范" aria-label="Permalink to &quot;目录结构规范&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>src/</span></span>
<span class="line"><span>├── navigation/                 # 导航系统</span></span>
<span class="line"><span>│   ├── screens/                # 屏幕/页面定义</span></span>
<span class="line"><span>│   ├── components/             # 导航组件</span></span>
<span class="line"><span>│   ├── hooks/                  # 导航 Hooks</span></span>
<span class="line"><span>│   └── config                  # 导航配置</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── pages/                      # 页面组件</span></span>
<span class="line"><span>│   ├── home/                   # 首页</span></span>
<span class="line"><span>│   ├── wallet/                 # 钱包相关</span></span>
<span class="line"><span>│   ├── send/                   # 发送</span></span>
<span class="line"><span>│   ├── receive/                # 收款</span></span>
<span class="line"><span>│   ├── settings/               # 设置</span></span>
<span class="line"><span>│   └── authorize/              # DWEB 授权</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── components/                 # 通用组件</span></span>
<span class="line"><span>│   ├── ui/                     # 基础 UI 组件</span></span>
<span class="line"><span>│   ├── common/                 # 业务通用组件</span></span>
<span class="line"><span>│   ├── wallet/                 # 钱包相关组件</span></span>
<span class="line"><span>│   └── layout/                 # 布局组件</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── stores/                     # 状态管理</span></span>
<span class="line"><span>│   ├── wallet                  # 钱包状态</span></span>
<span class="line"><span>│   ├── preferences             # 用户偏好</span></span>
<span class="line"><span>│   └── ui                      # UI 状态</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── services/                   # 服务层</span></span>
<span class="line"><span>│   ├── adapters/               # 链适配器</span></span>
<span class="line"><span>│   ├── platform/               # 平台服务</span></span>
<span class="line"><span>│   └── utils/                  # 工具函数</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── hooks/                      # 通用 Hooks</span></span>
<span class="line"><span>├── i18n/                       # 国际化</span></span>
<span class="line"><span>├── lib/                        # 库封装</span></span>
<span class="line"><span>│   ├── crypto/                 # 加密相关</span></span>
<span class="line"><span>│   └── utils/                  # 工具函数</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>└── styles/                     # 全局样式</span></span></code></pre></div><hr><h2 id="模块依赖规则" tabindex="-1">模块依赖规则 <a class="header-anchor" href="#模块依赖规则" aria-label="Permalink to &quot;模块依赖规则&quot;">​</a></h2><h3 id="依赖方向" tabindex="-1">依赖方向 <a class="header-anchor" href="#依赖方向" aria-label="Permalink to &quot;依赖方向&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>        Pages/Screens</span></span>
<span class="line"><span>              │</span></span>
<span class="line"><span>              ▼</span></span>
<span class="line"><span>    ┌─────────┴─────────┐</span></span>
<span class="line"><span>    │                   │</span></span>
<span class="line"><span>    ▼                   ▼</span></span>
<span class="line"><span>Components           Stores</span></span>
<span class="line"><span>    │                   │</span></span>
<span class="line"><span>    └─────────┬─────────┘</span></span>
<span class="line"><span>              │</span></span>
<span class="line"><span>              ▼</span></span>
<span class="line"><span>           Services</span></span>
<span class="line"><span>              │</span></span>
<span class="line"><span>              ▼</span></span>
<span class="line"><span>          Platform</span></span></code></pre></div><h3 id="规范" tabindex="-1">规范 <a class="header-anchor" href="#规范" aria-label="Permalink to &quot;规范&quot;">​</a></h3><ol><li><strong>单向依赖</strong> - 上层可依赖下层，下层 MUST NOT 依赖上层</li><li><strong>同层隔离</strong> - 同层模块 SHOULD NOT 相互依赖</li><li><strong>接口依赖</strong> - MUST 依赖抽象接口而非具体实现</li><li><strong>显式依赖</strong> - MUST 通过显式导入声明依赖关系</li></ol><hr><h2 id="数据流规范" tabindex="-1">数据流规范 <a class="header-anchor" href="#数据流规范" aria-label="Permalink to &quot;数据流规范&quot;">​</a></h2><h3 id="读取流程" tabindex="-1">读取流程 <a class="header-anchor" href="#读取流程" aria-label="Permalink to &quot;读取流程&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>用户操作</span></span>
<span class="line"><span>    │</span></span>
<span class="line"><span>    ▼</span></span>
<span class="line"><span>┌─────────────┐</span></span>
<span class="line"><span>│  Component  │ ─── 查询状态 ───► 缓存命中？</span></span>
<span class="line"><span>└─────────────┘                      │</span></span>
<span class="line"><span>                             ┌───────┴───────┐</span></span>
<span class="line"><span>                             │               │</span></span>
<span class="line"><span>                            Yes             No</span></span>
<span class="line"><span>                             │               │</span></span>
<span class="line"><span>                             ▼               ▼</span></span>
<span class="line"><span>                         返回缓存       调用 Service</span></span>
<span class="line"><span>                                            │</span></span>
<span class="line"><span>                                            ▼</span></span>
<span class="line"><span>                                       Chain Adapter</span></span>
<span class="line"><span>                                            │</span></span>
<span class="line"><span>                                            ▼</span></span>
<span class="line"><span>                                        区块链节点</span></span></code></pre></div><h3 id="写入流程" tabindex="-1">写入流程 <a class="header-anchor" href="#写入流程" aria-label="Permalink to &quot;写入流程&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>用户提交</span></span>
<span class="line"><span>    │</span></span>
<span class="line"><span>    ▼</span></span>
<span class="line"><span>┌─────────────┐</span></span>
<span class="line"><span>│  Component  │ ─── 执行变更 ───► Service</span></span>
<span class="line"><span>└─────────────┘                      │</span></span>
<span class="line"><span>                                     ▼</span></span>
<span class="line"><span>                                Chain Adapter</span></span>
<span class="line"><span>                                     │</span></span>
<span class="line"><span>                                     ▼</span></span>
<span class="line"><span>                                 签名交易</span></span>
<span class="line"><span>                                     │</span></span>
<span class="line"><span>                                     ▼</span></span>
<span class="line"><span>                                 广播交易</span></span>
<span class="line"><span>                                     │</span></span>
<span class="line"><span>                                     ▼</span></span>
<span class="line"><span>                                更新缓存</span></span>
<span class="line"><span>                                     │</span></span>
<span class="line"><span>                                     ▼</span></span>
<span class="line"><span>                                 UI 更新</span></span></code></pre></div><hr><h2 id="错误处理规范" tabindex="-1">错误处理规范 <a class="header-anchor" href="#错误处理规范" aria-label="Permalink to &quot;错误处理规范&quot;">​</a></h2><h3 id="错误分类" tabindex="-1">错误分类 <a class="header-anchor" href="#错误分类" aria-label="Permalink to &quot;错误分类&quot;">​</a></h3><table tabindex="0"><thead><tr><th>类型</th><th>处理位置</th><th>用户反馈</th></tr></thead><tbody><tr><td>网络错误</td><td>Service 层</td><td>Toast + 重试按钮</td></tr><tr><td>验证错误</td><td>表单层</td><td>字段级错误提示</td></tr><tr><td>业务错误</td><td>页面层</td><td>错误弹窗</td></tr><tr><td>系统错误</td><td>全局层</td><td>错误边界页面</td></tr></tbody></table><h3 id="规范-1" tabindex="-1">规范 <a class="header-anchor" href="#规范-1" aria-label="Permalink to &quot;规范&quot;">​</a></h3><ul><li><strong>MUST</strong> 在最接近错误源的层级处理错误</li><li><strong>MUST</strong> 提供用户可理解的错误消息</li><li><strong>MUST</strong> 支持错误重试机制</li><li><strong>SHOULD</strong> 实现全局错误边界</li><li><strong>SHOULD</strong> 记录错误日志用于调试</li></ul><hr><h2 id="性能优化规范" tabindex="-1">性能优化规范 <a class="header-anchor" href="#性能优化规范" aria-label="Permalink to &quot;性能优化规范&quot;">​</a></h2><h3 id="代码分割" tabindex="-1">代码分割 <a class="header-anchor" href="#代码分割" aria-label="Permalink to &quot;代码分割&quot;">​</a></h3><ul><li><strong>MUST</strong> 按路由进行代码分割</li><li><strong>SHOULD</strong> 延迟加载非首屏页面</li><li><strong>MAY</strong> 预加载高概率访问的页面</li></ul><h3 id="状态优化" tabindex="-1">状态优化 <a class="header-anchor" href="#状态优化" aria-label="Permalink to &quot;状态优化&quot;">​</a></h3><ul><li><strong>MUST</strong> 使用细粒度状态订阅</li><li><strong>MUST</strong> 避免不必要的状态更新</li><li><strong>SHOULD</strong> 使用组件记忆化</li></ul><h3 id="查询优化" tabindex="-1">查询优化 <a class="header-anchor" href="#查询优化" aria-label="Permalink to &quot;查询优化&quot;">​</a></h3><ul><li><strong>SHOULD</strong> 实现数据预取</li><li><strong>SHOULD</strong> 支持并行查询</li><li><strong>SHOULD</strong> 合理配置缓存策略</li></ul><h3 id="渲染优化" tabindex="-1">渲染优化 <a class="header-anchor" href="#渲染优化" aria-label="Permalink to &quot;渲染优化&quot;">​</a></h3><ul><li><strong>MUST</strong> 避免大列表一次性渲染</li><li><strong>SHOULD</strong> 使用虚拟滚动</li><li><strong>SHOULD</strong> 优化图片加载</li></ul><hr><h2 id="本章小结" tabindex="-1">本章小结 <a class="header-anchor" href="#本章小结" aria-label="Permalink to &quot;本章小结&quot;">​</a></h2><ul><li>四层架构：UI → State → Service → Platform</li><li>单向依赖，层级分明</li><li>数据流清晰，读写分离</li><li>错误处理分类明确</li><li>性能优化策略完备</li></ul>`,49)])])}const u=s(e,[["render",i]]);export{g as __pageData,u as default};
