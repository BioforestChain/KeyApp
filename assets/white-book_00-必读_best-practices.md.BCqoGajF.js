import{_ as i,c as t,o,ag as l}from"./chunks/framework.B0we9iV-.js";const u=JSON.parse('{"title":"最佳实践","description":"","frontmatter":{},"headers":[],"relativePath":"white-book/00-必读/best-practices.md","filePath":"white-book/00-必读/best-practices.md"}'),a={name:"white-book/00-必读/best-practices.md"};function r(s,e,c,d,n,m){return o(),t("div",null,[...e[0]||(e[0]=[l('<h1 id="最佳实践" tabindex="-1">最佳实践 <a class="header-anchor" href="#最佳实践" aria-label="Permalink to &quot;最佳实践&quot;">​</a></h1><blockquote><p>由 <code>pnpm agent practice</code> 维护。</p></blockquote><h2 id="列表" tabindex="-1">列表 <a class="header-anchor" href="#列表" aria-label="Permalink to &quot;列表&quot;">​</a></h2><ul><li>❌ Radix Dialog / position:fixed → ✅ Stackflow BottomSheet/Modal</li><li>❌ React Router → ✅ Stackflow push/pop/replace</li><li>❌ 复制 mpay 代码 → ✅ 理解后用 React/TS 重写</li><li>❌ 随意创建 store → ✅ 遵循 stores/ 现有模式</li><li>❌ 明文选择器 → ✅ data-testid</li><li>❌ 安装新 UI 库 → ✅ shadcn/ui（已集成）</li><li>❌ 新建 CSS → ✅ Tailwind CSS</li><li>❌ text-secondary → ✅ text-muted-foreground 或 bg-secondary text-secondary-foreground（详见白皮书 02-设计篇/02-视觉设计/theme-colors）</li><li>❌ bg-primary text-white → ✅ bg-primary text-primary-foreground（暗色模式下 text-white 对比度不足）</li><li>❌ bg-muted 无文字色 → ✅ bg-muted text-muted-foreground（详见白皮书 02-设计篇/02-视觉设计/dark-mode）</li><li>❌ bg-gray-100 无 dark: 变体 → ✅ bg-gray-100 dark:bg-gray-800 或使用 bg-muted</li><li>❌ getByText(&#39;硬编码中文&#39;) → ✅ getByText(t(&#39;i18n.key&#39;)) 或 getByTestId</li><li>❌ password/Password（宽泛含义） → ✅ walletLock（钱包锁）/ twoStepSecret（安全密码）/ payPassword（支付密码）等具体命名</li><li>圆形元素必须使用 aspect-square 标记，与 w-<em>/h-</em>/size-* 不冲突，是规范要求</li><li>组件尺寸属性要考虑响应式布局，如 lg 尺寸应包含 @xs:w-12 等容器查询断点</li><li>❌ JS scroll 事件监听 → ✅ CSS scroll-driven animations（animation-timeline: scroll()）</li><li>滚动驱动动画使用 <code>scroll-timeline: --name block</code> 定义 + <code>animation-timeline: --name</code> 绑定</li><li>跨层级绑定使用 <code>timeline-scope: --name</code> 在公共祖先上声明</li><li>紧凑头部效果使用 <code>animation-range: 0 80px</code> 限制动画范围</li><li>⚠️ scroll-driven animations 是渐进增强：初始状态必须是可用的（如 opacity-0），不支持时保持初始状态</li><li>E2E 截图变更后运行 <code>pnpm e2e:audit</code> 检查残留截图，详见白皮书 08-测试篇/03-Playwright配置/e2e-best-practices</li><li>组件专属样式使用 CSS Modules：<code>component-name.module.css</code> + <code>import styles from &#39;./xxx.module.css&#39;</code></li><li>CSS Modules 适用场景：@keyframes 动画、伪元素(::before/::after)、复杂选择器(:focus-within)、scroll-driven animations</li><li>CSS Modules 与 Tailwind 混用：<code>className={cn(styles.header, &#39;sticky top-0 z-10 px-5&#39;)}</code></li><li>优先级：CSS Modules &gt; globals.css，组件样式应内聚到组件目录</li></ul>',4)])])}const g=i(a,[["render",r]]);export{u as __pageData,g as default};
