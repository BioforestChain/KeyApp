import{_ as a,c as l,o,ag as t}from"./chunks/framework.B0we9iV-.js";const h=JSON.parse('{"title":"01. 余额查询机制 (Balance Query)","description":"","frontmatter":{},"headers":[],"relativePath":"white-book/10-Wallet-Guide/02-Asset-Management/01-Balance-Query.md","filePath":"white-book/10-Wallet-Guide/02-Asset-Management/01-Balance-Query.md"}'),r={name:"white-book/10-Wallet-Guide/02-Asset-Management/01-Balance-Query.md"};function i(c,e,n,s,d,u){return o(),l("div",null,[...e[0]||(e[0]=[t('<h1 id="_01-余额查询机制-balance-query" tabindex="-1">01. 余额查询机制 (Balance Query) <a class="header-anchor" href="#_01-余额查询机制-balance-query" aria-label="Permalink to &quot;01. 余额查询机制 (Balance Query)&quot;">​</a></h1><p>Code: <code>src/stores/wallet.ts</code> (<code>refreshBalance</code>)</p><p>余额更新是一个从 UI 到 Driver 再回到 Store 的闭环流程。</p><h2 id="流程详解" tabindex="-1">流程详解 <a class="header-anchor" href="#流程详解" aria-label="Permalink to &quot;流程详解&quot;">​</a></h2><ol><li><p><strong>Trigger</strong>:</p><ul><li>用户下拉刷新。</li><li>应用从后台回到前台。</li><li>定时器轮询。</li></ul></li><li><p><strong>Dispatch</strong>:</p><ul><li>调用 <code>walletActions.refreshBalance(walletId, chainId)</code>。</li></ul></li><li><p><strong>Driver Call</strong>:</p><ul><li>获取对应的 <code>ChainProvider</code>。</li><li>调用 <code>getNativeBalance(address)</code>。</li><li>调用 <code>getTokenBalances(address)</code> (如果支持)。</li></ul></li><li><p><strong>Update Store</strong>:</p><ul><li>Driver 返回标准化的 <code>Balance</code> 对象。</li><li>Store 更新 <code>chainAddresses</code> 中的 <code>tokens</code> 列表。</li><li>React 组件自动重渲染。</li></ul></li></ol><h2 id="性能优化" tabindex="-1">性能优化 <a class="header-anchor" href="#性能优化" aria-label="Permalink to &quot;性能优化&quot;">​</a></h2><p>为了避免阻塞 UI，所有查询都是异步并行的 (<code>Promise.all</code>)。单个链的失败不会影响其他链的更新。</p>',7)])])}const _=a(r,[["render",i]]);export{h as __pageData,_ as default};
