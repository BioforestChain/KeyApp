/**
 * KeyApp 主程序全局样式
 * 
 * 导入共享主题 + 主程序专属样式
 */

@import 'tailwindcss';
@import 'tw-animate-css';
@import 'shadcn/tailwind.css';

/* 共享主题 - 小程序也可以导入此文件 */
@import './theme.css';

/* 字体包 - 主程序专属 */
@import '@fontsource-variable/figtree';
@import '@fontsource-variable/dm-sans';
@import '@fontsource/dm-mono/400.css';
@import '@fontsource/dm-mono/500.css';
@import '@fontsource/dm-serif-display/400.css';
@import '@fontsource/dm-serif-display/400-italic.css';

/* Stackflow Navigation - 主程序专属 */
@import '@stackflow/plugin-basic-ui/index.css';

/* Override stackflow plugin colors for dark mode */
.dark [data-stackflow-component-name='AppScreen'] {
  --stackflow-plugin-basic-ui-background-color: var(--background);
  --stackflow-plugin-basic-ui-app-bar-background-color: var(--background);
  --stackflow-plugin-basic-ui-app-bar-text-color: var(--foreground);
  --stackflow-plugin-basic-ui-app-bar-icon-color: var(--foreground);
  --stackflow-plugin-basic-ui-app-bar-border-color: var(--border);
  background-color: var(--background) !important;
}

.dark [data-stackflow-component-name='BottomSheet'] {
  --stackflow-plugin-basic-ui-dim-background-color: rgba(255, 255, 255, 0.15);
  --stackflow-plugin-basic-ui-background-color: var(--background);
}

.dark [data-stackflow-component-name='Modal'] {
  --stackflow-plugin-basic-ui-dim-background-color: rgba(255, 255, 255, 0.15);
  --stackflow-plugin-basic-ui-background-color: var(--background);
}

/* 基础样式 - 主程序专属 */
@layer base {
  * {
    @apply border-border;
  }
  @supports (corner-shape: superellipse(2)) {
    * {
      --radius-base: 2rem;
    }
    :not(.rounded-full) {
      corner-shape: superellipse(2);
    }
    :where(.rounded-full):not(.aspect-square) {
      corner-shape: superellipse(1.1);
    }
  }

  body {
    @apply bg-background text-foreground;
    font-family: var(--font-sans);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* RTL 支持 */
  [dir='rtl'] {
    --direction-multiplier: -1;
  }

  [dir='ltr'] {
    --direction-multiplier: 1;
  }
}

/* 禁用长按和右键菜单（移动端 App 体验） */
html, body {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

/* 允许输入框选择文本 */
input, textarea, [contenteditable="true"] {
  -webkit-user-select: text;
  user-select: text;
}
