/* 发现页滚动驱动动画 */
.discoverPage {
  --header-height: 120px;
}

/* 默认样式：不支持 animation-timeline 时使用 100% 滚动状态 */
.discoverHeader {
  --header-scroll-percent: 60%;
  --header-focus-percent: 0%;
  padding-top: 0.5rem;
  padding-bottom: 0.5rem;
  backdrop-filter: blur(24px);
  background: color-mix(
    in srgb,
    var(--background) calc(var(--header-scroll-percent) + var(--header-focus-percent)),
    transparent
  );
  transition: --header-focus-percent 0.2s ease;
}

/* 渐进增强：支持 animation-timeline 时启用滚动驱动动画 */
@supports (animation-timeline: scroll()) {
  /* 注册自定义属性以支持动画插值 */
  @property --header-scroll-percent {
    syntax: '<percentage>';
    inherits: false;
    initial-value: 0%;
  }

  .discoverPage {
    scroll-timeline-name: --discover-scroll;
    scroll-timeline-axis: y;
  }

  @keyframes header-scroll {
    0% {
      padding-top: 3rem;
      padding-bottom: 1rem;
      --header-scroll-percent: 0%;
      backdrop-filter: blur(0);
    }
    100% {
      padding-top: 0.5rem;
      padding-bottom: 0.5rem;
      --header-scroll-percent: 60%;
      backdrop-filter: blur(24px);
    }
  }

  .discoverHeader {
    --header-scroll-percent: 0%;
    padding-top: 3rem;
    padding-bottom: 1rem;
    backdrop-filter: blur(0);

    animation: header-scroll ease-out forwards;
    animation-timeline: --discover-scroll;
    animation-duration: 1ms;
    animation-range: 0px calc(2 * var(--header-height));
  }
}

/* 渐进增强：支持 color-mix 时启用 focus-within 叠加效果 */
@supports (background: color-mix(in srgb, red 50%, blue)) {
  .discoverHeader:focus-within {
    --header-focus-percent: 20%;
  }
}
