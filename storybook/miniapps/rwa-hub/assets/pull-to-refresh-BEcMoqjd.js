import{$ as h,o as _,f as Q,F as tt,m as et,v as rt,x as st,e as nt,C as at}from"./index-AshhoVut.js";const ot={handle(a,r){const n=this,t=h(a),c=t[0].scrollTop,Y=t[0].scrollHeight,e=t[0].offsetHeight;let o=t[0].getAttribute("data-infinite-distance");const v=t.find(".virtual-list");let g;const x=t.hasClass("infinite-scroll-top");if(o||(o=50),typeof o=="string"&&o.indexOf("%")>=0&&(o=parseInt(o,10)/100*e),o>e&&(o=e),x)c<o&&(t.trigger("infinite",r),n.emit("infinite",t[0],r));else if(c+e>=Y-o){if(v.length>0&&(g=v.eq(-1)[0].f7VirtualList,g&&!g.reachEnd&&!g.params.updatableScroll))return;t.trigger("infinite",r),n.emit("infinite",t[0],r)}},create(a){const r=h(a),n=this;function t(c){n.infiniteScroll.handle(this,c)}r.each(c=>{c.f7InfiniteScrollHandler=t,c.addEventListener("scroll",c.f7InfiniteScrollHandler)})},destroy(a){h(a).each(n=>{n.removeEventListener("scroll",n.f7InfiniteScrollHandler),delete n.f7InfiniteScrollHandler})}},lt={name:"infiniteScroll",create(){_(this,{infiniteScroll:ot})},on:{tabMounted(a){const r=this,n=h(a),t=n.find(".infinite-scroll-content");n.is(".infinite-scroll-content")&&t.add(n),t.each(c=>{r.infiniteScroll.create(c)})},tabBeforeRemove(a){const r=h(a),n=this,t=r.find(".infinite-scroll-content");r.is(".infinite-scroll-content")&&t.add(r),t.each(c=>{n.infiniteScroll.destroy(c)})},pageInit(a){const r=this;a.$el.find(".infinite-scroll-content").each(n=>{r.infiniteScroll.create(n)})},pageBeforeRemove(a){const r=this;a.$el.find(".infinite-scroll-content").each(n=>{r.infiniteScroll.destroy(n)})}}};await Q.loadModule(lt);class K extends tt{constructor(r,n){super({},[r]);const t=this,c=et(),Y=rt(),e=h(n),o=e.find(".ptr-preloader");t.$el=e,t.el=e[0],t.app=r,t.bottom=t.$el.hasClass("ptr-bottom"),t.useModulesParams({});const v=r.theme==="md",g=r.theme==="ios";t.done=function(){const f=v?o:e,u=b=>{h(b.target).closest(o).length||(e.removeClass("ptr-transitioning ptr-pull-up ptr-pull-down ptr-closing"),e.trigger("ptr:done"),t.emit("local::done ptrDone",e[0]),f.off("transitionend",u))};return f.on("transitionend",u),e.removeClass("ptr-refreshing").addClass("ptr-transitioning ptr-closing"),t},t.refresh=function(){return e.hasClass("ptr-refreshing")||(e.addClass("ptr-transitioning ptr-refreshing"),e.trigger("ptr:refresh",t.done),t.emit("local::refresh ptrRefresh",e[0],t.done)),t},t.mousewheel=e.attr("data-ptr-mousewheel")==="true";let x,C,P;const D={};let R,d,w=!1,$=!1,L=!1,F=0,l,i,I,p,N,y,O=!1,H,B,M;const X=e.parents(".page");if((X.find(".navbar").length>0||X.parents(".view").children(".navbars").length>0)&&(O=!0),X.hasClass("no-navbar")&&(O=!1),!t.bottom){const s=r.navbar.getElByPage(X[0]);if(s){const f=h(s),u=f.hasClass("navbar-large-transparent")||f.hasClass("navbar-large")&&f.hasClass("navbar-transparent"),b=f.hasClass("navbar-transparent")&&!f.hasClass("navbar-large");u?e.addClass("ptr-with-navbar-large-transparent"):b&&e.addClass("ptr-with-navbar-transparent")}}!O&&!t.bottom&&e.addClass("ptr-no-navbar"),e.attr("data-ptr-distance")?N=!0:v?p=66:g&&(p=44);function W(s){s===void 0&&(s=0);const f=o.find(".preloader-inner-line"),u=1/f.length;f.forEach((b,S)=>{const m=(s-S*u)/u;b.style.opacity=Math.max(Math.min(m,1),0)*.27})}function V(){o.find(".preloader-inner-line").css("opacity","")}function q(s){if(s.isTrusted){if(C)if(c.os==="android"){if("targetTouches"in s&&s.targetTouches.length>1)return}else return;e.hasClass("ptr-refreshing")||h(s.target).closest(".sortable-handler, .ptr-ignore, .card-expandable.card-opened").length||(P=!1,y=!1,C=!0,R=void 0,I=void 0,s.type==="touchstart"&&(x=s.targetTouches[0].identifier),D.x=s.type==="touchstart"?s.targetTouches[0].pageX:s.pageX,D.y=s.type==="touchstart"?s.targetTouches[0].pageY:s.pageY)}}function U(s){if(!C||!s.isTrusted)return;let f,u,b;if(s.type==="touchmove"){if(x&&s.touches)for(let m=0;m<s.touches.length;m+=1)s.touches[m].identifier===x&&(b=s.touches[m]);b||(b=s.targetTouches[0]),f=b.pageX,u=b.pageY}else f=s.pageX,u=s.pageY;if(!f||!u)return;if(typeof R>"u"&&(R=!!(R||Math.abs(u-D.y)>Math.abs(f-D.x))),!R){C=!1;return}if(i=e[0].scrollTop,!P){e.removeClass("ptr-transitioning"),g&&W(0);let m;if(H=e[0].scrollHeight,B=e[0].offsetHeight,t.bottom&&(M=H-B),i>H){C=!1;return}const T=h(s.target).closest(".ptr-watch-scroll");if(T.length&&T.each(E=>{E!==n&&E.scrollHeight>E.offsetHeight&&h(E).css("overflow")==="auto"&&(!t.bottom&&E.scrollTop>0||t.bottom&&E.scrollTop<E.scrollHeight-E.offsetHeight)&&(m=!0)}),m){C=!1;return}N&&(p=e.attr("data-ptr-distance"),p.indexOf("%")>=0&&(p=H*parseInt(p,10)/100)),F=e.hasClass("ptr-refreshing")?p:0,H===B||c.os!=="ios"||v?$=!0:$=!1,L=!1}if(P=!0,d=u-D.y,typeof I>"u"&&(t.bottom?i!==M:i!==0)&&(I=!0),t.bottom?d<0&&i>=M||i>M:d>0&&i<=0||i<0){c.os==="ios"&&parseInt(c.osVersion.split(".")[0],10)>7&&(!t.bottom&&i===0&&!I&&($=!0),t.bottom&&i===M&&!I&&($=!0)),!$&&t.bottom&&!v&&(e.css("-webkit-overflow-scrolling","auto"),e.scrollTop(M),L=!0),$||L?(s.cancelable&&s.preventDefault(),l=(t.bottom?-1*Math.abs(d)**.85:d**.85)+F,v?o.transform(`translate3d(0,${l}px,0)`).find(".ptr-arrow").transform(`rotate(${180*(Math.abs(d)/66)+100}deg)`):(t.bottom||g?e.children().transform(`translate3d(0,${l}px,0)`):e.transform(`translate3d(0,${l}px,0)`),g&&o.transform("translate3d(0,0px,0)"))):g&&!t.bottom&&o.transform(`translate3d(0,${i}px,0)`);let m;g&&!w&&(m=$||L?Math.abs(d)**.85/p:Math.abs(d)/(p*2),W(m)),($||L)&&Math.abs(d)**.85>p||!$&&Math.abs(d)>=p*2?(w=!0,e.addClass("ptr-pull-up").removeClass("ptr-pull-down"),V()):(w=!1,e.removeClass("ptr-pull-up").addClass("ptr-pull-down")),y||(e.trigger("ptr:pullstart"),t.emit("local::pullStart ptrPullStart",e[0]),y=!0),e.trigger("ptr:pullmove",{event:s,scrollTop:i,translate:l,touchesDiff:d}),t.emit("local::pullMove ptrPullMove",e[0],{event:s,scrollTop:i,translate:l,touchesDiff:d})}else y=!1,e.removeClass("ptr-pull-up ptr-pull-down"),w=!1}function j(s){if(s.isTrusted){if(s.type==="touchend"&&s.changedTouches&&s.changedTouches.length>0&&x&&s.changedTouches[0].identifier!==x){C=!1,R=!1,P=!1,x=null;return}if(!C||!P){C=!1,P=!1;return}l&&(e.addClass("ptr-transitioning"),l=0),v?o.transform("").find(".ptr-arrow").transform(""):(o.transform(""),t.bottom||g?e.children().transform(""):e.transform("")),!$&&t.bottom&&!v&&e.css("-webkit-overflow-scrolling",""),w?(e.addClass("ptr-refreshing"),e.trigger("ptr:refresh",t.done),t.emit("local::refresh ptrRefresh",e[0],t.done)):e.removeClass("ptr-pull-down"),C=!1,P=!1,y&&(e.trigger("ptr:pullend"),t.emit("local::pullEnd ptrPullEnd",e[0]))}}let z,G,k=!0,A=0;function Z(){k=!0,G=!1,A=0,l&&(e.addClass("ptr-transitioning"),l=0),v?o.transform("").find(".ptr-arrow").transform(""):(o.transform(""),t.bottom?e.children().transform(""):e.transform("")),w?(e.addClass("ptr-refreshing"),e.trigger("ptr:refresh",t.done),t.emit("local::refresh ptrRefresh",e[0],t.done)):e.removeClass("ptr-pull-down"),y&&(e.trigger("ptr:pullend"),t.emit("local::pullEnd ptrPullEnd",e[0]))}function J(s){if(!k)return;const{deltaX:f,deltaY:u}=s;if(Math.abs(f)>Math.abs(u)||e.hasClass("ptr-refreshing")||h(s.target).closest(".sortable-handler, .ptr-ignore, .card-expandable.card-opened").length)return;if(clearTimeout(z),i=e[0].scrollTop,!G){e.removeClass("ptr-transitioning"),g&&W(0);let S;if(H=e[0].scrollHeight,B=e[0].offsetHeight,t.bottom&&(M=H-B),i>H){k=!1;return}const m=h(s.target).closest(".ptr-watch-scroll");if(m.length&&m.each(T=>{T!==n&&T.scrollHeight>T.offsetHeight&&h(T).css("overflow")==="auto"&&(!t.bottom&&T.scrollTop>0||t.bottom&&T.scrollTop<T.scrollHeight-T.offsetHeight)&&(S=!0)}),S){k=!1;return}N&&(p=e.attr("data-ptr-distance"),p.indexOf("%")>=0&&(p=H*parseInt(p,10)/100))}if(P=!0,A-=u,d=A,typeof I>"u"&&(t.bottom?i!==M:i!==0)&&(I=!0),t.bottom?d<0&&i>=M||i>M:d>0&&i<=0||i<0){s.cancelable&&s.preventDefault(),l=d,Math.abs(l)>p&&(l=p+(Math.abs(l)-p)**.7,t.bottom&&(l=-l)),v?o.transform(`translate3d(0,${l}px,0)`).find(".ptr-arrow").transform(`rotate(${180*(Math.abs(d)/66)+100}deg)`):t.bottom?e.children().transform(`translate3d(0,${l}px,0)`):(e.transform(`translate3d(0,${l}px,0)`),g&&o.transform(`translate3d(0,${-l}px,0)`));let S;g&&!w&&(S=Math.abs(l)/p,W(S)),Math.abs(l)>p?(w=!0,e.addClass("ptr-pull-up").removeClass("ptr-pull-down"),V()):(w=!1,e.removeClass("ptr-pull-up").addClass("ptr-pull-down")),y||(e.trigger("ptr:pullstart"),t.emit("local::pullStart ptrPullStart",e[0]),y=!0),e.trigger("ptr:pullmove",{event:s,scrollTop:i,translate:l,touchesDiff:d}),t.emit("local::pullMove ptrPullMove",e[0],{event:s,scrollTop:i,translate:l,touchesDiff:d})}else y=!1,e.removeClass("ptr-pull-up ptr-pull-down"),w=!1;z=setTimeout(Z,300)}return!X.length||!e.length||(e[0].f7PullToRefresh=t,t.attachEvents=function(){const f=Y.passiveListener?{passive:!0}:!1;e.on(r.touchEvents.start,q,f),r.on("touchmove:active",U),r.on("touchend:passive",j),t.mousewheel&&!t.bottom&&e.on("wheel",J)},t.detachEvents=function(){const f=Y.passiveListener?{passive:!0}:!1;e.off(r.touchEvents.start,q,f),r.off("touchmove:active",U),r.off("touchend:passive",j),t.mousewheel&&!t.bottom&&e.off("wheel",J)},t.useModules(),t.init()),t}init(){this.attachEvents()}destroy(){let r=this;r.emit("local::beforeDestroy ptrBeforeDestroy",r),r.$el.trigger("ptr:beforedestroy"),delete r.el.f7PullToRefresh,r.detachEvents(),st(r),r=null}}const it={name:"pullToRefresh",create(){const a=this;a.ptr=nt(at({defaultSelector:".ptr-content",constructor:K,app:a,domProp:"f7PullToRefresh"}),{done(r){const n=a.ptr.get(r);if(n)return n.done()},refresh(r){const n=a.ptr.get(r);if(n)return n.refresh()}})},static:{PullToRefresh:K},on:{tabMounted(a){const r=this,n=h(a),t=n.find(".ptr-content");n.is(".ptr-content")&&t.add(n),t.each(c=>{r.ptr.create(c)})},tabBeforeRemove(a){const r=h(a),n=this,t=r.find(".ptr-content");r.is(".ptr-content")&&t.add(r),t.each(c=>{n.ptr.destroy(c)})},pageInit(a){const r=this;a.$el.find(".ptr-content").each(n=>{r.ptr.create(n)})},pageBeforeRemove(a){const r=this;a.$el.find(".ptr-content").each(n=>{r.ptr.destroy(n)})}}};await Q.loadModule(it);
