import{r as o,j as a}from"./iframe-CDstBDzb.js";import{c as y}from"./utils-4perknFd.js";import{I as D}from"./input-CaXgtSWj.js";import{C as S}from"./checkbox-BWJMBOHZ.js";import{u as E}from"./useTranslation-DtChdlRe.js";import{I as K}from"./IconSearch-CzBArCd1.js";import{I as _}from"./IconChevronDown-DXoSdcfJ.js";import{I as P}from"./IconChevronRight-s94KmWwA.js";import{c as w}from"./createReactComponent-BXjChy2x.js";const F=[["path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z",key:"svg-0"}]],L=w("outline","star","Star",F);const R=[["path",{d:"M8.243 7.34l-6.38 .925l-.113 .023a1 1 0 0 0 -.44 1.684l4.622 4.499l-1.09 6.355l-.013 .11a1 1 0 0 0 1.464 .944l5.706 -3l5.693 3l.1 .046a1 1 0 0 0 1.352 -1.1l-1.091 -6.355l4.624 -4.5l.078 -.085a1 1 0 0 0 -.633 -1.62l-6.38 -.926l-2.852 -5.78a1 1 0 0 0 -1.794 0l-2.853 5.78z",key:"svg-0"}]],V=w("filled","star-filled","StarFilled",R),Q=(c,i)=>({name:i(`common:chainKind.${c}.name`),description:i(`common:chainKind.${c}.description`)});function B({chains:c,selectedChains:i,onSelectionChange:p,favoriteChains:m=[],onFavoriteChange:f,showSearch:C=!0,className:$,"data-testid":k}){const{t:d}=E(["onboarding","common"]),[x,I]=o.useState(""),[T,q]=o.useState(new Set(["bioforest"])),r=k??void 0,g=o.useMemo(()=>{const e=new Map;for(const s of c){const t=s.chainKind||"custom";e.has(t)||e.set(t,[]),e.get(t).push(s)}return["bioforest","evm","bitcoin","tron","custom"].filter(s=>e.has(s)).map(s=>{const t=Q(s,d),l=e.get(s);return l?{id:s,name:t.name||s,description:t.description,chains:l}:null}).filter(s=>s!==null)},[c,d]),b=o.useMemo(()=>{if(!x.trim())return g;const e=x.toLowerCase();return g.map(n=>({...n,chains:n.chains.filter(s=>s.name.toLowerCase().includes(e)||s.symbol.toLowerCase().includes(e)||s.id.toLowerCase().includes(e))})).filter(n=>n.chains.length>0)},[g,x]),h=o.useMemo(()=>new Set(m),[m]),j=o.useMemo(()=>b.map(e=>({...e,chains:[...e.chains].toSorted((n,s)=>{const t=h.has(n.id),l=h.has(s.id);return t!==l?t?-1:1:n.name.localeCompare(s.name)})})),[b,h]),z=o.useCallback(e=>{q(n=>{const s=new Set(n);return s.has(e)?s.delete(e):s.add(e),s})},[]),v=o.useCallback(e=>{const n=i.includes(e);p(n?i.filter(s=>s!==e):[...i,e])},[i,p]),G=o.useCallback(e=>{const n=e.chains.map(t=>t.id);if(n.every(t=>i.includes(t)))p(i.filter(t=>!n.includes(t)));else{const t=new Set(i);n.forEach(l=>t.add(l)),p(Array.from(t))}},[i,p]),M=o.useCallback(e=>{if(!f)return;const n=m.includes(e);f(n?m.filter(s=>s!==e):[...m,e])},[m,f]),A=o.useCallback(e=>{const n=e.chains.map(t=>t.id),s=n.filter(t=>i.includes(t)).length;return s===0?"none":s===n.length?"all":"partial"},[i]);return a.jsxs("div",{className:y("space-y-4",$),"data-testid":r,children:[C&&a.jsxs("div",{className:"relative",children:[a.jsx(K,{className:"text-muted-foreground absolute top-1/2 left-3 size-4 -translate-y-1/2"}),a.jsx(D,{value:x,onChange:e=>I(e.target.value),placeholder:d("chainSelector.searchPlaceholder"),className:"pl-9","data-testid":r?`${r}-search`:void 0})]}),a.jsx("div",{className:"space-y-2",children:j.map(e=>{const n=x.trim().length>0?!0:T.has(e.id),s=A(e);return a.jsxs("div",{className:"overflow-hidden rounded-lg border","data-testid":r?`${r}-group-${e.id}`:void 0,children:[a.jsxs("button",{type:"button",onClick:()=>z(e.id),className:y("flex w-full items-center gap-3 px-4 py-3 text-left","hover:bg-muted/50 transition-colors"),"aria-expanded":n,"data-testid":r?`${r}-group-toggle-${e.id}`:void 0,children:[n?a.jsx(_,{className:"text-muted-foreground size-4"}):a.jsx(P,{className:"text-muted-foreground size-4"}),a.jsx(S,{checked:s==="all",indeterminate:s==="partial",onCheckedChange:()=>G(e),onClick:t=>t.stopPropagation(),"aria-label":d("chainSelector.selectAll"),"data-testid":r?`${r}-group-checkbox-${e.id}`:void 0}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium",children:e.name}),e.description&&a.jsx("div",{className:"text-muted-foreground text-xs",children:e.description})]}),a.jsx("span",{className:"text-muted-foreground text-sm",children:d("chainSelector.selectionCount",{selected:e.chains.filter(t=>i.includes(t.id)).length,total:e.chains.length})})]}),n&&a.jsx("div",{className:"border-t","data-testid":r?`${r}-group-content-${e.id}`:void 0,children:e.chains.map(t=>{const l=i.includes(t.id),N=m.includes(t.id);return a.jsxs("div",{className:y("flex items-center gap-3 px-4 py-2.5 pl-11","hover:bg-muted/30 transition-colors",l&&"bg-primary/5"),tabIndex:0,onClick:()=>v(t.id),onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),v(t.id))},"data-testid":r?`${r}-chain-${t.id}`:void 0,children:[a.jsx(S,{checked:l,onCheckedChange:()=>v(t.id),onClick:u=>u.stopPropagation(),"aria-label":t.name,"data-testid":r?`${r}-chain-checkbox-${t.id}`:void 0}),a.jsx("div",{className:"bg-muted flex size-8 items-center justify-center rounded-full text-xs font-bold",children:t.symbol.slice(0,2)}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("div",{className:"truncate font-medium",children:t.name}),a.jsx("div",{className:"text-muted-foreground text-xs",children:t.symbol})]}),f&&a.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),M(t.id)},className:"hover:bg-muted rounded p-1 transition-colors","aria-label":d(N?"common:unfavorite":"common:favorite"),"data-testid":r?`${r}-favorite-${t.id}`:void 0,children:N?a.jsx(V,{className:"size-4 text-yellow-500"}):a.jsx(L,{className:"text-muted-foreground size-4"})})]},t.id)})})]},e.id)})}),j.length===0&&a.jsx("div",{className:"text-muted-foreground py-8 text-center","data-testid":r?`${r}-empty`:void 0,children:d("chainSelector.noResults")})]})}function te(c){return c.map(i=>i.id)}B.__docgenInfo={description:`区块链网络选择器

二级结构：
- 第一级：技术类型（生物链林、EVM、BIP39）
- 第二级：具体网络`,methods:[],displayName:"ChainSelector",props:{chains:{required:!0,tsType:{name:"Array",elements:[{name:"ChainConfig"}],raw:"ChainConfig[]"},description:"所有可用的链配置"},selectedChains:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"已选择的链 ID 列表"},onSelectionChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(chainIds: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"chainIds"}],return:{name:"void"}}},description:"选择变化回调"},favoriteChains:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"收藏的链 ID 列表 (可选)",defaultValue:{value:"[]",computed:!1}},onFavoriteChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(chainIds: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"chainIds"}],return:{name:"void"}}},description:"收藏变化回调 (可选)"},showSearch:{required:!1,tsType:{name:"boolean"},description:"是否显示搜索框",defaultValue:{value:"true",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"额外的 className"},"data-testid":{required:!1,tsType:{name:"string"},description:"测试 ID"}}};export{B as C,te as g};
