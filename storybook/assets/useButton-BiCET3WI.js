import{r as c}from"./iframe-Cctxta_P.js";import{f as K,a as D,b as h,m as B,i as M,c as x}from"./useRenderElement-qlaWX--Y.js";const N=c.createContext(void 0);function O(a=!1){const o=c.useContext(N);if(o===void 0&&!a)throw new Error(K(16));return o}function T(a){const{focusableWhenDisabled:o,disabled:i,composite:l=!1,tabIndex:t=0,isNativeButton:s}=a,u=l&&o!==!1,f=l&&o===!1;return{props:c.useMemo(()=>{const r={onKeyDown(b){i&&o&&b.key!=="Tab"&&b.preventDefault()}};return l||(r.tabIndex=t,!s&&i&&(r.tabIndex=o?t:-1)),(s&&(o||u)||!s&&i)&&(r["aria-disabled"]=i),s&&(!o||f)&&(r.disabled=i),r},[l,i,o,u,f,s,t])}}function H(a={}){const{disabled:o=!1,focusableWhenDisabled:i,tabIndex:l=0,native:t=!0}=a,s=c.useRef(null),u=O(!0)!==void 0,f=D(()=>{const n=s.current;return!!(n?.tagName==="A"&&n?.href)}),{props:d}=T({focusableWhenDisabled:i,disabled:o,composite:u,tabIndex:l,isNativeButton:t}),r=c.useCallback(()=>{const n=s.current;U(n)&&u&&o&&d.disabled===void 0&&n.disabled&&(n.disabled=!1)},[o,d.disabled,u]);h(r,[r]);const b=c.useCallback((n={})=>{const{onClick:p,onMouseDown:C,onKeyUp:k,onKeyDown:w,onPointerDown:P,...E}=n;return B({type:t?"button":void 0,onClick(e){if(o){e.preventDefault();return}p?.(e)},onMouseDown(e){o||C?.(e)},onKeyDown(e){if(o||(x(e),w?.(e)),e.baseUIHandlerPrevented)return;const g=e.target===e.currentTarget&&!t&&!f()&&!o,m=e.key==="Enter",I=e.key===" ";g&&((I||m)&&e.preventDefault(),m&&p?.(e))},onKeyUp(e){o||(x(e),k?.(e)),!e.baseUIHandlerPrevented&&e.target===e.currentTarget&&!t&&!o&&e.key===" "&&p?.(e)},onPointerDown(e){if(o){e.preventDefault();return}P?.(e)}},t?void 0:{role:"button"},d,E)},[o,d,t,f]),y=D(n=>{s.current=n,r()});return{getButtonProps:b,buttonRef:y}}function U(a){return M(a)&&a.tagName==="BUTTON"}export{O as a,H as u};
