import{r as o,j as S}from"./iframe-CLYHcCRY.js";import{c as D}from"./utils-CDN07tui.js";import{N as d,f as $,E as P,b as x,d as q,a as L,u as z}from"./useRenderElement-VYtBqXlq.js";import{u as G,c as H,n as Q}from"./useBaseUiId-BsjBUoJJ.js";import{r as W}from"./index-VP7EfRUW.js";let k=(function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e})({});const X={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},Z={valid(e){return e===null?null:e?{[k.valid]:""}:{[k.invalid]:""}}},A=o.createContext({invalid:void 0,name:void 0,validityData:{state:X,errors:[],error:"",value:"",initialValue:null},setValidityData:d,disabled:void 0,touched:!1,setTouched:d,dirty:!1,setDirty:d,filled:!1,setFilled:d,focused:!1,setFocused:d,validate:()=>null,validationMode:"onSubmit",validationDebounceTime:0,shouldValidateOnChange:()=>!1,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1},validation:{getValidationProps:(e=P)=>e,getInputValidationProps:(e=P)=>e,inputRef:{current:null},commit:async()=>{}}});function h(e=!0){const t=o.useContext(A);if(t.setValidityData===d&&!e)throw new Error($(28));return t}const ee=o.createContext({formRef:{current:{fields:new Map}},errors:{},clearErrors:d,validationMode:"onSubmit",submitAttemptedRef:{current:!1}});function te(){return o.useContext(ee)}const ae=o.createContext({controlId:void 0,setControlId:d,labelId:void 0,setLabelId:d,messageIds:[],setMessageIds:d,getDescriptionProps:e=>e});function N(){return o.useContext(ae)}function ne(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}function ie({controlled:e,default:t,name:n,state:l="value"}){const{current:u}=o.useRef(e!==void 0),[s,f]=o.useState(t),a=u?e:s,v=o.useCallback(b=>{u||f(b)},[]);return[a,v]}function le(e={}){const{id:t,implicit:n=!1,controlRef:l}=e,{controlId:u,setControlId:s}=N(),f=G(t);return x(()=>{if(!(!n&&!t||s===d)){if(n){const a=l?.current;q(a)&&a.closest("label")!=null?s(t??null):s(u??f)}else t&&s(t);return()=>{t&&s(void 0)}}},[t,l,u,s,n,f]),u??f}function se(e){const{enabled:t=!0,value:n,id:l,name:u,controlRef:s,commit:f}=e,{formRef:a}=te(),{invalid:v,markedDirtyRef:b,validityData:p,setValidityData:y}=h(),m=L(e.getValue);x(()=>{if(!t)return;let r=n;r===void 0&&(r=m()),p.initialValue===null&&r!==null&&y(V=>({...V,initialValue:r}))},[t,y,n,p.initialValue,m]),x(()=>{!t||!l||a.current.fields.set(l,{getValue:m,name:u,controlRef:s,validityData:ne(p,v),validate(){let r=n;r===void 0&&(r=m()),b.current=!0,W.flushSync(()=>f(r))}})},[f,s,t,a,m,l,v,b,u,p,n]),x(()=>{const r=a.current.fields;return()=>{l&&r.delete(l)}},[a,l])}const re=o.forwardRef(function(t,n){const{render:l,className:u,id:s,name:f,value:a,disabled:v=!1,onValueChange:b,defaultValue:p,...y}=t,{state:m,name:r,disabled:V}=h(),C=V||v,R=r??f,U=o.useMemo(()=>({...m,disabled:C}),[m,C]),{setTouched:E,setDirty:O,validityData:_,setFocused:M,setFilled:I,validationMode:j,validation:c}=h(),{labelId:B}=N(),T=le({id:s});x(()=>{const i=a!=null;c.inputRef.current?.value||i&&a!==""?I(!0):i&&a===""&&I(!1)},[c.inputRef,I,a]);const[w,Y]=ie({controlled:a,default:p,name:"FieldControl",state:"value"}),J=a!==void 0,K=L((i,g)=>{b?.(i,g),!g.isCanceled&&Y(i)});return se({id:T,name:R,commit:c.commit,value:w,getValue:()=>c.inputRef.current?.value,controlRef:c.inputRef}),z("input",t,{ref:n,state:U,props:[{id:T,disabled:C,name:R,ref:c.inputRef,"aria-labelledby":B,...J?{value:w}:{defaultValue:p},onChange(i){const g=i.currentTarget.value;K(g,H(Q,i.nativeEvent)),O(g!==_.initialValue),I(g!=="")},onFocus(){M(!0)},onBlur(i){E(!0),M(!1),j==="onBlur"&&c.commit(i.currentTarget.value)},onKeyDown(i){i.currentTarget.tagName==="INPUT"&&i.key==="Enter"&&(E(!0),c.commit(i.currentTarget.value))}},c.getInputValidationProps(),y],stateAttributesMapping:Z})}),oe=o.forwardRef(function(t,n){return S.jsx(re,{ref:n,...t})}),F="dark:bg-input/30 border-input focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 disabled:bg-input/50 dark:disabled:bg-input/80 h-8 rounded-lg border bg-transparent px-2.5 py-1 text-base transition-colors file:h-6 file:text-sm file:font-medium focus-visible:ring-[3px] aria-invalid:ring-[3px] md:text-sm file:text-foreground placeholder:text-muted-foreground w-full min-w-0 outline-none file:inline-flex file:border-0 file:bg-transparent disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50";function de({className:e,...t}){const n=typeof e=="function"?l=>D(F,e(l)):D(F,e);return S.jsx(oe,{"data-slot":"input",className:n,...t})}de.__docgenInfo={description:"",methods:[],displayName:"Input"};export{de as I,h as a,N as b,le as c,ie as d,se as e,Z as f,te as u};
