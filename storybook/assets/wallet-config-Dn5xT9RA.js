const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./snapdom-CO8q8LPW.js","./preload-helper-PPVm8Dsz.js","./index-DBrPxRsx.js","./chain-config-CVvvJPxJ.js","./index-D0E7N0oa.js","./bioforest-ChHUthdw.js","./schemas-34eCiBJ6.js","./iframe-Cdc63axx.js","./iframe-D2OUpJUL.css","./address-format-BmR8oJgW.js","./amount-BQsqQYGO.js"])))=>i.map(i=>d[i]);
import{z as Ve,w as we,A as cs,B as zt,C as ye,L as $o,i as lr,v as dr,x as ur,e as us,a as ms,c as ta,h as Os,f as La,M as Wo,H as pm,s as Ho,n as mr,u as Gs,D as sa,G as qo,I as Uo,J as Vo,K as Jo,g as Et,E as na,N as xm,F as Ko}from"./chain-config-CVvvJPxJ.js";import{ar as gm,as as ui,at as He,au as Oa,av as Ms,aw as Fa,ax as $a,ay as mi,az as vm,aA as fn,aB as bm,aC as ym,aD as fi,aE as Go,r as l,aF as jm,aG as Qo,u as je,g as Nm,j as t,R as fr,aJ as hr,aH as Qs,aI as Ys,t as pr,aK as Yo,v as Wa,S as wm,w as Sm}from"./iframe-Cdc63axx.js";import{a as aa,c as z}from"./utils-CDN07tui.js";import{u as Xo,d as Ha,W as Cm}from"./useWalletTheme-BKpQl2vq.js";import{W as km,u as Zo,a as Am,b as Im,c as Tm,g as Em,d as Pm,C as _m,e as Mm,f as Rm,h as Dm,I as zm,i as Bm}from"./wallet-card-carousel-DRkBI7IE.js";import{W as ec}from"./wallet-card-D72Fjhtn.js";import{I as qe,u as Lm,a as tc,b as sc,c as Om,d as hi,e as Fm,f as $m}from"./input-DwamVU46.js";import{B as H}from"./button-CXgo3fuS.js";import{S as Wm}from"./swiper-sync-context-CyrAtAxT.js";import{T as Hm}from"./TabBar-QqJvD6zc.js";import{T as qm}from"./token-list-BFIzIT9A.js";import{T as xr}from"./transaction-list-9RzKAF1k.js";import{S as Um}from"./swipeable-tabs-ByAMN2QG.js";import{L as Me}from"./loading-spinner-BUGHRkCk.js";import{u as F}from"./useTranslation-B1THGpvK.js";import{I as ht}from"./IconAlertTriangle-CN6TnQbc.js";import{b as wt,I as Xs,a as Zs}from"./IconTrash-B5y_mVMQ.js";import{G as et}from"./gradient-button-CZKG_OxC.js";import{h as Vm,c as Jm,t as Km,a as nc,C as Gm,s as qt}from"./token-item-B3WkOXGU.js";import{c as zn}from"./web-D11Qze_b.js";import{t as Qm}from"./web-B0qc0cto.js";import"./index-D0E7N0oa.js";import"./breakpoint-LJlNYN6X.js";import{_ as Bn}from"./preload-helper-PPVm8Dsz.js";import{A as tt}from"./amount-BQsqQYGO.js";import{g as vs,e as gr,f as Ym,s as Xm,v as Zm,h as ef,i as tf}from"./index-DBrPxRsx.js";import{c as de}from"./createReactComponent-Byz9u14m.js";import{I as sf,i as nf,A as af}from"./address-input-Bz7_s3p2.js";import{I as St}from"./IconPlus-BXL8fPDI.js";import{e as Fs,I as ac,H as ls,u as rf,l as rc,J as of,K as cf,L as pi,d as lf,M as xi,N as gi,O as vi,P as bi,Q as yi,R as df}from"./index-CaegeGsA.js";import{a as vr,u as uf,l as mf,o as $s,n as qa,s as ge,b as ff,c as is}from"./schemas-34eCiBJ6.js";import{a as ic}from"./my-apps-page-C-GgQ6Ji.js";import{E as hf}from"./ecosystem-desktop-DSCpwP2d.js";import"./miniapp-splash-screen-DlSzkndR.js";import"./swiper-B7mspzql.js";/* empty css                     */import{P as Q}from"./page-header-CyxviZlS.js";import{I as Oe}from"./IconChevronRight-pfWSeOFV.js";import{S as Bt,a as Lt,b as Ot,c as Ft,u as pf,f as xf,D as gf,g as vf,h as bf,i as yf,j as jf,k as Nf,l as wf,m as Sf,n as Cf}from"./sheet-Bx70m0Aq.js";import{I as Se}from"./IconCheck-CSFX6uTb.js";import{C as ra}from"./chain-icon-D4xOCR_v.js";import{p as Ut,P as bs}from"./pattern-lock-DeSVki0k.js";import{P as Ln}from"./password-input-DQ25D_Ph.js";import{I as Jt}from"./IconAlertCircle-CXTf0ayz.js";import{F as br}from"./fee-display-DoWbZSks.js";import{I as Ue}from"./IconLoader2-DiFzCi9w.js";import{g as $t,C as ia,I as kf}from"./contact-avatar-CGjpJnae.js";import{I as en,P as yr}from"./pattern-lock-setup-DIhxZ-Xr.js";import{I as jr,a as In,b as tn,c as oc,d as Af,e as If,f as Tf,g as Ef,h as Pf,i as _f,j as Mf,k as Rf,l as Df,m as zf,n as Bf,o as cc}from"./transaction-item-cwlr8uIT.js";import{i as Lf,d as Of}from"./address-format-BmR8oJgW.js";import{I as sn}from"./IconSearch-C38tKWUX.js";import{I as Nr}from"./IconDownload-DsZxfMH9.js";import{W as Ff}from"./wallet-mini-card-DxswMVgD.js";import{I as $f,W as Wf}from"./wallet-list-DFiS9nwt.js";import{C as lc}from"./checkbox-DzLNWNzq.js";import{I as wr}from"./IconChevronDown-47ONnUQ4.js";import{I as Sr}from"./IconCopy-Bd89ourp.js";import{p as dc,g as Hf}from"./qr-parser-BsgDBAVo.js";import{c as uc}from"./index-BXT1wzNO.js";import{g as qf,a as Uf,b as Vf}from"./scanner-validators-YRGmuXyx.js";import{I as oa}from"./IconX-6uAECJsH.js";import{I as Cr}from"./IconWallet-bx9J8Pqk.js";import{C as Jf}from"./contact-card-B0B9VOdV.js";import{i as Tn,c as En,Y as Pn,q as ze,H as Ae,K as mc,_ as Kf,a as Gf}from"./bioforest-ChHUthdw.js";import{A as Ws}from"./address-display-Br4bPKCM.js";import{I as fc}from"./IconShieldCheck-G2qkR-oE.js";import{A as hc}from"./amount-display-CpkhKkD5.js";import{I as kr}from"./IconEye-DHoUSG8I.js";import{I as Qf}from"./IconInfoCircle-i82YKtep.js";import{A as fs,P as jt,F as Yf,E as Xf}from"./error-boundary-Br_PTww5.js";import{I as nn}from"./icon-circle-BA3rQJgu.js";import{M as pc}from"./mnemonic-display-CmFU6-yu.js";import{g as xc,C as Ar}from"./chain-selector-CfXDnGYu.js";import{g as Zf,v as gc,R as eh}from"./recover-wallet-form-Do3wfnF8.js";import{I as vc}from"./IconEyeOff-B9Jhp3Le.js";import{I as ys}from"./IconCircleCheck-XqF-o2ls.js";import{A as th}from"./amount-input-B8HPXtWg.js";import{S as sh,I as bc,a as nh}from"./send-result-BQcHYeOw.js";import{A as ah}from"./qr-code-CN1BkjhE.js";import{e as yc,f as ca,a as Ye,b as Be,m as jc,k as Nc,C as ji,u as st,l as Ni}from"./useRenderElement-DBEnl05C.js";import{T as wc}from"./Trans-CfconkXE.js";import{M as rh}from"./mnemonic-input-cQoGsY0n.js";import{n as fe,ah as Ir,c as ih,ai as ee,U as Tr,u as la,s as oh,h as ch,m as lh,aj as dh,ak as uh,J as Mt,V as mh,ae as fh,a1 as Ua,k as wi,v as hh,b as ph,a2 as xh,l as gh,I as vh,i as bh,p as Sc,a8 as yh,al as jh,F as Nh,t as Cc,a as wh}from"./useOpenInteractionType-DOAJdbRv.js";import{c as ut,n as kc,f as Sh,j as Ch,w as kh,h as ya}from"./useBaseUiId-D0nQQUh5.js";import{u as Ac}from"./useButton-DInLJQHG.js";import{r as Ah}from"./index-DhqZztgt.js";import"./empty-state-BekREkN0.js";import{b as ja}from"./skeleton-B6q0SJ8M.js";import"./animated-number-BzKftMU8.js";import{T as Ih}from"./time-display-Bqp2_Ej9.js";import{T as Th,I as Eh}from"./transaction-status-BlZDK4VJ.js";import{I as Ph}from"./IconDots-Dmyhnky5.js";import{I as _h}from"./IconCoins-gvMH-Yks.js";import{I as Mh}from"./IconSparkles-CUJ4IiFn.js";import{A as Ic}from"./AppInfoCard-Q131RP_G.js";import{P as Rh}from"./PermissionList-BaaaFT4T.js";import{W as Dh}from"./wallet-selector-DyhJjCoj.js";import{T as mt}from"./token-icon-G8t5AcAW.js";import{T as Si}from"./TransactionDetails-DZ09Ga5L.js";import{B as Ci}from"./BalanceWarning-DTSqbIWK.js";import{K as zh}from"./key-type-selector-BBQabwoN.js";import{A as Bh}from"./arbitrary-key-input-B7BeH9vr.js";import{C as Lh}from"./chain-address-preview-Dapk3Eme.js";import{C as Oh}from"./collision-confirm-dialog-CnqDetFj.js";import{B as Fh}from"./balance-display-CnJIlMV0.js";import{I as $h}from"./IconBell-F1oortPO.js";import{I as Wh}from"./IconCircleX-DuUoE_TA.js";import{I as Hh}from"./IconShield-Bpuq1fiL.js";var qh=class extends gm{constructor(e,s){super(),this.options=s,this.#s=e,this.#d=null,this.#i=ui(),this.bindMethods(),this.setOptions(s)}#s;#t=void 0;#n=void 0;#e=void 0;#r;#c;#i;#d;#g;#h;#a;#v;#p;#l;#x=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),ki(this.#t,this.options)?this.#o():this.updateResult(),this.#w())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Va(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Va(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#S(),this.#y(),this.#t.removeObserver(this)}setOptions(e){const s=this.options,n=this.#t;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof He(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#m(),this.#t.setOptions(this.options),s._defaulted&&!Oa(this.options,s)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const a=this.hasListeners();a&&Ai(this.#t,n,this.options,s)&&this.#o(),this.updateResult(),a&&(this.#t!==n||He(this.options.enabled,this.#t)!==He(s.enabled,this.#t)||Ms(this.options.staleTime,this.#t)!==Ms(s.staleTime,this.#t))&&this.#j();const r=this.#N();a&&(this.#t!==n||He(this.options.enabled,this.#t)!==He(s.enabled,this.#t)||r!==this.#l)&&this.#b(r)}getOptimisticResult(e){const s=this.#s.getQueryCache().build(this.#s,e),n=this.createResult(s,e);return Vh(this,n)&&(this.#e=n,this.#c=this.options,this.#r=this.#t.state),n}getCurrentResult(){return this.#e}trackResult(e,s){return new Proxy(e,{get:(n,a)=>(this.trackProp(a),s?.(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(e){this.#x.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=this.#s.defaultQueryOptions(e),n=this.#s.getQueryCache().build(this.#s,s);return n.fetch().then(()=>this.createResult(n,s))}fetch(e){return this.#o({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#e))}#o(e){this.#m();let s=this.#t.fetch(this.options,e);return e?.throwOnError||(s=s.catch(Fa)),s}#j(){this.#S();const e=Ms(this.options.staleTime,this.#t);if($a||this.#e.isStale||!mi(e))return;const n=vm(this.#e.dataUpdatedAt,e)+1;this.#v=fn.setTimeout(()=>{this.#e.isStale||this.updateResult()},n)}#N(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(e){this.#y(),this.#l=e,!($a||He(this.options.enabled,this.#t)===!1||!mi(this.#l)||this.#l===0)&&(this.#p=fn.setInterval(()=>{(this.options.refetchIntervalInBackground||bm.isFocused())&&this.#o()},this.#l))}#w(){this.#j(),this.#b(this.#N())}#S(){this.#v&&(fn.clearTimeout(this.#v),this.#v=void 0)}#y(){this.#p&&(fn.clearInterval(this.#p),this.#p=void 0)}createResult(e,s){const n=this.#t,a=this.options,r=this.#e,i=this.#r,c=this.#c,u=e!==n?e.state:this.#n,{state:d}=e;let m={...d},h=!1,p;if(s._optimisticResults){const k=this.hasListeners(),I=!k&&ki(e,s),E=k&&Ai(e,n,s,a);(I||E)&&(m={...m,...ym(d.data,e.options)}),s._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:g,errorUpdatedAt:y,status:f}=m;p=m.data;let x=!1;if(s.placeholderData!==void 0&&p===void 0&&f==="pending"){let k;r?.isPlaceholderData&&s.placeholderData===c?.placeholderData?(k=r.data,x=!0):k=typeof s.placeholderData=="function"?s.placeholderData(this.#a?.state.data,this.#a):s.placeholderData,k!==void 0&&(f="success",p=fi(r?.data,k,s),h=!0)}if(s.select&&p!==void 0&&!x)if(r&&p===i?.data&&s.select===this.#g)p=this.#h;else try{this.#g=s.select,p=s.select(p),p=fi(r?.data,p,s),this.#h=p,this.#d=null}catch(k){this.#d=k}this.#d&&(g=this.#d,p=this.#h,y=Date.now(),f="error");const b=m.fetchStatus==="fetching",v=f==="pending",j=f==="error",N=v&&b,w=p!==void 0,S={status:f,fetchStatus:m.fetchStatus,isPending:v,isSuccess:f==="success",isError:j,isInitialLoading:N,isLoading:N,data:p,dataUpdatedAt:m.dataUpdatedAt,error:g,errorUpdatedAt:y,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>u.dataUpdateCount||m.errorUpdateCount>u.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:j&&!w,isPaused:m.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:j&&w,isStale:Er(e,s),refetch:this.refetch,promise:this.#i,isEnabled:He(s.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const k=D=>{S.status==="error"?D.reject(S.error):S.data!==void 0&&D.resolve(S.data)},I=()=>{const D=this.#i=S.promise=ui();k(D)},E=this.#i;switch(E.status){case"pending":e.queryHash===n.queryHash&&k(E);break;case"fulfilled":(S.status==="error"||S.data!==E.value)&&I();break;case"rejected":(S.status!=="error"||S.error!==E.reason)&&I();break}}return S}updateResult(){const e=this.#e,s=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#c=this.options,this.#r.data!==void 0&&(this.#a=this.#t),Oa(s,e))return;this.#e=s;const n=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,r=typeof a=="function"?a():a;if(r==="all"||!r&&!this.#x.size)return!0;const i=new Set(r??this.#x);return this.options.throwOnError&&i.add("error"),Object.keys(this.#e).some(c=>{const o=c;return this.#e[o]!==e[o]&&i.has(o)})};this.#f({listeners:n()})}#m(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#t)return;const s=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(s?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#w()}#f(e){Go.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(this.#e)}),this.#s.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Uh(e,s){return He(s.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&s.retryOnMount===!1)}function ki(e,s){return Uh(e,s)||e.state.data!==void 0&&Va(e,s,s.refetchOnMount)}function Va(e,s,n){if(He(s.enabled,e)!==!1&&Ms(s.staleTime,e)!=="static"){const a=typeof n=="function"?n(e):n;return a==="always"||a!==!1&&Er(e,s)}return!1}function Ai(e,s,n,a){return(e!==s||He(a.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Er(e,n)}function Er(e,s){return He(s.enabled,e)!==!1&&e.isStaleByTime(Ms(s.staleTime,e))}function Vh(e,s){return!Oa(e.getCurrentResult(),s)}var Tc=l.createContext(!1),Jh=()=>l.useContext(Tc);Tc.Provider;function Kh(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Gh=l.createContext(Kh()),Qh=()=>l.useContext(Gh),Yh=(e,s)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(s.isReset()||(e.retryOnMount=!1))},Xh=e=>{l.useEffect(()=>{e.clearReset()},[e])},Zh=({result:e,errorResetBoundary:s,throwOnError:n,query:a,suspense:r})=>e.isError&&!s.isReset()&&!e.isFetching&&a&&(r&&e.data===void 0||jm(n,[e.error,a])),ep=e=>{if(e.suspense){const n=r=>r==="static"?r:Math.max(r??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...r)=>n(a(...r)):n(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},tp=(e,s)=>e.isLoading&&e.isFetching&&!s,sp=(e,s)=>e?.suspense&&s.isPending,Ii=(e,s,n)=>s.fetchOptimistic(e).catch(()=>{n.clearReset()});function np(e,s,n){const a=Jh(),r=Qh(),i=Qo(),c=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(c),c._optimisticResults=a?"isRestoring":"optimistic",ep(c),Yh(c,r),Xh(r);const o=!i.getQueryCache().get(c.queryHash),[u]=l.useState(()=>new s(i,c)),d=u.getOptimisticResult(c),m=!a&&e.subscribed!==!1;if(l.useSyncExternalStore(l.useCallback(h=>{const p=m?u.subscribe(Go.batchCalls(h)):Fa;return u.updateResult(),p},[u,m]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),l.useEffect(()=>{u.setOptions(c)},[c,u]),sp(c,d))throw Ii(c,u,r);if(Zh({result:d,errorResetBoundary:r,throwOnError:c.throwOnError,query:i.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw d.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(c,d),c.experimental_prefetchInRender&&!$a&&tp(d,a)&&(o?Ii(c,u,r):i.getQueryCache().get(c.queryHash)?.promise)?.catch(Fa).finally(()=>{u.updateResult()}),c.notifyOnChangeProps?d:u.trackResult(d)}function da(e,s){return np(e,qh)}const ap=[["path",{d:"M20 6v12a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2z",key:"svg-0"}],["path",{d:"M10 16h6",key:"svg-1"}],["path",{d:"M13 11m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-2"}],["path",{d:"M4 8h3",key:"svg-3"}],["path",{d:"M4 12h3",key:"svg-4"}],["path",{d:"M4 16h3",key:"svg-5"}]],rp=de("outline","address-book","AddressBook",ap);const ip=[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M3.6 15h10.55",key:"svg-1"}],["path",{d:"M6.551 4.938l3.26 10.034",key:"svg-2"}],["path",{d:"M17.032 4.636l-8.535 6.201",key:"svg-3"}],["path",{d:"M20.559 14.51l-8.535 -6.201",key:"svg-4"}],["path",{d:"M12.257 20.916l3.261 -10.034",key:"svg-5"}]],Ec=de("outline","aperture","Aperture",ip);const op=[["path",{d:"M17 7l-10 10",key:"svg-0"}],["path",{d:"M16 17l-9 0l0 -9",key:"svg-1"}]],cp=de("outline","arrow-down-left","ArrowDownLeft",op);const lp=[["path",{d:"M7 7l10 10",key:"svg-0"}],["path",{d:"M17 8l0 9l-9 0",key:"svg-1"}]],dp=de("outline","arrow-down-right","ArrowDownRight",lp);const up=[["path",{d:"M17 7l-10 10",key:"svg-0"}],["path",{d:"M8 7l9 0l0 9",key:"svg-1"}]],Pc=de("outline","arrow-up-right","ArrowUpRight",up);const mp=[["path",{d:"M3 12h1m8 -9v1m8 8h1m-15.4 -6.4l.7 .7m12.1 -.7l-.7 .7",key:"svg-0"}],["path",{d:"M9 16a5 5 0 1 1 6 0a3.5 3.5 0 0 0 -1 3a2 2 0 0 1 -4 0a3.5 3.5 0 0 0 -1 -3",key:"svg-1"}],["path",{d:"M9.7 17l4.6 0",key:"svg-2"}]],_c=de("outline","bulb","Bulb",mp);const fp=[["path",{d:"M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M9 13a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]],hp=de("outline","camera","Camera",fp);const pp=[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]],Pr=de("outline","chevron-up","ChevronUp",pp);const xp=[["path",{d:"M14 10m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M21 12a9 9 0 1 1 -18 0a9 9 0 0 1 18 0z",key:"svg-1"}],["path",{d:"M12.5 11.5l-4 4l1.5 1.5",key:"svg-2"}],["path",{d:"M12 15l-1.5 -1.5",key:"svg-3"}]],_r=de("outline","circle-key","CircleKey",xp);const gp=[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M14.8 9a2 2 0 0 0 -1.8 -1h-2a2 2 0 1 0 0 4h2a2 2 0 1 1 0 4h-2a2 2 0 0 1 -1.8 -1",key:"svg-1"}],["path",{d:"M12 7v10",key:"svg-2"}]],vp=de("outline","coin","Coin",gp);const bp=[["path",{d:"M16.7 8a3 3 0 0 0 -2.7 -2h-4a3 3 0 0 0 0 6h4a3 3 0 0 1 0 6h-4a3 3 0 0 1 -2.7 -2",key:"svg-0"}],["path",{d:"M12 3v3m0 12v3",key:"svg-1"}]],yp=de("outline","currency-dollar","CurrencyDollar",bp);const jp=[["path",{d:"M6 12l6 -9l6 9l-6 9z",key:"svg-0"}],["path",{d:"M6 12l6 -3l6 3l-6 2z",key:"svg-1"}]],Np=de("outline","currency-ethereum","CurrencyEthereum",jp);const wp=[["path",{d:"M12 6m-8 0a8 3 0 1 0 16 0a8 3 0 1 0 -16 0",key:"svg-0"}],["path",{d:"M4 6v6a8 3 0 0 0 16 0v-6",key:"svg-1"}],["path",{d:"M4 12v6a8 3 0 0 0 16 0v-6",key:"svg-2"}]],Mc=de("outline","database","Database",wp);const Sp=[["path",{d:"M3 5a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10z",key:"svg-0"}],["path",{d:"M7 20h10",key:"svg-1"}],["path",{d:"M9 16v4",key:"svg-2"}],["path",{d:"M15 16v4",key:"svg-3"}]],Cp=de("outline","device-desktop","DeviceDesktop",Sp);const kp=[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]],Rc=de("outline","filter","Filter",kp);const Ap=[["path",{d:"M18.9 7a8 8 0 0 1 1.1 5v1a6 6 0 0 0 .8 3",key:"svg-0"}],["path",{d:"M8 11a4 4 0 0 1 8 0v1a10 10 0 0 0 2 6",key:"svg-1"}],["path",{d:"M12 11v2a14 14 0 0 0 2.5 8",key:"svg-2"}],["path",{d:"M8 15a18 18 0 0 0 1.8 6",key:"svg-3"}],["path",{d:"M4.9 19a22 22 0 0 1 -.9 -7v-1a8 8 0 0 1 12 -6.95",key:"svg-4"}]],Ip=de("outline","fingerprint","Fingerprint",Ap);const Tp=[["path",{d:"M9 6.371c0 4.418 -2.239 6.629 -5 6.629",key:"svg-0"}],["path",{d:"M4 6.371h7",key:"svg-1"}],["path",{d:"M5 9c0 2.144 2.252 3.908 6 4",key:"svg-2"}],["path",{d:"M12 20l4 -9l4 9",key:"svg-3"}],["path",{d:"M19.1 18h-6.2",key:"svg-4"}],["path",{d:"M6.694 3l.793 .582",key:"svg-5"}]],Ep=de("outline","language","Language",Tp);const Pp=[["path",{d:"M9 15l6 -6",key:"svg-0"}],["path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464",key:"svg-1"}],["path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463",key:"svg-2"}]],Dc=de("outline","link","Link",Pp);const _p=[["path",{d:"M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z",key:"svg-0"}]],Mp=de("outline","moon","Moon",_p);const Rp=[["path",{d:"M6 9a6 6 0 1 0 12 0a6 6 0 0 0 -12 0",key:"svg-0"}],["path",{d:"M12 3c1.333 .333 2 2.333 2 6s-.667 5.667 -2 6",key:"svg-1"}],["path",{d:"M12 3c-1.333 .333 -2 2.333 -2 6s.667 5.667 2 6",key:"svg-2"}],["path",{d:"M6 9h12",key:"svg-3"}],["path",{d:"M3 20h7",key:"svg-4"}],["path",{d:"M14 20h7",key:"svg-5"}],["path",{d:"M10 20a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-6"}],["path",{d:"M12 15v3",key:"svg-7"}]],Dp=de("outline","network","Network",Rp);const zp=[["path",{d:"M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25",key:"svg-0"}],["path",{d:"M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}]],Bp=de("outline","palette","Palette",zp);const Lp=[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}],["path",{d:"M16 19h6",key:"svg-2"}]],Op=de("outline","pencil-minus","PencilMinus",Lp);const Fp=[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M7 17l0 .01",key:"svg-1"}],["path",{d:"M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M7 7l0 .01",key:"svg-3"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-4"}],["path",{d:"M17 7l0 .01",key:"svg-5"}],["path",{d:"M14 14l3 0",key:"svg-6"}],["path",{d:"M20 14l0 .01",key:"svg-7"}],["path",{d:"M14 14l0 3",key:"svg-8"}],["path",{d:"M14 20l3 0",key:"svg-9"}],["path",{d:"M17 17l3 0",key:"svg-10"}],["path",{d:"M20 17l0 3",key:"svg-11"}]],$p=de("outline","qrcode","Qrcode",Fp);const Wp=[["path",{d:"M8 9l4 -4l4 4",key:"svg-0"}],["path",{d:"M16 15l-4 4l-4 -4",key:"svg-1"}]],Hp=de("outline","selector","Selector",Wp);const qp=[["path",{d:"M10 14l11 -11",key:"svg-0"}],["path",{d:"M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5",key:"svg-1"}]],zc=de("outline","send","Send",qp);const Up=[["path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1",key:"svg-0"}],["path",{d:"M12 14v-11",key:"svg-1"}],["path",{d:"M9 6l3 -3l3 3",key:"svg-2"}]],Vp=de("outline","share-2","Share2",Up);const Jp=[["path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-0"}],["path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}],["path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-2"}],["path",{d:"M8.7 10.7l6.6 -3.4",key:"svg-3"}],["path",{d:"M8.7 13.3l6.6 3.4",key:"svg-4"}]],Mr=de("outline","share","Share",Jp);const Kp=[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7",key:"svg-1"}]],Gp=de("outline","sun","Sun",Kp);const Qp=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M3.6 9h16.8",key:"svg-1"}],["path",{d:"M3.6 15h16.8",key:"svg-2"}],["path",{d:"M11.5 3a17 17 0 0 0 0 18",key:"svg-3"}],["path",{d:"M12.5 3a17 17 0 0 1 0 18",key:"svg-4"}]],Bc=de("outline","world","World",Qp);function Kt(){return je(we,e=>e.wallets)}function Le(){return je(we,e=>Ve.getCurrentWallet(e))}function Ct(){return je(we,e=>e.selectedChain)}function Lc(){return je(we,e=>e.chainPreferences)}function Rr(){return je(we,e=>Ve.getCurrentChainAddress(e))}function Oc(){return je(we,e=>Ve.getCurrentChainTokens(e))}function Fc(){return je(we,e=>Ve.getAvailableChains(e))}function $c(){return je(we,e=>Ve.hasWallet(e))}function Wc(){return je(we,e=>e.isInitialized)}const Yp=Object.freeze(Object.defineProperty({__proto__:null,addressBookActions:ms,addressBookSelectors:ta,addressBookStore:us,chainConfigActions:Et,chainConfigSelectors:Os,chainConfigStore:La,currencies:Wa,languages:Yo,preferencesActions:Qs,preferencesStore:Sm,useAvailableChains:Fc,useChainConfigError:Jo,useChainConfigLoading:Vo,useChainConfigMigrationRequired:$o,useChainConfigState:sa,useChainConfigSubscription:qo,useChainConfigWarnings:Uo,useChainConfigs:Gs,useChainPreferences:Lc,useCurrency:pr,useCurrentChainAddress:Rr,useCurrentChainTokens:Oc,useCurrentWallet:Le,useEnabledBioforestChainConfigs:Ko,useEnabledChains:na,useHasWallet:$c,useLanguage:Ys,useSelectedChain:Ct,useTheme:hr,useWalletInitialized:Wc,useWallets:Kt,walletActions:ye,walletSelectors:Ve,walletStore:we},Symbol.toStringTag,{value:"Module"}));function Dr(){return zn}function Gt(){return Qm}function zr(){return Vm}function Hc(){return Jm}const On={authorizeAddress:"/wallet/authorize/address",authorizeSignature:"/wallet/authorize/signature"};class Xp{constructor(s,n){this.adapter=s,this.eventId=n}hasResponded=!1;handleNetworkAddresses(s,n){const a=n.trim().toLowerCase();if(!a)return[];const r=[];for(const i of s)for(const c of i.chainAddresses)String(c.chain).toLowerCase()===a&&r.push({name:i.name,address:c.address,chainName:c.chain,publicKey:"",magic:`${i.id}:${c.chain}`,signMessage:""});return r}handleMainAddresses(s){return s.chainAddresses.map(n=>({name:s.name,address:n.address,chainName:n.chain,publicKey:"",magic:`${s.id}:${n.chain}`,signMessage:""}))}async handleMainAddressesSigned(s,n){const a=this.handleMainAddresses(s);return await this.applySensitiveOptions(a,[s],{password:n.password,signMessage:n.signMessage,getMain:!1})}handleAllAddresses(s){const n=[];for(const a of s)n.push(...this.handleMainAddresses(a));return n}async handleAllAddressesSigned(s,n){const a=this.handleAllAddresses(s);return await this.applySensitiveOptions(a,s,{password:n.password,signMessage:n.signMessage,getMain:!1})}async handleNetworkAddressesSigned(s,n,a){const r=this.handleNetworkAddresses(s,n);return await this.applySensitiveOptions(r,s,{password:a.password,signMessage:a.signMessage,getMain:!1})}async applySensitiveOptions(s,n,a){return await this.applyPasswordProtectedFields(s,n,a)}async approve(s){await this.respondOnce(On.authorizeAddress,s)}async reject(s){await this.respondOnce(On.authorizeAddress,null)}async respondOnce(s,n){if(!this.hasResponded){this.hasResponded=!0;try{await this.adapter.respondWith(this.eventId,s,n)}finally{await this.adapter.removeEventId(this.eventId)}}}async applyPasswordProtectedFields(s,n,a){const r=a.signMessage?.trim()??"",i=!!r,c=!!a.getMain;if(!i&&!c)return s;const o=new Map;for(const m of n)o.set(m.id,m);const u=new Map,d=new Set;for(const m of s){const h=this.getWalletIdFromMagic(m.magic),p=o.get(h),g=p?.encryptedMnemonic;if(!p||!g)throw new Error("Missing secret");const y=m.chainName.trim().toLowerCase();if(c){let f=u.get(h);if(!f){try{f=await cs(g,a.password)}catch{throw new Error("Invalid password")}u.set(h,f)}m.main=f}if(i){if(Tn(y)){let f=u.get(h);if(!f){try{f=await cs(g,a.password)}catch{throw new Error("Invalid password")}u.set(h,f)}const x=En(f),b=Pn(r,x.secretKey);m.signMessage=`0x${ze(b)}`,m.publicKey=ze(x.publicKey);continue}if(!d.has(h))if(u.has(h))d.add(h);else{if(!await zt(g,a.password))throw new Error("Invalid password");d.add(h)}m.signMessage=this.createDeterministicMockSignature({message:r,address:m.address,chainName:m.chainName})}}return s}getWalletIdFromMagic(s){const n=s.indexOf(":");return n===-1?s:s.slice(0,n)}createDeterministicMockSignature({message:s,address:n,chainName:a}){const r=new TextEncoder,i=Ae(r.encode(`address:${n}|chain:${a}|message:${s}`)),c=Ae(r.encode(`event:${this.eventId}`)),o=new Uint8Array(64);return o.set(i,0),o.set(c,32),`0x${ze(o)}`}}class Br{constructor(s,n){this.adapter=s,this.eventId=n}hasResponded=!1;async approve(s){await this.respondOnce(On.authorizeSignature,s)}async reject(s){await this.respondOnce(On.authorizeSignature,null)}async handleMessageSign(s,n,a){const r=s.chainName.trim().toLowerCase();if(Tn(r)){let c;try{c=await cs(n,a)}catch{throw new Error("Invalid password")}const o=En(c),u=Pn(s.message,o.secretKey);return{signature:`0x${ze(u)}`,publicKey:ze(o.publicKey)}}if(!await zt(n,a))throw new Error("Invalid password");{const c=new TextEncoder,o=Ae(c.encode(`message:${s.message}`)),u=Ae(c.encode(`event:${this.eventId}`)),d=new Uint8Array(64);d.set(o,0),d.set(u,32);const m=Ae(c.encode(`pubkey:${s.senderAddress}`));return{signature:`0x${ze(d)}`,publicKey:ze(m)}}}async handleTransferSign(s,n,a){const r=s.chainName.trim().toLowerCase(),i=["transfer",r,s.senderAddress,s.receiveAddress,s.balance,s.fee??"",s.contractInfo?.assetType??s.assetType??"",s.contractInfo?.contractAddress??"",s.contractInfo?.decimals?.toString()??""].join("|");if(Tn(r)){let h;try{h=await cs(n,a)}catch{throw new Error("Invalid password")}const p=En(h),g=Pn(i,p.secretKey);return`0x${ze(g)}`}if(!await zt(n,a))throw new Error("Invalid password");const o=new TextEncoder,u=Ae(o.encode(i)),d=Ae(o.encode(`event:${this.eventId}`)),m=new Uint8Array(64);return m.set(u,0),m.set(d,32),`0x${ze(m)}`}async handleDestroySign(s,n,a){const r=s.chainName.trim().toLowerCase(),i=["destory",r,s.senderAddress,s.destoryAddress,s.destoryAmount,s.fee??"",s.assetType??""].join("|");if(Tn(r)){let h;try{h=await cs(n,a)}catch{throw new Error("Invalid password")}const p=En(h),g=Pn(i,p.secretKey);return`0x${ze(g)}`}if(!await zt(n,a))throw new Error("Invalid password");const o=new TextEncoder,u=Ae(o.encode(i)),d=Ae(o.encode(`event:${this.eventId}`)),m=new Uint8Array(64);return m.set(u,0),m.set(d,32),`0x${ze(m)}`}async respondOnce(s,n){if(!this.hasResponded){this.hasResponded=!0;try{await this.adapter.respondWith(this.eventId,s,n)}finally{await this.adapter.removeEventId(this.eventId)}}}}class Zp{async getCallerAppInfo(s){throw new Error("DWEB runtime not available in web environment")}async respondWith(s,n,a){throw new Error("DWEB runtime not available in web environment")}async removeEventId(s){}isAvailable(){return!1}}const hs=new Zp;function ex(){return typeof window>"u"}function hn(){return!ex()}function tx(){const e={value:null};function s(){return e.value}function n(a){e.value=a}return[s,n]}var Na,Ti;function sx(){if(Ti)return Na;Ti=1;var e=typeof Element<"u",s=typeof Map=="function",n=typeof Set=="function",a=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function r(i,c){if(i===c)return!0;if(i&&c&&typeof i=="object"&&typeof c=="object"){if(i.constructor!==c.constructor)return!1;var o,u,d;if(Array.isArray(i)){if(o=i.length,o!=c.length)return!1;for(u=o;u--!==0;)if(!r(i[u],c[u]))return!1;return!0}var m;if(s&&i instanceof Map&&c instanceof Map){if(i.size!==c.size)return!1;for(m=i.entries();!(u=m.next()).done;)if(!c.has(u.value[0]))return!1;for(m=i.entries();!(u=m.next()).done;)if(!r(u.value[1],c.get(u.value[0])))return!1;return!0}if(n&&i instanceof Set&&c instanceof Set){if(i.size!==c.size)return!1;for(m=i.entries();!(u=m.next()).done;)if(!c.has(u.value[0]))return!1;return!0}if(a&&ArrayBuffer.isView(i)&&ArrayBuffer.isView(c)){if(o=i.length,o!=c.length)return!1;for(u=o;u--!==0;)if(i[u]!==c[u])return!1;return!0}if(i.constructor===RegExp)return i.source===c.source&&i.flags===c.flags;if(i.valueOf!==Object.prototype.valueOf&&typeof i.valueOf=="function"&&typeof c.valueOf=="function")return i.valueOf()===c.valueOf();if(i.toString!==Object.prototype.toString&&typeof i.toString=="function"&&typeof c.toString=="function")return i.toString()===c.toString();if(d=Object.keys(i),o=d.length,o!==Object.keys(c).length)return!1;for(u=o;u--!==0;)if(!Object.prototype.hasOwnProperty.call(c,d[u]))return!1;if(e&&i instanceof Element)return!1;for(u=o;u--!==0;)if(!((d[u]==="_owner"||d[u]==="__v"||d[u]==="__o")&&i.$$typeof)&&!r(i[d[u]],c[d[u]]))return!1;return!0}return i!==i&&c!==c}return Na=function(c,o){try{return r(c,o)}catch(u){if((u.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw u}},Na}var nx=sx();const Rs=Nm(nx);function qc(e){const s=l.useRef(e),n=s.current,a=Rs(n,e);return l.useEffect(()=>{a||(s.current=e)},[e]),a?n:e}var Lr=l.createContext(null),Uc=({children:e,value:s})=>t.jsx(Lr.Provider,{value:qc(s),children:e});Uc.displayName="ActivityProvider";var ax=()=>l.useContext(Lr);function rx(){return l.useContext(Lr).params}var Vc=l.createContext(null),Jc=({children:e,value:s})=>t.jsx(Vc.Provider,{value:qc(s),children:e});Jc.displayName="StackProvider";var ix=()=>l.useContext(Vc),ox=Object.defineProperty,cx=Object.defineProperties,lx=Object.getOwnPropertyDescriptors,Fn=Object.getOwnPropertySymbols,Kc=Object.prototype.hasOwnProperty,Gc=Object.prototype.propertyIsEnumerable,Ei=(e,s,n)=>s in e?ox(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,he=(e,s)=>{for(var n in s||(s={}))Kc.call(s,n)&&Ei(e,n,s[n]);if(Fn)for(var n of Fn(s))Gc.call(s,n)&&Ei(e,n,s[n]);return e},Ie=(e,s)=>cx(e,lx(s)),dx=(e,s)=>{var n={};for(var a in e)Kc.call(e,a)&&s.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&Fn)for(var a of Fn(e))s.indexOf(a)<0&&Gc.call(e,a)&&(n[a]=e[a]);return n};function ux(e,s,n){const a=n(e),r=n(s);return a<r?-1:a===r?0:1}var mx=(e,s)=>{const n=[],a=[];return e.forEach(r=>{s(r)?n.push(r):a.push(r)}),[n,a]};function Qc(e,s){return e.map((n,a)=>s(n)?a:void 0).filter(n=>typeof n=="number")}var wa=0,Pi=0,Yc=()=>{const e=new Date().getTime();return Pi===e?wa+=1:(Pi=e,wa=0),(e*1e3+wa)/1e3};function dt(){return(Yc()*1e3).toString(16)}function ua(e){return e.length===0?void 0:e[e.length-1]}function _i(e,s){const n=he({},e);return s.forEach(a=>{delete n[a]}),n}function fx(e){let s=!1;return()=>{s||(s=!0,e())}}function hx(e,s){const n=new Map;return[...e].reverse().filter(a=>{const r=s(a);if(r===null)return!0;const i=!!n.get(r);return n.set(r,!0),!i}).reverse()}function Ja(e){return!e.exitedBy}function Ka(e,s){return s.enteredBy.eventDate-e.enteredBy.eventDate}function Mi(e){return e.filter(Ja).sort(Ka)[0]}function px(e,s,n){const a=[];switch(s.name){case"Replaced":{if(ua(Qc(e,u=>u.id===s.activityId))!==void 0)break;const i=e.slice().sort(Ka).filter(Ja),c=n.now-s.eventDate>=n.transitionDuration;if((s.skipEnterActiveState||c?"enter-done":"enter-active")==="enter-done"){const u=i.findIndex(d=>!(s.skipEnterActiveState&&d.enteredBy.name==="Replaced"&&d.transitionState==="enter-active"));return i.slice(0,u+1).map(d=>e.indexOf(d))}break}case"Popped":{const r=e.filter(Ja).sort(Ka),i=r.slice(0,r.length-1)[0];i&&a.push(e.indexOf(i));break}case"StepPushed":case"StepReplaced":{const r=Mi(e);if(r){if(s.targetActivityId&&s.targetActivityId!==r.id)break;a.push(e.indexOf(r))}break}case"StepPopped":{const r=Mi(e);if(r&&r.steps.length>1){if(s.targetActivityId&&s.targetActivityId!==r.id)break;a.push(e.indexOf(r))}break}}return a}function Ri(e,s){switch(s.name){case"Pushed":case"Replaced":{const n=ua(Qc(e,a=>a.id===s.activityId));return n??e.length}default:return-1}}function Di(e,s){return{id:e.activityId,name:e.activityName,transitionState:s,params:e.activityParams,context:e.activityContext,steps:[{id:e.activityId,params:e.activityParams,enteredBy:e,zIndex:-1}],enteredBy:e,isTop:!1,isActive:!1,isRoot:!1,zIndex:-1}}function Or(e){return(s,n)=>{const a=e[n.name].bind(e);if(a)return a(s,n);throw new Error(`No reducer for event ${JSON.stringify(n)}`)}}function vt(e){return e}function xx({transitionDuration:e,now:s,resumedAt:n}){return Or({Pushed(a,r){const i=s-(n??r.eventDate)>=e,c=r.skipEnterActiveState||i?"enter-done":"enter-active",o=Ri(a,r);return[...a.slice(0,o),Di(r,c),...a.slice(o+1)]},Replaced(a,r){var i,c;const o=s-(n??r.eventDate)>=e,u=Ri(a,r),d=(c=(i=a[u])==null?void 0:i.transitionState)!=null?c:r.skipEnterActiveState||o?"enter-done":"enter-active";return[...a.slice(0,u),Di(r,d),...a.slice(u+1)]},Initialized:vt,ActivityRegistered:vt,Popped:vt,StepPushed:vt,StepReplaced:vt,StepPopped:vt,Paused:vt,Resumed:vt})}function As(e){return e}function gx(e){return Or({Replaced:(s,n)=>Ie(he({},s),{exitedBy:n,transitionState:"exit-done"}),Popped:(s,n)=>{var a;const r=e.now-((a=e.resumedAt)!=null?a:n.eventDate)>=e.transitionDuration,i=n.skipExitActiveState||r?"exit-done":"exit-active";return Ie(he({},s),{exitedBy:n,transitionState:i,params:i==="exit-done"?s.steps[0].params:s.params,steps:i==="exit-done"?[s.steps[0]]:s.steps})},StepPushed:(s,n)=>{var a;const r={id:n.stepId,params:n.stepParams,enteredBy:n,zIndex:s.zIndex,hasZIndex:(a=n.hasZIndex)!=null?a:!1};return Ie(he({},s),{params:n.stepParams,steps:[...s.steps,r]})},StepReplaced:(s,n)=>{var a;const r={id:n.stepId,params:n.stepParams,enteredBy:n,zIndex:s.zIndex,hasZIndex:(a=n.hasZIndex)!=null?a:!1};return Ie(he({},s),{params:n.stepParams,steps:[...s.steps.slice(0,s.steps.length-1),r]})},StepPopped:(s,n)=>{var a;s.steps.pop();const r=(a=ua(s.steps))==null?void 0:a.params;return Ie(he({},s),{params:r??s.params})},Initialized:As,ActivityRegistered:As,Pushed:As,Paused:As,Resumed:As})}function ct(e){return(s,n)=>s.globalTransitionState==="paused"?Ie(he({},s),{pausedEvents:s.pausedEvents?[...s.pausedEvents,n]:[n]}):e(s,n)}function Ke(e,s){return(n,a)=>{const r=xx({transitionDuration:n.transitionDuration,now:s.now,resumedAt:s.resumedAt}),i=gx({transitionDuration:n.transitionDuration,now:s.now,resumedAt:s.resumedAt}),c=r(n.activities,a),o=px(n.activities,a,{transitionDuration:n.transitionDuration,now:s.now});for(const m of o)c[m]=i(c[m],a);const u=c.find(m=>m.transitionState==="enter-active"||m.transitionState==="exit-active"),d=n.globalTransitionState==="paused"?"paused":u?"loading":"idle";return e(Ie(he({},n),{activities:c,globalTransitionState:d}),a)}}function ts(e,s){return Ie(he({},e),{events:[...e.events,s]})}function Xc(e){return Or({Initialized:ct(Ke((s,n)=>Ie(he({},s),{transitionDuration:n.transitionDuration,events:[...s.events,n]}),e)),ActivityRegistered:ct(Ke((s,n)=>Ie(he({},s),{registeredActivities:[...s.registeredActivities,he({name:n.activityName},n.activityParamsSchema?{paramsSchema:n.activityParamsSchema}:null)],events:[...s.events,n]}),e)),Paused:ct(Ke((s,n)=>Ie(he({},s),{globalTransitionState:"paused",events:[...s.events,n]}),e)),Resumed:Ke((s,n)=>{if(s.globalTransitionState!=="paused"||!s.pausedEvents)return Ie(he({},s),{events:[...s.events,n]});const a=Xc({now:e.now,resumedAt:n.eventDate}),r=s,{pausedEvents:i}=r,c=dx(r,["pausedEvents"]),o=i.reduce(a,Ie(he({},c),{globalTransitionState:"idle"}));return Ie(he({},o),{events:[...o.events,n]})},e),Pushed:ct(Ke(ts,e)),Replaced:ct(Ke(ts,e)),Popped:ct(Ke(ts,e)),StepPushed:ct(Ke(ts,e)),StepReplaced:ct(Ke(ts,e)),StepPopped:ct(Ke(ts,e))})}function Sa(e,s){return e.filter(n=>n.name===s)}function _n(e,s){return Ie(he({id:dt(),eventDate:Yc()},s),{name:e})}function vx(e){if(e.length===0)throw new Error("events parameter is empty");if(Sa(e,"Initialized").length>1)throw new Error("InitializedEvent can only exist once");const n=Sa(e,"ActivityRegistered"),a=new Set(n.map(i=>i.activityName));if(Sa(e,"Pushed").some(i=>!a.has(i.activityName)))throw new Error("the corresponding activity does not exist")}function Ca(e,s){const n=hx([...e].sort((m,h)=>m.eventDate-h.eventDate),m=>m.id);vx(n);const a=Xc({now:s}),r=n.reduce(a,{activities:[],globalTransitionState:"idle",registeredActivities:[],transitionDuration:0,events:[]}),i=r.activities.filter(m=>m.transitionState==="enter-active"||m.transitionState==="enter-done"||m.transitionState==="exit-active"),c=i.filter(m=>m.transitionState==="enter-active"||m.transitionState==="enter-done"),o=i[i.length-1],u=c[c.length-1];return Ie(he({},r),{activities:r.activities.map(m=>{let h=i.findIndex(({id:y})=>y===m.id);const p=i.slice(0,h);for(const y of p)for(const f of y.steps)f.hasZIndex&&(h+=1);const g=m.steps.reduce((y,f)=>{var x;const b=ua(y),v=(x=b?.zIndex)!=null?x:h;return[...y,Ie(he({},f),{zIndex:v+(f.hasZIndex?1:0)})]},[]);return he(he({id:m.id,name:m.name,transitionState:m.transitionState,params:m.params,steps:g,enteredBy:m.enteredBy,zIndex:h,isTop:o?.id===m.id,isActive:u?.id===m.id,isRoot:h===0||h===1&&m.transitionState==="enter-active"&&m.enteredBy.name==="Replaced"},m.exitedBy?{exitedBy:m.exitedBy}:null),m.context?{context:m.context}:null)}).sort((m,h)=>ux(m,h,p=>p.id))})}function bx(e,s){var n,a,r,i,c,o,u,d;const m=[];!Rs(e,s)&&m.push({_TAG:"%SOMETHING_CHANGED%"});const p=e.globalTransitionState!=="paused"&&s.globalTransitionState==="paused",g=e.globalTransitionState==="paused"&&s.globalTransitionState!=="paused";p&&m.push({_TAG:"PAUSED"}),g&&m.push({_TAG:"RESUMED"});for(let y=0;y<Math.max(e.activities.length,s.activities.length);y+=1){const f=e.activities[y],x=s.activities[y],b=f?.transitionState==="exit-done"||f?.transitionState==="exit-active",v=x?.transitionState==="enter-active"||x?.transitionState==="enter-done";if(f&&x&&f.id===x.id)for(let j=0;j<Math.max(((n=f.steps)!=null?n:[]).length,((a=x.steps)!=null?a:[]).length);j+=1){const N=f.steps[j],w=x.steps[j];!N&&w?m.push({_TAG:"STEP_PUSHED",activity:x,step:w}):N&&!w?m.push({_TAG:"STEP_POPPED",activity:x}):f.steps.length===x.steps.length&&N.id!==w.id&&m.push({_TAG:"STEP_REPLACED",activity:x,step:w})}!f&&x?m.push({_TAG:x.enteredBy.name==="Pushed"?"PUSHED":"REPLACED",activity:x}):b&&v?m.push({_TAG:x.enteredBy.name==="Pushed"?"PUSHED":"REPLACED",activity:x}):f&&x&&f.id===x.id&&!Rs(_i(f,["isActive","isTop","isRoot","transitionState","zIndex"]),_i(x,["isActive","isTop","isRoot","transitionState","zIndex"]))&&x.enteredBy.name==="Replaced"&&!Rs(f.enteredBy,x.enteredBy)&&m.push({_TAG:"REPLACED",activity:x})}for(let y=Math.max(e.activities.length,s.activities.length)-1;y>=0;y-=1){const f=((r=e.activities[y])==null?void 0:r.transitionState)==="enter-done"||((i=e.activities[y])==null?void 0:i.transitionState)==="enter-active",x=((c=s.activities[y])==null?void 0:c.transitionState)==="exit-active"||((o=s.activities[y])==null?void 0:o.transitionState)==="exit-done",b=((u=s.activities[y+1])==null?void 0:u.enteredBy.name)==="Replaced"&&((d=s.activities[y+1])==null?void 0:d.transitionState)==="enter-done";f&&x&&!b&&m.push({_TAG:"POPPED",activity:s.activities[y]})}return m}var yx={Pushed:"onBeforePush",Replaced:"onBeforeReplace",Popped:"onBeforePop",StepPushed:"onBeforeStepPush",StepReplaced:"onBeforeStepReplace",StepPopped:"onBeforeStepPop",Paused:"onBeforePause",Resumed:"onBeforeResume"};function bt(e,s,n,a){let r=!1,i=he({},s);for(const c of n){const o=c[yx[e]];o&&o({actionParams:he({},i),actions:Ie(he({},a),{preventDefault:()=>{r=!0},overrideActionParams:u=>{i=he(he({},i),u)}})})}return{isPrevented:r,nextActionParams:i}}function jx({dispatchEvent:e,pluginInstances:s,actions:n}){return{push(a){const{isPrevented:r,nextActionParams:i}=bt("Pushed",a,s,n);r||e("Pushed",i)},replace(a){const{isPrevented:r,nextActionParams:i}=bt("Replaced",a,s,n);r||e("Replaced",i)},pop(a={}){const{isPrevented:r,nextActionParams:i}=bt("Popped",a,s,n);r||e("Popped",i)},stepPush(a){const{isPrevented:r,nextActionParams:i}=bt("StepPushed",a,s,n);r||e("StepPushed",i)},stepReplace(a){const{isPrevented:r,nextActionParams:i}=bt("StepReplaced",a,s,n);r||e("StepReplaced",i)},stepPop(a={}){const{isPrevented:r,nextActionParams:i}=bt("StepPopped",a,s,n);r||e("StepPopped",i)},pause(a={}){const{isPrevented:r,nextActionParams:i}=bt("Paused",a,s,n);r||e("Paused",i)},resume(a={}){const{isPrevented:r,nextActionParams:i}=bt("Resumed",a,s,n);r||e("Resumed",i)}}}function Nx(e,s,n){e.forEach(a=>{s.forEach(r=>{var i,c,o,u,d,m,h,p,g;switch(a._TAG){case"PUSHED":(i=r.onPushed)==null||i.call(r,{actions:n,effect:a});break;case"REPLACED":(c=r.onReplaced)==null||c.call(r,{actions:n,effect:a});break;case"POPPED":(o=r.onPopped)==null||o.call(r,{actions:n,effect:a});break;case"STEP_PUSHED":(u=r.onStepPushed)==null||u.call(r,{actions:n,effect:a});break;case"STEP_REPLACED":(d=r.onStepReplaced)==null||d.call(r,{actions:n,effect:a});break;case"STEP_POPPED":(m=r.onStepPopped)==null||m.call(r,{actions:n,effect:a});break;case"PAUSED":(h=r.onPaused)==null||h.call(r,{actions:n,effect:a});break;case"RESUMED":(p=r.onResumed)==null||p.call(r,{actions:n,effect:a});break;case"%SOMETHING_CHANGED%":(g=r.onChanged)==null||g.call(r,{actions:n,effect:a});break}})})}var wx=1e3,Sx=wx/60;function zi(e){var s,n,a,r;const i=[],o=[{key:"@stackflow/core",onChanged(){i.forEach(x=>x())}},...e.plugins.map(x=>x())],[u,d]=mx(e.initialEvents,x=>x.name==="Pushed"||x.name==="StepPushed"),m=o.reduce((x,b)=>{var v,j,N;return(N=(j=b.overrideInitialEvents)==null?void 0:j.call(b,{initialEvents:x,initialContext:(v=e.initialContext)!=null?v:{}}))!=null?N:x},u);m.length>0&&u.length>0&&m!==u&&((n=(s=e.handlers)==null?void 0:s.onInitialActivityIgnored)==null||n.call(s,m)),m.length===0&&((r=(a=e.handlers)==null?void 0:a.onInitialActivityNotFound)==null||r.call(a));const p={value:[...d,...m]},g={value:Ca(p.value,new Date().getTime())},y={getStack(){return g.value},dispatchEvent(x,b){const v=_n(x,b),j=Ca([...p.value,v],new Date().getTime());p.value.push(v),f(j);const N=setInterval(()=>{const w=Ca(p.value,new Date().getTime());Rs(g.value,w)||f(w),w.globalTransitionState==="idle"&&clearInterval(N)},Sx)},push:()=>{},replace:()=>{},pop:()=>{},stepPush:()=>{},stepReplace:()=>{},stepPop:()=>{},pause:()=>{},resume:()=>{}},f=x=>{const b=bx(g.value,x);g.value=x,Nx(b,o,y)};return Object.assign(y,jx({dispatchEvent:y.dispatchEvent,pluginInstances:o,actions:y})),{actions:y,init:fx(()=>{o.forEach(x=>{var b;(b=x.onInit)==null||b.call(x,{actions:y})})}),pullEvents:()=>p.value,subscribe(x){return i.push(x),function(){const v=i.findIndex(j=>j===x);v>-1&&i.splice(v,1)}},pluginInstances:o}}var Zc=l.createContext(null);function Cx(){const e=l.useContext(Zc);if(e===null)throw new Error("useActivityComponentMap must be used within ActivityComponentMapProvider");return e}function kx({children:e,value:s}){return t.jsx(Zc.Provider,{value:s,children:e})}var $n=e=>s=>s.find(({id:n})=>n===e);function Ax(e){return!e.exitedBy}function Ix(e,s){return s.enteredBy.eventDate-e.enteredBy.eventDate}function Wn(e){return e.filter(Ax).sort(Ix)[0]}function Rt(){return dt()}function Hn(){return dt()}var Bi,Tx=(Bi=fr.useDeferredValue)!=null?Bi:e=>e,Li,Ex=(Li=fr.useSyncExternalStore)!=null?Li:(e,s)=>{const[n,a]=l.useState(()=>s());return l.useEffect(()=>e(()=>{a(()=>s())})),n},Oi,el=(Oi=fr.useTransition)!=null?Oi:()=>[!1,e=>e()],tl=l.createContext(null),sl=l.createContext(null),nl=({coreStore:e,children:s})=>{const n=Ex(e.subscribe,e.actions.getStack,e.actions.getStack),a=Tx(n);return t.jsx(sl.Provider,{value:a,children:t.jsx(tl.Provider,{value:e.actions,children:s})})};nl.displayName="CoreProvider";var al=()=>l.useContext(tl),rl=()=>l.useContext(sl),il=l.createContext(null),ol=({children:e,value:s})=>t.jsx(il.Provider,{value:s,children:e});ol.displayName="PluginsProvider";function cl(){return l.useContext(il)}function Px(e){return typeof e=="object"&&e!==null&&"then"in e&&typeof e.then=="function"}var Ee={PENDING:"pending",FULFILLED:"fulfilled",REJECTED:"rejected"};function Fr(e){if(e.status===Ee.PENDING)return{status:Ee.PENDING};if(e.status===Ee.FULFILLED&&"value"in e)return{status:Ee.FULFILLED,value:e.value};if(e.status===Ee.REJECTED&&"reason"in e)return{status:Ee.REJECTED,reason:e.reason};throw new Error("Invalid promise state")}function _x(e){if("status"in e&&Object.values(Ee).some(n=>n===e.status))return e;const s=Object.assign(e,{status:Ee.PENDING});return s.then(n=>{s.status=Ee.FULFILLED,s.value=n},n=>{s.status=Ee.REJECTED,s.reason=n}),s}function Mn(e){return Px(e)?_x(e instanceof Promise?e:Promise.resolve(e)):Object.assign(Promise.resolve(e),{status:Ee.FULFILLED,value:e})}function Mx(e){return Object.assign(Promise.reject(e),{status:Ee.REJECTED,reason:e})}function Rx(e){const s=Mn(e),n=Fr(s);if(n.status===Ee.FULFILLED)return n.value;throw n.status===Ee.REJECTED?n.reason:s}var Dx=Object.defineProperty,Fi=Object.getOwnPropertySymbols,zx=Object.prototype.hasOwnProperty,Bx=Object.prototype.propertyIsEnumerable,$i=(e,s,n)=>s in e?Dx(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,Lx=(e,s)=>{for(var n in s||(s={}))zx.call(s,n)&&$i(e,n,s[n]);if(Fi)for(var n of Fi(s))Bx.call(s,n)&&$i(e,n,s[n]);return e},Ox=(e,s,n)=>new Promise((a,r)=>{var i=u=>{try{o(n.next(u))}catch(d){r(d)}},c=u=>{try{o(n.throw(u))}catch(d){r(d)}},o=u=>u.done?a(u.value):Promise.resolve(u.value).then(i,c);o((n=n.apply(e,s)).next())});function Fx(e){let s=null;const n=()=>((!s||Fr(s).status===Ee.REJECTED)&&(s=e()),s);return{Component:r=>{const{default:i}=Rx(n());return t.jsx(i,Lx({},r))},preload:()=>Ox(this,null,function*(){yield n()})}}var $x=Symbol("STRUCTURED_ACTIVITY_COMPONENT_TYPE");function Wx(e){return e!==null&&typeof e=="object"&&$x in e}var ka=new WeakMap;function Hx(e){if(ka.has(e))return ka.get(e);const{Component:s}=Fx(()=>{const n=e.content,a=Mn(typeof n=="function"?n():{default:n}),r=Fr(a);return r.status===Ee.FULFILLED?Mn({default:r.value.default.component}):r.status===Ee.REJECTED?Mx(r.reason):Mn(a.then(i=>({default:i.default.component})))});return ka.set(e,s),s}var qx=Object.defineProperty,Ux=Object.defineProperties,Vx=Object.getOwnPropertyDescriptors,Wi=Object.getOwnPropertySymbols,Jx=Object.prototype.hasOwnProperty,Kx=Object.prototype.propertyIsEnumerable,Ga=(e,s,n)=>s in e?qx(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,It=(e,s)=>{for(var n in s||(s={}))Jx.call(s,n)&&Ga(e,n,s[n]);if(Wi)for(var n of Wi(s))Kx.call(s,n)&&Ga(e,n,s[n]);return e},Aa=(e,s)=>Ux(e,Vx(s)),Hi=(e,s,n)=>Ga(e,typeof s!="symbol"?s+"":s,n),ll=({plugin:e,initialContext:s})=>{const n=Cx(),a=rl(),r=cl();return e.render({stack:Aa(It({},a),{render(i){return{activities:It(It({},a),i).activities.map(o=>Aa(It({},o),{key:o.id,render(u){const d=n[o.name];let m=Wx(d)?Qx(d,o.params):t.jsx(d,{params:o.params});return r.forEach(h=>{var p,g;m=(g=(p=h.wrapActivity)==null?void 0:p.call(h,{activity:Aa(It({},o),{render:()=>m}),initialContext:s}))!=null?g:m}),t.jsx(Uc,{value:It(It({},o),u),children:m},o.id)}}))}}}),initialContext:s})};ll.displayName="PluginRenderer";var Gx=ll;function Qx(e,s){const{layout:n,loading:a,errorHandler:r}=e,i=Hx(e);return[o=>a?.component?t.jsx(l.Suspense,{fallback:t.jsx(a.component,{params:s}),children:o}):o,o=>{var u;if(!r)return o;const d=(u=r.boundary)!=null?u:Yx;return t.jsx(d,{renderFallback:(m,h)=>t.jsx(r.component,{params:s,error:m,reset:h}),children:o})},o=>n?.component?t.jsx(n.component,{params:s,children:o}):o].reduce((o,u)=>u(o),t.jsx(i,{params:s}))}var Yx=class extends l.Component{constructor(){super(...arguments),Hi(this,"state",{hasError:!1,error:null}),Hi(this,"reset",()=>this.setState({hasError:!1,error:null}))}render(){return this.state.hasError?this.props.renderFallback(this.state.error,this.reset):this.props.children}static getDerivedStateFromError(e){return{hasError:!0,error:e}}},Xx=Object.defineProperty,Zx=Object.defineProperties,eg=Object.getOwnPropertyDescriptors,qi=Object.getOwnPropertySymbols,tg=Object.prototype.hasOwnProperty,sg=Object.prototype.propertyIsEnumerable,Ui=(e,s,n)=>s in e?Xx(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,ng=(e,s)=>{for(var n in s||(s={}))tg.call(s,n)&&Ui(e,n,s[n]);if(qi)for(var n of qi(s))sg.call(s,n)&&Ui(e,n,s[n]);return e},ag=(e,s)=>Zx(e,eg(s)),dl=({initialContext:e})=>{const s=rl(),n=cl(),a=n.filter(i=>!!i.render);l.useEffect(()=>{a.length===0&&console.warn(`Stackflow - There is no rendering plugin, so "<Stack />" doesn't render anything. If you want to render some UI, use "@stackflow/plugin-renderer-basic" or add another rendering plugin.`)},[a]);let r=t.jsx(t.Fragment,{children:a.map(i=>t.jsx(Gx,{plugin:i,initialContext:e},i.key))});return n.forEach(i=>{var c,o;r=(o=(c=i.wrapStack)==null?void 0:c.call(i,{stack:ag(ng({},s),{render(){return r}}),initialContext:e}))!=null?o:r}),t.jsx(Jc,{value:s,children:r})};dl.displayName="MainRenderer";var rg=dl,ig=Object.defineProperty,Vi=Object.getOwnPropertySymbols,og=Object.prototype.hasOwnProperty,cg=Object.prototype.propertyIsEnumerable,Ji=(e,s,n)=>s in e?ig(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,Ki=(e,s)=>{for(var n in s||(s={}))og.call(s,n)&&Ji(e,n,s[n]);if(Vi)for(var n of Vi(s))cg.call(s,n)&&Ji(e,n,s[n]);return e};function Ia(e){return e?e.animate==null?{skipActiveState:!1}:{skipActiveState:!e.animate}:{skipActiveState:!1}}function an(){const e=al(),[s]=el();return l.useMemo(()=>({pending:s,push(n,a,r){const i=Rt();return e?.push({activityId:i,activityName:n,activityParams:a,skipEnterActiveState:Ia(r).skipActiveState}),{activityId:i}},replace(n,a,r){var i;const c=Rt();return e?.replace({activityId:(i=r?.activityId)!=null?i:Rt(),activityName:n,activityParams:a,skipEnterActiveState:Ia(r).skipActiveState}),{activityId:c}},pop(n,a){let r=1,i={};typeof n=="object"&&(i=Ki({},n)),typeof n=="number"&&(r=n),a&&(i=Ki({},a));for(let c=0;c<r;c+=1)e?.pop({skipExitActiveState:c===0?Ia(i).skipActiveState:!0})}}),[e?.push,e?.replace,e?.pop,s])}var lg=()=>{const e=al(),[s]=el();return l.useMemo(()=>({pending:s,stepPush(n,a){const r=e?.getStack().activities,i=a?.targetActivityId?$n(a.targetActivityId):Wn,c=r&&i(r);if(!c)throw new Error("The target activity is not found.");const o=typeof n=="function"?n(c.params):n,u=Hn();e?.stepPush({stepId:u,stepParams:o,targetActivityId:a?.targetActivityId})},stepReplace(n,a){const r=e?.getStack().activities,i=a?.targetActivityId?$n(a.targetActivityId):Wn,c=r&&i(r);if(!c)throw new Error("The target activity is not found.");const o=typeof n=="function"?n(c.params):n,u=Hn();e?.stepReplace({stepId:u,stepParams:o,targetActivityId:a?.targetActivityId})},stepPop(n){e?.stepPop({targetActivityId:n?.targetActivityId})}}),[e?.stepPush,e?.stepReplace,e?.stepPop,e?.getStack,s])},dg=Object.defineProperty,ug=Object.defineProperties,mg=Object.getOwnPropertyDescriptors,Gi=Object.getOwnPropertySymbols,fg=Object.prototype.hasOwnProperty,hg=Object.prototype.propertyIsEnumerable,Qi=(e,s,n)=>s in e?dg(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,pn=(e,s)=>{for(var n in s||(s={}))fg.call(s,n)&&Qi(e,n,s[n]);if(Gi)for(var n of Gi(s))hg.call(s,n)&&Qi(e,n,s[n]);return e},pg=(e,s)=>ug(e,mg(s));function Ta(e){return e?e.animate==null?{skipActiveState:!1}:{skipActiveState:!e.animate}:{skipActiveState:!1}}function xg(e){var s;const n=((s=e.plugins)!=null?s:[]).flat(Number.POSITIVE_INFINITY).map(d=>d),a=Object.entries(e.activities).reduce((d,[m,h])=>pg(pn({},d),{[m]:"component"in h?h.component:h}),{}),r=()=>new Date().getTime()-e.transitionDuration*2,i=zi({initialEvents:[_n("Initialized",{transitionDuration:e.transitionDuration,eventDate:r()}),...Object.entries(e.activities).map(([d,m])=>_n("ActivityRegistered",pn({activityName:d,eventDate:r()},"component"in m?{activityParamsSchema:m.paramsSchema}:null)))],plugins:[]}),[c,o]=tx(),u=l.memo(d=>{const m=l.useMemo(()=>{const h=c();if(hn()&&h)return h;const p=e.initialActivity?[_n("Pushed",{activityId:Rt(),activityName:e.initialActivity(),activityParams:{},eventDate:r(),skipEnterActiveState:!1})]:[],g=zi({initialEvents:[...i.pullEvents(),...p],initialContext:d.initialContext,plugins:n,handlers:{onInitialActivityIgnored:y=>{hn()&&console.warn(`Stackflow - Some plugin overrides an "initialActivity" option. The "initialActivity" option you set to "${y[0].activityName}" in the "stackflow" is ignored.`)},onInitialActivityNotFound:()=>{hn()&&console.warn("Stackflow - There is no initial activity. If you want to set the initial activity, add the `initialActivity` option of the `stackflow()` function or add a plugin that sets the initial activity. (e.g. `@stackflow/plugin-history-sync`)")}}});return hn()&&(g.init(),o(g)),g},[]);return t.jsx(ol,{value:m.pluginInstances,children:t.jsx(nl,{coreStore:m,children:t.jsx(kx,{value:a,children:t.jsx(rg,{initialContext:d.initialContext})})})})});return u.displayName="Stack",{activities:e.activities,Stack:u,useFlow:an,useStepFlow:lg,addActivity(d){if(c()){console.warn("Stackflow - `addActivity()` API cannot be called after a `<Stack />` component has been rendered");return}a[d.name]=l.memo(d.component),i.actions.dispatchEvent("ActivityRegistered",{activityName:d.name,activityParamsSchema:d.paramsSchema,eventDate:r()})},addPlugin(d){if(c()){console.warn("Stackflow - `addPlugin()` API cannot be called after a `<Stack />` component has been rendered");return}[d].flat(Number.POSITIVE_INFINITY).map(m=>m).forEach(m=>{n.push(m)})},actions:{getStack(){var d,m;return(m=(d=c())==null?void 0:d.actions.getStack())!=null?m:i.actions.getStack()},dispatchEvent(d,m){var h;return(h=c())==null?void 0:h.actions.dispatchEvent(d,m)},push(d,m,h){var p;const g=Rt();return(p=c())==null||p.actions.push({activityId:g,activityName:d,activityParams:m,skipEnterActiveState:Ta(h).skipActiveState}),{activityId:g}},replace(d,m,h){var p,g,y;const f=(p=h?.activityId)!=null?p:Rt();return(y=c())==null||y.actions.replace({activityId:(g=h?.activityId)!=null?g:Rt(),activityName:d,activityParams:m,skipEnterActiveState:Ta(h).skipActiveState}),{activityId:f}},pop(d,m){var h;let p=1,g={};typeof d=="object"&&(g=pn({},d)),typeof d=="number"&&(p=d),m&&(g=pn({},m));for(let y=0;y<p;y+=1)(h=c())==null||h.actions.pop({skipExitActiveState:y===0?Ta(g).skipActiveState:!0})},stepPush(d,m){var h,p;const g=(h=c())==null?void 0:h.actions.getStack().activities,y=m?.targetActivityId?$n(m.targetActivityId):Wn,f=g&&y(g);if(!f)throw new Error("The target activity is not found.");const x=typeof d=="function"?d(f.params):d,b=Hn();return(p=c())==null?void 0:p.actions.stepPush({stepId:b,stepParams:x,targetActivityId:m?.targetActivityId})},stepReplace(d,m){var h,p;const g=(h=c())==null?void 0:h.actions.getStack().activities,y=m?.targetActivityId?$n(m.targetActivityId):Wn,f=g&&y(g);if(!f)throw new Error("The target activity is not found.");const x=typeof d=="function"?d(f.params):d,b=Hn();return(p=c())==null?void 0:p.actions.stepReplace({stepId:b,stepParams:x,targetActivityId:m?.targetActivityId})},stepPop(d){var m;return(m=c())==null?void 0:m.actions.stepPop({targetActivityId:d?.targetActivityId})}}}}function gg(){return()=>({key:"plugin-renderer-basic",render({stack:e}){return t.jsx(t.Fragment,{children:e.render().activities.filter(s=>s.transitionState!=="exit-done").map(s=>t.jsx(l.Fragment,{children:s.render()},s.key))})}})}function vg(e){var s=e.match(/^var\((.*)\)$/);return s?s[1]:e}function rn(e,s){var n={};{var a=e;for(var r in a){var i=a[r];i!=null&&(n[vg(r)]=i)}}return Object.defineProperty(n,"toString",{value:function(){return Object.keys(this).map(o=>"".concat(o,":").concat(this[o])).join(";")},writable:!1}),n}function bg(e,s){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,s);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function yg(e){var s=bg(e,"string");return typeof s=="symbol"?s:String(s)}function jg(e,s,n){return s=yg(s),s in e?Object.defineProperty(e,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[s]=n,e}function Yi(e,s){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);s&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,a)}return n}function Xi(e){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?Yi(Object(n),!0).forEach(function(a){jg(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yi(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Zi(e,s){var n={};for(var a in e)n[a]=s(e[a],a);return n}var Ng=(e,s,n)=>{for(var a of Object.keys(e)){var r;if(e[a]!==((r=s[a])!==null&&r!==void 0?r:n[a]))return!1}return!0},kt=e=>{var s=n=>{var a=e.defaultClassName,r=Xi(Xi({},e.defaultVariants),n);for(var i in r){var c,o=(c=r[i])!==null&&c!==void 0?c:e.defaultVariants[i];if(o!=null){var u=o;typeof u=="boolean"&&(u=u===!0?"true":"false");var d=e.variantClassNames[i][u];d&&(a+=" "+d)}}for(var[m,h]of e.compoundVariants)Ng(m,r,e.defaultVariants)&&(a+=" "+h);return a};return s.variants=()=>Object.keys(e.variantClassNames),s.classNames={get base(){return e.defaultClassName.split(" ")[0]},get variants(){return Zi(e.variantClassNames,n=>Zi(n,a=>a.split(" ")[0]))}},s},wg=Object.defineProperty,eo=Object.getOwnPropertySymbols,Sg=Object.prototype.hasOwnProperty,Cg=Object.prototype.propertyIsEnumerable,to=(e,s,n)=>s in e?wg(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,kg=(e,s)=>{for(var n in s||(s={}))Sg.call(s,n)&&to(e,n,s[n]);if(eo)for(var n of eo(s))Cg.call(s,n)&&to(e,n,s[n]);return e};function $r(){const[e,s]=l.useReducer(()=>!0,!1);return l.useEffect(()=>{s()},[]),e}function Qt(){return ax()}function ul(){const e=Qt(),s=$r();return kg({},s?{"data-stackflow-activity-id":e?.id,"data-stackflow-activity-is-active":e?.isActive,"data-stackflow-activity-transition-state":e?.transitionState}:null)}function ml(e,s,n){const a=()=>{s.forEach(r=>{e.removeEventListener(r,a)}),n()};s.forEach(r=>{e.addEventListener(r,a)})}var Ag=e=>(e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}),Ze=()=>{};function Qa(e){requestAnimationFrame(()=>{requestAnimationFrame(()=>{e()})})}function Ig({outerRef:e,innerRef:s,enable:n}){const[a,r]=l.useState(void 0);return l.useEffect(()=>{const i=e&&"current"in e&&e.current,c=s.current;return!n||!i||!c?Ze:Ag(()=>{const u=i.clientWidth,d=c.offsetLeft,m=c.clientWidth,h=u-d-m,p=Math.max(d,h);r(u-2*p)})}),{maxWidth:a}}function Wr(e){const[s,n]=l.useState(void 0);return l.useEffect(()=>{Qa(()=>{n(e)})},[e]),s}function Tg(){return ix()}function Hr({ref:e}){const s=Tg();l.useEffect(()=>{if(!s)return;const n=e.current;if(!n||s.globalTransitionState==="idle")return;const a=r=>{r.preventDefault(),r.stopPropagation()};return n.addEventListener("touchstart",a,{capture:!0}),n.addEventListener("touchmove",a,{capture:!0}),n.addEventListener("touchend",a,{capture:!0}),n.addEventListener("touchcancel",a,{capture:!0}),()=>{n.removeEventListener("touchstart",a,{capture:!0}),n.removeEventListener("touchmove",a,{capture:!0}),n.removeEventListener("touchend",a,{capture:!0}),n.removeEventListener("touchcancel",a,{capture:!0})}},[s?.globalTransitionState])}var Is={};function ft({styleName:e,refs:s,effect:n,effectDeps:a}){const r=Qt();l.useEffect(()=>r?(Is[e]||(Is[e]=new Map),Is[e].set(r.zIndex,{refs:s,hasEffect:!!n}),()=>{Is[e].delete(r.zIndex)}):Ze,[r?.id,s,n]),l.useEffect(()=>{if(!r||!n)return Ze;const i=(()=>{let o=[];for(let u=1;u<=r.zIndex;u+=1){const d=Is[e].get(r.zIndex-u);if(d?.refs&&(o=[...o,...d.refs]),d?.hasEffect)break}return o})(),c=n({activityTransitionState:r.transitionState,refs:i});return()=>{c?.()}},[r?.transitionState,...a??[]])}function Eg({refs:e}){ft({styleName:"hide",refs:e,effect:({activityTransitionState:s,refs:n})=>{const a=()=>{n.forEach(r=>{if(!r.current)return;const i=r.current;i.style.display=""})};return s==="enter-done"?(n.forEach(r=>{if(!r.current)return;const i=r.current;i.style.display="none"}),()=>{a()}):(a(),Ze)}})}function Pg({refs:e,transitionDuration:s,offsetStyles:n,hasEffect:a=!1}){ft({styleName:"offset",refs:e,effect:a?({activityTransitionState:r,refs:i})=>{const c=()=>{Qa(()=>{i.forEach(o=>{if(!o.current)return;const u=o.current;u.style.transform="",u.style.opacity="",ml(u,["transitionend","transitioncancel"],()=>{u.style.transition=""})})})};switch(r){case"enter-active":case"enter-done":return i.forEach(o=>{o.current&&(o.current.style.transition=s,o.current.style.transform=n.transform,o.current.style.opacity=n.opacity)}),r==="enter-done"?()=>{c()}:Ze;case"exit-active":case"exit-done":return Qa(()=>{c()}),Ze;default:return Ze}}:void 0})}var xn="--stackflow-swipe-back-ratio";function _g({dimRef:e,edgeRef:s,paperRef:n,appBarRef:a,offset:r,transitionDuration:i,preventSwipeBack:c,moveAppBarTogether:o,getActivityTransitionState:u,onSwipeStart:d,onSwipeMove:m,onSwipeEnd:h,onTransitionEnd:p}){ft({styleName:"swipe-back",refs:o&&a?[n,a]:[n],effect:({refs:g})=>{if(c||!e.current||!s.current||!n.current)return Ze;const y=e.current,f=s.current,x=n.current,b=a?.current;let v=null,j=null,N=null,w=[];const M=()=>{v=null,j=null,N=null,w=[]};let S=!1;function k({dx:A,ratio:T}){S||(S=!0,requestAnimationFrame(()=>{y.style.opacity=`${1-T}`,y.style.transition="0s",x.style.overflowY="hidden",x.style.transform=`translate3d(${A}px, 0, 0)`,x.style.transition="0s",o&&b&&(b.style.overflowY="hidden",b.style.transform=`translate3d(${A}px, 0, 0)`,b.style.transition="0s"),b?.style.setProperty(xn,String(T)),g.forEach(C=>{var B,_;C.current&&(C.current.style.transform=`translate3d(${-1*(1-T)*r}px, 0, 0)`,C.current.style.transition="0s",((B=C.current.parentElement)==null?void 0:B.style.display)==="none"&&(C.current.parentElement.style.display="block"),(_=C.current.parentElement)==null||_.style.setProperty(xn,String(T)))}),S=!1}))}function I({swiped:A}){return new Promise(T=>{requestAnimationFrame(()=>{y.style.opacity=`${A?0:1}`,y.style.transition=i,x.style.overflowY="hidden",x.style.transform=`translateX(${A?"100%":"0"})`,x.style.transition=i,o&&b&&(b.style.overflowY="hidden",b.style.transform=`translateX(${A?"100%":"0"})`,b.style.transition=i),g.forEach(B=>{B.current&&(B.current.style.transition=i,B.current.style.transform=`translate3d(${A?"0":`-${r/16}rem`}, 0, 0)`)});const C=[...w];T(),ml(x,["transitionend","transitioncancel"],()=>{const B=A||u()==="exit-active"||u()==="exit-done";y.style.opacity="",x.style.overflowY="",x.style.transform="",o&&b&&(b.style.overflowY="",b.style.transform="",b.style.removeProperty("transition")),b?.style.removeProperty(xn),g.forEach((_,R)=>{var L;if(!_.current)return;const W=C[R];B?(_.current.style.transition="",_.current.style.transform="",_.current.parentElement&&(_.current.parentElement.style.display="")):W&&(_.current.style.transition=W.style.transition,_.current.style.transform=W.style.transform,_.current.parentElement&&W.parentElement&&(_.current.parentElement.style.display=W.parentElement.style.display)),(L=_.current.parentElement)==null||L.style.removeProperty(xn)}),p?.({swiped:A})})})})}const E=A=>{var T;const{activeElement:C}=document;(T=C?.blur)==null||T.call(C),v=N=A.touches[0].clientX,j=Date.now(),w=g.map(B=>B.current?{style:{transform:B.current.style.transform,transition:B.current.style.transition},parentElement:B.current.parentElement?{style:{display:B.current.parentElement.style.display}}:void 0}:{style:{transform:"",transition:""}}),d?.()},D=A=>{if(!v){M();return}N=A.touches[0].clientX;const T=N-v,C=T/x.clientWidth;k({dx:T,ratio:C}),m?.({dx:T,ratio:C})},P=()=>{if(!v||!j||!N){M();return}const A=Date.now(),C=(N-v)/(A-j)>1||N/x.clientWidth>.4;h?.({swiped:C}),Promise.resolve().then(()=>I({swiped:C})).then(()=>M())};return f.addEventListener("touchstart",E,{passive:!0}),f.addEventListener("touchmove",D,{passive:!0}),f.addEventListener("touchend",P,{passive:!0}),f.addEventListener("touchcancel",P,{passive:!0}),()=>{f.removeEventListener("touchstart",E),f.removeEventListener("touchmove",D),f.removeEventListener("touchend",P),f.removeEventListener("touchcancel",P)}},effectDeps:[c]})}function Hs(){var e;const s=Qt();return((e=s?.zIndex)!=null?e:0)*5}var Mg=Object.defineProperty,Rg=Object.defineProperties,Dg=Object.getOwnPropertyDescriptors,so=Object.getOwnPropertySymbols,zg=Object.prototype.hasOwnProperty,Bg=Object.prototype.propertyIsEnumerable,no=(e,s,n)=>s in e?Mg(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,Pt=(e,s)=>{for(var n in s||(s={}))zg.call(s,n)&&no(e,n,s[n]);if(so)for(var n of so(s))Bg.call(s,n)&&no(e,n,s[n]);return e},Ds=(e,s)=>Rg(e,Dg(s)),Lg=e=>t.jsx("svg",{className:e.className,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.7241 2.76052C17.105 3.16043 17.0896 3.79341 16.6897 4.17431L8.45 12.0222L16.6896 19.8689C17.0896 20.2498 17.105 20.8827 16.7242 21.2827C16.3433 21.6826 15.7103 21.6981 15.3104 21.3172L6.31037 12.7464C6.11218 12.5576 6.00001 12.2959 6 12.0222C5.99999 11.7486 6.11215 11.4868 6.31032 11.2981L15.3103 2.72608C15.7102 2.34518 16.3432 2.3606 16.7241 2.76052Z",fill:"currentColor"})}),ao=Lg,Og=e=>t.jsx("svg",{className:e.className,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M20.7071 4.70711C21.0976 4.31658 21.0976 3.68342 20.7071 3.29289C20.3166 2.90237 19.6834 2.90237 19.2929 3.29289L12 10.5858L4.70711 3.29289C4.31658 2.90237 3.68342 2.90237 3.29289 3.29289C2.90237 3.68342 2.90237 4.31658 3.29289 4.70711L10.5858 12L3.29289 19.2929C2.90237 19.6834 2.90237 20.3166 3.29289 20.7071C3.68342 21.0976 4.31658 21.0976 4.70711 20.7071L12 13.4142L19.2929 20.7071C19.6834 21.0976 20.3166 21.0976 20.7071 20.7071C21.0976 20.3166 21.0976 19.6834 20.7071 19.2929L13.4142 12L20.7071 4.70711Z",fill:"currentColor"})}),ro=Og,$={backgroundColor:"var(--stackflow-plugin-basic-ui-background-color)",backgroundImage:"var(--stackflow-plugin-basic-ui-background-image)",dimBackgroundColor:"var(--stackflow-plugin-basic-ui-dim-background-color)",dimHeight:"var(--stackflow-plugin-basic-ui-dim-height)",transitionDuration:"var(--stackflow-plugin-basic-ui-transition-duration)",computedTransitionDuration:"var(--stackflow-plugin-basic-ui-computed-transition-duration)",defaultTransitionOffSet:"var(--stackflow-plugin-basic-ui-default-transition-off-set)",appBar:{borderColor:"var(--stackflow-plugin-basic-ui-app-bar-border-color)",borderColorTransitionDuration:"var(--stackflow-plugin-basic-ui-app-bar-border-color-transition-duration)",borderSize:"var(--stackflow-plugin-basic-ui-app-bar-border-size)",height:"var(--stackflow-plugin-basic-ui-app-bar-height)",heightTransitionDuration:"var(--stackflow-plugin-basic-ui-app-bar-height-transition-duration)",minHeight:"var(--stackflow-plugin-basic-ui-app-bar-min-height)",iconColor:"var(--stackflow-plugin-basic-ui-app-bar-icon-color)",iconColorTransitionDuration:"var(--stackflow-plugin-basic-ui-app-bar-icon-color-transition-duration)",textColor:"var(--stackflow-plugin-basic-ui-app-bar-text-color)",textColorTransitionDuration:"var(--stackflow-plugin-basic-ui-app-bar-text-color-transition-duration)",backgroundColor:"var(--stackflow-plugin-basic-ui-app-bar-background-color)",backgroundColorTransitionDuration:"var(--stackflow-plugin-basic-ui-app-bar-background-color-transition-duration)",backgroundImage:"var(--stackflow-plugin-basic-ui-app-bar-background-image)",backgroundImageTransitionDuration:"var(--stackflow-plugin-basic-ui-app-bar-background-image-transition-duration)",overflow:"var(--stackflow-plugin-basic-ui-app-bar-overflow)",minSafeAreaInsetTop:"var(--stackflow-plugin-basic-ui-app-bar-min-safe-area-inset-top)",containerPadding:"var(--stackflow-plugin-basic-ui-app-bar-container-padding)",itemGap:"var(--stackflow-plugin-basic-ui-app-bar-item-gap)",fontSize:"var(--stackflow-plugin-basic-ui-app-bar-font-size)",lineHeight:"var(--stackflow-plugin-basic-ui-app-bar-line-height)",hitSlop:"var(--stackflow-plugin-basic-ui-app-bar-hit-slop)"},bottomSheet:{borderRadius:"var(--stackflow-plugin-basic-ui-bottom-sheet-border-radius)"},modal:{borderRadius:"var(--stackflow-plugin-basic-ui-modal-border-radius)",maxWidth:"var(--stackflow-plugin-basic-ui-modal-max-width)"},edge:{width:"var(--stackflow-plugin-basic-ui-edge-width)"}},Fg=kt({defaultClassName:"_1q6dj2j2",variantClassNames:{theme:{android:"_1q6dj2j0",cupertino:"_1q6dj2j1"}},defaultVariants:{},compoundVariants:[]});function $g(e){return e.filter(s=>s!=null)}function on(e){return Object.entries(e).reduce((s,[n,a])=>(a!=null&&(s[n]=a),s),{})}var fl=l.createContext({theme:"android"}),Wg=fl.Provider;function hl(){return l.useContext(fl)}var Hg=e=>()=>({key:"basic-ui",wrapStack({stack:s,initialContext:n}){var a,r,i,c,o,u,d,m,h,p,g,y,f,x,b,v,j;const N=typeof e=="function"?e({initialContext:n}):e;return t.jsx(Wg,{value:Ds(Pt({},N),{theme:(a=n?.theme)!=null?a:N.theme}),children:t.jsx("div",{className:$g([Fg({theme:(r=n?.theme)!=null?r:N.theme}),N.rootClassName]).join(" "),style:rn(on({[$.backgroundColor]:N.backgroundColor,[$.backgroundImage]:N.backgroundImage,[$.dimBackgroundColor]:N.dimBackgroundColor,[$.dimHeight]:N.dimHeight,[$.transitionDuration]:`${s.transitionDuration}ms`,[$.computedTransitionDuration]:s.globalTransitionState==="loading"?`${s.transitionDuration}ms`:"0ms",[$.defaultTransitionOffSet]:N.defaultTransitionOffSet,[$.appBar.borderColor]:(i=N.appBar)==null?void 0:i.borderColor,[$.appBar.borderSize]:(c=N.appBar)==null?void 0:c.borderSize,[$.appBar.height]:(o=N.appBar)==null?void 0:o.height,[$.appBar.minHeight]:(u=N.appBar)==null?void 0:u.minHeight,[$.appBar.iconColor]:(d=N.appBar)==null?void 0:d.iconColor,[$.appBar.textColor]:(m=N.appBar)==null?void 0:m.textColor,[$.appBar.minSafeAreaInsetTop]:(h=N.appBar)==null?void 0:h.minSafeAreaInsetTop,[$.bottomSheet.borderRadius]:(p=N.bottomSheet)==null?void 0:p.borderRadius,[$.modal.borderRadius]:(g=N.modal)==null?void 0:g.borderRadius,[$.appBar.containerPadding]:(y=N.appBar)==null?void 0:y.containerPadding,[$.appBar.fontSize]:(f=N.appBar)==null?void 0:f.fontSize,[$.appBar.lineHeight]:(x=N.appBar)==null?void 0:x.lineHeight,[$.appBar.hitSlop]:(b=N.appBar)==null?void 0:b.hitSlop,[$.appBar.itemGap]:(v=N.appBar)==null?void 0:v.itemGap,[$.edge.width]:(j=N.edge)==null?void 0:j.width})),children:s.render()})})}}),qg=kt({defaultClassName:"_1yk3a452 dhthxq4 dhthxq0 dhthxqh _1yk3a451",variantClassNames:{activityEnterStyle:{slideInLeft:"_1yk3a453"},enterStyle:{cover:"_1yk3a454"},border:{true:"_1yk3a455"},modalPresentationStyle:{fullScreen:"_1yk3a456"}},defaultVariants:{},compoundVariants:[[{activityEnterStyle:"slideInLeft",enterStyle:"cover"},"_1yk3a457"]]}),io="_1yk3a45b dhthxq9 dhthxq7 dhthxqb dhthxqf dhthxqi",Ug="dhthxq9 dhthxq7 dhthxq8 _1yk3a450",Vg="_1yk3a45e",Jg="_1yk3a45f dhthxqi dhthxq4 dhthxq2 dhthxqf",Kg="_1yk3a45g dhthxqc dhthxqd dhthxq0",Gg="_1yk3a45b dhthxq9 dhthxq7 dhthxqb dhthxqf dhthxqi",Qg="_1yk3a459 dhthxqa dhthxq7 _1yk3a451",Yg="_1yk3a45a dhthxq9 dhthxq7 dhthxq1 _1yk3a450",Xg="_1yk3a45h dhthxq9 dhthxq7 dhthxq1 dhthxq5 _1yk3a450",Zg="_1yk3a458",ev=kt({defaultClassName:"dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 dhthxqc",variantClassNames:{transitionState:{"enter-active":"_1dlf434a","enter-done":"_1dlf434b","exit-active":"_1dlf434c","exit-done":"_1dlf434d"},hasAppBar:{true:"_1dlf434j"}},defaultVariants:{},compoundVariants:[]}),tv="_1dlf434k dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 _1dlf4347 _1dlf4349",sv=kt({defaultClassName:"_1dlf434r dhthxq4 dhthxq2 dhthxq3 dhthxq1",variantClassNames:{hasAppBar:{true:"_1dlf434s"}},defaultVariants:{},compoundVariants:[]}),nv="_1dlf434a",av="_1dlf434b",rv="_1dlf434c",iv="_1dlf434d",ov=kt({defaultClassName:"_1dlf434l dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 _1dlf4348 _1dlf4349",variantClassNames:{hasAppBar:{true:"_1dlf434m dhthxqg"},modalPresentationStyle:{fullScreen:"_1dlf434n"},activityEnterStyle:{slideInLeft:"_1dlf434o"}},defaultVariants:{},compoundVariants:[]}),cv=kt({defaultClassName:"_1dlf434p dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3",variantClassNames:{hasAppBar:{true:"_1dlf434q"}},defaultVariants:{},compoundVariants:[]}),ns={transitionDuration:"var(--_1dlf4340)",zIndexes:{dim:"var(--_1dlf4341)",paper:"var(--_1dlf4342)",edge:"var(--_1dlf4343)",appBar:"var(--_1dlf4344)"},appBar:{center:{mainWidth:"var(--_1dlf4346)"}}},pl=l.forwardRef(({title:e,renderLeft:s,renderRight:n,backButton:a,closeButton:r,closeButtonLocation:i="left",border:c=!0,modalPresentationStyle:o,activityEnterStyle:u,iconColor:d,iconColorTransitionDuration:m,textColor:h,textColorTransitionDuration:p,borderColor:g,borderColorTransitionDuration:y,borderSize:f,height:x,heightTransitionDuration:b,overflow:v,backgroundColor:j,backgroundColorTransitionDuration:N,backgroundImage:w,backgroundImageTransitionDuration:M,onTopClick:S,enterStyle:k,className:I,minHeight:E,fontSize:D,lineHeight:P,hitSlop:A,containerPadding:T,itemGap:C},B)=>{var _,R;const L=an(),W=Qt(),J=ul();$r();const Z=hl(),q=(_=Z.appBar)==null?void 0:_.closeButton,K=(R=Z.appBar)==null?void 0:R.backButton,ue=l.useRef(null),{maxWidth:U}=Ig({outerRef:B,innerRef:ue,enable:Z.theme==="cupertino"}),G=(Z.theme==="cupertino"&&o!=="fullScreen"||u==="slideInLeft")&&k!=="cover",le=X=>{a&&"onClick"in a&&a.onClick&&a.onClick(X),X.defaultPrevented||L.pop()},ne=()=>{var X,re;return!W||W.isRoot?null:!a&&!K?t.jsx("button",{type:"button","aria-label":"Go Back",className:io,onClick:le,children:t.jsx(ao,{})}):a&&"render"in a&&a.render?(X=a.render)==null?void 0:X.call(a):K&&"render"in K&&K.render?(re=K.render)==null?void 0:re.call(K):t.jsx("button",{type:"button",className:io,"aria-label":a&&"ariaLabel"in a?a.ariaLabel:K&&"ariaLabel"in K?K.ariaLabel:void 0,onClick:le,children:a&&"renderIcon"in a&&a.renderIcon?a.renderIcon():K&&"renderIcon"in K&&K.renderIcon?K.renderIcon():o==="fullScreen"?t.jsx(ro,{}):t.jsx(ao,{})})},O=X=>{var re;r&&"onClick"in r&&r.onClick&&r.onClick(X),!X.defaultPrevented&&q&&"onClick"in q&&((re=q.onClick)==null||re.call(q,X))},se=()=>{var X;const re=!W||W.isRoot,Ne=ie=>ie&&"render"in ie&&ie.render||ie&&"renderIcon"in ie&&ie.renderIcon||ie&&"onClick"in ie&&ie.onClick;return!(Ne(r)||Ne((X=Z.appBar)==null?void 0:X.closeButton))||!re?null:r&&"render"in r&&r.render?r.render():q&&"render"in q&&q.render?q.render():t.jsx("button",{type:"button",className:Gg,"aria-label":r&&"ariaLabel"in r?r.ariaLabel:q&&"ariaLabel"in q?q.ariaLabel:void 0,onClick:O,children:r&&"renderIcon"in r&&r.renderIcon?r.renderIcon():q&&"renderIcon"in q&&q.renderIcon?q.renderIcon():t.jsx(ro,{})})};return t.jsxs("div",Ds(Pt({ref:B,className:aa(qg({border:c,modalPresentationStyle:o,activityEnterStyle:u,enterStyle:k}),I),style:rn(on({[$.appBar.iconColor]:d,[$.appBar.iconColorTransitionDuration]:m,[$.appBar.textColor]:h,[$.appBar.textColorTransitionDuration]:p,[$.appBar.borderColor]:g,[$.appBar.borderColorTransitionDuration]:y,[$.appBar.borderSize]:f,[$.appBar.height]:x,[$.appBar.heightTransitionDuration]:b,[$.appBar.overflow]:v,[$.appBar.backgroundColor]:j??(G?$.backgroundColor:"transparent"),[$.appBar.backgroundColorTransitionDuration]:N,[$.appBar.backgroundImage]:w??(G?$.appBar.backgroundImage:"none"),[$.appBar.backgroundImageTransitionDuration]:M,[ns.appBar.center.mainWidth]:`${U}px`,[$.appBar.minHeight]:E,[$.appBar.containerPadding]:T,[$.appBar.fontSize]:D,[$.appBar.hitSlop]:A,[$.appBar.lineHeight]:P,[$.appBar.itemGap]:C})),"data-part":"appBar"},J),{children:[t.jsx("div",{className:Zg}),t.jsxs("div",{className:Qg,children:[t.jsxs("div",{className:Yg,children:[i==="left"&&se(),ne(),s?.()]}),t.jsx("div",{ref:ue,className:Ug,children:t.jsxs("div",{className:Vg,children:[typeof e=="string"?t.jsx("div",{className:Kg,children:e}):e,t.jsx("button",{className:Jg,type:"button",onClick:S})]})}),t.jsxs("div",{className:Xg,children:[n?.(),i==="right"&&se()]})]})]}))});pl.displayName="AppBar";var lv=pl,dv=32,oo=80,uv=l.createContext(null),mv=({backgroundColor:e,backgroundImage:s,dimBackgroundColor:n,appBar:a,preventSwipeBack:r,CUPERTINO_ONLY_modalPresentationStyle:i,ANDROID_ONLY_activityEnterStyle:c,className:o,children:u})=>{var d;const m=hl(),h=Qt(),p=ul();$r();const{pop:g}=an(),y=l.useRef(null),f=l.useRef(null),x=l.useRef(null),b=l.useRef(null),v=l.useRef(null),j=l.useRef(null),N=m.theme==="cupertino"?i:void 0,w=m.theme==="android"?c:void 0,M=r||N==="fullScreen",S=!!a,k=Hs();let I,E,D,P;m.theme==="cupertino"?(I=k+(N==="fullScreen"?2:0),E=k+(S&&N!=="fullScreen"?a.enterStyle==="cover"?2:1:3),D=k+4,P=k+7):(I=k,E=k+(w==="slideInLeft"&&a?.enterStyle!=="cover"?0:2),D=k+4,P=k+(w==="slideInLeft"?6:4));const A=(d=h?.transitionState)!=null?d:"enter-done",T=Wr(A);Eg({refs:[y]}),Pg({refs:(m.theme==="cupertino"||w==="slideInLeft")&&a?.enterStyle!=="cover"?[x]:[x,v],offsetStyles:m.theme==="cupertino"?{transform:`translate3d(-${oo/16}rem, 0, 0)`,opacity:"1"}:w==="slideInLeft"?{transform:"translate3d(-50%, 0, 0)",opacity:"0"}:{transform:`translate3d(0, -${dv/16}rem, 0)`,opacity:"1"},transitionDuration:$.computedTransitionDuration,hasEffect:N!=="fullScreen"}),_g({dimRef:f,edgeRef:b,paperRef:x,appBarRef:v,offset:oo,transitionDuration:$.transitionDuration,moveAppBarTogether:a?.enterStyle==="cover",preventSwipeBack:M||m.theme!=="cupertino",getActivityTransitionState(){const B=x.current,_=B?.parentElement;return _?_.classList.contains(nv)?"enter-active":_.classList.contains(av)?"enter-done":_.classList.contains(rv)?"exit-active":_.classList.contains(iv)?"exit-done":null:null},onSwipeEnd({swiped:B}){B&&g()}});const C=B=>{var _,R;(_=a?.onTopClick)==null||_.call(a,B),B.defaultPrevented||(R=j.current)==null||R.scroll({top:0,behavior:"smooth"})};return Hr({ref:y}),t.jsx(uv.Provider,{value:l.useMemo(()=>({scroll({top:B}){var _;(_=j?.current)==null||_.scroll({top:B,behavior:"smooth"})},zIndices:{dim:I,paper:E,edge:D,appBar:P}}),[j,I,E,D,P]),children:t.jsxs("div",Ds(Pt({ref:y,className:aa(ev({hasAppBar:S,transitionState:A==="enter-done"||A==="exit-done"?A:T}),o),style:rn(on({[$.backgroundColor]:e,[$.backgroundImage]:s,[$.dimBackgroundColor]:n,[$.appBar.height]:a?.height,[$.appBar.heightTransitionDuration]:a?.heightTransitionDuration,[ns.zIndexes.dim]:`${I}`,[ns.zIndexes.paper]:`${E}`,[ns.zIndexes.edge]:`${D}`,[ns.zIndexes.appBar]:`${P}`,[ns.transitionDuration]:A==="enter-active"||A==="exit-active"?$.computedTransitionDuration:"0ms"})),"data-stackflow-component-name":"AppScreen"},p),{children:[w!=="slideInLeft"&&t.jsx("div",Pt({ref:f,className:tv,"data-part":"dim"},p)),a&&t.jsx(lv,Ds(Pt({},a),{ref:v,modalPresentationStyle:N,activityEnterStyle:w,onTopClick:C})),t.jsx("div",Ds(Pt({ref:x,className:ov({hasAppBar:S,modalPresentationStyle:N,activityEnterStyle:w}),"data-part":"paper"},p),{children:t.jsx("div",{ref:j,className:cv({hasAppBar:S}),children:u})}),h?.id),!h?.isRoot&&m.theme==="cupertino"&&!M&&t.jsx("div",Pt({ref:b,className:sv({hasAppBar:S}),"data-part":"edge"},p))]}))})},ce=mv,fv=kt({defaultClassName:"dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 dhthxqc",variantClassNames:{transitionState:{"enter-active":"_1ht38h04","enter-done":"_1ht38h05","exit-active":"_1ht38h06","exit-done":"_1ht38h07"}},defaultVariants:{},compoundVariants:[]}),hv="_1ht38h0d dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 dhthxqc dhthxqa dhthxq7 _1ht38h03",pv="_1ht38h0e dhthxqc _1ht38h03",Ea={transitionDuration:"var(--_1ht38h00)",zIndexes:{dim:"var(--_1ht38h01)",paper:"var(--_1ht38h02)"}},xl=({borderRadius:e="1rem",backgroundColor:s,backgroundImage:n,dimBackgroundColor:a,paperRef:r,onOutsideClick:i,children:c,className:o})=>{var u;const d=Qt(),{pop:m}=an(),h=l.useRef(null),p=l.useRef(null);ft({styleName:"hide",refs:[h]}),ft({styleName:"offset",refs:[p]}),ft({styleName:"swipe-back",refs:[p]});const g=l.useRef(!1),y=j=>{i?.(j),!j.defaultPrevented&&(g.current||(g.current=!0,m()))},f=j=>{j.stopPropagation()},x=Hs()+3,b=Hs()+4,v=(u=d?.transitionState)!=null?u:"enter-done";return Hr({ref:h}),t.jsx("div",{className:aa(fv({transitionState:Wr(v)}),o),ref:h,style:rn(on({[$.bottomSheet.borderRadius]:e,[$.backgroundColor]:s,[$.backgroundImage]:n,[$.dimBackgroundColor]:a,[Ea.zIndexes.dim]:`${x}`,[Ea.zIndexes.paper]:`${b}`,[Ea.transitionDuration]:v==="enter-active"||v==="exit-active"?$.computedTransitionDuration:"0ms"})),"data-stackflow-component-name":"BottomSheet","data-stackflow-activity-id":d?.id,"data-stackflow-activity-is-active":d?.isActive,children:t.jsx("div",{className:hv,ref:p,onClick:y,children:t.jsx("div",{className:pv,ref:r,onClick:f,children:c})})})};xl.displayName="BottomSheet";var xv=xl,gv=kt({defaultClassName:"dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 dhthxqc",variantClassNames:{transitionState:{"enter-active":"_5ozg8c4","enter-done":"_5ozg8c5","exit-active":"_5ozg8c6","exit-done":"_5ozg8c7"}},defaultVariants:{},compoundVariants:[]}),vv="_5ozg8cd dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 dhthxqc dhthxq9 dhthxq7 dhthxqb _5ozg8c3",bv="_5ozg8ce dhthxqc _5ozg8c3",Pa={transitionDuration:"var(--_5ozg8c0)",zIndexes:{dim:"var(--_5ozg8c1)",paper:"var(--_5ozg8c2)"}},gl=({backgroundColor:e,backgroundImage:s,dimBackgroundColor:n,borderRadius:a="1rem",maxWidth:r,onOutsideClick:i,children:c,className:o})=>{var u;const d=Qt(),{pop:m}=an(),h=l.useRef(null),p=l.useRef(null);ft({styleName:"hide",refs:[h]}),ft({styleName:"offset",refs:[p]}),ft({styleName:"swipe-back",refs:[p]});const g=l.useRef(!1),y=j=>{i?.(j),!j.defaultPrevented&&(g.current||(g.current=!0,m()))},f=j=>{j.stopPropagation()},x=Hs()+3,b=Hs()+4,v=(u=d?.transitionState)!=null?u:"enter-done";return Hr({ref:h}),t.jsx("div",{className:aa(gv({transitionState:Wr(v)}),o),ref:h,style:rn(on({[$.backgroundColor]:e,[$.backgroundImage]:s,[$.dimBackgroundColor]:n,[$.modal.borderRadius]:a,[$.modal.maxWidth]:r,[Pa.zIndexes.dim]:`${x}`,[Pa.zIndexes.paper]:`${b}`,[Pa.transitionDuration]:v==="enter-active"||v==="exit-active"?$.computedTransitionDuration:"0ms"})),"data-stackflow-component-name":"Modal","data-stackflow-activity-id":d?.id,"data-stackflow-activity-is-active":d?.isActive,children:t.jsx("div",{className:vv,ref:p,onClick:y,children:t.jsx("div",{className:bv,onClick:f,children:c})})})};gl.displayName="Modal";var yv=gl,jv=Object.defineProperty,V=(e,s)=>jv(e,"name",{value:s,configurable:!0}),ds=class{type=3;name="";prefix="";value="";suffix="";modifier=3;constructor(e,s,n,a,r,i){this.type=e,this.name=s,this.prefix=n,this.value=a,this.suffix=r,this.modifier=i}hasCustomName(){return this.name!==""&&typeof this.name!="number"}};V(ds,"Part");var Nv=/[$_\p{ID_Start}]/u,wv=/[$_\u200C\u200D\p{ID_Continue}]/u,Ya=".*";function vl(e,s){return(s?/^[\x00-\xFF]*$/:/^[\x00-\x7F]*$/).test(e)}V(vl,"isASCII");function qr(e,s=!1){let n=[],a=0;for(;a<e.length;){let r=e[a],i=V(function(c){if(!s)throw new TypeError(c);n.push({type:"INVALID_CHAR",index:a,value:e[a++]})},"ErrorOrInvalid");if(r==="*"){n.push({type:"ASTERISK",index:a,value:e[a++]});continue}if(r==="+"||r==="?"){n.push({type:"OTHER_MODIFIER",index:a,value:e[a++]});continue}if(r==="\\"){n.push({type:"ESCAPED_CHAR",index:a++,value:e[a++]});continue}if(r==="{"){n.push({type:"OPEN",index:a,value:e[a++]});continue}if(r==="}"){n.push({type:"CLOSE",index:a,value:e[a++]});continue}if(r===":"){let c="",o=a+1;for(;o<e.length;){let u=e.substr(o,1);if(o===a+1&&Nv.test(u)||o!==a+1&&wv.test(u)){c+=e[o++];continue}break}if(!c){i(`Missing parameter name at ${a}`);continue}n.push({type:"NAME",index:a,value:c}),a=o;continue}if(r==="("){let c=1,o="",u=a+1,d=!1;if(e[u]==="?"){i(`Pattern cannot start with "?" at ${u}`);continue}for(;u<e.length;){if(!vl(e[u],!1)){i(`Invalid character '${e[u]}' at ${u}.`),d=!0;break}if(e[u]==="\\"){o+=e[u++]+e[u++];continue}if(e[u]===")"){if(c--,c===0){u++;break}}else if(e[u]==="("&&(c++,e[u+1]!=="?")){i(`Capturing groups are not allowed at ${u}`),d=!0;break}o+=e[u++]}if(d)continue;if(c){i(`Unbalanced pattern at ${a}`);continue}if(!o){i(`Missing pattern at ${a}`);continue}n.push({type:"REGEX",index:a,value:o}),a=u;continue}n.push({type:"CHAR",index:a,value:e[a++]})}return n.push({type:"END",index:a,value:""}),n}V(qr,"lexer");function Ur(e,s={}){let n=qr(e);s.delimiter??="/#?",s.prefixes??="./";let a=`[^${De(s.delimiter)}]+?`,r=[],i=0,c=0,o=new Set,u=V(v=>{if(c<n.length&&n[c].type===v)return n[c++].value},"tryConsume"),d=V(()=>u("OTHER_MODIFIER")??u("ASTERISK"),"tryConsumeModifier"),m=V(v=>{let j=u(v);if(j!==void 0)return j;let{type:N,index:w}=n[c];throw new TypeError(`Unexpected ${N} at ${w}, expected ${v}`)},"mustConsume"),h=V(()=>{let v="",j;for(;j=u("CHAR")??u("ESCAPED_CHAR");)v+=j;return v},"consumeText"),p=V(v=>v,"DefaultEncodePart"),g=s.encodePart||p,y="",f=V(v=>{y+=v},"appendToPendingFixedValue"),x=V(()=>{y.length&&(r.push(new ds(3,"","",g(y),"",3)),y="")},"maybeAddPartFromPendingFixedValue"),b=V((v,j,N,w,M)=>{let S=3;switch(M){case"?":S=1;break;case"*":S=0;break;case"+":S=2;break}if(!j&&!N&&S===3){f(v);return}if(x(),!j&&!N){if(!v)return;r.push(new ds(3,"","",g(v),"",S));return}let k;N?N==="*"?k=Ya:k=N:k=a;let I=2;k===a?(I=1,k=""):k===Ya&&(I=0,k="");let E;if(j?E=j:N&&(E=i++),o.has(E))throw new TypeError(`Duplicate name '${E}'.`);o.add(E),r.push(new ds(I,E,g(v),k,g(w),S))},"addPart");for(;c<n.length;){let v=u("CHAR"),j=u("NAME"),N=u("REGEX");if(!j&&!N&&(N=u("ASTERISK")),j||N){let M=v??"";s.prefixes.indexOf(M)===-1&&(f(M),M=""),x();let S=d();b(M,j,N,"",S);continue}let w=v??u("ESCAPED_CHAR");if(w){f(w);continue}if(u("OPEN")){let M=h(),S=u("NAME"),k=u("REGEX");!S&&!k&&(k=u("ASTERISK"));let I=h();m("CLOSE");let E=d();b(M,S,k,I,E);continue}x(),m("END")}return r}V(Ur,"parse");function De(e){return e.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}V(De,"escapeString");function Xa(e){return e&&e.ignoreCase?"ui":"u"}V(Xa,"flags");function bl(e,s,n){return Vr(Ur(e,n),s,n)}V(bl,"stringToRegexp");function Dt(e){switch(e){case 0:return"*";case 1:return"?";case 2:return"+";case 3:return""}}V(Dt,"modifierToString");function Vr(e,s,n={}){n.delimiter??="/#?",n.prefixes??="./",n.sensitive??=!1,n.strict??=!1,n.end??=!0,n.start??=!0,n.endsWith="";let a=n.start?"^":"";for(let o of e){if(o.type===3){o.modifier===3?a+=De(o.value):a+=`(?:${De(o.value)})${Dt(o.modifier)}`;continue}s&&s.push(o.name);let u=`[^${De(n.delimiter)}]+?`,d=o.value;if(o.type===1?d=u:o.type===0&&(d=Ya),!o.prefix.length&&!o.suffix.length){o.modifier===3||o.modifier===1?a+=`(${d})${Dt(o.modifier)}`:a+=`((?:${d})${Dt(o.modifier)})`;continue}if(o.modifier===3||o.modifier===1){a+=`(?:${De(o.prefix)}(${d})${De(o.suffix)})`,a+=Dt(o.modifier);continue}a+=`(?:${De(o.prefix)}`,a+=`((?:${d})(?:`,a+=De(o.suffix),a+=De(o.prefix),a+=`(?:${d}))*)${De(o.suffix)})`,o.modifier===0&&(a+="?")}let r=`[${De(n.endsWith)}]|$`,i=`[${De(n.delimiter)}]`;if(n.end)return n.strict||(a+=`${i}?`),n.endsWith.length?a+=`(?=${r})`:a+="$",new RegExp(a,Xa(n));n.strict||(a+=`(?:${i}(?=${r}))?`);let c=!1;if(e.length){let o=e[e.length-1];o.type===3&&o.modifier===3&&(c=n.delimiter.indexOf(o)>-1)}return c||(a+=`(?=${i}|${r})`),new RegExp(a,Xa(n))}V(Vr,"partsToRegexp");var Nt={delimiter:"",prefixes:"",sensitive:!0,strict:!0},Sv={delimiter:".",prefixes:"",sensitive:!0,strict:!0},Cv={delimiter:"/",prefixes:"/",sensitive:!0,strict:!0};function yl(e,s){return e.length?e[0]==="/"?!0:!s||e.length<2?!1:(e[0]=="\\"||e[0]=="{")&&e[1]=="/":!1}V(yl,"isAbsolutePathname");function Jr(e,s){return e.startsWith(s)?e.substring(s.length,e.length):e}V(Jr,"maybeStripPrefix");function jl(e,s){return e.endsWith(s)?e.substr(0,e.length-s.length):e}V(jl,"maybeStripSuffix");function Kr(e){return!e||e.length<2?!1:e[0]==="["||(e[0]==="\\"||e[0]==="{")&&e[1]==="["}V(Kr,"treatAsIPv6Hostname");var Nl=["ftp","file","http","https","ws","wss"];function Gr(e){if(!e)return!0;for(let s of Nl)if(e.test(s))return!0;return!1}V(Gr,"isSpecialScheme");function wl(e,s){if(e=Jr(e,"#"),s||e==="")return e;let n=new URL("https://example.com");return n.hash=e,n.hash?n.hash.substring(1,n.hash.length):""}V(wl,"canonicalizeHash");function Sl(e,s){if(e=Jr(e,"?"),s||e==="")return e;let n=new URL("https://example.com");return n.search=e,n.search?n.search.substring(1,n.search.length):""}V(Sl,"canonicalizeSearch");function Cl(e,s){return s||e===""?e:Kr(e)?Xr(e):Yr(e)}V(Cl,"canonicalizeHostname");function kl(e,s){if(s||e==="")return e;let n=new URL("https://example.com");return n.password=e,n.password}V(kl,"canonicalizePassword");function Al(e,s){if(s||e==="")return e;let n=new URL("https://example.com");return n.username=e,n.username}V(Al,"canonicalizeUsername");function Il(e,s,n){if(n||e==="")return e;if(s&&!Nl.includes(s))return new URL(`${s}:${e}`).pathname;let a=e[0]=="/";return e=new URL(a?e:"/-"+e,"https://example.com").pathname,a||(e=e.substring(2,e.length)),e}V(Il,"canonicalizePathname");function Tl(e,s,n){return Qr(s)===e&&(e=""),n||e===""?e:Zr(e)}V(Tl,"canonicalizePort");function El(e,s){return e=jl(e,":"),s||e===""?e:ma(e)}V(El,"canonicalizeProtocol");function Qr(e){switch(e){case"ws":case"http":return"80";case"wws":case"https":return"443";case"ftp":return"21";default:return""}}V(Qr,"defaultPortForProtocol");function ma(e){if(e==="")return e;if(/^[-+.A-Za-z0-9]*$/.test(e))return e.toLowerCase();throw new TypeError(`Invalid protocol '${e}'.`)}V(ma,"protocolEncodeCallback");function Pl(e){if(e==="")return e;let s=new URL("https://example.com");return s.username=e,s.username}V(Pl,"usernameEncodeCallback");function _l(e){if(e==="")return e;let s=new URL("https://example.com");return s.password=e,s.password}V(_l,"passwordEncodeCallback");function Yr(e){if(e==="")return e;if(/[\t\n\r #%/:<>?@[\]^\\|]/g.test(e))throw new TypeError(`Invalid hostname '${e}'`);let s=new URL("https://example.com");return s.hostname=e,s.hostname}V(Yr,"hostnameEncodeCallback");function Xr(e){if(e==="")return e;if(/[^0-9a-fA-F[\]:]/g.test(e))throw new TypeError(`Invalid IPv6 hostname '${e}'`);return e.toLowerCase()}V(Xr,"ipv6HostnameEncodeCallback");function Zr(e){if(e===""||/^[0-9]*$/.test(e)&&parseInt(e)<=65535)return e;throw new TypeError(`Invalid port '${e}'.`)}V(Zr,"portEncodeCallback");function Ml(e){if(e==="")return e;let s=new URL("https://example.com");return s.pathname=e[0]!=="/"?"/-"+e:e,e[0]!=="/"?s.pathname.substring(2,s.pathname.length):s.pathname}V(Ml,"standardURLPathnameEncodeCallback");function Rl(e){return e===""?e:new URL(`data:${e}`).pathname}V(Rl,"pathURLPathnameEncodeCallback");function Dl(e){if(e==="")return e;let s=new URL("https://example.com");return s.search=e,s.search.substring(1,s.search.length)}V(Dl,"searchEncodeCallback");function zl(e){if(e==="")return e;let s=new URL("https://example.com");return s.hash=e,s.hash.substring(1,s.hash.length)}V(zl,"hashEncodeCallback");var Bl=class{#s;#t=[];#n={};#e=0;#r=1;#c=0;#i=0;#d=0;#g=0;#h=!1;constructor(e){this.#s=e}get result(){return this.#n}parse(){for(this.#t=qr(this.#s,!0);this.#e<this.#t.length;this.#e+=this.#r){if(this.#r=1,this.#t[this.#e].type==="END"){if(this.#i===0){this.#p(),this.#f()?this.#a(9,1):this.#m()?this.#a(8,1):this.#a(7,0);continue}else if(this.#i===2){this.#l(5);continue}this.#a(10,0);break}if(this.#d>0)if(this.#k())this.#d-=1;else continue;if(this.#C()){this.#d+=1;continue}switch(this.#i){case 0:this.#j()&&this.#l(1);break;case 1:if(this.#j()){this.#T();let e=7,s=1;this.#N()?(e=2,s=3):this.#h&&(e=2),this.#a(e,s)}break;case 2:this.#b()?this.#l(3):(this.#y()||this.#m()||this.#f())&&this.#l(5);break;case 3:this.#w()?this.#a(4,1):this.#b()&&this.#a(5,1);break;case 4:this.#b()&&this.#a(5,1);break;case 5:this.#A()?this.#g+=1:this.#I()&&(this.#g-=1),this.#S()&&!this.#g?this.#a(6,1):this.#y()?this.#a(7,0):this.#m()?this.#a(8,1):this.#f()&&this.#a(9,1);break;case 6:this.#y()?this.#a(7,0):this.#m()?this.#a(8,1):this.#f()&&this.#a(9,1);break;case 7:this.#m()?this.#a(8,1):this.#f()&&this.#a(9,1);break;case 8:this.#f()&&this.#a(9,1);break}}this.#n.hostname!==void 0&&this.#n.port===void 0&&(this.#n.port="")}#a(e,s){switch(this.#i){case 0:break;case 1:this.#n.protocol=this.#u();break;case 2:break;case 3:this.#n.username=this.#u();break;case 4:this.#n.password=this.#u();break;case 5:this.#n.hostname=this.#u();break;case 6:this.#n.port=this.#u();break;case 7:this.#n.pathname=this.#u();break;case 8:this.#n.search=this.#u();break;case 9:this.#n.hash=this.#u();break}this.#i!==0&&e!==10&&([1,2,3,4].includes(this.#i)&&[6,7,8,9].includes(e)&&(this.#n.hostname??=""),[1,2,3,4,5,6].includes(this.#i)&&[8,9].includes(e)&&(this.#n.pathname??=this.#h?"/":""),[1,2,3,4,5,6,7].includes(this.#i)&&e===9&&(this.#n.search??="")),this.#v(e,s)}#v(e,s){this.#i=e,this.#c=this.#e+s,this.#e+=s,this.#r=0}#p(){this.#e=this.#c,this.#r=0}#l(e){this.#p(),this.#i=e}#x(e){return e<0&&(e=this.#t.length-e),e<this.#t.length?this.#t[e]:this.#t[this.#t.length-1]}#o(e,s){let n=this.#x(e);return n.value===s&&(n.type==="CHAR"||n.type==="ESCAPED_CHAR"||n.type==="INVALID_CHAR")}#j(){return this.#o(this.#e,":")}#N(){return this.#o(this.#e+1,"/")&&this.#o(this.#e+2,"/")}#b(){return this.#o(this.#e,"@")}#w(){return this.#o(this.#e,":")}#S(){return this.#o(this.#e,":")}#y(){return this.#o(this.#e,"/")}#m(){if(this.#o(this.#e,"?"))return!0;if(this.#t[this.#e].value!=="?")return!1;let e=this.#x(this.#e-1);return e.type!=="NAME"&&e.type!=="REGEX"&&e.type!=="CLOSE"&&e.type!=="ASTERISK"}#f(){return this.#o(this.#e,"#")}#C(){return this.#t[this.#e].type=="OPEN"}#k(){return this.#t[this.#e].type=="CLOSE"}#A(){return this.#o(this.#e,"[")}#I(){return this.#o(this.#e,"]")}#u(){let e=this.#t[this.#e],s=this.#x(this.#c).index;return this.#s.substring(s,e.index)}#T(){let e={};Object.assign(e,Nt),e.encodePart=ma;let s=bl(this.#u(),void 0,e);this.#h=Gr(s)}};V(Bl,"Parser");var _a=["protocol","username","password","hostname","port","pathname","search","hash"],yt="*";function Za(e,s){if(typeof e!="string")throw new TypeError("parameter 1 is not of type 'string'.");let n=new URL(e,s);return{protocol:n.protocol.substring(0,n.protocol.length-1),username:n.username,password:n.password,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search!==""?n.search.substring(1,n.search.length):void 0,hash:n.hash!==""?n.hash.substring(1,n.hash.length):void 0}}V(Za,"extractValues");function Ge(e,s){return s?os(e):e}V(Ge,"processBaseURLString");function as(e,s,n){let a;if(typeof s.baseURL=="string")try{a=new URL(s.baseURL),s.protocol===void 0&&(e.protocol=Ge(a.protocol.substring(0,a.protocol.length-1),n)),!n&&s.protocol===void 0&&s.hostname===void 0&&s.port===void 0&&s.username===void 0&&(e.username=Ge(a.username,n)),!n&&s.protocol===void 0&&s.hostname===void 0&&s.port===void 0&&s.username===void 0&&s.password===void 0&&(e.password=Ge(a.password,n)),s.protocol===void 0&&s.hostname===void 0&&(e.hostname=Ge(a.hostname,n)),s.protocol===void 0&&s.hostname===void 0&&s.port===void 0&&(e.port=Ge(a.port,n)),s.protocol===void 0&&s.hostname===void 0&&s.port===void 0&&s.pathname===void 0&&(e.pathname=Ge(a.pathname,n)),s.protocol===void 0&&s.hostname===void 0&&s.port===void 0&&s.pathname===void 0&&s.search===void 0&&(e.search=Ge(a.search.substring(1,a.search.length),n)),s.protocol===void 0&&s.hostname===void 0&&s.port===void 0&&s.pathname===void 0&&s.search===void 0&&s.hash===void 0&&(e.hash=Ge(a.hash.substring(1,a.hash.length),n))}catch{throw new TypeError(`invalid baseURL '${s.baseURL}'.`)}if(typeof s.protocol=="string"&&(e.protocol=El(s.protocol,n)),typeof s.username=="string"&&(e.username=Al(s.username,n)),typeof s.password=="string"&&(e.password=kl(s.password,n)),typeof s.hostname=="string"&&(e.hostname=Cl(s.hostname,n)),typeof s.port=="string"&&(e.port=Tl(s.port,e.protocol,n)),typeof s.pathname=="string"){if(e.pathname=s.pathname,a&&!yl(e.pathname,n)){let r=a.pathname.lastIndexOf("/");r>=0&&(e.pathname=Ge(a.pathname.substring(0,r+1),n)+e.pathname)}e.pathname=Il(e.pathname,e.protocol,n)}return typeof s.search=="string"&&(e.search=Sl(s.search,n)),typeof s.hash=="string"&&(e.hash=wl(s.hash,n)),e}V(as,"applyInit");function os(e){return e.replace(/([+*?:{}()\\])/g,"\\$1")}V(os,"escapePatternString");function Ll(e){return e.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}V(Ll,"escapeRegexpString");function Ol(e,s){s.delimiter??="/#?",s.prefixes??="./",s.sensitive??=!1,s.strict??=!1,s.end??=!0,s.start??=!0,s.endsWith="";let n=".*",a=`[^${Ll(s.delimiter)}]+?`,r=/[$_\u200C\u200D\p{ID_Continue}]/u,i="";for(let c=0;c<e.length;++c){let o=e[c];if(o.type===3){if(o.modifier===3){i+=os(o.value);continue}i+=`{${os(o.value)}}${Dt(o.modifier)}`;continue}let u=o.hasCustomName(),d=!!o.suffix.length||!!o.prefix.length&&(o.prefix.length!==1||!s.prefixes.includes(o.prefix)),m=c>0?e[c-1]:null,h=c<e.length-1?e[c+1]:null;if(!d&&u&&o.type===1&&o.modifier===3&&h&&!h.prefix.length&&!h.suffix.length)if(h.type===3){let p=h.value.length>0?h.value[0]:"";d=r.test(p)}else d=!h.hasCustomName();if(!d&&!o.prefix.length&&m&&m.type===3){let p=m.value[m.value.length-1];d=s.prefixes.includes(p)}d&&(i+="{"),i+=os(o.prefix),u&&(i+=`:${o.name}`),o.type===2?i+=`(${o.value})`:o.type===1?u||(i+=`(${a})`):o.type===0&&(!u&&(!m||m.type===3||m.modifier!==3||d||o.prefix!=="")?i+="*":i+=`(${n})`),o.type===1&&u&&o.suffix.length&&r.test(o.suffix[0])&&(i+="\\"),i+=os(o.suffix),d&&(i+="}"),o.modifier!==3&&(i+=Dt(o.modifier))}return i}V(Ol,"partsToPattern");var Fl=class{#s;#t={};#n={};#e={};#r={};#c=!1;constructor(e={},s,n){try{let a;if(typeof s=="string"?a=s:n=s,typeof e=="string"){let o=new Bl(e);if(o.parse(),e=o.result,a===void 0&&typeof e.protocol!="string")throw new TypeError("A base URL must be provided for a relative constructor string.");e.baseURL=a}else{if(!e||typeof e!="object")throw new TypeError("parameter 1 is not of type 'string' and cannot convert to dictionary.");if(a)throw new TypeError("parameter 1 is not of type 'string'.")}typeof n>"u"&&(n={ignoreCase:!1});let r={ignoreCase:n.ignoreCase===!0},i={pathname:yt,protocol:yt,username:yt,password:yt,hostname:yt,port:yt,search:yt,hash:yt};this.#s=as(i,e,!0),Qr(this.#s.protocol)===this.#s.port&&(this.#s.port="");let c;for(c of _a){if(!(c in this.#s))continue;let o={},u=this.#s[c];switch(this.#n[c]=[],c){case"protocol":Object.assign(o,Nt),o.encodePart=ma;break;case"username":Object.assign(o,Nt),o.encodePart=Pl;break;case"password":Object.assign(o,Nt),o.encodePart=_l;break;case"hostname":Object.assign(o,Sv),Kr(u)?o.encodePart=Xr:o.encodePart=Yr;break;case"port":Object.assign(o,Nt),o.encodePart=Zr;break;case"pathname":Gr(this.#t.protocol)?(Object.assign(o,Cv,r),o.encodePart=Ml):(Object.assign(o,Nt,r),o.encodePart=Rl);break;case"search":Object.assign(o,Nt,r),o.encodePart=Dl;break;case"hash":Object.assign(o,Nt,r),o.encodePart=zl;break}try{this.#r[c]=Ur(u,o),this.#t[c]=Vr(this.#r[c],this.#n[c],o),this.#e[c]=Ol(this.#r[c],o),this.#c=this.#c||this.#r[c].some(d=>d.type===2)}catch{throw new TypeError(`invalid ${c} pattern '${this.#s[c]}'.`)}}}catch(a){throw new TypeError(`Failed to construct 'URLPattern': ${a.message}`)}}get[Symbol.toStringTag](){return"URLPattern"}test(e={},s){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof e!="string"&&s)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof e>"u")return!1;try{typeof e=="object"?n=as(n,e,!1):n=as(n,Za(e,s),!1)}catch{return!1}let a;for(a of _a)if(!this.#t[a].exec(n[a]))return!1;return!0}exec(e={},s){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof e!="string"&&s)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof e>"u")return;try{typeof e=="object"?n=as(n,e,!1):n=as(n,Za(e,s),!1)}catch{return null}let a={};s?a.inputs=[e,s]:a.inputs=[e];let r;for(r of _a){let i=this.#t[r].exec(n[r]);if(!i)return null;let c={};for(let[o,u]of this.#n[r].entries())if(typeof u=="string"||typeof u=="number"){let d=i[o+1];c[u]=d}a[r]={input:n[r]??"",groups:c}}return a}static compareComponent(e,s,n){let a=V((o,u)=>{for(let d of["type","modifier","prefix","value","suffix"]){if(o[d]<u[d])return-1;if(o[d]!==u[d])return 1}return 0},"comparePart"),r=new ds(3,"","","","",3),i=new ds(0,"","","","",3),c=V((o,u)=>{let d=0;for(;d<Math.min(o.length,u.length);++d){let m=a(o[d],u[d]);if(m)return m}return o.length===u.length?0:a(o[d]??r,u[d]??r)},"comparePartList");return!s.#e[e]&&!n.#e[e]?0:s.#e[e]&&!n.#e[e]?c(s.#r[e],[i]):!s.#e[e]&&n.#e[e]?c([i],n.#r[e]):c(s.#r[e],n.#r[e])}get protocol(){return this.#e.protocol}get username(){return this.#e.username}get password(){return this.#e.password}get hostname(){return this.#e.hostname}get port(){return this.#e.port}get pathname(){return this.#e.pathname}get search(){return this.#e.search}get hash(){return this.#e.hash}get hasRegExpGroups(){return this.#c}};V(Fl,"URLPattern");globalThis.URLPattern||(globalThis.URLPattern=Fl);const kv=l.createContext({requestHistoryTick:()=>{}}),$l=({children:e,requestHistoryTick:s})=>{const n=l.useMemo(()=>({requestHistoryTick:s}),[s]);return t.jsx(kv.Provider,{value:n,children:e})};$l.__docgenInfo={description:"",methods:[],displayName:"HistoryQueueProvider",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},requestHistoryTick:{required:!0,tsType:{name:"signature",type:"function",raw:"(cb: (resolve: () => void) => void) => void",signature:{arguments:[{type:{name:"signature",type:"function",raw:"(resolve: () => void) => void",signature:{arguments:[{type:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},name:"resolve"}],return:{name:"void"}}},name:"cb"}],return:{name:"void"}}},description:""}}};function ps(){return ps=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ps.apply(null,arguments)}var Xe;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Xe||(Xe={}));var qn=function(e){return e},co="beforeunload",Av="popstate";function Iv(e){e===void 0&&(e={});var s=e,n=s.window,a=n===void 0?document.defaultView:n,r=a.history;function i(){var S=a.location,k=S.pathname,I=S.search,E=S.hash,D=r.state||{};return[D.idx,qn({pathname:k,search:I,hash:E,state:D.usr||null,key:D.key||"default"})]}var c=null;function o(){if(c)g.call(c),c=null;else{var S=Xe.Pop,k=i(),I=k[0],E=k[1];if(g.length){if(I!=null){var D=m-I;D&&(c={action:S,location:E,retry:function(){w(D*-1)}},w(D))}}else v(S)}}a.addEventListener(Av,o);var u=Xe.Pop,d=i(),m=d[0],h=d[1],p=Un(),g=Un();m==null&&(m=0,r.replaceState(ps({},r.state,{idx:m}),""));function y(S){return typeof S=="string"?S:Wl(S)}function f(S,k){return k===void 0&&(k=null),qn(ps({pathname:h.pathname,hash:"",search:""},typeof S=="string"?tr(S):S,{state:k,key:er()}))}function x(S,k){return[{usr:S.state,key:S.key,idx:k},y(S)]}function b(S,k,I){return!g.length||(g.call({action:S,location:k,retry:I}),!1)}function v(S){u=S;var k=i();m=k[0],h=k[1],p.call({action:u,location:h})}function j(S,k){var I=Xe.Push,E=f(S,k);function D(){j(S,k)}if(b(I,E,D)){var P=x(E,m+1),A=P[0],T=P[1];try{r.pushState(A,"",T)}catch{a.location.assign(T)}v(I)}}function N(S,k){var I=Xe.Replace,E=f(S,k);function D(){N(S,k)}if(b(I,E,D)){var P=x(E,m),A=P[0],T=P[1];r.replaceState(A,"",T),v(I)}}function w(S){r.go(S)}var M={get action(){return u},get location(){return h},createHref:y,push:j,replace:N,go:w,back:function(){w(-1)},forward:function(){w(1)},listen:function(k){return p.push(k)},block:function(k){var I=g.push(k);return g.length===1&&a.addEventListener(co,uo),function(){I(),g.length||a.removeEventListener(co,uo)}}};return M}function Tv(e){e===void 0&&(e={});var s=e,n=s.initialEntries,a=n===void 0?["/"]:n,r=s.initialIndex,i=a.map(function(j){var N=qn(ps({pathname:"/",search:"",hash:"",state:null,key:er()},typeof j=="string"?tr(j):j));return N}),c=lo(r??i.length-1,0,i.length-1),o=Xe.Pop,u=i[c],d=Un(),m=Un();function h(j){return typeof j=="string"?j:Wl(j)}function p(j,N){return N===void 0&&(N=null),qn(ps({pathname:u.pathname,search:"",hash:""},typeof j=="string"?tr(j):j,{state:N,key:er()}))}function g(j,N,w){return!m.length||(m.call({action:j,location:N,retry:w}),!1)}function y(j,N){o=j,u=N,d.call({action:o,location:u})}function f(j,N){var w=Xe.Push,M=p(j,N);function S(){f(j,N)}g(w,M,S)&&(c+=1,i.splice(c,i.length,M),y(w,M))}function x(j,N){var w=Xe.Replace,M=p(j,N);function S(){x(j,N)}g(w,M,S)&&(i[c]=M,y(w,M))}function b(j){var N=lo(c+j,0,i.length-1),w=Xe.Pop,M=i[N];function S(){b(j)}g(w,M,S)&&(c=N,y(w,M))}var v={get index(){return c},get action(){return o},get location(){return u},createHref:h,push:f,replace:x,go:b,back:function(){b(-1)},forward:function(){b(1)},listen:function(N){return d.push(N)},block:function(N){return m.push(N)}};return v}function lo(e,s,n){return Math.min(Math.max(e,s),n)}function uo(e){e.preventDefault(),e.returnValue=""}function Un(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(a){return a!==n})}},call:function(n){e.forEach(function(a){return a&&a(n)})}}}function er(){return Math.random().toString(36).substr(2,8)}function Wl(e){var s=e.pathname,n=s===void 0?"/":s,a=e.search,r=a===void 0?"":a,i=e.hash,c=i===void 0?"":i;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),c&&c!=="#"&&(n+=c.charAt(0)==="#"?c:"#"+c),n}function tr(e){var s={};if(e){var n=e.indexOf("#");n>=0&&(s.hash=e.substr(n),e=e.substr(0,n));var a=e.indexOf("?");a>=0&&(s.search=e.substr(a),e=e.substr(0,a)),e&&(s.pathname=e)}return s}const Ev=l.createContext([]);function Hl(e){return e.name==="Pushed"||e.name==="Popped"||e.name==="Replaced"}function Pv(e){return e.name==="StepPushed"||e.name==="StepPopped"||e.name==="StepReplaced"}function _v(e){return Hl(e)||Pv(e)}const _t={IDLE:"idle",PROGRESS:"progress",SUCCEEDED:"succeeded",FAILED:"failed"};function ql(e){return e===_t.SUCCEEDED||e===_t.FAILED}class Mv{targetId;initialSetupProcess;focusCount;previousActivationTrigger;constructor(s,n){this.targetId=s,this.initialSetupProcess=n,this.focusCount=0,this.previousActivationTrigger=null}captureStackChange(s){const n=this.initialSetupProcess.getStatus();if(!ql(n))return;const a=s.activities.find(i=>i.id===this.targetId);if(!a||!a.isActive)return;const r=s.events.findLast(Hl);!r||this.previousActivationTrigger&&r.eventDate<=this.previousActivationTrigger.eventDate||(this.focusCount++,this.previousActivationTrigger=r)}getActivationCount(){return this.focusCount}getTargetId(){return this.targetId}}const{parse:Rv,stringify:Dv}=JSON,{keys:zv}=Object,qs=String,Ul="string",mo={},ei="object",Vl=(e,s)=>s,Bv=e=>e instanceof qs?qs(e):e,Lv=(e,s)=>typeof s===Ul?new qs(s):s,Jl=(e,s,n,a)=>{const r=[];for(let i=zv(n),{length:c}=i,o=0;o<c;o++){const u=i[o],d=n[u];if(d instanceof qs){const m=e[d];typeof m===ei&&!s.has(m)?(s.add(m),n[u]=mo,r.push({k:u,a:[e,s,m,a]})):n[u]=a.call(n,u,m)}else n[u]!==mo&&(n[u]=a.call(n,u,d))}for(let{length:i}=r,c=0;c<i;c++){const{k:o,a:u}=r[c];n[o]=a.call(n,o,Jl.apply(null,u))}return n},fo=(e,s,n)=>{const a=qs(s.push(n)-1);return e.set(n,a),a},Ov=(e,s)=>{const n=Rv(e,Lv).map(Bv),a=n[0],r=s||Vl,i=typeof a===ei&&a?Jl(n,new Set,a,r):a;return r.call({"":i},"",i)},Fv=(e,s,n)=>{const a=Vl,r=new Map,i=[],c=[];let o=+fo(r,i,a.call({"":e},"",e)),u=!o;for(;o<i.length;)u=!0,c[o]=Dv(i[o++],d,n);return"["+c.join(",")+"]";function d(m,h){if(u)return u=!u,h;const p=a.call(this,m,h);switch(typeof p){case ei:if(p===null)return p;case Ul:return r.get(p)||fo(r,i,p)}return p}},Kl="@biochain/plugin-navigation-sync";function Gl(e){return{_TAG:Kl,flattedState:Fv({activity:e.activity,step:e.step})}}function $v(e){return typeof e=="object"&&e!==null&&"_TAG"in e&&"flattedState"in e&&typeof e._TAG=="string"&&e._TAG===Kl&&typeof e.flattedState=="string"}function gn(e){try{return $v(e)?Ov(e.flattedState):null}catch{return null}}function ho({history:e,pathname:s,state:n,useHash:a}){const r=a?`${e.location.pathname}#${s}`:s;e.push(r,Gl(n))}function Ma({history:e,pathname:s,state:n,useHash:a}){const r=a?`${e.location.pathname}#${s}`:s;e.replace(r,Gl(n))}function po(e){return e.length===0?void 0:e[e.length-1]}const Wv=e=>{let s=Promise.resolve();return{requestHistoryTick:a=>{s=s.then(()=>new Promise(r=>{const i=e.listen(()=>{i(),r()});a(()=>{i(),r()})}))}}};function Ql(e){return new URL(e,"file://")}function sr(e){const s={};return e.forEach((n,a)=>{s[a]=n}),s}function vn(e){return e.endsWith("/")?e:`${e}/`}function xo(e){return e.toString().length>0?`?${e}`:e}function We({path:e,decode:s},n){const a=e==="*"||e==="/*",r=a?[]:Array.from(e.matchAll(/:([A-Za-z0-9_]+)/g)).map(d=>d[1]).filter(Boolean),i=Array.from(new Set(r)),c=a?Number.POSITIVE_INFINITY:i.length,o=a?"*":vn(e),u=a?null:new URLPattern({pathname:o});return{fill(d){if(a){const g=new URLSearchParams(Object.entries(d).reduce((y,[f,x])=>x?{...y,[f]:x}:y,{}));return vn("/")+xo(g)}let m=e;for(const g of i){const y=d[g];if(y===void 0)throw new Error(`Missing route param: ${g}`);m=m.replace(`:${g}`,encodeURIComponent(y))}m=vn(m);const h={...d};i.forEach(g=>{delete h[g]});const p=new URLSearchParams(Object.entries(h).reduce((g,[y,f])=>({...g,...f?{[y]:f}:null}),{}));return m+xo(p)},parse(d){const m=Ql(d);if(a){const b={...sr(m.searchParams)};return s?s(b):b}if(!u)return null;const h=vn(m.pathname),p=u.exec({pathname:h}),g=sr(m.searchParams);if(!p)return null;const y=p.pathname.groups,f={...g};for(const[x,b]of Object.entries(y))b!==void 0&&(f[x]=b);return s?s(f):f},variableCount:c}}class Hv{status;pendingNavigations;dispatchedEvents;baseNavigationEvents;constructor(s,n=[]){this.status=s.length>0?_t.IDLE:_t.SUCCEEDED,this.pendingNavigations=s.slice(),this.dispatchedEvents=[],this.baseNavigationEvents=n}captureNavigationOpportunity(s){if(ql(this.status))return[];if(s&&s.globalTransitionState!=="idle")return[];if(this.pendingNavigations.length===0)return this.status=_t.SUCCEEDED,[];const n=s?s.events.filter(_v):[];if(!(this.verifyAllDispatchedEventsAreInNavigationHistory(n)&&this.verifyNoUnknownNavigationEvents(n)))return this.pendingNavigations=[],this.status=_t.FAILED,[];const a=this.pendingNavigations.shift();if(!a)return[];const r=a();return this.dispatchedEvents.push(...r),this.status=_t.PROGRESS,r}getStatus(){return this.status}verifyAllDispatchedEventsAreInNavigationHistory(s){const n=new Set(s.map(a=>a.id));return this.dispatchedEvents.every(a=>n.has(a.id))}verifyNoUnknownNavigationEvents(s){const n=new Set([...this.baseNavigationEvents,...this.dispatchedEvents].map(a=>a.id));return s.every(a=>n.has(a.id))}}function qv(e){return typeof e=="string"?{path:e}:e}function Uv(e){return(Array.isArray(e)?e:[e]).map(qv)}function Vv(e){return Object.keys(e).flatMap(n=>{const a=e[n];return a?Uv(a).map(r=>({activityName:n,...r})):[]})}class Jv{latestlyBookedSession=Promise.resolve();acquire(){return new Promise(s=>{this.latestlyBookedSession=this.latestlyBookedSession.then(()=>new Promise(n=>s({release:()=>n()})))})}async runExclusively(s){const{release:n}=await this.acquire();try{return await s()}finally{n()}}}class Kv{subscribers=[];publishLock=new Jv;subscribe(s){return this.subscribers.push(s),()=>{this.subscribers=this.subscribers.filter(n=>n!==s)}}publish(s){const n=this.subscribers.slice();return this.publishLock.runExclusively(()=>Promise.allSettled(n.map(a=>a(s))))}}const Gv=l.createContext([]),ti=e=>t.jsx(Gv.Provider,{value:e.routes,children:e.children});ti.displayName="RoutesProvider";ti.__docgenInfo={description:"",methods:[],displayName:"RoutesProvider",props:{routes:{required:!0,tsType:{name:"Array",elements:[{name:"ActivityRoute",elements:[{name:"T"}],raw:"ActivityRoute<T>"}],raw:"ActivityRoute<T>[]"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const Qv=/^:[\w-]+$/,Yv=3,Xv=1,Zv=10,eb=-2,go=e=>e==="*";function vo(e){const s=e.split("/");let n=s.length;return s.some(go)&&(n+=eb),s.filter(a=>!go(a)).reduce((a,r)=>a+(Qv.test(r)?Yv:r===""?Xv:Zv),n)}function tb(e){return[...e].sort((s,n)=>vo(n.path)-vo(s.path))}const sb=1e3,nb=60*sb;function ab(e){"config"in e&&e.config.decorate("historySync",{makeTemplate:We,urlPatternOptions:e.urlPatternOptions});const s=e.history??(typeof window>"u"?Tv({}):Iv({window})),{location:n}=s,a="routes"in e?e.routes:e.config.activities.reduce((i,c)=>({...i,[c.name]:c.route}),{}),r=tb(Vv(a));return()=>{let i=0,c=!1,o=null;const u=[],d=new Kv,{requestHistoryTick:m}=Wv(s),h=f=>d.subscribe(async()=>f());let p=null;const g=()=>{const f=u.map(x=>({activityId:x.getTargetId(),activationCount:x.getActivationCount()}));return(!p||p.length!==f.length||p.some(({activityId:x,activationCount:b})=>f.some(({activityId:v,activationCount:j})=>v===x&&j!==b)))&&(p=f),p},y=f=>{let x=!1;for(const b of u){const v=b.getActivationCount();b.captureStackChange(f),v!==b.getActivationCount()&&(x=!0)}x&&d.publish()};return{key:"plugin-history-sync",wrapStack({stack:f}){const x=l.useSyncExternalStore(h,g,g);return t.jsx($l,{requestHistoryTick:m,children:t.jsx(ti,{routes:r,children:t.jsx(Ev.Provider,{value:x,children:f.render()})})})},overrideInitialEvents({initialContext:f}){const x=gn(s.location.state);if(x)return[{...x.activity.enteredBy,name:"Pushed"},...x.step?.enteredBy.name==="StepPushed"||x.step?.enteredBy.name==="StepReplaced"?[{...x.step.enteredBy,name:"StepPushed"}]:[]];function b(){return f?.req?.path&&typeof f.req.path=="string"?f.req.path:e.useHash?n.hash.split("#")[1]??"/":n.pathname+n.search}const v=b(),j=e.fallbackActivity({initialContext:f}),N=r.find(I=>We(I,e.urlPatternOptions).parse(v)!==null)??r.find(I=>I.activityName===j),M=We(N,e.urlPatternOptions).parse(v)??{},S=Object.entries(M).reduce((I,[E,D])=>(typeof D=="string"&&(I[E]=D),I),{}),k=N.defaultHistory?.(S)??[];return o=new Hv([...k.map(({activityName:I,activityParams:E,additionalSteps:D=[]})=>()=>{const P=[{name:"Pushed",id:dt(),activityId:dt(),activityName:I,activityParams:{...E},activityContext:{path:v,lazyActivityComponentRenderContext:{shouldRenderImmediately:!0}}},...D.map(({stepParams:A,hasZIndex:T})=>({name:"StepPushed",id:dt(),stepId:dt(),stepParams:A,hasZIndex:T}))];for(const A of P)A.name==="Pushed"&&u.push(new Mv(A.activityId,o));return P}),()=>[{name:"Pushed",id:dt(),activityId:dt(),activityName:N.activityName,activityParams:We(N,e.urlPatternOptions).parse(v)??sr(Ql(v).searchParams),activityContext:{path:v,lazyActivityComponentRenderContext:{shouldRenderImmediately:!0}}}]]),o.captureNavigationOpportunity(null).map(I=>({...I,eventDate:Date.now()-nb}))},onInit({actions:{getStack:f,dispatchEvent:x,push:b,stepPush:v}}){const j=f(),N=j.activities[0],w=r.find(I=>I.activityName===N.name),M=We(w,e.urlPatternOptions),S=po(N.steps);m(()=>{c=!0,Ma({history:s,pathname:M.fill(N.params),state:{activity:N,step:S},useHash:e.useHash})});const k=I=>{if(c){c=!1;return}const E=gn(I.location.state);if(!E)return;const D=E.activity,P=E.activity.id,A=E.step,{activities:T}=f(),C=T.find(K=>K.isActive);if(!C)return;const B=po(C.steps),_=T.find(K=>K.id===P),R=C.steps.find(K=>K.id===A?.id),L=()=>C.id>P,W=()=>C.id<P,J=()=>C.id===P,Z=()=>J()?!!(!A||B&&B.id>A.id):!1,q=()=>J()?!!(!B||A&&B.id<A.id):!1;if(L()&&(x("Popped",{}),!_&&(i+=1,b({...D.enteredBy}),A?.enteredBy.name==="StepPushed"||A?.enteredBy.name==="StepReplaced"))){const{enteredBy:K}=A;i+=1,v({...K})}if(Z()){if(!R&&A&&(A?.enteredBy.name==="StepPushed"||A?.enteredBy.name==="StepReplaced")){const{enteredBy:K}=A;i+=1,v({...K})}x("StepPopped",{})}if(W()&&(i+=1,b({activityId:D.id,activityName:D.name,activityParams:D.params})),q()){if(!A)return;i+=1,v({stepId:A.id,stepParams:A.params})}};s.listen(k),o?.captureNavigationOpportunity(j).forEach(I=>I.name==="Pushed"?b(I):v(I)),y(j)},onPushed({effect:{activity:f}}){if(i){i-=1;return}const x=r.find(v=>v.activityName===f.name),b=We(x,e.urlPatternOptions);m(()=>{c=!0,ho({history:s,pathname:b.fill(f.params),state:{activity:f},useHash:e.useHash})})},onStepPushed({effect:{activity:f,step:x}}){if(i){i-=1;return}const b=r.find(j=>j.activityName===f.name),v=We(b,e.urlPatternOptions);m(()=>{c=!0,ho({history:s,pathname:v.fill(f.params),state:{activity:f,step:x},useHash:e.useHash})})},onReplaced({effect:{activity:f}}){if(!f.isActive)return;const x=r.find(v=>v.activityName===f.name),b=We(x,e.urlPatternOptions);m(()=>{c=!0,Ma({history:s,pathname:b.fill(f.params),state:{activity:f},useHash:e.useHash})})},onStepReplaced({effect:{activity:f,step:x}}){if(!f.isActive)return;const b=r.find(j=>j.activityName===f.name),v=We(b,e.urlPatternOptions);m(()=>{c=!0,Ma({history:s,pathname:v.fill(f.params),state:{activity:f,step:x},useHash:e.useHash})})},onBeforePush({actionParams:f,actions:{overrideActionParams:x}}){if(!f.activityContext||!("path"in f.activityContext)){const b=r.find(N=>N.activityName===f.activityName),j=We(b,e.urlPatternOptions).fill(f.activityParams);x({...f,activityContext:{...f.activityContext,path:j}})}},onBeforeReplace({actionParams:f,actions:{overrideActionParams:x,getStack:b}}){if(!f.activityContext||!("path"in f.activityContext)){const w=r.find(k=>k.activityName===f.activityName),S=We(w,e.urlPatternOptions).fill(f.activityParams);x({...f,activityContext:{...f.activityContext,path:S}})}const{activities:v}=b(),j=v.filter(w=>w.transitionState==="enter-active"||w.transitionState==="enter-done"),N=j.length>0?j[j.length-1]:null;if(N)for(let w=0;w<N.steps.length-1;w+=1)m(M=>{gn(s.location.state)?M():(c=!0,s.back())}),m(()=>{c=!0,s.back()})},onBeforeStepPop({actions:{getStack:f}}){const{activities:x}=f();(x.find(v=>v.isActive)?.steps.length??0)>1&&m(()=>{c=!0,s.back()})},onBeforePop({actions:{getStack:f}}){const{activities:x}=f(),b=x.find(v=>v.isActive);if(b){const{isRoot:v,steps:j}=b,N=v?0:j.length;for(let w=0;w<N;w+=1)m(M=>{gn(s.location.state)?M():(c=!0,s.back())}),m(()=>{c=!0,s.back()})}},onChanged({actions:{getStack:f,push:x,stepPush:b}}){const v=f();o?.captureNavigationOpportunity(v).forEach(j=>j.name==="Pushed"?x(j):b(j)),y(v)}}}}function Yl(){const{t:e}=F(["settings","common"]),[s,n]=l.useState(!1),a=()=>{n(!0);const r="./";window.location.href=`${r}clear.html`};return t.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-background p-6",children:t.jsxs("div",{className:"flex flex-col items-center gap-6 text-center max-w-sm",children:[t.jsx("div",{className:"bg-destructive/10 flex size-20 items-center justify-center rounded-full",children:t.jsx(ht,{className:"text-destructive size-10"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h1",{className:"text-xl font-bold",children:e("settings:storage.migrationRequired","")}),t.jsx("p",{className:"text-muted-foreground text-sm",children:e("settings:storage.migrationDesc","")})]}),t.jsx("div",{className:"bg-destructive/5 rounded-lg p-4 w-full",children:t.jsxs("ul",{className:"text-destructive space-y-2 text-sm text-left",children:[t.jsxs("li",{children:[" ",e("settings:clearData.item1","")]}),t.jsxs("li",{children:[" ",e("settings:clearData.item2","")]}),t.jsxs("li",{children:[" ",e("settings:clearData.item3","")]})]})}),t.jsxs(H,{variant:"destructive",onClick:a,className:"w-full gap-2",disabled:s,children:[t.jsx(wt,{className:"size-4"}),e("settings:clearData.confirm","")]})]})})}Yl.__docgenInfo={description:`


 Stackflow context  useFlow()`,methods:[],displayName:"MigrationRequiredView"};const rb={all:["balance"],wallet:e=>["balance",e],chain:(e,s)=>["balance",e,s]};function ib(e,s){return da({queryKey:rb.chain(e??"",s??""),queryFn:async()=>!e||!s?[]:(await ye.refreshBalance(e,s),(await Bn(async()=>{const{walletStore:i}=await Promise.resolve().then(()=>Yp);return{walletStore:i}},void 0,import.meta.url)).walletStore.state.wallets.find(i=>i.id===e)?.chainAddresses.find(i=>i.chain===s)?.tokens??[]),enabled:!!e&&!!s,staleTime:30*1e3,gcTime:300*1e3,refetchInterval:60*1e3,refetchIntervalInBackground:!1,refetchOnWindowFocus:!0})}const bo={all:["transactionHistory"],wallet:e=>["transactionHistory",e],filtered:(e,s)=>["transactionHistory",e,s]};function ob(e){return{id:e.id,type:e.type,status:e.status,amount:e.amount,symbol:e.symbol,address:e.address,timestamp:e.timestamp,hash:e.hash,chain:e.chain,fee:e.fee,feeSymbol:e.feeSymbol,blockNumber:e.blockNumber,confirmations:e.confirmations}}function si(e){const[s,n]=l.useState({chain:"all",period:"all"}),a=Qo(),r=da({queryKey:bo.filtered(e??"",s),queryFn:async()=>{if(!e)return[];const c={chain:s.chain??"all",period:s.period??"all",type:void 0,status:void 0};return(await Km.getHistory({walletId:e,filter:c})).map(ob)},enabled:!!e,staleTime:30*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0}),i=async()=>{await a.invalidateQueries({queryKey:bo.wallet(e??"")})};return{transactions:r.data??[],isLoading:r.isLoading,isFetching:r.isFetching,error:r.error?.message,filter:s,setFilter:n,refresh:i}}const cb={all:["addressBalance"],query:(e,s)=>["addressBalance",e,s]};function lb(e,s,n=!0){return da({queryKey:cb.query(e,s),queryFn:async()=>{if(!e||!s)return{balance:null,error:"Missing chain or address"};try{const a=vs(e);if(!a.supportsNativeBalance)return{balance:null,error:`Chain ${e} does not support balance query`};const r=a.getNativeBalance;return r?{balance:await r(s),error:null}:{balance:null,error:`No balance provider for chain: ${e}`}}catch(a){return{balance:null,error:a instanceof Error?a.message:String(a)}}},enabled:n&&!!e&&!!s,staleTime:30*1e3,gcTime:300*1e3})}const db={all:["addressTransactions"],address:(e,s)=>["addressTransactions",e,s]};function ub({chainId:e,address:s,limit:n=20,enabled:a=!0}){return da({queryKey:db.address(e,s),queryFn:async()=>{if(!e||!s)return[];const r=vs(e);if(!r.supportsTransactionHistory)return console.warn(`[useAddressTransactionsQuery] Chain ${e} does not support transaction history`),[];const i=r.getTransactionHistory;return i?i(s,n):[]},enabled:a&&!!e&&!!s.trim(),staleTime:30*1e3,gcTime:300*1e3})}const yo={ethereum:"Ethereum",bitcoin:"Bitcoin",tron:"Tron",binance:"BSC",bfmeta:"BFMeta",ccchain:"CCChain",pmchain:"PMChain",bfchainv2:"BFChain V2",btgmeta:"BTGMeta",biwmeta:"BIWMeta",ethmeta:"ETHMeta",malibu:"Malibu"};function Xl(){const{push:e}=te(),s=Dr(),n=Gt(),a=zr(),{t:r}=F(["home","wallet","common","transaction"]),i=$o(),c=Wc(),o=$c(),u=Kt(),d=Le(),m=d?.id??null,h=Ct(),p=Lc(),g=yo[h]??h,y=Oc();Xo();const[f,x]=l.useState("assets"),{isFetching:b}=ib(d?.id,h),{transactions:v,isLoading:j,setFilter:N}=si(d?.id);l.useEffect(()=>{N(T=>({...T,chain:h}))},[h,N]);const w=l.useCallback(async T=>{await s.write({text:T}),await a.impact("light"),n.show(r("home:wallet.addressCopied"))},[s,a,n,r]),M=l.useCallback(T=>{T!==m&&ye.setCurrentWallet(T),e("ChainSelectorJob",{})},[e,m]),S=l.useCallback(T=>{const C=u.find(B=>B.id===T);C&&e("WalletConfigActivity",{walletId:T,walletName:C.name})},[e,u]),k=l.useCallback(T=>{ye.setCurrentWallet(T)},[]),I=l.useCallback(()=>{e("WalletAddJob",{})},[e]),E=l.useCallback(()=>{e("WalletListJob",{})},[e]),D=l.useCallback(()=>{e("AddressBalanceActivity",{})},[e]),P=l.useCallback(()=>{e("AddressTransactionsActivity",{})},[e]),A=l.useCallback(T=>{T.id&&e("TransactionDetailActivity",{txId:T.id})},[e]);return i?t.jsx(Yl,{}):c?!o||!d?t.jsx(mb,{}):t.jsxs("div",{"data-testid":"wallet-home",className:"flex h-full flex-col overflow-y-auto bg-background",children:[t.jsxs("div",{className:"pt-2 pb-1",children:[t.jsx(km,{wallets:u,currentWalletId:m,selectedChain:h,chainPreferences:p,chainNames:yo,onWalletChange:k,onCopyAddress:w,onOpenChainSelector:M,onOpenSettings:S,onOpenWalletList:E,onAddWallet:I,onOpenAddressBalance:D,onOpenAddressTransactions:P}),t.jsxs("div",{className:"mt-2 flex justify-center gap-8 px-6",children:[t.jsxs("button",{onClick:()=>e("SendActivity",{}),"data-testid":"wallet-home-send-button",className:"group flex flex-col items-center gap-1.5",children:[t.jsx("div",{className:"flex size-12 items-center justify-center rounded-full bg-primary/10 text-primary transition-all active:scale-95 group-hover:bg-primary/20",children:t.jsx(zc,{className:"size-5"})}),t.jsx("span",{className:"text-xs font-medium",children:r("home:wallet.send")})]}),t.jsxs("button",{onClick:()=>e("ReceiveActivity",{}),"data-testid":"wallet-home-receive-button",className:"group flex flex-col items-center gap-1.5",children:[t.jsx("div",{className:"flex size-12 items-center justify-center rounded-full bg-primary/10 text-primary transition-all active:scale-95 group-hover:bg-primary/20",children:t.jsx($p,{className:"size-5"})}),t.jsx("span",{className:"text-xs font-medium",children:r("home:wallet.receive")})]}),t.jsxs("button",{onClick:()=>e("ScannerActivity",{}),"data-testid":"wallet-home-scan-button",className:"group flex flex-col items-center gap-1.5",children:[t.jsx("div",{className:"flex size-12 items-center justify-center rounded-full bg-primary/10 text-primary transition-all active:scale-95 group-hover:bg-primary/20",children:t.jsx(sf,{className:"size-5"})}),t.jsx("span",{className:"text-xs font-medium",children:r("common:a11y.scan")})]})]})]}),t.jsx("div",{className:"flex-1 pt-3",children:t.jsx(Um,{activeTab:f,onTabChange:x,className:"h-full",testIdPrefix:"wallet-home-content-tabs",children:T=>T==="assets"?t.jsx("div",{className:"p-4","data-testid":"wallet-home-assets-panel",children:t.jsx(qm,{tokens:y.map(C=>({symbol:C.symbol,name:C.name,chain:h,balance:C.balance,decimals:C.decimals,fiatValue:C.fiatValue?String(C.fiatValue):void 0,change24h:C.change24h,icon:C.icon})),refreshing:b,onTokenClick:C=>{console.log("Token clicked:",C.symbol)},emptyTitle:r("home:wallet.noAssets"),emptyDescription:r("home:wallet.noAssetsOnChain",{chain:g}),testId:"token-list"})}):t.jsxs("div",{className:"p-4","data-testid":"wallet-home-history-panel",children:[t.jsx(xr,{transactions:v.slice(0,5),loading:j,onTransactionClick:A,emptyTitle:r("transaction:history.emptyTitle"),emptyDescription:r("transaction:history.emptyDesc"),testId:"transaction-list"}),t.jsx("button",{onClick:()=>e("HistoryActivity",{chain:v.length>0?h:"all"}),className:"mt-3 w-full rounded-lg bg-muted/60 py-2.5 text-sm font-medium text-muted-foreground transition-colors hover:bg-muted",children:v.length>0?r("transaction:history.viewAll",{count:v.length}):r("transaction:history.viewAllChains")})]})})}),t.jsx("div",{className:"shrink-0 h-[var(--tab-bar-height)]"})]}):t.jsx("div",{className:"flex h-full items-center justify-center",children:t.jsx(Me,{size:"lg"})})}function mb(){const{push:e}=te(),{t:s}=F("home");return t.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-6 p-6 text-center",children:[t.jsx("div",{className:"bg-primary/10 rounded-full p-6",children:t.jsx(St,{className:"text-primary size-12"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:s("welcome.title")}),t.jsx("p",{className:"text-muted-foreground mt-2",children:s("welcome.subtitle")})]}),t.jsxs("div",{className:"flex w-full max-w-xs flex-col gap-3",children:[t.jsx(et,{variant:"mint",className:"w-full","data-testid":"create-wallet-button",onClick:()=>e("WalletCreateActivity",{}),children:s("welcome.createWallet")}),t.jsx(H,{variant:"outline",className:"w-full","data-testid":"import-wallet-button",onClick:()=>e("OnboardingRecoverActivity",{}),children:s("welcome.importWallet")})]})]})}Xl.__docgenInfo={description:"",methods:[],displayName:"WalletTab"};const fb=vr(["defi","nft","tools","games","social","exchange","other"]),hb=uf([mf(!0),$s({timeout:qa().int().positive().optional()}).passthrough()]),pb=vr(["auto","dark","light"]),xb=vr(["stack","mine"]),Zl=$s({id:ge(),name:ge(),description:ge(),longDescription:ge().optional(),icon:ge(),url:ge(),version:ge(),author:ge().optional(),website:ge().optional(),category:fb.optional(),tags:is(ge()).optional(),permissions:is(ge()).optional(),chains:is(ge()).optional(),screenshots:is(ge()).optional(),minWalletVersion:ge().optional(),publishedAt:ge().optional(),updatedAt:ge().optional(),beta:ff().optional(),officialScore:qa().min(0).max(100).optional(),communityScore:qa().min(0).max(100).optional(),splashScreen:hb.optional(),capsuleTheme:pb.optional(),targetDesktop:xb.optional(),themeColor:ge().optional(),themeColorFrom:ge().optional(),themeColorTo:ge().optional()}).passthrough(),gb=$s({name:ge(),version:ge(),updated:ge(),icon:ge().optional(),search:$s({urlTemplate:ge()}).passthrough().optional(),apps:is(Zl)}).passthrough();$s({version:ge(),data:is(Zl)}).passthrough();const vb="bfm_ecosystem",bb=1,xs="ecosystem_source_payloads";let bn=null,Ts=null;function yb(){if(typeof indexedDB>"u")throw new Error("indexedDB is not available in this environment")}function jb(e){return new Promise((s,n)=>{e.onsuccess=()=>s(e.result),e.onerror=()=>n(e.error??new Error("IndexedDB request failed"))})}function ed(e){return new Promise((s,n)=>{e.oncomplete=()=>s(),e.onerror=()=>n(e.error??new Error("IndexedDB transaction failed")),e.onabort=()=>n(e.error??new Error("IndexedDB transaction aborted"))})}async function td(){if(yb(),bn)return bn;if(Ts)return Ts;Ts=new Promise((e,s)=>{const n=indexedDB.open(vb,bb);n.onupgradeneeded=()=>{const a=n.result;a.objectStoreNames.contains(xs)||a.createObjectStore(xs,{keyPath:"url"})},n.onsuccess=()=>e(n.result),n.onerror=()=>s(n.error??new Error("Failed to open IndexedDB"))});try{return bn=await Ts,bn}finally{Ts=null}}async function Nb(e){const n=(await td()).transaction([xs],"readwrite");n.objectStore(xs).put(e),await ed(n)}async function sd(e){const n=(await td()).transaction([xs],"readonly"),a=n.objectStore(xs),r=await jb(a.get(e));if(await ed(n),!r||typeof r!="object")return null;const i=r;return typeof i.url!="string"||typeof i.lastUpdated!="string"||typeof i.payload!="object"||i.payload===null?null:i}const wb=15,Sb=1440*60*1e3;function Cb(e){return Math.floor(e.getTime()/Sb)}function kb(e=new Date){const s=Cb(e);return wb*(s+1)%100}function jo(e,s=new Date){const n=typeof e.officialScore=="number"?e.officialScore:0,a=typeof e.communityScore=="number"?e.communityScore:0,r=kb(s),i=100-r;return(n*r+a*i)/100}function Ab(e){const s=typeof document<"u"?document.baseURI:"file:///",n=new URL(e,s).toString();return a=>a.startsWith("http://")||a.startsWith("https://")||a.startsWith("data:")?a:new URL(a,n).toString()}const Ib=1e4;let Wt=[];const Rn=[];function nd(){const e=[...Wt];Rn.forEach(s=>s(e))}function Tb(e){return Rn.push(e),()=>{const s=Rn.indexOf(e);s>=0&&Rn.splice(s,1)}}function Eb(e){return/^[a-z0-9]+(?:\.[a-z0-9-]+)+$/i.test(e)}function ad(e,s,n){if(!Eb(e.id))return console.warn(`[Registry] Invalid appId "${e.id}" from source "${s.url}", skipping`),null;const a=Ab(s.url);return{...e,icon:a(e.icon),url:a(e.url),screenshots:e.screenshots?.map(a),splashScreen:e.splashScreen,sourceUrl:s.url,sourceName:s.name,sourceIcon:s.icon??(n.icon?a(n.icon):void 0)}}function Pb(e,s,n=Ib){const a=new AbortController,r=setTimeout(()=>a.abort(),n);return fetch(e,{...s,signal:a.signal}).finally(()=>clearTimeout(r))}async function _b(e,s){const n=await sd(e),a=s?void 0:n?.etag;try{const r=await Pb(e,{method:"GET",headers:{Accept:"application/json",...a!==void 0?{"If-None-Match":a}:{}}});if(r.status===304)return n?.payload??null;if(!r.ok)return console.warn(`[Registry] Failed to fetch source: ${e}`,r.status,r.statusText),n?.payload??null;const i=await r.json(),c=gb.safeParse(i);if(!c.success)return console.warn(`[Registry] Invalid source JSON: ${e}`,c.error),n?.payload??null;const o=c.data,u=r.headers.get("ETag")??void 0;return await Nb({url:e,payload:o,...u!==void 0?{etag:u}:{},lastUpdated:new Date().toISOString()}),o}catch(r){const i=r instanceof Error&&r.name==="AbortError"?"request timeout":r instanceof Error?r.message:String(r);return console.warn(`[Registry] Error fetching source: ${e}`,i),n?.payload??null}}async function rd(){const e=ac.getEnabledSources(Fs.state),s=await Promise.all(e.map(async r=>{const i=await sd(r.url);return{source:r,cached:i}})),n=[],a=new Set;for(const{source:r,cached:i}of s){const c=i?.payload;if(c)for(const o of c.apps??[]){const u=ad(o,r,c);if(u){if(a.has(u.id)){console.warn(`[Registry] Duplicate appId "${u.id}" detected, skipping later entry`);continue}a.add(u.id),n.push(u)}}}Wt=n,nd()}let No="";Fs.subscribe(()=>{const e=JSON.stringify(Fs.state.sources);e!==No&&(No=e,rd())});async function id(e){await rd(),e?.refresh===!0&&ni({force:!1})}async function ni(e){const s=e?.force===!0,n=ac.getEnabledSources(Fs.state),a=await Promise.all(n.map(async c=>{const o=await _b(c.url,s);return o&&ls.updateSourceTimestamp(c.url),{source:c,payload:o}})),r=[],i=new Set;for(const{source:c,payload:o}of a)if(o)for(const u of o.apps??[]){const d=ad(u,c,o);if(d){if(i.has(d.id)){console.warn(`[Registry] Duplicate appId "${d.id}" detected, skipping later entry`);continue}i.add(d.id),r.push(d)}}return Wt=r,nd(),console.log(`[Registry] Loaded ${Wt.length} apps from ${n.length} sources`),[...Wt]}function Mb(){return[...Wt]}function wo(e){return Wt.find(s=>s.id===e)}const od="ecosystem_my_apps",Rb={teleport:"xin.dweb.teleport",forge:"xin.dweb.forge"};function cn(e){return Rb[e]??e}function Ht(){try{const e=localStorage.getItem(od),s=e?JSON.parse(e):[],n=s.map(a=>({...a,appId:cn(a.appId)}));return JSON.stringify(s)!==JSON.stringify(n)&&fa(n),n}catch{return[]}}function fa(e){localStorage.setItem(od,JSON.stringify(e))}function Db(e){return Ht().some(s=>s.appId===cn(e))}function cd(e){e=cn(e);const s=Ht();s.some(n=>n.appId===e)||(s.unshift({appId:e,installedAt:Date.now(),lastUsedAt:Date.now()}),fa(s))}function ld(e){e=cn(e);const s=Ht(),n=s.find(a=>a.appId===e);n&&(n.lastUsedAt=Date.now(),fa(s))}function zb(e){e=cn(e);const s=Ht().filter(n=>n.appId!==e);fa(s)}function dd(){const{push:e}=te(),s=l.useRef(null),[n,a]=l.useState([]),[r,i]=l.useState([]),[c,o]=l.useState(!0);l.useEffect(()=>{const f=Tb(x=>a(x));return id({refresh:!0}).then(()=>{a(Mb()),i(Ht()),o(!1)}),()=>f()},[]),rf();const u=l.useCallback(f=>{e("MiniappDetailActivity",{appId:encodeURIComponent(f.id)})},[e]),d=l.useCallback(f=>{cd(f.id),ld(f.id),i(Ht()),ls.setActiveSubPage("mine"),s.current?.slideTo("mine"),requestAnimationFrame(()=>{rc(f.id,{...f,targetDesktop:"mine"})})},[]),m=l.useCallback(f=>{zb(f),i(Ht())},[]),h=l.useMemo(()=>r.map(f=>({...f,app:n.find(x=>x.id===f.appId)})).filter(f=>!!f.app).map(({app:f,lastUsedAt:x})=>({app:f,lastUsed:x})),[r,n]),p=l.useMemo(()=>n.length===0?[]:[...n].sort((f,x)=>jo(x)-jo(f)).slice(0,2),[n]),g=l.useMemo(()=>{const f=new Set(p.map(x=>x.id));return[...n].filter(x=>!f.has(x.id)).sort((x,b)=>(b.officialScore??0)-(x.officialScore??0)).slice(0,6)},[n,p]),y=l.useMemo(()=>[...n].sort((f,x)=>(x.communityScore??0)-(f.communityScore??0)).slice(0,10),[n]);return c?t.jsx("div",{className:"flex h-full items-center justify-center",children:t.jsx(Me,{size:"lg"})}):t.jsx(hf,{ref:s,showDiscoverPage:!0,showStackPage:"auto",apps:n,myApps:h,featuredApps:p,recommendedApps:g,hotApps:y,onAppOpen:d,onAppDetail:u,onAppRemove:m})}dd.__docgenInfo={description:"",methods:[],displayName:"EcosystemTab"};function _e({icon:e,label:s,value:n,showChevron:a=!0,disabled:r=!1,onClick:i,trailing:c,className:o,testId:u}){const d=i?"button":"div";return t.jsxs(d,{type:i?"button":void 0,onClick:r?void 0:i,disabled:r,"data-testid":u,className:z("bg-background flex w-full items-center gap-3 rounded-xl px-4 py-3.5","transition-colors",i&&!r&&"hover:bg-muted/50 active:bg-muted",r&&"cursor-not-allowed",o),children:[e&&t.jsx("span",{className:"bg-muted text-foreground flex size-8 shrink-0 items-center justify-center rounded-lg",children:e}),t.jsx("span",{className:z("flex-1 text-left text-sm font-medium",r&&"text-muted-foreground"),children:s}),c??t.jsxs(t.Fragment,{children:[n&&t.jsx("span",{className:"text-muted-foreground text-sm",children:n}),a&&i&&t.jsx(Oe,{className:"text-muted-foreground/50 size-5"})]})]})}_e.__docgenInfo={description:"",methods:[],displayName:"SettingsItem",props:{icon:{required:!1,tsType:{name:"union",raw:"ReactNode | undefined",elements:[{name:"ReactNode"},{name:"undefined"}]},description:""},label:{required:!0,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},showChevron:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"",defaultValue:{value:"true",computed:!1}},disabled:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"",defaultValue:{value:"false",computed:!1}},onClick:{required:!1,tsType:{name:"union",raw:"(() => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},trailing:{required:!1,tsType:{name:"union",raw:"ReactNode | undefined",elements:[{name:"ReactNode"},{name:"undefined"}]},description:""},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:" className"},testId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:" ID"}}};function Ps({title:e,children:s,className:n}){return t.jsxs("section",{className:z("space-y-1",n),children:[e&&t.jsx("h3",{className:"mb-2 px-1 text-xs font-medium uppercase text-muted-foreground",children:e}),t.jsx("div",{className:"overflow-hidden rounded-xl bg-card shadow-sm",children:s})]})}Ps.__docgenInfo={description:"",methods:[],displayName:"SettingsSection",props:{title:{required:!1,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},className:{required:!1,tsType:{name:"string"},description:" className"}}};const Bb=[{value:"system",icon:Cp},{value:"light",icon:Gp},{value:"dark",icon:Mp}];function ud({open:e,onOpenChange:s}){const{t:n}=F("settings"),a=hr(),r=i=>{Qs.setTheme(i),s(!1)};return t.jsx(Bt,{open:e,onOpenChange:s,children:t.jsxs(Lt,{side:"bottom",className:"rounded-t-2xl",children:[t.jsx(Ot,{children:t.jsx(Ft,{children:n("appearance.title")})}),t.jsx("div",{className:"mt-4 space-y-2",children:Bb.map(({value:i,icon:c})=>t.jsxs("button",{onClick:()=>r(i),className:z("flex w-full items-center gap-3 rounded-xl p-4 transition-colors",a===i?"bg-primary/10 text-primary":"hover:bg-muted"),children:[t.jsx(c,{size:24}),t.jsx("span",{className:"flex-1 text-left font-medium",children:n(`appearance.${i}`)}),a===i&&t.jsx(Se,{size:20})]},i))})]})})}ud.__docgenInfo={description:"",methods:[],displayName:"AppearanceSheet",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""}}};async function Lb(e,s){return{amount:(await nc(e).transaction.estimateFee({from:s,to:s,amount:tt.fromRaw("1",e.decimals,e.symbol)})).standard.amount,symbol:e.symbol}}async function Ob(e,s){const a=await nc(e).asset.getNativeBalance(s);return{assetType:a.symbol,name:e.name,amount:a.amount,decimals:a.amount.decimals}}async function So({chainConfig:e,walletId:s,password:n,fromAddress:a,toAddress:r,amount:i,twoStepSecret:c}){let o;try{o=await lr.getMnemonic(s,n)}catch(m){return m instanceof dr&&m.code===ur.DECRYPTION_FAILED?{status:"password"}:{status:"error",message:m instanceof Error?m.message:""}}if(!i.isPositive())return{status:"error",message:""};const u=e.api?.url,d=e.api?.path??e.id;if(!u)return{status:"error",message:"API URL "};try{console.log("[submitBioforestTransfer] Starting transfer:",{apiUrl:u,apiPath:d,fromAddress:a,toAddress:r,amount:i.toRawString()});const m=await gr(u,d,a);if(console.log("[submitBioforestTransfer] Address info:",{hasSecondPubKey:!!m.secondPublicKey}),m.secondPublicKey&&!c)return console.log("[submitBioforestTransfer] Pay password required"),{status:"password_required",secondPublicKey:m.secondPublicKey};if(c&&m.secondPublicKey){console.log("[submitBioforestTransfer] Verifying pay password...");const g=await Zm(e.id,o,c,m.secondPublicKey);if(console.log("[submitBioforestTransfer] Pay password verification result:",g),!g)return{status:"error",message:""}}console.log("[submitBioforestTransfer] Creating transaction...");const h=await ef({rpcUrl:u,chainId:e.id,apiPath:d,mainSecret:o,paySecret:c,from:a,to:r,amount:i.toRawString(),assetType:e.symbol}),p=h.signature;return console.log("[submitBioforestTransfer] Transaction created:",p?.slice(0,20)),console.log("[submitBioforestTransfer] Broadcasting..."),await tf(u,d,h).catch(g=>{console.warn("[submitBioforestTransfer] Broadcast warning (may still succeed):",g.message)}),console.log("[submitBioforestTransfer] SUCCESS! txHash:",p),{status:"ok",txHash:p}}catch(m){console.error("[submitBioforestTransfer] FAILED:",m);const h=m instanceof Error?m.message:String(m);return h.includes("insufficient")||h.includes("")?{status:"error",message:""}:h.includes("fee")||h.includes("")?{status:"error",message:""}:{status:"error",message:h||""}}}async function Fb({chainConfig:e,walletId:s,password:n,fromAddress:a,newTwoStepSecret:r}){let i;try{i=await lr.getMnemonic(s,n)}catch(u){return u instanceof dr&&u.code===ur.DECRYPTION_FAILED?{status:"password"}:{status:"error",message:u instanceof Error?u.message:""}}const c=e.api?.url,o=e.api?.path??e.id;if(!c)return{status:"error",message:"API URL "};try{if((await gr(c,o,a)).secondPublicKey)return{status:"already_set"};console.log("[submitSetTwoStepSecret] Creating signature transaction...");const d=await Xm({rpcUrl:c,chainId:e.id,apiPath:o,mainSecret:i,newPaySecret:r});return console.log("[submitSetTwoStepSecret] Pay password set successfully:",d.txHash),{status:"ok",txHash:d.txHash}}catch(u){console.error("[submitSetTwoStepSecret] Failed to set pay password:",u);const d=u instanceof Error?u.message:String(u);return d.includes("fee")||d.includes("")?{status:"error",message:""}:{status:"error",message:d||""}}}async function $b(e){const s=e.api?.url,n=e.api?.path??e.id;if(!s)return null;try{const a=await Ym(s,n,e.id);return{amount:tt.fromRaw(a,e.decimals,e.symbol),symbol:e.symbol}}catch(a){return console.error("[getSetTwoStepSecretFee] Failed to get fee:",a),null}}async function Wb(e,s){const n=e.api?.url,a=e.api?.path??e.id;if(!n)return!1;try{return!!(await gr(n,a,s)).secondPublicKey}catch{return!1}}const ve=xv,md=yv;function Vn({title:e,children:s,className:n}){return t.jsxs("div",{className:z("bg-background rounded-t-2xl",n),children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),e&&t.jsx("div",{className:"border-b border-border px-4 pb-4",children:t.jsx("h2",{className:"text-center text-lg font-semibold",children:e})}),s,t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})}Vn.__docgenInfo={description:"Standard sheet content wrapper with handle, title, and safe area",methods:[],displayName:"SheetContent",props:{title:{required:!1,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};const Hb={ethereum:"Ethereum",bitcoin:"Bitcoin",tron:"Tron",binance:"BSC",bfmeta:"BFMeta",ccchain:"CCChain",pmchain:"PMChain",bfchainv2:"BFChain V2",btgmeta:"BTGMeta",biwmeta:"BIWMeta",ethmeta:"ETHMeta",malibu:"Malibu"};function qb(e,s=10,n=8){return e.length<=s+n+3?e:`${e.slice(0,s)}...${e.slice(-n)}`}const fd=()=>{const{t:e}=F(["home","common"]),{pop:s}=te(),n=Le(),a=Ct(),r=Fc(),i=c=>{ye.setSelectedChain(c),s()};return t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),t.jsx("div",{className:"border-b border-border px-4 pb-4",children:t.jsx("h2",{className:"text-center text-lg font-semibold",children:e("home:wallet.selectNetwork")})}),t.jsx("div",{"data-testid":"chain-sheet",className:"max-h-[60vh] space-y-2 overflow-y-auto p-4",children:r.map(c=>{const o=n?.chainAddresses.find(u=>u.chain===c);return t.jsxs("button",{"data-testid":`chain-option-${c}`,onClick:()=>i(c),className:`flex w-full items-center gap-3 rounded-xl p-4 transition-colors ${c===a?"bg-primary/10 ring-1 ring-primary":"bg-muted/50 hover:bg-muted"}`,children:[t.jsx(ra,{chain:c,size:"md"}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("div",{className:"font-medium",children:Hb[c]??c}),t.jsx("div",{className:"font-mono text-xs text-muted-foreground",children:o?.address?qb(o.address):"---"})]}),c===a&&t.jsx(Se,{className:"size-5 text-primary"})]},c)})}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})};fd.__docgenInfo={description:"",methods:[],displayName:"ChainSelectorJob"};const Co={"/":"MainTabsActivity","/wallet/list":"WalletListActivity","/wallet/create":"WalletCreateActivity","/send":"SendActivity","/receive":"ReceiveActivity","/settings":"SettingsActivity","/settings/language":"SettingsLanguageActivity","/settings/currency":"SettingsCurrencyActivity","/settings/chains":"SettingsChainsActivity","/settings/mnemonic":"SettingsMnemonicActivity","/settings/wallet-lock":"SettingsWalletLockActivity","/settings/wallet-chains":"SettingsWalletChainsActivity","/settings/storage":"SettingsStorageActivity","/history":"HistoryActivity","/scanner":"ScannerActivity","/onboarding/recover":"OnboardingRecoverActivity","/address-book":"AddressBookActivity","/notifications":"NotificationsActivity","/staking":"StakingActivity","/welcome":"WelcomeActivity"},Ub=[{pattern:/^\/wallet\/([^/]+)$/,activity:"WalletConfigActivity",paramExtractor:e=>({walletId:e[1]??""})},{pattern:/^\/transaction\/([^/]+)$/,activity:"TransactionDetailActivity",paramExtractor:e=>({txId:e[1]??""})},{pattern:/^\/authorize\/address\/([^/]+)$/,activity:"AuthorizeAddressActivity",paramExtractor:e=>({id:e[1]??""})},{pattern:/^\/authorize\/signature\/([^/]+)$/,activity:"AuthorizeSignatureActivity",paramExtractor:e=>({id:e[1]??""})},{pattern:/^\/token\/([^/]+)$/,activity:"TokenDetailActivity",paramExtractor:e=>({tokenId:e[1]??""})}];function Vb(e){if(Co[e])return{activity:Co[e],params:{}};for(const{pattern:s,activity:n,paramExtractor:a}of Ub){const r=e.match(s);if(r)return{activity:n,params:a(r)}}return null}function me(){const e=te();return{navigate:a=>{const r=typeof a=="string"?{to:a}:a,i=Vb(r.to);if(!i){console.warn(`[useNavigation] Unknown route: ${r.to}`);return}const c={...i.params,...r.search??{}};r.replace?e.replace(i.activity,c,{animate:!0}):e.push(i.activity,c,{animate:!0})},goBack:()=>{e.pop()}}}const hd=l.createContext({});function pe({params:e,children:s}){return t.jsx(hd.Provider,{value:e,children:s})}function be(){return l.useContext(hd)}pe.__docgenInfo={description:"",methods:[],displayName:"ActivityParamsProvider",props:{params:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"unknown"}],raw:"Record<string, unknown>"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""}}};function Jb(){const{t:e}=F("wallet"),{pop:s}=te(),{walletId:n}=be(),r=Kt().find(d=>d.id===n),[i,c]=l.useState(r?.name??"");l.useEffect(()=>{r&&c(r.name)},[r]);const o=l.useCallback(()=>{if(!r)return;const d=i.trim();d&&(ye.updateWalletName(r.id,d),s())},[r,i,s]);if(!r)return null;const u=i.trim().length>0&&i.trim()!==r.name;return t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),t.jsx("div",{className:"border-b border-border px-4 pb-4",children:t.jsx("h2",{className:"text-center text-lg font-semibold",children:e("editSheet.renameTitle")})}),t.jsxs("div",{className:"space-y-6 p-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"wallet-name",className:"text-sm font-medium",children:e("editSheet.walletName")}),t.jsx("input",{id:"wallet-name",type:"text",value:i,onChange:d=>c(d.target.value),placeholder:e("editSheet.walletNamePlaceholder"),maxLength:20,className:z("w-full rounded-xl border border-border bg-background px-4 py-3","focus:outline-none focus:ring-2 focus:ring-primary")}),t.jsxs("p",{className:"text-right text-xs text-muted-foreground",children:[i.length,"/20"]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:o,disabled:!u,className:z("w-full rounded-full py-3 font-medium text-primary-foreground transition-colors","bg-primary hover:bg-primary/90","disabled:cursor-not-allowed disabled:opacity-50"),children:e("editSheet.save")}),t.jsx("button",{onClick:()=>s(),className:"w-full py-2 text-center text-sm text-muted-foreground hover:text-foreground",children:e("editSheet.cancel")})]})]}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const pd=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(Jb,{})});pd.__docgenInfo={description:"",methods:[],displayName:"WalletRenameJob"};function Kb(){const{t:e}=F("wallet"),{pop:s}=te(),{navigate:n}=me(),{walletId:a}=be(),i=Kt().find(g=>g.id===a),[c,o]=l.useState([]),[u,d]=l.useState(!1),[m,h]=l.useState(!1),p=l.useCallback(async g=>{if(!(!i||g.length<4)){if(!i.encryptedMnemonic){ye.deleteWallet(i.id),n({to:"/"});return}h(!0),d(!1);try{const y=Ut(g);if(!await zt(i.encryptedMnemonic,y)){d(!0),o([]);return}ye.deleteWallet(i.id),n({to:"/"})}catch{d(!0),o([])}finally{h(!1)}}},[i,n]);return i?t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),t.jsx("div",{className:"border-b border-border px-4 pb-4",children:t.jsx("h2",{className:"text-center text-lg font-semibold",children:e("editSheet.deleteTitle")})}),t.jsxs("div",{className:"space-y-6 p-4",children:[t.jsx("p",{className:"text-center text-muted-foreground",children:e("editSheet.deleteWarning",{name:i.name})}),t.jsx(bs,{value:c,onChange:o,onComplete:p,minPoints:4,error:u,disabled:m}),t.jsx("div",{className:"space-y-3",children:t.jsx("button",{onClick:()=>s(),disabled:m,className:"w-full py-2 text-center text-sm text-muted-foreground hover:text-foreground",children:e("editSheet.cancel")})})]}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})}):null}const xd=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(Kb,{})});xd.__docgenInfo={description:"",methods:[],displayName:"WalletDeleteJob"};let Jn=null,ai=null;function Yt(e,s){Jn=e,ai=null}function Gb(){Jn=null,ai=null}function Qb(){const{t:e}=F("security"),{pop:s}=te(),{title:n,description:a,biometricAvailable:r}=be(),[i,c]=l.useState([]),[o,u]=l.useState(!1),[d,m]=l.useState(!1),h=l.useRef(null),p=l.useRef(null),g=l.useRef(null),y=l.useRef(!1);!y.current&&Jn&&(p.current=Jn,g.current=ai,Gb(),y.current=!0);const f=n??e("patternLock.unlockTitle"),x=r==="true"&&g.current,b=l.useCallback(()=>{h.current&&(clearTimeout(h.current),h.current=null),u(!1)},[]),v=l.useCallback(w=>{o&&w.length>0&&b(),c(w)},[o,b]),j=l.useCallback(async w=>{const M=p.current;if(!(w.length<4||!M)){m(!0),b();try{const S=Ut(w);await M(S)?s():(u(!0),c([]),h.current=setTimeout(()=>{u(!1)},1500))}catch{u(!0),c([]),h.current=setTimeout(()=>{u(!1)},1500)}finally{m(!1)}}},[s,b]),N=l.useCallback(async()=>{const w=g.current;if(w){m(!0),b();try{await w()?s():(u(!0),h.current=setTimeout(()=>{u(!1)},1500))}catch{u(!0),h.current=setTimeout(()=>{u(!1)},1500)}finally{m(!1)}}},[s,b]);return t.jsx(ve,{"data-testid":"wallet-lock-dialog",children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),t.jsxs("div",{className:"px-4 pb-4 text-center",children:[t.jsx("h2",{className:"text-lg font-semibold",children:f}),a&&t.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:a})]}),t.jsx("div",{className:"px-4 pb-4",children:t.jsx(bs,{value:i,onChange:v,onComplete:j,minPoints:4,error:o,disabled:d,"data-testid":"wallet-lock-pattern"})}),t.jsxs("div",{className:"space-y-3 px-4 pb-4",children:[x&&t.jsxs("button",{type:"button",onClick:N,disabled:d,className:z("flex w-full items-center justify-center gap-2 rounded-full border border-border py-3 font-medium transition-colors","hover:bg-muted","disabled:cursor-not-allowed disabled:opacity-50"),children:[t.jsx(Ip,{className:"size-5"}),t.jsx("span",{children:e("walletLock.biometric")})]}),t.jsx("button",{type:"button",onClick:()=>s(),disabled:d,className:"w-full py-2 text-center text-sm text-muted-foreground hover:text-foreground",children:e("walletLock.cancel")})]}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const gd=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(Qb,{})});gd.__docgenInfo={description:"",methods:[],displayName:"WalletLockConfirmJob"};let Yb=null;function Xb(){const{t:e}=F(["security","transaction","common"]),{pop:s}=te(),{title:n,description:a}=be(),[r,i]=l.useState(""),[c,o]=l.useState(),[u,d]=l.useState(!1),m=l.useRef(null);l.useRef(!1).current;const p=n??e("security:twoStepSecret.confirmTitle"),g=a??e("security:twoStepSecret.confirmDesc"),y=l.useCallback(async x=>{x.preventDefault();const b=m.current;if(!(!r.trim()||!b)){d(!0),o(void 0);try{await b(r)?s():o(e("security:twoStepSecret.notMatch"))}catch{o(e("security:twoStepSecret.notMatch"))}finally{d(!1)}}},[r,s,e]),f=r.trim().length>0&&!u;return t.jsx(ve,{"data-testid":"two-step-secret-dialog",children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),t.jsx("div",{className:"border-b border-border px-4 pb-4",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(Xs,{className:"size-5 text-primary"}),t.jsx("h2",{className:"text-center text-lg font-semibold",children:p})]})}),t.jsxs("form",{onSubmit:y,className:"space-y-6 p-4",children:[t.jsx("p",{className:"text-center text-muted-foreground text-sm",children:g}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Ln,{value:r,onChange:x=>i(x.target.value),placeholder:e("security:twoStepSecret.inputPlaceholder"),disabled:u,"aria-describedby":c?"two-step-secret-error":void 0,"data-testid":"two-step-secret-input"}),c&&t.jsxs("div",{id:"two-step-secret-error",className:"flex items-center gap-1.5 text-sm text-destructive",children:[t.jsx(Jt,{className:"size-4"}),t.jsx("span",{children:c})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{type:"submit",disabled:!f,"data-testid":"two-step-secret-confirm-button",className:z("w-full rounded-full py-3 font-medium text-primary-foreground transition-colors","bg-primary hover:bg-primary/90","disabled:cursor-not-allowed disabled:opacity-50"),children:e(u?"security:walletLock.verifying":"common:confirm")}),t.jsx("button",{type:"button",onClick:()=>s(),disabled:u,className:"w-full py-2 text-center text-sm text-muted-foreground hover:text-foreground",children:e("security:walletLock.cancel")})]})]}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const vd=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(Xb,{})});vd.__docgenInfo={description:"",methods:[],displayName:"TwoStepSecretConfirmJob"};function ri({status:e,txHash:s,title:n,description:a,errorMessage:r,checkConfirmed:i,onStatusChange:c,onDone:o,onRetry:u,onViewDetails:d,onShare:m,pollInterval:h=1e4,maxPollAttempts:p=18,children:g}){const{t:y}=F(["transaction","common"]),[f,x]=l.useState(e);l.useEffect(()=>{x(e)},[e]),l.useEffect(()=>{if(f!=="broadcasted"||!i)return;let S=!1,k=0;const I=async()=>{if(!(S||k>=p)){k++,k===1&&(x("confirming"),c?.("confirming"));try{await i()&&!S?(x("confirmed"),c?.("confirmed")):!S&&k<p&&setTimeout(I,h)}catch{!S&&k<p&&setTimeout(I,h)}}},E=setTimeout(I,3e3);return()=>{S=!0,clearTimeout(E)}},[f,i,c,h,p]);const b=()=>{switch(f){case"broadcasting":return n?.broadcasting??y("transaction:txStatus.broadcasting");case"broadcasted":return n?.broadcasted??y("transaction:txStatus.broadcasted");case"confirming":return n?.confirming??y("transaction:txStatus.confirming");case"confirmed":return n?.confirmed??y("transaction:txStatus.confirmed");case"failed":return n?.failed??y("transaction:txStatus.failed")}},v=()=>{if(f==="failed"&&r)return r;switch(f){case"broadcasting":return a?.broadcasting??y("transaction:txStatus.broadcastingDesc");case"broadcasted":return a?.broadcasted??y("transaction:txStatus.broadcastedDesc");case"confirming":return a?.confirming??y("transaction:txStatus.confirmingDesc");case"confirmed":return a?.confirmed??y("transaction:txStatus.confirmedDesc");case"failed":return a?.failed??y("transaction:txStatus.failedDesc")}},j=()=>{switch(f){case"broadcasting":case"confirming":return t.jsx(Ue,{className:"size-8 animate-spin"});case"broadcasted":return t.jsx(Se,{className:"size-8"});case"confirmed":return t.jsx(Se,{className:"size-8"});case"failed":return t.jsx(Jt,{className:"size-8"})}},N=()=>{switch(f){case"broadcasting":case"confirming":return"bg-blue-100 text-blue-600";case"broadcasted":return"bg-blue-100 text-blue-600";case"confirmed":return"bg-green-100 text-green-600";case"failed":return"bg-red-100 text-red-600"}},w=f==="confirmed"||f==="broadcasted"||f==="confirming",M=f==="failed"&&u;return t.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 p-8",children:[t.jsx("div",{className:z("flex size-16 items-center justify-center rounded-full",N()),children:j()}),t.jsx("h2",{className:"text-lg font-semibold",children:b()}),t.jsx("p",{className:"text-center text-sm text-muted-foreground",children:v()}),s&&t.jsxs("p",{className:"text-xs text-muted-foreground font-mono truncate max-w-full px-4",children:[s.slice(0,16),"...",s.slice(-16)]}),g,w&&t.jsxs("div",{className:"flex w-full max-w-xs flex-col gap-2",children:[o&&t.jsx("button",{type:"button",onClick:o,"data-testid":"tx-status-done-button",className:z("w-full rounded-full py-3 font-medium text-primary-foreground transition-colors","bg-primary hover:bg-primary/90"),children:y("common:done")}),t.jsxs("div",{className:"flex gap-2",children:[d&&t.jsx("button",{type:"button",onClick:d,"data-testid":"tx-status-view-details-button",className:"flex-1 rounded-full border border-border py-2 text-sm font-medium transition-colors hover:bg-muted",children:y("transaction:txStatus.viewDetails")}),m&&t.jsx("button",{type:"button",onClick:m,"data-testid":"tx-status-share-button",className:"flex-1 rounded-full border border-border py-2 text-sm font-medium transition-colors hover:bg-muted",children:y("common:share")})]})]}),M&&t.jsx("button",{type:"button",onClick:u,"data-testid":"tx-status-retry-button",className:z("w-full max-w-xs rounded-full py-3 font-medium text-primary-foreground transition-colors","bg-primary hover:bg-primary/90"),children:y("common:retry")})]})}ri.__docgenInfo={description:"",methods:[],displayName:"TxStatusDisplay",props:{status:{required:!0,tsType:{name:"union",raw:'"broadcasting" | "broadcasted" | "confirming" | "confirmed" | "failed"',elements:[{name:"literal",value:'"broadcasting"'},{name:"literal",value:'"broadcasted"'},{name:"literal",value:'"confirming"'},{name:"literal",value:'"confirmed"'},{name:"literal",value:'"failed"'}]},description:""},txHash:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},title:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  broadcasting?: string;
  broadcasted?: string;
  confirming?: string;
  confirmed?: string;
  failed?: string;
}`,signature:{properties:[{key:"broadcasting",value:{name:"string",required:!1}},{key:"broadcasted",value:{name:"string",required:!1}},{key:"confirming",value:{name:"string",required:!1}},{key:"confirmed",value:{name:"string",required:!1}},{key:"failed",value:{name:"string",required:!1}}]}},description:""},description:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  broadcasting?: string;
  broadcasted?: string;
  confirming?: string;
  confirmed?: string;
  failed?: string;
}`,signature:{properties:[{key:"broadcasting",value:{name:"string",required:!1}},{key:"broadcasted",value:{name:"string",required:!1}},{key:"confirming",value:{name:"string",required:!1}},{key:"confirmed",value:{name:"string",required:!1}},{key:"failed",value:{name:"string",required:!1}}]}},description:""},errorMessage:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},checkConfirmed:{required:!1,tsType:{name:"union",raw:"(() => Promise<boolean>) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},onStatusChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(status: TxStatus) => void",signature:{arguments:[{type:{name:"union",raw:'"broadcasting" | "broadcasted" | "confirming" | "confirmed" | "failed"',elements:[{name:"literal",value:'"broadcasting"'},{name:"literal",value:'"broadcasted"'},{name:"literal",value:'"confirming"'},{name:"literal",value:'"confirmed"'},{name:"literal",value:'"failed"'}]},name:"status"}],return:{name:"void"}}},description:""},onDone:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onRetry:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onViewDetails:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onShare:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},pollInterval:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10000",computed:!1}},maxPollAttempts:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"18",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};let zs=null,Kn=null;function bd(e,s){zs=e,Kn=s}function ko(){zs=null,Kn=null}function Zb(){const{t:e}=F(["transaction","common"]),{pop:s}=te();be();const n=l.useRef(zs),a=l.useRef(Kn),r=l.useRef(!1);!r.current&&zs&&(n.current=zs,a.current=Kn,ko(),r.current=!0);const i=n.current,[c,o]=l.useState(i?.currentFee??""),[u,d]=l.useState();l.useEffect(()=>()=>{ko()},[]);const m=l.useCallback(b=>{if(!i)return;const v=parseFloat(b),j=parseFloat(i.minFee);if(isNaN(v)||v<=0)return e("transaction:feeEdit.invalidFee");if(v<j)return e("transaction:feeEdit.belowMinFee",{minFee:i.minFee,symbol:i.symbol})},[i,e]),h=l.useCallback(b=>{const v=b.target.value;(v===""||/^\d*\.?\d*$/.test(v))&&(o(v),d(void 0))},[]),p=l.useCallback(b=>{o(b),d(void 0)},[]),g=l.useCallback(b=>{b.preventDefault();const v=m(c);if(v){d(v);return}a.current?.({fee:c}),s()},[c,m,s]),y=l.useCallback(()=>{s()},[s]);if(!i)return null;const f=[{label:e("transaction:feeEdit.presetMin"),value:i.minFee}],x=i.presets??f;return t.jsx(md,{children:t.jsxs("div",{className:"bg-background rounded-2xl p-4","data-testid":"fee-edit-modal",children:[t.jsx("h2",{className:"mb-4 text-center text-lg font-semibold",children:e("transaction:feeEdit.title")}),t.jsxs("form",{onSubmit:g,className:"space-y-4",children:[t.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 text-sm text-muted-foreground",children:[t.jsxs("p",{children:[e("transaction:feeEdit.currentFee"),": ",i.currentFee," ",i.symbol]}),t.jsxs("p",{children:[e("transaction:feeEdit.minFee"),": ",i.minFee," ",i.symbol]})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(b=>t.jsx("button",{type:"button",onClick:()=>p(b.value),className:z("rounded-full px-3 py-1 text-sm transition-colors",c===b.value?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"),children:b.label},b.value))}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-medium",children:e("transaction:feeEdit.customFee")}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(qe,{type:"text",inputMode:"decimal",value:c,onChange:h,placeholder:i.minFee,className:z(u&&"border-destructive"),"data-testid":"fee-input"}),t.jsx("span",{className:"shrink-0 text-sm text-muted-foreground",children:i.symbol})]}),u&&t.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-destructive",children:[t.jsx(Jt,{className:"size-4"}),t.jsx("span",{children:u})]})]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx(H,{type:"button",variant:"outline",onClick:y,className:"flex-1",children:e("common:cancel")}),t.jsx(H,{type:"submit",className:"flex-1",disabled:!c,children:e("common:confirm")})]})]})]})})}const yd=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(Zb,{})});yd.__docgenInfo={description:"",methods:[],displayName:"FeeEditJob"};let Bs=null,Gn=null,Qn=null,Yn="";function ey(e,s,n){Bs=e,Gn=n??null,s&&(Qn=s.amount,Yn=s.symbol)}function ty(){Bs=null,Gn=null,Qn=null,Yn=""}function sy(){const{t:e}=F(["security","transaction","common"]),{pop:s,push:n}=te(),{chainId:a,chainIcon:r,chainSymbol:i,address:c,chainName:o}=be(),[u,d]=l.useState(""),[m,h]=l.useState(""),[p,g]=l.useState([]),[y,f]=l.useState(!1),[x,b]=l.useState("input"),[v,j]=l.useState(),[N,w]=l.useState(!1),[M,S]=l.useState("idle"),[k,I]=l.useState(),[E,D]=l.useState(null),P=l.useRef(Bs),A=l.useRef(Gn),T=l.useRef({amount:Qn,symbol:Yn}),C=E??T.current.amount?.toDisplayString()??"0";l.useEffect(()=>(Bs&&!P.current&&(P.current=Bs,A.current=Gn,T.current={amount:Qn,symbol:Yn}),()=>{ty()}),[]);const B=l.useCallback(()=>{const L=T.current.amount?.toDisplayString()??"0";bd({currentFee:C,minFee:L,symbol:T.current.symbol},W=>{D(W.fee)}),n("FeeEditJob",{})},[C,n]),_=l.useCallback(()=>{if(j(void 0),x==="input"){if(!u.trim())return;b("confirm")}else if(x==="confirm"){if(u!==m){j(e("security:twoStepSecret.notMatch"));return}b("walletLock")}},[x,u,m,e]),R=l.useCallback(async L=>{const W=P.current;if(L.length<4||!W)return;w(!0),S("broadcasting"),j(void 0),f(!1);const J=Ut(L);try{const Z=await W(u,J);Z.success?(I(Z.txHash),S("broadcasted")):(S("idle"),f(!0),g([]),j(Z.error??e("security:twoStepSecret.setFailed")))}catch{S("idle"),f(!0),g([]),j(e("security:twoStepSecret.setFailed"))}finally{w(!1)}},[u,e]);return M!=="idle"?t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),t.jsx(ri,{status:M,txHash:k,title:{confirmed:e("security:twoStepSecret.txConfirmed")},description:{confirmed:e("security:twoStepSecret.setSuccessDesc")},checkConfirmed:A.current??void 0,onStatusChange:S,onDone:()=>s()}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})}):t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl","data-testid":"set-two-step-secret-dialog",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),t.jsxs("div",{className:"border-b border-border px-4 pb-4",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(Xs,{className:"size-5 text-primary"}),t.jsx("h2",{className:"text-center text-lg font-semibold",children:e("security:twoStepSecret.setTitle")})]}),a&&c?t.jsx("div",{className:"mt-2 flex justify-center",children:t.jsx(Gm,{chainId:a,chainIcon:r,chainSymbol:i,address:c,size:"sm"})}):o?t.jsx("p",{className:"mt-1 text-center text-sm text-muted-foreground",children:o}):null]}),t.jsxs("div",{className:"space-y-6 p-4",children:[T.current.amount&&t.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-muted/50 p-3",children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:e("security:twoStepSecret.feeInfo")}),t.jsx(br,{amount:C,symbol:T.current.symbol,editable:!0,onEdit:B})]}),t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("div",{className:z("size-2 rounded-full",x==="input"?"bg-primary":"bg-muted")}),t.jsx("div",{className:z("size-2 rounded-full",x==="confirm"?"bg-primary":"bg-muted")}),t.jsx("div",{className:z("size-2 rounded-full",x==="walletLock"?"bg-primary":"bg-muted")})]}),x==="input"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-center text-sm text-muted-foreground",children:e("security:twoStepSecret.inputDesc")}),t.jsx(Ln,{value:u,onChange:L=>d(L.target.value),placeholder:e("security:twoStepSecret.inputPlaceholder"),"aria-describedby":v?"two-step-secret-error":void 0,"data-testid":"new-two-step-secret-input"})]}),x==="confirm"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-center text-sm text-muted-foreground",children:e("security:twoStepSecret.confirmDesc")}),t.jsx(Ln,{value:m,onChange:L=>h(L.target.value),placeholder:e("security:twoStepSecret.confirmPlaceholder"),"aria-describedby":v?"two-step-secret-error":void 0,"data-testid":"confirm-two-step-secret-input"})]}),x==="walletLock"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-center text-sm text-muted-foreground",children:e("security:twoStepSecret.walletLockDesc")}),t.jsx(bs,{value:p,onChange:g,onComplete:R,minPoints:4,error:y,disabled:N,"data-testid":"wallet-lock-pattern"})]}),v&&t.jsxs("div",{id:"two-step-secret-error",className:"flex items-center gap-1.5 text-sm text-destructive",children:[t.jsx(Jt,{className:"size-4"}),t.jsx("span",{children:v})]}),t.jsxs("div",{className:"space-y-3",children:[x!=="walletLock"&&t.jsx("button",{type:"button",onClick:_,"data-testid":"set-two-step-secret-next-button",className:z("w-full rounded-full py-3 font-medium text-primary-foreground transition-colors","bg-primary hover:bg-primary/90"),children:e("common:next")}),t.jsx("button",{type:"button",onClick:()=>{x==="input"?s():x==="confirm"?(b("input"),j(void 0)):(b("confirm"),j(void 0),f(!1),g([]))},disabled:N,"data-testid":"set-two-step-secret-cancel-button",className:"w-full py-2 text-center text-sm text-muted-foreground hover:text-foreground",children:e(x==="input"?"common:cancel":"common:back")})]})]}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const jd=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(sy,{})});jd.__docgenInfo={description:"",methods:[],displayName:"SetTwoStepSecretJob"};let nr=null;function ny(){nr=null}const ay=[{value:"english",label:"English"},{value:"zh-Hans",label:""},{value:"zh-Hant",label:""}],ry=[12,15,18,21,24,36];function iy(){const{t:e}=F("onboarding"),{pop:s}=te(),{language:n,length:a}=be(),[r,i]=l.useState({language:n||"english",length:Number(a)||12}),c=d=>{i(m=>({...m,language:d}))},o=d=>{i(m=>({...m,length:d}))},u=()=>{nr&&nr(r),ny(),s()};return t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),t.jsx("div",{className:"border-b border-border px-4 pb-4",children:t.jsx("h2",{className:"text-center text-lg font-semibold",children:e("create.mnemonicOptions.title")})}),t.jsxs("div",{className:"space-y-6 p-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:e("create.mnemonicOptions.language")}),t.jsx("div",{className:"space-y-1",role:"radiogroup",children:ay.map(d=>t.jsxs("button",{type:"button",role:"radio","aria-checked":r.language===d.value,onClick:()=>c(d.value),className:z("flex w-full items-center justify-between rounded-lg px-4 py-3","transition-colors hover:bg-muted/50",r.language===d.value&&"bg-muted"),children:[t.jsx("span",{className:"text-sm",children:d.label}),r.language===d.value&&t.jsx(Se,{className:"size-5 text-primary"})]},d.value))})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:e("create.mnemonicOptions.wordCount")}),t.jsx("div",{className:"grid grid-cols-3 gap-2",role:"radiogroup",children:ry.map(d=>t.jsxs("button",{type:"button",role:"radio","aria-checked":r.length===d,onClick:()=>o(d),className:z("flex items-center justify-center rounded-lg py-3 text-sm font-medium","transition-colors",r.length===d?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"),children:[d," ",e("create.mnemonicOptions.words")]},d))})]}),t.jsx("button",{type:"button",onClick:u,className:z("w-full rounded-full py-3 font-medium text-primary-foreground transition-colors","bg-primary hover:bg-primary/90"),children:e("create.mnemonicOptions.confirm")})]}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const Nd=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(iy,{})});Nd.__docgenInfo={description:"",methods:[],displayName:"MnemonicOptionsJob"};const Ra=3,oy=10;function cy(){const{t:e}=F("common"),{pop:s}=te(),{contactId:n}=be(),a=je(us,E=>E.contacts),r=n?a.find(E=>E.id===n):null,[i,c]=l.useState(""),[o,u]=l.useState([{id:crypto.randomUUID(),label:"",address:""}]),[d,m]=l.useState(""),[h,p]=l.useState(()=>Math.floor(Math.random()*1e4)),[g,y]=l.useState(!1),f=!!r;l.useEffect(()=>{r&&(c(r.name),u(r.addresses.length>0?r.addresses.map(E=>({id:E.id,label:E.label||"",address:E.address})):[{id:crypto.randomUUID(),label:"",address:""}]),m(r.memo??""),y(!1))},[r]);const x=l.useCallback(()=>{p(Math.floor(Math.random()*1e4)),y(!0)},[]),b=o.find(E=>E.address.trim())?.address.trim(),v=!f||g?b?$t(b,h):void 0:r?.avatar||(b?$t(b,h):void 0),j=l.useCallback(()=>{o.length>=Ra||u(E=>[...E,{id:crypto.randomUUID(),label:"",address:""}])},[o.length]),N=l.useCallback(E=>{u(D=>D.length<=1?D:D.filter(P=>P.id!==E))},[]),w=l.useCallback((E,D,P)=>{u(A=>A.map(T=>T.id===E?{...T,[D]:P}:T))},[]),M=l.useCallback(()=>{const E=i.trim(),D=d.trim(),P=o.filter(T=>T.address.trim()).map((T,C)=>({id:T.id,address:T.address.trim(),label:T.label.trim()||void 0,isDefault:C===0}));if(!E||P.length===0)return;const A=!f||g?P[0]?$t(P[0].address,h):void 0:r?.avatar;f&&r?ms.updateContact(r.id,{name:E,avatar:A,addresses:P,memo:D||void 0}):ms.addContact({name:E,addresses:P,avatar:A,memo:D||void 0}),s()},[i,o,d,h,f,r,s]),S=o.some(E=>E.address.trim()),k=i.trim().length>0&&S,I=o.length<Ra;return t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),t.jsx("div",{className:"border-b border-border px-4 pb-4",children:t.jsx("h2",{className:"text-center text-lg font-semibold",children:e(f?"contact.editTitle":"contact.addTitle")})}),t.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:t.jsxs("div",{className:"space-y-4 p-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{type:"button",onClick:x,disabled:!b,className:"group relative shrink-0",title:e("addressBook.changeAvatar"),children:[t.jsx(ia,{src:v,size:56}),b&&t.jsx("div",{className:"bg-background/80 absolute inset-0 flex items-center justify-center rounded-full opacity-0 transition-opacity group-hover:opacity-100",children:t.jsx(en,{className:"text-primary size-5"})})]}),t.jsx("input",{id:"contact-name",type:"text",value:i,onChange:E=>c(E.target.value),placeholder:e("contact.namePlaceholder"),maxLength:20,className:z("flex-1 rounded-xl border border-border bg-background px-4 py-3","focus:outline-none focus:ring-2 focus:ring-primary")})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium",children:e("contact.addresses")}),t.jsxs("span",{className:"text-muted-foreground text-xs",children:[o.length,"/",Ra]})]}),o.map((E,D)=>t.jsxs("div",{className:"space-y-2 rounded-xl border border-border p-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",value:E.label,onChange:P=>w(E.id,"label",P.target.value),placeholder:e("contact.addressLabelPlaceholder"),maxLength:oy,className:z("w-24 shrink-0 rounded-lg border border-border bg-muted/50 px-3 py-2 text-sm","focus:outline-none focus:ring-2 focus:ring-primary")}),o.length>1&&t.jsx("button",{type:"button",onClick:()=>N(E.id),className:"text-muted-foreground hover:text-destructive shrink-0 p-1",children:t.jsx(wt,{className:"size-4"})}),D===0&&t.jsx("span",{className:"bg-primary/10 text-primary rounded px-1.5 py-0.5 text-xs",children:"Default"})]}),t.jsx("input",{type:"text",value:E.address,onChange:P=>w(E.id,"address",P.target.value),placeholder:e("contact.addressPlaceholder"),className:z("w-full rounded-lg border border-border bg-background px-3 py-2 font-mono text-sm","focus:outline-none focus:ring-2 focus:ring-primary")})]},E.id)),I&&t.jsxs("button",{type:"button",onClick:j,className:"flex w-full items-center justify-center gap-2 rounded-xl border border-dashed border-border py-3 text-sm text-muted-foreground hover:border-primary hover:text-primary",children:[t.jsx(St,{className:"size-4"}),e("contact.addAddress")]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{htmlFor:"contact-memo",className:"flex items-center gap-2 text-sm font-medium",children:[t.jsx(jr,{className:"size-4"}),e("contact.memoOptional")]}),t.jsx("textarea",{id:"contact-memo",value:d,onChange:E=>m(E.target.value),placeholder:e("contact.memoPlaceholder"),maxLength:100,rows:2,className:z("w-full resize-none rounded-xl border border-border bg-background px-4 py-3","focus:outline-none focus:ring-2 focus:ring-primary")})]}),t.jsxs("div",{className:"space-y-3 pt-2",children:[t.jsx("button",{onClick:M,disabled:!k,className:z("w-full rounded-full py-3 font-medium text-primary-foreground transition-colors","bg-primary hover:bg-primary/90","disabled:cursor-not-allowed disabled:opacity-50"),children:e(f?"contact.save":"contact.add")}),t.jsx("button",{onClick:()=>s(),className:"w-full py-2 text-center text-sm text-muted-foreground hover:text-foreground",children:e("contact.cancel")})]})]})}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const wd=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(cy,{})});wd.__docgenInfo={description:"",methods:[],displayName:"ContactEditJob"};function ly(e,s=8,n=6){return e.length<=s+n+3?e:`${e.slice(0,s)}...${e.slice(-n)}`}function dy(){const{t:e}=F("common"),{pop:s}=te(),{chainType:n}=be(),a=n,[r,i]=l.useState(""),c=je(us),o=l.useMemo(()=>{let d=c.contacts;return r&&(d=ta.searchContacts(c,r)),d=[...d].sort((m,h)=>h.updatedAt-m.updatedAt),d.map(m=>{const h=m.addresses.map(g=>({...g,isValidForCurrentChain:a?Lf(g.address,a):!0})),p=h.some(g=>g.isValidForCurrentChain);return{contact:m,addresses:h,hasValidAddress:p}})},[c,r,a]),u=(d,m)=>{const h=new CustomEvent("contact-picker-select",{detail:{contact:d,address:m}});window.dispatchEvent(h),s()};return t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),t.jsx("div",{className:"border-border border-b px-4 pb-4",children:t.jsx("h2",{className:"text-center text-lg font-semibold",children:e("contact.selectAddress")})}),t.jsx("div",{className:"border-border border-b p-4",children:t.jsxs("div",{className:"bg-muted/50 flex items-center gap-2 rounded-xl px-3 py-2",children:[t.jsx(sn,{className:"text-muted-foreground size-4"}),t.jsx("input",{type:"text",value:r,onChange:d=>i(d.target.value),placeholder:e("addressBook.searchPlaceholder"),className:"placeholder:text-muted-foreground min-w-0 flex-1 bg-transparent text-sm outline-none"})]})}),t.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:o.length===0?t.jsx("div",{className:"text-muted-foreground py-12 text-center text-sm",children:e(r?"addressBook.noResults":"contact.noContacts")}):t.jsx("div",{className:"divide-border divide-y",children:o.map(({contact:d,addresses:m,hasValidAddress:h})=>t.jsxs("div",{className:z(!h&&"opacity-50"),children:[t.jsxs("div",{className:"flex items-center gap-3 px-4 pt-3 pb-2",children:[t.jsx(ia,{src:d.avatar||(m[0]?.address?$t(m[0].address):void 0),size:40,className:"shrink-0"}),t.jsx("p",{className:"min-w-0 flex-1 truncate font-medium",children:d.name})]}),t.jsx("div",{className:"space-y-1 pb-3 pl-[56px] pr-4",children:m.map(p=>{const g=!p.isValidForCurrentChain,y=p.label;return t.jsxs("button",{onClick:()=>!g&&u(d,p),disabled:g,className:z("flex min-h-[44px] w-full items-center gap-3 rounded-xl px-3 py-2.5 transition-colors",g?"cursor-not-allowed opacity-50":"hover:bg-muted/50 active:bg-muted"),children:[t.jsx("p",{className:z("min-w-0 flex-1 truncate text-left font-mono text-sm",g?"text-muted-foreground/50":"text-foreground"),children:ly(p.address)}),t.jsxs("div",{className:"flex shrink-0 items-center gap-2",children:[y&&t.jsx("span",{className:z("max-w-[5rem] truncate rounded-md bg-muted px-2 py-0.5 text-xs",g?"text-muted-foreground/50":"text-muted-foreground"),children:y}),p.isDefault&&t.jsx("span",{className:"bg-primary/10 text-primary rounded-md px-2 py-0.5 text-xs",children:"Default"})]})]},p.id)})})]},d.id))})}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const Sd=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(dy,{})});Sd.__docgenInfo={description:"",methods:[],displayName:"ContactPickerJob"};const Cd=()=>{const{t:e}=F(["wallet","home"]),{pop:s}=te(),{navigate:n}=me(),a=()=>{s(),n({to:"/wallet/create"})},r=()=>{s(),n({to:"/onboarding/recover"})};return t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),t.jsx("div",{className:"border-b border-border px-4 pb-4",children:t.jsx("h2",{className:"text-center text-lg font-semibold",children:e("wallet:add")})}),t.jsxs("div",{className:"space-y-3 p-4",children:[t.jsxs("button",{onClick:a,className:z("flex w-full items-center gap-4 rounded-xl p-4 transition-colors","bg-muted/50 hover:bg-muted active:bg-muted/80"),children:[t.jsx("div",{className:"flex size-12 items-center justify-center rounded-full bg-primary/10",children:t.jsx(St,{className:"size-6 text-primary"})}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("div",{className:"font-semibold",children:e("home:welcome.createWallet")}),t.jsx("div",{className:"text-sm text-muted-foreground",children:e("wallet:createDesc")})]})]}),t.jsxs("button",{onClick:r,className:z("flex w-full items-center gap-4 rounded-xl p-4 transition-colors","bg-muted/50 hover:bg-muted active:bg-muted/80"),children:[t.jsx("div",{className:"flex size-12 items-center justify-center rounded-full bg-primary/10",children:t.jsx(Nr,{className:"size-6 text-primary"})}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("div",{className:"font-semibold",children:e("home:welcome.importWallet")}),t.jsx("div",{className:"text-sm text-muted-foreground",children:e("wallet:importDesc")})]})]})]}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})};Cd.__docgenInfo={description:"",methods:[],displayName:"WalletAddJob"};const kd=()=>{const{t:e}=F(["wallet","common"]),{pop:s,push:n}=te(),a=Kt(),i=Le()?.id,{getWalletTheme:c}=Xo(),o=Zo(),u=m=>{ye.setCurrentWallet(m),s()},d=()=>{s(),n("WalletAddJob",{})};return t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),t.jsx("div",{className:"border-b border-border px-4 pb-4",children:t.jsx("h2",{className:"text-center text-lg font-semibold",children:e("common:a11y.tabWallet")})}),t.jsx("div",{className:"max-h-[50vh] space-y-2 overflow-y-auto p-4",children:a.map(m=>{const h=m.id===i,p=m.chainAddresses[0]?.address,g=p?`${p.slice(0,6)}...${p.slice(-4)}`:"---",y=c(m.id);return t.jsxs("button",{onClick:()=>u(m.id),className:z("flex w-full items-center gap-3 rounded-xl p-4 transition-all","active:scale-[0.98]",h?"bg-primary/10 ring-2 ring-primary":"bg-muted/50 hover:bg-muted"),children:[t.jsx(Ff,{themeHue:y,size:"md",watermarkIconUrl:o[m.chain]}),t.jsxs("div",{className:"min-w-0 flex-1 text-left",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"truncate font-medium",children:m.name}),h&&t.jsx($f,{className:"size-4 shrink-0 text-primary"})]}),t.jsx("p",{className:"truncate font-mono text-xs text-muted-foreground",children:g})]})]},m.id)})}),t.jsx("div",{className:"border-t border-border p-4",children:t.jsxs("button",{onClick:d,className:z("flex w-full items-center justify-center gap-2 rounded-xl p-4","bg-muted/50 hover:bg-muted active:bg-muted/80 transition-colors"),children:[t.jsx(St,{className:"size-5"}),t.jsx("span",{className:"font-medium",children:e("wallet:add")})]})}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})};kd.__docgenInfo={description:"",methods:[],displayName:"WalletListJob"};let ar=null;function uy(e){ar=e}const Ad=()=>{const{t:e}=F(["onboarding","common"]),{pop:s}=te(),[n,a]=l.useState(!1),r=()=>{s()},i=()=>{n&&(s(),ar?.(),ar=null)};return t.jsx(md,{children:t.jsxs("div",{className:"bg-background mx-4 max-w-sm rounded-2xl p-5",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"rounded-full bg-amber-500/15 p-2",children:t.jsx(ht,{className:"size-5 text-amber-600","aria-hidden":"true"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h2",{className:"text-base font-semibold",children:e("onboarding:securityWarning.title")}),t.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:e("onboarding:securityWarning.message")})]})]}),t.jsxs("label",{className:"mt-4 flex cursor-pointer items-center gap-2 text-sm",children:[t.jsx(lc,{checked:n,onCheckedChange:a}),t.jsx("span",{children:e("onboarding:securityWarning.acknowledge")})]}),t.jsxs("div",{className:"mt-5 flex gap-2",children:[t.jsx(H,{type:"button",variant:"outline",className:"flex-1",onClick:r,children:e("common:cancel")}),t.jsx(H,{type:"button",className:"flex-1",onClick:i,disabled:!n,children:e("common:confirm")})]})]})})};Ad.__docgenInfo={description:"",methods:[],displayName:"SecurityWarningJob"};let Ls=null;function my(e,s){Ls={onConfirm:e,minFee:s?.minFee,onFeeChange:s?.onFeeChange}}function Ao(){Ls=null}function fy(e){return e.length<=16?e:`${e.slice(0,10)}...${e.slice(-6)}`}function hy(){const{t:e}=F("transaction"),{pop:s,push:n}=te(),a=be(),[r,i]=l.useState(!1),[c,o]=l.useState(!1),[u,d]=l.useState(!1),[m,h]=l.useState(null),p=l.useRef(Ls),g=l.useRef(!1);!g.current&&Ls&&(p.current=Ls,Ao(),g.current=!0),l.useEffect(()=>()=>{Ao()},[]);const y=a.feeLoading==="true",f=a.feeFiatValue?parseFloat(a.feeFiatValue):void 0,x=m??a.feeAmount,b=!!p.current?.onFeeChange,v=l.useCallback(async()=>{try{await zn.write({text:a.toAddress}),o(!0),setTimeout(()=>o(!1),2e3)}catch{console.error("Failed to copy address")}},[a.toAddress]),j=l.useCallback(()=>{i(S=>!S)},[]),N=l.useCallback(()=>{const S=p.current;S?.onFeeChange&&(bd({currentFee:x,minFee:S.minFee??a.feeAmount,symbol:a.feeSymbol},k=>{h(k.fee),S.onFeeChange?.(k.fee)}),n("FeeEditJob",{}))},[x,a.feeAmount,a.feeSymbol,n]),w=l.useCallback(async()=>{const S=p.current;if(console.log("[TransferConfirmJob] handleConfirm called, hasCallback:",!!S?.onConfirm),!(!S?.onConfirm||u)){d(!0);try{s(),console.log("[TransferConfirmJob] Executing callback..."),await S.onConfirm(),console.log("[TransferConfirmJob] Callback executed")}finally{d(!1)}}},[u,s]),M=l.useCallback(()=>{s()},[s]);return t.jsx(ve,{"data-testid":"transfer-confirm-sheet",children:t.jsx(Vn,{title:e("confirmSheet.title"),children:t.jsxs("div",{className:"space-y-6 p-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"text-3xl font-bold",children:[a.amount," ",a.symbol]}),a.fiatValue&&t.jsxs("p",{className:"text-muted-foreground mt-1",children:[" $",a.fiatValue]})]}),t.jsxs("div",{className:"bg-muted/30 space-y-4 rounded-xl p-4",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-muted-foreground text-sm",children:e("confirmSheet.toAddress")}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{type:"button",onClick:j,className:"hover:text-primary flex min-w-0 flex-1 items-center gap-1 text-left font-mono text-sm",children:[t.jsx("span",{className:z("min-w-0",r?"break-all":"truncate"),children:r?a.toAddress:fy(a.toAddress)}),r?t.jsx(Pr,{className:"size-4 shrink-0"}):t.jsx(wr,{className:"size-4 shrink-0"})]}),t.jsx("button",{type:"button",onClick:v,className:"text-muted-foreground hover:text-foreground shrink-0 p-1","aria-label":e(c?"confirmSheet.copied":"confirmSheet.copyAddress"),children:c?t.jsx(Se,{className:"size-4 text-green-500"}):t.jsx(Sr,{className:"size-4"})})]})]}),t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsx("p",{className:"text-muted-foreground text-sm",children:e("confirmSheet.networkFee")}),t.jsx(br,{amount:x,symbol:a.feeSymbol,...f!==void 0&&{fiatValue:f},isLoading:y,editable:b,onEdit:N})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{type:"button","data-testid":"cancel-transfer-button",onClick:M,className:"border-border hover:bg-muted flex-1 rounded-full border py-3 font-medium transition-colors",disabled:u,children:e("confirmSheet.cancel")}),t.jsx("button",{type:"button","data-testid":"confirm-transfer-button",onClick:w,disabled:u||y,className:z("flex-1 rounded-full py-3 font-medium text-primary-foreground transition-colors","bg-primary hover:bg-primary/90","disabled:cursor-not-allowed disabled:opacity-50"),children:e(u?"confirmSheet.confirming":"confirmSheet.confirm")})]})]})})})}const Id=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(hy,{})});Id.__docgenInfo={description:"",methods:[],displayName:"TransferConfirmJob"};let Xn=null;function py(e){Xn=e}function xy(){Xn=null}function gy(){const{t:e}=F(["security","transaction","common"]),{pop:s,push:n}=te(),{title:a}=be(),r=Dr(),i=Gt(),[c,o]=l.useState("wallet_lock"),[u,d]=l.useState([]),[m,h]=l.useState(""),[p,g]=l.useState("idle"),[y,f]=l.useState(),[x,b]=l.useState(),[v,j]=l.useState(!1),[N,w]=l.useState(!1),M=l.useRef(null),S=l.useRef(""),k=l.useRef(!1);!k.current&&Xn&&(M.current=Xn,xy(),k.current=!0);const I=c==="wallet_lock"?a??e("security:walletLock.verifyTitle"):e("transaction:sendPage.twoStepSecretTitle"),E=l.useCallback(async T=>{const C=M.current;if(T.length<4||!C)return;w(!0),b(void 0),j(!1);const B=Ut(T);S.current=B;try{const _=await C(B);if(_.status==="ok"){_.txHash&&f(_.txHash),g("broadcasted");return}if(_.status==="wallet_lock_invalid"){j(!0),d([]);return}if(_.status==="two_step_secret_required"){o("two_step_secret"),b(void 0);return}_.status==="error"&&b(_.message??e("security:walletLock.error"))}catch{j(!0),d([])}finally{w(!1)}},[e]),D=l.useCallback(async()=>{const T=M.current;if(!(!m.trim()||!T)){w(!0),b(void 0);try{const C=await T(S.current,m);if(C.status==="ok"){C.txHash&&f(C.txHash),g("broadcasted");return}(C.status==="two_step_secret_invalid"||C.status==="error")&&b(C.message??e("transaction:sendPage.twoStepSecretError"))}catch{b(e("transaction:sendPage.twoStepSecretError"))}finally{w(!1)}}},[m,e]),P=l.useCallback(T=>{T.preventDefault(),c==="two_step_secret"&&D()},[c,D]),A=m.trim().length>0&&!N;return p!=="idle"?t.jsx(ve,{children:t.jsx("div",{"data-testid":"transfer-wallet-lock-dialog",children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),t.jsx(ri,{status:p,txHash:y,title:{broadcasted:e("transaction:sendResult.success"),confirmed:e("transaction:sendResult.success")},description:{broadcasted:e("transaction:txStatus.broadcastedDesc"),confirmed:e("transaction:txStatus.confirmedDesc")},onStatusChange:g,onDone:()=>s(),onViewDetails:()=>{s(),y&&n("TransactionDetailActivity",{txId:y})},onShare:async()=>{y&&(await r.write({text:y}),i.show(e("common:copied")))}}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}):c==="wallet_lock"?t.jsx(ve,{children:t.jsx("div",{"data-testid":"transfer-wallet-lock-dialog",children:t.jsx(Vn,{title:I,children:t.jsxs("div",{className:"p-4",children:[t.jsx(bs,{value:u,onChange:d,onComplete:E,minPoints:4,error:v,disabled:N,"data-testid":"transfer-wallet-lock-pattern"}),t.jsx("button",{type:"button",onClick:()=>s(),disabled:N,className:"mt-4 w-full py-2 text-center text-sm text-muted-foreground hover:text-foreground",children:e("common:cancel")})]})})})}):t.jsx(ve,{children:t.jsx("div",{"data-testid":"transfer-wallet-lock-dialog",children:t.jsx(Vn,{title:I,children:t.jsxs("form",{onSubmit:P,className:"space-y-6 p-4",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary mb-2",children:[t.jsx(Xs,{className:"size-5"}),t.jsx("span",{className:"text-sm",children:e("transaction:sendPage.twoStepSecretDescription")})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Ln,{value:m,onChange:T=>h(T.target.value),placeholder:e("transaction:sendPage.twoStepSecretPlaceholder"),disabled:N,"aria-describedby":x?"two-step-error":void 0,"data-testid":"two-step-secret-input",autoFocus:!0}),m.length>0&&m.length<6&&t.jsx("div",{className:"absolute right-10 top-1/2 -translate-y-1/2",children:t.jsx("span",{className:"text-xs text-amber-500",children:e("security:twoStepSecret.lengthHint",{count:m.length})})})]}),x&&t.jsxs("div",{id:"two-step-error",className:"flex items-center gap-1.5 text-sm text-destructive",children:[t.jsx(Jt,{className:"size-4"}),t.jsx("span",{children:x})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{type:"submit","data-testid":"two-step-confirm-button",disabled:!A,className:z("w-full rounded-full py-3 font-medium text-primary-foreground transition-colors","bg-primary hover:bg-primary/90","disabled:cursor-not-allowed disabled:opacity-50"),children:e(N?"common:verifying":"common:confirm")}),t.jsx("button",{type:"button",onClick:()=>s(),disabled:N,className:"w-full py-2 text-center text-sm text-muted-foreground hover:text-foreground",children:e("common:cancel")})]})]})})})})}const Td=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(gy,{})});Td.__docgenInfo={description:"",methods:[],displayName:"TransferWalletLockJob"};const vy=150;function by(){const{t:e}=F("scanner"),{pop:s}=te(),n=Hc(),{chainType:a,title:r,hint:i}=be(),c=l.useRef(null),o=l.useRef(null),u=l.useRef(null),d=l.useRef(null),m=l.useRef(!1),h=l.useRef(!1),p=l.useRef(!1),[g,y]=l.useState(!1),[f,x]=l.useState(!1),[b,v]=l.useState(null),[j,N]=l.useState(null),w=qf(a),M=l.useCallback(A=>{if(A===j)return;N(A);const T=dc(A),C=w(A,T);if(C===!0){v({type:"success",text:e("scanSuccess")}),"vibrate"in navigator&&navigator.vibrate(100),m.current=!1;const B=Uf();setTimeout(()=>{s(),setTimeout(()=>{B?.({content:A,parsed:T})},100)},300)}else v({type:"error",text:e(C,{defaultValue:C})}),setTimeout(()=>{v(null),N(null)},3e3)},[j,w,e,s]),S=l.useCallback(()=>{if(m.current)return;m.current=!0,o.current||(o.current=document.createElement("canvas"));const A=async()=>{if(!(!m.current||!c.current||!d.current)){try{const T=await d.current.scanFromVideo(c.current,o.current??void 0);T&&M(T.content)}catch(T){console.error("[ScannerJob] Scan error:",T)}m.current&&setTimeout(A,vy)}};A()},[M]),k=l.useCallback(()=>{m.current=!1,u.current&&(u.current.getTracks().forEach(A=>A.stop()),u.current=null),y(!1)},[]),I=l.useCallback(async()=>{if(!p.current){if(p.current=!0,!navigator.mediaDevices?.getUserMedia){console.error("[ScannerJob] mediaDevices not available"),v({type:"error",text:e("error")}),p.current=!1;return}try{try{if(!await n.checkPermission()&&!await n.requestPermission()){v({type:"error",text:e("permissionDenied")}),p.current=!1;return}}catch(T){console.warn("[ScannerJob] Permission check failed, trying direct access:",T)}if(!h.current){p.current=!1;return}const A=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});if(!h.current){A.getTracks().forEach(T=>T.stop()),p.current=!1;return}if(u.current=A,c.current){c.current.srcObject=A;try{await c.current.play(),h.current&&(y(!0),S())}catch(T){if(T instanceof DOMException&&T.name==="AbortError")console.debug("[ScannerJob] Play interrupted, will retry on next mount");else throw T}}}catch(A){if(console.error("[ScannerJob] Camera error:",A),!h.current){p.current=!1;return}A instanceof DOMException?A.name==="NotAllowedError"?v({type:"error",text:e("permissionDenied")}):A.name==="NotFoundError"?v({type:"error",text:e("noCameraFound",{defaultValue:e("error")})}):A.name==="AbortError"||v({type:"error",text:e("error")}):v({type:"error",text:e("error")})}finally{p.current=!1}}},[n,S,e]);l.useEffect(()=>(h.current=!0,d.current=uc({useWorker:!0}),I(),()=>{h.current=!1,k(),d.current?.destroy(),d.current=null}),[]);const E=l.useCallback(()=>{const A=document.createElement("input");A.type="file",A.accept="image/*",A.onchange=async T=>{const C=T.target.files?.[0];if(!(!C||!d.current))try{const B=new Image,_=URL.createObjectURL(C);B.onload=async()=>{URL.revokeObjectURL(_);const R=document.createElement("canvas");R.width=B.width,R.height=B.height;const L=R.getContext("2d");if(!L||!d.current){v({type:"error",text:e("noQrFound")});return}L.drawImage(B,0,0);const W=await d.current.scanFromCanvas(R);W?M(W.content):v({type:"error",text:e("noQrFound")})},B.onerror=()=>{URL.revokeObjectURL(_),v({type:"error",text:e("noQrFound")})},B.src=_}catch{v({type:"error",text:e("noQrFound")})}},A.click()},[M,e]),D=l.useCallback(async()=>{if(u.current){const A=u.current.getVideoTracks()[0];if(A)try{await A.applyConstraints({advanced:[{torch:!f}]}),x(!f)}catch{}}},[f]),P=l.useCallback(()=>{k(),s()},[k,s]);return t.jsx(ve,{children:t.jsxs("div",{className:"flex h-[80vh] flex-col overflow-hidden rounded-t-2xl bg-black",children:[t.jsx("div",{className:"flex justify-center py-2",children:t.jsx("div",{className:"h-1 w-10 rounded-full bg-white/30"})}),t.jsxs("div",{className:"flex items-center justify-between px-4 pb-2",children:[t.jsx(H,{variant:"ghost",size:"icon",onClick:P,className:"text-white hover:bg-white/20","data-testid":"scanner-close-button",children:t.jsx(oa,{className:"size-6"})}),t.jsx("h2",{className:"text-lg font-medium text-white","data-testid":"scanner-title",children:r??e("title")}),t.jsx(H,{variant:"ghost",size:"icon",onClick:D,className:z("text-white hover:bg-white/20",f&&"text-yellow-400"),"data-testid":"scanner-flash-button",children:t.jsx(_c,{className:"size-6"})})]}),t.jsxs("div",{className:"relative flex-1",children:[t.jsx("video",{ref:c,className:z("absolute inset-0 size-full object-cover",!g&&"hidden"),playsInline:!0,muted:!0,"data-testid":"scanner-video"}),!g&&!b&&t.jsx("div",{className:"flex size-full items-center justify-center",children:t.jsx("p",{className:"text-white/60",children:e("initializing")})}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsxs("div",{className:"relative size-64","data-testid":"scanner-viewfinder",children:[t.jsx("div",{className:z("absolute top-0 left-0 size-8 border-t-4 border-l-4",b?.type==="success"?"border-green-500":"border-primary")}),t.jsx("div",{className:z("absolute top-0 right-0 size-8 border-t-4 border-r-4",b?.type==="success"?"border-green-500":"border-primary")}),t.jsx("div",{className:z("absolute bottom-0 left-0 size-8 border-b-4 border-l-4",b?.type==="success"?"border-green-500":"border-primary")}),t.jsx("div",{className:z("absolute right-0 bottom-0 size-8 border-r-4 border-b-4",b?.type==="success"?"border-green-500":"border-primary")}),g&&!b&&t.jsx("div",{className:"animate-scan bg-primary absolute right-2 left-2 h-0.5"})]})}),t.jsx("div",{className:"absolute inset-x-0 bottom-24 px-4 text-center",children:b?t.jsx("div",{className:z("inline-block rounded-lg px-4 py-2",b.type==="error"&&"bg-red-500/80 text-white",b.type==="success"&&"bg-green-500/80 text-white",b.type==="info"&&"bg-black/50 text-white"),"data-testid":"scanner-message",children:b.text}):g?t.jsx("p",{className:"text-white/80","data-testid":"scanner-hint",children:i??(a?e("scanPromptChain",{chain:a}):e("scanPrompt"))}):null})]}),t.jsx("div",{className:"flex justify-center gap-8 bg-black/50 py-6",children:t.jsxs(H,{variant:"ghost",size:"lg",onClick:E,className:"flex flex-col items-center text-white hover:bg-white/20","data-testid":"scanner-gallery-button",children:[t.jsx(Ec,{className:"mb-1 size-6"}),t.jsx("span",{className:"text-xs",children:e("gallery")})]})}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)] bg-black"})]})})}const Ed=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(by,{})});Ed.__docgenInfo={description:"",methods:[],displayName:"ScannerJob"};function yy(){const{t:e}=F("common"),{pop:s}=te(),n=be(),[a,r]=l.useState(n.name||""),[i,c]=l.useState(n.memo||""),[o,u]=l.useState(0),[d,m]=l.useState(!1),[h,p]=l.useState(!1),g=(()=>{try{return JSON.parse(n.addresses||"[]")}catch{return[]}})(),y=l.useCallback(()=>{u(b=>b+1)},[]),f=l.useCallback(async()=>{if(!(!a.trim()||g.length===0)){m(!0);try{const b=n.avatar||(g[0]?.address?$t(g[0].address,o):void 0);ms.addContact({name:a.trim(),addresses:g.map((v,j)=>({id:`addr-${j}`,address:v.address,label:v.label,isDefault:j===0})),memo:i.trim()||void 0,avatar:b}),p(!0),setTimeout(()=>s(),500)}catch(b){console.error("[ContactAddConfirmJob] Save error:",b)}finally{m(!1)}}},[a,i,g,n.avatar,o,s]),x=l.useCallback(()=>{s()},[s]);return t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl pb-[env(safe-area-inset-bottom)]",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),t.jsx("div",{className:"border-border border-b px-4 pb-4",children:t.jsx("h2",{className:"text-center text-lg font-semibold",children:e("addressBook.addContact")})}),t.jsxs("div",{className:"space-y-4 p-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{type:"button",onClick:y,className:"group relative",title:e("addressBook.changeAvatar"),children:[t.jsx(ia,{src:n.avatar||(g[0]?.address?$t(g[0].address,o):void 0),size:48}),!n.avatar&&t.jsx("div",{className:"bg-background/80 absolute inset-0 flex items-center justify-center rounded-full opacity-0 transition-opacity group-hover:opacity-100",children:t.jsx(en,{className:"text-primary size-5"})})]}),t.jsx(qe,{value:a,onChange:b=>r(b.target.value),placeholder:e("addressBook.namePlaceholder"),className:"flex-1"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-muted-foreground text-sm",children:e("addressBook.addresses")}),t.jsx("div",{className:"space-y-2",children:g.map((b,v)=>{const j=Of(b.address),N=b.label||j.chainType?.toUpperCase()||"";return t.jsxs("div",{className:"bg-muted/50 flex items-center gap-3 rounded-lg p-3",children:[t.jsx(Cr,{className:"text-muted-foreground size-5 shrink-0"}),t.jsxs("div",{className:"min-w-0 flex-1",children:[N&&t.jsx("div",{className:"text-muted-foreground text-xs",children:N}),t.jsx("div",{className:"truncate font-mono text-sm",children:b.address})]})]},v)})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-muted-foreground text-sm",children:e("addressBook.memo")}),t.jsx(qe,{value:i,onChange:b=>c(b.target.value),placeholder:e("addressBook.memoPlaceholder")})]})]}),t.jsxs("div",{className:"flex gap-3 p-4",children:[t.jsx(H,{variant:"outline",onClick:x,disabled:d||h,className:"flex-1",children:e("cancel")}),t.jsx(H,{onClick:f,disabled:!a.trim()||g.length===0||d||h,className:z("flex-1",h&&"bg-green-500"),children:h?t.jsxs(t.Fragment,{children:[t.jsx(Se,{className:"mr-1 size-4"}),e("saved")]}):e(d?"saving":"save")})]})]})})}const Pd=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(yy,{})});Pd.__docgenInfo={description:"",methods:[],displayName:"ContactAddConfirmJob"};function jy(){const{t:e}=F("common"),{pop:s}=te(),n=be(),a=l.useRef(null),[r,i]=l.useState(!1),c=l.useMemo(()=>{try{return JSON.parse(n.addresses||"[]")}catch{return[]}},[n.addresses]),o=l.useMemo(()=>Hf({name:n.name,addresses:c,avatar:n.avatar}),[n.name,c,n.avatar]),u=l.useCallback(async()=>{const m=a.current;if(!(!m||r)){i(!0);try{const{snapdom:h}=await Bn(async()=>{const{snapdom:p}=await import("./snapdom-CO8q8LPW.js").then(g=>g.s);return{snapdom:p}},__vite__mapDeps([0,1]),import.meta.url);await h.download(m,{type:"png",filename:`contact-${n.name}.png`,scale:2,quality:1})}catch(h){console.error("Download failed:",h)}finally{i(!1)}}},[n.name,r]),d=l.useCallback(async()=>{const m=a.current;if(!(!m||!navigator.share)){i(!0);try{const{snapdom:h}=await Bn(async()=>{const{snapdom:f}=await import("./snapdom-CO8q8LPW.js").then(x=>x.s);return{snapdom:f}},__vite__mapDeps([0,1]),import.meta.url),g=await(await h(m,{scale:2})).toBlob(),y=new File([g],`contact-${n.name}.png`,{type:"image/png"});await navigator.share({title:e("addressBook.shareContact"),text:`${n.name} - ${c.map(f=>`${f.label||""}: ${f.address}`).join(", ")}`,files:[y]})}catch{}finally{i(!1)}}},[n.name,c,e,r]);return t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl pb-[env(safe-area-inset-bottom)]",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),t.jsxs("div",{className:"flex items-center justify-between border-b px-4 pb-4",children:[t.jsx(H,{variant:"ghost",size:"icon",onClick:()=>s(),children:t.jsx(oa,{className:"size-5"})}),t.jsx("h2",{className:"text-lg font-semibold",children:e("addressBook.shareContact")}),t.jsx("div",{className:"w-10"})]}),t.jsxs("div",{className:"flex flex-col items-center p-6",children:[t.jsx("div",{ref:a,children:t.jsx(Jf,{name:n.name,avatar:n.avatar,addresses:c,qrContent:o})}),t.jsx("p",{className:"text-muted-foreground mt-4 text-center text-sm",children:e("addressBook.scanToAdd")})]}),t.jsxs("div",{className:"flex gap-3 p-4",children:[t.jsxs(H,{variant:"outline",onClick:u,disabled:r,className:"flex-1",children:[r?t.jsx(Ue,{className:"mr-2 size-4 animate-spin"}):t.jsx(Nr,{className:"mr-2 size-4"}),e("download")]}),"share"in navigator&&t.jsxs(H,{onClick:d,disabled:r,className:"flex-1",children:[r?t.jsx(Ue,{className:"mr-2 size-4 animate-spin"}):t.jsx(Mr,{className:"mr-2 size-4"}),e("share")]})]})]})})}const _d=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(jy,{})});_d.__docgenInfo={description:"",methods:[],displayName:"ContactShareJob"};function Ny(){const{t:e}=F(["settings","common"]),{pop:s}=te(),[n,a]=l.useState(!1),r=l.useCallback(()=>{a(!0);const i="./";window.location.href=`${i}clear.html`},[]);return t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),t.jsxs("div",{className:"space-y-6 p-6",children:[t.jsx("div",{className:"flex justify-center",children:t.jsx("div",{className:"bg-destructive/10 flex size-16 items-center justify-center rounded-full",children:t.jsx(ht,{className:"text-destructive size-8"})})}),t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-lg font-semibold",children:e("settings:clearData.title")}),t.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:e("settings:clearData.warning")})]}),t.jsx("div",{className:"bg-destructive/5 rounded-lg p-4",children:t.jsxs("ul",{className:"text-destructive space-y-2 text-sm",children:[t.jsxs("li",{children:[" ",e("settings:clearData.item1")]}),t.jsxs("li",{children:[" ",e("settings:clearData.item2")]}),t.jsxs("li",{children:[" ",e("settings:clearData.item3")]})]})}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(H,{variant:"outline",className:"flex-1",onClick:()=>s(),disabled:n,children:e("common:cancel")}),t.jsx(H,{variant:"destructive",className:"flex-1",onClick:r,disabled:n,children:e("settings:clearData.confirm")})]})]}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const Md=()=>t.jsx(Ny,{});Md.__docgenInfo={description:"",methods:[],displayName:"ClearDataConfirmJob"};function wy(){const{t:e}=F("common"),{pop:s}=te(),{chain:n,exclude:a,appName:r,appIcon:i}=be(),c=je(we),o=Ve.getCurrentWallet(c),u=l.useMemo(()=>{const p=a?.toLowerCase();return c.wallets.map(g=>{const y=n?g.chainAddresses.find(f=>f.chain===n):g.chainAddresses[0];return!y||p&&y.address.toLowerCase()===p?null:{id:g.id,name:g.name,address:y.address,themeHue:g.themeHue,chainIconUrl:void 0}}).filter(g=>g!==null)},[c.wallets,n,a]),d=l.useMemo(()=>{const p=new Map;return c.wallets.forEach(g=>{const y=n?g.chainAddresses.find(f=>f.chain===n):g.chainAddresses[0];y&&p.set(g.id,{wallet:g,chainAddress:y})}),p},[c.wallets,n]),m=p=>{const g=d.get(p);if(!g)return;const y=new CustomEvent("wallet-picker-select",{detail:{address:g.chainAddress.address,chain:g.chainAddress.chain,name:g.wallet.name,publicKey:g.chainAddress.publicKey}});window.dispatchEvent(y),s()},h=()=>{const p=new CustomEvent("wallet-picker-cancel");window.dispatchEvent(p),s()};return t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),t.jsxs("div",{className:"border-border border-b px-4 pb-4",children:[(r||i)&&t.jsx("div",{className:"mx-auto mb-3",children:t.jsx(ic,{src:i,name:r,size:"lg",shadow:"sm"})}),t.jsx("h2",{className:"text-center text-lg font-semibold",children:e("selectWallet","")}),t.jsxs("p",{className:"text-muted-foreground mt-1 text-center text-sm",children:[r||e("unknownDApp"," DApp")," ",e("requestsAccess","")]})]}),t.jsx("div",{className:"max-h-[50vh] overflow-y-auto p-4",children:u.length===0?t.jsx("div",{className:"text-muted-foreground py-12 text-center text-sm",children:n?e("noWalletsForChain"," {{chain}} ",{chain:n}):e("noWallets","")}):t.jsx(Wf,{wallets:u,currentWalletId:o?.id,onSelect:m,showAddButton:!1})}),t.jsx("div",{className:"border-border border-t p-4",children:t.jsx("button",{onClick:h,className:"bg-muted hover:bg-muted/80 w-full rounded-xl py-3 font-medium transition-colors",children:e("cancel","")})}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const Rd=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(wy,{})});Rd.__docgenInfo={description:"",methods:[],displayName:"WalletPickerJob"};function Sy(){const{t:e}=F("common"),{pop:s,push:n}=te(),{message:a,address:r,appName:i,appIcon:c,chainName:o}=be(),u=Le(),[d,m]=l.useState(!1),h=l.useCallback(()=>{d||(Yt(async y=>{m(!0);try{const f=u?.encryptedMnemonic;if(!f)return console.error("[SigningConfirmJob] No encrypted mnemonic found"),!1;const x=`miniapp_sign_${Date.now()}`,v=await new Br(hs,x).handleMessageSign({chainName:o||"bioforest",senderAddress:r,message:a},f,y),j=new CustomEvent("signing-confirm",{detail:{confirmed:!0,signature:v.signature,publicKey:v.publicKey}});return window.dispatchEvent(j),s(),!0}catch(f){return console.error("[SigningConfirmJob] Signing failed:",f),!1}finally{m(!1)}}),n("WalletLockConfirmJob",{title:e("sign","")}))},[d,u,o,r,a,s,n,e]),p=l.useCallback(()=>{const y=new CustomEvent("signing-confirm",{detail:{confirmed:!1}});window.dispatchEvent(y),s()},[s]),g=a.startsWith("0x")&&/^0x[0-9a-fA-F]+$/.test(a);return t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),t.jsxs("div",{className:"border-border border-b px-4 pb-4",children:[t.jsx("div",{className:"mx-auto mb-3 flex size-14 items-center justify-center rounded-2xl bg-primary/10 overflow-hidden",children:c?t.jsx("img",{src:c,alt:i,className:"size-full object-cover"}):t.jsx(Zs,{className:"size-8 text-primary"})}),t.jsx("h2",{className:"text-center text-lg font-semibold",children:e("signMessage","")}),t.jsx("p",{className:"text-muted-foreground mt-1 text-center text-sm",children:i||e("unknownDApp"," DApp")})]}),t.jsxs("div",{className:"space-y-4 p-4",children:[t.jsxs("div",{className:"bg-muted/50 rounded-xl p-3",children:[t.jsx("p",{className:"text-muted-foreground mb-1 text-xs",children:e("signingAddress","")}),t.jsx(Ws,{address:r,copyable:!1,className:"text-sm"})]}),t.jsxs("div",{className:"bg-muted/50 rounded-xl p-3",children:[t.jsx("p",{className:"text-muted-foreground mb-1 text-xs",children:e("message","")}),t.jsx("div",{className:"max-h-40 overflow-y-auto",children:t.jsx("pre",{className:"whitespace-pre-wrap break-all font-mono text-sm",children:a})})]}),g&&t.jsxs("div",{className:"flex items-start gap-2 rounded-xl bg-amber-50 p-3 dark:bg-amber-950/30",children:[t.jsx(ht,{className:"size-5 shrink-0 text-amber-600"}),t.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:e("hexDataWarning","")})]})]}),t.jsxs("div",{className:"flex gap-3 p-4",children:[t.jsx("button",{onClick:p,disabled:d,className:"bg-muted hover:bg-muted/80 disabled:opacity-50 flex-1 rounded-xl py-3 font-medium transition-colors",children:e("cancel","")}),t.jsx("button",{onClick:h,disabled:d,className:z("flex-1 rounded-xl py-3 font-medium transition-colors","bg-primary text-primary-foreground hover:bg-primary/90","disabled:opacity-50 flex items-center justify-center gap-2"),children:d?t.jsxs(t.Fragment,{children:[t.jsx(Ue,{className:"size-4 animate-spin"}),e("signing","...")]}):e("sign","")})]}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const Dd=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(Sy,{})});Dd.__docgenInfo={description:"",methods:[],displayName:"SigningConfirmJob"};const Cy={bio_requestAccounts:{icon:Cr,label:"",description:""},bio_createTransaction:{icon:jr,label:"",description:"/"},bio_signMessage:{icon:In,label:"",description:""},bio_signTypedData:{icon:In,label:"",description:""},bio_signTransaction:{icon:In,label:"",description:""},bio_sendTransaction:{icon:yp,label:"",description:""}};function ky(){const{t:e}=F("common"),{pop:s}=te(),{appName:n,appIcon:a,permissions:r}=be(),i=(()=>{try{return JSON.parse(r)}catch{return[]}})(),c=()=>{const u=new CustomEvent("permission-request",{detail:{approved:!0,permissions:i}});window.dispatchEvent(u),s()},o=()=>{const u=new CustomEvent("permission-request",{detail:{approved:!1}});window.dispatchEvent(u),s()};return t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),t.jsxs("div",{className:"border-border border-b px-4 pb-4",children:[t.jsx("div",{className:"mx-auto mb-3 flex size-14 items-center justify-center rounded-2xl bg-primary/10",children:a?t.jsx("img",{src:a,alt:n,className:"size-10 rounded-xl"}):t.jsx(Zs,{className:"text-primary size-8"})}),t.jsx("h2",{className:"text-center text-lg font-semibold",children:n}),t.jsx("p",{className:"text-muted-foreground mt-1 text-center text-sm",children:e("requestsPermissions","")})]}),t.jsxs("div",{className:"p-4",children:[t.jsx("div",{className:"space-y-3",children:i.map(u=>{const d=Cy[u];if(!d)return null;const m=d.icon;return t.jsxs("div",{className:"bg-muted/50 flex items-center gap-3 rounded-xl p-3",children:[t.jsx("div",{className:"bg-primary/10 flex size-10 shrink-0 items-center justify-center rounded-full",children:t.jsx(m,{className:"text-primary size-5"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"font-medium",children:d.label}),t.jsx("p",{className:"text-muted-foreground text-sm",children:d.description})]})]},u)})}),t.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(fc,{className:"size-4"}),t.jsx("span",{children:e("permissionNote","")})]})]}),t.jsxs("div",{className:"flex gap-3 p-4",children:[t.jsx("button",{onClick:o,className:"bg-muted hover:bg-muted/80 flex-1 rounded-xl py-3 font-medium transition-colors",children:e("reject","")}),t.jsx("button",{onClick:c,className:z("flex-1 rounded-xl py-3 font-medium transition-colors","bg-primary text-primary-foreground hover:bg-primary/90"),children:e("approve","")})]}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const zd=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(ky,{})});zd.__docgenInfo={description:"",methods:[],displayName:"PermissionRequestJob"};function Ay(){const{t:e}=F("common"),{pop:s,push:n}=te(),a=be(),{appName:r,appIcon:i,from:c,to:o,amount:u,chain:d,asset:m}=a,h=Le(),[p,g]=l.useState(!1),y=l.useCallback(()=>{p||(Yt(async b=>{g(!0);try{const v=h?.encryptedMnemonic;if(!v)return console.error("[MiniappTransferConfirmJob] No encrypted mnemonic found"),!1;const j=`miniapp_transfer_${Date.now()}`,N=new Br(hs,j),w={chainName:d,senderAddress:c,receiveAddress:o,balance:u};m&&(w.assetType=m);const S=await N.handleTransferSign(w,v,b),k=new CustomEvent("miniapp-transfer-confirm",{detail:{confirmed:!0,txHash:S}});return window.dispatchEvent(k),s(),!0}catch(v){return console.error("[MiniappTransferConfirmJob] Transfer failed:",v),!1}finally{g(!1)}}),n("WalletLockConfirmJob",{title:e("confirmTransfer","")}))},[p,h,d,c,o,u,m,s,n,e]),f=l.useCallback(()=>{const b=new CustomEvent("miniapp-transfer-confirm",{detail:{confirmed:!1}});window.dispatchEvent(b),s()},[s]),x=m||d.toUpperCase();return t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),t.jsxs("div",{className:"border-border border-b px-4 pb-4",children:[t.jsx("div",{className:"mx-auto mb-3 flex size-14 items-center justify-center rounded-2xl bg-primary/10 overflow-hidden",children:i?t.jsx("img",{src:i,alt:r,className:"size-full object-cover"}):t.jsx(Zs,{className:"size-8 text-primary"})}),t.jsx("h2",{className:"text-center text-lg font-semibold",children:e("confirmTransfer","")}),t.jsxs("p",{className:"text-muted-foreground mt-1 text-center text-sm",children:[r||e("unknownDApp"," DApp")," ",e("requestsTransfer","")]})]}),t.jsxs("div",{className:"space-y-4 p-4",children:[t.jsx("div",{className:"bg-muted/50 rounded-xl p-4 text-center",children:t.jsx(hc,{value:u,symbol:x,size:"xl",weight:"bold",decimals:8})}),t.jsxs("div",{className:"bg-muted/50 rounded-xl p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-muted-foreground text-xs w-10 shrink-0",children:e("from","")}),t.jsx(Ws,{address:c,copyable:!0,className:"flex-1 text-sm"})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx(tn,{className:"size-4 text-muted-foreground"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-muted-foreground text-xs w-10 shrink-0",children:e("to","")}),t.jsx(Ws,{address:o,copyable:!0,className:"flex-1 text-sm"})]})]}),t.jsxs("div",{className:"bg-muted/50 rounded-xl p-3 flex items-center justify-between",children:[t.jsx("span",{className:"text-muted-foreground text-sm",children:e("network","")}),t.jsx("span",{className:"text-sm font-medium",children:d})]}),t.jsxs("div",{className:"flex items-start gap-2 rounded-xl bg-amber-50 p-3 dark:bg-amber-950/30",children:[t.jsx(ht,{className:"size-5 shrink-0 text-amber-600 mt-0.5"}),t.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:e("transferWarning","")})]})]}),t.jsxs("div",{className:"flex gap-3 p-4",children:[t.jsx("button",{onClick:f,disabled:p,className:"bg-muted hover:bg-muted/80 disabled:opacity-50 flex-1 rounded-xl py-3 font-medium transition-colors",children:e("cancel","")}),t.jsx("button",{onClick:y,disabled:p,className:z("flex-1 rounded-xl py-3 font-medium transition-colors","bg-primary text-primary-foreground hover:bg-primary/90","disabled:opacity-50 flex items-center justify-center gap-2"),children:p?t.jsxs(t.Fragment,{children:[t.jsx(Ue,{className:"size-4 animate-spin"}),e("confirming","...")]}):e("confirm","")})]}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const Bd=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(Ay,{})});Bd.__docgenInfo={description:"",methods:[],displayName:"MiniappTransferConfirmJob"};function Iy(e,s){const n=s.startsWith("0x"),a=n?s.toLowerCase():s;for(const r of we.state.wallets)if(r.chainAddresses.find(c=>c.chain!==e?!1:n||c.address.startsWith("0x")?c.address.toLowerCase()===a:c.address===a))return r.id;return null}function Ty(){const{t:e}=F("common"),{pop:s,push:n}=te(),a=be(),{appName:r,appIcon:i,from:c,chain:o,unsignedTx:u}=a,[d,m]=l.useState(!1),h=l.useMemo(()=>{try{return JSON.parse(u)}catch{return null}},[u]),p=l.useMemo(()=>Iy(o,c),[o,c]),g=l.useCallback(()=>{d||h&&p&&(Yt(async x=>{m(!0);try{const b=await of({walletId:p,password:x,from:c,chainId:o,unsignedTx:h}),v=new CustomEvent("miniapp-sign-transaction-confirm",{detail:{confirmed:!0,signedTx:b}});return window.dispatchEvent(v),s(),!0}catch(b){return console.error("[MiniappSignTransactionJob] signTransaction failed:",b),!1}finally{m(!1)}}),n("WalletLockConfirmJob",{title:e("signTransaction","")}))},[o,c,d,s,n,e,h,p]),y=l.useCallback(()=>{const x=new CustomEvent("miniapp-sign-transaction-confirm",{detail:{confirmed:!1}});window.dispatchEvent(x),s()},[s]),f=l.useMemo(()=>{if(!h)return"";try{return JSON.stringify(h.data,null,2)}catch{return String(h.data)}},[h]);return t.jsx(ve,{children:t.jsxs("div",{className:"bg-background rounded-t-2xl",children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),t.jsxs("div",{className:"border-border border-b px-4 pb-4",children:[t.jsx("div",{className:"mx-auto mb-3 flex size-14 items-center justify-center rounded-2xl bg-primary/10 overflow-hidden",children:i?t.jsx("img",{src:i,alt:r,className:"size-full object-cover"}):t.jsx(Zs,{className:"size-8 text-primary"})}),t.jsx("h2",{className:"text-center text-lg font-semibold",children:e("signTransaction","")}),t.jsx("p",{className:"text-muted-foreground mt-1 text-center text-sm",children:r||e("unknownDApp"," DApp")})]}),t.jsxs("div",{className:"space-y-4 p-4",children:[!h&&t.jsx("div",{className:"rounded-xl bg-destructive/10 p-3 text-sm text-destructive",children:e("invalidTransaction","")}),h&&!p&&t.jsx("div",{className:"rounded-xl bg-amber-50 p-3 text-sm text-amber-800 dark:bg-amber-950/30 dark:text-amber-200",children:e("signingAddressNotFound","")}),t.jsxs("div",{className:"bg-muted/50 rounded-xl p-3",children:[t.jsx("p",{className:"text-muted-foreground mb-1 text-xs",children:e("network","")}),t.jsx("p",{className:"text-sm font-medium",children:o})]}),t.jsxs("div",{className:"bg-muted/50 rounded-xl p-3",children:[t.jsx("p",{className:"text-muted-foreground mb-1 text-xs",children:e("signingAddress","")}),t.jsx("p",{className:"text-sm font-mono break-all",children:c})]}),t.jsxs("div",{className:"bg-muted/50 rounded-xl p-3",children:[t.jsx("p",{className:"text-muted-foreground mb-1 text-xs",children:e("transaction","")}),t.jsx("div",{className:"max-h-44 overflow-y-auto",children:t.jsx("pre",{className:"whitespace-pre-wrap break-all font-mono text-xs",children:f})})]}),t.jsxs("div",{className:"flex items-start gap-2 rounded-xl bg-amber-50 p-3 dark:bg-amber-950/30",children:[t.jsx(ht,{className:"size-5 shrink-0 text-amber-600 mt-0.5"}),t.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:e("signTxWarning","")})]})]}),t.jsxs("div",{className:"flex gap-3 p-4",children:[t.jsx("button",{onClick:y,disabled:d,className:"bg-muted hover:bg-muted/80 disabled:opacity-50 flex-1 rounded-xl py-3 font-medium transition-colors",children:e("cancel","")}),t.jsx("button",{onClick:g,disabled:d||!h||!p,className:z("flex-1 rounded-xl py-3 font-medium transition-colors","bg-primary text-primary-foreground hover:bg-primary/90","disabled:opacity-50 flex items-center justify-center gap-2"),children:d?t.jsxs(t.Fragment,{children:[t.jsx(Ue,{className:"size-4 animate-spin"}),e("signing","...")]}):e("sign","")})]}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const Ld=({params:e})=>t.jsx(pe,{params:e,children:t.jsx(Ty,{})});Ld.__docgenInfo={description:"",methods:[],displayName:"MiniappSignTransactionJob"};const Ey={"zh-CN":"","zh-TW":"",en:"English",ja:"",ko:"",ar:""},Py={USD:"USD ($)",CNY:"CNY ()",EUR:"EUR ()",JPY:"JPY ()",KRW:"KRW ()"};function ii(){const{navigate:e}=me(),{push:s}=te(),{t:n}=F(["settings","common","security"]),a=Le(),r=Ys(),i=pr(),c=hr(),[o,u]=l.useState(!1),[d,m]=l.useState("loading");l.useEffect(()=>{async function y(){if(!a){m("unavailable");return}const f=a.chainAddresses.find(x=>x.chain==="bfmeta"||x.chain==="bfm");if(!f){m("unavailable");return}try{const x=Os.getChainById(La.state,"bfmeta");if(!x){m("unavailable");return}const b=await Wb(x,f.address);m(b?"set":"not_set")}catch{m("unavailable")}}y()},[a]);const h=()=>n(`settings:appearance.${c}`),p=()=>{switch(d){case"loading":return"...";case"set":return n("security:twoStepSecret.alreadySet");case"not_set":return n("security:twoStepSecret.notSet");default:return n("settings:notSupported")}},g=async()=>{if(d!=="not_set"||!a)return;const y=a.chainAddresses.find(b=>b.chain==="bfmeta"||b.chain==="bfm");if(!y)return;const f=Os.getChainById(La.state,"bfmeta");if(!f)return;const x=await $b(f);ey(async(b,v)=>{const j=await Fb({chainConfig:f,walletId:a.id,password:v,fromAddress:y.address,newTwoStepSecret:b});return j.status==="ok"?(m("set"),{success:!0,txHash:j.txHash}):j.status==="password"?{success:!1,error:n("security:passwordConfirm.verifying")}:j.status==="already_set"?(m("set"),{success:!1,error:n("security:twoStepSecret.alreadySet")}):{success:!1,error:j.message}},x??void 0,async()=>{const{getAddressInfo:b}=await Bn(async()=>{const{getAddressInfo:N}=await import("./index-DBrPxRsx.js").then(w=>w.j);return{getAddressInfo:N}},__vite__mapDeps([2,3,1,4,5,6,7,8,9,10]),import.meta.url),v=f.api?.url,j=f.api?.path??f.id;if(!v)return!1;try{return!!(await b(v,j,y.address)).secondPublicKey}catch{return!1}}),s("SetTwoStepSecretJob",{chainName:"BioForest Chain"})};return t.jsxs("div",{className:"bg-muted/30 flex h-full flex-col overflow-y-auto",children:[t.jsx(Q,{title:n("common:a11y.tabSettings")}),t.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[a&&t.jsxs("div",{className:"bg-card flex items-center gap-4 rounded-xl p-4 shadow-sm",children:[t.jsx("div",{className:"bg-primary/10 flex size-14 items-center justify-center rounded-full text-2xl",children:a.name.slice(0,1)}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h2",{className:"font-semibold",children:a.name}),t.jsx("p",{className:"text-muted-foreground text-sm",children:n("settings:chainAddressCount",{count:a.chainAddresses.length})})]})]}),t.jsxs(Ps,{title:n("settings:sections.walletManagement"),children:[t.jsx(_e,{icon:t.jsx(Cr,{size:20}),label:n("settings:items.walletManagement"),onClick:()=>e({to:`/wallet/${a?.id??""}`})}),t.jsx("div",{className:"bg-border mx-4 h-px"}),t.jsx(_e,{icon:t.jsx(Dc,{size:20}),label:n("settings:items.walletChains"),onClick:()=>e({to:"/settings/wallet-chains"}),testId:"wallet-chains-button"}),t.jsx("div",{className:"bg-border mx-4 h-px"}),t.jsx(_e,{icon:t.jsx(rp,{size:20}),label:n("settings:items.addressBook"),onClick:()=>e({to:"/address-book"}),testId:"address-book-button"})]}),t.jsxs(Ps,{title:n("settings:sections.security"),children:[t.jsx(_e,{icon:t.jsx(Xs,{size:20}),label:n("settings:items.appLock"),value:n("settings:notSupported"),disabled:!0}),t.jsx("div",{className:"bg-border mx-4 h-px"}),t.jsx(_e,{icon:t.jsx(kr,{size:20}),label:n("settings:items.viewMnemonic"),onClick:()=>e({to:"/settings/mnemonic"})}),t.jsx("div",{className:"bg-border mx-4 h-px"}),t.jsx(_e,{icon:t.jsx(_r,{size:20}),label:n("settings:items.changeWalletLock"),onClick:()=>e({to:"/settings/wallet-lock"})}),t.jsx("div",{className:"bg-border mx-4 h-px"}),t.jsx(_e,{icon:t.jsx(oc,{size:20}),label:n("security:twoStepSecret.setup"),value:p(),onClick:g,disabled:d==="set"||d==="unavailable",testId:"set-pay-password-button"})]}),t.jsxs(Ps,{title:n("settings:sections.preferences"),children:[t.jsx(_e,{icon:t.jsx(Ep,{size:20}),label:n("settings:items.language"),value:Ey[r],onClick:()=>e({to:"/settings/language"})}),t.jsx("div",{className:"bg-border mx-4 h-px"}),t.jsx(_e,{icon:t.jsx(vp,{size:20}),label:n("settings:items.currency"),value:Py[i],onClick:()=>e({to:"/settings/currency"})}),t.jsx("div",{className:"bg-border mx-4 h-px"}),t.jsx(_e,{icon:t.jsx(Bp,{size:20}),label:n("settings:items.appearance"),value:h(),onClick:()=>u(!0)}),t.jsx("div",{className:"bg-border mx-4 h-px"}),t.jsx(_e,{icon:t.jsx(Dp,{size:20}),label:n("settings:items.chainConfig"),onClick:()=>e({to:"/settings/chains"})}),t.jsx("div",{className:"bg-border mx-4 h-px"}),t.jsx(_e,{icon:t.jsx(Bc,{size:20}),label:"",onClick:()=>e({to:"/settings/sources"})})]}),t.jsxs(Ps,{title:n("settings:sections.about"),children:[t.jsx(_e,{icon:t.jsx(Qf,{size:20}),label:n("settings:items.aboutApp"),value:"v1.0.0",onClick:()=>{}}),t.jsx("div",{className:"bg-border mx-4 h-px"}),t.jsx(_e,{icon:t.jsx(Mc,{size:20}),label:n("settings:items.storage"),onClick:()=>e({to:"/settings/storage"}),testId:"storage-button"})]}),t.jsx("div",{className:"h-[var(--tab-bar-height)]"})]}),t.jsx(ud,{open:o,onOpenChange:u})]})}ii.__docgenInfo={description:"",methods:[],displayName:"SettingsPage"};function Od(){return t.jsx(ii,{})}Od.__docgenInfo={description:`SettingsTab - 

 SettingsPage `,methods:[],displayName:"SettingsTab"};const Fd=({params:e})=>{const{push:s}=te(),[n,a]=l.useState(e.tab||"wallet");return l.useEffect(()=>(cf(),pi().setPermissionRequestCallback(async(r,i,c)=>{const o=lf.state.apps.get(r)?.manifest.icon;return new Promise(u=>{const d=window.setTimeout(()=>u(!1),3e4),m=h=>{window.clearTimeout(d);const p=h.detail;u(p?.approved===!0)};window.addEventListener("permission-request",m,{once:!0}),s("PermissionRequestJob",{appName:i,appIcon:o,permissions:JSON.stringify(c)})})}),xi(async r=>{const i=r?.app?.name,c=r?.app?.icon;return new Promise(o=>{const u=window.setTimeout(()=>o(null),3e4),d=()=>{window.clearTimeout(u),window.removeEventListener("wallet-picker-select",m),window.removeEventListener("wallet-picker-cancel",h)},m=p=>{d();const g=p.detail;o({address:g.address,chain:g.chain,name:g.name})},h=()=>{d(),o(null)};window.addEventListener("wallet-picker-select",m),window.addEventListener("wallet-picker-cancel",h),s("WalletPickerJob",{chain:r?.chain,exclude:r?.exclude,...i?{appName:i}:{},...c?{appIcon:c}:{}})})}),gi(()=>{const r=we.state,i=Ve.getCurrentWallet(r);return i?i.chainAddresses.map(c=>({address:c.address,chain:c.chain,name:i.name})):[]}),vi(async r=>new Promise(i=>{const c=window.setTimeout(()=>i(null),6e4),o=u=>{window.clearTimeout(c);const d=u.detail;if(d?.confirmed&&d.signature&&d.publicKey){i({signature:d.signature,publicKey:d.publicKey});return}i(null)};window.addEventListener("signing-confirm",o,{once:!0}),s("SigningConfirmJob",{message:r.message,address:r.address,appName:r.app.name,appIcon:r.app.icon??"",chainName:"bioforest"})})),bi(async r=>new Promise(i=>{const c=window.setTimeout(()=>i(null),6e4),o=u=>{window.clearTimeout(c);const d=u.detail;if(d?.confirmed&&d.txHash){i({txHash:d.txHash});return}i(null)};window.addEventListener("miniapp-transfer-confirm",o,{once:!0}),s("MiniappTransferConfirmJob",{appName:r.app.name,appIcon:r.app.icon??"",from:r.from,to:r.to,amount:r.amount,chain:r.chain,...r.asset?{asset:r.asset}:{}})})),yi(async r=>new Promise(i=>{const c=window.setTimeout(()=>i(null),6e4),o=u=>{window.clearTimeout(c);const d=u.detail;if(d?.confirmed&&d.signedTx){i(d.signedTx);return}i(null)};window.addEventListener("miniapp-sign-transaction-confirm",o,{once:!0}),s("MiniappSignTransactionJob",{appName:r.app.name,appIcon:r.app.icon??"",from:r.from,chain:r.chain,unsignedTx:JSON.stringify(r.unsignedTx)})})),()=>{pi().setPermissionRequestCallback(null),xi(null),gi(null),vi(null),bi(null),yi(null)}),[s]),t.jsx(ce,{children:t.jsx(Wm,{children:t.jsxs("div",{className:"bg-background relative h-dvh",children:[t.jsx(l.Activity,{mode:n==="wallet"?"visible":"hidden",children:t.jsx(Xl,{})}),t.jsx("div",{style:{display:n==="ecosystem"?"contents":"none"},children:t.jsx(dd,{})}),t.jsx(l.Activity,{mode:n==="settings"?"visible":"hidden",children:t.jsx(Od,{})}),t.jsx(Hm,{activeTab:n,onTabChange:a})]})})})};Fd.__docgenInfo={description:"",methods:[],displayName:"MainTabsActivity"};function $d(){const{t:e}=F("wallet"),{navigate:s,goBack:n}=me(),{push:a}=te(),r=je(we,m=>m.wallets),i=je(we,m=>m.currentWalletId),c=l.useCallback(m=>{ye.setCurrentWallet(m)},[]),o=l.useCallback(m=>{s({to:`/wallet/${m}`})},[s]),u=l.useCallback(()=>{a("WalletAddJob",{})},[a]),d=l.useCallback(()=>{n()},[n]);return t.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("list.title"),onBack:d,rightAction:t.jsx("button",{onClick:u,className:z("rounded-full p-2 transition-colors","hover:bg-muted active:bg-muted/80"),"aria-label":e("add"),children:t.jsx(St,{className:"size-5"})})}),t.jsx("div",{className:"flex-1 p-4",children:r.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-12",children:[t.jsx("p",{className:"text-muted-foreground",children:e("list.empty")}),t.jsx("button",{onClick:u,className:z("bg-primary rounded-full px-6 py-2.5 text-sm font-medium text-primary-foreground","hover:bg-primary/90 active:bg-primary/80"),children:e("add")})]}):t.jsx("div",{className:"space-y-3",children:r.map(m=>t.jsx(_y,{wallet:m,isActive:m.id===i,onSelect:()=>c(m.id),onDetail:()=>o(m.id),t:e},m.id))})})]})}function _y({wallet:e,isActive:s,onSelect:n,onDetail:a,t:r}){const i=e.chainAddresses.reduce((c,o)=>c+o.tokens.reduce((u,d)=>u+d.fiatValue,0),0);return t.jsxs("div",{className:z("bg-card rounded-xl p-4 shadow-sm transition-colors",s&&"ring-primary ring-2"),children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:n,className:z("flex size-12 items-center justify-center rounded-full text-lg font-semibold",s?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.name.slice(0,1)}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"truncate font-semibold",children:e.name}),s&&t.jsxs("span",{className:"text-primary flex items-center gap-1 text-xs",children:[t.jsx(Se,{className:"size-3"}),r("list.current")]})]}),t.jsx("p",{className:"text-muted-foreground text-sm",children:r("list.chainAddresses",{count:e.chainAddresses.length})})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"text-right",children:t.jsxs("p",{className:"font-semibold",children:["$",i.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),t.jsx("button",{onClick:a,className:z("rounded-full p-2 transition-colors","hover:bg-muted active:bg-muted/80"),"aria-label":r("list.viewDetail"),children:t.jsx(Oe,{className:"text-muted-foreground size-5"})})]})]}),t.jsx("p",{className:"text-muted-foreground mt-2 truncate font-mono text-xs",children:e.address})]})}$d.__docgenInfo={description:"",methods:[],displayName:"WalletListPage"};const Wd=()=>t.jsx(ce,{children:t.jsx($d,{})});Wd.__docgenInfo={description:"",methods:[],displayName:"WalletListActivity"};function My(){const{t:e}=F("wallet"),{walletId:s,mode:n="default"}=be(),{goBack:a,navigate:r}=me(),c=Kt().find(d=>d.id===s),o=()=>{r({to:"/",replace:!0})};if(!c)return t.jsxs("div",{className:"flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("detail.title"),onBack:a}),t.jsx("div",{className:"flex-1 p-4",children:t.jsx(fs,{variant:"error",children:e("detail.notFound")})})]});const u=e(n==="edit-only"?"detail.editTitle":"detail.title");return t.jsxs("div",{className:"flex min-h-screen flex-col",children:[t.jsx(Q,{title:u,...n!=="edit-only"&&{onBack:a}}),t.jsxs("div",{className:"flex-1 p-4",children:[t.jsx(ha,{mode:n,walletId:s,onEditOnlyComplete:o}),n==="default"&&t.jsx("div",{className:"mt-6",children:t.jsx(fs,{variant:"warning",children:e("detail.securityWarning")})})]})]})}const Hd=({params:e})=>t.jsx(ce,{children:t.jsx(pe,{params:e,children:t.jsx(My,{})})});Hd.__docgenInfo={description:"",methods:[],displayName:"WalletConfigActivity"};const Ry={ethereum:60,bitcoin:0,tron:195,bfmeta:9999};class Dy{hdKey;cache=new Map;constructor(s,n){const a=Wo(s,n);this.hdKey=pm.fromMasterSeed(a)}getKeyMaterial(s,n=0){const a=`${s}:${n}`,r=this.cache.get(a);if(r)return r;const c=`m/44'/${Ry[s]}'/${n}'/0/0`,o=this.hdKey.derive(c);if(!o.privateKey||!o.publicKey)throw new Error(`Key derivation failed for path: ${c}`);const u={privateKey:o.privateKey,publicKey:o.publicKey};return this.cache.set(a,u),u}getEvmKeyMaterial(s=0){return this.getKeyMaterial("ethereum",s)}getBitcoinKeyMaterial(s=0){return this.getKeyMaterial("bitcoin",s)}getTronKeyMaterial(s=0){return this.getKeyMaterial("tron",s)}getBioforestKeyMaterial(s=0){return this.getKeyMaterial("bfmeta",s)}}function zy(e){const n=Ho.getPublicKey(e,!1).slice(1),r=mr(n).slice(-20);return"0x"+ze(r)}function By(e){const s=e.toLowerCase().replace("0x",""),n=new TextEncoder,a=ze(mr(n.encode(s)));let r="0x";for(let i=0;i<s.length;i++)parseInt(a[i],16)>=8?r+=s[i].toUpperCase():r+=s[i];return r}class Ly{chainKind="evm";supports(s){return s.chainKind==="evm"}derive(s){const{keyMaterial:n,config:a}=s,r=zy(n.privateKey),i=By(r);return{chainId:a.id,address:i}}}const Io="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";function Oy(e){const s=[0];for(const a of e){let r=a;for(let i=0;i<s.length;i++)r+=s[i]<<8,s[i]=r%58,r=r/58|0;for(;r>0;)s.push(r%58),r=r/58|0}let n="";for(const a of e)if(a===0)n+=Io[0];else break;for(let a=s.length-1;a>=0;a--)n+=Io[s[a]];return n}function Fy(e,s="mainnet"){const n=Ae(e),a=mc(n),r=s==="mainnet"?0:111,i=new Uint8Array([r,...a]),c=Ae(Ae(i)).slice(0,4),o=new Uint8Array([...i,...c]);return Oy(o)}class $y{chainKind="bitcoin";supports(s){return s.chainKind==="bitcoin"}derive(s){const{keyMaterial:n,config:a}=s,r=Fy(n.publicKey);return{chainId:a.id,address:r}}}const To="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";function Wy(e){const s=[0];for(const a of e){let r=a;for(let i=0;i<s.length;i++)r+=s[i]<<8,s[i]=r%58,r=Math.floor(r/58);for(;r>0;)s.push(r%58),r=Math.floor(r/58)}let n="";for(const a of e)if(a===0)n+=To[0];else break;for(let a=s.length-1;a>=0;a--)n+=To[s[a]];return n}function Hy(e){const n=Ho.getPublicKey(e,!1).slice(1),r=mr(n).slice(-20),i=new Uint8Array([65,...r]),c=Ae(Ae(i)).slice(0,4),o=new Uint8Array([...i,...c]);return Wy(o)}class qy{chainKind="tron";supports(s){return s.chainKind==="tron"}derive(s){const{keyMaterial:n,config:a}=s,r=Hy(n.privateKey);return{chainId:a.id,address:r}}}const Eo="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";function Uy(e){const s=[0];for(const a of e){let r=a;for(let i=0;i<s.length;i++)r+=s[i]<<8,s[i]=r%58,r=Math.floor(r/58);for(;r>0;)s.push(r%58),r=Math.floor(r/58)}let n="";for(const a of e)if(a===0)n+=Eo[0];else break;for(let a=s.length-1;a>=0;a--)n+=Eo[s[a]];return n}function Vy(e){const s=Ae(Ae(e)).slice(0,4),n=new Uint8Array(e.length+s.length);return n.set(e,0),n.set(s,e.length),Uy(n)}function Jy(e,s="b"){const a=new TextEncoder().encode(e),r=Ae(a),i=Kf.getPublicKey(r),c=mc(Ae(i));return s+Vy(c)}class Ky{chainKind="bioforest";supports(s){return s.chainKind==="bioforest"}derive(s){throw new Error("BioForest uses special derivation. Use deriveBioforest() instead.")}deriveBioforest(s){const{mnemonic:n,config:a}=s,r=a.prefix??"b",i=Jy(n,r);return{chainId:a.id,address:i}}}const Gy=new Ly,Qy=new $y,Yy=new qy,Xy=new Ky;function qd(e){const{mnemonic:s,accountIndex:n=0,selectedChainIds:a,chainConfigs:r}=e,i=new Map;for(const g of r)a.includes(g.id)&&i.set(g.id,g);if(i.size===0)return[];const c=new Dy(s),o=new Map,u=[],d=[],m=[],h=[];for(const g of i.values())switch(g.chainKind){case"evm":u.push(g);break;case"bitcoin":d.push(g);break;case"tron":m.push(g);break;case"bioforest":h.push(g);break}if(u.length>0){const g=c.getEvmKeyMaterial(n),y=u[0],f=Gy.derive({keyMaterial:g,config:y,accountIndex:n});for(const x of u)o.set(x.id,f.address)}if(d.length>0){const g=c.getBitcoinKeyMaterial(n);for(const y of d){const f=Qy.derive({keyMaterial:g,config:y,accountIndex:n});o.set(y.id,f.address)}}if(m.length>0){const g=c.getTronKeyMaterial(n);for(const y of m){const f=Yy.derive({keyMaterial:g,config:y,accountIndex:n});o.set(y.id,f.address)}}if(h.length>0)for(const g of h){const y=Xy.deriveBioforest({mnemonic:s,config:g,accountIndex:n});o.set(g.id,y.address)}const p=[];for(const g of a){const y=o.get(g);y&&p.push({chainId:g,address:y})}return p}const Zy=["pattern","mnemonic","verify","chains","theme"];function Ud(){const{goBack:e,navigate:s}=me(),{t:n}=F("onboarding"),a=Gs(),[r,i]=l.useState("pattern"),[c,o]=l.useState(""),[u]=l.useState(()=>{if(typeof window<"u"){const P=window.__E2E_MNEMONIC__;if(typeof P=="string"&&P.trim())return P.trim().split(/\s+/);if(Array.isArray(P)&&P.every(A=>typeof A=="string"))return P}return Zf()}),[d,m]=l.useState(!0),[h,p]=l.useState(!1),[g,y]=l.useState([]),[f,x]=l.useState(!1),[b,v]=l.useState(!1),[j,N]=l.useState(null),w=Zy.indexOf(r)+1;l.useEffect(()=>{!f&&a.length>0&&(y(xc(a)),x(!0))},[a,f]);const M=()=>{r==="mnemonic"?(i("pattern"),o("")):r==="verify"?i("mnemonic"):r==="chains"?i("verify"):r==="theme"||e()},S=P=>{o(P),i("mnemonic")},k=()=>{(h||!d)&&i("verify")},I=()=>{i("chains")},E=async()=>{if(!b){v(!0);try{const P=u.join(" "),T=qd({mnemonic:P,selectedChainIds:g,chainConfigs:a}).map(({chainId:R,address:L})=>({chain:R,address:L,tokens:[]})),C=T[0];if(!C)throw new Error("No chain addresses derived");const B=Ha(C.address),_=await ye.createWallet({name:n("create.defaultWalletName"),keyType:"mnemonic",address:C.address,chain:C.chain,chainAddresses:T,themeHue:B},P,c,B);N(_.id),i("theme")}catch(P){console.error(n("create.createFailed"),P)}finally{v(!1)}}},D=()=>{s({to:"/",replace:!0})};return t.jsxs("div",{className:"flex min-h-screen flex-col",children:[t.jsx(Q,{title:n("create.title"),onBack:M}),t.jsx("div",{className:"px-4 pt-4",children:t.jsx(jt,{total:5,current:w})}),t.jsxs("div",{className:"flex-1 p-4",children:[r==="pattern"&&t.jsx("div",{"data-testid":"pattern-step",children:t.jsx(yr,{onComplete:S,minPoints:4})}),r==="mnemonic"&&t.jsx("div",{"data-testid":"mnemonic-step",children:t.jsx(ej,{mnemonic:u,hidden:d,copied:h,onToggleHidden:()=>m(!d),onCopy:()=>p(!0),onContinue:k})}),r==="verify"&&t.jsx("div",{"data-testid":"verify-step",children:t.jsx(tj,{mnemonic:u,onContinue:I})}),r==="chains"&&t.jsx("div",{"data-testid":"chain-selector-step",children:t.jsx(sj,{chains:a,selectedChains:g,selectionCount:g.length,onSelectionChange:y,onComplete:E,completeLabel:n("create.nextStep"),isSubmitting:b})}),r==="theme"&&j&&t.jsx("div",{"data-testid":"theme-step",children:t.jsx(ha,{mode:"edit-only",walletId:j,onEditOnlyComplete:D})})]})]})}function ej({mnemonic:e,hidden:s,copied:n,onToggleHidden:a,onCopy:r,onContinue:i}){const{t:c}=F("onboarding"),o=n||!s;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx(nn,{icon:_r,variant:"warning",size:"lg",className:"mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-bold",children:c("create.backupMnemonic")}),t.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:c("create.backupHint")})]}),t.jsx(fs,{variant:"warning",children:c("create.mnemonicWarning")}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium",children:c("create.mnemonicTitle")}),t.jsxs("button",{type:"button","data-testid":"toggle-mnemonic-button",onClick:a,className:"text-primary flex items-center gap-1 text-sm",children:[s?t.jsx(kr,{className:"size-4"}):t.jsx(vc,{className:"size-4"}),c(s?"create.mnemonicShow":"create.mnemonicHide")]})]}),t.jsx(pc,{words:e,hidden:s,onCopy:r})]}),t.jsxs(et,{variant:"mint",className:"w-full","data-testid":"mnemonic-backed-up-button",disabled:!o,onClick:i,children:[c(o?"create.mnemonicBackedUp":"create.mnemonicViewFirst"),o&&t.jsx(Oe,{className:"ml-2 size-4"})]})]})}function tj({mnemonic:e,onContinue:s}){const{t:n}=F(["onboarding","common"]),[a]=l.useState(()=>Array.from({length:e.length},(h,p)=>p).sort(()=>Math.random()-.5).slice(0,3).sort((h,p)=>h-p)),[r,i]=l.useState({}),c=a.every(d=>{const m=e[d],h=r[d];return m&&h&&h.toLowerCase()===m.toLowerCase()}),o=(d,m)=>{i(h=>({...h,[d]:m}))},u=d=>{const m=e[d],h=r[d];if(h&&m&&h.toLowerCase()!==m.toLowerCase())return n("create.wordIncorrect")};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx(nn,{icon:ys,variant:"success",size:"lg",className:"mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-bold",children:n("create.verifyTitle")}),t.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:n("create.verifyDesc")})]}),t.jsx("div",{className:"space-y-4",children:a.map(d=>t.jsx(Yf,{label:n("create.wordN",{n:d+1}),error:u(d),children:t.jsx(qe,{"data-testid":`verify-word-input-${d}`,"data-verify-index":d,value:r[d]||"",onChange:m=>o(d,m.target.value),className:z(u(d)&&"border-destructive focus-visible:ring-destructive"),placeholder:n("create.wordNPlaceholder",{n:d+1}),autoCapitalize:"off",autoCorrect:"off"})},d))}),t.jsx(et,{variant:"mint",className:"w-full","data-testid":"verify-next-button",disabled:!c,onClick:s,children:n("common:next")})]})}function sj({chains:e,selectedChains:s,selectionCount:n,isSubmitting:a,completeLabel:r,onSelectionChange:i,onComplete:c}){const{t:o}=F(["onboarding","common"]);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx(nn,{icon:ys,variant:"success",size:"lg",className:"mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-bold",children:o("chainSelector.title")}),t.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:o("chainSelector.subtitle")})]}),e.length===0?t.jsx("div",{className:"flex justify-center py-10",children:t.jsx(Me,{})}):t.jsx(Ar,{"data-testid":"chain-selector",chains:e,selectedChains:s,onSelectionChange:i}),t.jsx(et,{variant:"mint",className:"w-full","data-testid":"chain-selector-complete-button",disabled:n===0||a,onClick:c,children:r})]})}Ud.__docgenInfo={description:"",methods:[],displayName:"WalletCreatePage"};const Vd=()=>t.jsx(ce,{children:t.jsx(Ud,{})});Vd.__docgenInfo={description:"",methods:[],displayName:"WalletCreateActivity"};const nj={ETH:{amount:"0.002",symbol:"ETH"},USDT:{amount:"0.003",symbol:"ETH"},USDC:{amount:"0.003",symbol:"ETH"},BTC:{amount:"0.0001",symbol:"BTC"},TRX:{amount:"1",symbol:"TRX"},BFM:{amount:"0.1",symbol:"BFM"}},Po={step:"input",asset:null,toAddress:"",amount:null,addressError:null,amountError:null,feeAmount:null,feeSymbol:"",feeLoading:!1,isSubmitting:!1,resultStatus:null,txHash:null,errorMessage:null};async function aj(e,s){const n=vs(e.id);if(!n.supportsFeeEstimate)throw new Error(`Chain ${e.id} does not support fee estimation`);return{amount:(await n.estimateFee({from:s,to:s,amount:tt.fromRaw("1",e.decimals,e.symbol)})).standard.amount,symbol:e.symbol}}async function rj({chainConfig:e,walletId:s,password:n,fromAddress:a,toAddress:r,amount:i}){let c;try{c=await lr.getMnemonic(s,n)}catch(o){return o instanceof dr&&o.code===ur.DECRYPTION_FAILED?{status:"password"}:{status:"error",message:o instanceof Error?o.message:""}}if(!i.isPositive())return{status:"error",message:""};try{const o=vs(e.id);if(!o.supportsFullTransaction)return{status:"error",message:`: ${e.id}`};console.log("[submitWeb3Transfer] Starting transfer:",{chain:e.id,type:e.type,fromAddress:a,toAddress:r,amount:i.toRawString()});const u=Wo(c);console.log("[submitWeb3Transfer] Building transaction...");const d=await o.buildTransaction({from:a,to:r,amount:i});console.log("[submitWeb3Transfer] Signing transaction...");const m=await o.signTransaction(d,u);console.log("[submitWeb3Transfer] Broadcasting transaction...");const h=await o.broadcastTransaction(m);return console.log("[submitWeb3Transfer] SUCCESS! txHash:",h),{status:"ok",txHash:h}}catch(o){console.error("[submitWeb3Transfer] FAILED:",o);const u=o instanceof Error?o.message:String(o);return u.includes("insufficient")||u.includes("")?{status:"error",message:""}:u.includes("fee")||u.includes("")||u.includes("gas")?{status:"error",message:""}:u.includes("not yet implemented")||u.includes("not supported")?{status:"error",message:""}:{status:"error",message:u||""}}}function ij(e,s){const n=vs(e.id);return n.supportsAddressValidation?!s||s.trim()===""?"":n.isValidAddress(s)?null:"":""}function Jd(e,s){return e.trim()?s?Gf(e):nf(e):!1}function oj(e,s){return e.trim()?Jd(e,s)?null:"":""}function cj(e,s){return e?s?e.isPositive()?e.gt(s.amount)?"":null:"":null:""}function lj(e){const{toAddress:s,amount:n,asset:a,isBioforestChain:r,feeLoading:i}=e;return!a||!n||i?!1:s.trim()!==""&&Jd(s,r)&&n.isPositive()&&n.lte(a.amount)}function dj(e,s,n){if(!e)return{status:"error",message:""};const a=s.amount;if(e.add(n).lte(a))return{status:"ok"};if(!e.eq(a))return{status:"error",message:""};const r=a.sub(n);return r.isPositive()?{status:"ok",adjustedAmount:r}:{status:"error",message:""}}async function uj(e){e(s=>({...s,step:"sending",isSubmitting:!0}));try{if(await new Promise(n=>setTimeout(n,2e3)),Math.random()>.2)return e(n=>({...n,step:"result",isSubmitting:!1,resultStatus:"success",txHash:`0x${Math.random().toString(16).slice(2)}${Math.random().toString(16).slice(2)}`,errorMessage:null})),{status:"ok"};throw new Error("")}catch(s){return e(n=>({...n,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:s instanceof Error?s.message:""})),{status:"error"}}}function mj(e={}){const{initialAsset:s,useMock:n=!0,walletId:a,fromAddress:r,chainConfig:i}=e,[c,o]=l.useState({...Po,asset:s??null}),u=i?.chainKind==="bioforest",d=i?.chainKind==="evm"||i?.chainKind==="tron"||i?.chainKind==="bitcoin",m=l.useCallback(w=>d&&i?ij(i,w):oj(w,u),[u,d,i]),h=l.useCallback((w,M)=>cj(w,M),[]),p=l.useCallback(w=>{o(M=>({...M,toAddress:w,addressError:null}))},[]),g=l.useCallback(w=>{o(M=>({...M,amount:w,amountError:null}))},[]),y=l.useCallback(w=>{if(o(S=>({...S,asset:w,feeLoading:!0})),n||!u&&!d||!i||!r){setTimeout(()=>{const S=nj[w.assetType]??{amount:"0.001",symbol:w.assetType},k=tt.fromFormatted(S.amount,w.decimals,S.symbol);o(I=>({...I,feeAmount:k,feeSymbol:S.symbol,feeLoading:!1}))},300);return}(async()=>{try{const S=d?await aj(i,r):await Lb(i,r);o(k=>({...k,feeAmount:S.amount,feeSymbol:S.symbol,feeLoading:!1}))}catch(S){o(k=>({...k,feeLoading:!1,errorMessage:S instanceof Error?S.message:""}))}})()},[i,r,u,d,n]);l.useEffect(()=>{if(n||!u||!i||!r)return;let w=!1;return(async()=>{try{const M=await Ob(i,r);if(w)return;o(S=>({...S,asset:M}))}catch{if(w)return}})(),()=>{w=!0}},[i,r,u,n]);const f=l.useMemo(()=>lj({toAddress:c.toAddress,amount:c.amount,asset:c.asset,isBioforestChain:u,feeLoading:c.feeLoading}),[u,c.amount,c.asset,c.toAddress,c.feeLoading]),x=l.useCallback(()=>{const w=m(c.toAddress),M=c.asset?h(c.amount,c.asset):"";if(w||M)return o(S=>({...S,addressError:w,amountError:M})),!1;if(c.asset&&c.feeAmount&&c.amount){const S=dj(c.amount,c.asset,c.feeAmount);if(S.status==="error")return o(k=>({...k,amountError:S.message})),!1;S.adjustedAmount&&o(k=>({...k,amount:S.adjustedAmount??k.amount}))}return o(S=>({...S,step:"confirm",addressError:null,amountError:null})),!0},[c.toAddress,c.amount,c.asset,c.feeAmount,m,h]),b=l.useCallback(()=>{o(w=>({...w,step:"input"}))},[]),v=l.useCallback(async w=>{if(console.log("[useSend.submit] Called with:",{useMock:n,chainType:i?.type,walletId:a,fromAddress:r}),n)return console.log("[useSend.submit] Using mock transfer"),(await uj(o)).status==="ok"?{status:"ok"}:{status:"error"};if(!i)return console.log("[useSend.submit] No chain config"),o(I=>({...I,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:""})),{status:"error"};if(i.chainKind==="evm"||i.chainKind==="tron"||i.chainKind==="bitcoin"){if(console.log("[useSend.submit] Using Web3 transfer for:",i.type),!a||!r||!c.asset||!c.amount)return o(E=>({...E,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:""})),{status:"error"};o(E=>({...E,step:"sending",isSubmitting:!0,errorMessage:null}));const I=await rj({chainConfig:i,walletId:a,password:w,fromAddress:r,toAddress:c.toAddress,amount:c.amount});return I.status==="password"?(o(E=>({...E,step:"confirm",isSubmitting:!1})),{status:"password"}):I.status==="error"?(o(E=>({...E,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:I.message})),{status:"error"}):(o(E=>({...E,step:"result",isSubmitting:!1,resultStatus:"success",txHash:I.txHash,errorMessage:null})),{status:"ok",txHash:I.txHash})}if(i.type!=="bioforest")return console.log("[useSend.submit] Chain type not supported:",i.type),o(I=>({...I,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:`: ${i.type}`})),{status:"error"};if(!a||!r||!c.asset)return o(I=>({...I,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:""})),{status:"error"};const M=m(c.toAddress),S=h(c.amount,c.asset);if(M||S)return o(I=>({...I,addressError:M,amountError:S})),{status:"error"};if(o(I=>({...I,step:"sending",isSubmitting:!0,errorMessage:null})),!c.amount)return o(I=>({...I,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:""})),{status:"error"};const k=await So({chainConfig:i,walletId:a,password:w,fromAddress:r,toAddress:c.toAddress,amount:c.amount});return k.status==="password"?(o(I=>({...I,step:"confirm",isSubmitting:!1})),{status:"password"}):k.status==="password_required"?(o(I=>({...I,step:"confirm",isSubmitting:!1})),{status:"two_step_secret_required",secondPublicKey:k.secondPublicKey}):k.status==="error"?(o(I=>({...I,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:k.message})),{status:"error"}):(o(I=>({...I,step:"result",isSubmitting:!1,resultStatus:"success",txHash:k.txHash,errorMessage:null})),{status:"ok",txHash:k.txHash})},[i,r,c.amount,c.asset,c.toAddress,n,m,h,a]),j=l.useCallback(async(w,M)=>{if(!i||!a||!r)return{status:"error"};if(o(k=>({...k,step:"sending",isSubmitting:!0,resultStatus:null,txHash:null,errorMessage:null})),!c.amount)return o(k=>({...k,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:""})),{status:"error"};const S=await So({chainConfig:i,walletId:a,password:w,fromAddress:r,toAddress:c.toAddress,amount:c.amount,twoStepSecret:M});return S.status==="password"?(o(k=>({...k,step:"confirm",isSubmitting:!1})),{status:"password"}):S.status==="error"?(o(k=>({...k,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:S.message})),{status:"error"}):S.status==="password_required"?(o(k=>({...k,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:""})),{status:"error"}):(o(k=>({...k,step:"result",isSubmitting:!1,resultStatus:"success",txHash:S.txHash,errorMessage:null})),{status:"ok",txHash:S.txHash})},[i,r,c.amount,c.toAddress,a]),N=l.useCallback(()=>{o({...Po,asset:s??null})},[s]);return{state:c,setToAddress:p,setAmount:g,setAsset:y,goToConfirm:x,goBack:b,submit:v,submitWithTwoStepSecret:j,reset:N,canProceed:f}}const fj={ethereum:"Ethereum",bitcoin:"Bitcoin",tron:"Tron",binance:"BSC",bfmeta:"BFMeta",ccchain:"CCChain",pmchain:"PMChain",bfchainv2:"BFChain V2",btgmeta:"BTGMeta",biwmeta:"BIWMeta",ethmeta:"ETHMeta",malibu:"Malibu"};function Kd(){const{t:e}=F(["transaction","common","security"]),{goBack:s}=me(),{push:n}=te(),a=Gt(),r=zr(),i=l.useRef(!1),{address:c,amount:o}=be(),u=Ct(),d=Le(),m=Rr(),h=sa(),p=h.snapshot?Os.getChainById(h,u):null,g=p?.name??fj[u]??u,y=l.useMemo(()=>{if(!p)return null;const _=m?.tokens.find(R=>R.symbol===p.symbol)?.balance??"0";return{assetType:p.symbol,name:p.name,amount:tt.fromFormatted(_,p.decimals,p.symbol),decimals:p.decimals}},[p,m?.tokens]),{state:f,setToAddress:x,setAmount:b,setAsset:v,goToConfirm:j,submit:N,submitWithTwoStepSecret:w,reset:M,canProceed:S}=mj({initialAsset:y??void 0,useMock:!1,walletId:d?.id,fromAddress:m?.address,chainConfig:p});l.useEffect(()=>{y&&v(y)},[y,v]),l.useEffect(()=>{if(c&&!f.toAddress&&x(c),o&&!f.amount&&f.asset){const B=tt.tryFromFormatted(o,f.asset.decimals,f.asset.assetType);B&&b(B)}},[c,o,f.toAddress,f.amount,f.asset,x,b]),l.useEffect(()=>{const B=_=>{x(_.detail.address.address)};return window.addEventListener("contact-picker-select",B),()=>window.removeEventListener("contact-picker-select",B)},[x]),l.useEffect(()=>{if(f.resultStatus==="success"&&f.toAddress){const B=ta.getContactByAddress(us.state,f.toAddress);B&&Qs.trackRecentContact(B.contact.id)}},[f.resultStatus,f.toAddress]);const k=l.useCallback(()=>{n("ContactPickerJob",{chainType:u})},[n,u]),I=f.asset?.amount??null,E=f.asset?.assetType??"TOKEN",D=l.useCallback(()=>{Vf(({content:B,parsed:_})=>{let R=B;(_.type==="address"||_.type==="payment")&&(R=_.address),x(R),r.impact("success"),a.show(e("sendPage.scanSuccess"))}),n("ScannerJob",{chainType:g??u})},[n,u,g,x,r,a,e]),P=()=>{j()&&(r.impact("light"),my(async()=>{i.current||(i.current=!0,await r.impact("medium"),py(async(B,_)=>{if(!_){const L=await N(B);return L.status==="password"?{status:"wallet_lock_invalid"}:L.status==="two_step_secret_required"?{status:"two_step_secret_required"}:L.status==="ok"?(i.current=!1,{status:"ok",txHash:L.txHash}):{status:"error",message:""}}const R=await w(B,_);return R.status==="ok"?(i.current=!1,{status:"ok",txHash:R.txHash}):R.status==="password"?{status:"two_step_secret_invalid",message:""}:{status:"error",message:R.status==="error"?"":""}}),n("TransferWalletLockJob",{title:e("security:walletLock.verifyTitle")}))}),n("TransferConfirmJob",{amount:f.amount?.toFormatted()??"0",symbol:E,toAddress:f.toAddress,feeAmount:f.feeAmount?.toFormatted()??"0",feeSymbol:f.feeSymbol,feeLoading:f.feeLoading?"true":"false"}))},A=()=>{f.resultStatus==="success"&&r.impact("success"),s()},T=()=>{M()},C=()=>{f.txHash&&a.show(e("sendPage.explorerNotImplemented"))};return!d||!m?t.jsxs("div",{className:"flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("sendPage.title"),onBack:s}),t.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:t.jsx("p",{className:"text-muted-foreground",children:e("history.noWallet")})})]}):f.step==="result"||f.step==="sending"?t.jsxs("div",{className:"flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("sendPage.resultTitle")}),t.jsx(sh,{status:f.step==="sending"?"pending":f.resultStatus??"pending",amount:f.amount?.toFormatted()??"0",symbol:E,toAddress:f.toAddress,txHash:f.txHash??void 0,errorMessage:f.errorMessage??void 0,onDone:A,onRetry:f.resultStatus==="failed"?T:void 0,onViewExplorer:f.resultStatus==="success"?C:void 0})]}):t.jsxs("div",{className:"flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("sendPage.title"),onBack:s}),t.jsxs("div",{className:"flex-1 space-y-6 p-4",children:[t.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(ra,{chain:u,size:"sm"}),t.jsx("span",{className:"text-sm font-medium",children:g})]}),m?.address&&t.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-muted-foreground",children:[t.jsxs("span",{children:[e("sendPage.from"),":"]}),t.jsxs("span",{className:"font-mono",children:[m.address.slice(0,8),"...",m.address.slice(-6)]})]})]}),t.jsx(af,{label:e("sendPage.toAddressLabel"),value:f.toAddress,onChange:x,placeholder:e("sendPage.toAddressPlaceholder",{chain:g}),onScan:D,onContactPicker:k,chainType:u,error:f.addressError??void 0}),t.jsx(th,{label:e("sendPage.amountLabel"),value:f.amount??void 0,onChange:b,balance:I??void 0,symbol:E,error:f.amountError??void 0,fiatValue:f.amount?f.amount.toNumber().toFixed(2):void 0}),t.jsx(fs,{variant:"info",children:e("sendPage.networkWarning",{chain:g})}),t.jsx("div",{className:"pt-4",children:t.jsxs(et,{variant:"mint",className:"w-full","data-testid":"send-continue-button",disabled:!S,onClick:P,children:[e("sendPage.continue"),t.jsx(Oe,{className:"-mr-4 ml-2 size-4"})]})})]})]})}Kd.__docgenInfo={description:"",methods:[],displayName:"SendPage"};const Gd=({params:e})=>t.jsx(ce,{children:t.jsx(pe,{params:e,children:t.jsx(Xf,{children:t.jsx(Kd,{})})})});Gd.__docgenInfo={description:"",methods:[],displayName:"SendActivity"};const hj={ethereum:"Ethereum",bitcoin:"Bitcoin",tron:"Tron",binance:"BSC",bfmeta:"BFMeta",ccchain:"CCChain",pmchain:"PMChain",bfchainv2:"BFChain V2",btgmeta:"BTGMeta",biwmeta:"BIWMeta",ethmeta:"ETHMeta",malibu:"Malibu"};function Qd(){const{t:e}=F("transaction"),{goBack:s}=me(),n=Dr(),a=Gt(),r=zr(),i=Rr(),c=Ct(),o=hj[c]??c,[u,d]=l.useState(!1),m=i?.address||"",h=async()=>{m&&(await n.write({text:m}),await r.impact("light"),d(!0),a.show(e("receivePage.addressCopied")),setTimeout(()=>d(!1),2e3))},p=async()=>{if(navigator.share&&m)try{await navigator.share({title:e("receivePage.shareTitle"),text:m}),await r.impact("success")}catch{}};return t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("receivePage.title"),onBack:s}),t.jsxs("div",{className:"flex-1 space-y-6 p-4",children:[t.jsxs("div",{className:"text-muted-foreground flex items-center justify-center gap-2",children:[t.jsx(ra,{chain:c,size:"sm"}),t.jsx("span",{className:"text-sm",children:o})]}),t.jsxs("div",{className:"bg-card flex flex-col items-center gap-4 rounded-2xl p-6 shadow-sm",children:[t.jsx(ah,{address:m,chain:c,size:200}),t.jsx("p",{className:"text-muted-foreground text-center text-sm",children:e("receivePage.scanQrCode")})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-muted-foreground text-sm font-medium",children:e("receivePage.receiveAddress")}),t.jsx("div",{className:"border-border bg-card rounded-xl border p-4",children:t.jsx(Ws,{address:m,copyable:!0})})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx(H,{variant:"outline",className:"flex-1",onClick:h,children:u?t.jsxs(t.Fragment,{children:[t.jsx(Se,{className:"mr-2 size-4"}),e("receivePage.copied")]}):t.jsxs(t.Fragment,{children:[t.jsx(Sr,{className:"mr-2 size-4"}),e("receivePage.copyAddress")]})}),t.jsxs(et,{variant:"mint",className:"flex-1",onClick:p,children:[t.jsx(Vp,{className:"mr-2 size-4"}),e("receivePage.share")]})]}),t.jsx(fs,{variant:"info",children:e("receivePage.networkWarning",{chain:o})})]})]})}Qd.__docgenInfo={description:"",methods:[],displayName:"ReceivePage"};const Yd=()=>t.jsx(ce,{children:t.jsx(Qd,{})});Yd.__docgenInfo={description:"",methods:[],displayName:"ReceiveActivity"};const Xd=()=>t.jsx(ce,{children:t.jsx(ii,{})});Xd.__docgenInfo={description:"",methods:[],displayName:"SettingsActivity"};const pj={"zh-CN":"","zh-TW":"",en:"English",ar:""};function Zd(){const{goBack:e}=me(),{t:s}=F("settings"),n=Ys(),a=r=>{Qs.setLanguage(r),e()};return t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:s("languagePage.title"),onBack:e}),t.jsxs("div",{className:"flex-1 p-4",children:[t.jsx("div",{className:"bg-card overflow-hidden rounded-xl shadow-sm",children:Object.keys(Yo).map((r,i)=>t.jsxs("div",{children:[i>0&&t.jsx("div",{className:"bg-border mx-4 h-px"}),t.jsxs("button",{onClick:()=>a(r),className:z("flex w-full items-center justify-between px-4 py-3.5","hover:bg-muted/50 active:bg-muted transition-colors",r===n&&"bg-primary/5"),children:[t.jsx("span",{className:"text-sm font-medium",children:pj[r]}),r===n&&t.jsx(Se,{className:"text-primary size-5"})]})]},r))}),t.jsx("p",{className:"text-muted-foreground mt-4 px-1 text-xs",children:s("languagePage.hint")})]})]})}Zd.__docgenInfo={description:"",methods:[],displayName:"LanguagePage"};const eu=()=>t.jsx(ce,{children:t.jsx(Zd,{})});eu.__docgenInfo={description:"",methods:[],displayName:"SettingsLanguageActivity"};function tu(){const{t:e}=F("settings"),{goBack:s}=me(),n=pr(),a=r=>{Qs.setCurrency(r),s()};return t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("currency.title"),onBack:s}),t.jsxs("div",{className:"flex-1 p-4",children:[t.jsx("div",{className:"bg-card overflow-hidden rounded-xl shadow-sm",children:Object.keys(Wa).map((r,i)=>t.jsxs("div",{children:[i>0&&t.jsx("div",{className:"bg-border mx-4 h-px"}),t.jsxs("button",{onClick:()=>a(r),className:z("flex w-full items-center justify-between px-4 py-3.5","hover:bg-muted/50 active:bg-muted transition-colors",r===n&&"bg-primary/5"),children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-muted-foreground text-base font-semibold",children:Wa[r].symbol}),t.jsx("span",{className:"text-sm font-medium",children:e(`currency.names.${r}`)})]}),r===n&&t.jsx(Se,{className:"text-primary size-5"})]})]},r))}),t.jsx("p",{className:"text-muted-foreground mt-4 px-1 text-xs",children:e("currency.hint")})]})]})}tu.__docgenInfo={description:"",methods:[],displayName:"CurrencyPage"};const su=()=>t.jsx(ce,{children:t.jsx(tu,{})});su.__docgenInfo={description:"",methods:[],displayName:"SettingsCurrencyActivity"};function xj(e){const{children:s,open:n,defaultOpen:a=!1,onOpenChange:r,onOpenChangeComplete:i,actionsRef:c,handle:o,triggerId:u,defaultTriggerId:d=null}=e,m=pf(),h=!!m,p=yc(()=>o?.store??new vf({open:n??a,activeTriggerId:u!==void 0?u:d,modal:!0,disablePointerDismissal:!0,nested:h,role:"alertdialog"})).current;p.useControlledProp("open",n,a),p.useControlledProp("activeTriggerId",u,d),p.useSyncedValue("nested",h),p.useContextCallback("onOpenChange",r),p.useContextCallback("onOpenChangeComplete",i);const g=p.useState("payload");xf({store:p,actionsRef:c,parentContext:m?.store.context});const y=l.useMemo(()=>({store:p}),[p]);return t.jsx(gf.Provider,{value:y,children:typeof s=="function"?s({payload:g}):s})}function nu({...e}){return t.jsx(xj,{"data-slot":"alert-dialog",...e})}function au({...e}){return t.jsx(wf,{"data-slot":"alert-dialog-portal",...e})}function ru({className:e,...s}){return t.jsx(Sf,{"data-slot":"alert-dialog-overlay",className:z("data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 bg-black/10 duration-100 supports-backdrop-filter:backdrop-blur-xs fixed inset-0 isolate z-50",e),...s})}function iu({className:e,size:s="default",...n}){return t.jsxs(au,{children:[t.jsx(ru,{}),t.jsx(bf,{"data-slot":"alert-dialog-content","data-size":s,className:z("data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 bg-background ring-foreground/10 gap-4 rounded-xl p-4 ring-1 duration-100 data-[size=default]:max-w-xs data-[size=sm]:max-w-xs data-[size=default]:sm:max-w-sm group/alert-dialog-content fixed top-1/2 left-1/2 z-50 grid w-full -translate-x-1/2 -translate-y-1/2 outline-none",e),...n})]})}function ou({className:e,...s}){return t.jsx("div",{"data-slot":"alert-dialog-header",className:z("grid grid-rows-[auto_1fr] place-items-center gap-1.5 text-center has-data-[slot=alert-dialog-media]:grid-rows-[auto_auto_1fr] has-data-[slot=alert-dialog-media]:gap-x-4 sm:group-data-[size=default]/alert-dialog-content:place-items-start sm:group-data-[size=default]/alert-dialog-content:text-left sm:group-data-[size=default]/alert-dialog-content:has-data-[slot=alert-dialog-media]:grid-rows-[auto_1fr]",e),...s})}function cu({className:e,...s}){return t.jsx("div",{"data-slot":"alert-dialog-footer",className:z("bg-muted/50 -mx-4 -mb-4 rounded-b-xl border-t p-4 flex flex-col-reverse gap-2 group-data-[size=sm]/alert-dialog-content:grid group-data-[size=sm]/alert-dialog-content:grid-cols-2 sm:flex-row sm:justify-end",e),...s})}function lu({className:e,...s}){return t.jsx(yf,{"data-slot":"alert-dialog-title",className:z("text-sm font-medium sm:group-data-[size=default]/alert-dialog-content:group-has-data-[slot=alert-dialog-media]/alert-dialog-content:col-start-2",e),...s})}function du({className:e,...s}){return t.jsx(jf,{"data-slot":"alert-dialog-description",className:z("text-muted-foreground *:[a]:hover:text-foreground text-sm text-balance md:text-pretty *:[a]:underline *:[a]:underline-offset-3",e),...s})}function uu({className:e,...s}){return t.jsx(H,{"data-slot":"alert-dialog-action",className:z(e),...s})}function mu({className:e,variant:s="outline",size:n="default",...a}){return t.jsx(Nf,{"data-slot":"alert-dialog-cancel",className:z(e),render:t.jsx(H,{variant:s,size:n}),...a})}nu.__docgenInfo={description:"",methods:[],displayName:"AlertDialog"};uu.__docgenInfo={description:"",methods:[],displayName:"AlertDialogAction"};mu.__docgenInfo={description:"",methods:[],displayName:"AlertDialogCancel",props:{variant:{defaultValue:{value:'"outline"',computed:!1},required:!1},size:{defaultValue:{value:'"default"',computed:!1},required:!1}}};iu.__docgenInfo={description:"",methods:[],displayName:"AlertDialogContent",props:{size:{required:!1,tsType:{name:"union",raw:'"default" | "sm"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"sm"'}]},description:"",defaultValue:{value:'"default"',computed:!1}}}};du.__docgenInfo={description:"",methods:[],displayName:"AlertDialogDescription"};cu.__docgenInfo={description:"",methods:[],displayName:"AlertDialogFooter"};ou.__docgenInfo={description:"",methods:[],displayName:"AlertDialogHeader"};ru.__docgenInfo={description:"",methods:[],displayName:"AlertDialogOverlay"};au.__docgenInfo={description:"",methods:[],displayName:"AlertDialogPortal"};lu.__docgenInfo={description:"",methods:[],displayName:"AlertDialogTitle"};function _o(e){if(typeof e!="object"||e===null||Array.isArray(e))return null;const s=e.id;return typeof s=="string"&&s.trim()!==""?s:null}function gj(e){try{const s=JSON.parse(e),n=Array.isArray(s)?s.map(_o):[_o(s)];return Array.from(new Set(n.filter(a=>typeof a=="string")))}catch{return[]}}function vj(e,s){switch(s){case"default":return e("chainConfig.source.default");case"subscription":return e("chainConfig.source.subscription");case"manual":return e("chainConfig.source.manual")}}function bj(e){switch(e){case"default":return"bg-muted text-muted-foreground";case"subscription":return"bg-blue-500/10 text-blue-600";case"manual":return"bg-amber-500/10 text-amber-700"}}function yj(e){const s=new Map;for(const n of e)s.set(n.id,n);return s}function fu(){const{goBack:e}=me(),{t:s}=F("settings"),n=Gt(),a=Gs(),r=qo(),i=Uo(),c=Vo(),o=Jo(),u=l.useMemo(()=>yj(i),[i]),[d,m]=l.useState("default"),[h,p]=l.useState(""),[g,y]=l.useState(!1),[f,x]=l.useState([]),b=l.useRef(null),v=l.useRef(null),j=l.useRef(!1);l.useEffect(()=>{Et.initialize()},[]),l.useEffect(()=>{r?.url&&m(r.url)},[r?.url]),l.useEffect(()=>{const I=j.current;if(j.current=c,!I||c)return;const E=b.current;if(E){if(b.current=null,o){n.show(o);return}n.show(s(`chainConfig.toast.${E}`)),E==="manualAdded"&&p("")}},[o,c,s,n]);const N=async()=>{b.current="subscriptionSaved",await Et.setSubscriptionUrl(d)},w=async()=>{b.current="subscriptionRefreshed",await Et.refreshSubscription()},M=async()=>{const I=gj(h),E=new Set(a.map(P=>P.id)),D=I.filter(P=>E.has(P));if(D.length>0){v.current=h,x(D),y(!0);return}b.current="manualAdded",await Et.addManualConfig(h)},S=()=>{v.current=null,x([]),y(!1)},k=async()=>{const I=v.current;v.current=null,x([]),y(!1),I&&(b.current="manualAdded",await Et.addManualConfig(I))};return t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:s("chainConfig.title"),onBack:e}),t.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[t.jsx(nu,{open:g,onOpenChange:I=>{I?y(I):S()},children:t.jsxs(iu,{children:[t.jsxs(ou,{children:[t.jsx(lu,{children:s("chainConfig.manual.duplicate.title")}),t.jsx(du,{children:s("chainConfig.manual.duplicate.description")})]}),t.jsx("div",{className:"bg-muted/50 text-muted-foreground rounded-lg px-3 py-2 text-xs font-mono break-all",children:f.join(", ")}),t.jsxs(cu,{children:[t.jsx(mu,{onClick:S,children:s("chainConfig.manual.duplicate.cancel")}),t.jsx(uu,{onClick:k,disabled:c,children:s("chainConfig.manual.duplicate.replace")})]})]})}),o&&t.jsx("div",{className:"border-destructive/20 bg-destructive/5 text-destructive rounded-xl border px-4 py-3 text-sm",children:o}),t.jsx("div",{className:"bg-card overflow-hidden rounded-xl shadow-sm",children:t.jsxs("div",{className:"space-y-3 px-4 py-4",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium",children:s("chainConfig.subscription.title")}),t.jsx("div",{className:"text-muted-foreground text-xs",children:t.jsx(wc,{ns:"settings",i18nKey:"chainConfig.subscription.description",components:{code:t.jsx("code",{className:"font-mono"})}})})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(H,{type:"button",variant:"outline",size:"icon","data-testid":"refresh-subscription-button",onClick:w,disabled:c,"aria-label":s("chainConfig.subscription.refreshAriaLabel"),children:t.jsx(en,{className:z("size-4",c&&"animate-spin")})}),t.jsx(H,{type:"button","data-testid":"save-subscription-button",onClick:N,disabled:c,children:s("chainConfig.subscription.save")})]})]}),t.jsx(qe,{"data-testid":"subscription-url-input",value:d,onChange:I=>m(I.target.value),placeholder:s("chainConfig.subscription.placeholder"),disabled:c,autoCapitalize:"off",autoCorrect:"off",spellCheck:!1}),r?.lastUpdated&&t.jsx("div",{className:"text-muted-foreground text-xs",children:s("chainConfig.subscription.lastUpdated",{value:r.lastUpdated})})]})}),t.jsx("div",{className:"bg-card overflow-hidden rounded-xl shadow-sm","data-testid":"manual-add-section",children:t.jsxs("div",{className:"space-y-3 px-4 py-4",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium",children:s("chainConfig.manual.title")}),t.jsx("div",{className:"text-muted-foreground text-xs",children:s("chainConfig.manual.description")})]}),t.jsxs(H,{type:"button",variant:"outline","data-testid":"add-chain-button",onClick:M,disabled:c||h.trim()==="",children:[t.jsx(St,{className:"size-4"}),s("chainConfig.manual.add")]})]}),t.jsx("textarea",{"data-testid":"manual-config-textarea",value:h,onChange:I=>p(I.target.value),placeholder:s("chainConfig.manual.placeholder"),rows:5,disabled:c,className:z("bg-background w-full resize-none rounded-lg border px-3 py-3 text-sm","placeholder:text-muted-foreground","focus:ring-ring focus:ring-2 focus:ring-offset-2 focus:outline-none","disabled:cursor-not-allowed disabled:opacity-50"),autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})]})}),t.jsxs("div",{className:"bg-card overflow-hidden rounded-xl shadow-sm",children:[t.jsxs("div",{className:"px-4 py-3",children:[t.jsx("div",{className:"text-sm font-medium",children:s("chainConfig.list.title")}),t.jsx("div",{className:"text-muted-foreground text-xs",children:s("chainConfig.list.description")})]}),t.jsx("div",{className:"bg-border h-px"}),t.jsxs("div",{children:[a.map((I,E)=>{const D=u.get(I.id),P=D?.kind==="incompatible_major",A=vj(s,I.source);return t.jsxs("div",{"data-testid":`chain-item-${I.id}`,children:[E>0&&t.jsx("div",{className:"bg-border mx-4 h-px"}),t.jsx("div",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"truncate text-sm font-medium",children:I.name}),t.jsx("span",{className:z("rounded px-2 py-0.5 text-xs",bj(I.source)),children:A})]}),t.jsxs("div",{className:"text-muted-foreground mt-1 flex flex-wrap gap-x-3 gap-y-1 text-xs",children:[t.jsx("span",{className:"font-mono",children:I.id}),t.jsxs("span",{children:["v",I.version]}),t.jsx("span",{children:I.type}),t.jsx("span",{children:I.symbol})]}),D?.kind==="incompatible_major"&&t.jsxs("div",{className:"mt-2 flex items-start gap-2 rounded-lg bg-amber-500/10 px-3 py-2 text-xs text-amber-800",children:[t.jsx(ht,{className:"mt-0.5 size-4 shrink-0"}),t.jsx("div",{children:s("chainConfig.warning.incompatibleMajor",{version:D.version,supportedMajor:D.supportedMajor})})]})]}),t.jsx(lc,{checked:I.enabled,onCheckedChange:T=>{Et.setChainEnabled(I.id,T)},disabled:c||P,className:z(P&&"cursor-not-allowed opacity-60")})]})})]},I.id)}),a.length===0&&t.jsx("div",{className:"text-muted-foreground px-4 py-8 text-center text-sm",children:s("chainConfig.list.empty")})]})]}),t.jsx("div",{className:"text-muted-foreground px-1 text-xs",children:s("chainConfig.hint")})]})]})}fu.__docgenInfo={description:"",methods:[],displayName:"ChainConfigPage"};const hu=()=>t.jsx(ce,{children:t.jsx(fu,{})});hu.__docgenInfo={description:"",methods:[],displayName:"SettingsChainsActivity"};const jj=3e4;function pu(){const{t:e}=F("settings"),{goBack:s}=me(),{push:n}=te(),a=Le(),i=(a?.keyType??"mnemonic")==="arbitrary",[c,o]=l.useState(""),[u,d]=l.useState(!0),m=l.useRef(!1);l.useEffect(()=>{if(c.length>0&&!u){const g=setTimeout(()=>{d(!0)},jj);return()=>clearTimeout(g)}},[c.length,u]),l.useEffect(()=>{const g=()=>{document.hidden&&c.length>0&&d(!0)};return document.addEventListener("visibilitychange",g),()=>{document.removeEventListener("visibilitychange",g)}},[c.length]),l.useEffect(()=>{m.current||!a?.encryptedMnemonic||(m.current=!0,Yt(async g=>{try{const y=await cs(a.encryptedMnemonic,g);return o(y),d(!1),!0}catch{return!1}}),n("WalletLockConfirmJob",{title:e("viewMnemonic.verifyTitle"),description:e(i?"viewMnemonic.verifyDescKey":"viewMnemonic.verifyDescMnemonic")}))},[a,n,e,i]);const h=()=>{d(g=>!g)};if(!a)return t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:e(i?"viewMnemonic.titleKey":"viewMnemonic.titleMnemonic"),onBack:s}),t.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:t.jsx("p",{className:"text-muted-foreground",children:e("viewMnemonic.noWallet")})})]});const p=i?[]:c.trim().split(/\s+/).filter(Boolean);return t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:e(i?"viewMnemonic.titleKey":"viewMnemonic.titleMnemonic"),onBack:s}),t.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[t.jsxs("div",{className:"flex gap-3 rounded-xl bg-amber-500/10 p-4",children:[t.jsx(ht,{className:"size-5 shrink-0 text-amber-500"}),t.jsxs("div",{className:"space-y-1 text-sm",children:[t.jsx("p",{className:"font-medium text-amber-700 dark:text-amber-400",children:e("viewMnemonic.securityTip")}),t.jsx("p",{className:"text-muted-foreground",children:e(i?"viewMnemonic.securityWarningKey":"viewMnemonic.securityWarningMnemonic")})]})]}),c.length>0&&t.jsxs("div",{className:"bg-card space-y-4 rounded-xl p-4 shadow-sm",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium",children:i?e("viewMnemonic.charCount",{count:c.length}):e("viewMnemonic.wordCount",{count:p.length})}),t.jsx("button",{onClick:h,className:z("flex items-center gap-1.5 rounded-full px-3 py-1.5 text-xs font-medium","bg-muted hover:bg-muted/80 transition-colors"),children:u?t.jsxs(t.Fragment,{children:[t.jsx(kr,{className:"size-3.5"}),e("viewMnemonic.show")]}):t.jsxs(t.Fragment,{children:[t.jsx(vc,{className:"size-3.5"}),e("viewMnemonic.hide")]})})]}),i?t.jsx("textarea",{value:c,readOnly:!0,rows:4,"data-testid":"secret-textarea",className:z("bg-background w-full resize-none rounded-lg border px-3 py-3 font-mono text-sm","focus:outline-none",u?"[-webkit-text-security:disc]":"[-webkit-text-security:none]")}):t.jsx(pc,{words:p,hidden:u}),!u&&t.jsx("p",{className:"text-muted-foreground text-center text-xs",children:e("viewMnemonic.autoHideNote")})]})]})]})}pu.__docgenInfo={description:"",methods:[],displayName:"ViewMnemonicPage"};const xu=()=>t.jsx(ce,{children:t.jsx(pu,{})});xu.__docgenInfo={description:"",methods:[],displayName:"SettingsMnemonicActivity"};function gu(){const{t:e}=F("settings"),{goBack:s}=me(),n=Le(),[a,r]=l.useState("verify"),[i,c]=l.useState("pattern"),[o,u]=l.useState([]),[d,m]=l.useState(!1),[h,p]=l.useState(!1),g=l.useRef(null),[y,f]=l.useState([]),[x,b]=l.useState(!1),[v,j]=l.useState(null),[N,w]=l.useState(null),M=l.useCallback(()=>{g.current&&(clearTimeout(g.current),g.current=null),m(!1)},[]),S=l.useCallback(P=>{d&&P.length>0&&M(),u(P)},[d,M]),k=l.useCallback(async P=>{if(n?.encryptedMnemonic){p(!0),M();try{const A=Ut(P);await zt(n.encryptedMnemonic,A)?(u(P),r("setup")):(m(!0),u([]),g.current=setTimeout(()=>{m(!1)},1500))}catch{m(!0),u([]),g.current=setTimeout(()=>{m(!1)},1500)}finally{p(!1)}}},[n,M]),I=l.useCallback((P,A)=>{f(P),b(A),j(null)},[]),E=l.useCallback(async()=>{if(n?.encryptedWalletLock){p(!0),j(null);try{if(!gc(y)){j(e("changeWalletLock.invalidMnemonic")),p(!1);return}const P=y.join(" ");await ye.verifyMnemonic(n.id,P)?(w(P),r("setup")):j(e("changeWalletLock.mnemonicVerifyFailed"))}catch{j(e("changeWalletLock.mnemonicVerifyFailed"))}finally{p(!1)}}},[n,y,e]),D=l.useCallback(async P=>{if(n)try{if(i==="mnemonic"&&N)await ye.resetWalletLockByMnemonic(n.id,N,P);else{const A=Ut(o);await ye.updateWalletLock(n.id,A,P)}r("success"),setTimeout(()=>{s()},2e3)}catch{r("verify"),u([]),w(null)}},[n,i,N,o,s]);return n?a==="success"?t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("changeWalletLock.title")}),t.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 p-4",children:[t.jsx("div",{className:"bg-green-500/10 flex size-16 items-center justify-center rounded-full",children:t.jsx(Se,{className:"text-green-500 size-8"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-lg font-semibold",children:e("changeWalletLock.success")}),t.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:e("changeWalletLock.returning")})]})]})]}):a==="verify"?t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("changeWalletLock.title"),onBack:s}),t.jsx("div",{className:"flex-1 p-4",children:i==="pattern"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-6 text-center",children:[t.jsx("h2",{className:"text-xl font-bold",children:e("changeWalletLock.verifyTitle")}),t.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:e("changeWalletLock.verifyDesc")})]}),t.jsx(bs,{value:o,onChange:S,onComplete:k,minPoints:4,error:d,disabled:h,"data-testid":"verify-pattern-lock"}),t.jsx("div",{className:"mt-8 text-center",children:t.jsx("button",{type:"button",onClick:()=>c("mnemonic"),className:"text-primary hover:text-primary/80 text-sm underline","data-testid":"switch-to-mnemonic",children:e("changeWalletLock.forgotPattern")})})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-6 text-center",children:[t.jsx("h2",{className:"text-xl font-bold",children:e("changeWalletLock.mnemonicVerifyTitle")}),t.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:e("changeWalletLock.mnemonicVerifyDesc")})]}),t.jsx(rh,{wordCount:12,onChange:I}),v&&t.jsx("p",{className:"text-destructive mt-4 text-center text-sm",children:v}),t.jsxs("div",{className:"mt-6 space-y-3",children:[t.jsx(H,{onClick:E,disabled:!x||h,className:"w-full","data-testid":"verify-mnemonic-button",children:e(h?"changeWalletLock.verifying":"changeWalletLock.verifyMnemonic")}),t.jsx("button",{type:"button",onClick:()=>{c("pattern"),f([]),j(null)},className:"text-muted-foreground hover:text-foreground w-full text-center text-sm","data-testid":"switch-to-pattern",children:e("changeWalletLock.usePattern")})]})]})})]}):t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("changeWalletLock.title"),onBack:()=>{r("verify"),u([])}}),t.jsx("div",{className:"flex-1 p-4",children:t.jsx(yr,{onComplete:D,minPoints:4})})]}):t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("changeWalletLock.title"),onBack:s}),t.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:t.jsx("p",{className:"text-muted-foreground",children:e("changeWalletLock.noWallet")})})]})}gu.__docgenInfo={description:"",methods:[],displayName:"ChangeWalletLockPage"};const vu=()=>t.jsx(ce,{children:t.jsx(gu,{})});vu.__docgenInfo={description:"",methods:[],displayName:"SettingsWalletLockActivity"};function Nj(e){const s=l.useRef(!0);s.current&&(s.current=!1,e())}const bu=l.createContext(null),yu=l.createContext(null);function nt(){const e=l.useContext(bu);if(e===null)throw new Error(ca(60));return e}function ju(){const e=l.useContext(yu);if(e===null)throw new Error(ca(61));return e}const wj=(e,s)=>Object.is(e,s);function gs(e,s,n){return e==null||s==null?Object.is(e,s):n(e,s)}function Da(e,s,n){return!e||e.length===0?!1:e.some(a=>a===void 0?!1:gs(a,s,n))}function rr(e,s,n){return!e||e.length===0?-1:e.findIndex(a=>a===void 0?!1:gs(a,s,n))}function Sj(e,s,n){return e.filter(a=>!gs(a,s,n))}function ir(e){if(e==null)return"";if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function Cj(e){return e!=null&&e.length>0&&typeof e[0]=="object"&&e[0]!=null&&"items"in e[0]}function _s(e,s){if(s&&e!=null)return s(e)??"";if(e&&typeof e=="object"){if("label"in e&&e.label!=null)return String(e.label);if("value"in e)return String(e.value)}return ir(e)}function rs(e,s){return s&&e!=null?s(e)??"":e&&typeof e=="object"&&"value"in e&&"label"in e?ir(e.value):ir(e)}function kj(e,s,n){if(n&&e!=null)return n(e);if(e&&typeof e=="object"&&"label"in e&&e.label!=null)return e.label;if(s&&!Array.isArray(s))return s[e]??_s(e,n);if(Array.isArray(s)){const a=Cj(s)?s.flatMap(r=>r.items):s;if(e==null){const r=a.find(i=>i.value==null);return r&&r.label!=null?r.label:_s(e,n)}if(typeof e!="object"){const r=a.find(i=>i&&i.value===e);return r&&r.label!=null?r.label:_s(e,n)}if("value"in e){const r=a.find(i=>i&&i.value===e.value);if(r&&r.label!=null)return r.label}}return _s(e,n)}function Aj(e,s){return!Array.isArray(e)||e.length===0?"":e.map(n=>_s(n,s)).join(", ")}const Y={id:fe(e=>e.id),modal:fe(e=>e.modal),multiple:fe(e=>e.multiple),items:fe(e=>e.items),itemToStringLabel:fe(e=>e.itemToStringLabel),itemToStringValue:fe(e=>e.itemToStringValue),isItemEqualToValue:fe(e=>e.isItemEqualToValue),value:fe(e=>e.value),open:fe(e=>e.open),mounted:fe(e=>e.mounted),forceMount:fe(e=>e.forceMount),transitionStatus:fe(e=>e.transitionStatus),openMethod:fe(e=>e.openMethod),activeIndex:fe(e=>e.activeIndex),selectedIndex:fe(e=>e.selectedIndex),isActive:fe((e,s)=>e.activeIndex===s),isSelected:fe((e,s,n)=>{const a=e.isItemEqualToValue,r=e.value;return e.multiple?Array.isArray(r)&&r.some(i=>gs(i,n,a)):e.selectedIndex===s&&e.selectedIndex!==null?!0:gs(r,n,a)}),isSelectedByFocus:fe((e,s)=>e.selectedIndex===s),popupProps:fe(e=>e.popupProps),triggerProps:fe(e=>e.triggerProps),triggerElement:fe(e=>e.triggerElement),positionerElement:fe(e=>e.positionerElement),listElement:fe(e=>e.listElement),scrollUpArrowVisible:fe(e=>e.scrollUpArrowVisible),scrollDownArrowVisible:fe(e=>e.scrollDownArrowVisible),hasScrollArrows:fe(e=>e.hasScrollArrows),serializedValue:fe(e=>{const{multiple:s,value:n,itemToStringValue:a}=e;return s&&Array.isArray(n)&&n.length===0?"":rs(n,a)})};function Ij(e,s){const n=l.useRef(e),a=Ye(s);Be(()=>{n.current!==e&&a(n.current)},[e,a]),Be(()=>{n.current=e},[e])}function Tj(e){const{id:s,value:n,defaultValue:a=null,onValueChange:r,open:i,defaultOpen:c=!1,onOpenChange:o,name:u,disabled:d=!1,readOnly:m=!1,required:h=!1,modal:p=!0,actionsRef:g,inputRef:y,onOpenChangeComplete:f,items:x,multiple:b=!1,itemToStringLabel:v,itemToStringValue:j,isItemEqualToValue:N=wj,highlightItemOnHover:w=!0,children:M}=e,{clearErrors:S}=Lm(),{setDirty:k,shouldValidateOnChange:I,validityData:E,setFilled:D,name:P,disabled:A,validation:T}=tc(),{controlId:C}=sc(),B=Om({id:s}),_=A||d,R=P??u,[L,W]=hi({controlled:n,default:b?a??ji:a,name:"Select",state:"value"}),[J,Z]=hi({controlled:i,default:c,name:"Select",state:"open"}),q=l.useRef([]),K=l.useRef([]),ue=l.useRef(null),U=l.useRef(null),G=l.useRef(0),le=l.useRef(null),ne=l.useRef([]),O=l.useRef(!1),se=l.useRef(!1),X=l.useRef(null),re=l.useRef({allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}),Ne=l.useRef(!1),{mounted:ie,setMounted:xe,transitionStatus:Re}=Ir(J),{openMethod:Fe,triggerProps:Ce,reset:ke}=ih(J),ae=yc(()=>new uh({id:B,modal:p,multiple:b,itemToStringLabel:v,itemToStringValue:j,isItemEqualToValue:N,value:L,open:J,mounted:ie,transitionStatus:Re,items:x,forceMount:!1,openMethod:null,activeIndex:null,selectedIndex:null,popupProps:{},triggerProps:{},triggerElement:null,positionerElement:null,listElement:null,scrollUpArrowVisible:!1,scrollDownArrowVisible:!1,hasScrollArrows:!1})).current,$e=ee(ae,Y.activeIndex),at=ee(ae,Y.selectedIndex),rt=ee(ae,Y.triggerElement),Pe=ee(ae,Y.positionerElement),js=l.useMemo(()=>b&&Array.isArray(L)&&L.length===0?"":rs(L,j),[b,L,j]),pa=l.useMemo(()=>b&&Array.isArray(L)?L.map(oe=>rs(oe,j)):rs(L,j),[b,L,j]),ln=Tr(ae.state.triggerElement);Fm({id:B,commit:T.commit,value:L,controlRef:ln,name:R,getValue:()=>pa});const Ns=l.useRef(L);Be(()=>{L!==Ns.current&&ae.set("forceMount",!0)},[ae,L]),Be(()=>{D(L!==null)},[L,D]),Be(function(){if(J)return;const Te=ne.current;if(b){const gt=Array.isArray(L)?L:[];if(gt.length===0){ae.set("selectedIndex",null);return}const ot=gt[gt.length-1],mn=rr(Te,ot,N);ae.set("selectedIndex",mn===-1?null:mn);return}const xt=rr(Te,L,N);ae.set("selectedIndex",xt===-1?null:xt)},[b,J,L,ne,N,ae]),Ij(L,()=>{S(R),k(L!==E.initialValue),I()?T.commit(L):T.commit(L,!0)});const Xt=Ye((oe,Te)=>{if(o?.(oe,Te),!Te.isCanceled&&(Z(oe),!oe&&ae.state.activeIndex!==null)){const xt=q.current[ae.state.activeIndex];queueMicrotask(()=>{xt?.setAttribute("tabindex","-1")})}}),Zt=Ye(()=>{xe(!1),ae.set("activeIndex",null),ke(),f?.(!1)});la({enabled:!g,open:J,ref:ue,onComplete(){J||Zt()}}),l.useImperativeHandle(g,()=>({unmount:Zt}),[Zt]);const pt=Ye((oe,Te)=>{r?.(oe,Te),!Te.isCanceled&&W(oe)}),Je=Ye(()=>{const oe=ae.state.listElement||ue.current;if(!oe)return;const Te=oe.scrollTop,xt=oe.scrollTop+oe.clientHeight,gt=Te>1,ot=xt<oe.scrollHeight-1;ae.state.scrollUpArrowVisible!==gt&&ae.set("scrollUpArrowVisible",gt),ae.state.scrollDownArrowVisible!==ot&&ae.set("scrollDownArrowVisible",ot)}),it=Am({open:J,onOpenChange:Xt,elements:{reference:rt,floating:Pe}}),ws=oh(it,{enabled:!m&&!_,event:"mousedown"}),dn=ch(it,{bubbles:!1}),xa=Im(it,{enabled:!m&&!_,listRef:q,activeIndex:$e,selectedIndex:at,disabledIndices:ji,onNavigate(oe){oe===null&&!J||ae.set("activeIndex",oe)},focusItemOnHover:!1}),ga=Tm(it,{enabled:!m&&!_&&(J||!b),listRef:K,activeIndex:$e,selectedIndex:at,onMatch(oe){J?ae.set("activeIndex",oe):pt(ne.current[oe],ut("none"))},onTypingChange(oe){O.current=oe}}),{getReferenceProps:Ss,getFloatingProps:es,getItemProps:un}=lh([ws,dn,xa,ga]),Cs=l.useMemo(()=>jc(Ss(),Ce),[Ss,Ce]);Nj(()=>{ae.update({popupProps:es(),triggerProps:Cs})}),Be(()=>{ae.update({id:B,modal:p,multiple:b,value:L,open:J,mounted:ie,transitionStatus:Re,popupProps:es(),triggerProps:Cs,items:x,itemToStringLabel:v,itemToStringValue:j,isItemEqualToValue:N,openMethod:Fe})},[ae,B,p,b,L,J,ie,Re,es,Cs,x,v,j,N,Fe]);const At=l.useMemo(()=>({store:ae,name:R,required:h,disabled:_,readOnly:m,multiple:b,itemToStringLabel:v,itemToStringValue:j,highlightItemOnHover:w,setValue:pt,setOpen:Xt,listRef:q,popupRef:ue,scrollHandlerRef:U,handleScrollArrowVisibility:Je,scrollArrowsMountedCountRef:G,getItemProps:un,events:it.context.events,valueRef:le,valuesRef:ne,labelsRef:K,typingRef:O,selectionRef:re,selectedItemTextRef:X,validation:T,onOpenChangeComplete:f,keyboardActiveRef:se,alignItemWithTriggerActiveRef:Ne,initialValueRef:Ns}),[ae,R,h,_,m,b,v,j,w,pt,Xt,un,it.context.events,T,f,Je]),ks=Nc(y,T.inputRef),va=b&&Array.isArray(L)&&L.length>0,ba=l.useMemo(()=>!b||!Array.isArray(L)||!R?null:L.map(oe=>{const Te=rs(oe,j);return t.jsx("input",{type:"hidden",name:R,value:Te},Te)}),[b,L,R,j]);return t.jsx(bu.Provider,{value:At,children:t.jsxs(yu.Provider,{value:it,children:[M,t.jsx("input",{...T.getInputValidationProps({onFocus(){ae.state.triggerElement?.focus()},onChange(oe){if(oe.nativeEvent.defaultPrevented)return;const Te=oe.target.value,xt=ut(kc,oe.nativeEvent);function gt(){if(b)return;const ot=ne.current.find(mn=>rs(mn,j).toLowerCase()===Te.toLowerCase());ot!=null&&(k(ot!==E.initialValue),pt(ot,xt),I()&&T.commit(ot))}ae.set("forceMount",!0),queueMicrotask(gt)}}),id:s||C||void 0,name:b?void 0:R,value:js,disabled:_,required:h&&!va,readOnly:m,ref:ks,style:dh,tabIndex:-1,"aria-hidden":!0}),ba]})})}const yn=2,Ej={...fh,...$m,value:()=>null},Pj=l.forwardRef(function(s,n){const{render:a,className:r,disabled:i=!1,nativeButton:c=!0,...o}=s,{setTouched:u,setFocused:d,validationMode:m,state:h,disabled:p}=tc(),{labelId:g}=sc(),{store:y,setOpen:f,selectionRef:x,validation:b,readOnly:v,alignItemWithTriggerActiveRef:j,disabled:N,keyboardActiveRef:w}=nt(),M=p||N||i,S=ee(y,Y.open),k=ee(y,Y.value),I=ee(y,Y.triggerProps),E=ee(y,Y.positionerElement),D=ee(y,Y.listElement),P=ee(y,Y.serializedValue),A=Tr(E),T=l.useRef(null),C=Mt(),B=Mt(),{getButtonProps:_,buttonRef:R}=Ac({disabled:M,native:c}),L=Ye(U=>{y.set("triggerElement",U)}),W=Nc(n,T,R,L),J=Mt(),Z=Mt();l.useEffect(()=>{if(S)return Z.start(200,()=>{x.current.allowUnselectedMouseUp=!0,J.start(200,()=>{x.current.allowSelectedMouseUp=!0})}),()=>{J.clear(),Z.clear()};x.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1},B.clear()},[S,x,B,J,Z]);const q=l.useMemo(()=>D?.id??mh(E)?.id,[D,E]),K=jc(I,{role:"combobox","aria-expanded":S?"true":"false","aria-haspopup":"listbox","aria-controls":S?q:void 0,"aria-labelledby":g,"aria-readonly":v||void 0,tabIndex:M?-1:0,ref:W,onFocus(U){d(!0),S&&j.current&&f(!1,ut(Sh,U.nativeEvent)),C.start(0,()=>{y.set("forceMount",!0)})},onBlur(){u(!0),d(!1),m==="onBlur"&&b.commit(k)},onPointerMove(){w.current=!1},onKeyDown(){w.current=!0},onMouseDown(U){if(S)return;const G=Ua(U.currentTarget);function le(ne){if(!T.current)return;const O=ne.target;if(wi(T.current,O)||wi(A.current,O)||O===T.current)return;const se=Em(T.current);ne.clientX>=se.left-yn&&ne.clientX<=se.right+yn&&ne.clientY>=se.top-yn&&ne.clientY<=se.bottom+yn||f(!1,ut(Ch,ne))}B.start(0,()=>{G.addEventListener("mouseup",le,{once:!0})})}},b.getValidationProps,o,_);K.role="combobox";const ue=l.useMemo(()=>({...h,open:S,disabled:M,value:k,readOnly:v,placeholder:!P}),[h,S,M,k,v,P]);return st("button",s,{ref:[n,T],state:ue,stateAttributesMapping:Ej,props:K})}),_j={value:()=>null},Mj=l.forwardRef(function(s,n){const{className:a,render:r,children:i,...c}=s,{store:o,valueRef:u}=nt(),d=ee(o,Y.value),m=ee(o,Y.items),h=ee(o,Y.itemToStringLabel),p=ee(o,Y.serializedValue),g=l.useMemo(()=>({value:d,placeholder:!p}),[d,p]),y=typeof i=="function"?i(d):i??(Array.isArray(d)?Aj(d,h):kj(d,m,h));return st("span",s,{state:g,ref:[n,u],props:[{children:y},c],stateAttributesMapping:_j})}),Rj=l.forwardRef(function(s,n){const{className:a,render:r,...i}=s,{store:c}=nt(),o=ee(c,Y.open),u=l.useMemo(()=>({open:o}),[o]);return st("span",s,{state:u,ref:n,props:[{"aria-hidden":!0,children:""},i],stateAttributesMapping:hh})}),Dj=l.createContext(void 0),zj=l.forwardRef(function(s,n){const{store:a}=nt(),r=ee(a,Y.mounted),i=ee(a,Y.forceMount);return r||i?t.jsx(Dj.Provider,{value:!0,children:t.jsx(ph,{ref:n,...s})}):null}),Nu=l.createContext(void 0);function oi(){const e=l.useContext(Nu);if(!e)throw new Error(ca(59));return e}function Zn(e,s){e&&Object.assign(e.style,s)}const wu={position:"relative",maxHeight:"100%",overflowX:"hidden",overflowY:"auto"},Bj={position:"fixed"},Lj=l.forwardRef(function(s,n){const{anchor:a,positionMethod:r="absolute",className:i,render:c,side:o="bottom",align:u="center",sideOffset:d=0,alignOffset:m=0,collisionBoundary:h="clipping-ancestors",collisionPadding:p,arrowPadding:g=5,sticky:y=!1,disableAnchorTracking:f,alignItemWithTrigger:x=!0,collisionAvoidance:b=xh,...v}=s,{store:j,listRef:N,labelsRef:w,alignItemWithTriggerActiveRef:M,selectedItemTextRef:S,valuesRef:k,initialValueRef:I,popupRef:E,setValue:D}=nt(),P=ju(),A=ee(j,Y.open),T=ee(j,Y.mounted),C=ee(j,Y.modal),B=ee(j,Y.value),_=ee(j,Y.openMethod),R=ee(j,Y.positionerElement),L=ee(j,Y.triggerElement),W=ee(j,Y.isItemEqualToValue),J=l.useRef(null),Z=l.useRef(null),[q,K]=l.useState(x),ue=T&&q&&_!=="touch";!T&&q!==x&&K(x),Be(()=>{T||(Y.scrollUpArrowVisible(j.state)&&j.set("scrollUpArrowVisible",!1),Y.scrollDownArrowVisible(j.state)&&j.set("scrollDownArrowVisible",!1))},[j,T]),l.useImperativeHandle(M,()=>ue),gh((ue||C)&&A&&_!=="touch",L);const U=Pm({anchor:a,floatingRootContext:P,positionMethod:r,mounted:T,side:o,sideOffset:d,align:u,alignOffset:m,arrowPadding:g,collisionBoundary:h,collisionPadding:p,sticky:y,disableAnchorTracking:f??ue,collisionAvoidance:b,keepMounted:!0}),G=ue?"none":U.side,le=ue?Bj:U.positionerStyles,ne=l.useMemo(()=>{const xe={};return A||(xe.pointerEvents="none"),{role:"presentation",hidden:!T,style:{...le,...xe}}},[A,T,le]),O=l.useMemo(()=>({open:A,side:G,align:U.align,anchorHidden:U.anchorHidden}),[A,G,U.align,U.anchorHidden]),se=Ye(xe=>{j.set("positionerElement",xe)}),X=st("div",s,{ref:[n,se],state:O,stateAttributesMapping:Sc,props:[ne,v]}),re=l.useRef(0),Ne=Ye(xe=>{if(xe.size===0&&re.current===0||k.current.length===0)return;const Re=re.current;if(re.current=xe.size,xe.size===Re)return;const Fe=ut(kc);if(Re!==0&&!j.state.multiple&&B!==null&&rr(k.current,B,W)===-1){const ke=I.current,$e=ke!=null&&Da(k.current,ke,W)?ke:null;D($e,Fe),$e===null&&(j.set("selectedIndex",null),S.current=null)}if(Re!==0&&j.state.multiple&&Array.isArray(B)){const Ce=B.filter(ke=>Da(k.current,ke,W));(Ce.length!==B.length||Ce.some(ke=>!Da(B,ke,W)))&&(D(Ce,Fe),Ce.length===0&&(j.set("selectedIndex",null),S.current=null))}if(A&&ue){j.update({scrollUpArrowVisible:!1,scrollDownArrowVisible:!1});const Ce={height:""};Zn(R,Ce),Zn(E.current,Ce)}}),ie=l.useMemo(()=>({...U,side:G,alignItemWithTriggerActive:ue,setControlledAlignItemWithTrigger:K,scrollUpArrowRef:J,scrollDownArrowRef:Z}),[U,G,ue,K]);return t.jsx(_m,{elementsRef:N,labelsRef:w,onMapChange:Ne,children:t.jsxs(Nu.Provider,{value:ie,children:[T&&C&&t.jsx(vh,{inert:bh(!A),cutout:L}),X]})})});function Su(e){const s=e.currentTarget.getBoundingClientRect();return s.top+1<=e.clientY&&e.clientY<=s.bottom-1&&s.left+1<=e.clientX&&e.clientX<=s.right-1}const jn="base-ui-disable-scrollbar",or={className:jn,element:t.jsx("style",{href:jn,precedence:"base-ui:low",children:`.${jn}{scrollbar-width:none}.${jn}::-webkit-scrollbar{display:none}`})},Oj={...Sc,...Cc},Fj=l.forwardRef(function(s,n){const{render:a,className:r,...i}=s,{store:c,popupRef:o,onOpenChangeComplete:u,setOpen:d,valueRef:m,selectedItemTextRef:h,keyboardActiveRef:p,multiple:g,handleScrollArrowVisibility:y,scrollHandlerRef:f}=nt(),{side:x,align:b,alignItemWithTriggerActive:v,setControlledAlignItemWithTrigger:j,scrollDownArrowRef:N,scrollUpArrowRef:w}=oi(),M=Mm()!=null,S=ju(),k=Mt(),I=ee(c,Y.id),E=ee(c,Y.open),D=ee(c,Y.mounted),P=ee(c,Y.popupProps),A=ee(c,Y.transitionStatus),T=ee(c,Y.triggerElement),C=ee(c,Y.positionerElement),B=ee(c,Y.listElement),_=l.useRef(0),R=l.useRef(!1),L=l.useRef(0),W=l.useRef(!1),J=l.useRef({}),Z=yh(),q=Ye(G=>{if(!C||!o.current||!W.current)return;if(R.current||!v){y();return}const le=C.style.top==="0px",ne=C.style.bottom==="0px",O=C.getBoundingClientRect().height,se=Ua(C),X=getComputedStyle(C),re=parseFloat(X.marginTop),Ne=parseFloat(X.marginBottom),ie=se.documentElement.clientHeight-re-Ne,xe=G.scrollTop,Re=G.scrollHeight,Fe=G.clientHeight,Ce=Re-Fe;let ke=null,ae=null,$e=!1;if(le){const at=Ce-xe,rt=O+at,Pe=Math.min(rt,ie);ke=Pe,Pe!==ie?ae=Ce:$e=!0}else if(ne){const at=xe-0,rt=O+at,Pe=Math.min(rt,ie),js=rt-ie;ke=Pe,Pe!==ie?ae=0:($e=!0,xe<Ce&&(ae=xe-(at-js)))}ke!=null&&(C.style.height=`${ke}px`),ae!=null&&(G.scrollTop=ae),$e&&(R.current=!0),y()});l.useImperativeHandle(f,()=>q,[q]),la({open:E,ref:o,onComplete(){E&&u?.(!0)}});const K=l.useMemo(()=>({open:E,transitionStatus:A,side:x,align:b}),[E,A,x,b]);Be(()=>{!C||!o.current||Object.keys(J.current).length||(J.current={top:C.style.top||"0",left:C.style.left||"0",right:C.style.right,height:C.style.height,bottom:C.style.bottom,minHeight:C.style.minHeight,maxHeight:C.style.maxHeight,marginTop:C.style.marginTop,marginBottom:C.style.marginBottom})},[o,C]),Be(()=>{D||v||(W.current=!1,R.current=!1,_.current=0,L.current=0,Zn(C,J.current))},[D,v,C,o]),Be(()=>{const G=o.current;if(!(!D||!T||!C||!G)){if(!v){W.current=!0,Z.request(y);return}queueMicrotask(()=>{const le=getComputedStyle(C),ne=getComputedStyle(G),O=Ua(T),se=Ni(C),X=T.getBoundingClientRect(),re=C.getBoundingClientRect(),Ne=X.left,ie=X.height,xe=B||G,Re=xe.scrollHeight,Fe=parseFloat(ne.borderBottomWidth),Ce=parseFloat(le.marginTop)||10,ke=parseFloat(le.marginBottom)||10,ae=parseFloat(le.minHeight)||100,$e=5,at=5,rt=20,Pe=O.documentElement.clientHeight-Ce-ke,js=O.documentElement.clientWidth,pa=Pe-X.bottom+ie,ln=h.current,Ns=m.current;let Xt=0,Zt=0;if(ln&&Ns){const At=Ns.getBoundingClientRect(),ks=ln.getBoundingClientRect(),va=At.left-Ne,ba=ks.left-re.left,oe=At.top-X.top+At.height/2,Te=ks.top-re.top+ks.height/2;Xt=va-ba,Zt=Te-oe}const pt=pa+Zt+ke+Fe;let Je=Math.min(Pe,pt);const it=Pe-Ce-ke,ws=pt-Je,dn=Math.max($e,Ne+Xt),xa=js-at,ga=Math.max(0,dn+re.width-xa);C.style.left=`${dn-ga}px`,C.style.height=`${Je}px`,C.style.maxHeight="auto",C.style.marginTop=`${Ce}px`,C.style.marginBottom=`${ke}px`,G.style.height="100%";const Ss=xe.scrollHeight-xe.clientHeight,es=ws>=Ss;es&&(Je=Math.min(Pe,re.height)-(ws-Ss));const un=X.top<rt||X.bottom>Pe-rt||Je<Math.min(Re,ae),Cs=(se.visualViewport?.scale??1)!==1&&jh;if(un||Cs){W.current=!0,Zn(C,J.current),Ah.flushSync(()=>j(!1));return}if(es){const At=Math.max(0,Pe-pt);C.style.top=re.height>=it?"0":`${At}px`,C.style.height=`${Je}px`,xe.scrollTop=xe.scrollHeight-xe.clientHeight,_.current=Math.max(ae,Je)}else C.style.bottom="0",_.current=Math.max(ae,Je),xe.scrollTop=ws;_.current===Pe&&(R.current=!0),y(),setTimeout(()=>{W.current=!0})})}},[c,D,C,T,m,h,o,y,v,j,Z,N,w,B]),l.useEffect(()=>{if(!v||!C||!D)return;const G=Ni(C);function le(ne){d(!1,ut(kh,ne))}return G.addEventListener("resize",le),()=>{G.removeEventListener("resize",le)}},[d,v,C,D]);const ue={...B?{role:"presentation","aria-orientation":void 0}:{role:"listbox","aria-multiselectable":g||void 0,id:`${I}-list`},onKeyDown(G){p.current=!0,M&&wh.has(G.key)&&G.stopPropagation()},onMouseMove(){p.current=!1},onPointerLeave(G){if(Su(G)||G.pointerType==="touch")return;const le=G.currentTarget;k.start(0,()=>{c.set("activeIndex",null),le.focus({preventScroll:!0})})},onScroll(G){B||f.current?.(G.currentTarget)},...v&&{style:B?{height:"100%"}:wu}},U=st("div",s,{ref:[n,o],state:K,stateAttributesMapping:Oj,props:[P,ue,Rm(A),{className:!B&&v?or.className:void 0},i]});return t.jsxs(l.Fragment,{children:[or.element,t.jsx(Nh,{context:S,modal:!1,disabled:!D,restoreFocus:!0,children:U})]})}),$j=l.forwardRef(function(s,n){const{className:a,render:r,...i}=s,{store:c,scrollHandlerRef:o}=nt(),{alignItemWithTriggerActive:u}=oi(),d=ee(c,Y.hasScrollArrows),m=ee(c,Y.openMethod),h=ee(c,Y.multiple),g={id:`${ee(c,Y.id)}-list`,role:"listbox","aria-multiselectable":h||void 0,onScroll(f){o.current?.(f.currentTarget)},...u&&{style:wu},className:d&&m!=="touch"?or.className:void 0},y=Ye(f=>{c.set("listElement",f)});return st("div",s,{ref:[n,y],props:[g,i]})}),Cu=l.createContext(void 0);function ci(){const e=l.useContext(Cu);if(!e)throw new Error(ca(57));return e}const Wj=l.memo(l.forwardRef(function(s,n){const{render:a,className:r,value:i=null,label:c,disabled:o=!1,nativeButton:u=!1,...d}=s,m=l.useRef(null),h=Dm({label:c,textRef:m,indexGuessBehavior:zm.GuessFromOrder}),{store:p,getItemProps:g,setOpen:y,setValue:f,selectionRef:x,typingRef:b,valuesRef:v,keyboardActiveRef:j,multiple:N,highlightItemOnHover:w}=nt(),M=Mt(),S=ee(p,Y.isActive,h.index),k=ee(p,Y.isSelected,h.index,i),I=ee(p,Y.isSelectedByFocus,h.index),E=ee(p,Y.isItemEqualToValue),D=h.index,P=D!==-1,A=l.useRef(null),T=Tr(D);Be(()=>{if(!P)return;const U=v.current;return U[D]=i,()=>{delete U[D]}},[P,D,i,v]),Be(()=>{if(!P)return;const U=p.state.value;let G=U;N&&Array.isArray(U)&&U.length>0&&(G=U[U.length-1]),G!==void 0&&gs(G,i,E)&&p.set("selectedIndex",D)},[P,D,N,E,p,i]);const C=l.useMemo(()=>({disabled:o,selected:k,highlighted:S}),[o,k,S]),B=g({active:S,selected:k});B.onFocus=void 0,B.id=void 0;const _=l.useRef(null),R=l.useRef("mouse"),L=l.useRef(!1),{getButtonProps:W,buttonRef:J}=Ac({disabled:o,focusableWhenDisabled:!0,native:u});function Z(U){const G=p.state.value;if(N){const le=Array.isArray(G)?G:[],ne=k?Sj(le,i,E):[...le,i];f(ne,ut(ya,U))}else f(i,ut(ya,U)),y(!1,ut(ya,U))}const q={role:"option","aria-selected":k,"aria-disabled":o||void 0,tabIndex:S?0:-1,onFocus(){p.set("activeIndex",D)},onMouseEnter(){!j.current&&p.state.selectedIndex===null&&p.set("activeIndex",D)},onMouseMove(){w&&p.set("activeIndex",D)},onMouseLeave(U){!w||j.current||Su(U)||M.start(0,()=>{p.state.activeIndex===D&&p.set("activeIndex",null)})},onTouchStart(){x.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}},onKeyDown(U){_.current=U.key,p.set("activeIndex",D)},onClick(U){L.current=!1,!(U.type==="keydown"&&_.current===null)&&(o||_.current===" "&&b.current||R.current!=="touch"&&!S||(_.current=null,Z(U.nativeEvent)))},onPointerEnter(U){R.current=U.pointerType},onPointerDown(U){R.current=U.pointerType,L.current=!0},onMouseUp(U){if(o)return;if(L.current){L.current=!1;return}const G=!x.current.allowSelectedMouseUp&&k,le=!x.current.allowUnselectedMouseUp&&!k;G||le||R.current!=="touch"&&!S||Z(U.nativeEvent)}},K=st("div",s,{ref:[J,n,h.ref,A],state:C,props:[B,q,d,W]}),ue=l.useMemo(()=>({selected:k,indexRef:T,textRef:m,selectedByFocus:I,hasRegistered:P}),[k,T,m,I,P]);return t.jsx(Cu.Provider,{value:ue,children:K})})),Hj=l.forwardRef(function(s,n){const a=s.keepMounted??!1,{selected:r}=ci();return a||r?t.jsx(qj,{...s,ref:n}):null}),qj=l.memo(l.forwardRef((e,s)=>{const{render:n,className:a,keepMounted:r,...i}=e,{selected:c}=ci(),o=l.useRef(null),{transitionStatus:u,setMounted:d}=Ir(c),m=l.useMemo(()=>({selected:c,transitionStatus:u}),[c,u]),h=st("span",e,{ref:[s,o],state:m,props:[{"aria-hidden":!0,children:""},i],stateAttributesMapping:Cc});return la({open:c,ref:o,onComplete(){c||d(!1)}}),h})),Uj=l.memo(l.forwardRef(function(s,n){const{indexRef:a,textRef:r,selectedByFocus:i,hasRegistered:c}=ci(),{selectedItemTextRef:o}=nt(),{className:u,render:d,...m}=s,h=l.useCallback(g=>{if(!g||!c)return;const y=o.current===null||!o.current.isConnected;(i||y&&a.current===0)&&(o.current=g)},[o,a,i,c]);return st("div",s,{ref:[h,n,r],props:m})})),ku=l.forwardRef(function(s,n){const{render:a,className:r,direction:i,keepMounted:c=!1,...o}=s,{store:u,popupRef:d,listRef:m,handleScrollArrowVisibility:h,scrollArrowsMountedCountRef:p}=nt(),{side:g,scrollDownArrowRef:y,scrollUpArrowRef:f}=oi(),x=i==="up"?Y.scrollUpArrowVisible:Y.scrollDownArrowVisible,b=ee(u,x),v=ee(u,Y.openMethod),j=b&&v!=="touch",N=Mt(),w=i==="up"?f:y,{transitionStatus:M,setMounted:S}=Ir(j);Be(()=>(p.current+=1,u.state.hasScrollArrows||u.set("hasScrollArrows",!0),()=>{p.current=Math.max(0,p.current-1),p.current===0&&u.state.hasScrollArrows&&u.set("hasScrollArrows",!1)}),[u,p]),la({open:j,ref:w,onComplete(){j||S(!1)}});const k=l.useMemo(()=>({direction:i,visible:j,side:g,transitionStatus:M}),[i,j,g,M]),E=st("div",s,{ref:[n,w],state:k,props:[{"aria-hidden":!0,children:i==="up"?"":"",style:{position:"absolute"},onMouseMove(P){if(P.movementX===0&&P.movementY===0||N.isStarted())return;u.set("activeIndex",null);function A(){const T=u.state.listElement??d.current;if(!T)return;u.set("activeIndex",null),h();const C=T.scrollTop===0,B=Math.round(T.scrollTop+T.clientHeight)>=T.scrollHeight;if(m.current.length===0&&(i==="up"?u.set("scrollUpArrowVisible",!C):u.set("scrollDownArrowVisible",!B)),i==="up"&&C||i==="down"&&B){N.clear();return}if((u.state.listElement||d.current)&&m.current&&m.current.length>0){const R=m.current,L=w.current?.offsetHeight||0;if(i==="up"){let W=0;const J=T.scrollTop+L;for(let q=0;q<R.length;q+=1){const K=R[q];if(K&&K.offsetTop>=J){W=q;break}}const Z=Math.max(0,W-1);if(Z<W){const q=R[Z];q&&(T.scrollTop=Math.max(0,q.offsetTop-L))}else T.scrollTop=0}else{let W=R.length-1;const J=T.scrollTop+T.clientHeight-L;for(let q=0;q<R.length;q+=1){const K=R[q];if(K&&K.offsetTop+K.offsetHeight>J){W=Math.max(0,q-1);break}}const Z=Math.min(R.length-1,W+1);if(Z>W){const q=R[Z];q&&(T.scrollTop=q.offsetTop+q.offsetHeight-T.clientHeight+L)}else T.scrollTop=T.scrollHeight-T.clientHeight}}N.start(40,A)}N.start(40,A)},onMouseLeave(){N.clear()}},o]});return j||c?E:null}),Vj=l.forwardRef(function(s,n){return t.jsx(ku,{...s,ref:n,direction:"down"})}),Jj=l.forwardRef(function(s,n){return t.jsx(ku,{...s,ref:n,direction:"up"})}),ea=Tj;function Us({className:e,...s}){return t.jsx(Mj,{"data-slot":"select-value",className:z("flex flex-1 text-left",e),...s})}function Vs({className:e,size:s="default",children:n,...a}){return t.jsxs(Pj,{"data-slot":"select-trigger","data-size":s,className:z("border-input data-[placeholder]:text-muted-foreground dark:bg-input/30 dark:hover:bg-input/50 focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 gap-1.5 rounded-lg border bg-transparent py-2 pr-2 pl-2.5 text-sm transition-colors select-none focus-visible:ring-[3px] aria-invalid:ring-[3px] data-[size=default]:h-8 data-[size=sm]:h-7 data-[size=sm]:rounded-[min(var(--radius-md),10px)] *:data-[slot=select-value]:flex *:data-[slot=select-value]:gap-1.5 [&_svg:not([class*='size-'])]:size-4 flex w-fit items-center justify-between whitespace-nowrap outline-none disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center [&_svg]:pointer-events-none [&_svg]:shrink-0",e),...a,children:[n,t.jsx(Rj,{render:t.jsx(Hp,{className:"text-muted-foreground size-4 pointer-events-none"})})]})}function Js({className:e,children:s,side:n="bottom",sideOffset:a=4,align:r="center",alignOffset:i=0,alignItemWithTrigger:c=!0,...o}){return t.jsx(zj,{children:t.jsx(Lj,{side:n,sideOffset:a,align:r,alignOffset:i,alignItemWithTrigger:c,className:"isolate z-50",children:t.jsxs(Fj,{"data-slot":"select-content",className:z("bg-popover text-popover-foreground data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 ring-foreground/10 min-w-36 rounded-lg shadow-md ring-1 duration-100 relative isolate z-50 max-h-(--available-height) w-(--anchor-width) origin-(--transform-origin) overflow-x-hidden overflow-y-auto",e),...o,children:[t.jsx(Au,{}),t.jsx($j,{children:s}),t.jsx(Iu,{})]})})})}function Vt({className:e,children:s,...n}){return t.jsxs(Wj,{"data-slot":"select-item",className:z("focus:bg-accent focus:text-accent-foreground not-data-[variant=destructive]:focus:**:text-accent-foreground gap-1.5 rounded-md py-1 pr-8 pl-1.5 text-sm [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2 relative flex w-full cursor-default items-center outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0",e),...n,children:[t.jsx(Uj,{className:"flex flex-1 gap-2 shrink-0 whitespace-nowrap",children:s}),t.jsx(Hj,{render:t.jsx("span",{className:"pointer-events-none absolute right-2 flex size-4 items-center justify-center"}),children:t.jsx(Se,{className:"pointer-events-none"})})]})}function Au({className:e,...s}){return t.jsx(Jj,{"data-slot":"select-scroll-up-button",className:z("bg-popover z-10 flex cursor-default items-center justify-center py-1 [&_svg:not([class*='size-'])]:size-4 top-0 w-full",e),...s,children:t.jsx(Pr,{})})}function Iu({className:e,...s}){return t.jsx(Vj,{"data-slot":"select-scroll-down-button",className:z("bg-popover z-10 flex cursor-default items-center justify-center py-1 [&_svg:not([class*='size-'])]:size-4 bottom-0 w-full",e),...s,children:t.jsx(wr,{})})}Js.__docgenInfo={description:"",methods:[],displayName:"SelectContent",props:{side:{defaultValue:{value:'"bottom"',computed:!1},required:!1},sideOffset:{defaultValue:{value:"4",computed:!1},required:!1},align:{defaultValue:{value:'"center"',computed:!1},required:!1},alignOffset:{defaultValue:{value:"0",computed:!1},required:!1},alignItemWithTrigger:{defaultValue:{value:"true",computed:!1},required:!1}}};Vt.__docgenInfo={description:"",methods:[],displayName:"SelectItem"};Iu.__docgenInfo={description:"",methods:[],displayName:"SelectScrollDownButton"};Au.__docgenInfo={description:"",methods:[],displayName:"SelectScrollUpButton"};Vs.__docgenInfo={description:"",methods:[],displayName:"SelectTrigger",props:{size:{required:!1,tsType:{name:"union",raw:'"sm" | "default"',elements:[{name:"literal",value:'"sm"'},{name:"literal",value:'"default"'}]},description:"",defaultValue:{value:'"default"',computed:!1}}}};Us.__docgenInfo={description:"",methods:[],displayName:"SelectValue"};function Tu({initialChain:e}){const{navigate:s,goBack:n}=me(),a=Le(),r=na(),i=Ct(),{t:c}=F(["transaction","common"]),{transactions:o,isLoading:u,isFetching:d,filter:m,setFilter:h,refresh:p}=si(a?.id),g=l.useMemo(()=>[{value:"all",label:c("history.filter.allTime")},{value:"7d",label:c("history.filter.days7")},{value:"30d",label:c("history.filter.days30")},{value:"90d",label:c("history.filter.days90")}],[c]),y=l.useMemo(()=>[{value:"all",label:c("history.filter.allChains")},...r.map(v=>({value:v.id,label:v.name}))],[c,r]);l.useEffect(()=>{const v=e??i;v&&m.chain!==v&&h({...m,chain:v})},[]);const f=l.useCallback(v=>{if(!v.id){console.warn("[TransactionHistory] Transaction has no id:",v);return}s({to:`/transaction/${v.id}`})},[s]),x=l.useCallback(v=>{h({...m,chain:v})},[m,h]),b=l.useCallback(v=>{h({...m,period:v})},[m,h]);return a?t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:c("transaction:history.title"),onBack:n,rightAction:t.jsx("button",{onClick:p,disabled:d,className:z("rounded-full p-2 transition-colors","hover:bg-muted active:bg-muted/80",d&&"animate-spin"),"aria-label":c("common:a11y.refresh"),children:t.jsx(en,{className:"size-5"})})}),t.jsxs("div",{className:"bg-card border-b px-4 py-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Rc,{className:"text-muted-foreground size-4"}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"text-muted-foreground text-xs",children:c("history.filter.chainLabel")}),t.jsxs(ea,{value:m.chain||"all",onValueChange:v=>x(v),children:[t.jsx(Vs,{size:"sm","aria-label":c("common:a11y.selectChain"),children:t.jsx(Us,{children:y.find(v=>v.value===(m.chain||"all"))?.label})}),t.jsx(Js,{children:y.map(v=>t.jsx(Vt,{value:v.value,children:v.label},v.value))})]})]}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"text-muted-foreground text-xs",children:c("history.filter.periodLabel")}),t.jsxs(ea,{value:m.period||"all",onValueChange:v=>b(v),children:[t.jsx(Vs,{size:"sm","aria-label":c("common:a11y.selectPeriod"),children:t.jsx(Us,{children:g.find(v=>v.value===(m.period||"all"))?.label})}),t.jsx(Js,{children:g.map(v=>t.jsx(Vt,{value:v.value,children:v.label},v.value))})]})]})]}),t.jsx("p",{className:"text-muted-foreground mt-2 text-xs",children:c("transaction:history.totalRecords",{count:o.length})})]}),t.jsx("div",{className:"flex-1 p-4",children:t.jsx(xr,{transactions:o,loading:u,onTransactionClick:f,emptyTitle:c("transaction:history.emptyTitle"),emptyDescription:c("transaction:history.emptyDesc"),showChainIcon:!0})})]}):t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:c("transaction:history.title"),onBack:n}),t.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:t.jsx("p",{className:"text-muted-foreground",children:c("transaction:history.noWallet")})})]})}Tu.__docgenInfo={description:"",methods:[],displayName:"TransactionHistoryPage",props:{initialChain:{required:!1,tsType:{name:"union",raw:"ChainType | 'all' | undefined",elements:[{name:"ChainType"},{name:"literal",value:"'all'"},{name:"undefined"}]},description:"'all' "}}};const Eu=()=>{const e=rx();return t.jsx(ce,{children:t.jsx(Tu,{initialChain:e.chain})})};Eu.__docgenInfo={description:"",methods:[],displayName:"HistoryActivity"};const Mo={send:{Icon:cc,color:"text-tx-out",bg:"bg-tx-out/10"},destroy:{Icon:Bf,color:"text-tx-out",bg:"bg-tx-out/10"},emigrate:{Icon:zf,color:"text-tx-out",bg:"bg-tx-out/10"},destroyEntity:{Icon:wt,color:"text-tx-out",bg:"bg-tx-out/10"},receive:{Icon:tn,color:"text-tx-in",bg:"bg-tx-in/10"},grab:{Icon:Df,color:"text-tx-in",bg:"bg-tx-in/10"},immigrate:{Icon:Rf,color:"text-tx-in",bg:"bg-tx-in/10"},signFor:{Icon:In,color:"text-tx-in",bg:"bg-tx-in/10"},exchange:{Icon:Mf,color:"text-tx-exchange",bg:"bg-tx-exchange/10"},stake:{Icon:Xs,color:"text-tx-lock",bg:"bg-tx-lock/10"},unstake:{Icon:_f,color:"text-tx-lock",bg:"bg-tx-lock/10"},trust:{Icon:Pf,color:"text-tx-lock",bg:"bg-tx-lock/10"},signature:{Icon:oc,color:"text-tx-security",bg:"bg-tx-security/10"},gift:{Icon:Ef,color:"text-tx-create",bg:"bg-tx-create/10"},issueAsset:{Icon:Mh,color:"text-tx-create",bg:"bg-tx-create/10"},increaseAsset:{Icon:_h,color:"text-tx-create",bg:"bg-tx-create/10"},issueEntity:{Icon:Tf,color:"text-tx-create",bg:"bg-tx-create/10"},locationName:{Icon:If,color:"text-tx-system",bg:"bg-tx-system/10"},dapp:{Icon:Zs,color:"text-tx-system",bg:"bg-tx-system/10"},certificate:{Icon:Af,color:"text-tx-system",bg:"bg-tx-system/10"},mark:{Icon:jr,color:"text-tx-system",bg:"bg-tx-system/10"},other:{Icon:Ph,color:"text-tx-system",bg:"bg-tx-system/10"}},Kj={confirmed:"success",pending:"pending",failed:"failed"};function Pu(){const{t:e}=F("transaction"),{goBack:s}=me(),{txId:n}=be(),a=Le(),r=sa(),{transactions:i,isLoading:c}=si(a?.id),[o,u]=l.useState(!1),d=l.useMemo(()=>i.find(N=>N.id===n),[i,n]),m=l.useMemo(()=>d?.chain?Os.getChainById(r,d.chain):null,[r,d?.chain]),h=l.useMemo(()=>{const N=m?.explorer?.queryTx;return!N||!d?.hash?null:N.replace(":signature",d.hash)},[d?.hash,m?.explorer?.queryTx]),p=l.useCallback(async()=>{d?.hash&&(await zn.write({text:d.hash}),u(!0),setTimeout(()=>u(!1),2e3))},[d?.hash]),[g,y]=l.useState(!1),f=l.useCallback(async()=>{h&&(await zn.write({text:h}),y(!0),setTimeout(()=>y(!1),2e3))},[h]),x=l.useCallback(()=>{s()},[s]);if(!a)return t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("detail.title"),onBack:x}),t.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:t.jsx("p",{className:"text-muted-foreground",children:e("history.noWallet")})})]});if(c)return t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("detail.title"),onBack:x}),t.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[t.jsx(ja,{className:"h-48"}),t.jsx(ja,{className:"h-64"}),t.jsx(ja,{className:"h-32"})]})]});if(!d)return t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("detail.title"),onBack:x}),t.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:t.jsx("p",{className:"text-muted-foreground",children:e("detail.notFound")})})]});const b=d.type,v=Mo[b]||Mo.other,j=v.Icon;return t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("detail.title"),onBack:x}),t.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[t.jsxs("div",{className:"bg-card flex flex-col items-center gap-3 rounded-xl p-6 shadow-sm",children:[t.jsx("div",{className:z("flex size-16 items-center justify-center rounded-full",v.bg),children:t.jsx(j,{className:z("size-8",v.color)})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-muted-foreground text-sm",children:e(`type.${d.type}`,{defaultValue:d.type})}),t.jsx(hc,{value:d.type==="send"?-Math.abs(d.amount.toNumber()):d.amount.toNumber(),symbol:d.symbol,sign:"always",color:"default",weight:"normal",size:"xl",className:v.color})]}),t.jsx(Th,{status:Kj[d.status]||"pending",label:e(`status.${d.status}`)})]}),t.jsxs("div",{className:"bg-card space-y-3 rounded-xl p-4 shadow-sm",children:[t.jsx("h3",{className:"text-muted-foreground text-sm font-medium",children:e("detail.info")}),t.jsxs("div",{className:"flex items-center justify-between py-2",children:[t.jsx("span",{className:"text-muted-foreground text-sm",children:d.type==="send"?e("detail.toAddress"):e("detail.fromAddress")}),t.jsx(Ws,{address:d.address,copyable:!0,className:"text-sm"})]}),t.jsx("div",{className:"bg-border h-px"}),t.jsxs("div",{className:"flex items-center justify-between py-2",children:[t.jsx("span",{className:"text-muted-foreground text-sm",children:e("detail.time")}),t.jsx(Ih,{value:d.timestamp,format:"datetime",className:"text-sm"})]}),t.jsx("div",{className:"bg-border h-px"}),t.jsxs("div",{className:"flex items-center justify-between py-2",children:[t.jsx("span",{className:"text-muted-foreground text-sm",children:e("detail.network")}),t.jsx("span",{className:"text-sm font-medium capitalize",children:d.chain})]}),d.fee&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bg-border h-px"}),t.jsxs("div",{className:"flex items-center justify-between py-2",children:[t.jsx("span",{className:"text-muted-foreground text-sm",children:e("detail.fee")}),t.jsx(br,{amount:d.fee.toNumber(),symbol:d.feeSymbol||d.symbol,className:"text-sm"})]})]}),d.blockNumber&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bg-border h-px"}),t.jsxs("div",{className:"flex items-center justify-between py-2",children:[t.jsx("span",{className:"text-muted-foreground text-sm",children:e("detail.blockHeight")}),t.jsx("span",{className:"text-sm font-medium",children:d.blockNumber.toLocaleString()})]})]}),d.confirmations!==void 0&&d.confirmations>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bg-border h-px"}),t.jsxs("div",{className:"flex items-center justify-between py-2",children:[t.jsx("span",{className:"text-muted-foreground text-sm",children:e("detail.confirmations")}),t.jsx("span",{className:"text-sm font-medium",children:d.confirmations})]})]})]}),d.hash&&t.jsxs("div",{className:"bg-card space-y-3 rounded-xl p-4 shadow-sm",children:[t.jsx("h3",{className:"text-muted-foreground text-sm font-medium",children:e("detail.hash")}),t.jsx("p",{className:"text-muted-foreground font-mono text-xs break-all",children:d.hash}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:p,className:z("flex flex-1 items-center justify-center gap-2 rounded-lg py-2.5","bg-background border transition-colors","hover:bg-muted active:bg-muted/80"),children:o?t.jsxs(t.Fragment,{children:[t.jsx(Se,{className:"text-green-500 size-4"}),t.jsx("span",{className:"text-sm",children:e("detail.copied")})]}):t.jsxs(t.Fragment,{children:[t.jsx(Sr,{className:"size-4"}),t.jsx("span",{className:"text-sm",children:e("detail.copyHash")})]})}),t.jsx("button",{onClick:f,disabled:!h,className:z("flex flex-1 items-center justify-center gap-2 rounded-lg py-2.5","bg-background border transition-colors","hover:bg-muted active:bg-muted/80","disabled:opacity-50 disabled:cursor-not-allowed"),children:g?t.jsxs(t.Fragment,{children:[t.jsx(Se,{className:"text-green-500 size-4"}),t.jsx("span",{className:"text-sm",children:e("detail.copied")})]}):t.jsxs(t.Fragment,{children:[t.jsx(Mr,{className:"size-4"}),t.jsx("span",{className:"text-sm",children:e("detail.share")})]})})]})]})]})]})}Pu.__docgenInfo={description:"",methods:[],displayName:"TransactionDetailPage"};const _u=({params:e})=>t.jsx(ce,{children:t.jsx(pe,{params:e,children:t.jsx(Pu,{})})});_u.__docgenInfo={description:"",methods:[],displayName:"TransactionDetailActivity"};const Gj=150;function Mu({onScan:e,className:s}){const{t:n}=F("scanner"),{t:a}=F("common"),{navigate:r,goBack:i}=me(),{push:c}=te(),o=Hc(),u=l.useRef(null),d=l.useRef(null),m=l.useRef(null),h=l.useRef(null),p=l.useRef(!1),g=l.useRef(null),y=l.useRef(e),[f,x]=l.useState("idle"),[b,v]=l.useState(null),[j,N]=l.useState(!1);l.useEffect(()=>{y.current=e},[e]);const w=l.useCallback(P=>{if(P===g.current)return;g.current=P,x("success"),p.current=!1,"vibrate"in navigator&&navigator.vibrate(100);const A=dc(P);if(y.current)y.current(P,A);else switch(A.type){case"address":case"payment":r({to:"/send",search:{address:A.address,chain:A.chain,amount:A.type==="payment"?A.amount:void 0}});break;case"deeplink":r({to:A.path,search:A.params});break;case"contact":c("ContactAddConfirmJob",{name:A.name,addresses:JSON.stringify(A.addresses),memo:A.memo,avatar:A.avatar});break;case"unknown":r({to:"/send",search:{address:A.content}});break}},[r,c]),M=l.useCallback(()=>{if(p.current)return;p.current=!0,d.current||(d.current=document.createElement("canvas"));const P=async()=>{if(!(!p.current||!u.current||!h.current)){try{const A=await h.current.scanFromVideo(u.current,d.current??void 0);if(A){w(A.content);return}}catch(A){console.error("[Scanner] Scan error:",A)}p.current&&setTimeout(P,Gj)}};P()},[w]),S=l.useCallback(()=>{p.current=!1,m.current&&(m.current.getTracks().forEach(P=>P.stop()),m.current=null)},[]),k=l.useCallback(async()=>{S(),x("requesting"),g.current=null;try{if(!await o.checkPermission()&&!await o.requestPermission()){x("denied");return}const A=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});m.current=A,u.current&&(u.current.srcObject=A,await u.current.play(),M()),x("scanning")}catch(P){console.error("Camera error:",P),x("error"),v(P instanceof Error?P.message:"Camera initialization failed")}},[o,M,S]);l.useEffect(()=>(h.current=uc({useWorker:!0}),k(),()=>{S(),h.current?.destroy(),h.current=null}),[]);const I=l.useCallback(()=>{S(),i()},[S,i]),E=l.useCallback(()=>{const P=document.createElement("input");P.type="file",P.accept="image/*",P.onchange=async A=>{const T=A.target.files?.[0];if(T)try{const C=new Image,B=URL.createObjectURL(T);C.onload=async()=>{URL.revokeObjectURL(B);const _=document.createElement("canvas");_.width=C.width,_.height=C.height;const R=_.getContext("2d");if(!R||!h.current){v(n("noQrFound")),x("error");return}R.drawImage(C,0,0);const L=await h.current.scanFromCanvas(_);L?w(L.content):(v(n("noQrFound")),x("error"))},C.onerror=()=>{URL.revokeObjectURL(B),v(n("noQrFound")),x("error")},C.src=B}catch{v(n("noQrFound")),x("error")}},P.click()},[w,n]),D=l.useCallback(async()=>{if(m.current){const P=m.current.getVideoTracks()[0];if(P)try{await P.applyConstraints({advanced:[{torch:!j}]}),N(!j)}catch{}}},[j]);return t.jsxs("div",{className:z("relative flex h-screen flex-col bg-black",s),children:[t.jsxs("div",{className:"absolute top-0 right-0 left-0 z-10 flex items-center justify-between p-4",children:[t.jsx(H,{variant:"ghost",size:"icon","data-testid":"back-button",onClick:I,className:"text-white","aria-label":a("a11y.back"),children:t.jsx(oa,{className:"size-6"})}),t.jsx("h1",{"data-testid":"page-title",className:"text-lg font-medium text-white",children:n("title")}),t.jsx(H,{variant:"ghost",size:"icon",onClick:D,className:z("text-white",j&&"text-yellow-400"),"aria-label":n(j?"flashOff":"flashOn"),children:t.jsx(_c,{className:"size-6"})})]}),t.jsxs("div",{className:"relative flex-1",children:[t.jsx("video",{ref:u,className:z("absolute inset-0 size-full object-cover",f!=="scanning"&&f!=="success"&&"invisible"),playsInline:!0,muted:!0}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsxs("div",{className:"relative size-64",children:[t.jsx("div",{className:z("absolute top-0 left-0 size-8 border-t-4 border-l-4",f==="success"?"border-green-500":"border-primary")}),t.jsx("div",{className:z("absolute top-0 right-0 size-8 border-t-4 border-r-4",f==="success"?"border-green-500":"border-primary")}),t.jsx("div",{className:z("absolute bottom-0 left-0 size-8 border-b-4 border-l-4",f==="success"?"border-green-500":"border-primary")}),t.jsx("div",{className:z("absolute right-0 bottom-0 size-8 border-r-4 border-b-4",f==="success"?"border-green-500":"border-primary")}),f==="scanning"&&t.jsx("div",{className:"animate-scan bg-primary absolute right-2 left-2 h-0.5"})]})}),t.jsxs("div",{className:"absolute inset-x-0 bottom-32 text-center",children:[f==="idle"&&t.jsx("p",{className:"text-white/80",children:n("initializing")}),f==="requesting"&&t.jsx("p",{className:"text-white/80",children:n("requestingPermission")}),f==="scanning"&&t.jsx("p",{className:"text-white/80",children:n("scanPrompt")}),f==="success"&&t.jsx("div",{className:"space-y-2",children:t.jsx("p",{className:"text-green-400",children:n("scanSuccess")})}),f==="denied"&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-red-400",children:n("permissionDenied")}),t.jsx(H,{variant:"outline","data-testid":"retry-button",onClick:k,children:n("retry")})]}),f==="error"&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-red-400",children:b||n("error")}),t.jsx(H,{variant:"outline","data-testid":"retry-button",onClick:k,children:n("retry")})]})]})]}),t.jsxs("div",{className:"absolute inset-x-0 bottom-0 flex justify-center gap-8 pb-8",children:[t.jsxs(H,{variant:"ghost",size:"lg","data-testid":"gallery-button",onClick:E,className:"flex flex-col items-center text-white",children:[t.jsx(Ec,{className:"mb-1 size-6"}),t.jsx("span",{className:"text-xs",children:n("gallery")})]}),t.jsx("div",{className:"flex size-16 items-center justify-center rounded-full bg-white/20",children:t.jsx(hp,{className:"size-8 text-white"})}),t.jsx("div",{className:"w-16"})," "]})]})}Mu.__docgenInfo={description:"",methods:[],displayName:"ScannerPage",props:{onScan:{required:!1,tsType:{name:"union",raw:"((content: string, parsed: ParsedQRContent) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"Callback when QR code is scanned"},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Custom class name"}}};const Ru=()=>t.jsx(ce,{children:t.jsx(Mu,{})});Ru.__docgenInfo={description:"",methods:[],displayName:"ScannerActivity"};const Qj=300*1e3,Dn={ethereum:"Ethereum",bitcoin:"Bitcoin",tron:"Tron",binance:"BSC",bsc:"BSC",bfmeta:"BFMeta",ccchain:"CCChain",pmchain:"PMChain",bfchainv2:"BFChain V2",btgmeta:"BTGMeta",biwmeta:"BIWMeta",ethmeta:"ETHMeta",malibu:"Malibu",ccc:"CCChain"};function Du(e){if(e)return e}function Yj(e){return e.map(s=>({id:s.id,name:s.name,address:s.address,balance:""}))}function Xj(e,s){const n=new Map;for(const a of e)for(const r of a.chainAddresses){const i=Du(r.chain);if(!i)continue;const c=n.get(i)??[];c.push({address:r.address,isDefault:a.id===s}),n.set(i,c)}return Array.from(n.entries()).map(([a,r])=>({chain:a,name:Dn[a]??a,addresses:r.map(i=>({address:i.address,isDefault:i.isDefault}))}))}function Ro(e){const s=e?.trim().toLowerCase();return s==="true"||s==="1"}function zu(){const{t:e}=F("authorize"),{t:s}=F("common"),{navigate:n,goBack:a}=me(),{push:r}=te(),i=Gt(),{id:c,type:o,chainName:u,signMessage:d,getMain:m}=be(),h=je(we,O=>O.currentWalletId),p=je(we,O=>O.wallets),g=je(we,Ve.getCurrentWallet),[y,f]=l.useState(null),[x,b]=l.useState(null),[v,j]=l.useState(!1),N=l.useMemo(()=>Yj(p),[p]),w=g?.id??p[0]?.id,[M,S]=l.useState(w),k=l.useMemo(()=>Du(u),[u]),[I,E]=l.useState(k);l.useEffect(()=>E(k),[k]);const[D,P]=l.useState(void 0),[A,T]=l.useState(()=>new Set(p.map(O=>O.id))),[C,B]=l.useState(!1);l.useEffect(()=>{S(w)},[w]),l.useEffect(()=>{T(new Set(p.map(O=>O.id)))},[p]);const _=l.useMemo(()=>{const O=["viewAddress","viewPublicKey"];return d?.trim()&&O.push("signMessage"),Ro(m)&&O.push("getMain"),O},[m,d]),R=l.useMemo(()=>new Xp(hs,c),[c]),L=l.useMemo(()=>!!d?.trim(),[d]),W=l.useMemo(()=>Ro(m),[m]),J=L||W;l.useEffect(()=>{let O=!1;async function se(){b(null);try{const X=await hs.getCallerAppInfo(c);if(O)return;f(X)}catch{if(O)return;b(e("error.authFailed"))}}return se(),()=>{O=!0}},[c,e]),l.useEffect(()=>{const O=window.setTimeout(()=>{(async()=>(await R.reject("timeout"),i.show({message:e("error.timeout"),position:"center"}),n({to:"/"})))()},Qj);return()=>{window.clearTimeout(O)}},[R,n,e,i]);const Z=l.useMemo(()=>M?p.find(O=>O.id===M)??null:null,[M,p]),q=l.useMemo(()=>Xj(p,h),[p,h]),K=l.useMemo(()=>g?g.chainAddresses.map(O=>O.chain):[],[g]),ue=l.useMemo(()=>{if(!(!g||!I))return g.chainAddresses.find(O=>O.chain===I)?.address},[g,I]);l.useEffect(()=>{o==="network"&&(I||E(q[0]?.chain))},[q,I,o]);const U=l.useMemo(()=>p.length===0?!1:o==="main"?!!Z:o==="network"?I?(q.find(O=>O.chain===I)?.addresses.length??0)>0:!1:A.size>0,[q,I,Z,A.size,o,p.length]),G=l.useCallback(()=>{a()},[a]),le=l.useCallback(async()=>{if(!v){j(!0);try{await R.reject("rejected"),n({to:"/"})}finally{j(!1)}}},[R,v,n]),ne=l.useCallback(async()=>{if(!(!U||v)){if(J){Yt(async O=>{j(!0);try{const se=d?.trim()??"";let X=[],re=[];if(o==="main"){if(!Z)return!1;X=R.handleMainAddresses(Z),re=[Z]}else if(o==="network"){if(!I)return!1;X=R.handleNetworkAddresses(p,I),re=p}else{const Ne=p.filter(ie=>A.has(ie.id));X=R.handleAllAddresses(Ne),re=Ne}return X=await R.applySensitiveOptions(X,re,{password:O,signMessage:se,getMain:W}),await R.approve(X),n({to:"/"}),!0}catch{return!1}finally{j(!1)}}),r("WalletLockConfirmJob",{title:e("passwordConfirm.title")});return}j(!0);try{let O=[];if(o==="main"){if(!Z)return;O=R.handleMainAddresses(Z)}else if(o==="network"){if(!I)return;O=R.handleNetworkAddresses(p,I)}else{const se=p.filter(X=>A.has(X.id));O=R.handleAllAddresses(se)}await R.approve(O),n({to:"/"})}finally{j(!1)}}},[R,U,v,n,J,W,r,I,Z,A,d,e,o,p]);return o==="network"&&u&&!k?t.jsxs("div",{className:"flex min-h-screen flex-col bg-muted/30",children:[t.jsx(Q,{title:e("title.address"),onBack:G}),t.jsx("div",{className:"flex-1 p-4",children:t.jsxs("div",{className:"rounded-xl bg-card p-4 shadow-sm",children:[t.jsx("p",{className:"text-sm text-destructive",children:e("error.unknownChain")}),t.jsx("div",{className:"mt-4",children:t.jsx(H,{onClick:()=>n({to:"/"}),className:"w-full",children:s("back")})})]})})]}):x?t.jsxs("div",{className:"flex min-h-screen flex-col bg-muted/30",children:[t.jsx(Q,{title:e("title.address"),onBack:G}),t.jsx("div",{className:"flex-1 p-4",children:t.jsxs("div",{className:"rounded-xl bg-card p-4 shadow-sm",children:[t.jsx("p",{className:"text-sm text-destructive",children:x}),t.jsx("div",{className:"mt-4",children:t.jsx(H,{onClick:()=>n({to:"/"}),className:"w-full",children:s("back")})})]})})]}):t.jsxs("div",{className:"flex min-h-screen flex-col bg-muted/30",children:[t.jsx(Q,{title:e("title.address"),onBack:G}),t.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[y&&t.jsx(Ic,{appInfo:y}),t.jsx("div",{className:"px-1 text-sm text-foreground",children:e("address.shareWith")}),t.jsx(Rh,{permissions:_}),t.jsx("div",{className:"rounded-xl bg-card p-4 shadow-sm",children:t.jsxs("div",{className:"text-sm text-muted-foreground",children:[o==="main"&&e("address.scope.main"),o==="network"&&e("address.scope.network",{chainName:Dn[I??""]??I??""}),o==="all"&&e("address.scope.all")]})}),t.jsxs("div",{className:"rounded-xl bg-card p-4 shadow-sm",children:[o==="main"&&t.jsx(Dh,{wallets:N,...M?{selectedId:M}:{},onSelect:O=>S(O.id)}),o==="network"&&g&&I&&t.jsx("div",{className:"aspect-[1.6/1] w-full",children:t.jsx(ec,{wallet:g,chain:I,chainName:Dn[I]??I,address:ue,priority:"low",onOpenChainSelector:k?void 0:()=>B(!0)})}),o==="all"&&t.jsxs("div",{className:"space-y-2",children:[p.length===0&&t.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:e("address.noWallets")}),p.map(O=>{const se=A.has(O.id);return t.jsxs("button",{type:"button",onClick:()=>{T(X=>{const re=new Set(X);return re.has(O.id)?re.delete(O.id):re.add(O.id),re})},className:z("flex w-full items-center justify-between rounded-lg border px-3 py-2 text-left transition-colors","hover:bg-muted/50",se?"border-primary bg-primary/5":"border-border bg-background"),"aria-pressed":se,children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"truncate text-sm font-medium",children:O.name}),t.jsx("div",{className:"truncate font-mono text-xs text-muted-foreground",children:O.address})]}),t.jsx("div",{className:z("flex size-5 items-center justify-center rounded border",se?"border-primary bg-primary text-primary-foreground":"border-border bg-background"),"aria-hidden":"true",children:se?"":""})]},O.id)})]})]})]}),t.jsx("div",{className:"sticky bottom-0 border-t border-border bg-background p-4 safe-area-inset-bottom",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx(H,{type:"button",variant:"outline",className:"flex-1",onClick:le,disabled:v,children:e("button.reject")}),t.jsx(H,{type:"button",className:"flex-1",onClick:ne,disabled:!U||v,children:e("button.approve")})]})}),C&&t.jsx("div",{className:"fixed inset-0 z-50 bg-black/50",onClick:()=>B(!1),children:t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-background rounded-t-2xl",onClick:O=>O.stopPropagation(),children:[t.jsx("div",{className:"flex justify-center py-3",children:t.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),t.jsx("div",{className:"border-b border-border px-4 pb-4",children:t.jsx("h2",{className:"text-center text-lg font-semibold",children:e("address.selectNetwork")})}),t.jsx("div",{className:"max-h-[60vh] space-y-2 overflow-y-auto p-4",children:K.map(O=>{const se=g?.chainAddresses.find(X=>X.chain===O);return t.jsxs("button",{onClick:()=>{E(O),B(!1)},className:z("flex w-full items-center gap-3 rounded-xl p-4 transition-colors",O===I?"bg-primary/10 ring-1 ring-primary":"bg-muted/50 hover:bg-muted"),children:[t.jsx(ra,{chain:O,size:"md"}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("div",{className:"font-medium",children:Dn[O]??O}),t.jsx("div",{className:"font-mono text-xs text-muted-foreground",children:se?.address?Zj(se.address):"---"})]}),O===I&&t.jsx(Se,{className:"size-5 text-primary"})]},O)})}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})]})}function Zj(e,s=10,n=8){return e.length<=s+n+3?e:`${e.slice(0,s)}...${e.slice(-n)}`}zu.__docgenInfo={description:"",methods:[],displayName:"AddressAuthPage"};const Bu=({params:e})=>t.jsx(ce,{children:t.jsx(pe,{params:e,children:t.jsx(zu,{})})});Bu.__docgenInfo={description:"",methods:[],displayName:"AuthorizeAddressActivity"};const e0=300*1e3;function Do(e){return typeof e=="object"&&e!==null}function Qe(e,s){const n=e[s];if(typeof n=="string")return n;if(typeof n=="number"&&Number.isFinite(n))return String(n)}function t0(e,s,n){const a=Qe(e,s)?.trim();return a?{ok:!0,value:a}:{ok:!1,error:`signaturedata ${n}`}}function Tt(e,s){for(const n of s){const a=Qe(e,n.key)?.trim();if(a)return{ok:!0,value:a}}return{ok:!1,error:`signaturedata ${s.map(n=>n.label).join(" / ")}`}}function s0(e){if(typeof e=="string"){const s=e.trim().toLowerCase();return s==="message"?{ok:!0,value:"message"}:s==="transfer"?{ok:!0,value:"transfer"}:s==="destroy"||s==="destory"?{ok:!0,value:"destory"}:{ok:!1,error:`${e}`}}return typeof e=="number"&&Number.isInteger(e)?e===0?{ok:!0,value:"message"}:e===1?{ok:!0,value:"transfer"}:e===7?{ok:!0,value:"destory"}:{ok:!1,error:`${e}`}:{ok:!1,error:"signaturedata.type "}}function n0(e){if(e===void 0||e.trim()==="")return{ok:!1,error:" signaturedata "};let s;try{s=JSON.parse(e)}catch{return{ok:!1,error:"signaturedata  JSON"}}if(!Array.isArray(s))return{ok:!1,error:"signaturedata  JSON "};if(s.length===0)return{ok:!1,error:"signaturedata "};const n=s[0];if(!Do(n))return{ok:!1,error:"signaturedata[0] "};const a=s0(n.type);if(!a.ok)return a;const r=Tt(n,[{key:"chainName",label:"chainName"},{key:"chain",label:"chain"}]);if(!r.ok)return r;const i=r.value;if(a.value==="message"){const c=Tt(n,[{key:"senderAddress",label:"senderAddress"},{key:"from",label:"from"}]);if(!c.ok)return c;const o=t0(n,"message","message");return o.ok?{ok:!0,item:{type:"message",payload:{chainName:i,senderAddress:c.value,message:o.value}}}:o}if(a.value==="transfer"){const c=Tt(n,[{key:"senderAddress",label:"senderAddress"},{key:"from",label:"from"}]);if(!c.ok)return c;const o=Tt(n,[{key:"receiveAddress",label:"receiveAddress"},{key:"to",label:"to"}]);if(!o.ok)return o;const u=Tt(n,[{key:"balance",label:"balance"},{key:"amount",label:"amount"}]);if(!u.ok)return u;const d=Qe(n,"fee")?.trim(),m=Qe(n,"assetType")?.trim();let h;const p=n.contractInfo;if(Do(p)){const g=Qe(p,"assetType")?.trim(),y=p.decimals,f=Qe(p,"contractAddress")?.trim(),x=typeof y=="number"&&Number.isFinite(y)?y:typeof y=="string"&&y.trim()!==""?Number(y):void 0;g&&f&&typeof x=="number"&&Number.isFinite(x)&&(h={assetType:g,contractAddress:f,decimals:x})}return{ok:!0,item:{type:"transfer",payload:{chainName:i,senderAddress:c.value,receiveAddress:o.value,balance:u.value,...d?{fee:d}:{},...m?{assetType:m}:{},...h?{contractInfo:h}:{}}}}}{const c=Tt(n,[{key:"senderAddress",label:"senderAddress"},{key:"from",label:"from"}]);if(!c.ok)return c;const o=Tt(n,[{key:"destoryAmount",label:"destoryAmount"},{key:"amount",label:"amount"}]);if(!o.ok)return o;const u=Qe(n,"destoryAddress")?.trim()??Qe(n,"to")?.trim()??c.value,d=Qe(n,"fee")?.trim(),m=Qe(n,"assetType")?.trim();return{ok:!0,item:{type:"destory",payload:{chainName:i,senderAddress:c.value,destoryAddress:u,destoryAmount:o.value,...d?{fee:d}:{},...m?{assetType:m}:{}}}}}}function a0(e){return typeof e=="object"&&e!==null&&"senderAddress"in e&&"receiveAddress"in e&&"balance"in e}function r0(e){return typeof e=="object"&&e!==null&&"senderAddress"in e&&"message"in e&&!("receiveAddress"in e)}function i0(e){return typeof e=="object"&&e!==null&&"senderAddress"in e&&"destoryAddress"in e&&"destoryAmount"in e}function zo(e){return e.contractInfo?.assetType?e.contractInfo.assetType.toUpperCase():e.assetType?e.assetType.toUpperCase():{ethereum:"ETH",bitcoin:"BTC",tron:"TRX",binance:"BNB",bsc:"BNB"}[e.chainName?.toLowerCase()??""]??"TOKEN"}function o0(e,s,n){const a=parseFloat(e)||0,r=parseFloat(s)||0,i=parseFloat(n??"0")||0,c=r+i;return{sufficient:a>=c,required:c.toString()}}function Lu(){const{t:e}=F("authorize"),{t:s}=F("common"),{navigate:n,goBack:a}=me(),{push:r}=te(),i=Gt(),{id:c,signaturedata:o}=be(),u=je(we,Ve.getCurrentWallet),[d,m]=l.useState(null),[h,p]=l.useState(null),[g,y]=l.useState(null),[f,x]=l.useState(!1),b=l.useMemo(()=>new Br(hs,c),[c]);l.useEffect(()=>{let D=!1;async function P(){y(null);try{const A=n0(o);if(!A.ok){y(A.error);return}const T=await hs.getCallerAppInfo(c);if(D)return;m(T);const C={eventId:c,type:A.item.type,payload:A.item.payload,appName:T.appName,appHome:T.origin,appLogo:T.appIcon};p(C)}catch{if(D)return;y(e("error.authFailed"))}}return P(),()=>{D=!0}},[c,o,e]),l.useEffect(()=>{const D=window.setTimeout(()=>{(async()=>(await b.reject("timeout"),i.show({message:e("error.timeout"),position:"center"}),n({to:"/"})))()},e0);return()=>{window.clearTimeout(D)}},[b,n,e,i]);const v=l.useMemo(()=>!h||!a0(h.payload)?null:h.payload,[h]),j=l.useMemo(()=>!h||!r0(h.payload)?null:h.payload,[h]),N=l.useMemo(()=>!h||!i0(h.payload)?null:h.payload,[h]),w=l.useMemo(()=>{if(!u)return{sufficient:!0,required:"0",walletBalance:"0"};const D=v?{chainName:v.chainName,amount:v.balance,fee:v.fee}:N?{chainName:N.chainName,amount:N.destoryAmount,fee:N.fee}:null;if(!D)return{sufficient:!0,required:"0",walletBalance:"0"};const A=u.chainAddresses.find(C=>C.chain.toLowerCase()===D.chainName?.toLowerCase())?"1.0":"0";return{...o0(A,D.amount,D.fee),walletBalance:A}},[u,N,v]),M=l.useMemo(()=>v?zo(v):N?zo(N):"TOKEN",[N,v]),S=l.useCallback(()=>{a()},[a]),k=l.useCallback(async()=>{if(!f){x(!0);try{await b.reject(w.sufficient?"rejected":"insufficient_balance"),n({to:"/"})}finally{x(!1)}}},[b,w.sufficient,f,n]),I=l.useCallback(()=>{w.sufficient&&(f||(Yt(async D=>{x(!0);try{const P=u?.encryptedMnemonic;if(!P||!h)return!1;let A;if(h.type==="message"){if(!j)return!1;A=await b.handleMessageSign(j,P,D)}else if(h.type==="transfer"){if(!v)return!1;A=await b.handleTransferSign(v,P,D)}else if(h.type==="destory"){if(!N)return!1;A=await b.handleDestroySign(N,P,D)}else return!1;return await b.approve(A),n({to:"/"}),!0}catch{return!1}finally{x(!1)}}),r("WalletLockConfirmJob",{title:e("button.confirm")})))},[b,w.sufficient,u?.encryptedMnemonic,N,f,j,n,r,h,e,v]);if(g)return t.jsxs("div",{className:"flex min-h-screen flex-col bg-muted/30",children:[t.jsx(Q,{title:e("title.signature"),onBack:S}),t.jsx("div",{className:"flex-1 p-4",children:t.jsxs("div",{className:"rounded-xl bg-card p-4 shadow-sm",children:[t.jsx("p",{className:"text-sm text-destructive",children:g}),t.jsx("div",{className:"mt-4",children:t.jsx(H,{onClick:()=>n({to:"/"}),className:"w-full",children:s("back")})})]})})]});const E=h?.type==="message"?e("signature.type.message"):h?.type==="destory"?e("signature.type.destroy"):e("title.signature");return t.jsxs("div",{className:"flex min-h-screen flex-col bg-muted/30",children:[t.jsx(Q,{title:E,onBack:S}),t.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[d&&t.jsx(Ic,{appInfo:d}),t.jsx("div",{className:"px-1 text-sm text-foreground",children:e("signature.reviewTransaction")}),v&&t.jsxs(t.Fragment,{children:[t.jsx(Si,{from:v.senderAddress,to:v.receiveAddress,amount:`${v.balance} ${M}`,...v.fee?{fee:`${v.fee} ${M}`}:{},chainId:v.chainName}),!w.sufficient&&t.jsx(Ci,{balance:w.walletBalance,required:w.required,symbol:M})]}),j&&t.jsxs("div",{className:"rounded-xl bg-card p-4 shadow-sm",children:[t.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:e("signature.messageToSign")}),t.jsx("div",{className:z("rounded-lg bg-muted/50 p-3","font-mono text-sm whitespace-pre-wrap break-all","max-h-48 overflow-y-auto"),children:j.message})]}),N&&t.jsxs(t.Fragment,{children:[t.jsx(Si,{from:N.senderAddress,to:N.destoryAddress,amount:`${N.destoryAmount} ${M}`,...N.fee?{fee:`${N.fee} ${M}`}:{},chainId:N.chainName}),!w.sufficient&&t.jsx(Ci,{balance:w.walletBalance,required:w.required,symbol:M})]}),h&&t.jsx("div",{className:"rounded-xl bg-card p-4 shadow-sm",children:t.jsxs("div",{className:"text-sm text-muted-foreground",children:[h.type==="transfer"&&e("signature.type.transfer"),h.type==="message"&&e("signature.type.message"),h.type==="destory"&&e("signature.type.destroy")]})})]}),t.jsx("div",{className:"sticky bottom-0 border-t border-border bg-background p-4 safe-area-inset-bottom",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx(H,{type:"button",variant:"outline",className:"flex-1",onClick:k,disabled:f,children:e("button.reject")}),t.jsx(H,{type:"button",className:"flex-1",onClick:I,disabled:f||!w.sufficient,children:e("button.confirm")})]})})]})}Lu.__docgenInfo={description:"",methods:[],displayName:"SignatureAuthPage"};const Ou=({params:e})=>t.jsx(ce,{children:t.jsx(pe,{params:e,children:t.jsx(Lu,{})})});Ou.__docgenInfo={description:"",methods:[],displayName:"AuthorizeSignatureActivity"};function Fu({walletName:e,onEnterWallet:s,className:n}){const{t:a}=F("onboarding");return t.jsxs("div",{"data-testid":"import-success-step",className:z("flex min-h-screen flex-col items-center justify-center px-6 py-8",n),children:[t.jsx("div",{className:"mb-6 flex size-20 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/30",children:t.jsx(ys,{className:"size-10 text-green-600 dark:text-green-400"})}),t.jsx("h1",{"data-testid":"success-message",className:"mb-2 text-2xl font-bold",children:a("import.success.title")}),t.jsx("p",{className:"text-muted-foreground mb-8 text-center",children:t.jsx(wc,{i18nKey:"import.success.description",ns:"onboarding",values:{name:e},components:{bold:t.jsx("span",{className:"text-foreground font-medium"})}})}),t.jsx("div",{className:"w-full max-w-xs",children:t.jsxs("button",{type:"button","data-testid":"enter-wallet-button",onClick:s,className:z("flex w-full items-center justify-center gap-2 rounded-full py-3 font-medium transition-colors","bg-primary hover:bg-primary/90 text-primary-foreground"),children:[t.jsx("span",{children:a("import.success.enterWallet")}),t.jsx(Oe,{className:"size-5"})]})})]})}Fu.__docgenInfo={description:"Success screen shown after wallet import",methods:[],displayName:"ImportWalletSuccess",props:{walletName:{required:!0,tsType:{name:"string"},description:"Wallet name"},onEnterWallet:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Callback when user chooses to enter wallet"},className:{required:!1,tsType:{name:"string"},description:"Additional class name"}}};function c0(e){if(!gc(e))throw new Error("Invalid mnemonic");return xm(e.join(" "))}function l0(e){return new Set(e.map(s=>s.address.toLowerCase()))}const za={isDuplicate:!1,type:"none"};function d0(e){const[s,n]=l.useState(za),[a,r]=l.useState(!1),[i,c]=l.useState(null),o=l.useCallback(async d=>{r(!0),c(null);try{const m=c0(d),h=l0(m),p=await e.getAllAddresses();for(const x of p)if(h.has(x.address.toLowerCase())){const b={isDuplicate:!0,type:"address",matchedWallet:{id:x.walletId,name:x.walletName,importType:"mnemonic",matchedAddress:x.address}};return n(b),b}const y=(await e.getAllMainWallets()).filter(x=>x.importType==="privateKey");for(const x of y)for(const b of x.addresses)if(h.has(b.address.toLowerCase())){const v={isDuplicate:!0,type:"privateKey",matchedWallet:{id:x.id,name:x.name,importType:"privateKey",matchedAddress:b.address}};return n(v),v}const f={isDuplicate:!1,type:"none"};return n(f),f}catch(m){const h=m instanceof Error?m.message:"";return c(h),za}finally{r(!1)}},[e]),u=l.useCallback(()=>{n(za),c(null)},[]);return{result:s,isChecking:a,error:i,check:o,reset:u}}const u0={getAllAddresses:async()=>[],getAllMainWallets:async()=>[],findWalletByAddress:async()=>null};function $u(){const{navigate:e,goBack:s}=me(),{push:n}=te(),{t:a}=F(["onboarding","common","wallet"]),r=Gs(),i=sa().snapshot,c=Ko(),[o,u]=l.useState("keyType"),[d,m]=l.useState("mnemonic"),[h,p]=l.useState(!1),[g,y]=l.useState([]),[f,x]=l.useState(""),[b,v]=l.useState(null),[j,N]=l.useState([]),[w,M]=l.useState(!1),[S,k]=l.useState(""),[I,E]=l.useState(null),[D,P]=l.useState([]),[A,T]=l.useState(!1);l.useEffect(()=>{!A&&r.length>0&&(P(xc(r)),T(!0))},[r,A]);const C=d0(u0),B=(()=>{switch(o){case"keyType":return 1;case"mnemonic":case"arbitrary":return 2;case"collision":return 2;case"pattern":return 3;case"chains":return 4;case"theme":return 5;case"success":return 5;default:return 1}})(),_=l.useCallback(()=>{switch(o){case"keyType":s();break;case"mnemonic":case"arbitrary":u("keyType"),C.reset();break;case"collision":u("mnemonic"),C.reset();break;case"pattern":u(d==="arbitrary"?"arbitrary":"mnemonic");break;case"chains":u("pattern");break;case"theme":u("chains");break}},[o,s,C,d]),R=l.useCallback(()=>{u("pattern")},[]),L=l.useCallback(ne=>{k(ne),u("chains")},[]),W=l.useCallback(()=>{if(d==="mnemonic"){u("mnemonic");return}if(h){u("arbitrary");return}uy(()=>{p(!0),u("arbitrary")}),n("SecurityWarningJob",{})},[d,h,n]),J=l.useCallback(async ne=>{y(ne.mnemonic);const O=await C.check(ne.mnemonic);if(O.isDuplicate){if(O.type==="address"){console.log("Duplicate detected:",O.matchedWallet?.name);return}else if(O.type==="privateKey"){u("collision");return}}R()},[C,R]),Z=l.useCallback(async()=>{R()},[R]),q=l.useCallback(()=>{u("mnemonic"),C.reset()},[C]),K=l.useCallback(async(ne,O)=>{M(!0);try{const se=ne.join(" "),re=qd({mnemonic:se,selectedChainIds:D,chainConfigs:r}).map(({chainId:Re,address:Fe})=>({chain:Re,address:Fe,tokens:[]})),Ne=re[0];if(!Ne)throw new Error("No chain addresses derived");const ie=Ha(Ne.address),xe=await ye.createWallet({name:a("wallet:defaultName"),keyType:"mnemonic",address:Ne.address,chain:Ne.chain,chainAddresses:re,themeHue:ie},se,O,ie);E(xe.id),u("theme")}catch(se){console.error(":",se)}finally{M(!1)}},[r,D,a]),ue=l.useCallback(async ne=>{const O=f.trim();if(O&&j.length!==0){M(!0);try{const se=j[0];if(!se)throw new Error("No enabled bioforest chains");const X=Ha(se.address),re=j.map(ie=>({chain:ie.chainId,address:ie.address,tokens:[]})),Ne=await ye.createWallet({name:a("wallet:defaultName"),keyType:"arbitrary",address:se.address,chain:se.chainId,chainAddresses:re,themeHue:X},O,ne,X);E(Ne.id),u("theme")}catch(se){console.error(":",se)}finally{M(!1)}}},[j,f,a]),U=l.useCallback(()=>{e({to:"/",replace:!0})},[e]),G=l.useCallback(async()=>{if(!w){if(d==="arbitrary"){await ue(S);return}g.length!==0&&await K(g,S)}},[ue,K,w,d,g,S]),le=l.useCallback(()=>{e({to:"/"})},[e]);return t.jsxs("div",{className:"flex min-h-screen flex-col",children:[o==="keyType"&&t.jsxs(t.Fragment,{children:[t.jsx(Q,{title:a("onboarding:keyType.title"),onBack:_}),t.jsx("div",{className:"px-4 pt-4",children:t.jsx(jt,{total:5,current:B})}),t.jsxs("div",{"data-testid":"key-type-step",className:"flex-1 space-y-6 p-4",children:[t.jsx(zh,{value:d,onChange:ne=>{m(ne),ne==="mnemonic"&&(x(""),N([]))}}),t.jsx(H,{type:"button","data-testid":"continue-button",onClick:W,className:"w-full",children:a("common:continue")})]})]}),o==="mnemonic"&&t.jsxs(t.Fragment,{children:[t.jsx(Q,{title:a("onboarding:recover.title"),onBack:_}),t.jsx("div",{className:"px-4 pt-4",children:t.jsx(jt,{total:5,current:B})}),t.jsx("div",{"data-testid":"mnemonic-step",className:"flex-1 p-4",children:t.jsx(eh,{onSubmit:J,isSubmitting:C.isChecking})})]}),o==="arbitrary"&&t.jsxs(t.Fragment,{children:[t.jsx(Q,{title:a("onboarding:keyType.arbitrary"),onBack:_}),t.jsx("div",{className:"px-4 pt-4",children:t.jsx(jt,{total:5,current:B})}),t.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[t.jsx(Bh,{value:f,onChange:ne=>{v(null),x(ne)},disabled:w}),b&&t.jsxs("div",{className:"bg-destructive/10 text-destructive flex items-start gap-2 rounded-lg px-3 py-2 text-sm",children:[t.jsx(Jt,{className:"mt-0.5 size-4 shrink-0"}),t.jsx("span",{children:b})]}),t.jsx(Lh,{secret:f,enabledBioforestChainConfigs:i?c:void 0,onDerived:N}),t.jsxs(H,{type:"button",className:"w-full",disabled:w||f.trim()!==""&&j.length===0,onClick:()=>{if(!f.trim()){v(a("onboarding:arbitraryKey.required"));return}R()},children:[w&&t.jsx(Ue,{className:"size-4 animate-spin"}),a("common:continue")]})]})]}),o==="collision"&&t.jsxs(t.Fragment,{children:[t.jsx(Q,{title:a("onboarding:recover.addressConflict"),onBack:_}),t.jsx("div",{className:"px-4 pt-4",children:t.jsx(jt,{total:5,current:B})}),t.jsx("div",{className:"flex-1 p-4",children:t.jsx(Oh,{result:C.result,onConfirm:Z,onCancel:q,isLoading:w})})]}),o==="pattern"&&t.jsxs(t.Fragment,{children:[t.jsx(Q,{title:a("onboarding:recover.setWalletLock"),onBack:_}),t.jsx("div",{className:"px-4 pt-4",children:t.jsx(jt,{total:5,current:B})}),t.jsx("div",{"data-testid":"pattern-step",className:"flex-1 p-4",children:t.jsx(yr,{onComplete:L,minPoints:4})})]}),o==="chains"&&t.jsxs(t.Fragment,{children:[t.jsx(Q,{title:a("onboarding:chainSelector.title"),onBack:_}),t.jsx("div",{className:"px-4 pt-4",children:t.jsx(jt,{total:5,current:B})}),t.jsx("div",{"data-testid":"chains-step",className:"flex-1 p-4",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx(nn,{icon:ys,variant:"success",size:"lg",className:"mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-bold",children:a("onboarding:chainSelector.title")}),t.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:a("onboarding:chainSelector.subtitle")})]}),r.length===0?t.jsx("div",{className:"flex justify-center py-10",children:t.jsx(Me,{})}):t.jsx(Ar,{"data-testid":"chain-selector",chains:r,selectedChains:D,onSelectionChange:P}),t.jsx(et,{variant:"mint",className:"w-full","data-testid":"chains-continue-button",disabled:D.length===0,onClick:G,children:a("common:next")})]})})]}),o==="theme"&&I&&t.jsxs(t.Fragment,{children:[t.jsx(Q,{title:a("onboarding:create.themeTitle")}),t.jsx("div",{className:"px-4 pt-4",children:t.jsx(jt,{total:5,current:B})}),t.jsx("div",{"data-testid":"theme-step",className:"flex-1 p-4",children:t.jsx(ha,{mode:"edit-only",walletId:I,onEditOnlyComplete:U})})]}),o==="success"&&t.jsx(Fu,{walletName:a("wallet:defaultName"),onEnterWallet:le})]})}$u.__docgenInfo={description:`Onboarding recover wallet page
Implements wallet recovery with duplicate detection per openspec/changes/add-wallet-recover-duplicate-guards`,methods:[],displayName:"OnboardingRecoverPage"};const Wu=()=>t.jsx(ce,{children:t.jsx($u,{})});Wu.__docgenInfo={description:"",methods:[],displayName:"OnboardingRecoverActivity"};const Nn={symbol:"USDT",balance:1234.56,fiatValue:"1234.56"},m0=[{id:"1",type:"send",status:"confirmed",amount:tt.fromFormatted("100",6,"USDT"),symbol:"USDT",address:"0xabcd...1234",timestamp:new Date(Date.now()-36e5)},{id:"2",type:"receive",status:"confirmed",amount:tt.fromFormatted("500",6,"USDT"),symbol:"USDT",address:"0x1234...abcd",timestamp:new Date(Date.now()-864e5)}];function Hu(){const{t:e}=F("token"),{navigate:s,goBack:n}=me();return t.jsxs("div",{className:"flex min-h-screen flex-col",children:[t.jsx(Q,{title:Nn.symbol,onBack:n}),t.jsxs("div",{className:"flex-1 space-y-6 p-4",children:[t.jsx("div",{className:"text-center",children:t.jsx(Fh,{value:Nn.balance,symbol:Nn.symbol,fiatValue:Nn.fiatValue,size:"lg"})}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs(et,{variant:"mint",className:"flex-1",onClick:()=>s({to:"/send",search:{address:void 0,chain:void 0,amount:void 0}}),children:[t.jsx(cc,{className:"mr-2 size-4"}),e("detail.send")]}),t.jsxs(et,{variant:"blue",className:"flex-1",onClick:()=>s({to:"/receive"}),children:[t.jsx(tn,{className:"mr-2 size-4"}),e("detail.receive")]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"mb-3 text-lg font-semibold",children:e("detail.transactionHistory")}),t.jsx(xr,{transactions:m0,emptyTitle:e("detail.noTransactions"),emptyDescription:e("detail.noTransactionsDesc")})]})]})]})}Hu.__docgenInfo={description:"",methods:[],displayName:"TokenDetailPage"};const qu=({params:e})=>t.jsx(ce,{children:t.jsx(pe,{params:e,children:t.jsx(Hu,{})})});qu.__docgenInfo={description:"",methods:[],displayName:"TokenDetailActivity"};function Uu(){const{t:e}=F("common"),{goBack:s}=me(),{push:n}=te(),r=je(us).contacts,i=je(we,Ve.getCurrentWallet),[c,o]=l.useState(""),u=l.useRef(null),d=l.useMemo(()=>c.trim()?ta.searchContacts(us.state,c.trim()):r,[r,c]),m=l.useCallback(()=>{s()},[s]),h=l.useCallback(()=>{n("ContactEditJob",{})},[n]),p=l.useCallback(f=>{n("ContactEditJob",{contactId:f.id})},[n]),g=l.useCallback(f=>{n("ContactShareJob",{name:f.name,addresses:JSON.stringify(f.addresses.map(x=>({address:x.address,label:x.label}))),memo:f.memo,avatar:f.avatar})},[n]),y=l.useCallback(f=>{u.current=f,i?.encryptedMnemonic?(Yt(async x=>{try{return await zt(i.encryptedMnemonic,x)?(ms.deleteContact(f.id),u.current=null,!0):!1}catch{return!1}}),n("WalletLockConfirmJob",{title:e("addressBook.deleteTitle"),description:e("addressBook.deleteConfirm",{name:f.name})})):(ms.deleteContact(f.id),u.current=null)},[i?.encryptedMnemonic,n,e]);return t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("addressBook.title"),onBack:m,rightAction:t.jsx("button",{onClick:h,className:z("rounded-full p-2 transition-colors","hover:bg-muted active:bg-muted/80"),"aria-label":e("a11y.addContact"),"data-testid":"address-book-add-button",children:t.jsx(St,{className:"size-5"})})}),t.jsx("div",{className:"px-4 py-2",children:t.jsxs("div",{className:"relative",children:[t.jsx(sn,{className:"text-muted-foreground absolute top-1/2 left-3 size-4 -translate-y-1/2"}),t.jsx("input",{type:"text",value:c,onChange:f=>o(f.target.value),placeholder:e("addressBook.searchPlaceholder"),className:z("border-border bg-background w-full rounded-xl border py-2.5 pr-4 pl-10","focus:ring-primary focus:ring-2 focus:outline-none")})]})}),t.jsx("div",{className:"flex-1 p-4",children:d.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-12",children:[t.jsx(kf,{className:"text-muted-foreground/50 size-12"}),t.jsx("p",{className:"text-muted-foreground",children:e(c?"addressBook.noResults":"addressBook.noContacts")}),!c&&t.jsx("button",{onClick:h,className:z("bg-primary rounded-full px-6 py-2.5 text-sm font-medium text-primary-foreground","hover:bg-primary/90 active:bg-primary/80"),children:e("contact.addTitle")})]}):t.jsx("div",{className:"space-y-2",children:d.map(f=>t.jsx(f0,{contact:f,onShare:()=>g(f),onEdit:()=>p(f),onDelete:()=>y(f)},f.id))})})]})}function f0({contact:e,onEdit:s,onDelete:n,onShare:a}){const{t:r}=F("common"),[i,c]=l.useState(!1);return t.jsx("div",{className:z("bg-card rounded-xl p-4 shadow-sm","transition-colors"),children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ia,{src:e.avatar||(e.addresses[0]?.address?$t(e.addresses[0].address):void 0),size:40}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h3",{className:"truncate font-medium",children:e.name}),e.addresses.length>0&&t.jsxs("p",{className:"text-muted-foreground truncate font-mono text-xs",children:[e.addresses[0]?.address,e.addresses.length>1&&` (+${e.addresses.length-1})`]}),e.memo&&t.jsx("p",{className:"text-muted-foreground mt-1 truncate text-xs",children:e.memo})]}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>c(!i),className:z("rounded-full p-2 transition-colors","hover:bg-muted active:bg-muted/80"),"aria-label":r("a11y.moreActions"),children:t.jsx(Bm,{className:"text-muted-foreground size-4"})}),i&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)}),t.jsxs("div",{className:"bg-popover border-border absolute top-full right-0 z-20 mt-1 w-32 rounded-lg border py-1 shadow-lg",children:[t.jsx("button",{onClick:()=>{c(!1),a()},className:"hover:bg-muted w-full px-4 py-2 text-left text-sm transition-colors",children:r("addressBook.shareContact")}),t.jsx("button",{onClick:()=>{c(!1),s()},className:"hover:bg-muted w-full px-4 py-2 text-left text-sm transition-colors",children:r("addressBook.edit")}),t.jsx("button",{onClick:()=>{c(!1),n()},className:"text-destructive hover:bg-destructive/10 w-full px-4 py-2 text-left text-sm transition-colors",children:r("addressBook.delete")})]})]})]})]})})}Uu.__docgenInfo={description:"",methods:[],displayName:"AddressBookPage"};const Vu=()=>t.jsx(ce,{children:t.jsx(Uu,{})});Vu.__docgenInfo={description:"",methods:[],displayName:"AddressBookActivity"};const Ju={notifications:[],unreadCount:0,isInitialized:!1},lt=new wm(Ju),cr="bfm_notifications";function wn(e){try{localStorage.setItem(cr,JSON.stringify(e))}catch(s){console.error("Failed to persist notifications:",s)}}function Sn(e){return e.filter(s=>!s.read).length}const Es={initialize:()=>{try{const e=localStorage.getItem(cr);if(e){const s=JSON.parse(e);lt.setState(()=>({notifications:s,unreadCount:Sn(s),isInitialized:!0}))}else lt.setState(s=>({...s,isInitialized:!0}))}catch(e){console.error("Failed to initialize notifications:",e),lt.setState(s=>({...s,isInitialized:!0}))}},add:e=>{const s={...e,id:crypto.randomUUID(),timestamp:Date.now(),read:!1};return lt.setState(n=>{const a=[s,...n.notifications];return wn(a),{...n,notifications:a,unreadCount:Sn(a)}}),s},markRead:e=>{lt.setState(s=>{const n=s.notifications.map(a=>a.id===e?{...a,read:!0}:a);return wn(n),{...s,notifications:n,unreadCount:Sn(n)}})},markAllRead:()=>{lt.setState(e=>{const s=e.notifications.map(n=>({...n,read:!0}));return wn(s),{...e,notifications:s,unreadCount:0}})},remove:e=>{lt.setState(s=>{const n=s.notifications.filter(a=>a.id!==e);return wn(n),{...s,notifications:n,unreadCount:Sn(n)}})},clearAll:()=>{localStorage.removeItem(cr),lt.setState(()=>Ju)}},h0={transaction:{icon:"",bg:"bg-blue-100 dark:bg-blue-900/30"},security:{icon:"",bg:"bg-red-100 dark:bg-red-900/30"},system:{icon:"",bg:"bg-gray-100 dark:bg-gray-800/30"}};function p0(){const{t:e}=F("notification"),s=Ys();return l.useCallback(n=>{const r=Date.now()-n,i=Math.floor(r/6e4),c=Math.floor(r/36e5),o=Math.floor(r/864e5);return i<1?e("time.justNow"):i<60?e("time.minutesAgo",{count:i}):c<24?e("time.hoursAgo",{count:c}):o<7?e("time.daysAgo",{count:o}):new Date(n).toLocaleDateString(s)},[e,s])}function x0({notification:e,onRead:s,onRemove:n,formatRelativeTime:a,t:r}){const i=h0[e.type],c=l.useCallback(()=>{e.read||s(e.id)},[e.id,e.read,s]);return t.jsxs("div",{onClick:c,className:z("flex cursor-pointer items-start gap-3 rounded-xl p-4 transition-colors",e.read?"bg-muted/30":"bg-card shadow-sm"),children:[t.jsx("div",{className:z("flex size-10 shrink-0 items-center justify-center rounded-full",i.bg),children:t.jsx("span",{className:"text-lg",children:i.icon})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsx("h4",{className:z("font-medium",e.read&&"text-muted-foreground"),children:e.title}),t.jsx("span",{className:"text-muted-foreground shrink-0 text-xs",children:a(e.timestamp)})]}),t.jsx("p",{className:z("mt-1 text-sm",e.read?"text-muted-foreground":"text-foreground/80"),children:e.message}),!e.read&&t.jsx("div",{className:"bg-primary mt-2 flex size-2 rounded-full","aria-label":r("unread")})]}),t.jsx("button",{onClick:o=>{o.stopPropagation(),n(e.id)},className:"text-muted-foreground hover:text-destructive shrink-0 p-1","aria-label":r("delete"),children:t.jsx(wt,{className:"size-4"})})]})}function g0({notifications:e,onRead:s,onRemove:n,formatRelativeTime:a,t:r,language:i}){const c=l.useMemo(()=>{const o=new Map,u=new Date().toLocaleDateString(i),d=new Date(Date.now()-864e5).toLocaleDateString(i);for(const m of e){const h=new Date(m.timestamp).toLocaleDateString(i);let p=h;h===u?p=r("time.today"):h===d&&(p=r("time.yesterday"));const g=o.get(p)||[];o.set(p,[...g,m])}return o},[e,i,r]);return e.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[t.jsx("div",{className:"bg-muted mb-4 flex size-16 items-center justify-center rounded-full",children:t.jsx($h,{className:"text-muted-foreground size-8"})}),t.jsx("h3",{className:"text-lg font-medium",children:r("empty.title")}),t.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:r("empty.desc")})]}):t.jsx("div",{className:"space-y-6",children:Array.from(c.entries()).map(([o,u])=>t.jsxs("div",{children:[t.jsx("h3",{className:"text-muted-foreground mb-2 text-sm font-medium",children:o}),t.jsx("div",{className:"space-y-2",children:u.map(d=>t.jsx(x0,{notification:d,onRead:s,onRemove:n,formatRelativeTime:a,t:r},d.id))})]},o))})}function Ku(){const{t:e}=F("notification"),s=Ys(),n=p0(),{goBack:a}=me(),r=je(lt);l.useEffect(()=>{r.isInitialized||Es.initialize()},[r.isInitialized]);const i=l.useCallback(d=>{Es.markRead(d)},[]),c=l.useCallback(d=>{Es.remove(d)},[]),o=l.useCallback(()=>{Es.markAllRead()},[]),u=l.useCallback(()=>{Es.clearAll()},[]);return t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("title"),onBack:a,rightAction:r.unreadCount>0?t.jsxs("button",{onClick:o,className:"text-primary hover:bg-primary/10 flex items-center gap-1 rounded-full px-3 py-1.5 text-sm","aria-label":e("markAllRead"),children:[t.jsx(Se,{className:"size-4"}),e("markAllRead")]}):void 0}),t.jsx("div",{className:"bg-card border-b px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-muted-foreground text-sm",children:r.unreadCount>0?e("unreadCount",{count:r.unreadCount}):e("noUnread")}),r.notifications.length>0&&t.jsxs(H,{variant:"ghost",size:"sm",onClick:u,className:"text-destructive",children:[t.jsx(wt,{className:"mr-1 size-4"}),e("clear")]})]})}),t.jsx("div",{className:"flex-1 p-4",children:t.jsx(g0,{notifications:r.notifications,onRead:i,onRemove:c,formatRelativeTime:n,t:e,language:s})})]})}Ku.__docgenInfo={description:"",methods:[],displayName:"NotificationCenterPage"};const Gu=()=>t.jsx(ce,{children:t.jsx(Ku,{})});Gu.__docgenInfo={description:"",methods:[],displayName:"NotificationsActivity"};function v0(e){const s=e.toNumber();return s>=1e9?`${(s/1e9).toFixed(2)}B`:s>=1e6?`${(s/1e6).toFixed(2)}M`:s>=1e3?`${(s/1e3).toFixed(2)}K`:s.toFixed(Math.min(5,8))}function Qu({item:e,onMint:s,className:n}){const{t:a}=F("staking"),r=[{label:a("totalMinted",{asset:e.assetType}),value:e.totalMinted},{label:a("totalCirculation",{asset:e.assetType}),value:e.totalCirculation},{label:a("totalBurned",{asset:e.assetType}),value:e.totalBurned},{label:a("totalStaked",{asset:e.externalAssetType}),value:e.totalStaked}];return t.jsxs("div",{className:z("overflow-hidden rounded-xl shadow-md","bg-gradient-to-b from-primary/90 to-primary",n),children:[t.jsxs("div",{className:"relative grid grid-cols-2 gap-3 p-4",children:[r.map((i,c)=>t.jsxs("div",{className:"flex flex-col items-center text-center",children:[t.jsx("span",{className:"text-lg font-semibold text-amber-300",children:v0(i.value)}),t.jsx("span",{className:"text-xs text-primary-foreground/70",children:i.label})]},c)),t.jsx("div",{className:"pointer-events-none absolute right-4 top-1/2 -translate-y-1/2 opacity-20",children:t.jsx("div",{className:"flex size-16 items-center justify-center rounded-full bg-white/20 text-2xl font-bold text-white",children:e.chain.charAt(0)})})]}),t.jsxs("div",{className:"flex items-center justify-between bg-card px-4 py-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(mt,{symbol:e.externalAssetType,size:"sm"}),t.jsxs("div",{className:"text-xs",children:[t.jsx("div",{className:"font-medium text-foreground",children:e.externalAssetType}),t.jsx("div",{className:"text-muted-foreground",children:e.externalChain})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(mt,{symbol:e.assetType,size:"sm"}),t.jsxs("div",{className:"text-xs",children:[t.jsx("div",{className:"font-medium text-foreground",children:e.assetType}),t.jsx("div",{className:"text-muted-foreground",children:e.chain})]})]}),t.jsx(H,{size:"sm",variant:"default",className:"rounded-full px-4",onClick:()=>s?.(e),children:a("mint")})]})]})]})}Qu.__docgenInfo={description:"Staking pool card component",methods:[],displayName:"StakingPoolCard",props:{item:{required:!0,tsType:{name:"StakingOverviewItem"},description:""},onMint:{required:!1,tsType:{name:"union",raw:"((item: StakingOverviewItem) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};const b0=[{value:"all",label:"allNetworks"},{value:"ETH",label:"Ethereum"},{value:"BSC",label:"BNB Chain"},{value:"TRON",label:"Tron"},{value:"BFMeta",label:"BFMeta"},{value:"BFChain",label:"BFChain"}];function Yu({onMint:e,className:s}){const{t:n}=F("staking"),[a,r]=l.useState(""),[i,c]=l.useState("all"),[o,u]=l.useState(!1),[d,m]=l.useState([]),[h,p]=l.useState(!0);l.useEffect(()=>{let f=!0;return p(!0),qt.getOverview().then(x=>{f&&(m(x),p(!1))}),()=>{f=!1}},[]);const g=l.useMemo(()=>{let f=d;if(a.trim()){const x=a.toLowerCase();f=f.filter(b=>b.assetType.toLowerCase().includes(x)||b.externalAssetType.toLowerCase().includes(x)||b.chain.toLowerCase().includes(x)||b.externalChain.toLowerCase().includes(x))}return i!=="all"&&(f=f.filter(x=>x.chain===i||x.externalChain===i)),f},[d,a,i]),y=f=>{c(f),u(!1)};return h?t.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[t.jsx(Me,{size:"lg"}),t.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:n("loading")})]}):t.jsxs("div",{className:z("space-y-4",s),children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(sn,{className:"text-muted-foreground absolute top-1/2 left-3 size-4 -translate-y-1/2"}),t.jsx(qe,{type:"text",placeholder:n("searchPlaceholder"),value:a,onChange:f=>r(f.target.value),className:"pl-9"})]}),t.jsxs(Bt,{open:o,onOpenChange:u,children:[t.jsx(Cf,{render:t.jsxs(H,{variant:"outline",size:"icon",className:"relative",children:[t.jsx(Rc,{className:"size-4"}),i!=="all"&&t.jsx("span",{className:"bg-primary absolute -top-1 -right-1 size-2 rounded-full"})]})}),t.jsxs(Lt,{side:"bottom",className:"h-[60vh]",children:[t.jsx(Ot,{children:t.jsx(Ft,{children:n("selectNetwork")})}),t.jsx("div",{className:"mt-4 space-y-2",children:b0.map(f=>t.jsxs("button",{onClick:()=>y(f.value),className:z("flex w-full items-center justify-between rounded-lg px-4 py-3 text-left transition-colors",i===f.value?"bg-primary/10 text-primary":"hover:bg-muted"),children:[t.jsx("span",{children:f.value==="all"?n("allNetworks"):f.label}),i===f.value&&t.jsx("span",{className:"text-primary",children:""})]},f.value))})]})]})]}),g.length===0?t.jsx("div",{className:"flex flex-col items-center justify-center py-20",children:t.jsx("p",{className:"text-muted-foreground",children:n("noResults")})}):t.jsx("div",{className:"space-y-4",children:g.map((f,x)=>t.jsx(Qu,{item:f,onMint:e},`${f.chain}-${f.assetType}-${x}`))})]})}Yu.__docgenInfo={description:"Staking overview panel with search and filter",methods:[],displayName:"StakingOverviewPanel",props:{onMint:{required:!1,tsType:{name:"signature",type:"function",raw:"(item: StakingOverviewItem) => void",signature:{arguments:[{type:{name:"StakingOverviewItem"},name:"item"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};const y0=["ETH","BSC","TRON"],Cn={ETH:"Ethereum",BSC:"BNB Chain",TRON:"Tron",BFMeta:"BFMeta",BFChain:"BFChain",CCChain:"CCChain",PMChain:"PMChain"},Bo={ETH:{BFM:"1000.00",USDT:"5000.00"},BSC:{BFM:"2500.00",USDT:"10000.00",BFC:"500.00"},TRON:{USDT:"8000.00"}};function j0(e,s){if(!e)return[];const n=[];for(const[a,r]of Object.entries(e))for(const[i,c]of Object.entries(r)){const o=c.supportChain[s];o&&n.push({asset:o.assetType,targetChain:a,targetAsset:i})}return n}function Xu({onSuccess:e,className:s}){const{t:n}=F("staking"),[a,r]=l.useState("BSC"),[i,c]=l.useState(""),[o,u]=l.useState(""),[d,m]=l.useState(""),[h,p]=l.useState(""),[g,y]=l.useState(!1),[f,x]=l.useState(!1),[b,v]=l.useState(!0),[j,N]=l.useState(!1),[w,M]=l.useState(null);l.useEffect(()=>{let C=!0;return qt.getRechargeConfig().then(B=>{C&&(M(B),v(!1))}),()=>{C=!1}},[]);const S=l.useMemo(()=>j0(w,a),[w,a]);l.useEffect(()=>{const C=S[0];C&&!i&&(c(C.asset),u(C.targetChain),m(C.targetAsset))},[S,i]);const k=l.useCallback(C=>{r(C),c(""),u(""),m(""),p(""),y(!1)},[]),I=l.useCallback(C=>{c(C.asset),u(C.targetChain),m(C.targetAsset),x(!1)},[]),E=l.useMemo(()=>Bo[a]?.[i]??"0.00",[a,i]),D=l.useCallback(()=>{p(E.replace(/,/g,""))},[E]),P=l.useMemo(()=>{if(!h)return null;const C=parseFloat(h);if(isNaN(C)||C<=0)return n("invalidAmount");const B=parseFloat(E.replace(/,/g,""));return C>B?n("insufficientBalance"):null},[h,E,n]),A=l.useMemo(()=>a&&i&&o&&d&&h&&!P&&!j,[a,i,o,d,h,P,j]),T=l.useCallback(async()=>{if(A){N(!0);try{const C=h.replace(/,/g,""),B={sourceChain:a,sourceAsset:i,amount:tt.fromFormatted(C,18,i),targetChain:o,targetAsset:d},_=await qt.submitMint(B);e?.(_.id)}finally{N(!1)}}},[A,a,i,h,o,d,e]);return b?t.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Me,{size:"lg"}),t.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:n("loading")})]}):t.jsxs("div",{className:z("space-y-4",s),children:[t.jsxs("div",{className:"bg-muted/50 rounded-xl p-4",children:[t.jsx("div",{className:"text-muted-foreground mb-2 text-xs",children:n("sourceChain")}),t.jsxs("button",{type:"button",onClick:()=>y(!0),className:"bg-background mb-3 flex w-full items-center justify-between rounded-lg px-3 py-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"bg-muted flex size-6 items-center justify-center rounded-full text-xs font-bold",children:a.charAt(0)}),t.jsx("span",{className:"font-medium",children:Cn[a]})]}),t.jsx(Oe,{className:"text-muted-foreground size-4"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{type:"button",onClick:()=>x(!0),className:"bg-background flex shrink-0 items-center gap-2 rounded-lg px-3 py-2",children:[t.jsx(mt,{symbol:i||"?",size:"sm"}),t.jsx("span",{className:"font-medium",children:i||n("selectToken")}),t.jsx(Oe,{className:"text-muted-foreground size-4"})]}),t.jsx("div",{className:"flex-1",children:t.jsx(qe,{type:"text",inputMode:"decimal",placeholder:"0.00",value:h,onChange:C=>p(C.target.value),className:"border-0 bg-transparent text-right text-lg font-semibold"})})]}),t.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[t.jsxs("span",{className:"text-muted-foreground",children:[n("availableBalance"),": ",E]}),t.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"text-primary h-auto px-2 py-1 text-xs",onClick:D,children:n("max")})]}),P&&t.jsx("div",{className:"text-destructive mt-2 text-xs",children:P})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx("div",{className:"bg-muted rounded-full p-2",children:t.jsx(tn,{className:"text-muted-foreground size-4"})})}),t.jsxs("div",{className:"bg-muted/50 rounded-xl p-4",children:[t.jsx("div",{className:"text-muted-foreground mb-2 text-xs",children:n("targetChain")}),t.jsxs("div",{className:"bg-background flex items-center justify-between rounded-lg px-3 py-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"bg-primary/20 text-primary flex size-6 items-center justify-center rounded-full text-xs font-bold",children:o.charAt(0)||"?"}),t.jsx("span",{className:"font-medium",children:Cn[o]||n("selectToken")})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(mt,{symbol:d||"?",size:"sm"}),t.jsx("span",{className:"font-medium",children:d||"-"})]})]}),t.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:n("amount")}),t.jsxs("span",{className:"font-semibold",children:[h||"0.00"," ",d]})]})]}),t.jsx(H,{type:"button",size:"lg",className:"w-full",disabled:!A,onClick:T,children:j?t.jsxs(t.Fragment,{children:[t.jsx(Me,{size:"sm"}),t.jsx("span",{className:"ml-2",children:n("confirm")})]}):n("confirm")}),t.jsx(Bt,{open:g,onOpenChange:y,children:t.jsxs(Lt,{side:"bottom",className:"h-[50vh]",children:[t.jsx(Ot,{children:t.jsx(Ft,{children:n("selectChain")})}),t.jsx("div",{className:"mt-4 space-y-2",children:y0.map(C=>t.jsxs("button",{onClick:()=>k(C),className:z("flex w-full items-center gap-3 rounded-lg px-4 py-3 transition-colors",a===C?"bg-primary/10 text-primary":"hover:bg-muted"),children:[t.jsx("div",{className:"bg-muted flex size-8 items-center justify-center rounded-full text-sm font-bold",children:C.charAt(0)}),t.jsx("span",{className:"font-medium",children:Cn[C]}),a===C&&t.jsx("span",{className:"text-primary ml-auto",children:""})]},C))})]})}),t.jsx(Bt,{open:f,onOpenChange:x,children:t.jsxs(Lt,{side:"bottom",className:"h-[60vh]",children:[t.jsx(Ot,{children:t.jsx(Ft,{children:n("selectToken")})}),t.jsx("div",{className:"mt-4 space-y-2",children:S.length===0?t.jsx("p",{className:"text-muted-foreground py-8 text-center",children:n("noResults")}):S.map(C=>t.jsxs("button",{onClick:()=>I(C),className:z("flex w-full items-center gap-3 rounded-lg px-4 py-3 transition-colors",i===C.asset?"bg-primary/10 text-primary":"hover:bg-muted"),children:[t.jsx(mt,{symbol:C.asset,size:"md"}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("div",{className:"font-medium",children:C.asset}),t.jsxs("div",{className:"text-muted-foreground text-xs",children:[" ",Cn[C.targetChain]," (",C.targetAsset,")"]})]}),t.jsx("div",{className:"text-muted-foreground text-right text-sm",children:Bo[a]?.[C.asset]??"0.00"}),i===C.asset&&t.jsx("span",{className:"text-primary",children:""})]},`${C.targetChain}-${C.asset}`))})]})})]})}Xu.__docgenInfo={description:"Mint form component",methods:[],displayName:"MintForm",props:{onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"(txId: string) => void",signature:{arguments:[{type:{name:"string"},name:"txId"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};const N0=["BFMeta","BFChain","CCChain","PMChain"],kn={ETH:"Ethereum",BSC:"BNB Chain",TRON:"Tron",BFMeta:"BFMeta",BFChain:"BFChain",CCChain:"CCChain",PMChain:"PMChain"},Lo={BFMeta:{BFM:"5000.00",USDT:"2500.00"},BFChain:{BFC:"1000.00"},CCChain:{},PMChain:{}};function w0(e,s){if(!e)return[];const n=s.toLowerCase(),a=e[n];if(!a)return[];const r=[];for(const[i,c]of Object.entries(a)){const o=[];c.supportChain.ETH&&o.push("ETH"),c.supportChain.BSC&&o.push("BSC"),c.supportChain.TRON&&o.push("TRON"),o.length>0&&r.push({asset:i,targetChains:o})}return r}function Zu({onSuccess:e,className:s}){const{t:n}=F("staking"),[a,r]=l.useState("BFMeta"),[i,c]=l.useState(""),[o,u]=l.useState(""),[d,m]=l.useState(""),[h,p]=l.useState(!1),[g,y]=l.useState(!1),[f,x]=l.useState(!1),[b,v]=l.useState(!0),[j,N]=l.useState(!1),[w,M]=l.useState(null);l.useEffect(()=>{let _=!0;return qt.getRechargeConfig().then(R=>{_&&(M(R),v(!1))}),()=>{_=!1}},[]);const S=l.useMemo(()=>w0(w,a),[w,a]),k=l.useMemo(()=>i?S.find(R=>R.asset===i)?.targetChains??[]:[],[S,i]);l.useEffect(()=>{const _=S[0];if(_&&!i){c(_.asset);const R=_.targetChains[0];R&&u(R)}},[S,i]);const I=l.useCallback(_=>{r(_),c(""),u(""),m(""),p(!1)},[]),E=l.useCallback(_=>{c(_.asset);const R=_.targetChains[0];R&&u(R),y(!1)},[]),D=l.useCallback(_=>{u(_),x(!1)},[]),P=l.useMemo(()=>Lo[a]?.[i]??"0.00",[a,i]),A=l.useCallback(()=>{m(P.replace(/,/g,""))},[P]),T=l.useMemo(()=>{if(!d)return null;const _=parseFloat(d);if(isNaN(_)||_<=0)return n("invalidAmount");const R=parseFloat(P.replace(/,/g,""));return _>R?n("insufficientBalance"):null},[d,P,n]),C=l.useMemo(()=>a&&i&&o&&d&&!T&&!j,[a,i,o,d,T,j]),B=l.useCallback(async()=>{if(!(!C||!o)){N(!0);try{const _=d.replace(/,/g,""),R={sourceChain:a,sourceAsset:i,amount:tt.fromFormatted(_,8,i),targetChain:o,targetAsset:i},L=await qt.submitBurn(R);e?.(L.id)}finally{N(!1)}}},[C,a,i,d,o,e]);return b?t.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Me,{size:"lg"}),t.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:n("loading")})]}):t.jsxs("div",{className:z("space-y-4",s),children:[t.jsxs("div",{className:"bg-muted/50 rounded-xl p-4",children:[t.jsx("div",{className:"text-muted-foreground mb-2 text-xs",children:n("sourceChain")}),t.jsxs("button",{type:"button",onClick:()=>p(!0),className:"bg-background mb-3 flex w-full items-center justify-between rounded-lg px-3 py-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"bg-primary/20 text-primary flex size-6 items-center justify-center rounded-full text-xs font-bold",children:a.charAt(0)}),t.jsx("span",{className:"font-medium",children:kn[a]})]}),t.jsx(Oe,{className:"text-muted-foreground size-4"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{type:"button",onClick:()=>y(!0),className:"bg-background flex shrink-0 items-center gap-2 rounded-lg px-3 py-2",children:[t.jsx(mt,{symbol:i||"?",size:"sm"}),t.jsx("span",{className:"font-medium",children:i||n("selectToken")}),t.jsx(Oe,{className:"text-muted-foreground size-4"})]}),t.jsx("div",{className:"flex-1",children:t.jsx(qe,{type:"text",inputMode:"decimal",placeholder:"0.00",value:d,onChange:_=>m(_.target.value),className:"border-0 bg-transparent text-right text-lg font-semibold"})})]}),t.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[t.jsxs("span",{className:"text-muted-foreground",children:[n("availableBalance"),": ",P]}),t.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"text-primary h-auto px-2 py-1 text-xs",onClick:A,children:n("max")})]}),T&&t.jsx("div",{className:"text-destructive mt-2 text-xs",children:T})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx("div",{className:"bg-muted rounded-full p-2",children:t.jsx(tn,{className:"text-muted-foreground size-4"})})}),t.jsxs("div",{className:"bg-muted/50 rounded-xl p-4",children:[t.jsx("div",{className:"text-muted-foreground mb-2 text-xs",children:n("targetChain")}),t.jsxs("button",{type:"button",onClick:()=>x(!0),disabled:k.length===0,className:"bg-background flex w-full items-center justify-between rounded-lg px-3 py-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"bg-muted flex size-6 items-center justify-center rounded-full text-xs font-bold",children:o?o.charAt(0):"?"}),t.jsx("span",{className:"font-medium",children:o?kn[o]:n("selectChain")})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(mt,{symbol:i||"?",size:"sm"}),t.jsx("span",{className:"font-medium",children:i||"-"}),t.jsx(Oe,{className:"text-muted-foreground size-4"})]})]}),t.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:n("amount")}),t.jsxs("span",{className:"font-semibold",children:[d||"0.00"," ",i]})]})]}),t.jsx(H,{type:"button",size:"lg",className:"w-full",disabled:!C,onClick:B,children:j?t.jsxs(t.Fragment,{children:[t.jsx(Me,{size:"sm"}),t.jsx("span",{className:"ml-2",children:n("confirm")})]}):n("confirm")}),t.jsx(Bt,{open:h,onOpenChange:p,children:t.jsxs(Lt,{side:"bottom",className:"h-[50vh]",children:[t.jsx(Ot,{children:t.jsx(Ft,{children:n("selectChain")})}),t.jsx("div",{className:"mt-4 space-y-2",children:N0.map(_=>t.jsxs("button",{onClick:()=>I(_),className:z("flex w-full items-center gap-3 rounded-lg px-4 py-3 transition-colors",a===_?"bg-primary/10 text-primary":"hover:bg-muted"),children:[t.jsx("div",{className:"bg-primary/20 text-primary flex size-8 items-center justify-center rounded-full text-sm font-bold",children:_.charAt(0)}),t.jsx("span",{className:"font-medium",children:kn[_]}),a===_&&t.jsx("span",{className:"text-primary ml-auto",children:""})]},_))})]})}),t.jsx(Bt,{open:g,onOpenChange:y,children:t.jsxs(Lt,{side:"bottom",className:"h-[60vh]",children:[t.jsx(Ot,{children:t.jsx(Ft,{children:n("selectToken")})}),t.jsx("div",{className:"mt-4 space-y-2",children:S.length===0?t.jsx("p",{className:"text-muted-foreground py-8 text-center",children:n("noResults")}):S.map(_=>t.jsxs("button",{onClick:()=>E(_),className:z("flex w-full items-center gap-3 rounded-lg px-4 py-3 transition-colors",i===_.asset?"bg-primary/10 text-primary":"hover:bg-muted"),children:[t.jsx(mt,{symbol:_.asset,size:"md"}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("div",{className:"font-medium",children:_.asset}),t.jsxs("div",{className:"text-muted-foreground text-xs",children:[" ",_.targetChains.join(", ")]})]}),t.jsx("div",{className:"text-muted-foreground text-right text-sm",children:Lo[a]?.[_.asset]??"0.00"}),i===_.asset&&t.jsx("span",{className:"text-primary",children:""})]},_.asset))})]})}),t.jsx(Bt,{open:f,onOpenChange:x,children:t.jsxs(Lt,{side:"bottom",className:"h-[50vh]",children:[t.jsx(Ot,{children:t.jsx(Ft,{children:n("selectChain")})}),t.jsx("div",{className:"mt-4 space-y-2",children:k.map(_=>t.jsxs("button",{onClick:()=>D(_),className:z("flex w-full items-center gap-3 rounded-lg px-4 py-3 transition-colors",o===_?"bg-primary/10 text-primary":"hover:bg-muted"),children:[t.jsx("div",{className:"bg-muted flex size-8 items-center justify-center rounded-full text-sm font-bold",children:_.charAt(0)}),t.jsx("span",{className:"font-medium",children:kn[_]}),o===_&&t.jsx("span",{className:"text-primary ml-auto",children:""})]},_))})]})})]})}Zu.__docgenInfo={description:"Burn form component",methods:[],displayName:"BurnForm",props:{onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"(txId: string) => void",signature:{arguments:[{type:{name:"string"},name:"txId"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};const Oo={ETH:"Ethereum",BSC:"BNB Chain",TRON:"Tron",BFMeta:"BFMeta",BFChain:"BFChain",CCChain:"CCChain",PMChain:"PMChain"};function S0({status:e}){switch(e){case"pending":return t.jsx(Eh,{className:"size-4 text-yellow-500"});case"confirming":return t.jsx(Ue,{className:"size-4 animate-spin text-blue-500"});case"confirmed":return t.jsx(ys,{className:"size-4 text-green-500"});case"failed":return t.jsx(Wh,{className:"text-destructive size-4"})}}function C0(e){const n=Date.now()-e;return n<6e4?"Just now":n<36e5?`${Math.floor(n/6e4)}m ago`:n<864e5?`${Math.floor(n/36e5)}h ago`:new Date(e).toLocaleDateString()}function k0(e){const s=e.toNumber();return s>=1e6?`${(s/1e6).toFixed(2)}M`:s>=1e3?`${(s/1e3).toFixed(2)}K`:s.toFixed(4)}function A0({record:e,onClick:s}){const{t:n}=F("staking"),a=e.type==="mint",r=a?dp:Pc;return t.jsxs("button",{type:"button",onClick:s,className:"bg-card hover:bg-muted/50 flex w-full items-center gap-3 rounded-lg p-3 text-left transition-colors",children:[t.jsx("div",{className:z("flex size-10 items-center justify-center rounded-full",a?"bg-green-500/10":"bg-orange-500/10"),children:t.jsx(r,{className:z("size-5",a?"text-green-500":"text-orange-500")})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium",children:n(a?"mint":"burn")}),t.jsx(S0,{status:e.status})]}),t.jsxs("div",{className:"text-muted-foreground flex items-center gap-1 text-xs",children:[t.jsx("span",{children:Oo[e.sourceChain]}),t.jsx("span",{children:""}),t.jsx("span",{children:Oo[e.targetChain]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[t.jsx(mt,{symbol:e.sourceAsset,size:"sm"}),t.jsx("span",{className:"font-medium",children:k0(e.sourceAmount)})]}),t.jsx("div",{className:"text-muted-foreground text-xs",children:C0(e.createdAt)})]})]})}function em({filterType:e="all",onRecordClick:s,className:n}){const{t:a}=F("staking"),[r,i]=l.useState([]),[c,o]=l.useState(!0),[u,d]=l.useState(e==="all"?"all":e);l.useEffect(()=>{let g=!0;return o(!0),qt.getTransactions().then(y=>{g&&(i(y),o(!1))}),()=>{g=!1}},[]);const m=l.useMemo(()=>u==="all"?r:r.filter(g=>g.type===u),[r,u]),h=[{id:"all",label:a("history")},{id:"mint",label:a("mint")},{id:"burn",label:a("burn")}],p=l.useCallback(()=>{o(!0),qt.getTransactions().then(g=>{i(g),o(!1)})},[]);return c?t.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Me,{size:"lg"}),t.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:a("loading")})]}):t.jsxs("div",{className:z("space-y-4",n),children:[t.jsxs("div",{className:"flex items-center gap-2",children:[h.map(g=>t.jsx(H,{type:"button",variant:u===g.id?"default":"outline",size:"sm",onClick:()=>d(g.id),children:g.label},g.id)),t.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"ml-auto",onClick:p,children:a("refresh")})]}),m.length===0?t.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:t.jsx("p",{className:"text-muted-foreground",children:a("noTransactions")})}):t.jsx("div",{className:"space-y-2",children:m.map(g=>t.jsx(A0,{record:g,onClick:()=>s?.(g)},g.id))})]})}em.__docgenInfo={description:"Staking record list component",methods:[],displayName:"StakingRecordList",props:{filterType:{required:!1,tsType:{name:"union",raw:"StakingTxType | 'all'",elements:[{name:"StakingTxType"},{name:"literal",value:"'all'"}]},description:"Filter by transaction type",defaultValue:{value:"'all'",computed:!1}},onRecordClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(record: StakingTransaction) => void",signature:{arguments:[{type:{name:"StakingTransaction"},name:"record"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};function tm(){const{t:e}=F("staking"),{goBack:s}=me(),[n,a]=l.useState("overview"),r=[{id:"overview",label:e("overview")},{id:"mint",label:e("mint")},{id:"burn",label:e("burn")},{id:"history",label:e("history")}],i=c=>{a("mint")};return t.jsxs("div",{className:"flex min-h-screen flex-col bg-background",children:[t.jsx(Q,{title:e("title"),onBack:s}),t.jsx("div",{className:"flex border-b border-border px-4",children:r.map(c=>t.jsx("button",{onClick:()=>a(c.id),className:z("flex-1 py-3 text-sm font-medium transition-colors",n===c.id?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"),children:c.label},c.id))}),t.jsxs("div",{className:"flex-1 p-4",children:[n==="overview"&&t.jsx(Yu,{onMint:i}),n==="mint"&&t.jsx(I0,{}),n==="burn"&&t.jsx(T0,{}),n==="history"&&t.jsx(em,{})]})]})}function I0(){const{t:e}=F("staking"),s=n=>{console.log("Mint transaction submitted:",n)};return t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:e("mintDescription")}),t.jsx(Xu,{onSuccess:s})]})}function T0(){const{t:e}=F("staking"),s=n=>{console.log("Burn transaction submitted:",n)};return t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:e("burnDescription")}),t.jsx(Zu,{onSuccess:s})]})}tm.__docgenInfo={description:"Staking page with tab navigation",methods:[],displayName:"StakingPage"};const sm=()=>t.jsx(ce,{children:t.jsx(tm,{})});sm.__docgenInfo={description:"",methods:[],displayName:"StakingActivity"};const E0=l.createContext(null);function P0(){return l.useContext(E0)}const _0="keyapp_welcome_shown";function An(){localStorage.setItem(_0,"1")}function nm(){const{t:e}=F("guide"),{navigate:s}=me(),[n,a]=l.useState(0),r=P0(),i=l.useMemo(()=>[{icon:t.jsx(zc,{className:"text-primary size-16"}),title:e("welcome.slides.transfer.title"),description:e("welcome.slides.transfer.description")},{icon:t.jsx(Dc,{className:"text-primary size-16"}),title:e("welcome.slides.multichain.title"),description:e("welcome.slides.multichain.description")},{icon:t.jsx(Hh,{className:"text-primary size-16"}),title:e("welcome.slides.security.title"),description:e("welcome.slides.security.description")}],[e]),c=i[n];if(!c)return null;const o=l.useCallback(()=>{An(),s({to:"/wallet/create"})},[s]),u=l.useCallback(()=>{An(),s({to:"/onboarding/recover"})},[s]),d=l.useCallback(()=>{An(),s({to:"/onboarding/migrate"})},[s]),m=l.useCallback(()=>{An(),s({to:"/"})},[s]),h=l.useCallback(()=>{n<i.length-1&&a(y=>y+1)},[n,i.length]),p=n===i.length-1,g=r?.shouldPromptMigration;return t.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[t.jsx("div",{className:"flex justify-end p-4",children:t.jsx(H,{variant:"ghost",size:"sm","data-testid":"skip-button",onClick:m,children:e("welcome.skip")})}),t.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center px-8",children:[t.jsx("div",{className:"bg-primary/10 mb-8 flex size-32 items-center justify-center rounded-full",children:c.icon}),t.jsx("h1",{className:"mb-4 text-center text-2xl font-bold",children:c.title}),t.jsx("p",{className:"text-muted-foreground mb-8 max-w-sm text-center",children:c.description}),t.jsx("div",{className:"mb-8 flex gap-2",children:i.map((y,f)=>t.jsx("button",{"data-testid":`slide-dot-${f}`,onClick:()=>a(f),className:z("size-2 rounded-full transition-colors",f===n?"bg-primary":"bg-muted-foreground/30"),"aria-label":e("welcome.goToSlide",{number:f+1})},f))})]}),t.jsx("div",{className:"p-6",children:p?t.jsxs("div",{className:"flex flex-col gap-3",children:[g&&t.jsxs(H,{"data-testid":"migrate-button",onClick:d,className:"w-full",size:"lg",variant:"default",children:[t.jsx(Nr,{className:"mr-2 size-4"}),e("welcome.migrateFromMpay",{defaultValue:" mpay "})]}),t.jsx(H,{"data-testid":"get-started-button",onClick:o,className:"w-full",size:"lg",variant:g?"outline":"default",children:e("welcome.getStarted")}),t.jsx(H,{"data-testid":"have-wallet-button",onClick:u,variant:"outline",className:"w-full",size:"lg",children:e("welcome.haveWallet")})]}):t.jsxs(H,{"data-testid":"next-button",onClick:h,className:"w-full",size:"lg",children:[e("welcome.next"),t.jsx(Oe,{className:"ml-2 size-4"})]})})]})}nm.__docgenInfo={description:"",methods:[],displayName:"WelcomeScreen"};const am=()=>t.jsx(ce,{children:t.jsx(nm,{})});am.__docgenInfo={description:"",methods:[],displayName:"WelcomeActivity"};function rm(){const{t:e}=F(["wallet","onboarding","security","common"]),{goBack:s}=me(),n=Le(),a=Gs(),r=Ct(),[i,c]=l.useState("select"),[o,u]=l.useState([]),[d,m]=l.useState([]),[h,p]=l.useState(!1),g=l.useRef(!1);l.useEffect(()=>{!g.current&&n&&(u(n.chainAddresses.map(b=>b.chain)),g.current=!0)},[n]);const y=l.useCallback(()=>{if(!n)return!1;const b=new Set(n.chainAddresses.map(v=>v.chain));return b.size!==o.length?!0:o.some(v=>!b.has(v))},[n,o]),f=l.useCallback(()=>{if(!y()){s();return}c("verify")},[y,s]),x=l.useCallback(async b=>{if(!(!n||b.length<4)){p(!1),c("saving");try{const v=Ut(b);await ye.updateWalletChainAddresses(n.id,o,v,a),!o.includes(r)&&o.length>0&&ye.setSelectedChain(o[0]),c("success"),setTimeout(()=>{s()},1500)}catch(v){console.error("Failed to update chain addresses:",v),v instanceof Error&&v.message.includes("decrypt")?(p(!0),m([]),c("verify"),setTimeout(()=>{p(!1)},1500)):c("select")}}},[n,o,a,s]);return n?i==="saving"?t.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("wallet:chains.title")}),t.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 p-4",children:[t.jsx(Me,{size:"lg"}),t.jsx("p",{className:"text-muted-foreground",children:e("wallet:chains.saving")})]})]}):i==="success"?t.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("wallet:chains.title")}),t.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 p-4",children:[t.jsx("div",{className:"flex size-16 items-center justify-center rounded-full bg-green-500/10",children:t.jsx(Se,{className:"size-8 text-green-500"})}),t.jsx("p",{className:"font-medium",children:e("wallet:chains.success")})]})]}):i==="verify"?t.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("wallet:chains.verifyTitle"),onBack:()=>{c("select"),m([])}}),t.jsxs("div",{className:"flex-1 p-4",children:[t.jsxs("div",{className:"mb-6 text-center",children:[t.jsx("h2",{className:"text-xl font-bold",children:e("wallet:chains.verifyTitle")}),t.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:e("wallet:chains.verifyDesc")})]}),t.jsx(bs,{value:d,onChange:m,onComplete:x,minPoints:4,error:h,"data-testid":"wallet-chains-pattern"})]})]}):t.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("wallet:chains.title"),onBack:s}),t.jsxs("div",{className:"flex-1 space-y-6 p-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx(nn,{icon:ys,variant:"success",size:"lg",className:"mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-bold",children:e("onboarding:chainSelector.title")}),t.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:e("onboarding:chainSelector.subtitle")})]}),a.length===0?t.jsx("div",{className:"flex justify-center py-10",children:t.jsx(Me,{})}):t.jsx(Ar,{"data-testid":"wallet-chains-selector",chains:a,selectedChains:o,onSelectionChange:u}),t.jsx(et,{variant:"mint",className:"w-full","data-testid":"wallet-chains-save",disabled:o.length===0,onClick:f,children:y()?e("common:save"):e("common:done")})]})]}):t.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("wallet:chains.title"),onBack:s}),t.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:t.jsx(fs,{variant:"warning",children:e("wallet:chains.noWallet")})})]})}rm.__docgenInfo={description:"",methods:[],displayName:"WalletChainsPage"};const im=()=>t.jsx(ce,{children:t.jsx(rm,{})});im.__docgenInfo={description:"",methods:[],displayName:"SettingsWalletChainsActivity"};function Ba(e){if(e===0)return"0 B";const s=1024,n=["B","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(s));return`${parseFloat((e/Math.pow(s,a)).toFixed(2))} ${n[a]}`}function om(){const{t:e}=F(["settings","common"]),{goBack:s}=me(),{push:n}=te(),[a,r]=l.useState(null),[i,c]=l.useState(!0),o=l.useCallback(async()=>{c(!0);try{if(navigator.storage&&navigator.storage.estimate){const d=await navigator.storage.estimate();r({usage:d.usage??0,quota:d.quota??0})}}catch(d){console.error("Failed to get storage estimate:",d)}finally{c(!1)}},[]);l.useEffect(()=>{o()},[o]);const u=a?a.usage/a.quota*100:0;return t.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("settings:storage.title"),onBack:s}),t.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[t.jsxs("div",{className:"bg-card rounded-xl p-4 shadow-sm",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"bg-primary/10 flex size-10 items-center justify-center rounded-full",children:t.jsx(Mc,{className:"text-primary size-5"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium",children:e("settings:storage.usage")}),t.jsx("p",{className:"text-muted-foreground text-sm",children:e("settings:storage.basedOn")})]})]}),i?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(Ue,{className:"text-muted-foreground size-6 animate-spin"})}):a?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"bg-muted h-3 w-full overflow-hidden rounded-full",children:t.jsx("div",{className:"bg-primary h-full rounded-full transition-all",style:{width:`${Math.min(u,100)}%`}})}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsxs("span",{className:"text-muted-foreground",children:[e("settings:storage.used"),": ",Ba(a.usage)]}),t.jsxs("span",{className:"text-muted-foreground",children:[e("settings:storage.total"),": ",Ba(a.quota)]})]})]}),t.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 space-y-1",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:e("settings:storage.usagePercent")}),t.jsxs("span",{className:"font-medium",children:[u.toFixed(2),"%"]})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:e("settings:storage.available")}),t.jsx("span",{className:"font-medium",children:Ba(a.quota-a.usage)})]})]})]}):t.jsx("p",{className:"text-muted-foreground text-center py-4",children:e("settings:storage.unavailable")})]}),t.jsxs("div",{className:"bg-card rounded-xl p-4 shadow-sm",children:[t.jsx("h3",{className:"font-medium mb-2",children:e("settings:storage.clearTitle")}),t.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:e("settings:storage.clearDesc")}),t.jsxs(H,{variant:"destructive",className:"w-full",onClick:()=>n("ClearDataConfirmJob",{}),children:[t.jsx(wt,{className:"size-4 mr-2"}),e("settings:items.clearData")]})]})]})]})}om.__docgenInfo={description:"",methods:[],displayName:"SettingsStoragePage"};const cm=()=>t.jsx(ce,{children:t.jsx(om,{})});cm.__docgenInfo={description:"",methods:[],displayName:"SettingsStorageActivity"};const lm=()=>{const{t:e}=F("common"),{pop:s}=te(),n=je(Fs),[a,r]=l.useState(!1),[i,c]=l.useState(""),[o,u]=l.useState(""),[d,m]=l.useState(!1),[h,p]=l.useState(null),g=async()=>{if(!i.trim()){p(" URL");return}try{new URL(i)}catch{p(" URL ");return}if(n.sources.some(b=>b.url===i)){p("");return}ls.addSource(i,o||""),c(""),u(""),r(!1),p(null)},y=b=>{ls.removeSource(b)},f=b=>{ls.toggleSource(b)},x=async()=>{m(!0);try{await ni()}catch(b){console.error("Refresh failed:",b)}m(!1)};return t.jsx(ce,{children:t.jsxs("div",{className:"flex flex-col min-h-full bg-background",children:[t.jsx("div",{className:"sticky top-0 z-10 bg-background border-b",children:t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[t.jsx("button",{onClick:()=>s(),className:"p-1.5 rounded-full hover:bg-muted transition-colors","aria-label":e("back",""),children:t.jsx(bc,{className:"size-5",stroke:1.5})}),t.jsx("h1",{className:"flex-1 text-lg font-semibold",children:""}),t.jsx("button",{onClick:x,disabled:d,className:"p-1.5 rounded-full hover:bg-muted transition-colors","aria-label":e("refresh",""),children:t.jsx(en,{className:z("size-5",d&&"animate-spin"),stroke:1.5})})]})}),t.jsxs("div",{className:"flex-1 p-4 space-y-3",children:[n.sources.map(b=>t.jsx(M0,{source:b,onToggle:()=>f(b.url),onRemove:()=>y(b.url)},b.url)),n.sources.length===0&&t.jsx("div",{className:"text-center py-12 text-muted-foreground",children:""})]}),a?t.jsxs("div",{className:"border-t p-4 bg-background space-y-3",children:[t.jsx("input",{type:"url",value:i,onChange:b=>{c(b.target.value),p(null)},placeholder:" URL (https://...)",className:"w-full px-3 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary",autoFocus:!0}),t.jsx("input",{type:"text",value:o,onChange:b=>u(b.target.value),placeholder:" ()",className:"w-full px-3 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary"}),h&&t.jsx("p",{className:"text-sm text-destructive",children:h}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{r(!1),c(""),u(""),p(null)},className:"flex-1 py-2 rounded-lg bg-muted hover:bg-muted/80 font-medium",children:""}),t.jsx("button",{onClick:g,className:"flex-1 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 font-medium",children:""})]})]}):t.jsx("div",{className:"border-t p-4",children:t.jsxs("button",{onClick:()=>r(!0),className:"w-full py-3 rounded-xl border-2 border-dashed border-muted-foreground/30 hover:border-primary hover:bg-primary/5 transition-colors flex items-center justify-center gap-2 text-muted-foreground hover:text-primary",children:[t.jsx(St,{className:"size-5",stroke:1.5}),t.jsx("span",{children:""})]})}),t.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})};function M0({source:e,onToggle:s,onRemove:n}){const a=e.url==="/ecosystem.json";return t.jsx("div",{className:z("rounded-xl border p-4 transition-colors",e.enabled?"bg-card":"bg-muted/30 opacity-60"),children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"rounded-full bg-primary/10 p-2 shrink-0",children:t.jsx(Bc,{className:"size-5 text-primary"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"font-medium truncate",children:e.name}),a&&t.jsx("span",{className:"text-xs bg-primary/10 text-primary px-1.5 py-0.5 rounded",children:""})]}),t.jsx("p",{className:"text-sm text-muted-foreground truncate mt-0.5",children:e.url}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" ",new Date(e.lastUpdated).toLocaleDateString()]})]}),t.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[t.jsx("button",{onClick:s,className:z("p-2 rounded-full transition-colors",e.enabled?"bg-green-100 text-green-600 hover:bg-green-200":"bg-muted text-muted-foreground hover:bg-muted/80"),"aria-label":e.enabled?"":"",children:e.enabled?t.jsx(Se,{className:"size-4",stroke:2}):t.jsx(oa,{className:"size-4",stroke:2})}),!a&&t.jsx("button",{onClick:n,className:"p-2 rounded-full text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors","aria-label":"",children:t.jsx(wt,{className:"size-4",stroke:1.5})})]})]})})}lm.__docgenInfo={description:"",methods:[],displayName:"SettingsSourcesActivity"};const Fo={defi:"DeFi",nft:"NFT",tools:"",games:"",social:"",exchange:"",other:""};function R0({permission:e,isLast:s}){const n=df[e],a=n?.risk??"medium",r=a==="high"?ht:fc,i=a==="high"?"text-red-500":a==="medium"?"text-amber-500":"text-green-500";return t.jsxs("div",{className:z("flex items-start gap-3 py-3",!s&&"border-b border-border/50"),children:[t.jsx(r,{className:z("size-5 mt-0.5 shrink-0",i),stroke:1.5}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-sm",children:n?.name??e}),t.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:n?.description??""})]})]})}function ss({label:e,value:s,isLink:n=!1,href:a}){const r=t.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border/50 last:border-0",children:[t.jsx("span",{className:"text-muted-foreground text-sm",children:e}),t.jsxs("span",{className:z("text-sm font-medium",n&&"text-primary flex items-center gap-1"),children:[s,n&&t.jsx(Oe,{className:"size-4"})]})]});return n&&a?t.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",children:r}):r}const dm=({params:e})=>{const{t:s}=F("common"),{pop:n}=te(),[a,r]=l.useState(null),[i,c]=l.useState(!0),[o,u]=l.useState(!1),[d,m]=l.useState(!1);l.useEffect(()=>{let x=!1;return(async()=>{c(!0),await id();let v=wo(e.appId);v||(await ni({force:!1}),v=wo(e.appId)),!x&&(r(v??null),m(Db(e.appId)),c(!1))})(),()=>{x=!0}},[e.appId]);const h=l.useCallback(()=>{a&&(cd(a.id),m(!0))},[a]),p=l.useCallback(()=>{a&&(ld(a.id),ls.setActiveSubPage("mine"),rc(a.id,{...a,targetDesktop:"mine"}),n())},[a,n]);if(i)return t.jsx(ce,{children:t.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:t.jsx(Me,{size:"lg"})})});if(!a)return t.jsx(ce,{children:t.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center bg-background gap-4",children:[t.jsx("p",{className:"text-muted-foreground",children:""}),t.jsx("button",{onClick:()=>n(),className:"px-4 py-2 bg-primary text-primary-foreground rounded-full text-sm font-medium",children:""})]})});const g=a.longDescription??a.description,y=g.length>150,f=o||!y?g:g.slice(0,150)+"...";return t.jsx(ce,{children:t.jsxs("div",{className:"flex min-h-screen flex-col bg-background detail-scroll-container",children:[t.jsx("div",{className:"sticky top-0 z-20 bg-background/80 backdrop-blur-xl border-b border-border/50",children:t.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[t.jsx("button",{onClick:()=>n(),className:"p-1.5 -ml-1.5 rounded-full hover:bg-muted transition-colors",children:t.jsx(bc,{className:"size-5",stroke:1.5})}),t.jsx("span",{className:"font-semibold truncate max-w-[200px] detail-header-title",children:a.name}),t.jsx("button",{className:"p-1.5 -mr-1.5 rounded-full hover:bg-muted transition-colors",children:t.jsx(Mr,{className:"size-5",stroke:1.5})})]})}),t.jsxs("div",{className:"flex-1 overflow-y-auto detail-scroller",children:[t.jsxs("div",{className:"px-5 pt-4 pb-5",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx(ic,{src:a.icon,name:a.name,size:"2xl",shadow:"lg",className:"shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0 pt-1",children:[t.jsx("h1",{className:"text-xl font-bold truncate",children:a.name}),t.jsx("p",{className:"text-sm text-muted-foreground mt-0.5 truncate",children:a.author??""}),d?t.jsx("button",{onClick:p,className:"mt-4 px-8 py-2 bg-primary text-primary-foreground rounded-full text-sm font-semibold",children:""}):t.jsx("button",{onClick:h,className:"mt-4 px-8 py-2 bg-primary text-primary-foreground rounded-full text-sm font-semibold",children:""})]})]}),t.jsxs("div",{className:"flex items-center gap-4 mt-5 text-xs text-muted-foreground",children:[a.category&&t.jsx("span",{className:"font-medium text-foreground",children:Fo[a.category]??a.category}),a.beta&&t.jsx("span",{className:"px-2 py-0.5 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded-full font-medium",children:"Beta"}),t.jsxs("span",{children:["v",a.version]})]})]}),a.screenshots&&a.screenshots.length>0&&t.jsx("div",{className:"border-t border-border/50",children:t.jsxs("div",{className:"px-5 py-4",children:[t.jsx("h2",{className:"text-lg font-bold mb-4",children:""}),t.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-5 px-5 snap-x snap-mandatory",style:{scrollbarWidth:"none"},children:a.screenshots.map((x,b)=>t.jsx("div",{className:"w-[220px] aspect-[9/19.5] rounded-2xl bg-muted overflow-hidden shrink-0 snap-center shadow-lg ring-1 ring-black/5",children:t.jsx("img",{src:x,alt:`${a.name} screenshot ${b+1}`,className:"w-full h-full object-cover",loading:"lazy",onError:v=>{v.currentTarget.parentElement.style.display="none"}})},b))})]})}),t.jsxs("div",{className:"border-t border-border/50 px-5 py-4",children:[t.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:f}),y&&t.jsxs("button",{onClick:()=>u(!o),className:"text-primary text-sm font-medium mt-2 flex items-center gap-1",children:[o?"":"",o?t.jsx(Pr,{className:"size-4"}):t.jsx(wr,{className:"size-4"})]})]}),a.chains&&a.chains.length>0&&t.jsxs("div",{className:"border-t border-border/50 px-5 py-4",children:[t.jsx("h2",{className:"text-lg font-bold mb-3",children:""}),t.jsx("div",{className:"flex flex-wrap gap-2",children:a.chains.map(x=>t.jsx("span",{className:"px-3 py-1.5 bg-muted rounded-full text-sm font-medium",children:x},x))})]}),a.permissions&&a.permissions.length>0&&t.jsxs("div",{className:"border-t border-border/50 px-5 py-4",children:[t.jsx("h2",{className:"text-lg font-bold mb-1",children:""}),t.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:""}),t.jsx("div",{className:"bg-muted/50 rounded-2xl px-4",children:a.permissions.map((x,b)=>t.jsx(R0,{permission:x,isLast:b===a.permissions.length-1},x))})]}),a.tags&&a.tags.length>0&&t.jsxs("div",{className:"border-t border-border/50 px-5 py-4",children:[t.jsx("h2",{className:"text-lg font-bold mb-3",children:""}),t.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map(x=>t.jsxs("span",{className:"px-3 py-1.5 bg-primary/10 text-primary rounded-full text-sm font-medium",children:["#",x]},x))})]}),t.jsxs("div",{className:"border-t border-border/50 px-5 py-4",children:[t.jsx("h2",{className:"text-lg font-bold mb-2",children:""}),t.jsxs("div",{className:"bg-muted/50 rounded-2xl px-4",children:[a.author&&t.jsx(ss,{label:"",value:a.author}),t.jsx(ss,{label:"",value:a.version}),a.category&&t.jsx(ss,{label:"",value:Fo[a.category]??a.category}),a.publishedAt&&t.jsx(ss,{label:"",value:a.publishedAt}),a.updatedAt&&t.jsx(ss,{label:"",value:a.updatedAt}),a.website&&t.jsx(ss,{label:"",value:"",isLink:!0,href:a.website})]})]}),t.jsx("div",{className:"h-8"})]})]})})};dm.__docgenInfo={description:"",methods:[],displayName:"MiniappDetailActivity"};function Ks({className:e,...s}){return t.jsx("label",{"data-slot":"label",className:z("gap-2 text-sm leading-none font-medium group-data-[disabled=true]:opacity-50 peer-disabled:opacity-50 flex items-center select-none group-data-[disabled=true]:pointer-events-none peer-disabled:cursor-not-allowed",e),...s})}Ks.__docgenInfo={description:"",methods:[],displayName:"Label"};function li({className:e,size:s="default",...n}){return t.jsx("div",{"data-slot":"card","data-size":s,className:z("ring-foreground/10 bg-card text-card-foreground gap-4 overflow-hidden rounded-xl py-4 text-sm ring-1 has-data-[slot=card-footer]:pb-0 has-[>img:first-child]:pt-0 data-[size=sm]:gap-3 data-[size=sm]:py-3 data-[size=sm]:has-data-[slot=card-footer]:pb-0 *:[img:first-child]:rounded-t-xl *:[img:last-child]:rounded-b-xl group/card flex flex-col",e),...n})}function di({className:e,...s}){return t.jsx("div",{"data-slot":"card-content",className:z("px-4 group-data-[size=sm]/card:px-3",e),...s})}li.__docgenInfo={description:"",methods:[],displayName:"Card",props:{size:{required:!1,tsType:{name:"union",raw:'"default" | "sm"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"sm"'}]},description:"",defaultValue:{value:'"default"',computed:!1}}}};di.__docgenInfo={description:"",methods:[],displayName:"CardContent"};function um(){const{t:e}=F(["common","wallet"]),{goBack:s}=me(),n=na(),[a,r]=l.useState("ethereum"),[i,c]=l.useState(""),[o,u]=l.useState(""),[d,m]=l.useState(""),{data:h,isLoading:p,isFetching:g}=lb(d,o,!!d&&!!o),y=l.useCallback(()=>{i.trim()&&(u(i.trim()),m(a))},[i,a]),f=l.useCallback(v=>{v.key==="Enter"&&y()},[y]),x=n.filter(v=>v.chainKind==="evm"),b=n.filter(v=>v.chainKind!=="evm");return t.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("common:addressLookup.balanceTitle"),onBack:s}),t.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(Ks,{children:e("common:addressLookup.chain")}),t.jsxs(ea,{value:a,onValueChange:r,children:[t.jsx(Vs,{children:t.jsx(Us,{})}),t.jsxs(Js,{children:[x.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-muted-foreground px-2 py-1.5 text-xs font-medium",children:"EVM"}),x.map(v=>t.jsx(Vt,{value:v.id,children:v.name},v.id))]}),b.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-muted-foreground px-2 py-1.5 text-xs font-medium",children:e("common:addressLookup.otherChains")}),b.map(v=>t.jsx(Vt,{value:v.id,children:v.name},v.id))]})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Ks,{children:e("common:addressLookup.address")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(qe,{placeholder:e("common:addressLookup.addressPlaceholder"),value:i,onChange:v=>c(v.target.value),onKeyDown:f,className:"flex-1 font-mono text-sm"}),t.jsx(H,{onClick:y,disabled:!i.trim()||g,children:g?t.jsx(Me,{size:"sm"}):t.jsx(sn,{className:"size-4"})})]})]}),o&&t.jsx(li,{className:z("transition-all",p&&"opacity-50"),children:t.jsx(di,{className:"pt-6",children:h?.error?t.jsxs("div",{className:"flex items-center gap-3 text-destructive",children:[t.jsx(Jt,{className:"size-5 shrink-0"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:e("common:addressLookup.error")}),t.jsx("div",{className:"text-sm opacity-80",children:h.error})]})]}):h?.balance?t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"bg-primary/10 flex size-12 items-center justify-center rounded-full",children:t.jsx(Np,{className:"text-primary size-6"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"text-2xl font-bold",children:[h.balance.amount.toFormatted()," ",h.balance.symbol]}),t.jsx("div",{className:"text-muted-foreground text-sm",children:e("common:addressLookup.onChain",{chain:n.find(v=>v.id===d)?.name??d})})]})]}):p?t.jsx("div",{className:"flex items-center justify-center py-4",children:t.jsx(Me,{size:"lg"})}):null})}),!1]})]})}um.__docgenInfo={description:"",methods:[],displayName:"AddressBalancePage"};const mm=()=>t.jsx(ce,{children:t.jsx(um,{})});mm.__docgenInfo={description:"",methods:[],displayName:"AddressBalanceActivity"};function D0(e,s){return(parseFloat(e)/Math.pow(10,s)).toLocaleString(void 0,{maximumFractionDigits:6})}function z0(e){return new Date(e).toLocaleString()}function B0({tx:e,address:s}){const n=e.from.toLowerCase()===s.toLowerCase();return t.jsxs("div",{className:"flex items-center gap-3 py-3 border-b last:border-b-0",children:[t.jsx("div",{className:`p-2 rounded-full ${n?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:n?t.jsx(Pc,{className:"size-4"}):t.jsx(cp,{className:"size-4"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"text-sm font-medium truncate",children:n?`To: ${e.to}`:`From: ${e.from}`}),t.jsx("div",{className:"text-xs text-muted-foreground",children:z0(e.timestamp)})]}),t.jsxs("div",{className:`text-sm font-medium ${n?"text-red-600":"text-green-600"}`,children:[n?"-":"+",D0(e.value,8)," ",e.symbol]})]})}function fm(){const{t:e}=F(["common","wallet"]),{goBack:s}=me(),n=na(),[a,r]=l.useState("bfmeta"),[i,c]=l.useState(""),[o,u]=l.useState(""),d=l.useMemo(()=>n.find(w=>w.id===a),[n,a]),m=l.useMemo(()=>{if(!d)return!1;try{return vs(a).supportsTransactionHistory}catch{return!1}},[a,d]),{data:h,isLoading:p,isError:g,refetch:y}=ub({chainId:a,address:o,enabled:!!o}),f=l.useMemo(()=>{if(!d?.explorer||!o.trim())return null;const{queryAddress:w,url:M}=d.explorer;return w?w.replace(":address",o.trim()):`${M}/address/${o.trim()}`},[d,o]),x=l.useCallback(()=>{i.trim()&&u(i.trim())},[i]),b=l.useCallback(w=>{w.key==="Enter"&&x()},[x]),v=l.useCallback(()=>{f&&window.open(f,"_blank","noopener,noreferrer")},[f]),j=n.filter(w=>w.chainKind==="evm"),N=n.filter(w=>w.chainKind!=="evm");return t.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[t.jsx(Q,{title:e("common:addressLookup.transactionsTitle"),onBack:s}),t.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(Ks,{children:e("common:addressLookup.chain")}),t.jsxs(ea,{value:a,onValueChange:r,children:[t.jsx(Vs,{children:t.jsx(Us,{})}),t.jsxs(Js,{children:[j.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-muted-foreground px-2 py-1.5 text-xs font-medium",children:"EVM"}),j.map(w=>t.jsx(Vt,{value:w.id,children:w.name},w.id))]}),N.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-muted-foreground px-2 py-1.5 text-xs font-medium",children:e("common:addressLookup.otherChains")}),N.map(w=>t.jsx(Vt,{value:w.id,children:w.name},w.id))]})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Ks,{children:e("common:addressLookup.address")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(qe,{placeholder:e("common:addressLookup.addressPlaceholder"),value:i,onChange:w=>c(w.target.value),onKeyDown:b,className:"flex-1 font-mono text-sm"}),t.jsx(H,{onClick:x,disabled:!i.trim()||p,children:p?t.jsx(Ue,{className:"size-4 animate-spin"}):t.jsx(sn,{className:"size-4"})})]})]}),o&&t.jsx(li,{children:t.jsxs(di,{className:"pt-6",children:[p?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx(Ue,{className:"size-6 animate-spin text-muted-foreground"})}):g?t.jsx("div",{className:"text-center py-8 text-destructive",children:e("common:addressLookup.queryError")}):h&&h.length>0?t.jsx("div",{className:"divide-y",children:h.map(w=>t.jsx(B0,{tx:w,address:o},w.hash))}):t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:m?t.jsx("p",{children:e("common:addressLookup.noTransactions")}):t.jsx("p",{children:e("common:addressLookup.useExplorerHint")})}),f&&t.jsx("div",{className:"mt-4 pt-4 border-t",children:t.jsxs(H,{variant:m?"outline":"default",size:"sm",className:"w-full gap-2",onClick:v,children:[t.jsx(nh,{className:"size-4"}),e("common:addressLookup.viewOnExplorer",{name:d?.name??a})]})})]})})]})]})}fm.__docgenInfo={description:"",methods:[],displayName:"AddressTransactionsPage"};const hm=()=>t.jsx(ce,{children:t.jsx(fm,{})});hm.__docgenInfo={description:"",methods:[],displayName:"AddressTransactionsActivity"};const{useFlow:te}=xg({transitionDuration:350,plugins:[gg(),Hg({theme:"cupertino"}),ab({routes:{MainTabsActivity:"/",WalletListActivity:"/wallet/list",WalletConfigActivity:"/wallet/:walletId",WalletCreateActivity:"/wallet/create",SendActivity:"/send",ReceiveActivity:"/receive",SettingsActivity:"/settings",SettingsLanguageActivity:"/settings/language",SettingsCurrencyActivity:"/settings/currency",SettingsChainsActivity:"/settings/chains",SettingsMnemonicActivity:"/settings/mnemonic",SettingsWalletLockActivity:"/settings/wallet-lock",SettingsWalletChainsActivity:"/settings/wallet-chains",SettingsStorageActivity:"/settings/storage",HistoryActivity:"/history",TransactionDetailActivity:"/transaction/:txId",ScannerActivity:"/scanner",AuthorizeAddressActivity:"/authorize/address/:id",AuthorizeSignatureActivity:"/authorize/signature/:id",OnboardingRecoverActivity:"/onboarding/recover",TokenDetailActivity:"/token/:tokenId",AddressBookActivity:"/address-book",NotificationsActivity:"/notifications",StakingActivity:"/staking",WelcomeActivity:"/welcome",SettingsSourcesActivity:"/settings/sources",MiniappDetailActivity:"/miniapp/:appId/detail",AddressBalanceActivity:"/address-balance",AddressTransactionsActivity:"/address-transactions",ChainSelectorJob:"/job/chain-selector",WalletRenameJob:"/job/wallet-rename/:walletId",WalletDeleteJob:"/job/wallet-delete/:walletId",WalletLockConfirmJob:"/job/wallet-lock-confirm",TwoStepSecretConfirmJob:"/job/two-step-secret-confirm",SetTwoStepSecretJob:"/job/set-two-step-secret",MnemonicOptionsJob:"/job/mnemonic-options",ContactEditJob:"/job/contact-edit",ContactPickerJob:"/job/contact-picker",WalletAddJob:"/job/wallet-add",WalletListJob:"/job/wallet-list",SecurityWarningJob:"/job/security-warning",TransferConfirmJob:"/job/transfer-confirm",TransferWalletLockJob:"/job/transfer-wallet-lock",FeeEditJob:"/job/fee-edit",ScannerJob:"/job/scanner",ContactAddConfirmJob:"/job/contact-add-confirm",ContactShareJob:"/job/contact-share",ClearDataConfirmJob:"/job/clear-data-confirm",WalletPickerJob:"/job/wallet-picker",SigningConfirmJob:"/job/signing-confirm",PermissionRequestJob:"/job/permission-request",MiniappTransferConfirmJob:"/job/miniapp-transfer-confirm",MiniappSignTransactionJob:"/job/miniapp-sign-transaction"},fallbackActivity:()=>"MainTabsActivity",useHash:!0,urlPatternOptions:{segmentValueCharset:"a-zA-Z0-9-._~ %"}})],activities:{MainTabsActivity:Fd,WalletListActivity:Wd,WalletConfigActivity:Hd,WalletCreateActivity:Vd,SendActivity:Gd,ReceiveActivity:Yd,SettingsActivity:Xd,SettingsLanguageActivity:eu,SettingsCurrencyActivity:su,SettingsChainsActivity:hu,SettingsMnemonicActivity:xu,SettingsWalletLockActivity:vu,SettingsWalletChainsActivity:im,SettingsStorageActivity:cm,HistoryActivity:Eu,TransactionDetailActivity:_u,ScannerActivity:Ru,AuthorizeAddressActivity:Bu,AuthorizeSignatureActivity:Ou,OnboardingRecoverActivity:Wu,TokenDetailActivity:qu,AddressBookActivity:Vu,NotificationsActivity:Gu,StakingActivity:sm,WelcomeActivity:am,SettingsSourcesActivity:lm,MiniappDetailActivity:dm,AddressBalanceActivity:mm,AddressTransactionsActivity:hm,ChainSelectorJob:fd,WalletRenameJob:pd,WalletDeleteJob:xd,WalletLockConfirmJob:gd,TwoStepSecretConfirmJob:vd,SetTwoStepSecretJob:jd,MnemonicOptionsJob:Nd,ContactEditJob:wd,ContactPickerJob:Sd,WalletAddJob:Cd,WalletListJob:kd,SecurityWarningJob:Ad,TransferConfirmJob:Id,TransferWalletLockJob:Td,FeeEditJob:yd,ScannerJob:Ed,ContactAddConfirmJob:Pd,ContactShareJob:_d,ClearDataConfirmJob:Md,WalletPickerJob:Rd,SigningConfirmJob:Dd,PermissionRequestJob:zd,MiniappTransferConfirmJob:Bd,MiniappSignTransactionJob:Ld}});function L0(e,s){const n=Math.abs(e-s);return Math.min(n,360-n)}function O0(e,s,n=30){if(s.length===0)return 1;let a=180;for(const r of s){const i=L0(e,r);i<a&&(a=i)}return a<n?a/n:1}function F0(e){return Cm.map(s=>({...s,weight:O0(s.hue,e)}))}function ha({mode:e,walletId:s,onEditOnlyComplete:n,className:a}){const{t:r}=F(["wallet","onboarding","common"]),{push:i}=te(),c=Kt(),o=c.find(R=>R.id===s),u=Ct(),d=Zo(),[m,h]=l.useState(e==="edit-only"?"edit":e),[p,g]=l.useState(""),[y,f]=l.useState(0),x=l.useRef(null),[b,v]=l.useState(!1),j=l.useMemo(()=>c.filter(R=>R.id!==s).map(R=>R.themeHue),[c,s]),N=l.useMemo(()=>F0(j),[j]);l.useEffect(()=>{o&&(g(o.name),f(o.themeHue))},[o]);const w=l.useMemo(()=>o?.chainAddresses.find(R=>R.chain===u)??o?.chainAddresses[0],[o,u]),M=l.useCallback(R=>{if(!x.current)return;const L=x.current.getBoundingClientRect(),J=Math.max(0,Math.min(R-L.left,L.width))/L.width,Z=Math.round(J*3600)/10;f(Z)},[]),S=R=>{R.stopPropagation(),v(!0),M(R.clientX)},k=R=>{R.stopPropagation(),v(!0),R.touches[0]&&M(R.touches[0].clientX)};l.useEffect(()=>{if(!b)return;const R=J=>M(J.clientX),L=J=>{J.touches[0]&&M(J.touches[0].clientX)},W=()=>v(!1);return document.addEventListener("mousemove",R),document.addEventListener("mouseup",W),document.addEventListener("touchmove",L),document.addEventListener("touchend",W),()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",W),document.removeEventListener("touchmove",L),document.removeEventListener("touchend",W)}},[b,M]);const I=l.useCallback(()=>{i("ChainSelectorJob",{})},[i]),E=l.useCallback(()=>{o&&(g(o.name),f(o.themeHue)),h("edit")},[o]),D=l.useCallback(async()=>{if(!o)return;const R=p.trim();R&&R!==o.name&&await ye.updateWalletName(o.id,R),y!==o.themeHue&&await ye.updateWalletThemeHue(o.id,y),h("default")},[o,p,y]),P=l.useCallback(()=>{o&&(g(o.name),f(o.themeHue)),h("default")},[o]),A=l.useCallback(async()=>{if(!o)return;const R=p.trim();R&&R!==o.name&&await ye.updateWalletName(o.id,R),y!==o.themeHue&&await ye.updateWalletThemeHue(o.id,y),n?.()},[o,p,y,n]),T=l.useCallback(async()=>{o&&(await ye.setCurrentWallet(o.id),i("SettingsMnemonicActivity",{}))},[o,i]),C=l.useCallback(()=>{o&&i("WalletDeleteJob",{walletId:o.id})},[o,i]);if(!o)return t.jsx("div",{className:z("text-muted-foreground p-4 text-center",a),children:r("wallet:detail.notFound")});const B=m==="edit"||e==="edit-only"?y:o.themeHue,_=m==="edit"||e==="edit-only";return t.jsxs("div",{className:z("space-y-6",a),children:[t.jsx("div",{className:"flex justify-center px-4",children:t.jsx("div",{className:"aspect-[1.6/1] w-full max-w-[360px]",children:t.jsx(ec,{wallet:{...o,name:_?p:o.name,themeHue:B},themeHue:B,walletNameTestId:"wallet-config-preview-name",chain:w?.chain,chainName:w?.chain||"",address:w?.address||o.address,chainIconUrl:d[w?.chain??""],onOpenChainSelector:I})})}),_?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-muted-foreground text-sm",children:r("onboarding:theme.walletName")}),t.jsx(qe,{value:p,onChange:R=>g(R.target.value),placeholder:r("wallet:defaultName"),maxLength:20,className:"text-center"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:r("onboarding:theme.customColor")}),t.jsxs("span",{className:"text-muted-foreground font-mono",children:[y.toFixed(1),""]})]}),t.jsxs("div",{ref:x,className:"relative h-8 cursor-pointer touch-none rounded-full",style:{background:"linear-gradient(to right, oklch(0.6 0.25 0), oklch(0.6 0.25 60), oklch(0.6 0.25 120), oklch(0.6 0.25 180), oklch(0.6 0.25 240), oklch(0.6 0.25 300), oklch(0.6 0.25 360))"},onMouseDown:S,onTouchStart:k,children:[j.map((R,L)=>t.jsx("div",{className:"absolute top-0 h-full w-0.5 bg-black/30",style:{left:`${R/360*100}%`},title:r("onboarding:theme.usedColor")},L)),t.jsx("div",{className:"absolute top-1/2 -translate-x-1/2 -translate-y-1/2",style:{left:`${y/360*100}%`},children:t.jsx("div",{className:"size-6 rounded-full border-2 border-white shadow-md",style:{backgroundColor:`oklch(0.6 0.25 ${y})`}})})]})]}),t.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:N.map(R=>{const L=Math.abs(y-R.hue)<.5,W=R.weight<.5;return t.jsx("button",{type:"button",onClick:()=>f(R.hue),className:z("relative size-10 rounded-full transition-all","ring-offset-background focus-visible:ring-ring focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none",L&&"ring-primary ring-2 ring-offset-2",W&&"opacity-50"),style:{backgroundColor:R.color},title:R.name,children:L&&t.jsx(Se,{className:"absolute inset-0 m-auto size-5 text-white drop-shadow-md"})},R.hue)})})]}),e==="edit-only"?t.jsx(H,{className:"w-full",onClick:A,disabled:!p.trim(),"data-testid":"theme-complete-button",style:{"--primary-hue":y,"--primary":`oklch(var(--primary-lightness) var(--primary-saturation) ${y})`},children:r("common:confirm")}):t.jsxs("div",{className:"flex gap-2",children:[t.jsx(H,{variant:"outline",className:"flex-1",onClick:P,children:r("common:cancel")}),t.jsx(H,{className:"flex-1",onClick:D,disabled:!p.trim(),style:{"--primary-hue":y,"--primary":`oklch(var(--primary-lightness) var(--primary-saturation) ${y})`},children:r("common:save")})]})]}):t.jsxs("div",{className:"flex justify-center gap-8",children:[t.jsxs("button",{onClick:E,className:"group flex flex-col items-center gap-1.5",children:[t.jsx("div",{className:"bg-primary/10 text-primary group-hover:bg-primary/20 flex size-12 items-center justify-center rounded-full transition-all active:scale-95",children:t.jsx(Op,{className:"size-5"})}),t.jsx("span",{className:"text-xs font-medium",children:r("wallet:detail.editName")})]}),t.jsxs("button",{onClick:T,className:"group flex flex-col items-center gap-1.5",children:[t.jsx("div",{className:"bg-primary/10 text-primary group-hover:bg-primary/20 flex size-12 items-center justify-center rounded-full transition-all active:scale-95",children:t.jsx(_r,{className:"size-5"})}),t.jsx("span",{className:"text-xs font-medium",children:r("wallet:detail.exportMnemonic")})]}),t.jsxs("button",{onClick:C,className:"group flex flex-col items-center gap-1.5",children:[t.jsx("div",{className:"bg-destructive/10 text-destructive group-hover:bg-destructive/20 flex size-12 items-center justify-center rounded-full transition-all active:scale-95",children:t.jsx(wt,{className:"size-5"})}),t.jsx("span",{className:"text-destructive text-xs font-medium",children:r("wallet:detail.deleteWallet")})]})]})]})}ha.__docgenInfo={description:`
- default: + edit
- edit:  default  default
- edit-only: / onEditOnlyComplete`,methods:[],displayName:"WalletConfig",props:{mode:{required:!0,tsType:{name:"union",raw:"'edit-only' | 'default' | 'edit'",elements:[{name:"literal",value:"'edit-only'"},{name:"literal",value:"'default'"},{name:"literal",value:"'edit'"}]},description:""},walletId:{required:!0,tsType:{name:"string"},description:""},onEditOnlyComplete:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};export{Uu as A,fu as C,Ep as I,Zd as L,Ku as N,Qd as R,_e as S,Pu as T,pu as V,ha as W,fm as a,Tu as b,lt as c,gu as d,tu as e,Ps as f,ii as g,$d as h,Es as n};
