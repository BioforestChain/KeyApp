import{r as m,j as n}from"./iframe-Dt8wZwjo.js";import{c}from"./utils-4perknFd.js";import{A as z}from"./amount-BQsqQYGO.js";import{u as P}from"./useTranslation-Br48bveG.js";function R(e){let a=e.replace(/[^0-9.]/g,"");const s=a.split(".");return s.length>2&&(a=s[0]+"."+s.slice(1).join("")),a}function _(e,a){const s=e.split(".");return s.length===2&&s[1].length>a?s[0]+"."+s[1].slice(0,a):e}const N=m.forwardRef(({value:e,onChange:a,decimals:s,symbol:T,balance:o,fiatValue:g,fiatSymbol:q="$",max:F,maxDisabled:I=!1,error:f,label:b,className:M,disabled:u=!1},k)=>{const{t:y}=P("common"),[p,h]=m.useState(!1),[r,d]=m.useState(""),x=s??o?.decimals??18,l=T??o?.symbol??"",i=F??o,w=u||I;m.useEffect(()=>{if(e){const t=e.toFormatted();t!==r&&!p&&d(t)}},[e,p]);const v=e&&i?e.gt(i):!1,A=m.useCallback(t=>!t||t==="."||t==="-"?null:z.tryFromFormatted(t,x,l||void 0),[x,l]),C=t=>{const S=t.target.value,B=R(S),j=_(B,x);d(j);const $=A(j);a?.($)},D=()=>{if(i){const t=i.toFormatted();d(t),a?.(i)}},V=()=>{h(!1),e?d(e.toFormatted()):r&&!A(r)&&d("")},E=o?.toFormatted()??void 0;return n.jsxs("div",{className:c("@container space-y-2",M),children:[b&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"block text-sm font-medium",children:b}),o&&n.jsxs("span",{className:"text-muted-foreground text-xs",children:[y("balance"),": ",E," ",l]})]}),n.jsxs("div",{className:c("bg-background relative rounded-xl border p-4 transition-colors",p?"border-primary ring-primary/20 ring-2":"border-input",(f||v)&&"border-destructive ring-destructive/20 ring-2",u&&"cursor-not-allowed opacity-50"),children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{ref:k,type:"text",inputMode:"decimal","data-testid":"amount-input",value:r,onChange:C,onFocus:()=>h(!0),onBlur:V,className:c("placeholder:text-muted-foreground min-w-0 flex-1 bg-transparent text-2xl font-semibold outline-none @xs:text-3xl",u&&"cursor-not-allowed"),placeholder:"0",disabled:u,autoComplete:"off"}),n.jsxs("div",{className:"flex items-center gap-2",children:[i&&n.jsx("button",{type:"button",onClick:D,disabled:w,className:c("bg-primary text-primary-foreground hover:bg-primary/90 rounded-md px-2 py-1 text-xs font-medium transition-colors",w&&"cursor-not-allowed opacity-50"),children:"MAX"}),l&&n.jsx("span",{className:"text-muted-foreground text-lg font-medium",children:l})]})]}),g&&r&&n.jsxs("p",{className:"text-muted-foreground mt-1 text-sm",children:["â‰ˆ ",q,g]})]}),(f||v)&&n.jsx("p",{className:"text-destructive -mt-0.5 text-xs",children:f||y("exceedsBalance")})]})});N.displayName="AmountInput";N.__docgenInfo={description:"",methods:[],displayName:"AmountInput",props:{value:{required:!1,tsType:{name:"union",raw:"Amount | null | undefined",elements:[{name:"Amount"},{name:"null"},{name:"undefined"}]},description:"Amount value (controlled). Pass null or undefined for empty/invalid state"},onChange:{required:!1,tsType:{name:"union",raw:"((value: Amount | null) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"Called when user input changes. Provides Amount (or null if invalid)"},decimals:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:"Decimals for Amount parsing (required if balance not provided)"},symbol:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Symbol to display (falls back to balance.symbol)"},balance:{required:!1,tsType:{name:"union",raw:"Amount | undefined",elements:[{name:"Amount"},{name:"undefined"}]},description:"Available balance as Amount"},max:{required:!1,tsType:{name:"union",raw:"Amount | undefined",elements:[{name:"Amount"},{name:"undefined"}]},description:"Max allowed amount (defaults to balance)"},maxDisabled:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"Disable max button",defaultValue:{value:"false",computed:!1}},fiatValue:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Fiat value to display"},fiatSymbol:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Fiat symbol (default: $)",defaultValue:{value:"'$'",computed:!1}},error:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Error message"},label:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Label text"},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Additional class names"},disabled:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"Disabled state",defaultValue:{value:"false",computed:!1}}}};export{N as A};
