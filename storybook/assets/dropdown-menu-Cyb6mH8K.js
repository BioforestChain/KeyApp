import{c as Lt}from"./createReactComponent-CbQTe-Tv.js";import{r,j as z}from"./iframe-CPG22Gvg.js";import{c as tt}from"./utils-4perknFd.js";import{r as Te}from"./index-BRN0vHlh.js";import{N as Me,K as ce,O as nt,E as Je,l as re,k as _e,Q as Ft,S as Nt,G as me,T as Dt,U as At,V as Ht,y as je,b as Ue,z as Oe,W as _t,X as jt,a as Ut,e as Bt,t as Yt,p as ot,d as Vt,f as qt,Y as Kt,Z as Xt,I as Gt,i as zt,_ as Wt,R as $t,P as Jt,c as Q,$ as rt,a0 as st,h as Qt,m as Zt,j as en,a1 as tn,n as at,a2 as nn,a3 as on,L as Fe,o as rn,a4 as sn,a5 as an,a6 as un,a7 as cn,a8 as Qe,a9 as Ze,aa as ln}from"./composite-BKUMHrSh.js";import{j as dn,e as ve,i as it,a as se,b as he,f as be,m as Ne,z as ut,u as Ee,d as fn,E as Pe,y as De,q as pn,p as gn}from"./useRenderElement-BYd6SeVi.js";import{c as Z,t as Ce,d as ct,e as lt,g as ae,h as dt,a as ft,o as mn,s as ge,u as vn,f as Ae,l as hn,i as bn,j as En}from"./useBaseUiId-C5zq5W4S.js";import{u as pt,a as Rn,g as yn,b as xn,C as Tn,c as Mn,d as Cn,e as Pn,f as In}from"./useCompositeListItem-U0GFb7Qq.js";import{p as Sn,d as On,u as wn,a as kn,b as Ln,c as Fn,e as Nn}from"./useRole-Bb4w76O-.js";import{u as gt,a as mt}from"./useButton-D7g1prjV.js";const Dn=[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]],So=Lt("outline","dots-vertical","DotsVertical",Dn);function we(e,t,o){if(o&&!Me(o))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const u=e();return typeof u=="number"?u:u?.[t]}return e?.[t]}const ke=Dt&&At;function An(e,t={}){const o="rootStore"in e?e.rootStore:e,{events:u,dataRef:f}=o.context,{enabled:d=!0,visibleOnly:y=!0}=t,i=r.useRef(!1),h=ce(),w=r.useRef(!0);r.useEffect(()=>{const a=o.select("domReferenceElement");if(!d)return;const p=dn(a);function F(){!o.select("open")&&it(a)&&a===Je(me(a))&&(i.current=!0)}function S(){w.current=!0}function c(){w.current=!1}return p.addEventListener("blur",F),ke&&(p.addEventListener("keydown",S,!0),p.addEventListener("pointerdown",c,!0)),()=>{p.removeEventListener("blur",F),ke&&(p.removeEventListener("keydown",S,!0),p.removeEventListener("pointerdown",c,!0))}},[o,d]),r.useEffect(()=>{if(!d)return;function a(p){(p.reason===ct||p.reason===lt)&&(i.current=!0)}return u.on("openchange",a),()=>{u.off("openchange",a)}},[u,d]);const v=r.useMemo(()=>({onMouseLeave(){i.current=!1},onFocus(a){if(i.current)return;const p=_e(a.nativeEvent);if(y&&ve(p)){if(ke&&!a.relatedTarget){if(!w.current&&!Ft(p))return}else if(!Nt(p))return}o.setOpen(!0,Z(Ce,a.nativeEvent,a.currentTarget))},onBlur(a){i.current=!1;const p=a.relatedTarget,F=a.nativeEvent,S=ve(p)&&p.hasAttribute(nt("focus-guard"))&&p.getAttribute("data-type")==="outside";h.start(0,()=>{const c=o.select("domReferenceElement"),R=Je(c?c.ownerDocument:document);!p&&R===c||re(f.current.floatingContext?.refs.floating.current,R)||re(c,R)||S||o.context.triggerElements.hasElement(a.relatedTarget)||o.setOpen(!1,Z(Ce,F))})}}),[f,o,y,h]);return r.useMemo(()=>d?{reference:v,trigger:v}:{},[d,v])}const He=nt("safe-polygon"),Hn=`button,a,[role="button"],select,[tabindex]:not([tabindex="-1"]),${Ht}`;function _n(e){return e?!!e.closest(Hn):!1}function vt(e){const t=r.useRef(void 0),o=r.useRef(!1),u=r.useRef(void 0),f=r.useRef(!0),d=r.useRef(!1),y=r.useRef(()=>{}),i=r.useRef(!1),h=ce(),w=ce(),v=r.useRef(void 0);return r.useMemo(()=>{const a=e.context.dataRef.current;return a.hoverInteractionState||(a.hoverInteractionState={pointerTypeRef:t,interactedInsideRef:o,handlerRef:u,blockMouseMoveRef:f,performedPointerEventsMutationRef:d,unbindMouseMoveRef:y,restTimeoutPendingRef:i,openChangeTimeout:h,restTimeout:w,handleCloseOptionsRef:v}),a.hoverInteractionState},[e,t,o,u,f,d,y,i,h,w,v])}const jn=new Set(["click","mousedown"]);function Un(e,t={}){const o="rootStore"in e?e.rootStore:e,u=o.useState("open"),f=o.useState("floatingElement"),d=o.useState("domReferenceElement"),{dataRef:y}=o.context,{enabled:i=!0,closeDelay:h=0,externalTree:w}=t,{pointerTypeRef:v,interactedInsideRef:a,handlerRef:p,performedPointerEventsMutationRef:F,unbindMouseMoveRef:S,restTimeoutPendingRef:c,openChangeTimeout:R,handleCloseOptionsRef:b}=vt(o),l=je(w),T=Ue(),_=se(()=>a.current?!0:y.current.openEvent?jn.has(y.current.openEvent.type):!1),n=se(()=>{const k=y.current.openEvent?.type;return k?.includes("mouse")&&k!=="mousedown"}),j=r.useCallback((k,A=!0)=>{const m=Bn(h,v.current);m&&!p.current?R.start(m,()=>o.setOpen(!1,Z(ae,k))):A&&(R.clear(),o.setOpen(!1,Z(ae,k)))},[h,p,o,v,R]),M=se(()=>{S.current(),p.current=void 0}),U=se(()=>{if(F.current){const k=me(f).body;k.style.pointerEvents="",k.removeAttribute(He),F.current=!1}}),C=se(k=>{const A=_e(k);if(!_n(A)){a.current=!1;return}a.current=!0});he(()=>{u||(v.current=void 0,c.current=!1,a.current=!1,M(),U())},[u,v,c,a,M,U]),r.useEffect(()=>()=>{M()},[M]),r.useEffect(()=>U,[U]),he(()=>{if(i&&u&&b.current?.blockPointerEvents&&n()&&ve(d)&&f){F.current=!0;const k=me(f).body;k.setAttribute(He,"");const A=d,m=f,s=l?.nodesRef.current.find(P=>P.id===T)?.context?.elements.floating;return s&&(s.style.pointerEvents=""),k.style.pointerEvents="none",A.style.pointerEvents="auto",m.style.pointerEvents="auto",()=>{k.style.pointerEvents="",A.style.pointerEvents="",m.style.pointerEvents=""}}},[i,u,d,f,b,n,l,T,F]),r.useEffect(()=>{if(!i)return;function k(P){if(_()||!y.current.floatingContext||!o.select("open"))return;const G=o.context.triggerElements;P.relatedTarget&&G.hasElement(P.relatedTarget)||(U(),M(),_()||j(P))}function A(P){R.clear(),U(),p.current?.(P),M()}function m(P){_()||j(P,!1)}const s=f;return s&&(s.addEventListener("mouseleave",k),s.addEventListener("mouseenter",A),s.addEventListener("mouseleave",m),s.addEventListener("pointerdown",C,!0)),()=>{s&&(s.removeEventListener("mouseleave",k),s.removeEventListener("mouseenter",A),s.removeEventListener("mouseleave",m),s.removeEventListener("pointerdown",C,!0))}})}function Bn(e,t){return t&&!Me(t)?0:typeof e=="function"?e():e}function Le(e){return typeof e=="function"?e():e}const Yn={current:null};function Vn(e,t={}){const o="rootStore"in e?e.rootStore:e,{dataRef:u,events:f}=o.context,{enabled:d=!0,delay:y=0,handleClose:i=null,mouseOnly:h=!1,restMs:w=0,move:v=!0,triggerElementRef:a=Yn,externalTree:p,isActiveTrigger:F=!0}=t,S=je(p),{pointerTypeRef:c,interactedInsideRef:R,handlerRef:b,blockMouseMoveRef:l,performedPointerEventsMutationRef:T,unbindMouseMoveRef:_,restTimeoutPendingRef:n,openChangeTimeout:j,restTimeout:M,handleCloseOptionsRef:U}=vt(o),C=Oe(i),k=Oe(y),A=Oe(w);F&&(U.current=C.current?.__options);const m=se(()=>R.current?!0:u.current.openEvent?["click","mousedown"].includes(u.current.openEvent.type):!1),s=r.useCallback((g,E=!0)=>{const H=we(k.current,"close",c.current);H&&!b.current?j.start(H,()=>o.setOpen(!1,Z(ae,g))):E&&(j.clear(),o.setOpen(!1,Z(ae,g)))},[k,b,o,c,j]),P=se(()=>{_.current(),b.current=void 0}),G=se(()=>{if(T.current){const g=me(o.select("domReferenceElement")).body;g.style.pointerEvents="",g.removeAttribute(He),T.current=!1}});r.useEffect(()=>{if(!d)return;function g(E){E.open||(j.clear(),M.clear(),l.current=!0,n.current=!1)}return f.on("openchange",g),()=>{f.off("openchange",g)}},[d,f,j,M,l,n]);const L=se(g=>{if(m()||!u.current.floatingContext)return;const E=o.context.triggerElements;if(g.relatedTarget&&E.hasElement(g.relatedTarget))return;const H=a.current;C.current?.({...u.current.floatingContext,tree:S,x:g.clientX,y:g.clientY,onClose(){G(),P(),!m()&&H===o.select("domReferenceElement")&&s(g)}})(g)});return r.useEffect(()=>{if(!d)return;const g=a.current??(F?o.select("domReferenceElement"):null);if(!ve(g))return;function E(I){if(j.clear(),l.current=!1,h&&!Me(c.current)||Le(A.current)>0&&!we(k.current,"open"))return;const K=we(k.current,"open",c.current),x=o.select("domReferenceElement"),V=o.context.triggerElements,te=(V.hasElement(I.target)||V.hasMatchingElement(W=>re(W,I.target)))&&(!x||!re(x,I.target)),O=I.currentTarget??null,D=!o.select("open")||te;K?j.start(K,()=>{D&&o.setOpen(!0,Z(ae,I,O))}):D&&o.setOpen(!0,Z(ae,I,O))}function H(I){if(m()){G();return}_.current();const K=o.select("domReferenceElement"),x=me(K);M.clear(),n.current=!1;const V=o.context.triggerElements;if(I.relatedTarget&&V.hasElement(I.relatedTarget))return;if(C.current&&u.current.floatingContext){o.select("open")||j.clear();const O=a.current;b.current=C.current({...u.current.floatingContext,tree:S,x:I.clientX,y:I.clientY,onClose(){G(),P(),!m()&&O===o.select("domReferenceElement")&&s(I,!0)}});const D=b.current;D(I),x.addEventListener("mousemove",D),_.current=()=>{x.removeEventListener("mousemove",D)};return}(c.current!=="touch"||!re(o.select("floatingElement"),I.relatedTarget))&&s(I)}function q(I){L(I)}return o.select("open")&&g.addEventListener("mouseleave",q),v&&g.addEventListener("mousemove",E,{once:!0}),g.addEventListener("mouseenter",E),g.addEventListener("mouseleave",H),()=>{g.removeEventListener("mouseleave",q),v&&g.removeEventListener("mousemove",E),g.removeEventListener("mouseenter",E),g.removeEventListener("mouseleave",H)}},[P,G,l,u,k,s,o,d,C,L,F,m,h,v,c,A,M,n,j,a,S,_,b]),r.useMemo(()=>{function g(E){c.current=E.pointerType}return{onPointerDown:g,onPointerEnter:g,onMouseMove(E){const{nativeEvent:H}=E,q=E.currentTarget,I=o.select("domReferenceElement"),K=o.context.triggerElements,x=o.select("open"),V=(K.hasElement(E.target)||K.hasMatchingElement(O=>re(O,E.target)))&&(!I||!re(I,E.target));if(h&&!Me(c.current)||x&&!V||Le(A.current)===0||!V&&n.current&&E.movementX**2+E.movementY**2<2)return;M.clear();function te(){!l.current&&(!x||V)&&o.setOpen(!0,Z(ae,H,q))}c.current==="touch"?Te.flushSync(()=>{te()}):V&&x?te():(n.current=!0,M.start(Le(A.current),te))}}},[l,h,o,c,A,M,n])}function et(e,t){const[o,u]=e;let f=!1;const d=t.length;for(let y=0,i=d-1;y<d;i=y++){const[h,w]=t[y]||[0,0],[v,a]=t[i]||[0,0];w>=u!=a>=u&&o<=(v-h)*(u-w)/(a-w)+h&&(f=!f)}return f}function qn(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function Kn(e={}){const{buffer:t=.5,blockPointerEvents:o=!1,requireIntent:u=!0}=e,f=new _t;let d=!1,y=null,i=null,h=typeof performance<"u"?performance.now():0;function w(a,p){const F=performance.now(),S=F-h;if(y===null||i===null||S===0)return y=a,i=p,h=F,null;const c=a-y,R=p-i,l=Math.sqrt(c*c+R*R)/S;return y=a,i=p,h=F,l}const v=({x:a,y:p,placement:F,elements:S,onClose:c,nodeId:R,tree:b})=>function(T){function _(){f.clear(),c()}if(f.clear(),!S.domReference||!S.floating||F==null||a==null||p==null)return;const{clientX:n,clientY:j}=T,M=[n,j],U=_e(T),C=T.type==="mouseleave",k=re(S.floating,U),A=re(S.domReference,U),m=S.domReference.getBoundingClientRect(),s=S.floating.getBoundingClientRect(),P=F.split("-")[0],G=a>s.right-s.width/2,L=p>s.bottom-s.height/2,g=qn(M,m),E=s.width>m.width,H=s.height>m.height,q=(E?m:s).left,I=(E?m:s).right,K=(H?m:s).top,x=(H?m:s).bottom;if(k&&(d=!0,!C))return;if(A&&(d=!1),A&&!C){d=!0;return}if(C&&ve(T.relatedTarget)&&re(S.floating,T.relatedTarget)||b&&jt(b.nodesRef.current,R).some(({context:O})=>O?.open))return;if(P==="top"&&p>=m.bottom-1||P==="bottom"&&p<=m.top+1||P==="left"&&a>=m.right-1||P==="right"&&a<=m.left+1)return _();let V=[];switch(P){case"top":V=[[q,m.top+1],[q,s.bottom-1],[I,s.bottom-1],[I,m.top+1]];break;case"bottom":V=[[q,s.top+1],[q,m.bottom-1],[I,m.bottom-1],[I,s.top+1]];break;case"left":V=[[s.right-1,x],[s.right-1,K],[m.left+1,K],[m.left+1,x]];break;case"right":V=[[m.right-1,x],[m.right-1,K],[s.left+1,K],[s.left+1,x]];break}function te([O,D]){switch(P){case"top":{const W=[E?O+t/2:G?O+t*4:O-t*4,D+t+1],$=[E?O-t/2:G?O+t*4:O-t*4,D+t+1],B=[[s.left,G||E?s.bottom-t:s.top],[s.right,G?E?s.bottom-t:s.top:s.bottom-t]];return[W,$,...B]}case"bottom":{const W=[E?O+t/2:G?O+t*4:O-t*4,D-t],$=[E?O-t/2:G?O+t*4:O-t*4,D-t],B=[[s.left,G||E?s.top+t:s.bottom],[s.right,G?E?s.top+t:s.bottom:s.top+t]];return[W,$,...B]}case"left":{const W=[O+t+1,H?D+t/2:L?D+t*4:D-t*4],$=[O+t+1,H?D-t/2:L?D+t*4:D-t*4];return[...[[L||H?s.right-t:s.left,s.top],[L?H?s.right-t:s.left:s.right-t,s.bottom]],W,$]}case"right":{const W=[O-t,H?D+t/2:L?D+t*4:D-t*4],$=[O-t,H?D-t/2:L?D+t*4:D-t*4],B=[[L||H?s.left+t:s.right,s.top],[L?H?s.left+t:s.right:s.left+t,s.bottom]];return[W,$,...B]}default:return[]}}if(!et([n,j],V)){if(d&&!g)return _();if(!C&&u){const O=w(T.clientX,T.clientY);if(O!==null&&O<.1)return _()}et([n,j],te([a,p]))?!d&&u&&f.start(40,_):_()}};return v.__options={blockPointerEvents:o},v}const ht=r.createContext(void 0);function bt(e){const t=r.useContext(ht);if(t===void 0&&!e)throw new Error(be(33));return t}const Et=r.createContext(void 0);function le(e){const t=r.useContext(Et);if(t===void 0&&!e)throw new Error(be(36));return t}const Xn=r.createContext(void 0);function Ie(e=!0){const t=r.useContext(Xn);if(t===void 0&&!e)throw new Error(be(25));return t}const Gn={type:"regular-item"};function zn(e){const{closeOnClick:t,disabled:o=!1,highlighted:u,id:f,store:d,nativeButton:y,itemMetadata:i,nodeId:h}=e,w=r.useRef(null),v=Ie(!0),a=v!==void 0,{events:p}=d.useState("floatingTreeRoot"),{getButtonProps:F,buttonRef:S}=gt({disabled:o,focusableWhenDisabled:!0,native:y}),c=r.useCallback(b=>Ne({id:f,role:"menuitem",tabIndex:u?0:-1,onMouseMove(l){h&&p.emit("itemhover",{nodeId:h,target:l.currentTarget})},onMouseEnter(){i.type==="submenu-trigger"&&i.setActive()},onKeyUp(l){l.key===" "&&d.context.typingRef.current&&l.preventBaseUIHandler()},onClick(l){t&&p.emit("close",{domEvent:l,reason:dt})},onMouseUp(l){if(v){const T=v.initialCursorPointRef.current;if(v.initialCursorPointRef.current=null,a&&T&&Math.abs(l.clientX-T.x)<=1&&Math.abs(l.clientY-T.y)<=1)return}w.current&&d.context.allowMouseUpTriggerRef.current&&(!a||l.button===2)&&i.type==="regular-item"&&w.current.click()}},b,F),[f,u,F,t,p,d,a,v,i,h]),R=ut(w,S);return r.useMemo(()=>({getItemProps:c,itemRef:R}),[c,R])}const Wn=r.forwardRef(function(t,o){const{render:u,className:f,id:d,label:y,nativeButton:i=!1,disabled:h=!1,closeOnClick:w=!0,...v}=t,a=pt({label:y}),p=bt(!0),F=ft(d),{store:S}=le(),c=S.useState("isActive",a.index),R=S.useState("itemProps"),{getItemProps:b,itemRef:l}=zn({closeOnClick:w,disabled:h,highlighted:c,id:F,store:S,nativeButton:i,nodeId:p?.nodeId,itemMetadata:Gn}),T=r.useMemo(()=>({disabled:h,highlighted:c}),[h,c]);return Ee("div",t,{state:T,props:[R,v,b],ref:[l,o,a.ref]})}),$n={...ot,...Yt},Jn=r.forwardRef(function(t,o){const{render:u,className:f,finalFocus:d,...y}=t,{store:i}=le(),{side:h,align:w}=bt(),v=Rn()!=null,a=i.useState("open"),p=i.useState("transitionStatus"),F=i.useState("popupProps"),S=i.useState("mounted"),c=i.useState("instantType"),R=i.useState("activeTriggerElement"),b=i.useState("parent"),l=i.useState("lastOpenChangeReason"),T=i.useState("rootId"),_=i.useState("floatingRootContext"),n=i.useState("floatingTreeRoot"),j=i.useState("closeDelay"),M=i.useState("activeTriggerElement");Ut({open:a,ref:i.context.popupRef,onComplete(){a&&i.context.onOpenChangeComplete?.(!0)}}),r.useEffect(()=>{function s(P){i.setOpen(!1,Z(P.reason,P.domEvent))}return n.events.on("close",s),()=>{n.events.off("close",s)}},[n.events,i]);const U=i.useState("hoverEnabled"),C=i.useState("disabled");Un(_,{enabled:U&&!C&&b.type!=="context-menu"&&b.type!=="menubar",closeDelay:j});const k=r.useMemo(()=>({transitionStatus:p,side:h,align:w,open:a,nested:b.type==="menu",instant:c}),[p,h,w,a,b.type,c]),A=Ee("div",t,{state:k,ref:[o,i.context.popupRef],stateAttributesMapping:$n,props:[F,{onKeyDown(s){v&&Vt.has(s.key)&&s.stopPropagation()}},yn(p),y,{"data-rootownerid":T}]});let m=b.type===void 0||b.type==="context-menu";return(R||b.type==="menubar"&&l!==mn)&&(m=!0),z.jsx(Bt,{context:_,modal:!1,disabled:!S,returnFocus:d===void 0?m:d,initialFocus:b.type!=="menu",restoreFocus:!0,externalTree:b.type!=="menubar"?n:void 0,previousFocusableElement:M,nextFocusableElement:b.type===void 0?i.context.triggerFocusTargetRef:void 0,beforeContentFocusGuardRef:b.type===void 0?i.context.beforeContentFocusGuardRef:void 0,children:A})}),Rt=r.createContext(void 0);function Qn(){const e=r.useContext(Rt);if(e===void 0)throw new Error(be(32));return e}const Zn=r.forwardRef(function(t,o){const{keepMounted:u=!1,...f}=t,{store:d}=le();return d.useState("mounted")||u?z.jsx(Rt.Provider,{value:u,children:z.jsx(qt,{ref:o,...f})}):null}),eo=r.forwardRef(function(t,o){const{anchor:u,positionMethod:f="absolute",className:d,render:y,side:i,align:h,sideOffset:w=0,alignOffset:v=0,collisionBoundary:a="clipping-ancestors",collisionPadding:p=5,arrowPadding:F=5,sticky:S=!1,disableAnchorTracking:c=!1,collisionAvoidance:R=Kt,...b}=t,{store:l}=le(),T=Qn(),_=Ie(!0),n=l.useState("parent"),j=l.useState("floatingRootContext"),M=l.useState("floatingTreeRoot"),U=l.useState("mounted"),C=l.useState("open"),k=l.useState("modal"),A=l.useState("activeTriggerElement"),m=l.useState("lastOpenChangeReason"),s=l.useState("floatingNodeId"),P=l.useState("floatingParentNodeId");let G=u,L=w,g=v,E=h,H=R;n.type==="context-menu"&&(G=u??n.context?.anchor,E=E??"start",!i&&E!=="center"&&(g=t.alignOffset??2,L=t.sideOffset??-5));let q=i,I=E;n.type==="menu"?(q=q??"inline-end",I=I??"start",H=t.collisionAvoidance??Xt):n.type==="menubar"&&(q=q??"bottom",I=I??"start");const K=n.type==="context-menu",x=xn({anchor:G,floatingRootContext:j,positionMethod:_?"fixed":f,mounted:U,side:q,sideOffset:L,align:I,alignOffset:g,arrowPadding:K?0:F,collisionBoundary:a,collisionPadding:p,sticky:S,nodeId:s,keepMounted:T,disableAnchorTracking:c,collisionAvoidance:H,shiftCrossAxis:K,externalTree:M}),V=r.useMemo(()=>{const B={};return C||(B.pointerEvents="none"),{role:"presentation",hidden:!U,style:{...x.positionerStyles,...B}}},[C,U,x.positionerStyles]);r.useEffect(()=>{function B(X){X.open?(X.parentNodeId===s&&l.set("hoverEnabled",!1),X.nodeId!==s&&X.parentNodeId===l.select("floatingParentNodeId")&&l.setOpen(!1,Z(ge))):X.parentNodeId===s&&X.reason!==ge&&l.set("hoverEnabled",!0)}return M.events.on("menuopenchange",B),()=>{M.events.off("menuopenchange",B)}},[l,M.events,s]),r.useEffect(()=>{if(l.select("floatingParentNodeId")==null)return;function B(X){if(X.open||X.nodeId!==l.select("floatingParentNodeId"))return;const ue=X.reason??ge;l.setOpen(!1,Z(ue))}return M.events.on("menuopenchange",B),()=>{M.events.off("menuopenchange",B)}},[M.events,l]),r.useEffect(()=>{function B(X){!C||X.nodeId!==l.select("floatingParentNodeId")||X.target&&A&&A!==X.target&&l.setOpen(!1,Z(ge))}return M.events.on("itemhover",B),()=>{M.events.off("itemhover",B)}},[M.events,C,A,l]),r.useEffect(()=>{const B={open:C,nodeId:s,parentNodeId:P,reason:l.select("lastOpenChangeReason")};M.events.emit("menuopenchange",B)},[M.events,C,l,s,P]);const te=r.useMemo(()=>({open:C,side:x.side,align:x.align,anchorHidden:x.anchorHidden,nested:n.type==="menu"}),[C,x.side,x.align,x.anchorHidden,n.type]),O=r.useMemo(()=>({side:x.side,align:x.align,arrowRef:x.arrowRef,arrowUncentered:x.arrowUncentered,arrowStyles:x.arrowStyles,nodeId:x.context.nodeId}),[x.side,x.align,x.arrowRef,x.arrowUncentered,x.arrowStyles,x.context.nodeId]),D=Ee("div",t,{state:te,stateAttributesMapping:ot,ref:[o,l.useStateSetter("positionerElement")],props:[V,b]}),W=U&&n.type!=="menu"&&(n.type!=="menubar"&&k&&m!==ae||n.type==="menubar"&&n.context.modal);let $=null;return n.type==="menubar"?$=n.context.contentElement:n.type===void 0&&($=A),z.jsxs(ht.Provider,{value:O,children:[W&&z.jsx(Gt,{ref:n.type==="context-menu"||n.type==="nested-context-menu"?n.context.internalBackdropRef:null,inert:zt(!C),cutout:$}),z.jsx(Wt,{id:s,children:z.jsx(Tn,{elementsRef:l.context.itemDomElements,labelsRef:l.context.itemLabels,children:D})})]})}),to=r.createContext(null);function yt(e){return r.useContext(to)}const no={...Sn,disabled:Q(e=>e.parent.type==="menubar"&&e.parent.context.disabled||e.disabled),modal:Q(e=>(e.parent.type===void 0||e.parent.type==="context-menu")&&(e.modal??!0)),allowMouseEnter:Q(e=>e.parent.type==="menu"?e.parent.store.select("allowMouseEnter"):e.allowMouseEnter),stickIfOpen:Q(e=>e.stickIfOpen),parent:Q(e=>e.parent),rootId:Q(e=>e.parent.type==="menu"?e.parent.store.select("rootId"):e.parent.type!==void 0?e.parent.context.rootId:e.rootId),activeIndex:Q(e=>e.activeIndex),isActive:Q((e,t)=>e.activeIndex===t),hoverEnabled:Q(e=>e.hoverEnabled),instantType:Q(e=>e.instantType),lastOpenChangeReason:Q(e=>e.openChangeReason),floatingTreeRoot:Q(e=>e.parent.type==="menu"?e.parent.store.select("floatingTreeRoot"):e.floatingTreeRoot),floatingNodeId:Q(e=>e.floatingNodeId),floatingParentNodeId:Q(e=>e.floatingParentNodeId),itemProps:Q(e=>e.itemProps),closeDelay:Q(e=>e.closeDelay),keyboardEventRelay:Q(e=>{if(e.keyboardEventRelay)return e.keyboardEventRelay;if(e.parent.type==="menu")return e.parent.store.select("keyboardEventRelay")})};class Be extends $t{constructor(t){super({...oo(),...t},{positionerRef:r.createRef(),popupRef:r.createRef(),typingRef:{current:!1},itemDomElements:{current:[]},itemLabels:{current:[]},allowMouseUpTriggerRef:{current:!1},triggerFocusTargetRef:r.createRef(),beforeContentFocusGuardRef:r.createRef(),onOpenChangeComplete:void 0,triggerElements:new Jt},no),this.observe(Q(o=>o.allowMouseEnter),(o,u)=>{this.state.parent.type==="menu"&&o!==u&&this.state.parent.store.set("allowMouseEnter",o)}),this.unsubscribeParentListener=this.observe("parent",o=>{if(this.unsubscribeParentListener?.(),o.type==="menu"){this.unsubscribeParentListener=o.store.subscribe(()=>{this.notifyAll()}),this.context.allowMouseUpTriggerRef=o.store.context.allowMouseUpTriggerRef;return}o.type!==void 0&&(this.context.allowMouseUpTriggerRef=o.context.allowMouseUpTriggerRef),this.unsubscribeParentListener=null})}setOpen(t,o){this.state.floatingRootContext.context.events.emit("setOpen",{open:t,eventDetails:o})}static useStore(t,o){return fn(()=>t??new Be(o)).current}unsubscribeParentListener=null}function oo(){return{...On(),disabled:!1,modal:!0,allowMouseEnter:!0,stickIfOpen:!0,parent:{type:void 0},rootId:void 0,activeIndex:null,hoverEnabled:!0,instantType:void 0,openChangeReason:null,floatingTreeRoot:new rt,floatingNodeId:void 0,floatingParentNodeId:null,itemProps:Pe,keyboardEventRelay:void 0,closeDelay:0}}const ro=r.createContext(void 0);function so(){return r.useContext(ro)}function ao(e){const{children:t,open:o,onOpenChange:u,onOpenChangeComplete:f,defaultOpen:d=!1,disabled:y=!1,modal:i,loopFocus:h=!0,orientation:w="vertical",actionsRef:v,closeParentOnEsc:a=!1,handle:p,triggerId:F,defaultTriggerId:S=null,highlightItemOnHover:c=!0}=e,R=Ie(!0),b=le(!0),l=yt(),T=so(),_=r.useMemo(()=>T&&b?{type:"menu",store:b.store}:l?{type:"menubar",context:l}:R&&!b?{type:"context-menu",context:R}:{type:void 0},[R,b,l,T]),n=Be.useStore(p?.store,{parent:_}),j=n.useState("floatingTreeRoot"),M=st(j),U=Ue();he(()=>{R&&!b?n.update({parent:{type:"context-menu",context:R},floatingNodeId:M,floatingParentNodeId:U}):b&&n.update({floatingNodeId:M,floatingParentNodeId:U})},[R,b,M,U,n]),n.useControlledProp("open",o,d),n.useControlledProp("activeTriggerId",F,S),n.useContextCallback("onOpenChangeComplete",f);const C=n.useState("open"),k=n.useState("activeTriggerElement"),A=n.useState("positionerElement"),m=n.useState("hoverEnabled"),s=n.useState("modal"),P=n.useState("disabled"),G=n.useState("lastOpenChangeReason"),L=n.useState("parent"),g=n.useState("activeIndex"),E=n.useState("payload"),H=n.useState("floatingParentNodeId"),q=r.useRef(null),I=H!=null;let K;n.useSyncedValues({disabled:y,modal:L.type===void 0?i:void 0,rootId:vn()});const{openMethod:x,triggerProps:V,reset:te}=Qt(C);wn(n);const{forceUnmount:O}=kn(C,n,()=>{n.update({allowMouseEnter:!1,stickIfOpen:!0}),te()}),D=r.useRef(L.type!=="context-menu"),W=ce();r.useEffect(()=>{if(C||(q.current=null),L.type==="context-menu"){if(!C){W.clear(),D.current=!1;return}W.start(500,()=>{D.current=!0})}},[W,C,L.type]),Zt(C&&s&&G!==ae&&x!=="touch",A),he(()=>{!C&&!m&&n.set("hoverEnabled",!0)},[C,m,n]);const $=r.useRef(!0),B=ce(),X=se((N,Y)=>{const ne=Y.reason;if(C===N&&Y.trigger===k||(Y.preventUnmountOnClose=()=>{n.set("preventUnmountingOnClose",!0)},!N&&Y.trigger==null&&(Y.trigger=k??void 0),u?.(N,Y),Y.isCanceled))return;const wt={open:N,nativeEvent:Y.event,reason:Y.reason,nested:I};K?.emit("openchange",wt);const ye=Y.event;if(N===!1&&ye?.type==="click"&&ye.pointerType==="touch"&&!$.current)return;if(!N&&g!==null){const pe=n.context.itemDomElements.current[g];queueMicrotask(()=>{pe?.setAttribute("tabindex","-1")})}N&&ne===Ce?($.current=!1,B.start(300,()=>{$.current=!0})):($.current=!0,B.clear());const ze=(ne===ct||ne===dt)&&ye.detail===0&&ye?.isTrusted,kt=!N&&(ne===lt||ne==null);function We(){const pe={open:N,openChangeReason:ne};q.current=Y.event??null;const $e=Y.trigger?.id??null;($e||N)&&(pe.activeTriggerId=$e,pe.activeTriggerElement=Y.trigger??null),n.update(pe)}ne===ae?Te.flushSync(We):We(),L.type==="menubar"&&(ne===Ce||ne===Ae||ne===ae||ne===hn||ne===ge)?n.set("instantType","group"):ze||kt?n.set("instantType",ze?"click":"dismiss"):n.set("instantType",void 0)}),ue=r.useCallback(N=>{const Y=Z(N);return Y.preventUnmountOnClose=()=>{n.set("preventUnmountingOnClose",!0)},Y},[n]),de=r.useCallback(()=>{n.setOpen(!1,ue(bn))},[n,ue]);r.useImperativeHandle(v,()=>({unmount:O,close:de}),[O,de]);let fe;L.type==="context-menu"&&(fe=L.context),r.useImperativeHandle(fe?.positionerRef,()=>A,[A]),r.useImperativeHandle(fe?.actionsRef,()=>({setOpen:X}),[X]);const ie=Ln({popupStore:n,onOpenChange:X});K=ie.context.events,r.useEffect(()=>{const N=({open:Y,eventDetails:ne})=>X(Y,ne);return K.on("setOpen",N),()=>{K?.off("setOpen",N)}},[K,X]);const Re=en(ie,{enabled:!P,bubbles:a&&L.type==="menu",outsidePress(){return L.type!=="context-menu"||q.current?.type==="contextmenu"?!0:D.current},externalTree:I?j:void 0}),J=Fn(ie,{role:"menu"}),oe=Mn(),ee=r.useCallback(N=>{n.select("activeIndex")!==N&&n.set("activeIndex",N)},[n]),Se=Cn(ie,{enabled:!P,listRef:n.context.itemDomElements,activeIndex:g,nested:L.type!==void 0,loopFocus:h,orientation:w,parentOrientation:L.type==="menubar"?L.context.orientation:void 0,rtl:oe==="rtl",disabledIndices:De,onNavigate:ee,openOnArrowKeyDown:L.type!=="context-menu",externalTree:I?j:void 0,focusItemOnHover:c}),Tt=r.useCallback(N=>{n.context.typingRef.current=N},[n]),Mt=Pn(ie,{listRef:n.context.itemLabels,activeIndex:g,resetMs:tn,onMatch:N=>{C&&N!==g&&n.set("activeIndex",N)},onTypingChange:Tt}),{getReferenceProps:Ye,getFloatingProps:Ve,getItemProps:qe,getTriggerProps:Ke}=at([Re,J,Se,Mt]),Ct=r.useMemo(()=>{const N=Ne(Ye(),{onMouseEnter(){n.set("hoverEnabled",!0)},onMouseMove(){n.set("allowMouseEnter",!0)}},V);return delete N.role,N},[Ye,n,V]),Pt=r.useMemo(()=>{const N=Ke();if(!N)return N;const Y=Ne(N,V);return delete Y.role,delete Y["aria-controls"],Y},[Ke,V]),Xe=nn(),It=r.useMemo(()=>Ve({onMouseEnter(){L.type==="menu"&&Xe.request(()=>n.set("hoverEnabled",!1))},onMouseMove(){n.set("allowMouseEnter",!0)},onClick(){n.select("hoverEnabled")&&n.set("hoverEnabled",!1)},onKeyDown(N){const Y=n.select("keyboardEventRelay");Y&&!N.isPropagationStopped()&&Y(N)}}),[Ve,L.type,Xe,n]),St=r.useMemo(()=>qe(),[qe]);n.useSyncedValues({floatingRootContext:ie,activeTriggerProps:Ct,inactiveTriggerProps:Pt,popupProps:It,itemProps:St});const Ot=r.useMemo(()=>({store:n,parent:_}),[n,_]),Ge=z.jsx(Et.Provider,{value:Ot,children:typeof t=="function"?t({payload:E}):t});return L.type===void 0||L.type==="context-menu"?z.jsx(on,{externalTree:j,children:Ge}):Ge}function io(e={}){const{highlightItemOnHover:t,highlightedIndex:o,onHighlightedIndexChange:u}=mt(),{ref:f,index:d}=pt(e),y=o===d,i=r.useRef(null),h=ut(f,i);return{compositeProps:r.useMemo(()=>({tabIndex:y?0:-1,onFocus(){u(d)},onMouseMove(){const v=i.current;if(!t||!v)return;const a=v.hasAttribute("disabled")||v.ariaDisabled==="true";!y&&!a&&v.focus()}}),[y,u,d,t]),compositeRef:h,index:d}}function uo(e){const{render:t,className:o,state:u=Pe,props:f=De,refs:d=De,metadata:y,stateAttributesMapping:i,tag:h="div",...w}=e,{compositeProps:v,compositeRef:a}=io({metadata:y});return Ee(h,e,{state:u,ref:[...d,a],props:[v,...f,w],stateAttributesMapping:i})}function xt(e){if(it(e)&&e.hasAttribute("data-rootownerid"))return e.getAttribute("data-rootownerid")??void 0;if(!pn(e))return xt(gn(e))}function co(e){const{enabled:t=!0,mouseDownAction:o,open:u}=e,f=r.useRef(!1);return r.useMemo(()=>t?{onMouseDown:d=>{(o==="open"&&!u||o==="close"&&u)&&(f.current=!0,Fe(d.currentTarget).addEventListener("click",()=>{f.current=!1},{once:!0}))},onClick:d=>{f.current&&(f.current=!1,d.preventBaseUIHandler())}}:Pe,[t,o,u])}const xe=2,lo=r.forwardRef(function(t,o){const{render:u,className:f,disabled:d=!1,nativeButton:y=!0,id:i,openOnHover:h,delay:w=100,closeDelay:v=0,handle:a,payload:p,...F}=t,S=le(!0),c=a?.store??S?.store;if(!c)throw new Error(be(85));const R=ft(i),b=c.useState("isTriggerActive",R),l=c.useState("floatingRootContext"),T=c.useState("isOpenedByTrigger",R),_=r.useRef(null),n=po(),j=mt(!0),M=je(),U=r.useMemo(()=>M??new rt,[M]),C=st(U),k=Ue(),{registerTrigger:A,isMountedByThisTrigger:m}=Nn(R,_,c,{payload:p,closeDelay:v,parent:n,floatingTreeRoot:U,floatingNodeId:C,floatingParentNodeId:k,keyboardEventRelay:j?.relayKeyboardEvent}),s=c.useState("disabled"),P=d||s||n.type==="menubar"&&n.context.disabled,{getButtonProps:G,buttonRef:L}=gt({disabled:P,native:y});r.useEffect(()=>{!T&&n.type===void 0&&(c.context.allowMouseUpTriggerRef.current=!1)},[c,T,n.type]);const g=r.useRef(null),E=ce(),H=se(J=>{if(!g.current)return;E.clear(),c.context.allowMouseUpTriggerRef.current=!1;const oe=J.target;if(re(g.current,oe)||re(c.select("positionerElement"),oe)||oe===g.current||oe!=null&&xt(oe)===c.select("rootId"))return;const ee=In(g.current);J.clientX>=ee.left-xe&&J.clientX<=ee.right+xe&&J.clientY>=ee.top-xe&&J.clientY<=ee.bottom+xe||U.events.emit("close",{domEvent:J,reason:En})});r.useEffect(()=>{T&&c.select("lastOpenChangeReason")===ae&&Fe(g.current).addEventListener("mouseup",H,{once:!0})},[T,H,c]);const q=n.type==="menubar"&&n.context.hasSubmenuOpen,K=Vn(l,{enabled:(h??q??!1)&&!P&&n.type!=="context-menu"&&(n.type!=="menubar"||q&&!m),handleClose:Kn({blockPointerEvents:n.type!=="menubar"}),mouseOnly:!0,move:!1,restMs:n.type===void 0?w:void 0,delay:{close:v},triggerElementRef:_,externalTree:U,isActiveTrigger:b}),x=fo(T,c.select("lastOpenChangeReason")),V=rn(l,{enabled:!P&&n.type!=="context-menu",event:T&&n.type==="menubar"?"click":"mousedown",toggle:!0,ignoreMouse:!1,stickIfOpen:n.type===void 0?x:!1}),te=An(l,{enabled:!P&&(n.type!=="menubar"&&T||q)}),O=co({open:T,enabled:n.type==="menubar",mouseDownAction:"open"}),D=at([V,te]),W=n.type==="menubar",$=r.useMemo(()=>({disabled:P,open:T}),[P,T]),B=c.useState("triggerProps",m),X=[g,o,L,A,_],ue=[D.getReferenceProps(),K??Pe,B,{"aria-haspopup":"menu",id:R,onMouseDown:J=>{if(c.select("open"))return;E.start(200,()=>{c.context.allowMouseUpTriggerRef.current=!0}),Fe(J.currentTarget).addEventListener("mouseup",H,{once:!0})}},W?{role:"menuitem"}:{},O,F,G],de=r.useRef(null),fe=se(J=>{Te.flushSync(()=>{c.setOpen(!1,Z(Ae,J.nativeEvent,J.currentTarget))}),sn(de.current)?.focus()}),ie=se(J=>{const oe=c.select("positionerElement");if(oe&&an(J,oe))c.context.beforeContentFocusGuardRef.current?.focus();else{Te.flushSync(()=>{c.setOpen(!1,Z(Ae,J.nativeEvent,J.currentTarget))});let ee=un(_.current);for(;ee!==null&&re(oe,ee)||ee?.hasAttribute("aria-hidden");){const Se=ee;if(ee=cn(ee),ee===Se)break}ee?.focus()}}),Re=Ee("button",t,{enabled:!W,stateAttributesMapping:Qe,state:$,ref:X,props:ue});return W?z.jsx(uo,{tag:"button",render:u,className:f,state:$,refs:X,props:ue,stateAttributesMapping:Qe}):T?z.jsxs(r.Fragment,{children:[z.jsx(Ze,{ref:de,onFocus:fe},`${R}-pre-focus-guard`),z.jsx(r.Fragment,{children:Re},R),z.jsx(Ze,{ref:c.context.triggerFocusTargetRef,onFocus:ie},`${R}-post-focus-guard`)]}):z.jsx(r.Fragment,{children:Re},R)});function fo(e,t){const o=ce(),[u,f]=r.useState(!1);return he(()=>{e&&t==="trigger-hover"?(f(!0),o.start(ln,()=>{f(!1)})):e||(o.clear(),f(!1))},[e,t,o]),u}function po(){const e=Ie(!0),t=le(!0),o=yt();return r.useMemo(()=>o?{type:"menubar",context:o}:e&&!t?{type:"context-menu",context:e}:{type:void 0},[e,t,o])}function go({...e}){return z.jsx(ao,{"data-slot":"dropdown-menu",...e})}function mo({...e}){return z.jsx(lo,{"data-slot":"dropdown-menu-trigger",...e})}function vo({align:e="start",alignOffset:t=0,side:o="bottom",sideOffset:u=4,className:f,...d}){return z.jsx(Zn,{children:z.jsx(eo,{className:"isolate z-50 outline-none",align:e,alignOffset:t,side:o,sideOffset:u,children:z.jsx(Jn,{"data-slot":"dropdown-menu-content",className:tt("data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 ring-foreground/10 bg-popover text-popover-foreground min-w-32 rounded-lg p-1 shadow-md ring-1 duration-100 dark z-50 max-h-(--available-height) w-(--anchor-width) origin-(--transform-origin) overflow-x-hidden overflow-y-auto outline-none data-closed:overflow-hidden",f),...d})})})}function ho({className:e,inset:t,variant:o="default",...u}){return z.jsx(Wn,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":o,className:tt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:text-destructive not-data-[variant=destructive]:focus:**:text-accent-foreground gap-1.5 rounded-md px-1.5 py-1 text-sm [&_svg:not([class*='size-'])]:size-4 group/dropdown-menu-item relative flex cursor-default items-center outline-hidden select-none data-disabled:pointer-events-none data-disabled:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0",e),...u})}go.__docgenInfo={description:"",methods:[],displayName:"DropdownMenu"};mo.__docgenInfo={description:"",methods:[],displayName:"DropdownMenuTrigger"};vo.__docgenInfo={description:"",methods:[],displayName:"DropdownMenuContent",props:{align:{defaultValue:{value:'"start"',computed:!1},required:!1},alignOffset:{defaultValue:{value:"0",computed:!1},required:!1},side:{defaultValue:{value:'"bottom"',computed:!1},required:!1},sideOffset:{defaultValue:{value:"4",computed:!1},required:!1}}};ho.__docgenInfo={description:"",methods:[],displayName:"DropdownMenuItem",props:{inset:{required:!1,tsType:{name:"boolean"},description:""},variant:{required:!1,tsType:{name:"union",raw:'"default" | "destructive"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"destructive"'}]},description:"",defaultValue:{value:'"default"',computed:!1}}}};export{go as D,So as I,mo as a,vo as b,ho as c};
