import{r as s,j as t}from"./iframe-BWeqjITw.js";import{c as S}from"./utils-4perknFd.js";import{p as f,P as x}from"./pattern-lock-Ba_UD8wx.js";import{I as y,G as b}from"./LoadingSpinner-BX-as0np.js";import"./amount-display-C7Hj5IPN.js";import"./animated-number-DbwaE-UI.js";import"./time-display-cVn3yrqg.js";import"./service-status-alert-BhZbADNa.js";import{u as L}from"./useTranslation-xI2qK3OI.js";import{I}from"./IconShieldCheck-DzQg7vt4.js";import{I as T}from"./IconChevronRight-mJ0ZrtnL.js";import{I as P}from"./IconRefresh-BzDJYE_4.js";function z({onComplete:l,minPoints:a=4,className:h}){const{t:e}=L("security"),[r,m]=s.useState("set"),[n,p]=s.useState([]),[k,o]=s.useState([]),[d,c]=s.useState(!1),g=s.useCallback(i=>{},[]),j=s.useCallback(i=>{if(i.length>=a){const u=f(n),C=f(i);u===C?l(u):(c(!0),setTimeout(()=>{c(!1),o([])},1500))}},[n,a,l]),N=s.useCallback(()=>{m("set"),p([]),o([]),c(!1)},[]),v=n.length>=a;return t.jsxs("div",{className:S("space-y-6",h),children:[t.jsxs("div",{className:"text-center",children:[t.jsx(y,{icon:t.jsx(I,{className:"size-full"}),variant:"primary",size:"lg",className:"mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-bold",children:e(r==="set"?"patternLock.setTitle":"patternLock.confirmTitle")}),t.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:e(r==="set"?"patternLock.setDesc":"patternLock.confirmDesc")})]}),r==="set"?t.jsx(x,{value:n,onChange:p,onComplete:g,minPoints:a,"data-testid":"pattern-lock-set"}):t.jsx(x,{value:k,onChange:o,onComplete:j,minPoints:a,error:d,"data-testid":"pattern-lock-confirm"}),t.jsx("div",{className:"h-5",children:d&&t.jsx("p",{className:"text-destructive text-center text-sm animate-in fade-in","data-testid":"pattern-lock-mismatch",children:e("patternLock.mismatch")})}),t.jsxs("div",{className:"h-12",children:[r==="set"&&v&&t.jsxs(b,{variant:"mint",className:"w-full",onClick:()=>m("confirm"),"data-testid":"pattern-lock-next-button",children:[e("patternLock.confirmTitle"),t.jsx(T,{className:"ml-2 size-4"})]}),r==="confirm"&&t.jsxs("button",{type:"button",onClick:N,className:"mx-auto flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors","data-testid":"pattern-lock-reset-button",children:[t.jsx(P,{className:"size-4"}),e("patternLock.reset")]})]})]})}z.__docgenInfo={description:`图案锁设置组件

两步流程：
1. 设置图案
2. 确认图案`,methods:[],displayName:"PatternLockSetup",props:{onComplete:{required:!0,tsType:{name:"signature",type:"function",raw:"(patternKey: string) => void",signature:{arguments:[{type:{name:"string"},name:"patternKey"}],return:{name:"void"}}},description:"设置完成回调，返回图案字符串"},minPoints:{required:!1,tsType:{name:"number"},description:"最少需要连接的点数",defaultValue:{value:"4",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"额外的 className"}}};export{z as P};
