import{v as je,w as ce,x as A,y as Y,z as V,A as ee,B as te,C as ue,D as qe,E as J,F as Ge,G as We,H as de,J as ve,r as f,K as Je,N as ze,j as h,R as C,O as Qe,P as pe}from"./iframe-Cctxta_P.js";import{c as P}from"./utils-CDN07tui.js";import"./wallet-card-DUvztJIp.js";import"./wallet-selector-Bl24-a4p.js";import"./address-display-Dtq1ht35.js";import{C as ne}from"./chain-icon-DZMbM4Yp.js";import{c as $e}from"./web-DodBcwRj.js";import{u as se}from"./useTranslation-Cyi9axMr.js";import{I as Ke}from"./IconCheck-BUbIsnVA.js";import{I as Ze}from"./IconCopy-XrsQyI7S.js";import{T as Xe}from"./token-icon-DtvtRadC.js";import{A as j}from"./amount-BQsqQYGO.js";import{a as Z,b as Ye,C as et,D as tt,A as nt,d as at,g as Ae,I as st}from"./index-Ar-6A-5n.js";import"./index-D0E7N0oa.js";import{u as rt,i as Se,h as Le,j as me,k as it}from"./chain-config-DqVXGLIz.js";import{m as we}from"./transaction-item-B6DGk-oU.js";import"./gradient-button-CI0i7sXk.js";import"./loading-spinner-CQ_N_PP1.js";import{E as ot}from"./empty-state-QlYsD_4V.js";import{c as lt}from"./skeleton-dMQmJuYw.js";import{A as he}from"./amount-display-lh-aDGFD.js";import{a as ct}from"./animated-number-uR3fQozJ.js";import"./time-display-DtS7YJCT.js";import"./qr-code-CY_2OM_C.js";import"./icon-circle-DAEhXiJ_.js";import"./error-boundary-DnCREgnV.js";import{d as N}from"./breakpoint-wIg8UP9C.js";import{a as R,o as _,s as l,b as B,n as L,_ as y,c as k,r as D,u as ut,e as Ne,f as dt,l as pt}from"./schemas-BX8BzOgD.js";import"./web-DnZPwNCZ.js";import{T as mt}from"./transaction-list-X9g1OvtJ.js";import{S as ht}from"./swipeable-tabs-BaNw0YM4.js";var ft=class extends je{constructor(e,t){super(),this.options=t,this.#n=e,this.#s=null,this.#a=ce(),this.bindMethods(),this.setOptions(t)}#n;#e=void 0;#h=void 0;#t=void 0;#i;#u;#a;#s;#f;#d;#p;#o;#l;#r;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),fe(this.#e,this.options)?this.#c():this.updateResult(),this.#O())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ae(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ae(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#E(),this.#b(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,n=this.#e;if(this.options=this.#n.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof A(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#y(),this.#e.setOptions(this.options),t._defaulted&&!Y(this.options,t)&&this.#n.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const a=this.hasListeners();a&&ge(this.#e,n,this.options,t)&&this.#c(),this.updateResult(),a&&(this.#e!==n||A(this.options.enabled,this.#e)!==A(t.enabled,this.#e)||V(this.options.staleTime,this.#e)!==V(t.staleTime,this.#e))&&this.#g();const s=this.#T();a&&(this.#e!==n||A(this.options.enabled,this.#e)!==A(t.enabled,this.#e)||s!==this.#r)&&this.#_(s)}getOptimisticResult(e){const t=this.#n.getQueryCache().build(this.#n,e),n=this.createResult(t,e);return Tt(this,n)&&(this.#t=n,this.#u=this.options,this.#i=this.#e.state),n}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(n,a)=>(this.trackProp(a),t?.(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#n.defaultQueryOptions(e),n=this.#n.getQueryCache().build(this.#n,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#c({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#c(e){this.#y();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(ee)),t}#g(){this.#E();const e=V(this.options.staleTime,this.#e);if(te||this.#t.isStale||!ue(e))return;const n=qe(this.#t.dataUpdatedAt,e)+1;this.#o=J.setTimeout(()=>{this.#t.isStale||this.updateResult()},n)}#T(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#_(e){this.#b(),this.#r=e,!(te||A(this.options.enabled,this.#e)===!1||!ue(this.#r)||this.#r===0)&&(this.#l=J.setInterval(()=>{(this.options.refetchIntervalInBackground||Ge.isFocused())&&this.#c()},this.#r))}#O(){this.#g(),this.#_(this.#T())}#E(){this.#o&&(J.clearTimeout(this.#o),this.#o=void 0)}#b(){this.#l&&(J.clearInterval(this.#l),this.#l=void 0)}createResult(e,t){const n=this.#e,a=this.options,s=this.#t,i=this.#i,o=this.#u,c=e!==n?e.state:this.#h,{state:u}=e;let r={...u},m=!1,p;if(t._optimisticResults){const v=this.hasListeners(),G=!v&&fe(e,t),M=v&&ge(e,n,t,a);(G||M)&&(r={...r,...We(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(r.fetchStatus="idle")}let{error:g,errorUpdatedAt:O,status:T}=r;p=r.data;let E=!1;if(t.placeholderData!==void 0&&p===void 0&&T==="pending"){let v;s?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(v=s.data,E=!0):v=typeof t.placeholderData=="function"?t.placeholderData(this.#p?.state.data,this.#p):t.placeholderData,v!==void 0&&(T="success",p=de(s?.data,v,t),m=!0)}if(t.select&&p!==void 0&&!E)if(s&&p===i?.data&&t.select===this.#f)p=this.#d;else try{this.#f=t.select,p=t.select(p),p=de(s?.data,p,t),this.#d=p,this.#s=null}catch(v){this.#s=v}this.#s&&(g=this.#s,p=this.#d,O=Date.now(),T="error");const I=r.fetchStatus==="fetching",b=T==="pending",U=T==="error",q=b&&I,le=p!==void 0,S={status:T,fetchStatus:r.fetchStatus,isPending:b,isSuccess:T==="success",isError:U,isInitialLoading:q,isLoading:q,data:p,dataUpdatedAt:r.dataUpdatedAt,error:g,errorUpdatedAt:O,failureCount:r.fetchFailureCount,failureReason:r.fetchFailureReason,errorUpdateCount:r.errorUpdateCount,isFetched:r.dataUpdateCount>0||r.errorUpdateCount>0,isFetchedAfterMount:r.dataUpdateCount>c.dataUpdateCount||r.errorUpdateCount>c.errorUpdateCount,isFetching:I,isRefetching:I&&!b,isLoadingError:U&&!le,isPaused:r.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:U&&le,isStale:re(e,t),refetch:this.refetch,promise:this.#a,isEnabled:A(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const v=W=>{S.status==="error"?W.reject(S.error):S.data!==void 0&&W.resolve(S.data)},G=()=>{const W=this.#a=S.promise=ce();v(W)},M=this.#a;switch(M.status){case"pending":e.queryHash===n.queryHash&&v(M);break;case"fulfilled":(S.status==="error"||S.data!==M.value)&&G();break;case"rejected":(S.status!=="error"||S.error!==M.reason)&&G();break}}return S}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#i=this.#e.state,this.#u=this.options,this.#i.data!==void 0&&(this.#p=this.#e),Y(t,e))return;this.#t=t;const n=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!this.#m.size)return!0;const i=new Set(s??this.#m);return this.options.throwOnError&&i.add("error"),Object.keys(this.#t).some(o=>{const d=o;return this.#t[d]!==e[d]&&i.has(d)})};this.#R({listeners:n()})}#y(){const e=this.#n.getQueryCache().build(this.#n,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#h=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#O()}#R(e){ve.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#n.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function gt(e,t){return A(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function fe(e,t){return gt(e,t)||e.state.data!==void 0&&ae(e,t,t.refetchOnMount)}function ae(e,t,n){if(A(t.enabled,e)!==!1&&V(t.staleTime,e)!=="static"){const a=typeof n=="function"?n(e):n;return a==="always"||a!==!1&&re(e,t)}return!1}function ge(e,t,n,a){return(e!==t||A(a.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&re(e,n)}function re(e,t){return A(t.enabled,e)!==!1&&e.isStaleByTime(V(t.staleTime,e))}function Tt(e,t){return!Y(e.getCurrentResult(),t)}var Ie=f.createContext(!1),_t=()=>f.useContext(Ie);Ie.Provider;function Ot(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Et=f.createContext(Ot()),bt=()=>f.useContext(Et),yt=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Rt=e=>{f.useEffect(()=>{e.clearReset()},[e])},Ct=({result:e,errorResetBoundary:t,throwOnError:n,query:a,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&(s&&e.data===void 0||Je(n,[e.error,a])),vt=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...s)=>n(a(...s)):n(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},At=(e,t)=>e.isLoading&&e.isFetching&&!t,St=(e,t)=>e?.suspense&&t.isPending,Te=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Lt(e,t,n){const a=_t(),s=bt(),i=ze(),o=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=a?"isRestoring":"optimistic",vt(o),yt(o,s),Rt(s);const d=!i.getQueryCache().get(o.queryHash),[c]=f.useState(()=>new t(i,o)),u=c.getOptimisticResult(o),r=!a&&e.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(m=>{const p=r?c.subscribe(ve.batchCalls(m)):ee;return c.updateResult(),p},[c,r]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(o)},[o,c]),St(o,u))throw Te(o,c,s);if(Ct({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,u),o.experimental_prefetchInRender&&!te&&At(u,a)&&(d?Te(o,c,s):i.getQueryCache().get(o.queryHash)?.promise)?.catch(ee).finally(()=>{c.updateResult()}),o.notifyOnChangeProps?u:c.trackResult(u)}function _e(e,t){return Lt(e,ft)}function wt(e,t){const n=t==="sm"?16:20;if(e.length<=n)return e;const a=t==="sm"?6:8,s=t==="sm"?4:6;return`${e.slice(0,a)}...${e.slice(-s)}`}function Nt({chainId:e,chainIcon:t,chainSymbol:n,address:a,copyable:s=!0,onCopy:i,size:o="md",className:d}){const{t:c}=se("common"),[u,r]=f.useState(!1),m=f.useCallback(async()=>{try{await $e.write({text:a}),r(!0),i?.(),setTimeout(()=>r(!1),2e3)}catch{console.error("Failed to copy address")}},[a,i]),p=o==="sm"?"sm":"md",g=wt(a,o);return s?h.jsxs("button",{type:"button",onClick:m,className:P("flex items-center gap-2 transition-colors","hover:text-primary focus-visible:ring-ring rounded focus:outline-none focus-visible:ring-2",d),title:a,"aria-label":u?c("copiedToClipboard"):`${c("copy")} ${a}`,children:[h.jsx(ne,{chainId:e,iconUrl:t,symbol:n,size:p}),h.jsx("span",{className:P("font-mono",o==="sm"?"text-xs":"text-sm"),children:g}),u?h.jsx(Ke,{className:"size-4 shrink-0 text-green-500","aria-hidden":"true"}):h.jsx(Ze,{className:"size-4 shrink-0 text-muted-foreground","aria-hidden":"true"})]}):h.jsxs("div",{className:P("flex items-center gap-2",d),children:[h.jsx(ne,{chainId:e,iconUrl:t,symbol:n,size:p}),h.jsx("span",{className:P("font-mono",o==="sm"?"text-xs":"text-sm"),title:a,children:g})]})}Nt.__docgenInfo={description:`链地址显示组件

组合显示链图标和地址，支持复制功能
图标自动从 ChainIconProvider context 获取

@example
// 自动获取图标（需要 ChainIconProvider）
<ChainAddressDisplay chainId="ethereum" address="0x1234...5678" />

// 手动指定图标
<ChainAddressDisplay chainId="ethereum" chainIcon="/custom.svg" address="0x1234...5678" />`,methods:[],displayName:"ChainAddressDisplay",props:{chainId:{required:!0,tsType:{name:"string"},description:"链 ID（用于从 ChainIconProvider 自动获取图标）"},chainIcon:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"链图标 URL（可选，覆盖 context）"},chainSymbol:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"链符号（可选，用于 fallback）"},address:{required:!0,tsType:{name:"string"},description:"地址"},copyable:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"是否可复制",defaultValue:{value:"true",computed:!1}},onCopy:{required:!1,tsType:{name:"union",raw:"(() => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"复制回调"},size:{required:!1,tsType:{name:"union",raw:"'sm' | 'md' | undefined",elements:[{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"undefined"}]},description:"尺寸",defaultValue:{value:"'md'",computed:!1}},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"额外样式"}}};function xe({tokens:e,loading:t=!1,refreshing:n=!1,showChange:a=!1,onTokenClick:s,emptyTitle:i="暂无资产",emptyDescription:o="转入资产后将显示在这里",emptyAction:d,className:c,testId:u}){return t?h.jsx(lt,{count:3,...c&&{className:c}}):e.length===0?h.jsx(ot,{...u&&{testId:`${u}-empty`},title:i,description:o,...d&&{action:d},icon:h.jsx("svg",{className:"size-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),...c&&{className:c}}):h.jsx("div",{...u&&{"data-testid":u},className:P("space-y-1",c),children:e.map(r=>h.jsx(Ve,{token:r,testId:u?`token-item-${r.chain}-${r.symbol}`:void 0,showChange:a,loading:n,...s&&{onClick:()=>s(r)}},`${r.chain}-${r.symbol}`))})}xe.__docgenInfo={description:"",methods:[],displayName:"TokenList",props:{tokens:{required:!0,tsType:{name:"Array",elements:[{name:"TokenInfo"}],raw:"TokenInfo[]"},description:""},loading:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"Show skeleton loading state (no tokens yet)",defaultValue:{value:"false",computed:!1}},refreshing:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"Show balance refresh animation (tokens exist but refreshing)",defaultValue:{value:"false",computed:!1}},showChange:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"",defaultValue:{value:"false",computed:!1}},onTokenClick:{required:!1,tsType:{name:"union",raw:"((token: TokenInfo) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},emptyTitle:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"",defaultValue:{value:"'暂无资产'",computed:!1}},emptyDescription:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"",defaultValue:{value:"'转入资产后将显示在这里'",computed:!1}},emptyAction:{required:!1,tsType:{name:"union",raw:"React.ReactNode | undefined",elements:[{name:"ReactReactNode",raw:"React.ReactNode"},{name:"undefined"}]},description:""},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},testId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""}}};function Be({chainId:e,chainName:t,tokens:n,transactions:a,tokensLoading:s=!1,transactionsLoading:i=!1,tokensRefreshing:o=!1,onTokenClick:d,onTransactionClick:c,className:u,testId:r="wallet-address-portfolio"}){const{t:m}=se(["home","transaction"]),[p,g]=f.useState("assets"),O=t??e;return h.jsx("div",{"data-testid":r,className:u,children:h.jsx(ht,{activeTab:p,onTabChange:g,className:"h-full",testIdPrefix:`${r}-tabs`,children:T=>T==="assets"?h.jsx("div",{className:"p-4","data-testid":`${r}-assets-panel`,children:h.jsx(xe,{tokens:n,loading:s,refreshing:o,onTokenClick:d,emptyTitle:m("home:wallet.noAssets"),emptyDescription:m("home:wallet.noAssetsOnChain",{chain:O}),testId:`${r}-token-list`})}):h.jsx("div",{className:"p-4","data-testid":`${r}-history-panel`,children:h.jsx(mt,{transactions:a,loading:i,onTransactionClick:c,emptyTitle:m("transaction:history.emptyTitle"),emptyDescription:m("transaction:history.emptyDesc"),testId:`${r}-transaction-list`})})})})}Be.__docgenInfo={description:"",methods:[],displayName:"WalletAddressPortfolioView",props:{chainId:{required:!0,tsType:{name:"ChainType"},description:""},chainName:{required:!1,tsType:{name:"string"},description:""},tokens:{required:!0,tsType:{name:"Array",elements:[{name:"TokenInfo"}],raw:"TokenInfo[]"},description:""},transactions:{required:!0,tsType:{name:"Array",elements:[{name:"TransactionInfo"}],raw:"TransactionInfo[]"},description:""},tokensLoading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},transactionsLoading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},tokensRefreshing:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onTokenClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(token: TokenInfo) => void",signature:{arguments:[{type:{name:"TokenInfo"},name:"token"}],return:{name:"void"}}},description:""},onTransactionClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(tx: TransactionInfo) => void",signature:{arguments:[{type:{name:"TransactionInfo"},name:"tx"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""},testId:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'wallet-address-portfolio'",computed:!1}}}};function It({chainId:e,address:t,chainName:n,onTokenClick:a,onTransactionClick:s,className:i,testId:o}){const d=rt(),c=f.useMemo(()=>d.snapshot?Z(e):null,[e,d.snapshot]),u=Ye.getDecimals(e),r=!!c&&(c.supportsTokenBalances||c.supportsNativeBalance),m=!!c?.supportsTransactionHistory,p=_e({queryKey:["address-token-balances",e,t,!!c],queryFn:async()=>{const E=d.snapshot?Z(e):null;if(!E?.getTokenBalances){if(E?.getNativeBalance){const b=await E.getNativeBalance(t);return[{symbol:b.symbol,name:b.symbol,balance:b.amount.toFormatted(),decimals:b.amount.decimals,chain:e}]}return[]}return(await E.getTokenBalances(t)).map(b=>({symbol:b.symbol,name:b.name,balance:b.amount.toFormatted(),decimals:b.amount.decimals,chain:e}))},enabled:r,staleTime:3e4}),g=_e({queryKey:["address-transactions",e,t,!!c],queryFn:async()=>{const E=d.snapshot?Z(e):null;return E?.getTransactionHistory?(await E.getTransactionHistory(t,20)).map(b=>xt(b,e,u)):[]},enabled:m,staleTime:3e4}),O=!r||p.isLoading,T=!m||g.isLoading;return h.jsx(Be,{chainId:e,chainName:n,tokens:p.data??[],transactions:g.data??[],tokensLoading:O,transactionsLoading:T,tokensRefreshing:p.isFetching&&!p.isLoading,onTokenClick:a,onTransactionClick:s,className:i,testId:o})}function xt(e,t,n){const a=e.direction==="out"?e.to:e.from,s=e.assets.find(u=>u.assetType==="native"||u.assetType==="token"),i=s?s.value:"0",o=s?s.symbol:"",d=s?s.decimals:n,c=we(e.action,e.direction);return{id:e.hash,type:c,status:e.status,amount:j.fromRaw(i,d,o),symbol:o,address:a,timestamp:new Date(e.timestamp),hash:e.hash,chain:t}}It.__docgenInfo={description:"",methods:[],displayName:"WalletAddressPortfolioFromProvider",props:{chainId:{required:!0,tsType:{name:"ChainType"},description:""},address:{required:!0,tsType:{name:"string"},description:""},chainName:{required:!1,tsType:{name:"string"},description:""},onTokenClick:{required:!1,tsType:{name:"WalletAddressPortfolioViewProps['onTokenClick']",raw:"WalletAddressPortfolioViewProps['onTokenClick']"},description:""},onTransactionClick:{required:!1,tsType:{name:"WalletAddressPortfolioViewProps['onTransactionClick']",raw:"WalletAddressPortfolioViewProps['onTransactionClick']"},description:""},className:{required:!1,tsType:{name:"string"},description:""},testId:{required:!1,tsType:{name:"string"},description:""}}};const Bt=R(["fingerprint","face","iris","none"]),Mt=_({isAvailable:B(),biometricType:Bt,error:l().optional()}),Pt=_({title:l().optional(),description:l().optional(),cancelText:l().optional(),maxAttempts:L().optional(),fallbackToPassword:B().optional()}).optional(),Dt=_({success:B(),errorMessage:l().optional()}),kt=N("biometric",e=>e.description("生物识别服务 - 指纹/面容验证").api("isAvailable",{description:"检查生物识别是否可用",input:y(),output:Mt}).api("verify",{description:"验证生物识别",input:Pt,output:Dt}));kt.impl({async isAvailable(){if(window.PublicKeyCredential)try{const e=await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();return{isAvailable:e,biometricType:e?"fingerprint":"none"}}catch{return{isAvailable:!1,biometricType:"none"}}return{isAvailable:!1,biometricType:"none"}},async verify(e){return console.warn("Biometric not available in web, falling back to password"),{success:!1,errorMessage:"Biometric authentication not available in web browser"}}});const Ut=R(["light","medium","heavy","success","warning","error"]).optional(),Ft=N("haptics",e=>e.description("触觉反馈服务").api("impact",{description:"触发触觉反馈",input:Ut,output:y()}).api("vibrate",{description:"振动指定时长",input:L().optional(),output:y()})),da=Ft.impl({async impact(e){if("vibrate"in navigator){const t={light:10,medium:20,heavy:30,success:[10,50,10],warning:[20,30,20],error:[30,50,30,50,30]};navigator.vibrate(t[e??"medium"])}},async vibrate(e){"vibrate"in navigator&&navigator.vibrate(e??100)}}),Ht=N("secureStorage",e=>e.description("安全存储服务 - 加密存储键值对").api("set",{description:"存储数据",input:_({key:l(),value:l()}),output:y()}).api("get",{description:"获取数据",input:_({key:l()}),output:l().nullable()}).api("remove",{description:"删除数据",input:_({key:l()}),output:y()}).api("has",{description:"检查是否存在",input:_({key:l()}),output:B()}).api("clear",{description:"清空存储",input:y(),output:y()})),F="bfm_secure_";Ht.impl({async set({key:e,value:t}){localStorage.setItem(F+e,t)},async get({key:e}){return localStorage.getItem(F+e)},async remove({key:e}){localStorage.removeItem(F+e)},async has({key:e}){return localStorage.getItem(F+e)!==null},async clear(){const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n?.startsWith(F)&&e.push(n)}e.forEach(t=>localStorage.removeItem(t))}});const Vt=_({content:l(),format:l().optional()}),jt=N("camera",e=>e.description("相机服务 - 扫描二维码").api("scanQRCode",{description:"扫描二维码",input:y(),output:Vt}).api("checkPermission",{description:"检查相机权限",input:y(),output:B()}).api("requestPermission",{description:"请求相机权限",input:y(),output:B()})),pa=jt.impl({async scanQRCode(){throw new Error("QR scanning not implemented in web.")},async checkPermission(){try{return(await navigator.permissions.query({name:"camera"})).state==="granted"}catch{return!1}},async requestPermission(){try{return(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(t=>t.stop()),!0}catch{return!1}}}),qt=_({base:l(),date:l(),rates:D(l(),L())}),Gt=N("currencyExchange",e=>e.description("货币兑换服务 - 获取汇率").api("getExchangeRates",{description:"获取汇率",input:_({baseCurrency:l(),targetCurrencies:k(l())}),output:qt})),H={CNY:7.24,EUR:.95,JPY:149.5,KRW:1320,GBP:.79,AUD:1.53,CAD:1.36,CHF:.88,HKD:7.82,SGD:1.34,TWD:31.5,THB:35.2,INR:83.5,MYR:4.72,PHP:56.2};function Wt(){return new Date().toISOString().split("T")[0]??new Date().toISOString().slice(0,10)}function Jt(e,t){const n={};if(e==="USD"){for(const i of t)i==="USD"?n[i]=1:H[i]!==void 0&&(n[i]=H[i]);return n}const a=H[e];if(a===void 0)return n;const s=1/a;for(const i of t)i===e?n[i]=1:i==="USD"?n[i]=s:H[i]!==void 0&&(n[i]=H[i]*s);return n}const zt=Gt.impl({async getExchangeRates({baseCurrency:e,targetCurrencies:t}){return await new Promise(n=>setTimeout(n,100)),{base:e,date:Wt(),rates:Jt(e,t)}}});f.createContext(null);const Qt=_({appId:l(),appName:l(),appIcon:l(),origin:l()});N("authorize",e=>e.description("授权适配器").api("getCallerAppInfo",_({eventId:l()}),Qt).api("respondWith",_({eventId:l(),path:l(),data:ut()}),y()).api("removeEventId",_({eventId:l()}),y()).method("isAvailable",y(),B()));const w=Ne(e=>e instanceof j),$t=D(l(),D(l(),_({assetType:l(),logo:l().optional(),supportChain:D(l(),_({assetType:l(),contract:l().optional(),decimals:L()}).optional())}))),Kt=D(l(),D(l(),l())),Zt=_({chain:R(["BFMeta","BFChain","CCChain","PMChain"]),assetType:l(),stakedAmount:w,stakedFiat:l(),availableChains:k(R(["ETH","BSC","TRON"])),logoUrl:l().optional(),totalMinted:w,totalCirculation:w,totalBurned:w,totalStaked:w,externalChain:R(["ETH","BSC","TRON"]),externalAssetType:l()}),z=_({id:l(),type:R(["mint","burn"]),sourceChain:l(),sourceAsset:l(),sourceAmount:w,targetChain:l(),targetAsset:l(),targetAmount:w,status:R(["pending","confirming","confirmed","failed"]),txHash:l().optional(),createdAt:L(),updatedAt:L(),errorMessage:l().optional()}),Xt=_({sourceChain:R(["ETH","BSC","TRON"]),sourceAsset:l(),amount:w,targetChain:R(["BFMeta","BFChain","CCChain","PMChain"]),targetAsset:l()}),Yt=_({sourceChain:R(["BFMeta","BFChain","CCChain","PMChain"]),sourceAsset:l(),amount:w,targetChain:R(["ETH","BSC","TRON"]),targetAsset:l()}),en=N("staking",e=>e.description("质押服务").api("getRechargeConfig",y(),$t).api("getLogoUrls",y(),Kt).api("getOverview",y(),k(Zt)).api("getTransactions",y(),k(z)).api("getTransaction",_({id:l()}),z.nullable()).api("submitMint",Xt,z).api("submitBurn",Yt,z)),ma=en.impl({async getRechargeConfig(){throw new Error("StakingService.getRechargeConfig not implemented")},async getLogoUrls(){throw new Error("StakingService.getLogoUrls not implemented")},async getOverview(){throw new Error("StakingService.getOverview not implemented")},async getTransactions(){throw new Error("StakingService.getTransactions not implemented")},async getTransaction(){throw new Error("StakingService.getTransaction not implemented")},async submitMint(){throw new Error("StakingService.submitMint not implemented")},async submitBurn(){throw new Error("StakingService.submitBurn not implemented")}}),Oe=Ne(e=>e instanceof j),Me=R(["send","receive","signature","stake","unstake","destroy","gift","grab","trust","signFor","emigrate","immigrate","exchange","swap","issueAsset","increaseAsset","mint","issueEntity","destroyEntity","locationName","dapp","certificate","approve","interaction","mark","other"]),Ee=_({id:l(),type:Me,status:R(["pending","confirmed","failed"]),amount:Oe,symbol:l(),decimals:L(),address:l(),timestamp:dt(),hash:l().optional(),chain:l(),fee:Oe.optional(),feeSymbol:l().optional(),feeDecimals:L().optional(),blockNumber:L().optional(),confirmations:L().optional(),from:l().optional(),to:l().optional(),action:nt.optional(),direction:tt.optional(),assets:k(at).optional(),contract:et.optional()}),tn=_({chain:l().optional(),period:R(["7d","30d","90d","all"]).optional(),type:Me.or(pt("all")).optional(),status:R(["pending","confirmed","failed","all"]).optional()}),nn=N("transaction",e=>e.description("交易服务").api("getHistory",_({walletId:l(),filter:tn.optional()}),k(Ee)).api("getTransaction",_({id:l()}),Ee.nullable()).api("refresh",_({walletId:l()}),y())),$=new Map;function an(e){const[t,n]=e.split("--");return!t||!n?null:{chainId:t,hash:n}}async function be(e,t){await me.initialize();const n=await Se(),a=it(n),s=new Map(a.map(r=>[r.id,r])),i=await me.getWalletChainAddresses(e),o=t?.chain&&t.chain!=="all"?t.chain:null,d=i.flatMap(r=>{if(o&&r.chain!==o)return[];const m=s.get(r.chain)??Le(n,r.chain);if(!m||!m.enabled)return[];try{const p=Ae(r.chain);return!p.supportsTransactionHistory||!p.getTransactionHistory?[]:p.getTransactionHistory(r.address,50).then(g=>g.map(O=>Pe(O,m)))}catch{return[]}});let u=(await Promise.all(d)).flat();t&&(u=cn(u,t.chain),u=rn(u,t.period),u=on(u,t.type),u=ln(u,t.status)),u.sort((r,m)=>m.timestamp.getTime()-r.timestamp.getTime()),$.clear();for(const r of u)$.set(r.id,r);return u}function sn(e,t){const n=e.assets.find(a=>a.assetType==="native"||a.assetType==="token");return n?{value:n.value,symbol:n.symbol,decimals:n.decimals}:{value:"0",symbol:t.symbol,decimals:t.decimals}}function Pe(e,t){const n=we(e.action,e.direction),a=sn(e,{symbol:t.symbol,decimals:t.decimals}),i=e.action==="transfer"?e.direction==="out"?e.to:e.from:e.contract?.address??e.to??e.from;return{id:`${t.id}--${e.hash}`,type:n,status:e.status,amount:j.fromRaw(a.value,a.decimals,a.symbol),symbol:a.symbol,decimals:a.decimals,address:i,timestamp:new Date(e.timestamp),hash:e.hash,chain:t.id,blockNumber:e.blockNumber?Number(e.blockNumber):void 0,confirmations:void 0,fee:e.fee?j.fromRaw(e.fee.value,e.fee.decimals,e.fee.symbol):void 0,feeSymbol:e.fee?.symbol,feeDecimals:e.fee?.decimals,from:e.from,to:e.to,action:e.action,direction:e.direction,assets:e.assets,contract:e.contract}}function rn(e,t){if(!t||t==="all")return e;const n=t==="7d"?7:t==="30d"?30:90,a=Date.now()-n*24*60*60*1e3;return e.filter(s=>s.timestamp.getTime()>=a)}function on(e,t){return!t||t==="all"?e:e.filter(n=>n.type===t)}function ln(e,t){return!t||t==="all"?e:e.filter(n=>n.status===t)}function cn(e,t){return!t||t==="all"?e:e.filter(n=>n.chain===t)}const ha=nn.impl({async getHistory({walletId:e,filter:t}){return be(e,t)},async getTransaction({id:e}){const t=$.get(e);if(t)return t;const n=an(e);if(!n)return null;const a=await Se(),s=Le(a,n.chainId);if(!s||!s.enabled)return null;try{const i=Ae(s.id);if(!i.getTransaction)return null;const o=await i.getTransaction(n.hash);if(!o)return null;const d=Pe(o,s);return $.set(d.id,d),d}catch(i){if(i instanceof st)throw i;return null}},async refresh({walletId:e}){await be(e,{chain:"all",period:"all",type:"all",status:"all"})}});var un=Object.create,ie=Object.defineProperty,dn=Object.getOwnPropertyDescriptor,De=Object.getOwnPropertyNames,pn=Object.getPrototypeOf,mn=Object.prototype.hasOwnProperty,oe=(e,t)=>function(){return t||(0,e[De(e)[0]])((t={exports:{}}).exports,t),t.exports},hn=(e,t)=>{for(var n in t)ie(e,n,{get:t[n],enumerable:!0})},fn=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of De(t))!mn.call(e,s)&&s!==n&&ie(e,s,{get:()=>t[s],enumerable:!(a=dn(t,s))||a.enumerable});return e},gn=(e,t,n)=>(n=e!=null?un(pn(e)):{},fn(ie(n,"default",{value:e,enumerable:!0}),e)),Tn=oe({"node_modules/is-object/index.js"(e,t){t.exports=function(a){return typeof a=="object"&&a!==null}}}),_n=oe({"node_modules/is-window/index.js"(e,t){t.exports=function(n){if(n==null)return!1;var a=Object(n);return a===a.window}}}),On=oe({"node_modules/is-dom/index.js"(e,t){var n=Tn(),a=_n();function s(i){return!n(i)||!a(window)||typeof window.Node!="function"?!1:typeof i.nodeType=="number"&&typeof i.nodeName=="string"}t.exports=s}}),ke={};hn(ke,{chromeDark:()=>En,chromeLight:()=>bn});var En={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"rgb(36, 36, 36)",BASE_COLOR:"rgb(213, 213, 213)",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(227, 110, 236)",OBJECT_VALUE_NULL_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_REGEXP_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_STRING_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_NUMBER_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_BOOLEAN_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(85, 106, 242)",HTML_TAG_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(155, 187, 220)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(242, 151, 102)",HTML_COMMENT_COLOR:"rgb(137, 137, 137)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"rgb(145, 145, 145)",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"rgb(85, 85, 85)",TABLE_TH_BACKGROUND_COLOR:"rgb(44, 44, 44)",TABLE_TH_HOVER_COLOR:"rgb(48, 48, 48)",TABLE_SORT_ICON_COLOR:"black",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 0) 50%, rgba(51, 139, 255, 0.0980392) 50%, rgba(51, 139, 255, 0.0980392))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},bn={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"white",BASE_COLOR:"black",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(136, 19, 145)",OBJECT_VALUE_NULL_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_REGEXP_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_STRING_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_NUMBER_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_BOOLEAN_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(13, 34, 170)",HTML_TAG_COLOR:"rgb(168, 148, 166)",HTML_TAGNAME_COLOR:"rgb(136, 18, 128)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(153, 69, 0)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(26, 26, 166)",HTML_COMMENT_COLOR:"rgb(35, 110, 37)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"#6e6e6e",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"#aaa",TABLE_TH_BACKGROUND_COLOR:"#eee",TABLE_TH_HOVER_COLOR:"hsla(0, 0%, 90%, 1)",TABLE_SORT_ICON_COLOR:"#6e6e6e",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(to bottom, white, white 50%, rgb(234, 243, 255) 50%, rgb(234, 243, 255))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},Ue=f.createContext([{},()=>{}]),X={WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",OUserSelect:"none",userSelect:"none"},yn=e=>({DOMNodePreview:{htmlOpenTag:{base:{color:e.HTML_TAG_COLOR},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM},htmlAttributeName:{color:e.HTML_ATTRIBUTE_NAME_COLOR},htmlAttributeValue:{color:e.HTML_ATTRIBUTE_VALUE_COLOR}},htmlCloseTag:{base:{color:e.HTML_TAG_COLOR},offsetLeft:{marginLeft:-e.TREENODE_PADDING_LEFT},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM}},htmlComment:{color:e.HTML_COMMENT_COLOR},htmlDoctype:{color:e.HTML_DOCTYPE_COLOR}},ObjectPreview:{objectDescription:{fontStyle:"italic"},preview:{fontStyle:"italic"},arrayMaxProperties:e.OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES,objectMaxProperties:e.OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES},ObjectName:{base:{color:e.OBJECT_NAME_COLOR},dimmed:{opacity:.6}},ObjectValue:{objectValueNull:{color:e.OBJECT_VALUE_NULL_COLOR},objectValueUndefined:{color:e.OBJECT_VALUE_UNDEFINED_COLOR},objectValueRegExp:{color:e.OBJECT_VALUE_REGEXP_COLOR},objectValueString:{color:e.OBJECT_VALUE_STRING_COLOR},objectValueSymbol:{color:e.OBJECT_VALUE_SYMBOL_COLOR},objectValueNumber:{color:e.OBJECT_VALUE_NUMBER_COLOR},objectValueBoolean:{color:e.OBJECT_VALUE_BOOLEAN_COLOR},objectValueFunctionPrefix:{color:e.OBJECT_VALUE_FUNCTION_PREFIX_COLOR,fontStyle:"italic"},objectValueFunctionName:{fontStyle:"italic"}},TreeView:{treeViewOutline:{padding:0,margin:0,listStyleType:"none"}},TreeNode:{treeNodeBase:{color:e.BASE_COLOR,backgroundColor:e.BASE_BACKGROUND_COLOR,lineHeight:e.TREENODE_LINE_HEIGHT,cursor:"default",boxSizing:"border-box",listStyle:"none",fontFamily:e.TREENODE_FONT_FAMILY,fontSize:e.TREENODE_FONT_SIZE},treeNodePreviewContainer:{},treeNodePlaceholder:{whiteSpace:"pre",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT,...X},treeNodeArrow:{base:{color:e.ARROW_COLOR,display:"inline-block",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT,...parseFloat(e.ARROW_ANIMATION_DURATION)>0?{transition:`transform ${e.ARROW_ANIMATION_DURATION} ease 0s`}:{},...X},expanded:{WebkitTransform:"rotateZ(90deg)",MozTransform:"rotateZ(90deg)",transform:"rotateZ(90deg)"},collapsed:{WebkitTransform:"rotateZ(0deg)",MozTransform:"rotateZ(0deg)",transform:"rotateZ(0deg)"}},treeNodeChildNodesContainer:{margin:0,paddingLeft:e.TREENODE_PADDING_LEFT}},TableInspector:{base:{color:e.BASE_COLOR,position:"relative",border:`1px solid ${e.TABLE_BORDER_COLOR}`,fontFamily:e.BASE_FONT_FAMILY,fontSize:e.BASE_FONT_SIZE,lineHeight:"120%",boxSizing:"border-box",cursor:"default"}},TableInspectorHeaderContainer:{base:{top:0,height:"17px",left:0,right:0,overflowX:"hidden"},table:{tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",height:"100%",width:"100%",margin:0}},TableInspectorDataContainer:{tr:{display:"table-row"},td:{boxSizing:"border-box",border:"none",height:"16px",verticalAlign:"top",padding:"1px 4px",WebkitUserSelect:"text",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px"},div:{position:"static",top:"17px",bottom:0,overflowY:"overlay",transform:"translateZ(0)",left:0,right:0,overflowX:"hidden"},table:{positon:"static",left:0,top:0,right:0,bottom:0,borderTop:"0 none transparent",margin:0,backgroundImage:e.TABLE_DATA_BACKGROUND_IMAGE,backgroundSize:e.TABLE_DATA_BACKGROUND_SIZE,tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",width:"100%",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorTH:{base:{position:"relative",height:"auto",textAlign:"left",backgroundColor:e.TABLE_TH_BACKGROUND_COLOR,borderBottom:`1px solid ${e.TABLE_BORDER_COLOR}`,fontWeight:"normal",verticalAlign:"middle",padding:"0 4px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px",":hover":{backgroundColor:e.TABLE_TH_HOVER_COLOR}},div:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorLeftBorder:{none:{borderLeft:"none"},solid:{borderLeft:`1px solid ${e.TABLE_BORDER_COLOR}`}},TableInspectorSortIcon:{display:"block",marginRight:3,width:8,height:7,marginTop:-7,color:e.TABLE_SORT_ICON_COLOR,fontSize:12,...X}}),Rn="chromeLight",Cn=f.createContext(yn(ke[Rn])),Fe=e=>f.useContext(Cn)[e],vn=({expanded:e,styles:t})=>C.createElement("span",{style:{...t.base,...e?t.expanded:t.collapsed}},"▶"),An=f.memo(e=>{e={expanded:!0,nodeRenderer:({name:r})=>C.createElement("span",null,r),onClick:()=>{},shouldShowArrow:!1,shouldShowPlaceholder:!0,...e};const{expanded:t,onClick:n,children:a,nodeRenderer:s,title:i,shouldShowArrow:o,shouldShowPlaceholder:d}=e,c=Fe("TreeNode"),u=s;return C.createElement("li",{"aria-expanded":t,role:"treeitem",style:c.treeNodeBase,title:i},C.createElement("div",{style:c.treeNodePreviewContainer,onClick:n},o||f.Children.count(a)>0?C.createElement(vn,{expanded:t,styles:c.treeNodeArrow}):d&&C.createElement("span",{style:c.treeNodePlaceholder}," "),C.createElement(u,{...e})),C.createElement("ol",{role:"group",style:c.treeNodeChildNodesContainer},t?a:void 0))}),K="$",ye="*";function Q(e,t){return!t(e).next().done}var Sn=e=>Array.from({length:e},(t,n)=>[K].concat(Array.from({length:n},()=>"*")).join(".")),Ln=(e,t,n,a,s)=>{const i=[].concat(Sn(a)).concat(n).filter(d=>typeof d=="string"),o=[];return i.forEach(d=>{const c=d.split("."),u=(r,m,p)=>{if(p===c.length){o.push(m);return}const g=c[p];if(p===0)Q(r,t)&&(g===K||g===ye)&&u(r,K,p+1);else if(g===ye)for(const{name:O,data:T}of t(r))Q(T,t)&&u(T,`${m}.${O}`,p+1);else{const O=r[g];Q(O,t)&&u(O,`${m}.${g}`,p+1)}};u(e,"",0)}),o.reduce((d,c)=>(d[c]=!0,d),{...s})},He=f.memo(e=>{const{data:t,dataIterator:n,path:a,depth:s,nodeRenderer:i}=e,[o,d]=f.useContext(Ue),c=Q(t,n),u=!!o[a],r=f.useCallback(()=>c&&d(m=>({...m,[a]:!u})),[c,d,a,u]);return C.createElement(An,{expanded:u,onClick:r,shouldShowArrow:c,shouldShowPlaceholder:s>0,nodeRenderer:i,...e},u?[...n(t)].map(({name:m,data:p,...g})=>C.createElement(He,{name:m,data:p,depth:s+1,path:`${a}.${m}`,key:m,dataIterator:n,nodeRenderer:i,...g})):null)});f.memo(({name:e,data:t,dataIterator:n,nodeRenderer:a,expandPaths:s,expandLevel:i})=>{const o=Fe("TreeView"),d=f.useState({}),[,c]=d;return f.useLayoutEffect(()=>c(u=>Ln(t,n,s,i,u)),[t,n,s,i]),C.createElement(Ue.Provider,{value:d},C.createElement("ol",{role:"tree",style:o.treeViewOutline},C.createElement(He,{name:e,data:t,dataIterator:n,depth:0,path:K,nodeRenderer:a})))});gn(On());const wn=300*1e3,Re=new Map;function x(e){return e.trim().toUpperCase()}function Ce(e,t){const n=x(e),a=[...new Set(t.map(x))].filter(s=>s!==n).sort().join(",");return`${n}|${a}`}function Nn(e,t){const n=f.useMemo(()=>x(e),[e]),a=f.useMemo(()=>[...new Set(t.map(x))],[t.join(",")]),s=f.useMemo(()=>Ce(n,a),[n,a.join(",")]),[i,o]=f.useState({data:null,isLoading:a.length>0,error:null,updatedAt:null}),d=f.useCallback(async(c,u)=>{const r=x(c),m=[...new Set(u.map(x))].filter(T=>T!==r),p=Ce(r,m),g=Date.now(),O=Re.get(p);if(O&&g-O.updatedAt<wn){o({data:O.data,isLoading:!1,error:null,updatedAt:O.updatedAt});return}if(m.length===0){const T=new Date().toISOString().split("T")[0],E={base:r,date:T??new Date().toISOString().slice(0,10),rates:{}};o({data:E,isLoading:!1,error:null,updatedAt:g});return}o(T=>({...T,isLoading:!0,error:null}));try{const T=await zt.getExchangeRates({baseCurrency:r,targetCurrencies:m});Re.set(p,{data:T,updatedAt:g}),o({data:T,isLoading:!1,error:null,updatedAt:g})}catch(T){o(E=>({...E,isLoading:!1,error:T instanceof Error?T.message:"Failed to fetch exchange rates"}))}},[]);return f.useEffect(()=>{d(n,a)},[s,n,a,d]),i}function In(e,t){const n=x(t);return e?.rates[n]}function xn(e){const t=e.replaceAll(",","").trim();if(t.length===0)return null;const n=Number(t);return Number.isFinite(n)?n:null}function Ve({token:e,onClick:t,showChange:n=!1,loading:a=!1,className:s,testId:i}){const o=!!t,{t:d}=se(["currency","common"]),c=Qe(),u=e.fiatValue!==void 0&&c!=="USD",{data:r,isLoading:m,error:p}=Nn("USD",u?[c]:[]),g=u?In(r,c):void 0,O=e.fiatValue!==void 0?xn(e.fiatValue):null,T=e.fiatValue!==void 0?O!==null?String(O):e.fiatValue:void 0,E=c!=="USD"&&g!==void 0&&O!==null,I=E?pe[c].symbol:pe.USD.symbol,b=E&&O!==null?String(O*g):T,U=u&&!E?d(p?"exchange.error":m?"exchange.loading":"exchange.unavailable"):null;return h.jsxs("div",{...i&&{"data-testid":i},role:o?"button":void 0,tabIndex:o?0:void 0,onClick:t,onKeyDown:o?q=>q.key==="Enter"&&t?.():void 0,"aria-label":o?d("common:a11y.tokenDetails",{token:e.symbol}):void 0,className:P("@container flex items-center gap-3 rounded-xl p-3 transition-colors",o&&"hover:bg-muted/50 active:bg-muted cursor-pointer",s),children:[h.jsxs("div",{className:"relative",children:[h.jsx(Xe,{symbol:e.symbol,chainId:e.chain,imageUrl:e.icon,size:"lg"}),h.jsx(ne,{chain:e.chain,size:"sm",className:"ring-background absolute -right-0.5 -bottom-0.5 size-4 text-[8px] ring-2"})]}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsx("p",{className:"truncate text-sm font-medium @xs:text-base",children:e.symbol}),h.jsx("p",{className:"text-muted-foreground truncate text-xs @xs:text-sm",children:e.name})]}),h.jsxs("div",{className:"shrink-0 text-right",children:[h.jsx(ct,{value:e.balance,loading:a,decimals:e.decimals??8,fixedDecimals:!0,className:"text-sm @xs:text-base"}),b&&!a&&h.jsxs("p",{className:"text-muted-foreground text-xs @xs:text-sm",title:U??void 0,children:["≈ ",I,h.jsx(he,{value:b,size:"xs",className:"inline"}),n&&e.change24h!==void 0&&h.jsx(he,{value:e.change24h,sign:"always",color:"auto",size:"xs",className:"ml-1 inline"}),n&&e.change24h!==void 0&&"%"]}),a&&h.jsx("p",{className:"text-muted-foreground animate-pulse text-xs @xs:text-sm",children:"≈ --"})]})]})}Ve.__docgenInfo={description:"",methods:[],displayName:"TokenItem",props:{token:{required:!0,tsType:{name:"TokenInfo"},description:""},onClick:{required:!1,tsType:{name:"union",raw:"(() => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},showChange:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"",defaultValue:{value:"false",computed:!1}},loading:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"Whether balance is loading (shows animation)",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},testId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""}}};export{Nt as C,Ve as T,Be as W,xe as a,It as b,pa as c,da as h,ma as s,ha as t,_e as u};
