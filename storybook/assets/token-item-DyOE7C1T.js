import{v as Ge,w as ue,x as w,y as ee,z as V,A as te,B as ae,C as pe,D as We,E as J,F as Je,G as ze,H as me,J as Se,r as T,K as Qe,N as $e,j as p,R as C,O as Ke,P as he}from"./iframe-CLYHcCRY.js";import{c as M}from"./utils-CDN07tui.js";import"./wallet-card-lBwrkdsM.js";import"./wallet-selector-CzdfjQ8k.js";import"./address-display-BNCYVQQx.js";import{C as ne}from"./chain-icon-DENF18Nl.js";import{c as Ze}from"./web-DodBcwRj.js";import{u as ie}from"./useTranslation-Cb2TYd22.js";import{I as Xe}from"./IconCheck-B40OcL4a.js";import{I as Ye}from"./IconCopy-BuWPXw-E.js";import{T as et}from"./token-icon-Dr_c_NXn.js";import{A as H}from"./amount-BQsqQYGO.js";import{a as X,b as tt,i as Q,C as at,D as nt,A as st,d as rt,g as we,I as it}from"./index-wSp7Vo6A.js";import"./index-D0E7N0oa.js";import{u as ot,i as Ne,h as Le,j as fe,k as lt}from"./chain-config-CJhdu2xl.js";import{m as xe}from"./transaction-item-CC63LXFY.js";import"./gradient-button-eh87wLHg.js";import"./loading-spinner-DqC7JCd8.js";import{E as ct}from"./empty-state-DX03tGcj.js";import{c as dt}from"./skeleton-CAwtnORC.js";import{A as ge}from"./amount-display-BRiBavrB.js";import{a as ut}from"./animated-number-DcLSzJ4j.js";import"./time-display-CIVcGCI1.js";import"./qr-code-aEqhiK5l.js";import"./icon-circle-DgObHDui.js";import"./error-boundary-BC2jZZ2a.js";import{d as I}from"./breakpoint-wIg8UP9C.js";import{a as v,o as _,s as l,b as k,n as L,_ as E,c as U,r as D,u as pt,e as Ie,f as mt,l as ht}from"./schemas-BX8BzOgD.js";import"./web-CGxU7K0N.js";import{T as ft}from"./transaction-list-CQpKx25j.js";import{S as gt}from"./swipeable-tabs-C9eerlxJ.js";import{I as Tt}from"./IconAlertTriangle-DbB-nqyx.js";var bt=class extends Ge{constructor(e,t){super(),this.options=t,this.#a=e,this.#s=null,this.#n=ue(),this.bindMethods(),this.setOptions(t)}#a;#e=void 0;#h=void 0;#t=void 0;#i;#d;#n;#s;#f;#u;#p;#o;#l;#r;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),Te(this.#e,this.options)?this.#c():this.updateResult(),this.#_())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return se(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return se(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#O(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,a=this.#e;if(this.options=this.#a.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof w(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#E(),this.#e.setOptions(this.options),t._defaulted&&!ee(this.options,t)&&this.#a.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const n=this.hasListeners();n&&be(this.#e,a,this.options,t)&&this.#c(),this.updateResult(),n&&(this.#e!==a||w(this.options.enabled,this.#e)!==w(t.enabled,this.#e)||V(this.options.staleTime,this.#e)!==V(t.staleTime,this.#e))&&this.#g();const s=this.#T();n&&(this.#e!==a||w(this.options.enabled,this.#e)!==w(t.enabled,this.#e)||s!==this.#r)&&this.#b(s)}getOptimisticResult(e){const t=this.#a.getQueryCache().build(this.#a,e),a=this.createResult(t,e);return yt(this,a)&&(this.#t=a,this.#d=this.options,this.#i=this.#e.state),a}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(a,n)=>(this.trackProp(n),t?.(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#n.status==="pending"&&this.#n.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,n))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#a.defaultQueryOptions(e),a=this.#a.getQueryCache().build(this.#a,t);return a.fetch().then(()=>this.createResult(a,t))}fetch(e){return this.#c({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#c(e){this.#E();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(te)),t}#g(){this.#y();const e=V(this.options.staleTime,this.#e);if(ae||this.#t.isStale||!pe(e))return;const a=We(this.#t.dataUpdatedAt,e)+1;this.#o=J.setTimeout(()=>{this.#t.isStale||this.updateResult()},a)}#T(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#b(e){this.#O(),this.#r=e,!(ae||w(this.options.enabled,this.#e)===!1||!pe(this.#r)||this.#r===0)&&(this.#l=J.setInterval(()=>{(this.options.refetchIntervalInBackground||Je.isFocused())&&this.#c()},this.#r))}#_(){this.#g(),this.#b(this.#T())}#y(){this.#o&&(J.clearTimeout(this.#o),this.#o=void 0)}#O(){this.#l&&(J.clearInterval(this.#l),this.#l=void 0)}createResult(e,t){const a=this.#e,n=this.options,s=this.#t,r=this.#i,i=this.#d,c=e!==a?e.state:this.#h,{state:d}=e;let o={...d},h=!1,m;if(t._optimisticResults){const S=this.hasListeners(),G=!S&&Te(e,t),P=S&&be(e,a,t,n);(G||P)&&(o={...o,...ze(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(o.fetchStatus="idle")}let{error:f,errorUpdatedAt:b,status:g}=o;m=o.data;let O=!1;if(t.placeholderData!==void 0&&m===void 0&&g==="pending"){let S;s?.isPlaceholderData&&t.placeholderData===i?.placeholderData?(S=s.data,O=!0):S=typeof t.placeholderData=="function"?t.placeholderData(this.#p?.state.data,this.#p):t.placeholderData,S!==void 0&&(g="success",m=me(s?.data,S,t),h=!0)}if(t.select&&m!==void 0&&!O)if(s&&m===r?.data&&t.select===this.#f)m=this.#u;else try{this.#f=t.select,m=t.select(m),m=me(s?.data,m,t),this.#u=m,this.#s=null}catch(S){this.#s=S}this.#s&&(f=this.#s,m=this.#u,b=Date.now(),g="error");const R=o.fetchStatus==="fetching",y=g==="pending",A=g==="error",q=y&&R,de=m!==void 0,N={status:g,fetchStatus:o.fetchStatus,isPending:y,isSuccess:g==="success",isError:A,isInitialLoading:q,isLoading:q,data:m,dataUpdatedAt:o.dataUpdatedAt,error:f,errorUpdatedAt:b,failureCount:o.fetchFailureCount,failureReason:o.fetchFailureReason,errorUpdateCount:o.errorUpdateCount,isFetched:o.dataUpdateCount>0||o.errorUpdateCount>0,isFetchedAfterMount:o.dataUpdateCount>c.dataUpdateCount||o.errorUpdateCount>c.errorUpdateCount,isFetching:R,isRefetching:R&&!y,isLoadingError:A&&!de,isPaused:o.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:A&&de,isStale:oe(e,t),refetch:this.refetch,promise:this.#n,isEnabled:w(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const S=W=>{N.status==="error"?W.reject(N.error):N.data!==void 0&&W.resolve(N.data)},G=()=>{const W=this.#n=N.promise=ue();S(W)},P=this.#n;switch(P.status){case"pending":e.queryHash===a.queryHash&&S(P);break;case"fulfilled":(N.status==="error"||N.data!==P.value)&&G();break;case"rejected":(N.status!=="error"||N.error!==P.reason)&&G();break}}return N}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#i=this.#e.state,this.#d=this.options,this.#i.data!==void 0&&(this.#p=this.#e),ee(t,e))return;this.#t=t;const a=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,s=typeof n=="function"?n():n;if(s==="all"||!s&&!this.#m.size)return!0;const r=new Set(s??this.#m);return this.options.throwOnError&&r.add("error"),Object.keys(this.#t).some(i=>{const u=i;return this.#t[u]!==e[u]&&r.has(u)})};this.#R({listeners:a()})}#E(){const e=this.#a.getQueryCache().build(this.#a,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#h=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#_()}#R(e){Se.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#a.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function _t(e,t){return w(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Te(e,t){return _t(e,t)||e.state.data!==void 0&&se(e,t,t.refetchOnMount)}function se(e,t,a){if(w(t.enabled,e)!==!1&&V(t.staleTime,e)!=="static"){const n=typeof a=="function"?a(e):a;return n==="always"||n!==!1&&oe(e,t)}return!1}function be(e,t,a,n){return(e!==t||w(n.enabled,e)===!1)&&(!a.suspense||e.state.status!=="error")&&oe(e,a)}function oe(e,t){return w(t.enabled,e)!==!1&&e.isStaleByTime(V(t.staleTime,e))}function yt(e,t){return!ee(e.getCurrentResult(),t)}var Me=T.createContext(!1),Ot=()=>T.useContext(Me);Me.Provider;function Et(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Rt=T.createContext(Et()),vt=()=>T.useContext(Rt),Ct=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},At=e=>{T.useEffect(()=>{e.clearReset()},[e])},St=({result:e,errorResetBoundary:t,throwOnError:a,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||Qe(a,[e.error,n])),wt=e=>{if(e.suspense){const a=s=>s==="static"?s:Math.max(s??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...s)=>a(n(...s)):a(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Nt=(e,t)=>e.isLoading&&e.isFetching&&!t,Lt=(e,t)=>e?.suspense&&t.isPending,_e=(e,t,a)=>t.fetchOptimistic(e).catch(()=>{a.clearReset()});function xt(e,t,a){const n=Ot(),s=vt(),r=$e(),i=r.defaultQueryOptions(e);r.getDefaultOptions().queries?._experimental_beforeQuery?.(i),i._optimisticResults=n?"isRestoring":"optimistic",wt(i),Ct(i,s),At(s);const u=!r.getQueryCache().get(i.queryHash),[c]=T.useState(()=>new t(r,i)),d=c.getOptimisticResult(i),o=!n&&e.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(h=>{const m=o?c.subscribe(Se.batchCalls(h)):te;return c.updateResult(),m},[c,o]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),T.useEffect(()=>{c.setOptions(i)},[i,c]),Lt(i,d))throw _e(i,c,s);if(St({result:d,errorResetBoundary:s,throwOnError:i.throwOnError,query:r.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw d.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(i,d),i.experimental_prefetchInRender&&!ae&&Nt(d,n)&&(u?_e(i,c,s):r.getQueryCache().get(i.queryHash)?.promise)?.catch(te).finally(()=>{c.updateResult()}),i.notifyOnChangeProps?d:c.trackResult(d)}function ye(e,t){return xt(e,bt)}function It(e,t){const a=t==="sm"?16:20;if(e.length<=a)return e;const n=t==="sm"?6:8,s=t==="sm"?4:6;return`${e.slice(0,n)}...${e.slice(-s)}`}function Mt({chainId:e,chainIcon:t,chainSymbol:a,address:n,copyable:s=!0,onCopy:r,size:i="md",className:u}){const{t:c}=ie("common"),[d,o]=T.useState(!1),h=T.useCallback(async()=>{try{await Ze.write({text:n}),o(!0),r?.(),setTimeout(()=>o(!1),2e3)}catch{console.error("Failed to copy address")}},[n,r]),m=i==="sm"?"sm":"md",f=It(n,i);return s?p.jsxs("button",{type:"button",onClick:h,className:M("flex items-center gap-2 transition-colors","hover:text-primary focus-visible:ring-ring rounded focus:outline-none focus-visible:ring-2",u),title:n,"aria-label":d?c("copiedToClipboard"):`${c("copy")} ${n}`,children:[p.jsx(ne,{chainId:e,iconUrl:t,symbol:a,size:m}),p.jsx("span",{className:M("font-mono",i==="sm"?"text-xs":"text-sm"),children:f}),d?p.jsx(Xe,{className:"size-4 shrink-0 text-green-500","aria-hidden":"true"}):p.jsx(Ye,{className:"size-4 shrink-0 text-muted-foreground","aria-hidden":"true"})]}):p.jsxs("div",{className:M("flex items-center gap-2",u),children:[p.jsx(ne,{chainId:e,iconUrl:t,symbol:a,size:m}),p.jsx("span",{className:M("font-mono",i==="sm"?"text-xs":"text-sm"),title:n,children:f})]})}Mt.__docgenInfo={description:`链地址显示组件

组合显示链图标和地址，支持复制功能
图标自动从 ChainIconProvider context 获取

@example
// 自动获取图标（需要 ChainIconProvider）
<ChainAddressDisplay chainId="ethereum" address="0x1234...5678" />

// 手动指定图标
<ChainAddressDisplay chainId="ethereum" chainIcon="/custom.svg" address="0x1234...5678" />`,methods:[],displayName:"ChainAddressDisplay",props:{chainId:{required:!0,tsType:{name:"string"},description:"链 ID（用于从 ChainIconProvider 自动获取图标）"},chainIcon:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"链图标 URL（可选，覆盖 context）"},chainSymbol:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"链符号（可选，用于 fallback）"},address:{required:!0,tsType:{name:"string"},description:"地址"},copyable:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"是否可复制",defaultValue:{value:"true",computed:!1}},onCopy:{required:!1,tsType:{name:"union",raw:"(() => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"复制回调"},size:{required:!1,tsType:{name:"union",raw:"'sm' | 'md' | undefined",elements:[{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"undefined"}]},description:"尺寸",defaultValue:{value:"'md'",computed:!1}},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"额外样式"}}};function Be({tokens:e,loading:t=!1,refreshing:a=!1,showChange:n=!1,onTokenClick:s,emptyTitle:r="暂无资产",emptyDescription:i="转入资产后将显示在这里",emptyAction:u,className:c,testId:d}){return t?p.jsx(dt,{count:3,...c&&{className:c}}):e.length===0?p.jsx(ct,{...d&&{testId:`${d}-empty`},title:r,description:i,...u&&{action:u},icon:p.jsx("svg",{className:"size-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),...c&&{className:c}}):p.jsx("div",{...d&&{"data-testid":d},className:M("space-y-1",c),children:e.map(o=>p.jsx(qe,{token:o,testId:d?`token-item-${o.chain}-${o.symbol}`:void 0,showChange:n,loading:a,...s&&{onClick:()=>s(o)}},`${o.chain}-${o.symbol}`))})}Be.__docgenInfo={description:"",methods:[],displayName:"TokenList",props:{tokens:{required:!0,tsType:{name:"Array",elements:[{name:"TokenInfo"}],raw:"TokenInfo[]"},description:""},loading:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"Show skeleton loading state (no tokens yet)",defaultValue:{value:"false",computed:!1}},refreshing:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"Show balance refresh animation (tokens exist but refreshing)",defaultValue:{value:"false",computed:!1}},showChange:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"",defaultValue:{value:"false",computed:!1}},onTokenClick:{required:!1,tsType:{name:"union",raw:"((token: TokenInfo) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},emptyTitle:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"",defaultValue:{value:"'暂无资产'",computed:!1}},emptyDescription:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"",defaultValue:{value:"'转入资产后将显示在这里'",computed:!1}},emptyAction:{required:!1,tsType:{name:"union",raw:"React.ReactNode | undefined",elements:[{name:"ReactReactNode",raw:"React.ReactNode"},{name:"undefined"}]},description:""},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},testId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""}}};function re({feature:e,reason:t,className:a}){return p.jsx("div",{className:M("rounded-lg border border-yellow-200 bg-yellow-50 dark:border-yellow-900/50 dark:bg-yellow-950/20 px-4 py-3",a),"data-testid":"provider-fallback-warning",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(Tt,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5"}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:[e," query failed"]}),p.jsx("p",{className:"mt-1 text-xs text-yellow-700 dark:text-yellow-300/80",children:"All configured providers failed. Showing default value."}),t&&p.jsxs("details",{className:"mt-2",children:[p.jsx("summary",{className:"text-xs text-yellow-600 dark:text-yellow-400 cursor-pointer hover:underline",children:"Technical details"}),p.jsx("p",{className:"mt-1 text-xs text-yellow-600 dark:text-yellow-400 font-mono break-all",children:t})]})]})]})})}re.__docgenInfo={description:"",methods:[],displayName:"ProviderFallbackWarning",props:{feature:{required:!0,tsType:{name:"string"},description:""},reason:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};function ke({chainId:e,chainName:t,tokens:a,transactions:n,tokensLoading:s=!1,transactionsLoading:r=!1,tokensRefreshing:i=!1,tokensSupported:u=!0,tokensFallbackReason:c,transactionsSupported:d=!0,transactionsFallbackReason:o,onTokenClick:h,onTransactionClick:m,className:f,testId:b="wallet-address-portfolio"}){const{t:g}=ie(["home","transaction"]),[O,R]=T.useState("assets"),y=t??e;return p.jsx("div",{"data-testid":b,className:f,children:p.jsx(gt,{activeTab:O,onTabChange:R,className:"h-full",testIdPrefix:`${b}-tabs`,children:A=>A==="assets"?p.jsxs("div",{className:"p-4","data-testid":`${b}-assets-panel`,children:[!u&&!s&&p.jsx(re,{feature:"Token balance",reason:c,className:"mb-4"}),p.jsx(Be,{tokens:a,loading:s,refreshing:i,onTokenClick:h,emptyTitle:g("home:wallet.noAssets"),emptyDescription:g("home:wallet.noAssetsOnChain",{chain:y}),testId:`${b}-token-list`})]}):p.jsxs("div",{className:"p-4","data-testid":`${b}-history-panel`,children:[!d&&!r&&p.jsx(re,{feature:"Transaction history",reason:o,className:"mb-4"}),p.jsx(ft,{transactions:n,loading:r,onTransactionClick:m,emptyTitle:g("transaction:history.emptyTitle"),emptyDescription:g("transaction:history.emptyDesc"),testId:`${b}-transaction-list`})]})})})}ke.__docgenInfo={description:"",methods:[],displayName:"WalletAddressPortfolioView",props:{chainId:{required:!0,tsType:{name:"ChainType"},description:""},chainName:{required:!1,tsType:{name:"string"},description:""},tokens:{required:!0,tsType:{name:"Array",elements:[{name:"TokenInfo"}],raw:"TokenInfo[]"},description:""},transactions:{required:!0,tsType:{name:"Array",elements:[{name:"TransactionInfo"}],raw:"TransactionInfo[]"},description:""},tokensLoading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},transactionsLoading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},tokensRefreshing:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},tokensSupported:{required:!1,tsType:{name:"boolean"},description:"是否成功查询到 token 数据（false 表示 fallback）",defaultValue:{value:"true",computed:!1}},tokensFallbackReason:{required:!1,tsType:{name:"string"},description:""},transactionsSupported:{required:!1,tsType:{name:"boolean"},description:"是否成功查询到交易数据（false 表示 fallback）",defaultValue:{value:"true",computed:!1}},transactionsFallbackReason:{required:!1,tsType:{name:"string"},description:""},onTokenClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(token: TokenInfo) => void",signature:{arguments:[{type:{name:"TokenInfo"},name:"token"}],return:{name:"void"}}},description:""},onTransactionClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(tx: TransactionInfo) => void",signature:{arguments:[{type:{name:"TransactionInfo"},name:"tx"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""},testId:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'wallet-address-portfolio'",computed:!1}}}};function Bt({chainId:e,address:t,chainName:a,onTokenClick:n,onTransactionClick:s,className:r,testId:i}){const u=ot(),c=T.useMemo(()=>u.snapshot?X(e):null,[e,u.snapshot]),d=tt.getDecimals(e),o=!!c&&(c.supportsTokenBalances||c.supportsNativeBalance),h=!!c?.supportsTransactionHistory,m=ye({queryKey:["address-token-balances",e,t,!!c],queryFn:async()=>{const O=u.snapshot?X(e):null;if(!O)return{data:[],supported:!1,fallbackReason:"Provider not ready"};const R=await O.getTokenBalances(t);if(Q(R)&&R.data.length>0)return{data:R.data.map(A=>({symbol:A.symbol,name:A.name,balance:A.amount.toFormatted(),decimals:A.amount.decimals,chain:e})),supported:!0};const y=await O.getNativeBalance(t);return Q(y)?{data:[{symbol:y.data.symbol,name:y.data.symbol,balance:y.data.amount.toFormatted(),decimals:y.data.amount.decimals,chain:e}],supported:!0}:{data:[{symbol:y.data.symbol,name:y.data.symbol,balance:y.data.amount.toFormatted(),decimals:y.data.amount.decimals,chain:e}],supported:!1,fallbackReason:y.reason}},enabled:o,staleTime:3e4}),f=ye({queryKey:["address-transactions",e,t,!!c],queryFn:async()=>{const O=u.snapshot?X(e):null;if(!O)return{data:[],supported:!1,fallbackReason:"Provider not ready"};const R=await O.getTransactionHistory(t,20);return Q(R)?{data:R.data.map(y=>kt(y,e,d)),supported:!0}:{data:[],supported:!1,fallbackReason:R.reason}},enabled:h,staleTime:3e4}),b=!o||m.isLoading,g=!h||f.isLoading;return p.jsx(ke,{chainId:e,chainName:a,tokens:m.data?.data??[],transactions:f.data?.data??[],tokensLoading:b,transactionsLoading:g,tokensRefreshing:m.isFetching&&!m.isLoading,tokensSupported:m.data?.supported??!0,tokensFallbackReason:m.data?.fallbackReason,transactionsSupported:f.data?.supported??!0,transactionsFallbackReason:f.data?.fallbackReason,onTokenClick:n,onTransactionClick:s,className:r,testId:i})}function kt(e,t,a){const n=e.direction==="out"?e.to:e.from,s=e.assets.find(d=>d.assetType==="native"||d.assetType==="token"),r=s?s.value:"0",i=s?s.symbol:"",u=s?s.decimals:a,c=xe(e.action,e.direction);return{id:e.hash,type:c,status:e.status,amount:H.fromRaw(r,u,i),symbol:i,address:n,timestamp:new Date(e.timestamp),hash:e.hash,chain:t}}Bt.__docgenInfo={description:"",methods:[],displayName:"WalletAddressPortfolioFromProvider",props:{chainId:{required:!0,tsType:{name:"ChainType"},description:""},address:{required:!0,tsType:{name:"string"},description:""},chainName:{required:!1,tsType:{name:"string"},description:""},onTokenClick:{required:!1,tsType:{name:"WalletAddressPortfolioViewProps['onTokenClick']",raw:"WalletAddressPortfolioViewProps['onTokenClick']"},description:""},onTransactionClick:{required:!1,tsType:{name:"WalletAddressPortfolioViewProps['onTransactionClick']",raw:"WalletAddressPortfolioViewProps['onTransactionClick']"},description:""},className:{required:!1,tsType:{name:"string"},description:""},testId:{required:!1,tsType:{name:"string"},description:""}}};const Pt=v(["fingerprint","face","iris","none"]),Dt=_({isAvailable:k(),biometricType:Pt,error:l().optional()}),Ut=_({title:l().optional(),description:l().optional(),cancelText:l().optional(),maxAttempts:L().optional(),fallbackToPassword:k().optional()}).optional(),Ft=_({success:k(),errorMessage:l().optional()}),jt=I("biometric",e=>e.description("生物识别服务 - 指纹/面容验证").api("isAvailable",{description:"检查生物识别是否可用",input:E(),output:Dt}).api("verify",{description:"验证生物识别",input:Ut,output:Ft}));jt.impl({async isAvailable(){if(window.PublicKeyCredential)try{const e=await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();return{isAvailable:e,biometricType:e?"fingerprint":"none"}}catch{return{isAvailable:!1,biometricType:"none"}}return{isAvailable:!1,biometricType:"none"}},async verify(e){return console.warn("Biometric not available in web, falling back to password"),{success:!1,errorMessage:"Biometric authentication not available in web browser"}}});const Vt=v(["light","medium","heavy","success","warning","error"]).optional(),Ht=I("haptics",e=>e.description("触觉反馈服务").api("impact",{description:"触发触觉反馈",input:Vt,output:E()}).api("vibrate",{description:"振动指定时长",input:L().optional(),output:E()})),fn=Ht.impl({async impact(e){if("vibrate"in navigator){const t={light:10,medium:20,heavy:30,success:[10,50,10],warning:[20,30,20],error:[30,50,30,50,30]};navigator.vibrate(t[e??"medium"])}},async vibrate(e){"vibrate"in navigator&&navigator.vibrate(e??100)}}),qt=I("secureStorage",e=>e.description("安全存储服务 - 加密存储键值对").api("set",{description:"存储数据",input:_({key:l(),value:l()}),output:E()}).api("get",{description:"获取数据",input:_({key:l()}),output:l().nullable()}).api("remove",{description:"删除数据",input:_({key:l()}),output:E()}).api("has",{description:"检查是否存在",input:_({key:l()}),output:k()}).api("clear",{description:"清空存储",input:E(),output:E()})),F="bfm_secure_";qt.impl({async set({key:e,value:t}){localStorage.setItem(F+e,t)},async get({key:e}){return localStorage.getItem(F+e)},async remove({key:e}){localStorage.removeItem(F+e)},async has({key:e}){return localStorage.getItem(F+e)!==null},async clear(){const e=[];for(let t=0;t<localStorage.length;t++){const a=localStorage.key(t);a?.startsWith(F)&&e.push(a)}e.forEach(t=>localStorage.removeItem(t))}});const Gt=_({content:l(),format:l().optional()}),Wt=I("camera",e=>e.description("相机服务 - 扫描二维码").api("scanQRCode",{description:"扫描二维码",input:E(),output:Gt}).api("checkPermission",{description:"检查相机权限",input:E(),output:k()}).api("requestPermission",{description:"请求相机权限",input:E(),output:k()})),gn=Wt.impl({async scanQRCode(){throw new Error("QR scanning not implemented in web.")},async checkPermission(){try{return(await navigator.permissions.query({name:"camera"})).state==="granted"}catch{return!1}},async requestPermission(){try{return(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(t=>t.stop()),!0}catch{return!1}}}),Jt=_({base:l(),date:l(),rates:D(l(),L())}),zt=I("currencyExchange",e=>e.description("货币兑换服务 - 获取汇率").api("getExchangeRates",{description:"获取汇率",input:_({baseCurrency:l(),targetCurrencies:U(l())}),output:Jt})),j={CNY:7.24,EUR:.95,JPY:149.5,KRW:1320,GBP:.79,AUD:1.53,CAD:1.36,CHF:.88,HKD:7.82,SGD:1.34,TWD:31.5,THB:35.2,INR:83.5,MYR:4.72,PHP:56.2};function Qt(){return new Date().toISOString().split("T")[0]??new Date().toISOString().slice(0,10)}function $t(e,t){const a={};if(e==="USD"){for(const r of t)r==="USD"?a[r]=1:j[r]!==void 0&&(a[r]=j[r]);return a}const n=j[e];if(n===void 0)return a;const s=1/n;for(const r of t)r===e?a[r]=1:r==="USD"?a[r]=s:j[r]!==void 0&&(a[r]=j[r]*s);return a}const Kt=zt.impl({async getExchangeRates({baseCurrency:e,targetCurrencies:t}){return await new Promise(a=>setTimeout(a,100)),{base:e,date:Qt(),rates:$t(e,t)}}});T.createContext(null);const Zt=_({appId:l(),appName:l(),appIcon:l(),origin:l()});I("authorize",e=>e.description("授权适配器").api("getCallerAppInfo",_({eventId:l()}),Zt).api("respondWith",_({eventId:l(),path:l(),data:pt()}),E()).api("removeEventId",_({eventId:l()}),E()).method("isAvailable",E(),k()));const x=Ie(e=>e instanceof H),Xt=D(l(),D(l(),_({assetType:l(),logo:l().optional(),supportChain:D(l(),_({assetType:l(),contract:l().optional(),decimals:L()}).optional())}))),Yt=D(l(),D(l(),l())),ea=_({chain:v(["BFMeta","BFChain","CCChain","PMChain"]),assetType:l(),stakedAmount:x,stakedFiat:l(),availableChains:U(v(["ETH","BSC","TRON"])),logoUrl:l().optional(),totalMinted:x,totalCirculation:x,totalBurned:x,totalStaked:x,externalChain:v(["ETH","BSC","TRON"]),externalAssetType:l()}),z=_({id:l(),type:v(["mint","burn"]),sourceChain:l(),sourceAsset:l(),sourceAmount:x,targetChain:l(),targetAsset:l(),targetAmount:x,status:v(["pending","confirming","confirmed","failed"]),txHash:l().optional(),createdAt:L(),updatedAt:L(),errorMessage:l().optional()}),ta=_({sourceChain:v(["ETH","BSC","TRON"]),sourceAsset:l(),amount:x,targetChain:v(["BFMeta","BFChain","CCChain","PMChain"]),targetAsset:l()}),aa=_({sourceChain:v(["BFMeta","BFChain","CCChain","PMChain"]),sourceAsset:l(),amount:x,targetChain:v(["ETH","BSC","TRON"]),targetAsset:l()}),na=I("staking",e=>e.description("质押服务").api("getRechargeConfig",E(),Xt).api("getLogoUrls",E(),Yt).api("getOverview",E(),U(ea)).api("getTransactions",E(),U(z)).api("getTransaction",_({id:l()}),z.nullable()).api("submitMint",ta,z).api("submitBurn",aa,z)),Tn=na.impl({async getRechargeConfig(){throw new Error("StakingService.getRechargeConfig not implemented")},async getLogoUrls(){throw new Error("StakingService.getLogoUrls not implemented")},async getOverview(){throw new Error("StakingService.getOverview not implemented")},async getTransactions(){throw new Error("StakingService.getTransactions not implemented")},async getTransaction(){throw new Error("StakingService.getTransaction not implemented")},async submitMint(){throw new Error("StakingService.submitMint not implemented")},async submitBurn(){throw new Error("StakingService.submitBurn not implemented")}}),Oe=Ie(e=>e instanceof H),Pe=v(["send","receive","signature","stake","unstake","destroy","gift","grab","trust","signFor","emigrate","immigrate","exchange","swap","issueAsset","increaseAsset","mint","issueEntity","destroyEntity","locationName","dapp","certificate","approve","interaction","mark","other"]),Ee=_({id:l(),type:Pe,status:v(["pending","confirmed","failed"]),amount:Oe,symbol:l(),decimals:L(),address:l(),timestamp:mt(),hash:l().optional(),chain:l(),fee:Oe.optional(),feeSymbol:l().optional(),feeDecimals:L().optional(),blockNumber:L().optional(),confirmations:L().optional(),from:l().optional(),to:l().optional(),action:st.optional(),direction:nt.optional(),assets:U(rt).optional(),contract:at.optional()}),sa=_({chain:l().optional(),period:v(["7d","30d","90d","all"]).optional(),type:Pe.or(ht("all")).optional(),status:v(["pending","confirmed","failed","all"]).optional()}),ra=I("transaction",e=>e.description("交易服务").api("getHistory",_({walletId:l(),filter:sa.optional()}),U(Ee)).api("getTransaction",_({id:l()}),Ee.nullable()).api("refresh",_({walletId:l()}),E())),K=new Map;function ia(e){const[t,a]=e.split("--");return!t||!a?null:{chainId:t,hash:a}}async function Re(e,t){await fe.initialize();const a=await Ne(),n=lt(a),s=new Map(n.map(o=>[o.id,o])),r=await fe.getWalletChainAddresses(e),i=t?.chain&&t.chain!=="all"?t.chain:null,u=r.flatMap(o=>{if(i&&o.chain!==i)return[];const h=s.get(o.chain)??Le(a,o.chain);if(!h||!h.enabled)return[];try{return we(o.chain).getTransactionHistory(o.address,50).then(f=>Q(f)?f.data.map(b=>De(b,h)):[])}catch{return[]}});let d=(await Promise.all(u)).flat();t&&(d=ua(d,t.chain),d=la(d,t.period),d=ca(d,t.type),d=da(d,t.status)),d.sort((o,h)=>h.timestamp.getTime()-o.timestamp.getTime()),K.clear();for(const o of d)K.set(o.id,o);return d}function oa(e,t){const a=e.assets.find(n=>n.assetType==="native"||n.assetType==="token");return a?{value:a.value,symbol:a.symbol,decimals:a.decimals}:{value:"0",symbol:t.symbol,decimals:t.decimals}}function De(e,t){const a=xe(e.action,e.direction),n=oa(e,{symbol:t.symbol,decimals:t.decimals}),r=e.action==="transfer"?e.direction==="out"?e.to:e.from:e.contract?.address??e.to??e.from;return{id:`${t.id}--${e.hash}`,type:a,status:e.status,amount:H.fromRaw(n.value,n.decimals,n.symbol),symbol:n.symbol,decimals:n.decimals,address:r,timestamp:new Date(e.timestamp),hash:e.hash,chain:t.id,blockNumber:e.blockNumber?Number(e.blockNumber):void 0,confirmations:void 0,fee:e.fee?H.fromRaw(e.fee.value,e.fee.decimals,e.fee.symbol):void 0,feeSymbol:e.fee?.symbol,feeDecimals:e.fee?.decimals,from:e.from,to:e.to,action:e.action,direction:e.direction,assets:e.assets,contract:e.contract}}function la(e,t){if(!t||t==="all")return e;const a=t==="7d"?7:t==="30d"?30:90,n=Date.now()-a*24*60*60*1e3;return e.filter(s=>s.timestamp.getTime()>=n)}function ca(e,t){return!t||t==="all"?e:e.filter(a=>a.type===t)}function da(e,t){return!t||t==="all"?e:e.filter(a=>a.status===t)}function ua(e,t){return!t||t==="all"?e:e.filter(a=>a.chain===t)}const bn=ra.impl({async getHistory({walletId:e,filter:t}){return Re(e,t)},async getTransaction({id:e}){const t=K.get(e);if(t)return t;const a=ia(e);if(!a)return null;const n=await Ne(),s=Le(n,a.chainId);if(!s||!s.enabled)return null;try{const r=we(s.id);if(!r.getTransaction)return null;const i=await r.getTransaction(a.hash);if(!i)return null;const u=De(i,s);return K.set(u.id,u),u}catch(r){if(r instanceof it)throw r;return null}},async refresh({walletId:e}){await Re(e,{chain:"all",period:"all",type:"all",status:"all"})}});var pa=Object.create,le=Object.defineProperty,ma=Object.getOwnPropertyDescriptor,Ue=Object.getOwnPropertyNames,ha=Object.getPrototypeOf,fa=Object.prototype.hasOwnProperty,ce=(e,t)=>function(){return t||(0,e[Ue(e)[0]])((t={exports:{}}).exports,t),t.exports},ga=(e,t)=>{for(var a in t)le(e,a,{get:t[a],enumerable:!0})},Ta=(e,t,a,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Ue(t))!fa.call(e,s)&&s!==a&&le(e,s,{get:()=>t[s],enumerable:!(n=ma(t,s))||n.enumerable});return e},ba=(e,t,a)=>(a=e!=null?pa(ha(e)):{},Ta(le(a,"default",{value:e,enumerable:!0}),e)),_a=ce({"node_modules/is-object/index.js"(e,t){t.exports=function(n){return typeof n=="object"&&n!==null}}}),ya=ce({"node_modules/is-window/index.js"(e,t){t.exports=function(a){if(a==null)return!1;var n=Object(a);return n===n.window}}}),Oa=ce({"node_modules/is-dom/index.js"(e,t){var a=_a(),n=ya();function s(r){return!a(r)||!n(window)||typeof window.Node!="function"?!1:typeof r.nodeType=="number"&&typeof r.nodeName=="string"}t.exports=s}}),Fe={};ga(Fe,{chromeDark:()=>Ea,chromeLight:()=>Ra});var Ea={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"rgb(36, 36, 36)",BASE_COLOR:"rgb(213, 213, 213)",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(227, 110, 236)",OBJECT_VALUE_NULL_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_REGEXP_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_STRING_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_NUMBER_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_BOOLEAN_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(85, 106, 242)",HTML_TAG_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(155, 187, 220)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(242, 151, 102)",HTML_COMMENT_COLOR:"rgb(137, 137, 137)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"rgb(145, 145, 145)",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"rgb(85, 85, 85)",TABLE_TH_BACKGROUND_COLOR:"rgb(44, 44, 44)",TABLE_TH_HOVER_COLOR:"rgb(48, 48, 48)",TABLE_SORT_ICON_COLOR:"black",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 0) 50%, rgba(51, 139, 255, 0.0980392) 50%, rgba(51, 139, 255, 0.0980392))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},Ra={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"white",BASE_COLOR:"black",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(136, 19, 145)",OBJECT_VALUE_NULL_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_REGEXP_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_STRING_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_NUMBER_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_BOOLEAN_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(13, 34, 170)",HTML_TAG_COLOR:"rgb(168, 148, 166)",HTML_TAGNAME_COLOR:"rgb(136, 18, 128)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(153, 69, 0)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(26, 26, 166)",HTML_COMMENT_COLOR:"rgb(35, 110, 37)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"#6e6e6e",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"#aaa",TABLE_TH_BACKGROUND_COLOR:"#eee",TABLE_TH_HOVER_COLOR:"hsla(0, 0%, 90%, 1)",TABLE_SORT_ICON_COLOR:"#6e6e6e",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(to bottom, white, white 50%, rgb(234, 243, 255) 50%, rgb(234, 243, 255))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},je=T.createContext([{},()=>{}]),Y={WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",OUserSelect:"none",userSelect:"none"},va=e=>({DOMNodePreview:{htmlOpenTag:{base:{color:e.HTML_TAG_COLOR},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM},htmlAttributeName:{color:e.HTML_ATTRIBUTE_NAME_COLOR},htmlAttributeValue:{color:e.HTML_ATTRIBUTE_VALUE_COLOR}},htmlCloseTag:{base:{color:e.HTML_TAG_COLOR},offsetLeft:{marginLeft:-e.TREENODE_PADDING_LEFT},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM}},htmlComment:{color:e.HTML_COMMENT_COLOR},htmlDoctype:{color:e.HTML_DOCTYPE_COLOR}},ObjectPreview:{objectDescription:{fontStyle:"italic"},preview:{fontStyle:"italic"},arrayMaxProperties:e.OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES,objectMaxProperties:e.OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES},ObjectName:{base:{color:e.OBJECT_NAME_COLOR},dimmed:{opacity:.6}},ObjectValue:{objectValueNull:{color:e.OBJECT_VALUE_NULL_COLOR},objectValueUndefined:{color:e.OBJECT_VALUE_UNDEFINED_COLOR},objectValueRegExp:{color:e.OBJECT_VALUE_REGEXP_COLOR},objectValueString:{color:e.OBJECT_VALUE_STRING_COLOR},objectValueSymbol:{color:e.OBJECT_VALUE_SYMBOL_COLOR},objectValueNumber:{color:e.OBJECT_VALUE_NUMBER_COLOR},objectValueBoolean:{color:e.OBJECT_VALUE_BOOLEAN_COLOR},objectValueFunctionPrefix:{color:e.OBJECT_VALUE_FUNCTION_PREFIX_COLOR,fontStyle:"italic"},objectValueFunctionName:{fontStyle:"italic"}},TreeView:{treeViewOutline:{padding:0,margin:0,listStyleType:"none"}},TreeNode:{treeNodeBase:{color:e.BASE_COLOR,backgroundColor:e.BASE_BACKGROUND_COLOR,lineHeight:e.TREENODE_LINE_HEIGHT,cursor:"default",boxSizing:"border-box",listStyle:"none",fontFamily:e.TREENODE_FONT_FAMILY,fontSize:e.TREENODE_FONT_SIZE},treeNodePreviewContainer:{},treeNodePlaceholder:{whiteSpace:"pre",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT,...Y},treeNodeArrow:{base:{color:e.ARROW_COLOR,display:"inline-block",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT,...parseFloat(e.ARROW_ANIMATION_DURATION)>0?{transition:`transform ${e.ARROW_ANIMATION_DURATION} ease 0s`}:{},...Y},expanded:{WebkitTransform:"rotateZ(90deg)",MozTransform:"rotateZ(90deg)",transform:"rotateZ(90deg)"},collapsed:{WebkitTransform:"rotateZ(0deg)",MozTransform:"rotateZ(0deg)",transform:"rotateZ(0deg)"}},treeNodeChildNodesContainer:{margin:0,paddingLeft:e.TREENODE_PADDING_LEFT}},TableInspector:{base:{color:e.BASE_COLOR,position:"relative",border:`1px solid ${e.TABLE_BORDER_COLOR}`,fontFamily:e.BASE_FONT_FAMILY,fontSize:e.BASE_FONT_SIZE,lineHeight:"120%",boxSizing:"border-box",cursor:"default"}},TableInspectorHeaderContainer:{base:{top:0,height:"17px",left:0,right:0,overflowX:"hidden"},table:{tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",height:"100%",width:"100%",margin:0}},TableInspectorDataContainer:{tr:{display:"table-row"},td:{boxSizing:"border-box",border:"none",height:"16px",verticalAlign:"top",padding:"1px 4px",WebkitUserSelect:"text",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px"},div:{position:"static",top:"17px",bottom:0,overflowY:"overlay",transform:"translateZ(0)",left:0,right:0,overflowX:"hidden"},table:{positon:"static",left:0,top:0,right:0,bottom:0,borderTop:"0 none transparent",margin:0,backgroundImage:e.TABLE_DATA_BACKGROUND_IMAGE,backgroundSize:e.TABLE_DATA_BACKGROUND_SIZE,tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",width:"100%",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorTH:{base:{position:"relative",height:"auto",textAlign:"left",backgroundColor:e.TABLE_TH_BACKGROUND_COLOR,borderBottom:`1px solid ${e.TABLE_BORDER_COLOR}`,fontWeight:"normal",verticalAlign:"middle",padding:"0 4px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px",":hover":{backgroundColor:e.TABLE_TH_HOVER_COLOR}},div:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorLeftBorder:{none:{borderLeft:"none"},solid:{borderLeft:`1px solid ${e.TABLE_BORDER_COLOR}`}},TableInspectorSortIcon:{display:"block",marginRight:3,width:8,height:7,marginTop:-7,color:e.TABLE_SORT_ICON_COLOR,fontSize:12,...Y}}),Ca="chromeLight",Aa=T.createContext(va(Fe[Ca])),Ve=e=>T.useContext(Aa)[e],Sa=({expanded:e,styles:t})=>C.createElement("span",{style:{...t.base,...e?t.expanded:t.collapsed}},"▶"),wa=T.memo(e=>{e={expanded:!0,nodeRenderer:({name:o})=>C.createElement("span",null,o),onClick:()=>{},shouldShowArrow:!1,shouldShowPlaceholder:!0,...e};const{expanded:t,onClick:a,children:n,nodeRenderer:s,title:r,shouldShowArrow:i,shouldShowPlaceholder:u}=e,c=Ve("TreeNode"),d=s;return C.createElement("li",{"aria-expanded":t,role:"treeitem",style:c.treeNodeBase,title:r},C.createElement("div",{style:c.treeNodePreviewContainer,onClick:a},i||T.Children.count(n)>0?C.createElement(Sa,{expanded:t,styles:c.treeNodeArrow}):u&&C.createElement("span",{style:c.treeNodePlaceholder}," "),C.createElement(d,{...e})),C.createElement("ol",{role:"group",style:c.treeNodeChildNodesContainer},t?n:void 0))}),Z="$",ve="*";function $(e,t){return!t(e).next().done}var Na=e=>Array.from({length:e},(t,a)=>[Z].concat(Array.from({length:a},()=>"*")).join(".")),La=(e,t,a,n,s)=>{const r=[].concat(Na(n)).concat(a).filter(u=>typeof u=="string"),i=[];return r.forEach(u=>{const c=u.split("."),d=(o,h,m)=>{if(m===c.length){i.push(h);return}const f=c[m];if(m===0)$(o,t)&&(f===Z||f===ve)&&d(o,Z,m+1);else if(f===ve)for(const{name:b,data:g}of t(o))$(g,t)&&d(g,`${h}.${b}`,m+1);else{const b=o[f];$(b,t)&&d(b,`${h}.${f}`,m+1)}};d(e,"",0)}),i.reduce((u,c)=>(u[c]=!0,u),{...s})},He=T.memo(e=>{const{data:t,dataIterator:a,path:n,depth:s,nodeRenderer:r}=e,[i,u]=T.useContext(je),c=$(t,a),d=!!i[n],o=T.useCallback(()=>c&&u(h=>({...h,[n]:!d})),[c,u,n,d]);return C.createElement(wa,{expanded:d,onClick:o,shouldShowArrow:c,shouldShowPlaceholder:s>0,nodeRenderer:r,...e},d?[...a(t)].map(({name:h,data:m,...f})=>C.createElement(He,{name:h,data:m,depth:s+1,path:`${n}.${h}`,key:h,dataIterator:a,nodeRenderer:r,...f})):null)});T.memo(({name:e,data:t,dataIterator:a,nodeRenderer:n,expandPaths:s,expandLevel:r})=>{const i=Ve("TreeView"),u=T.useState({}),[,c]=u;return T.useLayoutEffect(()=>c(d=>La(t,a,s,r,d)),[t,a,s,r]),C.createElement(je.Provider,{value:u},C.createElement("ol",{role:"tree",style:i.treeViewOutline},C.createElement(He,{name:e,data:t,dataIterator:a,depth:0,path:Z,nodeRenderer:n})))});ba(Oa());const xa=300*1e3,Ce=new Map;function B(e){return e.trim().toUpperCase()}function Ae(e,t){const a=B(e),n=[...new Set(t.map(B))].filter(s=>s!==a).sort().join(",");return`${a}|${n}`}function Ia(e,t){const a=T.useMemo(()=>B(e),[e]),n=T.useMemo(()=>[...new Set(t.map(B))],[t.join(",")]),s=T.useMemo(()=>Ae(a,n),[a,n.join(",")]),[r,i]=T.useState({data:null,isLoading:n.length>0,error:null,updatedAt:null}),u=T.useCallback(async(c,d)=>{const o=B(c),h=[...new Set(d.map(B))].filter(g=>g!==o),m=Ae(o,h),f=Date.now(),b=Ce.get(m);if(b&&f-b.updatedAt<xa){i({data:b.data,isLoading:!1,error:null,updatedAt:b.updatedAt});return}if(h.length===0){const g=new Date().toISOString().split("T")[0],O={base:o,date:g??new Date().toISOString().slice(0,10),rates:{}};i({data:O,isLoading:!1,error:null,updatedAt:f});return}i(g=>({...g,isLoading:!0,error:null}));try{const g=await Kt.getExchangeRates({baseCurrency:o,targetCurrencies:h});Ce.set(m,{data:g,updatedAt:f}),i({data:g,isLoading:!1,error:null,updatedAt:f})}catch(g){i(O=>({...O,isLoading:!1,error:g instanceof Error?g.message:"Failed to fetch exchange rates"}))}},[]);return T.useEffect(()=>{u(a,n)},[s,a,n,u]),r}function Ma(e,t){const a=B(t);return e?.rates[a]}function Ba(e){const t=e.replaceAll(",","").trim();if(t.length===0)return null;const a=Number(t);return Number.isFinite(a)?a:null}function qe({token:e,onClick:t,showChange:a=!1,loading:n=!1,className:s,testId:r}){const i=!!t,{t:u}=ie(["currency","common"]),c=Ke(),d=e.fiatValue!==void 0&&c!=="USD",{data:o,isLoading:h,error:m}=Ia("USD",d?[c]:[]),f=d?Ma(o,c):void 0,b=e.fiatValue!==void 0?Ba(e.fiatValue):null,g=e.fiatValue!==void 0?b!==null?String(b):e.fiatValue:void 0,O=c!=="USD"&&f!==void 0&&b!==null,R=O?he[c].symbol:he.USD.symbol,y=O&&b!==null?String(b*f):g,A=d&&!O?u(m?"exchange.error":h?"exchange.loading":"exchange.unavailable"):null;return p.jsxs("div",{...r&&{"data-testid":r},role:i?"button":void 0,tabIndex:i?0:void 0,onClick:t,onKeyDown:i?q=>q.key==="Enter"&&t?.():void 0,"aria-label":i?u("common:a11y.tokenDetails",{token:e.symbol}):void 0,className:M("@container flex items-center gap-3 rounded-xl p-3 transition-colors",i&&"hover:bg-muted/50 active:bg-muted cursor-pointer",s),children:[p.jsxs("div",{className:"relative",children:[p.jsx(et,{symbol:e.symbol,chainId:e.chain,imageUrl:e.icon,size:"lg"}),p.jsx(ne,{chain:e.chain,size:"sm",className:"ring-background absolute -right-0.5 -bottom-0.5 size-4 text-[8px] ring-2"})]}),p.jsxs("div",{className:"min-w-0 flex-1",children:[p.jsx("p",{className:"truncate text-sm font-medium @xs:text-base",children:e.symbol}),p.jsx("p",{className:"text-muted-foreground truncate text-xs @xs:text-sm",children:e.name})]}),p.jsxs("div",{className:"shrink-0 text-right",children:[p.jsx(ut,{value:e.balance,loading:n,decimals:e.decimals??8,fixedDecimals:!0,className:"text-sm @xs:text-base"}),y&&!n&&p.jsxs("p",{className:"text-muted-foreground text-xs @xs:text-sm",title:A??void 0,children:["≈ ",R,p.jsx(ge,{value:y,size:"xs",className:"inline"}),a&&e.change24h!==void 0&&p.jsx(ge,{value:e.change24h,sign:"always",color:"auto",size:"xs",className:"ml-1 inline"}),a&&e.change24h!==void 0&&"%"]}),n&&p.jsx("p",{className:"text-muted-foreground animate-pulse text-xs @xs:text-sm",children:"≈ --"})]})]})}qe.__docgenInfo={description:"",methods:[],displayName:"TokenItem",props:{token:{required:!0,tsType:{name:"TokenInfo"},description:""},onClick:{required:!1,tsType:{name:"union",raw:"(() => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},showChange:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"",defaultValue:{value:"false",computed:!1}},loading:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"Whether balance is loading (shows animation)",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},testId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""}}};export{Mt as C,qe as T,ke as W,Be as a,Bt as b,gn as c,fn as h,Tn as s,bn as t,ye as u};
