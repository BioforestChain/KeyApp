const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./snapdom-CO8q8LPW.js","./preload-helper-PPVm8Dsz.js","./index-DpMoyOsT.js","./schemas-B18CumQY.js","./iframe-Dp2Ali2n.js","./iframe-C8gzpSAu.css","./index-DLitWbhY.js","./amount-BQsqQYGO.js","./index-D0E7N0oa.js","./bioforest-Jv6nvRbL.js"])))=>i.map(i=>d[i]);
import{g as Hd,r as l,j as e,R as fa,u as Ne,aj as Ei,ak as An,q as ge,al as Lt,w as Mi,am as qd,x as ar}from"./iframe-Dp2Ali2n.js";import{a as In,c as R}from"./utils-4perknFd.js";import{u as Ri,d as Zn,W as Ud}from"./useWalletTheme-BjT5vyFJ.js";import{W as Vd,u as zi}from"./wallet-card-carousel-DYUFKVXY.js";import{W as Di}from"./wallet-card-_SaARk4t.js";import{B as H}from"./button-fDD5SNuy.js";import{f as me,b as Xt,W as Tn,g as Pn,d as bs,a as js,c as pa,w as we,e as _s,u as ha,h as Jd,i as Kd,j as Vt}from"./user-profile-Cm8tk7wk.js";import{h as Gd,u as tt,b as qe,d as Es,c as xa,e as rr,j as Qd,k as Yd,l as Xd,m as Zd,f as Ht,n as Ms,o as eu}from"./index-DLitWbhY.js";import{u as tu,a as su,b as gt,c as ke,d as ze,e as ga,f as Li,p as nu,T as au,g as va}from"./TabBar-fm7WlSQI.js";import{s as fs}from"./index-D0E7N0oa.js";import{g as ru,v as Bi,R as iu,I as ou,a as cu,b as lu,c as du}from"./recover-wallet-form-CxDm3NGJ.js";import{S as uu}from"./swiper-sync-context-D5eM91J8.js";import{h as mu,c as fu,W as pu,C as ya,s as Et}from"./token-item-DY8SF0ZK.js";import{L as Ce,G as Me,A as Mt,P as it,I as Rs,b as Dn}from"./LoadingSpinner-eMDvfvYX.js";import{u as L}from"./useTranslation-BYYU4Ehv.js";import{I as Pe}from"./IconAlertTriangle-BbxB4FvF.js";import{I as Bt}from"./IconTrash-ueM4-kgu.js";import{c as ba,I as Oi}from"./web-D1cHMkfF.js";import{t as hu}from"./web-DNtYQgRC.js";import{g as Qt,i as tn,l as sn,s as nn,u as Ee,A as Pt,v as Je,B as xu,a as gu,C as vu}from"./bioforest-Jv6nvRbL.js";import{p as ct,n as cs,a as yu}from"./notification-BwZmGlco.js";import{g as Ie,k as ts,c as bu,I as ju,N as Nu}from"./index-DpMoyOsT.js";import"./breakpoint-C1BNOfKS.js";import{T as Fi}from"./transaction-item-CpwArYuD.js";import{A as ne}from"./amount-BQsqQYGO.js";import{I as st}from"./IconPlus-DltJjy4q.js";import{c as ae}from"./createReactComponent-Bvc6i3j5.js";import{I as ln,b as Wi,c as Ln,d as _n,e as wu,g as Cu,f as ku,h as Su}from"./transaction-meta-1aK-BnJ2.js";import{I as Au,i as Iu,A as Tu}from"./address-input-BnGjl9HR.js";import{A as Ct}from"./amount-display-B7v7ryFA.js";import"./animated-number-Cu4fOHxm.js";import{T as Pu}from"./time-display-CxSfi9cM.js";import{F as _u,E as $i,C as ir}from"./copyable-text-DyLBGNNb.js";import{e as Rt,I as ja,H as ye,u as Eu,l as Hi,J as Mu,K as Ru,T as zu,L as Du,M as Lu,N as or,d as Bu,O as cr,P as lr,Q as dr,R as ur,S as mr,U as fr,V as pr,W as hr,X as xr,Y as gr,Z as vr,_ as Ou,$ as Fu}from"./index-CQX8fmH3.js";import{a as Na,g6 as wa,l as Qe,o as Ns,n as zt,s as q,e as Xe,b as Ye,fs as ss}from"./schemas-B18CumQY.js";import{I as Wu,a as $u}from"./my-apps-page-CLVbwRoJ.js";import{E as Hu,c as Ot}from"./ecosystem-desktop-BwiDarOw.js";import"./miniapp-splash-screen-EFDcj1Wn.js";import"./swiper-BGfEJWqG.js";/* empty css                     */import{_ as ft}from"./preload-helper-PPVm8Dsz.js";import{P as U}from"./page-header-B0Evheqv.js";import{C as ns,I as qu}from"./contact-avatar---f4LX4c.js";import{I as Ae}from"./IconChevronRight-oM9Cyu7R.js";import{S as lt,a as dt,b as ut,c as mt,u as Uu,f as Vu,D as Ju,g as Ku,h as Gu,i as Qu,j as Yu,k as Xu,l as Zu,m as em,n as tm}from"./sheet-BRQtxJei.js";import{I as fe}from"./IconCheck-CuzQejSn.js";import{C as pt,a as Ca}from"./chain-icon-DhMbBswI.js";import{p as ht,P as Ft}from"./pattern-lock-CS1EzCTm.js";import{P as dn}from"./password-input-DKaP2Gxa.js";import{I as zs}from"./IconLock-DaMXQBAm.js";import{I as xt}from"./IconAlertCircle-DovZW3u3.js";import{F as ka}from"./fee-display-C7iikVW8.js";import{T as qi}from"./tx-status-display-DvViyYOT.js";import{I as Re}from"./input-BcHLGPu4.js";import{b as _t,i as sm,d as nm}from"./avatar-codec-BfuA4PgX.js";import{I as as}from"./IconRefresh-DCRGamP9.js";import{I as Ds}from"./IconSearch-CN46TqQC.js";import{I as Ls}from"./IconDownload-1B8qrEhF.js";import{W as am,r as rm}from"./wallet-mini-card-DNiu1N24.js";import{I as im,W as om}from"./wallet-list-By_oYD1L.js";import{C as Ui}from"./checkbox-Cy6Qxfnf.js";import{I as Vi,S as ws,a as Cs,b as ks,c as Ss,d as Dt,A as Ji}from"./asset-selector-ByO6lXMJ.js";import{I as Ki}from"./IconChevronDown-Duq0YtfH.js";import{p as Gi,g as Sa}from"./qr-parser-f-JRwPhw.js";import{c as Qi}from"./index-CGGnP-O6.js";import{g as cm,a as lm,b as dm}from"./scanner-validators-YRGmuXyx.js";import{I as Bs}from"./IconX-D_0sUCDD.js";import{I as Aa}from"./IconWallet-C8KAYvQ_.js";import{C as Ia}from"./contact-card-C9MLhued.js";import{I as be}from"./IconLoader2-CEDMx5ky.js";import{g as En,n as um,p as mm}from"./index-DRQXAVdd.js";import{I as fm}from"./IconApps-PUBiFjmV.js";import{I as Yi}from"./IconShieldCheck-u0XkfRs_.js";import{A as At}from"./address-display-BqUGmvyI.js";import{I as Ta}from"./IconEye-Bgk6Dq1z.js";import{M as Xi}from"./mnemonic-display-BWV60daC.js";import{P as Pa}from"./pattern-lock-setup-DjoLSCeu.js";import{g as Zi,C as _a}from"./chain-selector-BSA6kWAs.js";import{deriveWalletChainAddresses as eo}from"./index-DjTal0QX.js";import{I as to}from"./IconEyeOff-CXk3sTmX.js";import{I as rs}from"./IconCircleCheck-DRmUg22i.js";import"./asset-item-D1UG_Xul.js";import"./asset-list-BdTtqhEW.js";import{A as so}from"./amount-input-BgSR6_Xp.js";import{B as pm}from"./balance-display-CEcL06Kw.js";import{S as hm,I as no}from"./send-result-C4gqNRjH.js";import{d as xm}from"./useRenderElement-B3L952jm.js";import{T as ao}from"./Trans-Leq6nMdt.js";import{M as gm}from"./mnemonic-input-B3afCdMV.js";import{T as ro}from"./transaction-list-zxZa2Mik.js";import{T as vm}from"./transaction-status-QLocdDvi.js";import{I as ea}from"./IconExternalLink-VWb4pXjs.js";import{A as io}from"./AppInfoCard-D0RewHtz.js";import{P as ym}from"./PermissionList-2j7m8z2t.js";import{W as bm}from"./wallet-selector-DHwtEvtI.js";import{T as Ze}from"./token-icon-m9Hy3XpH.js";import{T as yr}from"./TransactionDetails-B0xdPyx0.js";import{B as br}from"./BalanceWarning-CSWdSZNX.js";import{K as jm}from"./key-type-selector-CHhE7zDB.js";import{A as Nm}from"./arbitrary-key-input-CzgBIM7B.js";import{C as wm}from"./chain-address-preview-CXkOQbzU.js";import{C as Cm}from"./collision-confirm-dialog-BeBg7Ut8.js";import{I as km}from"./dropdown-menu-CYo36PiC.js";import"./hologram-canvas-4Mp9PxTf.js";import{I as Sm}from"./IconPencil-5TaS4y8R.js";import{I as Am}from"./IconBell-C_6Xo2SD.js";import{I as Im}from"./IconCircleX-g5GDNVjR.js";import{I as Tm}from"./IconClock-D8Bq3D31.js";import{I as Pm}from"./IconShield-u9QQtTS_.js";const _m=[["path",{d:"M20 6v12a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2z",key:"svg-0"}],["path",{d:"M10 16h6",key:"svg-1"}],["path",{d:"M13 11m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-2"}],["path",{d:"M4 8h3",key:"svg-3"}],["path",{d:"M4 12h3",key:"svg-4"}],["path",{d:"M4 16h3",key:"svg-5"}]],Em=ae("outline","address-book","AddressBook",_m);const Mm=[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M3.6 15h10.55",key:"svg-1"}],["path",{d:"M6.551 4.938l3.26 10.034",key:"svg-2"}],["path",{d:"M17.032 4.636l-8.535 6.201",key:"svg-3"}],["path",{d:"M20.559 14.51l-8.535 -6.201",key:"svg-4"}],["path",{d:"M12.257 20.916l3.261 -10.034",key:"svg-5"}]],oo=ae("outline","aperture","Aperture",Mm);const Rm=[["path",{d:"M17 7l-10 10",key:"svg-0"}],["path",{d:"M16 17l-9 0l0 -9",key:"svg-1"}]],zm=ae("outline","arrow-down-left","ArrowDownLeft",Rm);const Dm=[["path",{d:"M7 7l10 10",key:"svg-0"}],["path",{d:"M17 8l0 9l-9 0",key:"svg-1"}]],Lm=ae("outline","arrow-down-right","ArrowDownRight",Dm);const Bm=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]],co=ae("outline","arrow-right","ArrowRight",Bm);const Om=[["path",{d:"M17 7l-10 10",key:"svg-0"}],["path",{d:"M8 7l9 0l0 9",key:"svg-1"}]],lo=ae("outline","arrow-up-right","ArrowUpRight",Om);const Fm=[["path",{d:"M3 12h1m8 -9v1m8 8h1m-15.4 -6.4l.7 .7m12.1 -.7l-.7 .7",key:"svg-0"}],["path",{d:"M9 16a5 5 0 1 1 6 0a3.5 3.5 0 0 0 -1 3a2 2 0 0 1 -4 0a3.5 3.5 0 0 0 -1 -3",key:"svg-1"}],["path",{d:"M9.7 17l4.6 0",key:"svg-2"}]],uo=ae("outline","bulb","Bulb",Fm);const Wm=[["path",{d:"M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M9 13a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]],$m=ae("outline","camera","Camera",Wm);const Hm=[["path",{d:"M14 10m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M21 12a9 9 0 1 1 -18 0a9 9 0 0 1 18 0z",key:"svg-1"}],["path",{d:"M12.5 11.5l-4 4l1.5 1.5",key:"svg-2"}],["path",{d:"M12 15l-1.5 -1.5",key:"svg-3"}]],Ea=ae("outline","circle-key","CircleKey",Hm);const qm=[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M14.8 9a2 2 0 0 0 -1.8 -1h-2a2 2 0 1 0 0 4h2a2 2 0 1 1 0 4h-2a2 2 0 0 1 -1.8 -1",key:"svg-1"}],["path",{d:"M12 7v10",key:"svg-2"}]],Um=ae("outline","coin","Coin",qm);const Vm=[["path",{d:"M16.7 8a3 3 0 0 0 -2.7 -2h-4a3 3 0 0 0 0 6h4a3 3 0 0 1 0 6h-4a3 3 0 0 1 -2.7 -2",key:"svg-0"}],["path",{d:"M12 3v3m0 12v3",key:"svg-1"}]],Jm=ae("outline","currency-dollar","CurrencyDollar",Vm);const Km=[["path",{d:"M6 12l6 -9l6 9l-6 9z",key:"svg-0"}],["path",{d:"M6 12l6 -3l6 3l-6 2z",key:"svg-1"}]],Gm=ae("outline","currency-ethereum","CurrencyEthereum",Km);const Qm=[["path",{d:"M12 6m-8 0a8 3 0 1 0 16 0a8 3 0 1 0 -16 0",key:"svg-0"}],["path",{d:"M4 6v6a8 3 0 0 0 16 0v-6",key:"svg-1"}],["path",{d:"M4 12v6a8 3 0 0 0 16 0v-6",key:"svg-2"}]],mo=ae("outline","database","Database",Qm);const Ym=[["path",{d:"M3 5a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10z",key:"svg-0"}],["path",{d:"M7 20h10",key:"svg-1"}],["path",{d:"M9 16v4",key:"svg-2"}],["path",{d:"M15 16v4",key:"svg-3"}]],Xm=ae("outline","device-desktop","DeviceDesktop",Ym);const Zm=[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["circle",{cx:"8.5",cy:"8.5",r:".5",fill:"currentColor",key:"svg-1"}],["circle",{cx:"15.5",cy:"8.5",r:".5",fill:"currentColor",key:"svg-2"}],["circle",{cx:"15.5",cy:"15.5",r:".5",fill:"currentColor",key:"svg-3"}],["circle",{cx:"8.5",cy:"15.5",r:".5",fill:"currentColor",key:"svg-4"}],["circle",{cx:"12",cy:"12",r:".5",fill:"currentColor",key:"svg-5"}]],ef=ae("outline","dice-5","Dice5",Zm);const tf=[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]],fo=ae("outline","filter","Filter",tf);const sf=[["path",{d:"M18.9 7a8 8 0 0 1 1.1 5v1a6 6 0 0 0 .8 3",key:"svg-0"}],["path",{d:"M8 11a4 4 0 0 1 8 0v1a10 10 0 0 0 2 6",key:"svg-1"}],["path",{d:"M12 11v2a14 14 0 0 0 2.5 8",key:"svg-2"}],["path",{d:"M8 15a18 18 0 0 0 1.8 6",key:"svg-3"}],["path",{d:"M4.9 19a22 22 0 0 1 -.9 -7v-1a8 8 0 0 1 12 -6.95",key:"svg-4"}]],nf=ae("outline","fingerprint","Fingerprint",sf);const af=[["path",{d:"M7 12h3v4h-3z",key:"svg-0"}],["path",{d:"M10 6h-6a1 1 0 0 0 -1 1v12a1 1 0 0 0 1 1h16a1 1 0 0 0 1 -1v-12a1 1 0 0 0 -1 -1h-6",key:"svg-1"}],["path",{d:"M10 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v3a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M14 16h2",key:"svg-3"}],["path",{d:"M14 12h4",key:"svg-4"}]],rf=ae("outline","id-badge-2","IdBadge2",af);const of=[["path",{d:"M9 6.371c0 4.418 -2.239 6.629 -5 6.629",key:"svg-0"}],["path",{d:"M4 6.371h7",key:"svg-1"}],["path",{d:"M5 9c0 2.144 2.252 3.908 6 4",key:"svg-2"}],["path",{d:"M12 20l4 -9l4 9",key:"svg-3"}],["path",{d:"M19.1 18h-6.2",key:"svg-4"}],["path",{d:"M6.694 3l.793 .582",key:"svg-5"}]],cf=ae("outline","language","Language",of);const lf=[["path",{d:"M9 15l6 -6",key:"svg-0"}],["path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464",key:"svg-1"}],["path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463",key:"svg-2"}]],po=ae("outline","link","Link",lf);const df=[["path",{d:"M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z",key:"svg-0"}]],uf=ae("outline","moon","Moon",df);const mf=[["path",{d:"M6 9a6 6 0 1 0 12 0a6 6 0 0 0 -12 0",key:"svg-0"}],["path",{d:"M12 3c1.333 .333 2 2.333 2 6s-.667 5.667 -2 6",key:"svg-1"}],["path",{d:"M12 3c-1.333 .333 -2 2.333 -2 6s.667 5.667 2 6",key:"svg-2"}],["path",{d:"M6 9h12",key:"svg-3"}],["path",{d:"M3 20h7",key:"svg-4"}],["path",{d:"M14 20h7",key:"svg-5"}],["path",{d:"M10 20a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-6"}],["path",{d:"M12 15v3",key:"svg-7"}]],ff=ae("outline","network","Network",mf);const pf=[["path",{d:"M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25",key:"svg-0"}],["path",{d:"M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}]],hf=ae("outline","palette","Palette",pf);const xf=[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}],["path",{d:"M16 19h6",key:"svg-2"}]],gf=ae("outline","pencil-minus","PencilMinus",xf);const vf=[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M7 17l0 .01",key:"svg-1"}],["path",{d:"M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M7 7l0 .01",key:"svg-3"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-4"}],["path",{d:"M17 7l0 .01",key:"svg-5"}],["path",{d:"M14 14l3 0",key:"svg-6"}],["path",{d:"M20 14l0 .01",key:"svg-7"}],["path",{d:"M14 14l0 3",key:"svg-8"}],["path",{d:"M14 20l3 0",key:"svg-9"}],["path",{d:"M17 17l3 0",key:"svg-10"}],["path",{d:"M20 17l0 3",key:"svg-11"}]],yf=ae("outline","qrcode","Qrcode",vf);const bf=[["path",{d:"M10 14l11 -11",key:"svg-0"}],["path",{d:"M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5",key:"svg-1"}]],ho=ae("outline","send","Send",bf);const jf=[["path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1",key:"svg-0"}],["path",{d:"M12 14v-11",key:"svg-1"}],["path",{d:"M9 6l3 -3l3 3",key:"svg-2"}]],Nf=ae("outline","share-2","Share2",jf);const wf=[["path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-0"}],["path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}],["path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-2"}],["path",{d:"M8.7 10.7l6.6 -3.4",key:"svg-3"}],["path",{d:"M8.7 13.3l6.6 3.4",key:"svg-4"}]],As=ae("outline","share","Share",wf);const Cf=[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7",key:"svg-1"}]],kf=ae("outline","sun","Sun",Cf);const Sf=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M3.6 9h16.8",key:"svg-1"}],["path",{d:"M3.6 15h16.8",key:"svg-2"}],["path",{d:"M11.5 3a17 17 0 0 0 0 18",key:"svg-3"}],["path",{d:"M12.5 3a17 17 0 0 1 0 18",key:"svg-4"}]],xo=ae("outline","world","World",Sf),jr=new Map;function Af(){return{name:"etag",async onFetch(t,s,n){const a=`${n.name}:${t.url}`,r=jr.get(a);let o=t;if(r){const d=new Headers(t.headers);d.set("If-None-Match",r),o=new Request(t.url,{method:t.method,headers:d,body:t.body})}const c=await s(o),i=c.headers.get("etag");return i&&jr.set(a,i),c}}}class If{cache=new Map;async get(s){const n=this.cache.get(s);if(n&&Date.now()>n.expiresAt){this.cache.delete(s);return}return n}async set(s,n){this.cache.set(s,n)}async delete(s){this.cache.delete(s)}async clear(){this.cache.clear()}async keys(){return Array.from(this.cache.keys())}}class Tf{dbName;storeName;dbPromise=null;constructor(s="key-fetch-cache",n="cache"){this.dbName=s,this.storeName=n}async getDB(){return this.dbPromise?this.dbPromise:(this.dbPromise=new Promise((s,n)=>{const a=indexedDB.open(this.dbName,1);a.onerror=()=>n(a.error),a.onsuccess=()=>s(a.result),a.onupgradeneeded=()=>{const r=a.result;r.objectStoreNames.contains(this.storeName)||r.createObjectStore(this.storeName)}}),this.dbPromise)}async get(s){const n=await this.getDB();return new Promise((a,r)=>{const i=n.transaction(this.storeName,"readonly").objectStore(this.storeName).get(s);i.onerror=()=>r(i.error),i.onsuccess=()=>{const d=i.result;d&&Date.now()>d.expiresAt?a(void 0):a(d)}})}async set(s,n){const a=await this.getDB();return new Promise((r,o)=>{const d=a.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(n,s);d.onerror=()=>o(d.error),d.onsuccess=()=>r()})}async delete(s){const n=await this.getDB();return new Promise((a,r)=>{const i=n.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(s);i.onerror=()=>r(i.error),i.onsuccess=()=>a()})}async clear(){const s=await this.getDB();return new Promise((n,a)=>{const c=s.transaction(this.storeName,"readwrite").objectStore(this.storeName).clear();c.onerror=()=>a(c.error),c.onsuccess=()=>n()})}async keys(){const s=await this.getDB();return new Promise((n,a)=>{const c=s.transaction(this.storeName,"readonly").objectStore(this.storeName).getAllKeys();c.onerror=()=>a(c.error),c.onsuccess=()=>n(c.result)})}}const Pf=new If;function _f(t={}){const s=t.storage??Pf,n=t.ttlMs??6e4,a=t.tags??[];return{name:"cache",async onFetch(r,o,c){const i=`${c.name}:${r.url}`,d=await s.get(i);if(d)return new Response(JSON.stringify(d.data),{status:200,headers:{"X-Cache":"HIT"}});const u=await o(r);if(u.ok){const h={data:await u.clone().json(),createdAt:Date.now(),expiresAt:Date.now()+n,tags:a};s.set(i,h)}return u}}}function Ma(){return ba}function vt(){return hu}function Os(){return mu}function go(){return fu}const un={authorizeAddress:"/wallet/authorize/address",authorizeSignature:"/wallet/authorize/signature"};class Ef{constructor(s,n){this.adapter=s,this.eventId=n}hasResponded=!1;handleNetworkAddresses(s,n){const a=n.trim().toLowerCase();if(!a)return[];const r=[];for(const o of s)for(const c of o.chainAddresses)String(c.chain).toLowerCase()===a&&r.push({name:o.name,address:c.address,chainName:c.chain,publicKey:"",magic:`${o.id}:${c.chain}`,signMessage:""});return r}handleMainAddresses(s){return s.chainAddresses.map(n=>({name:s.name,address:n.address,chainName:n.chain,publicKey:"",magic:`${s.id}:${n.chain}`,signMessage:""}))}async handleMainAddressesSigned(s,n){const a=this.handleMainAddresses(s);return await this.applySensitiveOptions(a,[s],{password:n.password,signMessage:n.signMessage,getMain:!1})}handleAllAddresses(s){const n=[];for(const a of s)n.push(...this.handleMainAddresses(a));return n}async handleAllAddressesSigned(s,n){const a=this.handleAllAddresses(s);return await this.applySensitiveOptions(a,s,{password:n.password,signMessage:n.signMessage,getMain:!1})}async handleNetworkAddressesSigned(s,n,a){const r=this.handleNetworkAddresses(s,n);return await this.applySensitiveOptions(r,s,{password:a.password,signMessage:a.signMessage,getMain:!1})}async applySensitiveOptions(s,n,a){return await this.applyPasswordProtectedFields(s,n,a)}async approve(s){await this.respondOnce(un.authorizeAddress,s)}async reject(s){await this.respondOnce(un.authorizeAddress,null)}async respondOnce(s,n){if(!this.hasResponded){this.hasResponded=!0;try{await this.adapter.respondWith(this.eventId,s,n)}finally{await this.adapter.removeEventId(this.eventId)}}}async applyPasswordProtectedFields(s,n,a){const r=a.signMessage?.trim()??"",o=!!r,c=!!a.getMain;if(!o&&!c)return s;const i=new Map;for(const m of n)i.set(m.id,m);const d=new Map,u=new Set;for(const m of s){const f=this.getWalletIdFromMagic(m.magic),h=i.get(f),v=h?.encryptedMnemonic;if(!h||!v)throw new Error("Missing secret");const j=m.chainName.trim().toLowerCase();if(c){let p=d.get(f);if(!p){try{p=await Qt(v,a.password)}catch{throw new Error("Invalid password")}d.set(f,p)}m.main=p}if(o){if(tn(j)){let p=d.get(f);if(!p){try{p=await Qt(v,a.password)}catch{throw new Error("Invalid password")}d.set(f,p)}const x=sn(p),g=nn(r,x.secretKey);m.signMessage=`0x${Ee(g)}`,m.publicKey=Ee(x.publicKey);continue}if(!u.has(f))if(d.has(f))u.add(f);else{if(!await Pt(v,a.password))throw new Error("Invalid password");u.add(f)}m.signMessage=this.createDeterministicMockSignature({message:r,address:m.address,chainName:m.chainName})}}return s}getWalletIdFromMagic(s){const n=s.indexOf(":");return n===-1?s:s.slice(0,n)}createDeterministicMockSignature({message:s,address:n,chainName:a}){const r=new TextEncoder,o=Je(r.encode(`address:${n}|chain:${a}|message:${s}`)),c=Je(r.encode(`event:${this.eventId}`)),i=new Uint8Array(64);return i.set(o,0),i.set(c,32),`0x${Ee(i)}`}}class Ra{constructor(s,n){this.adapter=s,this.eventId=n}hasResponded=!1;async approve(s){await this.respondOnce(un.authorizeSignature,s)}async reject(s){await this.respondOnce(un.authorizeSignature,null)}async handleMessageSign(s,n,a){const r=s.chainName.trim().toLowerCase();if(tn(r)){let c;try{c=await Qt(n,a)}catch{throw new Error("Invalid password")}const i=sn(c),d=nn(s.message,i.secretKey);return{signature:`0x${Ee(d)}`,publicKey:Ee(i.publicKey)}}if(!await Pt(n,a))throw new Error("Invalid password");{const c=new TextEncoder,i=Je(c.encode(`message:${s.message}`)),d=Je(c.encode(`event:${this.eventId}`)),u=new Uint8Array(64);u.set(i,0),u.set(d,32);const m=Je(c.encode(`pubkey:${s.senderAddress}`));return{signature:`0x${Ee(u)}`,publicKey:Ee(m)}}}async handleTransferSign(s,n,a){const r=s.chainName.trim().toLowerCase(),o=["transfer",r,s.senderAddress,s.receiveAddress,s.balance,s.fee??"",s.contractInfo?.assetType??s.assetType??"",s.contractInfo?.contractAddress??"",s.contractInfo?.decimals?.toString()??""].join("|");if(tn(r)){let f;try{f=await Qt(n,a)}catch{throw new Error("Invalid password")}const h=sn(f),v=nn(o,h.secretKey);return`0x${Ee(v)}`}if(!await Pt(n,a))throw new Error("Invalid password");const i=new TextEncoder,d=Je(i.encode(o)),u=Je(i.encode(`event:${this.eventId}`)),m=new Uint8Array(64);return m.set(d,0),m.set(u,32),`0x${Ee(m)}`}async handleDestroySign(s,n,a){const r=s.chainName.trim().toLowerCase(),o=["destory",r,s.senderAddress,s.destoryAddress,s.destoryAmount,s.fee??"",s.assetType??""].join("|");if(tn(r)){let f;try{f=await Qt(n,a)}catch{throw new Error("Invalid password")}const h=sn(f),v=nn(o,h.secretKey);return`0x${Ee(v)}`}if(!await Pt(n,a))throw new Error("Invalid password");const i=new TextEncoder,d=Je(i.encode(o)),u=Je(i.encode(`event:${this.eventId}`)),m=new Uint8Array(64);return m.set(d,0),m.set(u,32),`0x${Ee(m)}`}async respondOnce(s,n){if(!this.hasResponded){this.hasResponded=!0;try{await this.adapter.respondWith(this.eventId,s,n)}finally{await this.adapter.removeEventId(this.eventId)}}}}class Mf{async getCallerAppInfo(s){throw new Error("DWEB runtime not available in web environment")}async respondWith(s,n,a){throw new Error("DWEB runtime not available in web environment")}async removeEventId(s){}isAvailable(){return!1}}const Zt=new Mf,Rf={"zh-CN":fs.wordlists.chinese_simplified,"zh-TW":fs.wordlists.chinese_traditional,ja:fs.wordlists.japanese,ko:fs.wordlists.korean},zf=["zh-CN","zh-TW","ja","ko"];function mn(t){const s=Rf[t]??fs.wordlists.english,n=s[Math.floor(Math.random()*s.length)];return zf.includes(t)?n:n.charAt(0).toUpperCase()+n.slice(1)}function Df(){return typeof window>"u"}function Vs(){return!Df()}function Lf(){const t={value:null};function s(){return t.value}function n(a){t.value=a}return[s,n]}var Bn,Nr;function Bf(){if(Nr)return Bn;Nr=1;var t=typeof Element<"u",s=typeof Map=="function",n=typeof Set=="function",a=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function r(o,c){if(o===c)return!0;if(o&&c&&typeof o=="object"&&typeof c=="object"){if(o.constructor!==c.constructor)return!1;var i,d,u;if(Array.isArray(o)){if(i=o.length,i!=c.length)return!1;for(d=i;d--!==0;)if(!r(o[d],c[d]))return!1;return!0}var m;if(s&&o instanceof Map&&c instanceof Map){if(o.size!==c.size)return!1;for(m=o.entries();!(d=m.next()).done;)if(!c.has(d.value[0]))return!1;for(m=o.entries();!(d=m.next()).done;)if(!r(d.value[1],c.get(d.value[0])))return!1;return!0}if(n&&o instanceof Set&&c instanceof Set){if(o.size!==c.size)return!1;for(m=o.entries();!(d=m.next()).done;)if(!c.has(d.value[0]))return!1;return!0}if(a&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(c)){if(i=o.length,i!=c.length)return!1;for(d=i;d--!==0;)if(o[d]!==c[d])return!1;return!0}if(o.constructor===RegExp)return o.source===c.source&&o.flags===c.flags;if(o.valueOf!==Object.prototype.valueOf&&typeof o.valueOf=="function"&&typeof c.valueOf=="function")return o.valueOf()===c.valueOf();if(o.toString!==Object.prototype.toString&&typeof o.toString=="function"&&typeof c.toString=="function")return o.toString()===c.toString();if(u=Object.keys(o),i=u.length,i!==Object.keys(c).length)return!1;for(d=i;d--!==0;)if(!Object.prototype.hasOwnProperty.call(c,u[d]))return!1;if(t&&o instanceof Element)return!1;for(d=i;d--!==0;)if(!((u[d]==="_owner"||u[d]==="__v"||u[d]==="__o")&&o.$$typeof)&&!r(o[u[d]],c[u[d]]))return!1;return!0}return o!==o&&c!==c}return Bn=function(c,i){try{return r(c,i)}catch(d){if((d.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw d}},Bn}var Of=Bf();const hs=Hd(Of);function vo(t){const s=l.useRef(t),n=s.current,a=hs(n,t);return l.useEffect(()=>{a||(s.current=t)},[t]),a?n:t}var za=l.createContext(null),yo=({children:t,value:s})=>e.jsx(za.Provider,{value:vo(s),children:t});yo.displayName="ActivityProvider";var Ff=()=>l.useContext(za);function Wf(){return l.useContext(za).params}var bo=l.createContext(null),jo=({children:t,value:s})=>e.jsx(bo.Provider,{value:vo(s),children:t});jo.displayName="StackProvider";var $f=()=>l.useContext(bo),Hf=Object.defineProperty,qf=Object.defineProperties,Uf=Object.getOwnPropertyDescriptors,fn=Object.getOwnPropertySymbols,No=Object.prototype.hasOwnProperty,wo=Object.prototype.propertyIsEnumerable,wr=(t,s,n)=>s in t?Hf(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,le=(t,s)=>{for(var n in s||(s={}))No.call(s,n)&&wr(t,n,s[n]);if(fn)for(var n of fn(s))wo.call(s,n)&&wr(t,n,s[n]);return t},xe=(t,s)=>qf(t,Uf(s)),Vf=(t,s)=>{var n={};for(var a in t)No.call(t,a)&&s.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&fn)for(var a of fn(t))s.indexOf(a)<0&&wo.call(t,a)&&(n[a]=t[a]);return n};function Jf(t,s,n){const a=n(t),r=n(s);return a<r?-1:a===r?0:1}var Kf=(t,s)=>{const n=[],a=[];return t.forEach(r=>{s(r)?n.push(r):a.push(r)}),[n,a]};function Co(t,s){return t.map((n,a)=>s(n)?a:void 0).filter(n=>typeof n=="number")}var On=0,Cr=0,ko=()=>{const t=new Date().getTime();return Cr===t?On+=1:(Cr=t,On=0),(t*1e3+On)/1e3};function Ke(){return(ko()*1e3).toString(16)}function Mn(t){return t.length===0?void 0:t[t.length-1]}function kr(t,s){const n=le({},t);return s.forEach(a=>{delete n[a]}),n}function Gf(t){let s=!1;return()=>{s||(s=!0,t())}}function Qf(t,s){const n=new Map;return[...t].reverse().filter(a=>{const r=s(a);if(r===null)return!0;const o=!!n.get(r);return n.set(r,!0),!o}).reverse()}function ta(t){return!t.exitedBy}function sa(t,s){return s.enteredBy.eventDate-t.enteredBy.eventDate}function Sr(t){return t.filter(ta).sort(sa)[0]}function Yf(t,s,n){const a=[];switch(s.name){case"Replaced":{if(Mn(Co(t,d=>d.id===s.activityId))!==void 0)break;const o=t.slice().sort(sa).filter(ta),c=n.now-s.eventDate>=n.transitionDuration;if((s.skipEnterActiveState||c?"enter-done":"enter-active")==="enter-done"){const d=o.findIndex(u=>!(s.skipEnterActiveState&&u.enteredBy.name==="Replaced"&&u.transitionState==="enter-active"));return o.slice(0,d+1).map(u=>t.indexOf(u))}break}case"Popped":{const r=t.filter(ta).sort(sa),o=r.slice(0,r.length-1)[0];o&&a.push(t.indexOf(o));break}case"StepPushed":case"StepReplaced":{const r=Sr(t);if(r){if(s.targetActivityId&&s.targetActivityId!==r.id)break;a.push(t.indexOf(r))}break}case"StepPopped":{const r=Sr(t);if(r&&r.steps.length>1){if(s.targetActivityId&&s.targetActivityId!==r.id)break;a.push(t.indexOf(r))}break}}return a}function Ar(t,s){switch(s.name){case"Pushed":case"Replaced":{const n=Mn(Co(t,a=>a.id===s.activityId));return n??t.length}default:return-1}}function Ir(t,s){return{id:t.activityId,name:t.activityName,transitionState:s,params:t.activityParams,context:t.activityContext,steps:[{id:t.activityId,params:t.activityParams,enteredBy:t,zIndex:-1}],enteredBy:t,isTop:!1,isActive:!1,isRoot:!1,zIndex:-1}}function Da(t){return(s,n)=>{const a=t[n.name].bind(t);if(a)return a(s,n);throw new Error(`No reducer for event ${JSON.stringify(n)}`)}}function nt(t){return t}function Xf({transitionDuration:t,now:s,resumedAt:n}){return Da({Pushed(a,r){const o=s-(n??r.eventDate)>=t,c=r.skipEnterActiveState||o?"enter-done":"enter-active",i=Ar(a,r);return[...a.slice(0,i),Ir(r,c),...a.slice(i+1)]},Replaced(a,r){var o,c;const i=s-(n??r.eventDate)>=t,d=Ar(a,r),u=(c=(o=a[d])==null?void 0:o.transitionState)!=null?c:r.skipEnterActiveState||i?"enter-done":"enter-active";return[...a.slice(0,d),Ir(r,u),...a.slice(d+1)]},Initialized:nt,ActivityRegistered:nt,Popped:nt,StepPushed:nt,StepReplaced:nt,StepPopped:nt,Paused:nt,Resumed:nt})}function ls(t){return t}function Zf(t){return Da({Replaced:(s,n)=>xe(le({},s),{exitedBy:n,transitionState:"exit-done"}),Popped:(s,n)=>{var a;const r=t.now-((a=t.resumedAt)!=null?a:n.eventDate)>=t.transitionDuration,o=n.skipExitActiveState||r?"exit-done":"exit-active";return xe(le({},s),{exitedBy:n,transitionState:o,params:o==="exit-done"?s.steps[0].params:s.params,steps:o==="exit-done"?[s.steps[0]]:s.steps})},StepPushed:(s,n)=>{var a;const r={id:n.stepId,params:n.stepParams,enteredBy:n,zIndex:s.zIndex,hasZIndex:(a=n.hasZIndex)!=null?a:!1};return xe(le({},s),{params:n.stepParams,steps:[...s.steps,r]})},StepReplaced:(s,n)=>{var a;const r={id:n.stepId,params:n.stepParams,enteredBy:n,zIndex:s.zIndex,hasZIndex:(a=n.hasZIndex)!=null?a:!1};return xe(le({},s),{params:n.stepParams,steps:[...s.steps.slice(0,s.steps.length-1),r]})},StepPopped:(s,n)=>{var a;s.steps.pop();const r=(a=Mn(s.steps))==null?void 0:a.params;return xe(le({},s),{params:r??s.params})},Initialized:ls,ActivityRegistered:ls,Pushed:ls,Paused:ls,Resumed:ls})}function Ue(t){return(s,n)=>s.globalTransitionState==="paused"?xe(le({},s),{pausedEvents:s.pausedEvents?[...s.pausedEvents,n]:[n]}):t(s,n)}function Le(t,s){return(n,a)=>{const r=Xf({transitionDuration:n.transitionDuration,now:s.now,resumedAt:s.resumedAt}),o=Zf({transitionDuration:n.transitionDuration,now:s.now,resumedAt:s.resumedAt}),c=r(n.activities,a),i=Yf(n.activities,a,{transitionDuration:n.transitionDuration,now:s.now});for(const m of i)c[m]=o(c[m],a);const d=c.find(m=>m.transitionState==="enter-active"||m.transitionState==="exit-active"),u=n.globalTransitionState==="paused"?"paused":d?"loading":"idle";return t(xe(le({},n),{activities:c,globalTransitionState:u}),a)}}function qt(t,s){return xe(le({},t),{events:[...t.events,s]})}function So(t){return Da({Initialized:Ue(Le((s,n)=>xe(le({},s),{transitionDuration:n.transitionDuration,events:[...s.events,n]}),t)),ActivityRegistered:Ue(Le((s,n)=>xe(le({},s),{registeredActivities:[...s.registeredActivities,le({name:n.activityName},n.activityParamsSchema?{paramsSchema:n.activityParamsSchema}:null)],events:[...s.events,n]}),t)),Paused:Ue(Le((s,n)=>xe(le({},s),{globalTransitionState:"paused",events:[...s.events,n]}),t)),Resumed:Le((s,n)=>{if(s.globalTransitionState!=="paused"||!s.pausedEvents)return xe(le({},s),{events:[...s.events,n]});const a=So({now:t.now,resumedAt:n.eventDate}),r=s,{pausedEvents:o}=r,c=Vf(r,["pausedEvents"]),i=o.reduce(a,xe(le({},c),{globalTransitionState:"idle"}));return xe(le({},i),{events:[...i.events,n]})},t),Pushed:Ue(Le(qt,t)),Replaced:Ue(Le(qt,t)),Popped:Ue(Le(qt,t)),StepPushed:Ue(Le(qt,t)),StepReplaced:Ue(Le(qt,t)),StepPopped:Ue(Le(qt,t))})}function Fn(t,s){return t.filter(n=>n.name===s)}function an(t,s){return xe(le({id:Ke(),eventDate:ko()},s),{name:t})}function ep(t){if(t.length===0)throw new Error("events parameter is empty");if(Fn(t,"Initialized").length>1)throw new Error("InitializedEvent can only exist once");const n=Fn(t,"ActivityRegistered"),a=new Set(n.map(o=>o.activityName));if(Fn(t,"Pushed").some(o=>!a.has(o.activityName)))throw new Error("the corresponding activity does not exist")}function Wn(t,s){const n=Qf([...t].sort((m,f)=>m.eventDate-f.eventDate),m=>m.id);ep(n);const a=So({now:s}),r=n.reduce(a,{activities:[],globalTransitionState:"idle",registeredActivities:[],transitionDuration:0,events:[]}),o=r.activities.filter(m=>m.transitionState==="enter-active"||m.transitionState==="enter-done"||m.transitionState==="exit-active"),c=o.filter(m=>m.transitionState==="enter-active"||m.transitionState==="enter-done"),i=o[o.length-1],d=c[c.length-1];return xe(le({},r),{activities:r.activities.map(m=>{let f=o.findIndex(({id:j})=>j===m.id);const h=o.slice(0,f);for(const j of h)for(const p of j.steps)p.hasZIndex&&(f+=1);const v=m.steps.reduce((j,p)=>{var x;const g=Mn(j),y=(x=g?.zIndex)!=null?x:f;return[...j,xe(le({},p),{zIndex:y+(p.hasZIndex?1:0)})]},[]);return le(le({id:m.id,name:m.name,transitionState:m.transitionState,params:m.params,steps:v,enteredBy:m.enteredBy,zIndex:f,isTop:i?.id===m.id,isActive:d?.id===m.id,isRoot:f===0||f===1&&m.transitionState==="enter-active"&&m.enteredBy.name==="Replaced"},m.exitedBy?{exitedBy:m.exitedBy}:null),m.context?{context:m.context}:null)}).sort((m,f)=>Jf(m,f,h=>h.id))})}function tp(t,s){var n,a,r,o,c,i,d,u;const m=[];!hs(t,s)&&m.push({_TAG:"%SOMETHING_CHANGED%"});const h=t.globalTransitionState!=="paused"&&s.globalTransitionState==="paused",v=t.globalTransitionState==="paused"&&s.globalTransitionState!=="paused";h&&m.push({_TAG:"PAUSED"}),v&&m.push({_TAG:"RESUMED"});for(let j=0;j<Math.max(t.activities.length,s.activities.length);j+=1){const p=t.activities[j],x=s.activities[j],g=p?.transitionState==="exit-done"||p?.transitionState==="exit-active",y=x?.transitionState==="enter-active"||x?.transitionState==="enter-done";if(p&&x&&p.id===x.id)for(let N=0;N<Math.max(((n=p.steps)!=null?n:[]).length,((a=x.steps)!=null?a:[]).length);N+=1){const b=p.steps[N],A=x.steps[N];!b&&A?m.push({_TAG:"STEP_PUSHED",activity:x,step:A}):b&&!A?m.push({_TAG:"STEP_POPPED",activity:x}):p.steps.length===x.steps.length&&b.id!==A.id&&m.push({_TAG:"STEP_REPLACED",activity:x,step:A})}!p&&x?m.push({_TAG:x.enteredBy.name==="Pushed"?"PUSHED":"REPLACED",activity:x}):g&&y?m.push({_TAG:x.enteredBy.name==="Pushed"?"PUSHED":"REPLACED",activity:x}):p&&x&&p.id===x.id&&!hs(kr(p,["isActive","isTop","isRoot","transitionState","zIndex"]),kr(x,["isActive","isTop","isRoot","transitionState","zIndex"]))&&x.enteredBy.name==="Replaced"&&!hs(p.enteredBy,x.enteredBy)&&m.push({_TAG:"REPLACED",activity:x})}for(let j=Math.max(t.activities.length,s.activities.length)-1;j>=0;j-=1){const p=((r=t.activities[j])==null?void 0:r.transitionState)==="enter-done"||((o=t.activities[j])==null?void 0:o.transitionState)==="enter-active",x=((c=s.activities[j])==null?void 0:c.transitionState)==="exit-active"||((i=s.activities[j])==null?void 0:i.transitionState)==="exit-done",g=((d=s.activities[j+1])==null?void 0:d.enteredBy.name)==="Replaced"&&((u=s.activities[j+1])==null?void 0:u.transitionState)==="enter-done";p&&x&&!g&&m.push({_TAG:"POPPED",activity:s.activities[j]})}return m}var sp={Pushed:"onBeforePush",Replaced:"onBeforeReplace",Popped:"onBeforePop",StepPushed:"onBeforeStepPush",StepReplaced:"onBeforeStepReplace",StepPopped:"onBeforeStepPop",Paused:"onBeforePause",Resumed:"onBeforeResume"};function at(t,s,n,a){let r=!1,o=le({},s);for(const c of n){const i=c[sp[t]];i&&i({actionParams:le({},o),actions:xe(le({},a),{preventDefault:()=>{r=!0},overrideActionParams:d=>{o=le(le({},o),d)}})})}return{isPrevented:r,nextActionParams:o}}function np({dispatchEvent:t,pluginInstances:s,actions:n}){return{push(a){const{isPrevented:r,nextActionParams:o}=at("Pushed",a,s,n);r||t("Pushed",o)},replace(a){const{isPrevented:r,nextActionParams:o}=at("Replaced",a,s,n);r||t("Replaced",o)},pop(a={}){const{isPrevented:r,nextActionParams:o}=at("Popped",a,s,n);r||t("Popped",o)},stepPush(a){const{isPrevented:r,nextActionParams:o}=at("StepPushed",a,s,n);r||t("StepPushed",o)},stepReplace(a){const{isPrevented:r,nextActionParams:o}=at("StepReplaced",a,s,n);r||t("StepReplaced",o)},stepPop(a={}){const{isPrevented:r,nextActionParams:o}=at("StepPopped",a,s,n);r||t("StepPopped",o)},pause(a={}){const{isPrevented:r,nextActionParams:o}=at("Paused",a,s,n);r||t("Paused",o)},resume(a={}){const{isPrevented:r,nextActionParams:o}=at("Resumed",a,s,n);r||t("Resumed",o)}}}function ap(t,s,n){t.forEach(a=>{s.forEach(r=>{var o,c,i,d,u,m,f,h,v;switch(a._TAG){case"PUSHED":(o=r.onPushed)==null||o.call(r,{actions:n,effect:a});break;case"REPLACED":(c=r.onReplaced)==null||c.call(r,{actions:n,effect:a});break;case"POPPED":(i=r.onPopped)==null||i.call(r,{actions:n,effect:a});break;case"STEP_PUSHED":(d=r.onStepPushed)==null||d.call(r,{actions:n,effect:a});break;case"STEP_REPLACED":(u=r.onStepReplaced)==null||u.call(r,{actions:n,effect:a});break;case"STEP_POPPED":(m=r.onStepPopped)==null||m.call(r,{actions:n,effect:a});break;case"PAUSED":(f=r.onPaused)==null||f.call(r,{actions:n,effect:a});break;case"RESUMED":(h=r.onResumed)==null||h.call(r,{actions:n,effect:a});break;case"%SOMETHING_CHANGED%":(v=r.onChanged)==null||v.call(r,{actions:n,effect:a});break}})})}var rp=1e3,ip=rp/60;function Tr(t){var s,n,a,r;const o=[],i=[{key:"@stackflow/core",onChanged(){o.forEach(x=>x())}},...t.plugins.map(x=>x())],[d,u]=Kf(t.initialEvents,x=>x.name==="Pushed"||x.name==="StepPushed"),m=i.reduce((x,g)=>{var y,N,b;return(b=(N=g.overrideInitialEvents)==null?void 0:N.call(g,{initialEvents:x,initialContext:(y=t.initialContext)!=null?y:{}}))!=null?b:x},d);m.length>0&&d.length>0&&m!==d&&((n=(s=t.handlers)==null?void 0:s.onInitialActivityIgnored)==null||n.call(s,m)),m.length===0&&((r=(a=t.handlers)==null?void 0:a.onInitialActivityNotFound)==null||r.call(a));const h={value:[...u,...m]},v={value:Wn(h.value,new Date().getTime())},j={getStack(){return v.value},dispatchEvent(x,g){const y=an(x,g),N=Wn([...h.value,y],new Date().getTime());h.value.push(y),p(N);const b=setInterval(()=>{const A=Wn(h.value,new Date().getTime());hs(v.value,A)||p(A),A.globalTransitionState==="idle"&&clearInterval(b)},ip)},push:()=>{},replace:()=>{},pop:()=>{},stepPush:()=>{},stepReplace:()=>{},stepPop:()=>{},pause:()=>{},resume:()=>{}},p=x=>{const g=tp(v.value,x);v.value=x,ap(g,i,j)};return Object.assign(j,np({dispatchEvent:j.dispatchEvent,pluginInstances:i,actions:j})),{actions:j,init:Gf(()=>{i.forEach(x=>{var g;(g=x.onInit)==null||g.call(x,{actions:j})})}),pullEvents:()=>h.value,subscribe(x){return o.push(x),function(){const y=o.findIndex(N=>N===x);y>-1&&o.splice(y,1)}},pluginInstances:i}}var Ao=l.createContext(null);function op(){const t=l.useContext(Ao);if(t===null)throw new Error("useActivityComponentMap must be used within ActivityComponentMapProvider");return t}function cp({children:t,value:s}){return e.jsx(Ao.Provider,{value:s,children:t})}var pn=t=>s=>s.find(({id:n})=>n===t);function lp(t){return!t.exitedBy}function dp(t,s){return s.enteredBy.eventDate-t.enteredBy.eventDate}function hn(t){return t.filter(lp).sort(dp)[0]}function It(){return Ke()}function xn(){return Ke()}var Pr,up=(Pr=fa.useDeferredValue)!=null?Pr:t=>t,_r,mp=(_r=fa.useSyncExternalStore)!=null?_r:(t,s)=>{const[n,a]=l.useState(()=>s());return l.useEffect(()=>t(()=>{a(()=>s())})),n},Er,Io=(Er=fa.useTransition)!=null?Er:()=>[!1,t=>t()],To=l.createContext(null),Po=l.createContext(null),_o=({coreStore:t,children:s})=>{const n=mp(t.subscribe,t.actions.getStack,t.actions.getStack),a=up(n);return e.jsx(Po.Provider,{value:a,children:e.jsx(To.Provider,{value:t.actions,children:s})})};_o.displayName="CoreProvider";var Eo=()=>l.useContext(To),Mo=()=>l.useContext(Po),Ro=l.createContext(null),zo=({children:t,value:s})=>e.jsx(Ro.Provider,{value:s,children:t});zo.displayName="PluginsProvider";function Do(){return l.useContext(Ro)}function fp(t){return typeof t=="object"&&t!==null&&"then"in t&&typeof t.then=="function"}var ve={PENDING:"pending",FULFILLED:"fulfilled",REJECTED:"rejected"};function La(t){if(t.status===ve.PENDING)return{status:ve.PENDING};if(t.status===ve.FULFILLED&&"value"in t)return{status:ve.FULFILLED,value:t.value};if(t.status===ve.REJECTED&&"reason"in t)return{status:ve.REJECTED,reason:t.reason};throw new Error("Invalid promise state")}function pp(t){if("status"in t&&Object.values(ve).some(n=>n===t.status))return t;const s=Object.assign(t,{status:ve.PENDING});return s.then(n=>{s.status=ve.FULFILLED,s.value=n},n=>{s.status=ve.REJECTED,s.reason=n}),s}function rn(t){return fp(t)?pp(t instanceof Promise?t:Promise.resolve(t)):Object.assign(Promise.resolve(t),{status:ve.FULFILLED,value:t})}function hp(t){return Object.assign(Promise.reject(t),{status:ve.REJECTED,reason:t})}function xp(t){const s=rn(t),n=La(s);if(n.status===ve.FULFILLED)return n.value;throw n.status===ve.REJECTED?n.reason:s}var gp=Object.defineProperty,Mr=Object.getOwnPropertySymbols,vp=Object.prototype.hasOwnProperty,yp=Object.prototype.propertyIsEnumerable,Rr=(t,s,n)=>s in t?gp(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,bp=(t,s)=>{for(var n in s||(s={}))vp.call(s,n)&&Rr(t,n,s[n]);if(Mr)for(var n of Mr(s))yp.call(s,n)&&Rr(t,n,s[n]);return t},jp=(t,s,n)=>new Promise((a,r)=>{var o=d=>{try{i(n.next(d))}catch(u){r(u)}},c=d=>{try{i(n.throw(d))}catch(u){r(u)}},i=d=>d.done?a(d.value):Promise.resolve(d.value).then(o,c);i((n=n.apply(t,s)).next())});function Np(t){let s=null;const n=()=>((!s||La(s).status===ve.REJECTED)&&(s=t()),s);return{Component:r=>{const{default:o}=xp(n());return e.jsx(o,bp({},r))},preload:()=>jp(this,null,function*(){yield n()})}}var wp=Symbol("STRUCTURED_ACTIVITY_COMPONENT_TYPE");function Cp(t){return t!==null&&typeof t=="object"&&wp in t}var $n=new WeakMap;function kp(t){if($n.has(t))return $n.get(t);const{Component:s}=Np(()=>{const n=t.content,a=rn(typeof n=="function"?n():{default:n}),r=La(a);return r.status===ve.FULFILLED?rn({default:r.value.default.component}):r.status===ve.REJECTED?hp(r.reason):rn(a.then(o=>({default:o.default.component})))});return $n.set(t,s),s}var Sp=Object.defineProperty,Ap=Object.defineProperties,Ip=Object.getOwnPropertyDescriptors,zr=Object.getOwnPropertySymbols,Tp=Object.prototype.hasOwnProperty,Pp=Object.prototype.propertyIsEnumerable,na=(t,s,n)=>s in t?Sp(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,Nt=(t,s)=>{for(var n in s||(s={}))Tp.call(s,n)&&na(t,n,s[n]);if(zr)for(var n of zr(s))Pp.call(s,n)&&na(t,n,s[n]);return t},Hn=(t,s)=>Ap(t,Ip(s)),Dr=(t,s,n)=>na(t,typeof s!="symbol"?s+"":s,n),Lo=({plugin:t,initialContext:s})=>{const n=op(),a=Mo(),r=Do();return t.render({stack:Hn(Nt({},a),{render(o){return{activities:Nt(Nt({},a),o).activities.map(i=>Hn(Nt({},i),{key:i.id,render(d){const u=n[i.name];let m=Cp(u)?Ep(u,i.params):e.jsx(u,{params:i.params});return r.forEach(f=>{var h,v;m=(v=(h=f.wrapActivity)==null?void 0:h.call(f,{activity:Hn(Nt({},i),{render:()=>m}),initialContext:s}))!=null?v:m}),e.jsx(yo,{value:Nt(Nt({},i),d),children:m},i.id)}}))}}}),initialContext:s})};Lo.displayName="PluginRenderer";var _p=Lo;function Ep(t,s){const{layout:n,loading:a,errorHandler:r}=t,o=kp(t);return[i=>a?.component?e.jsx(l.Suspense,{fallback:e.jsx(a.component,{params:s}),children:i}):i,i=>{var d;if(!r)return i;const u=(d=r.boundary)!=null?d:Mp;return e.jsx(u,{renderFallback:(m,f)=>e.jsx(r.component,{params:s,error:m,reset:f}),children:i})},i=>n?.component?e.jsx(n.component,{params:s,children:i}):i].reduce((i,d)=>d(i),e.jsx(o,{params:s}))}var Mp=class extends l.Component{constructor(){super(...arguments),Dr(this,"state",{hasError:!1,error:null}),Dr(this,"reset",()=>this.setState({hasError:!1,error:null}))}render(){return this.state.hasError?this.props.renderFallback(this.state.error,this.reset):this.props.children}static getDerivedStateFromError(t){return{hasError:!0,error:t}}},Rp=Object.defineProperty,zp=Object.defineProperties,Dp=Object.getOwnPropertyDescriptors,Lr=Object.getOwnPropertySymbols,Lp=Object.prototype.hasOwnProperty,Bp=Object.prototype.propertyIsEnumerable,Br=(t,s,n)=>s in t?Rp(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,Op=(t,s)=>{for(var n in s||(s={}))Lp.call(s,n)&&Br(t,n,s[n]);if(Lr)for(var n of Lr(s))Bp.call(s,n)&&Br(t,n,s[n]);return t},Fp=(t,s)=>zp(t,Dp(s)),Bo=({initialContext:t})=>{const s=Mo(),n=Do(),a=n.filter(o=>!!o.render);l.useEffect(()=>{a.length===0&&console.warn(`Stackflow - There is no rendering plugin, so "<Stack />" doesn't render anything. If you want to render some UI, use "@stackflow/plugin-renderer-basic" or add another rendering plugin.`)},[a]);let r=e.jsx(e.Fragment,{children:a.map(o=>e.jsx(_p,{plugin:o,initialContext:t},o.key))});return n.forEach(o=>{var c,i;r=(i=(c=o.wrapStack)==null?void 0:c.call(o,{stack:Fp(Op({},s),{render(){return r}}),initialContext:t}))!=null?i:r}),e.jsx(jo,{value:s,children:r})};Bo.displayName="MainRenderer";var Wp=Bo,$p=Object.defineProperty,Or=Object.getOwnPropertySymbols,Hp=Object.prototype.hasOwnProperty,qp=Object.prototype.propertyIsEnumerable,Fr=(t,s,n)=>s in t?$p(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,Wr=(t,s)=>{for(var n in s||(s={}))Hp.call(s,n)&&Fr(t,n,s[n]);if(Or)for(var n of Or(s))qp.call(s,n)&&Fr(t,n,s[n]);return t};function qn(t){return t?t.animate==null?{skipActiveState:!1}:{skipActiveState:!t.animate}:{skipActiveState:!1}}function Fs(){const t=Eo(),[s]=Io();return l.useMemo(()=>({pending:s,push(n,a,r){const o=It();return t?.push({activityId:o,activityName:n,activityParams:a,skipEnterActiveState:qn(r).skipActiveState}),{activityId:o}},replace(n,a,r){var o;const c=It();return t?.replace({activityId:(o=r?.activityId)!=null?o:It(),activityName:n,activityParams:a,skipEnterActiveState:qn(r).skipActiveState}),{activityId:c}},pop(n,a){let r=1,o={};typeof n=="object"&&(o=Wr({},n)),typeof n=="number"&&(r=n),a&&(o=Wr({},a));for(let c=0;c<r;c+=1)t?.pop({skipExitActiveState:c===0?qn(o).skipActiveState:!0})}}),[t?.push,t?.replace,t?.pop,s])}var Up=()=>{const t=Eo(),[s]=Io();return l.useMemo(()=>({pending:s,stepPush(n,a){const r=t?.getStack().activities,o=a?.targetActivityId?pn(a.targetActivityId):hn,c=r&&o(r);if(!c)throw new Error("The target activity is not found.");const i=typeof n=="function"?n(c.params):n,d=xn();t?.stepPush({stepId:d,stepParams:i,targetActivityId:a?.targetActivityId})},stepReplace(n,a){const r=t?.getStack().activities,o=a?.targetActivityId?pn(a.targetActivityId):hn,c=r&&o(r);if(!c)throw new Error("The target activity is not found.");const i=typeof n=="function"?n(c.params):n,d=xn();t?.stepReplace({stepId:d,stepParams:i,targetActivityId:a?.targetActivityId})},stepPop(n){t?.stepPop({targetActivityId:n?.targetActivityId})}}),[t?.stepPush,t?.stepReplace,t?.stepPop,t?.getStack,s])},Vp=Object.defineProperty,Jp=Object.defineProperties,Kp=Object.getOwnPropertyDescriptors,$r=Object.getOwnPropertySymbols,Gp=Object.prototype.hasOwnProperty,Qp=Object.prototype.propertyIsEnumerable,Hr=(t,s,n)=>s in t?Vp(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,Js=(t,s)=>{for(var n in s||(s={}))Gp.call(s,n)&&Hr(t,n,s[n]);if($r)for(var n of $r(s))Qp.call(s,n)&&Hr(t,n,s[n]);return t},Yp=(t,s)=>Jp(t,Kp(s));function Un(t){return t?t.animate==null?{skipActiveState:!1}:{skipActiveState:!t.animate}:{skipActiveState:!1}}function Xp(t){var s;const n=((s=t.plugins)!=null?s:[]).flat(Number.POSITIVE_INFINITY).map(u=>u),a=Object.entries(t.activities).reduce((u,[m,f])=>Yp(Js({},u),{[m]:"component"in f?f.component:f}),{}),r=()=>new Date().getTime()-t.transitionDuration*2,o=Tr({initialEvents:[an("Initialized",{transitionDuration:t.transitionDuration,eventDate:r()}),...Object.entries(t.activities).map(([u,m])=>an("ActivityRegistered",Js({activityName:u,eventDate:r()},"component"in m?{activityParamsSchema:m.paramsSchema}:null)))],plugins:[]}),[c,i]=Lf(),d=l.memo(u=>{const m=l.useMemo(()=>{const f=c();if(Vs()&&f)return f;const h=t.initialActivity?[an("Pushed",{activityId:It(),activityName:t.initialActivity(),activityParams:{},eventDate:r(),skipEnterActiveState:!1})]:[],v=Tr({initialEvents:[...o.pullEvents(),...h],initialContext:u.initialContext,plugins:n,handlers:{onInitialActivityIgnored:j=>{Vs()&&console.warn(`Stackflow - Some plugin overrides an "initialActivity" option. The "initialActivity" option you set to "${j[0].activityName}" in the "stackflow" is ignored.`)},onInitialActivityNotFound:()=>{Vs()&&console.warn("Stackflow - There is no initial activity. If you want to set the initial activity, add the `initialActivity` option of the `stackflow()` function or add a plugin that sets the initial activity. (e.g. `@stackflow/plugin-history-sync`)")}}});return Vs()&&(v.init(),i(v)),v},[]);return e.jsx(zo,{value:m.pluginInstances,children:e.jsx(_o,{coreStore:m,children:e.jsx(cp,{value:a,children:e.jsx(Wp,{initialContext:u.initialContext})})})})});return d.displayName="Stack",{activities:t.activities,Stack:d,useFlow:Fs,useStepFlow:Up,addActivity(u){if(c()){console.warn("Stackflow - `addActivity()` API cannot be called after a `<Stack />` component has been rendered");return}a[u.name]=l.memo(u.component),o.actions.dispatchEvent("ActivityRegistered",{activityName:u.name,activityParamsSchema:u.paramsSchema,eventDate:r()})},addPlugin(u){if(c()){console.warn("Stackflow - `addPlugin()` API cannot be called after a `<Stack />` component has been rendered");return}[u].flat(Number.POSITIVE_INFINITY).map(m=>m).forEach(m=>{n.push(m)})},actions:{getStack(){var u,m;return(m=(u=c())==null?void 0:u.actions.getStack())!=null?m:o.actions.getStack()},dispatchEvent(u,m){var f;return(f=c())==null?void 0:f.actions.dispatchEvent(u,m)},push(u,m,f){var h;const v=It();return(h=c())==null||h.actions.push({activityId:v,activityName:u,activityParams:m,skipEnterActiveState:Un(f).skipActiveState}),{activityId:v}},replace(u,m,f){var h,v,j;const p=(h=f?.activityId)!=null?h:It();return(j=c())==null||j.actions.replace({activityId:(v=f?.activityId)!=null?v:It(),activityName:u,activityParams:m,skipEnterActiveState:Un(f).skipActiveState}),{activityId:p}},pop(u,m){var f;let h=1,v={};typeof u=="object"&&(v=Js({},u)),typeof u=="number"&&(h=u),m&&(v=Js({},m));for(let j=0;j<h;j+=1)(f=c())==null||f.actions.pop({skipExitActiveState:j===0?Un(v).skipActiveState:!0})},stepPush(u,m){var f,h;const v=(f=c())==null?void 0:f.actions.getStack().activities,j=m?.targetActivityId?pn(m.targetActivityId):hn,p=v&&j(v);if(!p)throw new Error("The target activity is not found.");const x=typeof u=="function"?u(p.params):u,g=xn();return(h=c())==null?void 0:h.actions.stepPush({stepId:g,stepParams:x,targetActivityId:m?.targetActivityId})},stepReplace(u,m){var f,h;const v=(f=c())==null?void 0:f.actions.getStack().activities,j=m?.targetActivityId?pn(m.targetActivityId):hn,p=v&&j(v);if(!p)throw new Error("The target activity is not found.");const x=typeof u=="function"?u(p.params):u,g=xn();return(h=c())==null?void 0:h.actions.stepReplace({stepId:g,stepParams:x,targetActivityId:m?.targetActivityId})},stepPop(u){var m;return(m=c())==null?void 0:m.actions.stepPop({targetActivityId:u?.targetActivityId})}}}}function Zp(){return()=>({key:"plugin-renderer-basic",render({stack:t}){return e.jsx(e.Fragment,{children:t.render().activities.filter(s=>s.transitionState!=="exit-done").map(s=>e.jsx(l.Fragment,{children:s.render()},s.key))})}})}function eh(t){var s=t.match(/^var\((.*)\)$/);return s?s[1]:t}function Ws(t,s){var n={};{var a=t;for(var r in a){var o=a[r];o!=null&&(n[eh(r)]=o)}}return Object.defineProperty(n,"toString",{value:function(){return Object.keys(this).map(i=>"".concat(i,":").concat(this[i])).join(";")},writable:!1}),n}function th(t,s){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,s);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function sh(t){var s=th(t,"string");return typeof s=="symbol"?s:String(s)}function nh(t,s,n){return s=sh(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function qr(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,a)}return n}function Ur(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?qr(Object(n),!0).forEach(function(a){nh(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qr(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Vr(t,s){var n={};for(var a in t)n[a]=s(t[a],a);return n}var ah=(t,s,n)=>{for(var a of Object.keys(t)){var r;if(t[a]!==((r=s[a])!==null&&r!==void 0?r:n[a]))return!1}return!0},yt=t=>{var s=n=>{var a=t.defaultClassName,r=Ur(Ur({},t.defaultVariants),n);for(var o in r){var c,i=(c=r[o])!==null&&c!==void 0?c:t.defaultVariants[o];if(i!=null){var d=i;typeof d=="boolean"&&(d=d===!0?"true":"false");var u=t.variantClassNames[o][d];u&&(a+=" "+u)}}for(var[m,f]of t.compoundVariants)ah(m,r,t.defaultVariants)&&(a+=" "+f);return a};return s.variants=()=>Object.keys(t.variantClassNames),s.classNames={get base(){return t.defaultClassName.split(" ")[0]},get variants(){return Vr(t.variantClassNames,n=>Vr(n,a=>a.split(" ")[0]))}},s},rh=Object.defineProperty,Jr=Object.getOwnPropertySymbols,ih=Object.prototype.hasOwnProperty,oh=Object.prototype.propertyIsEnumerable,Kr=(t,s,n)=>s in t?rh(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,ch=(t,s)=>{for(var n in s||(s={}))ih.call(s,n)&&Kr(t,n,s[n]);if(Jr)for(var n of Jr(s))oh.call(s,n)&&Kr(t,n,s[n]);return t};function Ba(){const[t,s]=l.useReducer(()=>!0,!1);return l.useEffect(()=>{s()},[]),t}function Wt(){return Ff()}function Oo(){const t=Wt(),s=Ba();return ch({},s?{"data-stackflow-activity-id":t?.id,"data-stackflow-activity-is-active":t?.isActive,"data-stackflow-activity-transition-state":t?.transitionState}:null)}function Fo(t,s,n){const a=()=>{s.forEach(r=>{t.removeEventListener(r,a)}),n()};s.forEach(r=>{t.addEventListener(r,a)})}var lh=t=>(t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}),He=()=>{};function aa(t){requestAnimationFrame(()=>{requestAnimationFrame(()=>{t()})})}function dh({outerRef:t,innerRef:s,enable:n}){const[a,r]=l.useState(void 0);return l.useEffect(()=>{const o=t&&"current"in t&&t.current,c=s.current;return!n||!o||!c?He:lh(()=>{const d=o.clientWidth,u=c.offsetLeft,m=c.clientWidth,f=d-u-m,h=Math.max(u,f);r(d-2*h)})}),{maxWidth:a}}function Oa(t){const[s,n]=l.useState(void 0);return l.useEffect(()=>{aa(()=>{n(t)})},[t]),s}function uh(){return $f()}function Fa({ref:t}){const s=uh();l.useEffect(()=>{if(!s)return;const n=t.current;if(!n||s.globalTransitionState==="idle")return;const a=r=>{r.preventDefault(),r.stopPropagation()};return n.addEventListener("touchstart",a,{capture:!0}),n.addEventListener("touchmove",a,{capture:!0}),n.addEventListener("touchend",a,{capture:!0}),n.addEventListener("touchcancel",a,{capture:!0}),()=>{n.removeEventListener("touchstart",a,{capture:!0}),n.removeEventListener("touchmove",a,{capture:!0}),n.removeEventListener("touchend",a,{capture:!0}),n.removeEventListener("touchcancel",a,{capture:!0})}},[s?.globalTransitionState])}var ds={};function et({styleName:t,refs:s,effect:n,effectDeps:a}){const r=Wt();l.useEffect(()=>r?(ds[t]||(ds[t]=new Map),ds[t].set(r.zIndex,{refs:s,hasEffect:!!n}),()=>{ds[t].delete(r.zIndex)}):He,[r?.id,s,n]),l.useEffect(()=>{if(!r||!n)return He;const o=(()=>{let i=[];for(let d=1;d<=r.zIndex;d+=1){const u=ds[t].get(r.zIndex-d);if(u?.refs&&(i=[...i,...u.refs]),u?.hasEffect)break}return i})(),c=n({activityTransitionState:r.transitionState,refs:o});return()=>{c?.()}},[r?.transitionState,...a??[]])}function mh({refs:t}){et({styleName:"hide",refs:t,effect:({activityTransitionState:s,refs:n})=>{const a=()=>{n.forEach(r=>{if(!r.current)return;const o=r.current;o.style.display=""})};return s==="enter-done"?(n.forEach(r=>{if(!r.current)return;const o=r.current;o.style.display="none"}),()=>{a()}):(a(),He)}})}function fh({refs:t,transitionDuration:s,offsetStyles:n,hasEffect:a=!1}){et({styleName:"offset",refs:t,effect:a?({activityTransitionState:r,refs:o})=>{const c=()=>{aa(()=>{o.forEach(i=>{if(!i.current)return;const d=i.current;d.style.transform="",d.style.opacity="",Fo(d,["transitionend","transitioncancel"],()=>{d.style.transition=""})})})};switch(r){case"enter-active":case"enter-done":return o.forEach(i=>{i.current&&(i.current.style.transition=s,i.current.style.transform=n.transform,i.current.style.opacity=n.opacity)}),r==="enter-done"?()=>{c()}:He;case"exit-active":case"exit-done":return aa(()=>{c()}),He;default:return He}}:void 0})}var Ks="--stackflow-swipe-back-ratio";function ph({dimRef:t,edgeRef:s,paperRef:n,appBarRef:a,offset:r,transitionDuration:o,preventSwipeBack:c,moveAppBarTogether:i,getActivityTransitionState:d,onSwipeStart:u,onSwipeMove:m,onSwipeEnd:f,onTransitionEnd:h}){et({styleName:"swipe-back",refs:i&&a?[n,a]:[n],effect:({refs:v})=>{if(c||!t.current||!s.current||!n.current)return He;const j=t.current,p=s.current,x=n.current,g=a?.current;let y=null,N=null,b=null,A=[];const S=()=>{y=null,N=null,b=null,A=[]};let C=!1;function _({dx:k,ratio:M}){C||(C=!0,requestAnimationFrame(()=>{j.style.opacity=`${1-M}`,j.style.transition="0s",x.style.overflowY="hidden",x.style.transform=`translate3d(${k}px, 0, 0)`,x.style.transition="0s",i&&g&&(g.style.overflowY="hidden",g.style.transform=`translate3d(${k}px, 0, 0)`,g.style.transition="0s"),g?.style.setProperty(Ks,String(M)),v.forEach(E=>{var D,z;E.current&&(E.current.style.transform=`translate3d(${-1*(1-M)*r}px, 0, 0)`,E.current.style.transition="0s",((D=E.current.parentElement)==null?void 0:D.style.display)==="none"&&(E.current.parentElement.style.display="block"),(z=E.current.parentElement)==null||z.style.setProperty(Ks,String(M)))}),C=!1}))}function w({swiped:k}){return new Promise(M=>{requestAnimationFrame(()=>{j.style.opacity=`${k?0:1}`,j.style.transition=o,x.style.overflowY="hidden",x.style.transform=`translateX(${k?"100%":"0"})`,x.style.transition=o,i&&g&&(g.style.overflowY="hidden",g.style.transform=`translateX(${k?"100%":"0"})`,g.style.transition=o),v.forEach(D=>{D.current&&(D.current.style.transition=o,D.current.style.transform=`translate3d(${k?"0":`-${r/16}rem`}, 0, 0)`)});const E=[...A];M(),Fo(x,["transitionend","transitioncancel"],()=>{const D=k||d()==="exit-active"||d()==="exit-done";j.style.opacity="",x.style.overflowY="",x.style.transform="",i&&g&&(g.style.overflowY="",g.style.transform="",g.style.removeProperty("transition")),g?.style.removeProperty(Ks),v.forEach((z,F)=>{var B;if(!z.current)return;const Q=E[F];D?(z.current.style.transition="",z.current.style.transform="",z.current.parentElement&&(z.current.parentElement.style.display="")):Q&&(z.current.style.transition=Q.style.transition,z.current.style.transform=Q.style.transform,z.current.parentElement&&Q.parentElement&&(z.current.parentElement.style.display=Q.parentElement.style.display)),(B=z.current.parentElement)==null||B.style.removeProperty(Ks)}),h?.({swiped:k})})})})}const T=k=>{var M;const{activeElement:E}=document;(M=E?.blur)==null||M.call(E),y=b=k.touches[0].clientX,N=Date.now(),A=v.map(D=>D.current?{style:{transform:D.current.style.transform,transition:D.current.style.transition},parentElement:D.current.parentElement?{style:{display:D.current.parentElement.style.display}}:void 0}:{style:{transform:"",transition:""}}),u?.()},P=k=>{if(!y){S();return}b=k.touches[0].clientX;const M=b-y,E=M/x.clientWidth;_({dx:M,ratio:E}),m?.({dx:M,ratio:E})},I=()=>{if(!y||!N||!b){S();return}const k=Date.now(),E=(b-y)/(k-N)>1||b/x.clientWidth>.4;f?.({swiped:E}),Promise.resolve().then(()=>w({swiped:E})).then(()=>S())};return p.addEventListener("touchstart",T,{passive:!0}),p.addEventListener("touchmove",P,{passive:!0}),p.addEventListener("touchend",I,{passive:!0}),p.addEventListener("touchcancel",I,{passive:!0}),()=>{p.removeEventListener("touchstart",T),p.removeEventListener("touchmove",P),p.removeEventListener("touchend",I),p.removeEventListener("touchcancel",I)}},effectDeps:[c]})}function Is(){var t;const s=Wt();return((t=s?.zIndex)!=null?t:0)*5}var hh=Object.defineProperty,xh=Object.defineProperties,gh=Object.getOwnPropertyDescriptors,Gr=Object.getOwnPropertySymbols,vh=Object.prototype.hasOwnProperty,yh=Object.prototype.propertyIsEnumerable,Qr=(t,s,n)=>s in t?hh(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,kt=(t,s)=>{for(var n in s||(s={}))vh.call(s,n)&&Qr(t,n,s[n]);if(Gr)for(var n of Gr(s))yh.call(s,n)&&Qr(t,n,s[n]);return t},xs=(t,s)=>xh(t,gh(s)),bh=t=>e.jsx("svg",{className:t.className,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.7241 2.76052C17.105 3.16043 17.0896 3.79341 16.6897 4.17431L8.45 12.0222L16.6896 19.8689C17.0896 20.2498 17.105 20.8827 16.7242 21.2827C16.3433 21.6826 15.7103 21.6981 15.3104 21.3172L6.31037 12.7464C6.11218 12.5576 6.00001 12.2959 6 12.0222C5.99999 11.7486 6.11215 11.4868 6.31032 11.2981L15.3103 2.72608C15.7102 2.34518 16.3432 2.3606 16.7241 2.76052Z",fill:"currentColor"})}),Yr=bh,jh=t=>e.jsx("svg",{className:t.className,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20.7071 4.70711C21.0976 4.31658 21.0976 3.68342 20.7071 3.29289C20.3166 2.90237 19.6834 2.90237 19.2929 3.29289L12 10.5858L4.70711 3.29289C4.31658 2.90237 3.68342 2.90237 3.29289 3.29289C2.90237 3.68342 2.90237 4.31658 3.29289 4.70711L10.5858 12L3.29289 19.2929C2.90237 19.6834 2.90237 20.3166 3.29289 20.7071C3.68342 21.0976 4.31658 21.0976 4.70711 20.7071L12 13.4142L19.2929 20.7071C19.6834 21.0976 20.3166 21.0976 20.7071 20.7071C21.0976 20.3166 21.0976 19.6834 20.7071 19.2929L13.4142 12L20.7071 4.70711Z",fill:"currentColor"})}),Xr=jh,$={backgroundColor:"var(--stackflow-plugin-basic-ui-background-color)",backgroundImage:"var(--stackflow-plugin-basic-ui-background-image)",dimBackgroundColor:"var(--stackflow-plugin-basic-ui-dim-background-color)",dimHeight:"var(--stackflow-plugin-basic-ui-dim-height)",transitionDuration:"var(--stackflow-plugin-basic-ui-transition-duration)",computedTransitionDuration:"var(--stackflow-plugin-basic-ui-computed-transition-duration)",defaultTransitionOffSet:"var(--stackflow-plugin-basic-ui-default-transition-off-set)",appBar:{borderColor:"var(--stackflow-plugin-basic-ui-app-bar-border-color)",borderColorTransitionDuration:"var(--stackflow-plugin-basic-ui-app-bar-border-color-transition-duration)",borderSize:"var(--stackflow-plugin-basic-ui-app-bar-border-size)",height:"var(--stackflow-plugin-basic-ui-app-bar-height)",heightTransitionDuration:"var(--stackflow-plugin-basic-ui-app-bar-height-transition-duration)",minHeight:"var(--stackflow-plugin-basic-ui-app-bar-min-height)",iconColor:"var(--stackflow-plugin-basic-ui-app-bar-icon-color)",iconColorTransitionDuration:"var(--stackflow-plugin-basic-ui-app-bar-icon-color-transition-duration)",textColor:"var(--stackflow-plugin-basic-ui-app-bar-text-color)",textColorTransitionDuration:"var(--stackflow-plugin-basic-ui-app-bar-text-color-transition-duration)",backgroundColor:"var(--stackflow-plugin-basic-ui-app-bar-background-color)",backgroundColorTransitionDuration:"var(--stackflow-plugin-basic-ui-app-bar-background-color-transition-duration)",backgroundImage:"var(--stackflow-plugin-basic-ui-app-bar-background-image)",backgroundImageTransitionDuration:"var(--stackflow-plugin-basic-ui-app-bar-background-image-transition-duration)",overflow:"var(--stackflow-plugin-basic-ui-app-bar-overflow)",minSafeAreaInsetTop:"var(--stackflow-plugin-basic-ui-app-bar-min-safe-area-inset-top)",containerPadding:"var(--stackflow-plugin-basic-ui-app-bar-container-padding)",itemGap:"var(--stackflow-plugin-basic-ui-app-bar-item-gap)",fontSize:"var(--stackflow-plugin-basic-ui-app-bar-font-size)",lineHeight:"var(--stackflow-plugin-basic-ui-app-bar-line-height)",hitSlop:"var(--stackflow-plugin-basic-ui-app-bar-hit-slop)"},bottomSheet:{borderRadius:"var(--stackflow-plugin-basic-ui-bottom-sheet-border-radius)"},modal:{borderRadius:"var(--stackflow-plugin-basic-ui-modal-border-radius)",maxWidth:"var(--stackflow-plugin-basic-ui-modal-max-width)"},edge:{width:"var(--stackflow-plugin-basic-ui-edge-width)"}},Nh=yt({defaultClassName:"_1q6dj2j2",variantClassNames:{theme:{android:"_1q6dj2j0",cupertino:"_1q6dj2j1"}},defaultVariants:{},compoundVariants:[]});function wh(t){return t.filter(s=>s!=null)}function $s(t){return Object.entries(t).reduce((s,[n,a])=>(a!=null&&(s[n]=a),s),{})}var Wo=l.createContext({theme:"android"}),Ch=Wo.Provider;function $o(){return l.useContext(Wo)}var kh=t=>()=>({key:"basic-ui",wrapStack({stack:s,initialContext:n}){var a,r,o,c,i,d,u,m,f,h,v,j,p,x,g,y,N;const b=typeof t=="function"?t({initialContext:n}):t;return e.jsx(Ch,{value:xs(kt({},b),{theme:(a=n?.theme)!=null?a:b.theme}),children:e.jsx("div",{className:wh([Nh({theme:(r=n?.theme)!=null?r:b.theme}),b.rootClassName]).join(" "),style:Ws($s({[$.backgroundColor]:b.backgroundColor,[$.backgroundImage]:b.backgroundImage,[$.dimBackgroundColor]:b.dimBackgroundColor,[$.dimHeight]:b.dimHeight,[$.transitionDuration]:`${s.transitionDuration}ms`,[$.computedTransitionDuration]:s.globalTransitionState==="loading"?`${s.transitionDuration}ms`:"0ms",[$.defaultTransitionOffSet]:b.defaultTransitionOffSet,[$.appBar.borderColor]:(o=b.appBar)==null?void 0:o.borderColor,[$.appBar.borderSize]:(c=b.appBar)==null?void 0:c.borderSize,[$.appBar.height]:(i=b.appBar)==null?void 0:i.height,[$.appBar.minHeight]:(d=b.appBar)==null?void 0:d.minHeight,[$.appBar.iconColor]:(u=b.appBar)==null?void 0:u.iconColor,[$.appBar.textColor]:(m=b.appBar)==null?void 0:m.textColor,[$.appBar.minSafeAreaInsetTop]:(f=b.appBar)==null?void 0:f.minSafeAreaInsetTop,[$.bottomSheet.borderRadius]:(h=b.bottomSheet)==null?void 0:h.borderRadius,[$.modal.borderRadius]:(v=b.modal)==null?void 0:v.borderRadius,[$.appBar.containerPadding]:(j=b.appBar)==null?void 0:j.containerPadding,[$.appBar.fontSize]:(p=b.appBar)==null?void 0:p.fontSize,[$.appBar.lineHeight]:(x=b.appBar)==null?void 0:x.lineHeight,[$.appBar.hitSlop]:(g=b.appBar)==null?void 0:g.hitSlop,[$.appBar.itemGap]:(y=b.appBar)==null?void 0:y.itemGap,[$.edge.width]:(N=b.edge)==null?void 0:N.width})),children:s.render()})})}}),Sh=yt({defaultClassName:"_1yk3a452 dhthxq4 dhthxq0 dhthxqh _1yk3a451",variantClassNames:{activityEnterStyle:{slideInLeft:"_1yk3a453"},enterStyle:{cover:"_1yk3a454"},border:{true:"_1yk3a455"},modalPresentationStyle:{fullScreen:"_1yk3a456"}},defaultVariants:{},compoundVariants:[[{activityEnterStyle:"slideInLeft",enterStyle:"cover"},"_1yk3a457"]]}),Zr="_1yk3a45b dhthxq9 dhthxq7 dhthxqb dhthxqf dhthxqi",Ah="dhthxq9 dhthxq7 dhthxq8 _1yk3a450",Ih="_1yk3a45e",Th="_1yk3a45f dhthxqi dhthxq4 dhthxq2 dhthxqf",Ph="_1yk3a45g dhthxqc dhthxqd dhthxq0",_h="_1yk3a45b dhthxq9 dhthxq7 dhthxqb dhthxqf dhthxqi",Eh="_1yk3a459 dhthxqa dhthxq7 _1yk3a451",Mh="_1yk3a45a dhthxq9 dhthxq7 dhthxq1 _1yk3a450",Rh="_1yk3a45h dhthxq9 dhthxq7 dhthxq1 dhthxq5 _1yk3a450",zh="_1yk3a458",Dh=yt({defaultClassName:"dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 dhthxqc",variantClassNames:{transitionState:{"enter-active":"_1dlf434a","enter-done":"_1dlf434b","exit-active":"_1dlf434c","exit-done":"_1dlf434d"},hasAppBar:{true:"_1dlf434j"}},defaultVariants:{},compoundVariants:[]}),Lh="_1dlf434k dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 _1dlf4347 _1dlf4349",Bh=yt({defaultClassName:"_1dlf434r dhthxq4 dhthxq2 dhthxq3 dhthxq1",variantClassNames:{hasAppBar:{true:"_1dlf434s"}},defaultVariants:{},compoundVariants:[]}),Oh="_1dlf434a",Fh="_1dlf434b",Wh="_1dlf434c",$h="_1dlf434d",Hh=yt({defaultClassName:"_1dlf434l dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 _1dlf4348 _1dlf4349",variantClassNames:{hasAppBar:{true:"_1dlf434m dhthxqg"},modalPresentationStyle:{fullScreen:"_1dlf434n"},activityEnterStyle:{slideInLeft:"_1dlf434o"}},defaultVariants:{},compoundVariants:[]}),qh=yt({defaultClassName:"_1dlf434p dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3",variantClassNames:{hasAppBar:{true:"_1dlf434q"}},defaultVariants:{},compoundVariants:[]}),Jt={transitionDuration:"var(--_1dlf4340)",zIndexes:{dim:"var(--_1dlf4341)",paper:"var(--_1dlf4342)",edge:"var(--_1dlf4343)",appBar:"var(--_1dlf4344)"},appBar:{center:{mainWidth:"var(--_1dlf4346)"}}},Ho=l.forwardRef(({title:t,renderLeft:s,renderRight:n,backButton:a,closeButton:r,closeButtonLocation:o="left",border:c=!0,modalPresentationStyle:i,activityEnterStyle:d,iconColor:u,iconColorTransitionDuration:m,textColor:f,textColorTransitionDuration:h,borderColor:v,borderColorTransitionDuration:j,borderSize:p,height:x,heightTransitionDuration:g,overflow:y,backgroundColor:N,backgroundColorTransitionDuration:b,backgroundImage:A,backgroundImageTransitionDuration:S,onTopClick:C,enterStyle:_,className:w,minHeight:T,fontSize:P,lineHeight:I,hitSlop:k,containerPadding:M,itemGap:E},D)=>{var z,F;const B=Fs(),Q=Wt(),Y=Oo();Ba();const X=$o(),Z=(z=X.appBar)==null?void 0:z.closeButton,W=(F=X.appBar)==null?void 0:F.backButton,J=l.useRef(null),{maxWidth:V}=dh({outerRef:D,innerRef:J,enable:X.theme==="cupertino"}),ce=(X.theme==="cupertino"&&i!=="fullScreen"||d==="slideInLeft")&&_!=="cover",pe=ee=>{a&&"onClick"in a&&a.onClick&&a.onClick(ee),ee.defaultPrevented||B.pop()},is=()=>{var ee,ue;return!Q||Q.isRoot?null:!a&&!W?e.jsx("button",{type:"button","aria-label":"Go Back",className:Zr,onClick:pe,children:e.jsx(Yr,{})}):a&&"render"in a&&a.render?(ee=a.render)==null?void 0:ee.call(a):W&&"render"in W&&W.render?(ue=W.render)==null?void 0:ue.call(W):e.jsx("button",{type:"button",className:Zr,"aria-label":a&&"ariaLabel"in a?a.ariaLabel:W&&"ariaLabel"in W?W.ariaLabel:void 0,onClick:pe,children:a&&"renderIcon"in a&&a.renderIcon?a.renderIcon():W&&"renderIcon"in W&&W.renderIcon?W.renderIcon():i==="fullScreen"?e.jsx(Xr,{}):e.jsx(Yr,{})})},O=ee=>{var ue;r&&"onClick"in r&&r.onClick&&r.onClick(ee),!ee.defaultPrevented&&Z&&"onClick"in Z&&((ue=Z.onClick)==null||ue.call(Z,ee))},de=()=>{var ee;const ue=!Q||Q.isRoot,De=he=>he&&"render"in he&&he.render||he&&"renderIcon"in he&&he.renderIcon||he&&"onClick"in he&&he.onClick;return!(De(r)||De((ee=X.appBar)==null?void 0:ee.closeButton))||!ue?null:r&&"render"in r&&r.render?r.render():Z&&"render"in Z&&Z.render?Z.render():e.jsx("button",{type:"button",className:_h,"aria-label":r&&"ariaLabel"in r?r.ariaLabel:Z&&"ariaLabel"in Z?Z.ariaLabel:void 0,onClick:O,children:r&&"renderIcon"in r&&r.renderIcon?r.renderIcon():Z&&"renderIcon"in Z&&Z.renderIcon?Z.renderIcon():e.jsx(Xr,{})})};return e.jsxs("div",xs(kt({ref:D,className:In(Sh({border:c,modalPresentationStyle:i,activityEnterStyle:d,enterStyle:_}),w),style:Ws($s({[$.appBar.iconColor]:u,[$.appBar.iconColorTransitionDuration]:m,[$.appBar.textColor]:f,[$.appBar.textColorTransitionDuration]:h,[$.appBar.borderColor]:v,[$.appBar.borderColorTransitionDuration]:j,[$.appBar.borderSize]:p,[$.appBar.height]:x,[$.appBar.heightTransitionDuration]:g,[$.appBar.overflow]:y,[$.appBar.backgroundColor]:N??(ce?$.backgroundColor:"transparent"),[$.appBar.backgroundColorTransitionDuration]:b,[$.appBar.backgroundImage]:A??(ce?$.appBar.backgroundImage:"none"),[$.appBar.backgroundImageTransitionDuration]:S,[Jt.appBar.center.mainWidth]:`${V}px`,[$.appBar.minHeight]:T,[$.appBar.containerPadding]:M,[$.appBar.fontSize]:P,[$.appBar.hitSlop]:k,[$.appBar.lineHeight]:I,[$.appBar.itemGap]:E})),"data-part":"appBar"},Y),{children:[e.jsx("div",{className:zh}),e.jsxs("div",{className:Eh,children:[e.jsxs("div",{className:Mh,children:[o==="left"&&de(),is(),s?.()]}),e.jsx("div",{ref:J,className:Ah,children:e.jsxs("div",{className:Ih,children:[typeof t=="string"?e.jsx("div",{className:Ph,children:t}):t,e.jsx("button",{className:Th,type:"button",onClick:C})]})}),e.jsxs("div",{className:Rh,children:[n?.(),o==="right"&&de()]})]})]}))});Ho.displayName="AppBar";var Uh=Ho,Vh=32,ei=80,Jh=l.createContext(null),Kh=({backgroundColor:t,backgroundImage:s,dimBackgroundColor:n,appBar:a,preventSwipeBack:r,CUPERTINO_ONLY_modalPresentationStyle:o,ANDROID_ONLY_activityEnterStyle:c,className:i,children:d})=>{var u;const m=$o(),f=Wt(),h=Oo();Ba();const{pop:v}=Fs(),j=l.useRef(null),p=l.useRef(null),x=l.useRef(null),g=l.useRef(null),y=l.useRef(null),N=l.useRef(null),b=m.theme==="cupertino"?o:void 0,A=m.theme==="android"?c:void 0,S=r||b==="fullScreen",C=!!a,_=Is();let w,T,P,I;m.theme==="cupertino"?(w=_+(b==="fullScreen"?2:0),T=_+(C&&b!=="fullScreen"?a.enterStyle==="cover"?2:1:3),P=_+4,I=_+7):(w=_,T=_+(A==="slideInLeft"&&a?.enterStyle!=="cover"?0:2),P=_+4,I=_+(A==="slideInLeft"?6:4));const k=(u=f?.transitionState)!=null?u:"enter-done",M=Oa(k);mh({refs:[j]}),fh({refs:(m.theme==="cupertino"||A==="slideInLeft")&&a?.enterStyle!=="cover"?[x]:[x,y],offsetStyles:m.theme==="cupertino"?{transform:`translate3d(-${ei/16}rem, 0, 0)`,opacity:"1"}:A==="slideInLeft"?{transform:"translate3d(-50%, 0, 0)",opacity:"0"}:{transform:`translate3d(0, -${Vh/16}rem, 0)`,opacity:"1"},transitionDuration:$.computedTransitionDuration,hasEffect:b!=="fullScreen"}),ph({dimRef:p,edgeRef:g,paperRef:x,appBarRef:y,offset:ei,transitionDuration:$.transitionDuration,moveAppBarTogether:a?.enterStyle==="cover",preventSwipeBack:S||m.theme!=="cupertino",getActivityTransitionState(){const D=x.current,z=D?.parentElement;return z?z.classList.contains(Oh)?"enter-active":z.classList.contains(Fh)?"enter-done":z.classList.contains(Wh)?"exit-active":z.classList.contains($h)?"exit-done":null:null},onSwipeEnd({swiped:D}){D&&v()}});const E=D=>{var z,F;(z=a?.onTopClick)==null||z.call(a,D),D.defaultPrevented||(F=N.current)==null||F.scroll({top:0,behavior:"smooth"})};return Fa({ref:j}),e.jsx(Jh.Provider,{value:l.useMemo(()=>({scroll({top:D}){var z;(z=N?.current)==null||z.scroll({top:D,behavior:"smooth"})},zIndices:{dim:w,paper:T,edge:P,appBar:I}}),[N,w,T,P,I]),children:e.jsxs("div",xs(kt({ref:j,className:In(Dh({hasAppBar:C,transitionState:k==="enter-done"||k==="exit-done"?k:M}),i),style:Ws($s({[$.backgroundColor]:t,[$.backgroundImage]:s,[$.dimBackgroundColor]:n,[$.appBar.height]:a?.height,[$.appBar.heightTransitionDuration]:a?.heightTransitionDuration,[Jt.zIndexes.dim]:`${w}`,[Jt.zIndexes.paper]:`${T}`,[Jt.zIndexes.edge]:`${P}`,[Jt.zIndexes.appBar]:`${I}`,[Jt.transitionDuration]:k==="enter-active"||k==="exit-active"?$.computedTransitionDuration:"0ms"})),"data-stackflow-component-name":"AppScreen"},h),{children:[A!=="slideInLeft"&&e.jsx("div",kt({ref:p,className:Lh,"data-part":"dim"},h)),a&&e.jsx(Uh,xs(kt({},a),{ref:y,modalPresentationStyle:b,activityEnterStyle:A,onTopClick:E})),e.jsx("div",xs(kt({ref:x,className:Hh({hasAppBar:C,modalPresentationStyle:b,activityEnterStyle:A}),"data-part":"paper"},h),{children:e.jsx("div",{ref:N,className:qh({hasAppBar:C}),children:d})}),f?.id),!f?.isRoot&&m.theme==="cupertino"&&!S&&e.jsx("div",kt({ref:g,className:Bh({hasAppBar:C}),"data-part":"edge"},h))]}))})},te=Kh,Gh=yt({defaultClassName:"dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 dhthxqc",variantClassNames:{transitionState:{"enter-active":"_1ht38h04","enter-done":"_1ht38h05","exit-active":"_1ht38h06","exit-done":"_1ht38h07"}},defaultVariants:{},compoundVariants:[]}),Qh="_1ht38h0d dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 dhthxqc dhthxqa dhthxq7 _1ht38h03",Yh="_1ht38h0e dhthxqc _1ht38h03",Vn={transitionDuration:"var(--_1ht38h00)",zIndexes:{dim:"var(--_1ht38h01)",paper:"var(--_1ht38h02)"}},qo=({borderRadius:t="1rem",backgroundColor:s,backgroundImage:n,dimBackgroundColor:a,paperRef:r,onOutsideClick:o,children:c,className:i})=>{var d;const u=Wt(),{pop:m}=Fs(),f=l.useRef(null),h=l.useRef(null);et({styleName:"hide",refs:[f]}),et({styleName:"offset",refs:[h]}),et({styleName:"swipe-back",refs:[h]});const v=l.useRef(!1),j=N=>{o?.(N),!N.defaultPrevented&&(v.current||(v.current=!0,m()))},p=N=>{N.stopPropagation()},x=Is()+3,g=Is()+4,y=(d=u?.transitionState)!=null?d:"enter-done";return Fa({ref:f}),e.jsx("div",{className:In(Gh({transitionState:Oa(y)}),i),ref:f,style:Ws($s({[$.bottomSheet.borderRadius]:t,[$.backgroundColor]:s,[$.backgroundImage]:n,[$.dimBackgroundColor]:a,[Vn.zIndexes.dim]:`${x}`,[Vn.zIndexes.paper]:`${g}`,[Vn.transitionDuration]:y==="enter-active"||y==="exit-active"?$.computedTransitionDuration:"0ms"})),"data-stackflow-component-name":"BottomSheet","data-stackflow-activity-id":u?.id,"data-stackflow-activity-is-active":u?.isActive,children:e.jsx("div",{className:Qh,ref:h,onClick:j,children:e.jsx("div",{className:Yh,ref:r,onClick:p,children:c})})})};qo.displayName="BottomSheet";var Xh=qo,Zh=yt({defaultClassName:"dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 dhthxqc",variantClassNames:{transitionState:{"enter-active":"_5ozg8c4","enter-done":"_5ozg8c5","exit-active":"_5ozg8c6","exit-done":"_5ozg8c7"}},defaultVariants:{},compoundVariants:[]}),ex="_5ozg8cd dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 dhthxqc dhthxq9 dhthxq7 dhthxqb _5ozg8c3",tx="_5ozg8ce dhthxqc _5ozg8c3",Jn={transitionDuration:"var(--_5ozg8c0)",zIndexes:{dim:"var(--_5ozg8c1)",paper:"var(--_5ozg8c2)"}},Uo=({backgroundColor:t,backgroundImage:s,dimBackgroundColor:n,borderRadius:a="1rem",maxWidth:r,onOutsideClick:o,children:c,className:i})=>{var d;const u=Wt(),{pop:m}=Fs(),f=l.useRef(null),h=l.useRef(null);et({styleName:"hide",refs:[f]}),et({styleName:"offset",refs:[h]}),et({styleName:"swipe-back",refs:[h]});const v=l.useRef(!1),j=N=>{o?.(N),!N.defaultPrevented&&(v.current||(v.current=!0,m()))},p=N=>{N.stopPropagation()},x=Is()+3,g=Is()+4,y=(d=u?.transitionState)!=null?d:"enter-done";return Fa({ref:f}),e.jsx("div",{className:In(Zh({transitionState:Oa(y)}),i),ref:f,style:Ws($s({[$.backgroundColor]:t,[$.backgroundImage]:s,[$.dimBackgroundColor]:n,[$.modal.borderRadius]:a,[$.modal.maxWidth]:r,[Jn.zIndexes.dim]:`${x}`,[Jn.zIndexes.paper]:`${g}`,[Jn.transitionDuration]:y==="enter-active"||y==="exit-active"?$.computedTransitionDuration:"0ms"})),"data-stackflow-component-name":"Modal","data-stackflow-activity-id":u?.id,"data-stackflow-activity-is-active":u?.isActive,children:e.jsx("div",{className:ex,ref:h,onClick:j,children:e.jsx("div",{className:tx,onClick:p,children:c})})})};Uo.displayName="Modal";var sx=Uo,nx=Object.defineProperty,K=(t,s)=>nx(t,"name",{value:s,configurable:!0}),Yt=class{type=3;name="";prefix="";value="";suffix="";modifier=3;constructor(t,s,n,a,r,o){this.type=t,this.name=s,this.prefix=n,this.value=a,this.suffix=r,this.modifier=o}hasCustomName(){return this.name!==""&&typeof this.name!="number"}};K(Yt,"Part");var ax=/[$_\p{ID_Start}]/u,rx=/[$_\u200C\u200D\p{ID_Continue}]/u,ra=".*";function Vo(t,s){return(s?/^[\x00-\xFF]*$/:/^[\x00-\x7F]*$/).test(t)}K(Vo,"isASCII");function Wa(t,s=!1){let n=[],a=0;for(;a<t.length;){let r=t[a],o=K(function(c){if(!s)throw new TypeError(c);n.push({type:"INVALID_CHAR",index:a,value:t[a++]})},"ErrorOrInvalid");if(r==="*"){n.push({type:"ASTERISK",index:a,value:t[a++]});continue}if(r==="+"||r==="?"){n.push({type:"OTHER_MODIFIER",index:a,value:t[a++]});continue}if(r==="\\"){n.push({type:"ESCAPED_CHAR",index:a++,value:t[a++]});continue}if(r==="{"){n.push({type:"OPEN",index:a,value:t[a++]});continue}if(r==="}"){n.push({type:"CLOSE",index:a,value:t[a++]});continue}if(r===":"){let c="",i=a+1;for(;i<t.length;){let d=t.substr(i,1);if(i===a+1&&ax.test(d)||i!==a+1&&rx.test(d)){c+=t[i++];continue}break}if(!c){o(`Missing parameter name at ${a}`);continue}n.push({type:"NAME",index:a,value:c}),a=i;continue}if(r==="("){let c=1,i="",d=a+1,u=!1;if(t[d]==="?"){o(`Pattern cannot start with "?" at ${d}`);continue}for(;d<t.length;){if(!Vo(t[d],!1)){o(`Invalid character '${t[d]}' at ${d}.`),u=!0;break}if(t[d]==="\\"){i+=t[d++]+t[d++];continue}if(t[d]===")"){if(c--,c===0){d++;break}}else if(t[d]==="("&&(c++,t[d+1]!=="?")){o(`Capturing groups are not allowed at ${d}`),u=!0;break}i+=t[d++]}if(u)continue;if(c){o(`Unbalanced pattern at ${a}`);continue}if(!i){o(`Missing pattern at ${a}`);continue}n.push({type:"REGEX",index:a,value:i}),a=d;continue}n.push({type:"CHAR",index:a,value:t[a++]})}return n.push({type:"END",index:a,value:""}),n}K(Wa,"lexer");function $a(t,s={}){let n=Wa(t);s.delimiter??="/#?",s.prefixes??="./";let a=`[^${Se(s.delimiter)}]+?`,r=[],o=0,c=0,i=new Set,d=K(y=>{if(c<n.length&&n[c].type===y)return n[c++].value},"tryConsume"),u=K(()=>d("OTHER_MODIFIER")??d("ASTERISK"),"tryConsumeModifier"),m=K(y=>{let N=d(y);if(N!==void 0)return N;let{type:b,index:A}=n[c];throw new TypeError(`Unexpected ${b} at ${A}, expected ${y}`)},"mustConsume"),f=K(()=>{let y="",N;for(;N=d("CHAR")??d("ESCAPED_CHAR");)y+=N;return y},"consumeText"),h=K(y=>y,"DefaultEncodePart"),v=s.encodePart||h,j="",p=K(y=>{j+=y},"appendToPendingFixedValue"),x=K(()=>{j.length&&(r.push(new Yt(3,"","",v(j),"",3)),j="")},"maybeAddPartFromPendingFixedValue"),g=K((y,N,b,A,S)=>{let C=3;switch(S){case"?":C=1;break;case"*":C=0;break;case"+":C=2;break}if(!N&&!b&&C===3){p(y);return}if(x(),!N&&!b){if(!y)return;r.push(new Yt(3,"","",v(y),"",C));return}let _;b?b==="*"?_=ra:_=b:_=a;let w=2;_===a?(w=1,_=""):_===ra&&(w=0,_="");let T;if(N?T=N:b&&(T=o++),i.has(T))throw new TypeError(`Duplicate name '${T}'.`);i.add(T),r.push(new Yt(w,T,v(y),_,v(A),C))},"addPart");for(;c<n.length;){let y=d("CHAR"),N=d("NAME"),b=d("REGEX");if(!N&&!b&&(b=d("ASTERISK")),N||b){let S=y??"";s.prefixes.indexOf(S)===-1&&(p(S),S=""),x();let C=u();g(S,N,b,"",C);continue}let A=y??d("ESCAPED_CHAR");if(A){p(A);continue}if(d("OPEN")){let S=f(),C=d("NAME"),_=d("REGEX");!C&&!_&&(_=d("ASTERISK"));let w=f();m("CLOSE");let T=u();g(S,C,_,w,T);continue}x(),m("END")}return r}K($a,"parse");function Se(t){return t.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}K(Se,"escapeString");function ia(t){return t&&t.ignoreCase?"ui":"u"}K(ia,"flags");function Jo(t,s,n){return Ha($a(t,n),s,n)}K(Jo,"stringToRegexp");function Tt(t){switch(t){case 0:return"*";case 1:return"?";case 2:return"+";case 3:return""}}K(Tt,"modifierToString");function Ha(t,s,n={}){n.delimiter??="/#?",n.prefixes??="./",n.sensitive??=!1,n.strict??=!1,n.end??=!0,n.start??=!0,n.endsWith="";let a=n.start?"^":"";for(let i of t){if(i.type===3){i.modifier===3?a+=Se(i.value):a+=`(?:${Se(i.value)})${Tt(i.modifier)}`;continue}s&&s.push(i.name);let d=`[^${Se(n.delimiter)}]+?`,u=i.value;if(i.type===1?u=d:i.type===0&&(u=ra),!i.prefix.length&&!i.suffix.length){i.modifier===3||i.modifier===1?a+=`(${u})${Tt(i.modifier)}`:a+=`((?:${u})${Tt(i.modifier)})`;continue}if(i.modifier===3||i.modifier===1){a+=`(?:${Se(i.prefix)}(${u})${Se(i.suffix)})`,a+=Tt(i.modifier);continue}a+=`(?:${Se(i.prefix)}`,a+=`((?:${u})(?:`,a+=Se(i.suffix),a+=Se(i.prefix),a+=`(?:${u}))*)${Se(i.suffix)})`,i.modifier===0&&(a+="?")}let r=`[${Se(n.endsWith)}]|$`,o=`[${Se(n.delimiter)}]`;if(n.end)return n.strict||(a+=`${o}?`),n.endsWith.length?a+=`(?=${r})`:a+="$",new RegExp(a,ia(n));n.strict||(a+=`(?:${o}(?=${r}))?`);let c=!1;if(t.length){let i=t[t.length-1];i.type===3&&i.modifier===3&&(c=n.delimiter.indexOf(i)>-1)}return c||(a+=`(?=${o}|${r})`),new RegExp(a,ia(n))}K(Ha,"partsToRegexp");var ot={delimiter:"",prefixes:"",sensitive:!0,strict:!0},ix={delimiter:".",prefixes:"",sensitive:!0,strict:!0},ox={delimiter:"/",prefixes:"/",sensitive:!0,strict:!0};function Ko(t,s){return t.length?t[0]==="/"?!0:!s||t.length<2?!1:(t[0]=="\\"||t[0]=="{")&&t[1]=="/":!1}K(Ko,"isAbsolutePathname");function qa(t,s){return t.startsWith(s)?t.substring(s.length,t.length):t}K(qa,"maybeStripPrefix");function Go(t,s){return t.endsWith(s)?t.substr(0,t.length-s.length):t}K(Go,"maybeStripSuffix");function Ua(t){return!t||t.length<2?!1:t[0]==="["||(t[0]==="\\"||t[0]==="{")&&t[1]==="["}K(Ua,"treatAsIPv6Hostname");var Qo=["ftp","file","http","https","ws","wss"];function Va(t){if(!t)return!0;for(let s of Qo)if(t.test(s))return!0;return!1}K(Va,"isSpecialScheme");function Yo(t,s){if(t=qa(t,"#"),s||t==="")return t;let n=new URL("https://example.com");return n.hash=t,n.hash?n.hash.substring(1,n.hash.length):""}K(Yo,"canonicalizeHash");function Xo(t,s){if(t=qa(t,"?"),s||t==="")return t;let n=new URL("https://example.com");return n.search=t,n.search?n.search.substring(1,n.search.length):""}K(Xo,"canonicalizeSearch");function Zo(t,s){return s||t===""?t:Ua(t)?Ga(t):Ka(t)}K(Zo,"canonicalizeHostname");function ec(t,s){if(s||t==="")return t;let n=new URL("https://example.com");return n.password=t,n.password}K(ec,"canonicalizePassword");function tc(t,s){if(s||t==="")return t;let n=new URL("https://example.com");return n.username=t,n.username}K(tc,"canonicalizeUsername");function sc(t,s,n){if(n||t==="")return t;if(s&&!Qo.includes(s))return new URL(`${s}:${t}`).pathname;let a=t[0]=="/";return t=new URL(a?t:"/-"+t,"https://example.com").pathname,a||(t=t.substring(2,t.length)),t}K(sc,"canonicalizePathname");function nc(t,s,n){return Ja(s)===t&&(t=""),n||t===""?t:Qa(t)}K(nc,"canonicalizePort");function ac(t,s){return t=Go(t,":"),s||t===""?t:Rn(t)}K(ac,"canonicalizeProtocol");function Ja(t){switch(t){case"ws":case"http":return"80";case"wws":case"https":return"443";case"ftp":return"21";default:return""}}K(Ja,"defaultPortForProtocol");function Rn(t){if(t==="")return t;if(/^[-+.A-Za-z0-9]*$/.test(t))return t.toLowerCase();throw new TypeError(`Invalid protocol '${t}'.`)}K(Rn,"protocolEncodeCallback");function rc(t){if(t==="")return t;let s=new URL("https://example.com");return s.username=t,s.username}K(rc,"usernameEncodeCallback");function ic(t){if(t==="")return t;let s=new URL("https://example.com");return s.password=t,s.password}K(ic,"passwordEncodeCallback");function Ka(t){if(t==="")return t;if(/[\t\n\r #%/:<>?@[\]^\\|]/g.test(t))throw new TypeError(`Invalid hostname '${t}'`);let s=new URL("https://example.com");return s.hostname=t,s.hostname}K(Ka,"hostnameEncodeCallback");function Ga(t){if(t==="")return t;if(/[^0-9a-fA-F[\]:]/g.test(t))throw new TypeError(`Invalid IPv6 hostname '${t}'`);return t.toLowerCase()}K(Ga,"ipv6HostnameEncodeCallback");function Qa(t){if(t===""||/^[0-9]*$/.test(t)&&parseInt(t)<=65535)return t;throw new TypeError(`Invalid port '${t}'.`)}K(Qa,"portEncodeCallback");function oc(t){if(t==="")return t;let s=new URL("https://example.com");return s.pathname=t[0]!=="/"?"/-"+t:t,t[0]!=="/"?s.pathname.substring(2,s.pathname.length):s.pathname}K(oc,"standardURLPathnameEncodeCallback");function cc(t){return t===""?t:new URL(`data:${t}`).pathname}K(cc,"pathURLPathnameEncodeCallback");function lc(t){if(t==="")return t;let s=new URL("https://example.com");return s.search=t,s.search.substring(1,s.search.length)}K(lc,"searchEncodeCallback");function dc(t){if(t==="")return t;let s=new URL("https://example.com");return s.hash=t,s.hash.substring(1,s.hash.length)}K(dc,"hashEncodeCallback");var uc=class{#r;#n=[];#t={};#e=0;#a=1;#l=0;#o=0;#f=0;#p=0;#h=!1;constructor(t){this.#r=t}get result(){return this.#t}parse(){for(this.#n=Wa(this.#r,!0);this.#e<this.#n.length;this.#e+=this.#a){if(this.#a=1,this.#n[this.#e].type==="END"){if(this.#o===0){this.#y(),this.#d()?this.#s(9,1):this.#u()?this.#s(8,1):this.#s(7,0);continue}else if(this.#o===2){this.#m(5);continue}this.#s(10,0);break}if(this.#f>0)if(this.#S())this.#f-=1;else continue;if(this.#k()){this.#f+=1;continue}switch(this.#o){case 0:this.#b()&&this.#m(1);break;case 1:if(this.#b()){this.#T();let t=7,s=1;this.#N()?(t=2,s=3):this.#h&&(t=2),this.#s(t,s)}break;case 2:this.#g()?this.#m(3):(this.#v()||this.#u()||this.#d())&&this.#m(5);break;case 3:this.#w()?this.#s(4,1):this.#g()&&this.#s(5,1);break;case 4:this.#g()&&this.#s(5,1);break;case 5:this.#A()?this.#p+=1:this.#I()&&(this.#p-=1),this.#C()&&!this.#p?this.#s(6,1):this.#v()?this.#s(7,0):this.#u()?this.#s(8,1):this.#d()&&this.#s(9,1);break;case 6:this.#v()?this.#s(7,0):this.#u()?this.#s(8,1):this.#d()&&this.#s(9,1);break;case 7:this.#u()?this.#s(8,1):this.#d()&&this.#s(9,1);break;case 8:this.#d()&&this.#s(9,1);break}}this.#t.hostname!==void 0&&this.#t.port===void 0&&(this.#t.port="")}#s(t,s){switch(this.#o){case 0:break;case 1:this.#t.protocol=this.#c();break;case 2:break;case 3:this.#t.username=this.#c();break;case 4:this.#t.password=this.#c();break;case 5:this.#t.hostname=this.#c();break;case 6:this.#t.port=this.#c();break;case 7:this.#t.pathname=this.#c();break;case 8:this.#t.search=this.#c();break;case 9:this.#t.hash=this.#c();break}this.#o!==0&&t!==10&&([1,2,3,4].includes(this.#o)&&[6,7,8,9].includes(t)&&(this.#t.hostname??=""),[1,2,3,4,5,6].includes(this.#o)&&[8,9].includes(t)&&(this.#t.pathname??=this.#h?"/":""),[1,2,3,4,5,6,7].includes(this.#o)&&t===9&&(this.#t.search??="")),this.#j(t,s)}#j(t,s){this.#o=t,this.#l=this.#e+s,this.#e+=s,this.#a=0}#y(){this.#e=this.#l,this.#a=0}#m(t){this.#y(),this.#o=t}#x(t){return t<0&&(t=this.#n.length-t),t<this.#n.length?this.#n[t]:this.#n[this.#n.length-1]}#i(t,s){let n=this.#x(t);return n.value===s&&(n.type==="CHAR"||n.type==="ESCAPED_CHAR"||n.type==="INVALID_CHAR")}#b(){return this.#i(this.#e,":")}#N(){return this.#i(this.#e+1,"/")&&this.#i(this.#e+2,"/")}#g(){return this.#i(this.#e,"@")}#w(){return this.#i(this.#e,":")}#C(){return this.#i(this.#e,":")}#v(){return this.#i(this.#e,"/")}#u(){if(this.#i(this.#e,"?"))return!0;if(this.#n[this.#e].value!=="?")return!1;let t=this.#x(this.#e-1);return t.type!=="NAME"&&t.type!=="REGEX"&&t.type!=="CLOSE"&&t.type!=="ASTERISK"}#d(){return this.#i(this.#e,"#")}#k(){return this.#n[this.#e].type=="OPEN"}#S(){return this.#n[this.#e].type=="CLOSE"}#A(){return this.#i(this.#e,"[")}#I(){return this.#i(this.#e,"]")}#c(){let t=this.#n[this.#e],s=this.#x(this.#l).index;return this.#r.substring(s,t.index)}#T(){let t={};Object.assign(t,ot),t.encodePart=Rn;let s=Jo(this.#c(),void 0,t);this.#h=Va(s)}};K(uc,"Parser");var Kn=["protocol","username","password","hostname","port","pathname","search","hash"],rt="*";function oa(t,s){if(typeof t!="string")throw new TypeError("parameter 1 is not of type 'string'.");let n=new URL(t,s);return{protocol:n.protocol.substring(0,n.protocol.length-1),username:n.username,password:n.password,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search!==""?n.search.substring(1,n.search.length):void 0,hash:n.hash!==""?n.hash.substring(1,n.hash.length):void 0}}K(oa,"extractValues");function Be(t,s){return s?Gt(t):t}K(Be,"processBaseURLString");function Kt(t,s,n){let a;if(typeof s.baseURL=="string")try{a=new URL(s.baseURL),s.protocol===void 0&&(t.protocol=Be(a.protocol.substring(0,a.protocol.length-1),n)),!n&&s.protocol===void 0&&s.hostname===void 0&&s.port===void 0&&s.username===void 0&&(t.username=Be(a.username,n)),!n&&s.protocol===void 0&&s.hostname===void 0&&s.port===void 0&&s.username===void 0&&s.password===void 0&&(t.password=Be(a.password,n)),s.protocol===void 0&&s.hostname===void 0&&(t.hostname=Be(a.hostname,n)),s.protocol===void 0&&s.hostname===void 0&&s.port===void 0&&(t.port=Be(a.port,n)),s.protocol===void 0&&s.hostname===void 0&&s.port===void 0&&s.pathname===void 0&&(t.pathname=Be(a.pathname,n)),s.protocol===void 0&&s.hostname===void 0&&s.port===void 0&&s.pathname===void 0&&s.search===void 0&&(t.search=Be(a.search.substring(1,a.search.length),n)),s.protocol===void 0&&s.hostname===void 0&&s.port===void 0&&s.pathname===void 0&&s.search===void 0&&s.hash===void 0&&(t.hash=Be(a.hash.substring(1,a.hash.length),n))}catch{throw new TypeError(`invalid baseURL '${s.baseURL}'.`)}if(typeof s.protocol=="string"&&(t.protocol=ac(s.protocol,n)),typeof s.username=="string"&&(t.username=tc(s.username,n)),typeof s.password=="string"&&(t.password=ec(s.password,n)),typeof s.hostname=="string"&&(t.hostname=Zo(s.hostname,n)),typeof s.port=="string"&&(t.port=nc(s.port,t.protocol,n)),typeof s.pathname=="string"){if(t.pathname=s.pathname,a&&!Ko(t.pathname,n)){let r=a.pathname.lastIndexOf("/");r>=0&&(t.pathname=Be(a.pathname.substring(0,r+1),n)+t.pathname)}t.pathname=sc(t.pathname,t.protocol,n)}return typeof s.search=="string"&&(t.search=Xo(s.search,n)),typeof s.hash=="string"&&(t.hash=Yo(s.hash,n)),t}K(Kt,"applyInit");function Gt(t){return t.replace(/([+*?:{}()\\])/g,"\\$1")}K(Gt,"escapePatternString");function mc(t){return t.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}K(mc,"escapeRegexpString");function fc(t,s){s.delimiter??="/#?",s.prefixes??="./",s.sensitive??=!1,s.strict??=!1,s.end??=!0,s.start??=!0,s.endsWith="";let n=".*",a=`[^${mc(s.delimiter)}]+?`,r=/[$_\u200C\u200D\p{ID_Continue}]/u,o="";for(let c=0;c<t.length;++c){let i=t[c];if(i.type===3){if(i.modifier===3){o+=Gt(i.value);continue}o+=`{${Gt(i.value)}}${Tt(i.modifier)}`;continue}let d=i.hasCustomName(),u=!!i.suffix.length||!!i.prefix.length&&(i.prefix.length!==1||!s.prefixes.includes(i.prefix)),m=c>0?t[c-1]:null,f=c<t.length-1?t[c+1]:null;if(!u&&d&&i.type===1&&i.modifier===3&&f&&!f.prefix.length&&!f.suffix.length)if(f.type===3){let h=f.value.length>0?f.value[0]:"";u=r.test(h)}else u=!f.hasCustomName();if(!u&&!i.prefix.length&&m&&m.type===3){let h=m.value[m.value.length-1];u=s.prefixes.includes(h)}u&&(o+="{"),o+=Gt(i.prefix),d&&(o+=`:${i.name}`),i.type===2?o+=`(${i.value})`:i.type===1?d||(o+=`(${a})`):i.type===0&&(!d&&(!m||m.type===3||m.modifier!==3||u||i.prefix!=="")?o+="*":o+=`(${n})`),i.type===1&&d&&i.suffix.length&&r.test(i.suffix[0])&&(o+="\\"),o+=Gt(i.suffix),u&&(o+="}"),i.modifier!==3&&(o+=Tt(i.modifier))}return o}K(fc,"partsToPattern");var pc=class{#r;#n={};#t={};#e={};#a={};#l=!1;constructor(t={},s,n){try{let a;if(typeof s=="string"?a=s:n=s,typeof t=="string"){let i=new uc(t);if(i.parse(),t=i.result,a===void 0&&typeof t.protocol!="string")throw new TypeError("A base URL must be provided for a relative constructor string.");t.baseURL=a}else{if(!t||typeof t!="object")throw new TypeError("parameter 1 is not of type 'string' and cannot convert to dictionary.");if(a)throw new TypeError("parameter 1 is not of type 'string'.")}typeof n>"u"&&(n={ignoreCase:!1});let r={ignoreCase:n.ignoreCase===!0},o={pathname:rt,protocol:rt,username:rt,password:rt,hostname:rt,port:rt,search:rt,hash:rt};this.#r=Kt(o,t,!0),Ja(this.#r.protocol)===this.#r.port&&(this.#r.port="");let c;for(c of Kn){if(!(c in this.#r))continue;let i={},d=this.#r[c];switch(this.#t[c]=[],c){case"protocol":Object.assign(i,ot),i.encodePart=Rn;break;case"username":Object.assign(i,ot),i.encodePart=rc;break;case"password":Object.assign(i,ot),i.encodePart=ic;break;case"hostname":Object.assign(i,ix),Ua(d)?i.encodePart=Ga:i.encodePart=Ka;break;case"port":Object.assign(i,ot),i.encodePart=Qa;break;case"pathname":Va(this.#n.protocol)?(Object.assign(i,ox,r),i.encodePart=oc):(Object.assign(i,ot,r),i.encodePart=cc);break;case"search":Object.assign(i,ot,r),i.encodePart=lc;break;case"hash":Object.assign(i,ot,r),i.encodePart=dc;break}try{this.#a[c]=$a(d,i),this.#n[c]=Ha(this.#a[c],this.#t[c],i),this.#e[c]=fc(this.#a[c],i),this.#l=this.#l||this.#a[c].some(u=>u.type===2)}catch{throw new TypeError(`invalid ${c} pattern '${this.#r[c]}'.`)}}}catch(a){throw new TypeError(`Failed to construct 'URLPattern': ${a.message}`)}}get[Symbol.toStringTag](){return"URLPattern"}test(t={},s){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof t!="string"&&s)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof t>"u")return!1;try{typeof t=="object"?n=Kt(n,t,!1):n=Kt(n,oa(t,s),!1)}catch{return!1}let a;for(a of Kn)if(!this.#n[a].exec(n[a]))return!1;return!0}exec(t={},s){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof t!="string"&&s)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof t>"u")return;try{typeof t=="object"?n=Kt(n,t,!1):n=Kt(n,oa(t,s),!1)}catch{return null}let a={};s?a.inputs=[t,s]:a.inputs=[t];let r;for(r of Kn){let o=this.#n[r].exec(n[r]);if(!o)return null;let c={};for(let[i,d]of this.#t[r].entries())if(typeof d=="string"||typeof d=="number"){let u=o[i+1];c[d]=u}a[r]={input:n[r]??"",groups:c}}return a}static compareComponent(t,s,n){let a=K((i,d)=>{for(let u of["type","modifier","prefix","value","suffix"]){if(i[u]<d[u])return-1;if(i[u]!==d[u])return 1}return 0},"comparePart"),r=new Yt(3,"","","","",3),o=new Yt(0,"","","","",3),c=K((i,d)=>{let u=0;for(;u<Math.min(i.length,d.length);++u){let m=a(i[u],d[u]);if(m)return m}return i.length===d.length?0:a(i[u]??r,d[u]??r)},"comparePartList");return!s.#e[t]&&!n.#e[t]?0:s.#e[t]&&!n.#e[t]?c(s.#a[t],[o]):!s.#e[t]&&n.#e[t]?c([o],n.#a[t]):c(s.#a[t],n.#a[t])}get protocol(){return this.#e.protocol}get username(){return this.#e.username}get password(){return this.#e.password}get hostname(){return this.#e.hostname}get port(){return this.#e.port}get pathname(){return this.#e.pathname}get search(){return this.#e.search}get hash(){return this.#e.hash}get hasRegExpGroups(){return this.#l}};K(pc,"URLPattern");globalThis.URLPattern||(globalThis.URLPattern=pc);const cx=l.createContext({requestHistoryTick:()=>{}}),hc=({children:t,requestHistoryTick:s})=>{const n=l.useMemo(()=>({requestHistoryTick:s}),[s]);return e.jsx(cx.Provider,{value:n,children:t})};hc.__docgenInfo={description:"",methods:[],displayName:"HistoryQueueProvider",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},requestHistoryTick:{required:!0,tsType:{name:"signature",type:"function",raw:"(cb: (resolve: () => void) => void) => void",signature:{arguments:[{type:{name:"signature",type:"function",raw:"(resolve: () => void) => void",signature:{arguments:[{type:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},name:"resolve"}],return:{name:"void"}}},name:"cb"}],return:{name:"void"}}},description:""}}};function es(){return es=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var a in n)({}).hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},es.apply(null,arguments)}var We;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(We||(We={}));var gn=function(t){return t},ti="beforeunload",lx="popstate";function dx(t){t===void 0&&(t={});var s=t,n=s.window,a=n===void 0?document.defaultView:n,r=a.history;function o(){var C=a.location,_=C.pathname,w=C.search,T=C.hash,P=r.state||{};return[P.idx,gn({pathname:_,search:w,hash:T,state:P.usr||null,key:P.key||"default"})]}var c=null;function i(){if(c)v.call(c),c=null;else{var C=We.Pop,_=o(),w=_[0],T=_[1];if(v.length){if(w!=null){var P=m-w;P&&(c={action:C,location:T,retry:function(){A(P*-1)}},A(P))}}else y(C)}}a.addEventListener(lx,i);var d=We.Pop,u=o(),m=u[0],f=u[1],h=vn(),v=vn();m==null&&(m=0,r.replaceState(es({},r.state,{idx:m}),""));function j(C){return typeof C=="string"?C:xc(C)}function p(C,_){return _===void 0&&(_=null),gn(es({pathname:f.pathname,hash:"",search:""},typeof C=="string"?la(C):C,{state:_,key:ca()}))}function x(C,_){return[{usr:C.state,key:C.key,idx:_},j(C)]}function g(C,_,w){return!v.length||(v.call({action:C,location:_,retry:w}),!1)}function y(C){d=C;var _=o();m=_[0],f=_[1],h.call({action:d,location:f})}function N(C,_){var w=We.Push,T=p(C,_);function P(){N(C,_)}if(g(w,T,P)){var I=x(T,m+1),k=I[0],M=I[1];try{r.pushState(k,"",M)}catch{a.location.assign(M)}y(w)}}function b(C,_){var w=We.Replace,T=p(C,_);function P(){b(C,_)}if(g(w,T,P)){var I=x(T,m),k=I[0],M=I[1];r.replaceState(k,"",M),y(w)}}function A(C){r.go(C)}var S={get action(){return d},get location(){return f},createHref:j,push:N,replace:b,go:A,back:function(){A(-1)},forward:function(){A(1)},listen:function(_){return h.push(_)},block:function(_){var w=v.push(_);return v.length===1&&a.addEventListener(ti,ni),function(){w(),v.length||a.removeEventListener(ti,ni)}}};return S}function ux(t){t===void 0&&(t={});var s=t,n=s.initialEntries,a=n===void 0?["/"]:n,r=s.initialIndex,o=a.map(function(N){var b=gn(es({pathname:"/",search:"",hash:"",state:null,key:ca()},typeof N=="string"?la(N):N));return b}),c=si(r??o.length-1,0,o.length-1),i=We.Pop,d=o[c],u=vn(),m=vn();function f(N){return typeof N=="string"?N:xc(N)}function h(N,b){return b===void 0&&(b=null),gn(es({pathname:d.pathname,search:"",hash:""},typeof N=="string"?la(N):N,{state:b,key:ca()}))}function v(N,b,A){return!m.length||(m.call({action:N,location:b,retry:A}),!1)}function j(N,b){i=N,d=b,u.call({action:i,location:d})}function p(N,b){var A=We.Push,S=h(N,b);function C(){p(N,b)}v(A,S,C)&&(c+=1,o.splice(c,o.length,S),j(A,S))}function x(N,b){var A=We.Replace,S=h(N,b);function C(){x(N,b)}v(A,S,C)&&(o[c]=S,j(A,S))}function g(N){var b=si(c+N,0,o.length-1),A=We.Pop,S=o[b];function C(){g(N)}v(A,S,C)&&(c=b,j(A,S))}var y={get index(){return c},get action(){return i},get location(){return d},createHref:f,push:p,replace:x,go:g,back:function(){g(-1)},forward:function(){g(1)},listen:function(b){return u.push(b)},block:function(b){return m.push(b)}};return y}function si(t,s,n){return Math.min(Math.max(t,s),n)}function ni(t){t.preventDefault(),t.returnValue=""}function vn(){var t=[];return{get length(){return t.length},push:function(n){return t.push(n),function(){t=t.filter(function(a){return a!==n})}},call:function(n){t.forEach(function(a){return a&&a(n)})}}}function ca(){return Math.random().toString(36).substr(2,8)}function xc(t){var s=t.pathname,n=s===void 0?"/":s,a=t.search,r=a===void 0?"":a,o=t.hash,c=o===void 0?"":o;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),c&&c!=="#"&&(n+=c.charAt(0)==="#"?c:"#"+c),n}function la(t){var s={};if(t){var n=t.indexOf("#");n>=0&&(s.hash=t.substr(n),t=t.substr(0,n));var a=t.indexOf("?");a>=0&&(s.search=t.substr(a),t=t.substr(0,a)),t&&(s.pathname=t)}return s}const mx=l.createContext([]);function gc(t){return t.name==="Pushed"||t.name==="Popped"||t.name==="Replaced"}function fx(t){return t.name==="StepPushed"||t.name==="StepPopped"||t.name==="StepReplaced"}function px(t){return gc(t)||fx(t)}const St={IDLE:"idle",PROGRESS:"progress",SUCCEEDED:"succeeded",FAILED:"failed"};function vc(t){return t===St.SUCCEEDED||t===St.FAILED}class hx{targetId;initialSetupProcess;focusCount;previousActivationTrigger;constructor(s,n){this.targetId=s,this.initialSetupProcess=n,this.focusCount=0,this.previousActivationTrigger=null}captureStackChange(s){const n=this.initialSetupProcess.getStatus();if(!vc(n))return;const a=s.activities.find(o=>o.id===this.targetId);if(!a||!a.isActive)return;const r=s.events.findLast(gc);!r||this.previousActivationTrigger&&r.eventDate<=this.previousActivationTrigger.eventDate||(this.focusCount++,this.previousActivationTrigger=r)}getActivationCount(){return this.focusCount}getTargetId(){return this.targetId}}const{parse:xx,stringify:gx}=JSON,{keys:vx}=Object,Ts=String,yc="string",ai={},Ya="object",bc=(t,s)=>s,yx=t=>t instanceof Ts?Ts(t):t,bx=(t,s)=>typeof s===yc?new Ts(s):s,jc=(t,s,n,a)=>{const r=[];for(let o=vx(n),{length:c}=o,i=0;i<c;i++){const d=o[i],u=n[d];if(u instanceof Ts){const m=t[u];typeof m===Ya&&!s.has(m)?(s.add(m),n[d]=ai,r.push({k:d,a:[t,s,m,a]})):n[d]=a.call(n,d,m)}else n[d]!==ai&&(n[d]=a.call(n,d,u))}for(let{length:o}=r,c=0;c<o;c++){const{k:i,a:d}=r[c];n[i]=a.call(n,i,jc.apply(null,d))}return n},ri=(t,s,n)=>{const a=Ts(s.push(n)-1);return t.set(n,a),a},jx=(t,s)=>{const n=xx(t,bx).map(yx),a=n[0],r=s||bc,o=typeof a===Ya&&a?jc(n,new Set,a,r):a;return r.call({"":o},"",o)},Nx=(t,s,n)=>{const a=bc,r=new Map,o=[],c=[];let i=+ri(r,o,a.call({"":t},"",t)),d=!i;for(;i<o.length;)d=!0,c[i]=gx(o[i++],u,n);return"["+c.join(",")+"]";function u(m,f){if(d)return d=!d,f;const h=a.call(this,m,f);switch(typeof h){case Ya:if(h===null)return h;case yc:return r.get(h)||ri(r,o,h)}return h}},Nc="@biochain/plugin-navigation-sync";function wc(t){return{_TAG:Nc,flattedState:Nx({activity:t.activity,step:t.step})}}function wx(t){return typeof t=="object"&&t!==null&&"_TAG"in t&&"flattedState"in t&&typeof t._TAG=="string"&&t._TAG===Nc&&typeof t.flattedState=="string"}function Gs(t){try{return wx(t)?jx(t.flattedState):null}catch{return null}}function ii({history:t,pathname:s,state:n,useHash:a}){const r=a?`${t.location.pathname}#${s}`:s;t.push(r,wc(n))}function Gn({history:t,pathname:s,state:n,useHash:a}){const r=a?`${t.location.pathname}#${s}`:s;t.replace(r,wc(n))}function oi(t){return t.length===0?void 0:t[t.length-1]}const Cx=t=>{let s=Promise.resolve();return{requestHistoryTick:a=>{s=s.then(()=>new Promise(r=>{const o=t.listen(()=>{o(),r()});a(()=>{o(),r()})}))}}};function Cc(t){return new URL(t,"file://")}function da(t){const s={};return t.forEach((n,a)=>{s[a]=n}),s}function Qs(t){return t.endsWith("/")?t:`${t}/`}function ci(t){return t.toString().length>0?`?${t}`:t}function _e({path:t,decode:s},n){const a=t==="*"||t==="/*",r=a?[]:Array.from(t.matchAll(/:([A-Za-z0-9_]+)/g)).map(u=>u[1]).filter(Boolean),o=Array.from(new Set(r)),c=a?Number.POSITIVE_INFINITY:o.length,i=a?"*":Qs(t),d=a?null:new URLPattern({pathname:i});return{fill(u){if(a){const v=new URLSearchParams(Object.entries(u).reduce((j,[p,x])=>x?{...j,[p]:x}:j,{}));return Qs("/")+ci(v)}let m=t;for(const v of o){const j=u[v];if(j===void 0)throw new Error(`Missing route param: ${v}`);m=m.replace(`:${v}`,encodeURIComponent(j))}m=Qs(m);const f={...u};o.forEach(v=>{delete f[v]});const h=new URLSearchParams(Object.entries(f).reduce((v,[j,p])=>({...v,...p?{[j]:p}:null}),{}));return m+ci(h)},parse(u){const m=Cc(u);if(a){const g={...da(m.searchParams)};return s?s(g):g}if(!d)return null;const f=Qs(m.pathname),h=d.exec({pathname:f}),v=da(m.searchParams);if(!h)return null;const j=h.pathname.groups,p={...v};for(const[x,g]of Object.entries(j))g!==void 0&&(p[x]=g);return s?s(p):p},variableCount:c}}class kx{status;pendingNavigations;dispatchedEvents;baseNavigationEvents;constructor(s,n=[]){this.status=s.length>0?St.IDLE:St.SUCCEEDED,this.pendingNavigations=s.slice(),this.dispatchedEvents=[],this.baseNavigationEvents=n}captureNavigationOpportunity(s){if(vc(this.status))return[];if(s&&s.globalTransitionState!=="idle")return[];if(this.pendingNavigations.length===0)return this.status=St.SUCCEEDED,[];const n=s?s.events.filter(px):[];if(!(this.verifyAllDispatchedEventsAreInNavigationHistory(n)&&this.verifyNoUnknownNavigationEvents(n)))return this.pendingNavigations=[],this.status=St.FAILED,[];const a=this.pendingNavigations.shift();if(!a)return[];const r=a();return this.dispatchedEvents.push(...r),this.status=St.PROGRESS,r}getStatus(){return this.status}verifyAllDispatchedEventsAreInNavigationHistory(s){const n=new Set(s.map(a=>a.id));return this.dispatchedEvents.every(a=>n.has(a.id))}verifyNoUnknownNavigationEvents(s){const n=new Set([...this.baseNavigationEvents,...this.dispatchedEvents].map(a=>a.id));return s.every(a=>n.has(a.id))}}function Sx(t){return typeof t=="string"?{path:t}:t}function Ax(t){return(Array.isArray(t)?t:[t]).map(Sx)}function Ix(t){return Object.keys(t).flatMap(n=>{const a=t[n];return a?Ax(a).map(r=>({activityName:n,...r})):[]})}class Tx{latestlyBookedSession=Promise.resolve();acquire(){return new Promise(s=>{this.latestlyBookedSession=this.latestlyBookedSession.then(()=>new Promise(n=>s({release:()=>n()})))})}async runExclusively(s){const{release:n}=await this.acquire();try{return await s()}finally{n()}}}class Px{subscribers=[];publishLock=new Tx;subscribe(s){return this.subscribers.push(s),()=>{this.subscribers=this.subscribers.filter(n=>n!==s)}}publish(s){const n=this.subscribers.slice();return this.publishLock.runExclusively(()=>Promise.allSettled(n.map(a=>a(s))))}}const _x=l.createContext([]),Xa=t=>e.jsx(_x.Provider,{value:t.routes,children:t.children});Xa.displayName="RoutesProvider";Xa.__docgenInfo={description:"",methods:[],displayName:"RoutesProvider",props:{routes:{required:!0,tsType:{name:"Array",elements:[{name:"ActivityRoute",elements:[{name:"T"}],raw:"ActivityRoute<T>"}],raw:"ActivityRoute<T>[]"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const Ex=/^:[\w-]+$/,Mx=3,Rx=1,zx=10,Dx=-2,li=t=>t==="*";function di(t){const s=t.split("/");let n=s.length;return s.some(li)&&(n+=Dx),s.filter(a=>!li(a)).reduce((a,r)=>a+(Ex.test(r)?Mx:r===""?Rx:zx),n)}function Lx(t){return[...t].toSorted((s,n)=>di(n.path)-di(s.path))}const Bx=1e3,Ox=60*Bx;function Fx(t){"config"in t&&t.config.decorate("historySync",{makeTemplate:_e,urlPatternOptions:t.urlPatternOptions});const s=t.history??(typeof window>"u"?ux({}):dx({window})),{location:n}=s,a="routes"in t?t.routes:t.config.activities.reduce((o,c)=>({...o,[c.name]:c.route}),{}),r=Lx(Ix(a));return()=>{let o=0,c=!1,i=null;const d=[],u=new Px,{requestHistoryTick:m}=Cx(s),f=p=>u.subscribe(async()=>p());let h=null;const v=()=>{const p=d.map(x=>({activityId:x.getTargetId(),activationCount:x.getActivationCount()}));return(!h||h.length!==p.length||h.some(({activityId:x,activationCount:g})=>p.some(({activityId:y,activationCount:N})=>y===x&&N!==g)))&&(h=p),h},j=p=>{let x=!1;for(const g of d){const y=g.getActivationCount();g.captureStackChange(p),y!==g.getActivationCount()&&(x=!0)}x&&u.publish()};return{key:"plugin-history-sync",wrapStack({stack:p}){const x=l.useSyncExternalStore(f,v,v);return e.jsx(hc,{requestHistoryTick:m,children:e.jsx(Xa,{routes:r,children:e.jsx(mx.Provider,{value:x,children:p.render()})})})},overrideInitialEvents({initialContext:p}){const x=Gs(s.location.state);if(x)return[{...x.activity.enteredBy,name:"Pushed"},...x.step?.enteredBy.name==="StepPushed"||x.step?.enteredBy.name==="StepReplaced"?[{...x.step.enteredBy,name:"StepPushed"}]:[]];function g(){return p?.req?.path&&typeof p.req.path=="string"?p.req.path:t.useHash?n.hash.split("#")[1]??"/":n.pathname+n.search}const y=g(),N=t.fallbackActivity({initialContext:p}),b=r.find(w=>_e(w,t.urlPatternOptions).parse(y)!==null)??r.find(w=>w.activityName===N),S=_e(b,t.urlPatternOptions).parse(y)??{},C=Object.entries(S).reduce((w,[T,P])=>(typeof P=="string"&&(w[T]=P),w),{}),_=b.defaultHistory?.(C)??[];return i=new kx([..._.map(({activityName:w,activityParams:T,additionalSteps:P=[]})=>()=>{const I=[{name:"Pushed",id:Ke(),activityId:Ke(),activityName:w,activityParams:{...T},activityContext:{path:y,lazyActivityComponentRenderContext:{shouldRenderImmediately:!0}}},...P.map(({stepParams:k,hasZIndex:M})=>({name:"StepPushed",id:Ke(),stepId:Ke(),stepParams:k,hasZIndex:M}))];for(const k of I)k.name==="Pushed"&&d.push(new hx(k.activityId,i));return I}),()=>[{name:"Pushed",id:Ke(),activityId:Ke(),activityName:b.activityName,activityParams:_e(b,t.urlPatternOptions).parse(y)??da(Cc(y).searchParams),activityContext:{path:y,lazyActivityComponentRenderContext:{shouldRenderImmediately:!0}}}]]),i.captureNavigationOpportunity(null).map(w=>({...w,eventDate:Date.now()-Ox}))},onInit({actions:{getStack:p,dispatchEvent:x,push:g,stepPush:y}}){const N=p(),b=N.activities[0],A=r.find(w=>w.activityName===b.name),S=_e(A,t.urlPatternOptions),C=oi(b.steps);m(()=>{c=!0,Gn({history:s,pathname:S.fill(b.params),state:{activity:b,step:C},useHash:t.useHash})});const _=w=>{if(c){c=!1;return}const T=Gs(w.location.state);if(!T)return;const P=T.activity,I=T.activity.id,k=T.step,{activities:M}=p(),E=M.find(W=>W.isActive);if(!E)return;const D=oi(E.steps),z=M.find(W=>W.id===I),F=E.steps.find(W=>W.id===k?.id),B=()=>E.id>I,Q=()=>E.id<I,Y=()=>E.id===I,X=()=>Y()?!!(!k||D&&D.id>k.id):!1,Z=()=>Y()?!!(!D||k&&D.id<k.id):!1;if(B()&&(x("Popped",{}),!z&&(o+=1,g({...P.enteredBy}),k?.enteredBy.name==="StepPushed"||k?.enteredBy.name==="StepReplaced"))){const{enteredBy:W}=k;o+=1,y({...W})}if(X()){if(!F&&k&&(k?.enteredBy.name==="StepPushed"||k?.enteredBy.name==="StepReplaced")){const{enteredBy:W}=k;o+=1,y({...W})}x("StepPopped",{})}if(Q()&&(o+=1,g({activityId:P.id,activityName:P.name,activityParams:P.params})),Z()){if(!k)return;o+=1,y({stepId:k.id,stepParams:k.params})}};s.listen(_),i?.captureNavigationOpportunity(N).forEach(w=>w.name==="Pushed"?g(w):y(w)),j(N)},onPushed({effect:{activity:p}}){if(o){o-=1;return}const x=r.find(y=>y.activityName===p.name),g=_e(x,t.urlPatternOptions);m(()=>{c=!0,ii({history:s,pathname:g.fill(p.params),state:{activity:p},useHash:t.useHash})})},onStepPushed({effect:{activity:p,step:x}}){if(o){o-=1;return}const g=r.find(N=>N.activityName===p.name),y=_e(g,t.urlPatternOptions);m(()=>{c=!0,ii({history:s,pathname:y.fill(p.params),state:{activity:p,step:x},useHash:t.useHash})})},onReplaced({effect:{activity:p}}){if(!p.isActive)return;const x=r.find(y=>y.activityName===p.name),g=_e(x,t.urlPatternOptions);m(()=>{c=!0,Gn({history:s,pathname:g.fill(p.params),state:{activity:p},useHash:t.useHash})})},onStepReplaced({effect:{activity:p,step:x}}){if(!p.isActive)return;const g=r.find(N=>N.activityName===p.name),y=_e(g,t.urlPatternOptions);m(()=>{c=!0,Gn({history:s,pathname:y.fill(p.params),state:{activity:p,step:x},useHash:t.useHash})})},onBeforePush({actionParams:p,actions:{overrideActionParams:x}}){if(!p.activityContext||!("path"in p.activityContext)){const g=r.find(b=>b.activityName===p.activityName),N=_e(g,t.urlPatternOptions).fill(p.activityParams);x({...p,activityContext:{...p.activityContext,path:N}})}},onBeforeReplace({actionParams:p,actions:{overrideActionParams:x,getStack:g}}){if(!p.activityContext||!("path"in p.activityContext)){const A=r.find(_=>_.activityName===p.activityName),C=_e(A,t.urlPatternOptions).fill(p.activityParams);x({...p,activityContext:{...p.activityContext,path:C}})}const{activities:y}=g(),N=y.filter(A=>A.transitionState==="enter-active"||A.transitionState==="enter-done"),b=N.length>0?N[N.length-1]:null;if(b)for(let A=0;A<b.steps.length-1;A+=1)m(S=>{Gs(s.location.state)?S():(c=!0,s.back())}),m(()=>{c=!0,s.back()})},onBeforeStepPop({actions:{getStack:p}}){const{activities:x}=p();(x.find(y=>y.isActive)?.steps.length??0)>1&&m(()=>{c=!0,s.back()})},onBeforePop({actions:{getStack:p}}){const{activities:x}=p(),g=x.find(y=>y.isActive);if(g){const{isRoot:y,steps:N}=g,b=y?0:N.length;for(let A=0;A<b;A+=1)m(S=>{Gs(s.location.state)?S():(c=!0,s.back())}),m(()=>{c=!0,s.back()})}},onChanged({actions:{getStack:p,push:x,stepPush:g}}){const y=p();i?.captureNavigationOpportunity(y).forEach(N=>N.name==="Pushed"?x(N):g(N)),j(y)}}}}function kc(){const{t}=L(["settings","common"]),[s,n]=l.useState(!1),a=()=>{n(!0);const r="./";window.location.href=`${r}clear.html`};return e.jsx("div",{className:"bg-background flex min-h-screen flex-col items-center justify-center p-6",children:e.jsxs("div",{className:"flex max-w-sm flex-col items-center gap-6 text-center",children:[e.jsx("div",{className:"bg-destructive/10 flex size-20 items-center justify-center rounded-full",children:e.jsx(Pe,{className:"text-destructive size-10"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-xl font-bold",children:t("settings:storage.migrationRequired")}),e.jsx("p",{className:"text-muted-foreground text-sm",children:t("settings:storage.migrationDesc")})]}),e.jsx("div",{className:"bg-destructive/5 w-full rounded-lg p-4",children:e.jsxs("ul",{className:"text-destructive space-y-2 text-left text-sm",children:[e.jsxs("li",{children:[" ",t("settings:clearData.item1")]}),e.jsxs("li",{children:[" ",t("settings:clearData.item2")]}),e.jsxs("li",{children:[" ",t("settings:clearData.item3")]})]})}),e.jsxs(H,{variant:"destructive",onClick:a,className:"w-full gap-2",disabled:s,children:[e.jsx(Bt,{className:"size-4"}),t("settings:clearData.confirm")]})]})})}kc.__docgenInfo={description:`


 Stackflow context  useFlow()`,methods:[],displayName:"MigrationRequiredView"};function Wx(t){switch(t){case"confirmed":return"confirmed";case"failed":return"failed";default:return"pending"}}function Sc(t,s){const n=t.meta?.displayAmount??"0",a=t.meta?.displaySymbol??"",r=ne.fromFormatted(n,s,a);return{id:`${t.chainId}--${t.txHash}`,type:t.meta?.type??"other",status:Wx(t.status),amount:r,symbol:a,address:t.meta?.displayToAddress??t.fromAddress,timestamp:new Date(t.createdAt),hash:t.txHash,chain:t.chainId}}const Ac=l.createContext(null);function bt({chainId:t,children:s,fallback:n=null}){const a=l.useMemo(()=>t?Ie(t):null,[t]);return a?e.jsx(Ac.Provider,{value:a,children:s},t):e.jsx(e.Fragment,{children:n})}function $t(){const t=l.useContext(Ac);if(!t)throw new Error("useChainProvider must be used within ChainProviderGate. Make sure to wrap your component with <ChainProviderGate chainId={...}>.");return t}bt.__docgenInfo={description:`ChainProvider 

 ChainProvider 
 chainId  fallback  null

@example
\`\`\`tsx
<ChainProviderGate chainId={selectedChain} fallback={<ChainNotSupported />}>
  <WalletContent />
</ChainProviderGate>
\`\`\``,methods:[],displayName:"ChainProviderGate",props:{chainId:{required:!0,tsType:{name:"union",raw:"string | null | undefined",elements:[{name:"string"},{name:"null"},{name:"undefined"}]},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},fallback:{required:!1,tsType:{name:"ReactNode"},description:" provider ",defaultValue:{value:"null",computed:!1}}}};function $x(t,s){return t==="transfer"?s==="in"?"receive":"send":{swap:"swap",exchange:"exchange",approve:"approve",stake:"stake",unstake:"unstake",mint:"mint",burn:"destroy",gift:"gift",grab:"grab",trust:"trust",signFor:"signFor",emigrate:"emigrate",immigrate:"immigrate",issueAsset:"issueAsset",increaseAsset:"increaseAsset",destroyAsset:"destroy",issueEntity:"issueEntity",destroyEntity:"destroyEntity",locationName:"locationName",dapp:"dapp",certificate:"certificate",mark:"mark",signature:"signature"}[t]??"other"}function Hx(t,s){const n=d=>d?s?`${s}--${d}`:d:"unknown";if(!t||!t.hash||!t.assets||t.assets.length===0)return{id:n(t?.hash),type:"other",status:"pending",amount:ne.fromRaw("0",8,""),symbol:"",address:t?.from??t?.to??"",timestamp:new Date,hash:t?.hash,chain:s};const a=t.assets[0],r=t.direction==="in"?t.from:t.to;let o=8,c="0",i="";return(a.assetType==="native"||a.assetType==="token")&&(o=a.decimals??8,c=a.value??"0",i=a.symbol??""),{id:n(t.hash),type:$x(t.action,t.direction),status:t.status,amount:ne.fromRaw(c,o,i),symbol:i,address:r,timestamp:new Date(t.timestamp),hash:t.hash,chain:s}}function Ic(t,s){return!t||!Array.isArray(t)?[]:t.filter(n=>n!=null).map(n=>{try{return Hx(n,s)}catch(a){return console.warn("[toTransactionInfoList] Failed to convert transaction:",n,a),{id:s?`${s}--${n?.hash??"error"}`:n?.hash??"error",type:"other",status:"pending",amount:ne.fromRaw("0",8,""),symbol:"",address:"",timestamp:new Date,chain:s}}})}function qx({address:t,selectedChain:s,selectedChainName:n,mainAssetSymbol:a,wallets:r,currentWalletId:o,chainPreferences:c,onWalletChange:i,onCopyAddress:d,onOpenChainSelector:u,onOpenSettings:m,onOpenWalletList:f,onAddWallet:h,onOpenAddressBalance:v,onOpenAddressTransactions:j}){const{push:p}=G(),x=Os(),{t:g}=L(["home","wallet","common","transaction"]),y=tt(),N=y.snapshot?qe.getChainById(y,s):void 0,b=$t(),{data:A=[],isLoading:S}=b.allBalances.useState({address:t},{enabled:!!t}),{data:C,isLoading:_}=b.transactionHistory.useState({address:t,limit:50},{enabled:!!t}),{transactions:w,deleteTransaction:T,retryTransaction:P}=Li(o??void 0,s),I=l.useMemo(()=>C?Ic(C,s):[],[C,s]),k=l.useCallback(E=>{if(E.id){const D=C?.find(F=>F.hash===E.hash),z=D?ts.superjson.stringify(D):void 0;p("TransactionDetailActivity",{txId:E.id,txData:z})}},[p,C]),M=l.useCallback((E,D)=>[{label:g("home:wallet.transfer"),icon:e.jsx(co,{className:"size-4"}),onClick:()=>{x.impact("light"),p("SendActivity",{assetType:E.symbol})}},{label:g("home:wallet.destroy"),icon:e.jsx(ln,{className:"size-4"}),onClick:()=>{x.impact("light"),p("DestroyActivity",{assetType:E.symbol,assetLocked:"true"})},variant:"destructive",show:D.canDestroy}],[x,p,g]);return e.jsxs("div",{"data-testid":"wallet-home",className:"flex h-full flex-col overflow-y-auto bg-background",children:[e.jsxs("div",{className:"pt-2 pb-1",children:[e.jsx(Vd,{wallets:r,currentWalletId:o,selectedChain:s,chainPreferences:c,onWalletChange:i,onCopyAddress:d,onOpenChainSelector:u,onOpenSettings:m,onOpenWalletList:f,onAddWallet:h,onOpenAddressBalance:v,onOpenAddressTransactions:j}),e.jsxs("div",{className:"mt-2 flex justify-center gap-8 px-6",children:[e.jsxs("button",{onClick:()=>p("SendActivity",{}),"data-testid":"wallet-home-send-button",className:"group flex flex-col items-center gap-1.5",children:[e.jsx("div",{className:"flex size-12 items-center justify-center rounded-full bg-primary/10 text-primary transition-all active:scale-95 group-hover:bg-primary/20",children:e.jsx(ho,{className:"size-5"})}),e.jsx("span",{className:"text-xs font-medium",children:g("home:wallet.send")})]}),e.jsxs("button",{onClick:()=>p("ReceiveActivity",{}),"data-testid":"wallet-home-receive-button",className:"group flex flex-col items-center gap-1.5",children:[e.jsx("div",{className:"flex size-12 items-center justify-center rounded-full bg-primary/10 text-primary transition-all active:scale-95 group-hover:bg-primary/20",children:e.jsx(yf,{className:"size-5"})}),e.jsx("span",{className:"text-xs font-medium",children:g("home:wallet.receive")})]}),e.jsxs("button",{onClick:()=>p("ScannerActivity",{}),"data-testid":"wallet-home-scan-button",className:"group flex flex-col items-center gap-1.5",children:[e.jsx("div",{className:"flex size-12 items-center justify-center rounded-full bg-primary/10 text-primary transition-all active:scale-95 group-hover:bg-primary/20",children:e.jsx(Au,{className:"size-5"})}),e.jsx("span",{className:"text-xs font-medium",children:g("common:a11y.scan")})]})]})]}),w.length>0&&e.jsxs("div",{className:"px-4 pt-2 space-y-2",children:[e.jsx("h3",{className:"text-muted-foreground text-xs font-medium uppercase tracking-wider px-1",children:g("transaction:pendingTx.title")}),e.jsx("div",{className:"space-y-1",children:w.slice(0,3).map(E=>{const D=Sc(E,N?.decimals??8);return e.jsx(Fi,{transaction:D,onClick:()=>p("TransactionDetailActivity",{txId:D.id}),onRetry:E.status==="failed"?()=>P(E):void 0,onDelete:()=>T(E)},E.id)})}),w.length>3&&e.jsx("button",{onClick:()=>p("HistoryActivity",{chain:s}),className:"mt-2 w-full rounded-lg bg-muted/60 py-2 text-xs font-medium text-muted-foreground transition-colors hover:bg-muted",children:g("transaction:pendingTx.viewAll",{count:w.length})})]}),e.jsx("div",{className:"flex-1 pt-3",children:e.jsx(pu,{chainId:s,chainName:n,tokens:A.map(E=>({symbol:E.symbol,name:E.name,chain:s,balance:E.amount.toFormatted(),decimals:E.decimals,fiatValue:void 0,change24h:0,icon:E.icon})),transactions:I.slice(0,5),tokensLoading:S,transactionsLoading:_,onTokenClick:E=>{},onTransactionClick:k,mainAssetSymbol:a,tokenMenuItems:M,renderTransactionFooter:()=>e.jsx("button",{onClick:()=>p("HistoryActivity",{chain:I.length>0?s:"all"}),className:"mt-3 w-full rounded-lg bg-muted/60 py-2.5 text-sm font-medium text-muted-foreground transition-colors hover:bg-muted",children:I.length>0?g("transaction:history.viewAll",{count:I.length}):g("transaction:history.viewAllChains")}),testId:"wallet-home"})}),e.jsx("div",{className:"shrink-0 h-[var(--tab-bar-height)]"})]})}function Tc(){const{push:t}=G(),s=Ma(),n=vt(),a=Os(),{t:r}=L(["home","wallet","common","transaction"]),o=Gd(),c=tu(),i=su(),d=gt(),u=ke(),m=u?.id??null,f=ze(),h=ga(),v=r(`common:chains.${f}`,{defaultValue:f}),j=tt(),x=(j.snapshot?qe.getChainById(j,f):null)?.symbol;Ri();const y=u?.chainAddresses?.find(P=>P.chain===f)?.address??"",N=l.useCallback(async P=>{await s.write({text:P}),await a.impact("light"),n.show(r("home:wallet.addressCopied"))},[s,a,n,r]),b=l.useCallback(P=>{P!==m&&me.setCurrentWallet(P),t("ChainSelectorJob",{})},[t,m]),A=l.useCallback(P=>{const I=d.find(k=>k.id===P);I&&t("WalletConfigActivity",{walletId:P,walletName:I.name})},[t,d]),S=l.useCallback(P=>{me.setCurrentWallet(P)},[]),C=l.useCallback(()=>{t("WalletAddJob",{})},[t]),_=l.useCallback(()=>{t("WalletListJob",{})},[t]),w=l.useCallback(()=>{t("AddressBalanceActivity",{})},[t]),T=l.useCallback(()=>{t("AddressTransactionsActivity",{})},[t]);return o?e.jsx(kc,{}):c?!i||!u?e.jsx(Ux,{}):e.jsx(bt,{chainId:f,fallback:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:r("common:ecosystem.chainNotSupported")})}),children:e.jsx(qx,{address:y,selectedChain:f,selectedChainName:v,mainAssetSymbol:x,wallets:d,currentWalletId:m,chainPreferences:h,onWalletChange:S,onCopyAddress:N,onOpenChainSelector:b,onOpenSettings:A,onOpenWalletList:_,onAddWallet:C,onOpenAddressBalance:w,onOpenAddressTransactions:T})}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(Ce,{size:"lg"})})}function Ux(){const{push:t}=G(),{t:s}=L("home");return e.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-6 p-6 text-center",children:[e.jsx("div",{className:"bg-primary/10 rounded-full p-6",children:e.jsx(st,{className:"text-primary size-12"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:s("welcome.title")}),e.jsx("p",{className:"text-muted-foreground mt-2",children:s("welcome.subtitle")})]}),e.jsxs("div",{className:"flex w-full max-w-xs flex-col gap-3",children:[e.jsx(Me,{variant:"mint",className:"w-full","data-testid":"create-wallet-button",onClick:()=>t("WalletCreateActivity",{}),children:s("welcome.createWallet")}),e.jsx(H,{variant:"outline",className:"w-full","data-testid":"import-wallet-button",onClick:()=>t("OnboardingRecoverActivity",{}),children:s("welcome.importWallet")})]})]})}Tc.__docgenInfo={description:"",methods:[],displayName:"WalletTab"};const Vx=Na(["defi","nft","tools","games","social","exchange","other"]),Jx=wa([Qe(!0),Ns({timeout:zt().int().positive().optional()}).passthrough()]),Kx=Na(["auto","dark","light"]),Gx=Na(["stack","mine"]),Pc=Ns({id:q(),name:q(),description:q(),longDescription:q().optional(),icon:q(),url:q(),version:q(),author:q().optional(),website:q().optional(),category:Vx.optional(),tags:Ye(q()).optional(),permissions:Ye(q()).optional(),chains:Ye(q()).optional(),screenshots:Ye(q()).optional(),minWalletVersion:q().optional(),publishedAt:q().optional(),updatedAt:q().optional(),beta:Xe().optional(),officialScore:zt().min(0).max(100).optional(),communityScore:zt().min(0).max(100).optional(),splashScreen:Jx.optional(),capsuleTheme:Kx.optional(),targetDesktop:Gx.optional(),themeColor:q().optional(),themeColorFrom:q().optional(),themeColorTo:q().optional()}).passthrough(),Qx=Ns({name:q(),version:q(),updated:q(),icon:q().optional(),search:Ns({urlTemplate:q()}).passthrough().optional(),apps:Ye(Pc)}).passthrough();Ns({version:q(),data:Ye(Pc)}).passthrough();const Yx=15,Xx=1440*60*1e3;function Zx(t){return Math.floor(t.getTime()/Xx)}function eg(t=new Date){const s=Zx(t);return Yx*(s+1)%100}function ui(t,s=new Date){const n=typeof t.officialScore=="number"?t.officialScore:0,a=typeof t.communityScore=="number"?t.communityScore:0,r=eg(s),o=100-r;return(n*r+a*o)/100}function tg(t){const s=typeof document<"u"?document.baseURI:"file:///",n=new URL(t,s).toString();return a=>a.startsWith("http://")||a.startsWith("https://")||a.startsWith("data:")?a:new URL(a,n).toString()}const sg=new Tf("ecosystem-sources","sources");function Za(t){return ts.create({name:`ecosystem.source.${t}`,outputSchema:Qx,url:t,use:[Af(),_f({storage:sg}),bu(300*1e3)]})}let Hs=[];const on=[];function ng(){const t=[...Hs];on.forEach(s=>s(t))}function ag(t){return on.push(t),()=>{const s=on.indexOf(t);s>=0&&on.splice(s,1)}}function rg(t){return/^[a-z0-9]+(?:\.[a-z0-9-]+)+$/i.test(t)}function ig(t,s,n){if(!rg(t.id))return null;const a=tg(s.url);return{...t,icon:a(t.icon),url:a(t.url),screenshots:t.screenshots?.map(a),splashScreen:t.splashScreen,sourceUrl:s.url,sourceName:s.name,sourceIcon:s.icon??(n.icon?a(n.icon):void 0)}}async function og(t){try{return await Za(t).fetch({})}catch{return null}}async function _c(t){const s=[],n=new Set;for(const{source:a,payload:r}of t)if(r)for(const o of r.apps??[]){const c=ig(o,a,r);c&&(n.has(c.id)||(n.add(c.id),s.push(c)))}Hs=s,ng()}async function er(){const t=ja.getEnabledSources(Rt.state),s=await Promise.all(t.map(async n=>{const a=await og(n.url);return{source:n,payload:a}}));await _c(s)}let mi="";Rt.subscribe(()=>{const t=JSON.stringify(Rt.state.sources);t!==mi&&(mi=t,er())});async function Ec(t){await er(),t?.refresh===!0&&tr({force:!1})}async function tr(t){const s=t?.force===!0,n=ja.getEnabledSources(Rt.state);s&&ts.invalidate("ecosystem.source");const a=await Promise.all(n.map(async r=>{ye.updateSourceStatus(r.url,"loading");try{const c=await Za(r.url).fetch({});return ye.updateSourceStatus(r.url,"success"),{source:r,payload:c}}catch(o){const c=o instanceof Error?o.message:"Unknown error";return ye.updateSourceStatus(r.url,"error",c),{source:r,payload:null}}}));return await _c(a),[...Hs]}async function cg(t){ye.updateSourceStatus(t,"loading");try{ts.invalidate(`ecosystem.source.${t}`),await Za(t).fetch({})?(ye.updateSourceStatus(t,"success"),await er()):ye.updateSourceStatus(t,"error","Failed to fetch source")}catch(s){const n=s instanceof Error?s.message:"Unknown error";ye.updateSourceStatus(t,"error",n)}}function lg(){return[...Hs]}function fi(t){return Hs.find(s=>s.id===t)}function Mc(){const{push:t}=G(),s=l.useRef(null),[n,a]=l.useState([]),[r,o]=l.useState(!0),c=Ne(Rt,j=>j.myApps);l.useEffect(()=>{const j=ag(p=>a(p));return Ec({refresh:!0}).then(()=>{a(lg()),o(!1)}),()=>j()},[]),Eu();const i=l.useCallback(j=>{t("MiniappDetailActivity",{appId:encodeURIComponent(j.id)})},[t]),d=l.useCallback(j=>{ye.installApp(j.id),ye.updateAppLastUsed(j.id),ye.setActiveSubPage("mine"),s.current?.slideTo("mine"),requestAnimationFrame(()=>{Hi(j.id,{...j,targetDesktop:"mine"})})},[]),u=l.useCallback(j=>{ye.uninstallApp(j)},[]),m=l.useMemo(()=>c.map(j=>({...j,app:n.find(p=>p.id===j.appId)})).filter(j=>!!j.app).map(({app:j,lastUsedAt:p})=>({app:j,lastUsed:p})),[c,n]),f=l.useMemo(()=>n.length===0?[]:[...n].toSorted((j,p)=>ui(p)-ui(j)).slice(0,2),[n]),h=l.useMemo(()=>{const j=new Set(f.map(p=>p.id));return[...n].filter(p=>!j.has(p.id)).toSorted((p,x)=>(x.officialScore??0)-(p.officialScore??0)).slice(0,6)},[n,f]),v=l.useMemo(()=>[...n].toSorted((j,p)=>(p.communityScore??0)-(j.communityScore??0)).slice(0,10),[n]);return r?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(Ce,{size:"lg"})}):e.jsx(Hu,{ref:s,showDiscoverPage:!0,showStackPage:"auto",apps:n,myApps:m,featuredApps:f,recommendedApps:h,hotApps:v,onAppOpen:d,onAppDetail:i,onAppRemove:u})}Mc.__docgenInfo={description:"",methods:[],displayName:"EcosystemTab"};function je({icon:t,label:s,value:n,showChevron:a=!0,disabled:r=!1,onClick:o,trailing:c,className:i,testId:d}){const u=o?"button":"div";return e.jsxs(u,{type:o?"button":void 0,onClick:r?void 0:o,disabled:r,"data-testid":d,className:R("bg-background flex w-full items-center gap-3 rounded-xl px-4 py-3.5","transition-colors",o&&!r&&"hover:bg-muted/50 active:bg-muted",r&&"cursor-not-allowed",i),children:[t&&e.jsx("span",{className:"bg-muted text-foreground flex size-8 shrink-0 items-center justify-center rounded-lg",children:t}),e.jsx("span",{className:R("flex-1 text-left text-sm font-medium",r&&"text-muted-foreground"),children:s}),c??e.jsxs(e.Fragment,{children:[n&&e.jsx("span",{className:"text-muted-foreground text-sm",children:n}),a&&o&&e.jsx(Ae,{className:"text-muted-foreground/50 size-5"})]})]})}je.__docgenInfo={description:"",methods:[],displayName:"SettingsItem",props:{icon:{required:!1,tsType:{name:"union",raw:"ReactNode | undefined",elements:[{name:"ReactNode"},{name:"undefined"}]},description:""},label:{required:!0,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},showChevron:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"",defaultValue:{value:"true",computed:!1}},disabled:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"",defaultValue:{value:"false",computed:!1}},onClick:{required:!1,tsType:{name:"union",raw:"(() => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},trailing:{required:!1,tsType:{name:"union",raw:"ReactNode | undefined",elements:[{name:"ReactNode"},{name:"undefined"}]},description:""},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:" className"},testId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:" ID"}}};function ps({title:t,children:s,className:n}){return e.jsxs("section",{className:R("space-y-1",n),children:[t&&e.jsx("h3",{className:"mb-2 px-1 text-xs font-medium uppercase text-muted-foreground",children:t}),e.jsx("div",{className:"overflow-hidden rounded-xl bg-card shadow-sm",children:s})]})}ps.__docgenInfo={description:"",methods:[],displayName:"SettingsSection",props:{title:{required:!1,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},className:{required:!1,tsType:{name:"string"},description:" className"}}};const dg=[{value:"system",icon:Xm},{value:"light",icon:kf},{value:"dark",icon:uf}];function Rc({open:t,onOpenChange:s}){const{t:n}=L("settings"),a=Ei(),r=o=>{An.setTheme(o),s(!1)};return e.jsx(lt,{open:t,onOpenChange:s,children:e.jsxs(dt,{side:"bottom",className:"rounded-t-2xl",children:[e.jsx(ut,{children:e.jsx(mt,{children:n("appearance.title")})}),e.jsx("div",{className:"mt-4 space-y-2",children:dg.map(({value:o,icon:c})=>e.jsxs("button",{onClick:()=>r(o),className:R("flex w-full items-center gap-3 rounded-xl p-4 transition-colors",a===o?"bg-primary/10 text-primary":"hover:bg-muted"),children:[e.jsx(c,{size:24}),e.jsx("span",{className:"flex-1 text-left font-medium",children:n(`appearance.${o}`)}),a===o&&e.jsx(fe,{size:20})]},o))})]})})}Rc.__docgenInfo={description:"",methods:[],displayName:"AppearanceSheet",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""}}};const Ge=ge.t.bind(ge);async function ug(t,s){const n=Ie(t.id);if(!n.estimateFee||!n.buildTransaction)return{amount:ne.fromRaw("0",t.decimals,t.symbol),symbol:t.symbol};const a=await n.buildTransaction({type:"transfer",from:s,to:s,amount:ne.fromRaw("1",t.decimals,t.symbol)});return{amount:(await n.estimateFee(a)).standard.amount,symbol:t.symbol}}async function pi({chainConfig:t,walletId:s,password:n,fromAddress:a,toAddress:r,amount:o,assetType:c,fee:i,twoStepSecret:d}){let u;try{u=await Xt.getMnemonic(s,n)}catch(f){return f instanceof Tn&&f.code===Pn.DECRYPTION_FAILED?{status:"password"}:{status:"error",message:f instanceof Error?f.message:Ge("error:unknown")}}if(!o.isPositive())return{status:"error",message:Ge("error:validation.enterValidAmount")};const m=Ie(t.id);if(!m.supportsFullTransaction)return{status:"error",message:Ge("error:transaction.chainNotSupported")};try{let f=null;if(m.bioGetAccountInfo){if(f=(await m.bioGetAccountInfo(a)).secondPublicKey,f&&!d)return{status:"password_required",secondPublicKey:f};if(d&&f&&m.bioVerifyPayPassword&&!await m.bioVerifyPayPassword({mainSecret:u,paySecret:d,publicKey:f}))return{status:"error",message:Ge("error:transaction.securityPasswordFailed")}}const h=await m.buildTransaction({type:"transfer",from:a,to:r,amount:o,fee:i,bioAssetType:c}),v=await m.signTransaction(h,{privateKey:new TextEncoder().encode(u),bioSecret:u,bioPaySecret:d}),j=await ct.create({walletId:s,chainId:t.id,fromAddress:a,rawTx:v,meta:{type:"send",displayAmount:o.toFormatted(),displaySymbol:c,displayToAddress:r}});await ct.updateStatus({id:j.id,status:"broadcasting"});try{const p=await m.broadcastTransaction(v);return await ct.updateStatus({id:j.id,status:"broadcasted",txHash:p}),{status:"ok",txHash:p,pendingTxId:j.id}}catch(p){const x=p;return await ct.updateStatus({id:j.id,status:"failed",errorCode:"BROADCAST_FAILED",errorMessage:x.message}),{status:"error",message:x.message,pendingTxId:j.id}}}catch(f){return{status:"error",message:(f instanceof Error?f.message:String(f))||Ge("error:transaction.failed")}}}async function mg({chainConfig:t,walletId:s,password:n,fromAddress:a,newTwoStepSecret:r}){let o;try{o=await Xt.getMnemonic(s,n)}catch(i){return i instanceof Tn&&i.code===Pn.DECRYPTION_FAILED?{status:"password"}:{status:"error",message:i instanceof Error?i.message:Ge("error:unknown")}}const c=Ie(t.id);if(!c.supportsFullTransaction)return{status:"error",message:Ge("error:transaction.chainNotSupported")};try{if(c.bioGetAccountInfo&&(await c.bioGetAccountInfo(a)).secondPublicKey)return{status:"already_set"};const i=await c.buildTransaction({type:"setPayPassword",from:a}),d=await c.signTransaction(i,{privateKey:new TextEncoder().encode(o),bioSecret:o,bioNewPaySecret:r});return{status:"ok",txHash:await c.broadcastTransaction(d)}}catch(i){const d=i instanceof Error?i.message:String(i);return d.includes("fee")||d.includes("")?{status:"error",message:Ge("error:insufficientFunds")}:{status:"error",message:d||Ge("error:transaction.failed")}}}async function fg(t){const s=Ie(t.id);if(!s.buildTransaction||!s.estimateFee)return null;try{const n=await s.buildTransaction({type:"setPayPassword",from:"0x0000000000000000000000000000000000000000"});return{amount:(await s.estimateFee(n)).standard.amount,symbol:t.symbol}}catch{return null}}async function pg(t,s){const n=Ie(t.id);if(!n.bioGetAccountInfo)return!1;try{return!!(await n.bioGetAccountInfo(s)).secondPublicKey}catch{return!1}}const ie=Xh,zc=sx;function yn({title:t,children:s,className:n}){return e.jsxs("div",{className:R("bg-background rounded-t-2xl",n),children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),t&&e.jsx("div",{className:"border-b border-border px-4 pb-4",children:e.jsx("h2",{className:"text-center text-lg font-semibold",children:t})}),s,e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})}yn.__docgenInfo={description:"Standard sheet content wrapper with handle, title, and safe area",methods:[],displayName:"SheetContent",props:{title:{required:!1,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};const hg={ethereum:"Ethereum",bitcoin:"Bitcoin",tron:"Tron",binance:"BSC",bfmeta:"BFMeta",ccchain:"CCChain",pmchain:"PMChain",bfchainv2:"BFChain V2",btgmeta:"BTGMeta",biwmeta:"BIWMeta",ethmeta:"ETHMeta",malibu:"Malibu"};function xg(t,s=10,n=8){return t.length<=s+n+3?t:`${t.slice(0,s)}...${t.slice(-n)}`}const Dc=()=>{const{t}=L(["home","common"]),{pop:s}=G(),n=ke(),a=ze(),r=l.useMemo(()=>n?n.chainAddresses.map(c=>c.chain):[],[n]),o=c=>{me.setSelectedChain(c),s()};return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),e.jsx("div",{className:"border-b border-border px-4 pb-4",children:e.jsx("h2",{className:"text-center text-lg font-semibold",children:t("home:wallet.selectNetwork")})}),e.jsx("div",{"data-testid":"chain-sheet",className:"max-h-[60vh] space-y-2 overflow-y-auto p-4",children:r.map(c=>{const i=n?.chainAddresses.find(d=>d.chain===c);return e.jsxs("button",{"data-testid":`chain-option-${c}`,onClick:()=>o(c),className:`flex w-full items-center gap-3 rounded-xl p-4 transition-colors ${c===a?"bg-primary/10 ring-1 ring-primary":"bg-muted/50 hover:bg-muted"}`,children:[e.jsx(pt,{chain:c,size:"md"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"font-medium",children:hg[c]??c}),e.jsx("div",{className:"font-mono text-xs text-muted-foreground",children:i?.address?xg(i.address):"---"})]}),c===a&&e.jsx(fe,{className:"size-5 text-primary"})]},c)})}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})};Dc.__docgenInfo={description:"",methods:[],displayName:"ChainSelectorJob"};const hi={"/":"MainTabsActivity","/wallet/list":"WalletListActivity","/wallet/create":"WalletCreateActivity","/send":"SendActivity","/receive":"ReceiveActivity","/settings":"SettingsActivity","/settings/language":"SettingsLanguageActivity","/settings/currency":"SettingsCurrencyActivity","/settings/chains":"SettingsChainsActivity","/settings/mnemonic":"SettingsMnemonicActivity","/settings/wallet-lock":"SettingsWalletLockActivity","/settings/wallet-chains":"SettingsWalletChainsActivity","/settings/storage":"SettingsStorageActivity","/settings/sources":"SettingsSourcesActivity","/history":"HistoryActivity","/scanner":"ScannerActivity","/onboarding/recover":"OnboardingRecoverActivity","/address-book":"AddressBookActivity","/my-card":"MyCardActivity","/notifications":"NotificationsActivity","/staking":"StakingActivity","/welcome":"WelcomeActivity"},gg=[{pattern:/^\/wallet\/([^/]+)$/,activity:"WalletConfigActivity",paramExtractor:t=>({walletId:t[1]??""})},{pattern:/^\/transaction\/([^/]+)$/,activity:"TransactionDetailActivity",paramExtractor:t=>({txId:t[1]??""})},{pattern:/^\/authorize\/address\/([^/]+)$/,activity:"AuthorizeAddressActivity",paramExtractor:t=>({id:t[1]??""})},{pattern:/^\/authorize\/signature\/([^/]+)$/,activity:"AuthorizeSignatureActivity",paramExtractor:t=>({id:t[1]??""})},{pattern:/^\/token\/([^/]+)$/,activity:"TokenDetailActivity",paramExtractor:t=>({tokenId:t[1]??""})}];function vg(t){if(hi[t])return{activity:hi[t],params:{}};for(const{pattern:s,activity:n,paramExtractor:a}of gg){const r=t.match(s);if(r)return{activity:n,params:a(r)}}return null}function se(){const t=G();return{navigate:a=>{const r=typeof a=="string"?{to:a}:a,o=vg(r.to);if(!o)return;const c={...o.params,...r.search};r.replace?t.replace(o.activity,c,{animate:!0}):t.push(o.activity,c,{animate:!0})},goBack:()=>{t.pop()}}}const Lc=l.createContext({});function re({params:t,children:s}){return e.jsx(Lc.Provider,{value:t,children:s})}function oe(){return l.useContext(Lc)}re.__docgenInfo={description:"",methods:[],displayName:"ActivityParamsProvider",props:{params:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"unknown"}],raw:"Record<string, unknown>"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""}}};function yg(){const{t}=L("wallet"),{pop:s}=G(),{walletId:n}=oe(),r=gt().find(u=>u.id===n),[o,c]=l.useState(r?.name??"");l.useEffect(()=>{r&&c(r.name)},[r]);const i=l.useCallback(()=>{if(!r)return;const u=o.trim();u&&(me.updateWalletName(r.id,u),s())},[r,o,s]);if(!r)return null;const d=o.trim().length>0&&o.trim()!==r.name;return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),e.jsx("div",{className:"border-b border-border px-4 pb-4",children:e.jsx("h2",{className:"text-center text-lg font-semibold",children:t("editSheet.renameTitle")})}),e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"wallet-name",className:"text-sm font-medium",children:t("editSheet.walletName")}),e.jsx("input",{id:"wallet-name",type:"text",value:o,onChange:u=>c(u.target.value),placeholder:t("editSheet.walletNamePlaceholder"),maxLength:20,className:R("w-full rounded-xl border border-border bg-background px-4 py-3","focus:outline-none focus:ring-2 focus:ring-primary")}),e.jsxs("p",{className:"text-right text-xs text-muted-foreground",children:[o.length,"/20"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:i,disabled:!d,className:R("w-full rounded-full py-3 font-medium text-primary-foreground transition-colors","bg-primary hover:bg-primary/90","disabled:cursor-not-allowed disabled:opacity-50"),children:t("editSheet.save")}),e.jsx("button",{onClick:()=>s(),className:"w-full py-2 text-center text-sm text-muted-foreground hover:text-foreground",children:t("editSheet.cancel")})]})]}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const Bc=({params:t})=>e.jsx(re,{params:t,children:e.jsx(yg,{})});Bc.__docgenInfo={description:"",methods:[],displayName:"WalletRenameJob"};function bg(){const{t}=L("wallet"),{pop:s}=G(),{navigate:n}=se(),{walletId:a}=oe(),o=gt().find(v=>v.id===a),[c,i]=l.useState([]),[d,u]=l.useState(!1),[m,f]=l.useState(!1),h=l.useCallback(async v=>{if(!(!o||v.length<4)){if(!o.encryptedMnemonic){me.deleteWallet(o.id),n({to:"/"});return}f(!0),u(!1);try{const j=ht(v);if(!await Pt(o.encryptedMnemonic,j)){u(!0),i([]);return}me.deleteWallet(o.id),n({to:"/"})}catch{u(!0),i([])}finally{f(!1)}}},[o,n]);return o?e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),e.jsx("div",{className:"border-b border-border px-4 pb-4",children:e.jsx("h2",{className:"text-center text-lg font-semibold",children:t("editSheet.deleteTitle")})}),e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsx("p",{className:"text-center text-muted-foreground",children:t("editSheet.deleteWarning",{name:o.name})}),e.jsx(Ft,{value:c,onChange:i,onComplete:h,minPoints:4,error:d,disabled:m}),e.jsx("div",{className:"space-y-3",children:e.jsx("button",{onClick:()=>s(),disabled:m,className:"w-full py-2 text-center text-sm text-muted-foreground hover:text-foreground",children:t("editSheet.cancel")})})]}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})}):null}const Oc=({params:t})=>e.jsx(re,{params:t,children:e.jsx(bg,{})});Oc.__docgenInfo={description:"",methods:[],displayName:"WalletDeleteJob"};let bn=null,sr=null;function jt(t,s){bn=t,sr=null}function jg(){bn=null,sr=null}function Ng(){const{t}=L("security"),{pop:s}=G(),{title:n,description:a,biometricAvailable:r}=oe(),[o,c]=l.useState([]),[i,d]=l.useState(!1),[u,m]=l.useState(!1),f=l.useRef(null),h=l.useRef(null),v=l.useRef(null),j=l.useRef(!1);!j.current&&bn&&(h.current=bn,v.current=sr,jg(),j.current=!0);const p=n??t("patternLock.unlockTitle"),x=r==="true"&&v.current,g=l.useCallback(()=>{f.current&&(clearTimeout(f.current),f.current=null),d(!1)},[]),y=l.useCallback(A=>{i&&A.length>0&&g(),c(A)},[i,g]),N=l.useCallback(async A=>{const S=h.current;if(!(A.length<4||!S)){m(!0),g();try{const C=ht(A);await S(C)?s():(d(!0),c([]),f.current=setTimeout(()=>{d(!1)},1500))}catch{d(!0),c([]),f.current=setTimeout(()=>{d(!1)},1500)}finally{m(!1)}}},[s,g]),b=l.useCallback(async()=>{const A=v.current;if(A){m(!0),g();try{await A()?s():(d(!0),f.current=setTimeout(()=>{d(!1)},1500))}catch{d(!0),f.current=setTimeout(()=>{d(!1)},1500)}finally{m(!1)}}},[s,g]);return e.jsx(ie,{"data-testid":"wallet-lock-dialog",children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),e.jsxs("div",{className:"px-4 pb-4 text-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:p}),a&&e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:a})]}),e.jsx("div",{className:"px-4 pb-4",children:e.jsx(Ft,{value:o,onChange:y,onComplete:N,minPoints:4,error:i,disabled:u,"data-testid":"wallet-lock-pattern"})}),e.jsxs("div",{className:"space-y-3 px-4 pb-4",children:[x&&e.jsxs("button",{type:"button",onClick:b,disabled:u,className:R("flex w-full items-center justify-center gap-2 rounded-full border border-border py-3 font-medium transition-colors","hover:bg-muted","disabled:cursor-not-allowed disabled:opacity-50"),children:[e.jsx(nf,{className:"size-5"}),e.jsx("span",{children:t("walletLock.biometric")})]}),e.jsx("button",{type:"button",onClick:()=>s(),disabled:u,className:"w-full py-2 text-center text-sm text-muted-foreground hover:text-foreground",children:t("walletLock.cancel")})]}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const Fc=({params:t})=>e.jsx(re,{params:t,children:e.jsx(Ng,{})});Fc.__docgenInfo={description:"",methods:[],displayName:"WalletLockConfirmJob"};let wg=null;function Cg(){const{t}=L(["security","transaction","common"]),{pop:s}=G(),{title:n,description:a}=oe(),[r,o]=l.useState(""),[c,i]=l.useState(),[d,u]=l.useState(!1),m=l.useRef(null);l.useRef(!1).current;const h=n??t("security:twoStepSecret.confirmTitle"),v=a??t("security:twoStepSecret.confirmDesc"),j=l.useCallback(async x=>{x.preventDefault();const g=m.current;if(!(!r.trim()||!g)){u(!0),i(void 0);try{await g(r)?s():i(t("security:twoStepSecret.notMatch"))}catch{i(t("security:twoStepSecret.notMatch"))}finally{u(!1)}}},[r,s,t]),p=r.trim().length>0&&!d;return e.jsx(ie,{"data-testid":"two-step-secret-dialog",children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),e.jsx("div",{className:"border-b border-border px-4 pb-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(zs,{className:"size-5 text-primary"}),e.jsx("h2",{className:"text-center text-lg font-semibold",children:h})]})}),e.jsxs("form",{onSubmit:j,className:"space-y-6 p-4",children:[e.jsx("p",{className:"text-center text-muted-foreground text-sm",children:v}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(dn,{value:r,onChange:x=>o(x.target.value),placeholder:t("security:twoStepSecret.inputPlaceholder"),disabled:d,"aria-describedby":c?"two-step-secret-error":void 0,"data-testid":"two-step-secret-input"}),c&&e.jsxs("div",{id:"two-step-secret-error",className:"flex items-center gap-1.5 text-sm text-destructive",children:[e.jsx(xt,{className:"size-4"}),e.jsx("span",{children:c})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{type:"submit",disabled:!p,"data-testid":"two-step-secret-confirm-button",className:R("w-full rounded-full py-3 font-medium text-primary-foreground transition-colors","bg-primary hover:bg-primary/90","disabled:cursor-not-allowed disabled:opacity-50"),children:t(d?"security:walletLock.verifying":"common:confirm")}),e.jsx("button",{type:"button",onClick:()=>s(),disabled:d,className:"w-full py-2 text-center text-sm text-muted-foreground hover:text-foreground",children:t("security:walletLock.cancel")})]})]}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const Wc=({params:t})=>e.jsx(re,{params:t,children:e.jsx(Cg,{})});Wc.__docgenInfo={description:"",methods:[],displayName:"TwoStepSecretConfirmJob"};let gs=null,jn=null;function $c(t,s){gs=t,jn=s}function xi(){gs=null,jn=null}function kg(){const{t}=L(["transaction","common"]),{pop:s}=G();oe();const n=l.useRef(gs),a=l.useRef(jn),r=l.useRef(!1);!r.current&&gs&&(n.current=gs,a.current=jn,xi(),r.current=!0);const o=n.current,[c,i]=l.useState(o?.currentFee??""),[d,u]=l.useState();l.useEffect(()=>()=>{xi()},[]);const m=l.useCallback(g=>{if(!o)return;const y=parseFloat(g),N=parseFloat(o.minFee);if(isNaN(y)||y<=0)return t("transaction:feeEdit.invalidFee");if(y<N)return t("transaction:feeEdit.belowMinFee",{minFee:o.minFee,symbol:o.symbol})},[o,t]),f=l.useCallback(g=>{const y=g.target.value;(y===""||/^\d*\.?\d*$/.test(y))&&(i(y),u(void 0))},[]),h=l.useCallback(g=>{i(g),u(void 0)},[]),v=l.useCallback(g=>{g.preventDefault();const y=m(c);if(y){u(y);return}a.current?.({fee:c}),s()},[c,m,s]),j=l.useCallback(()=>{s()},[s]);if(!o)return null;const p=[{label:t("transaction:feeEdit.presetMin"),value:o.minFee}],x=o.presets??p;return e.jsx(zc,{children:e.jsxs("div",{className:"bg-background rounded-2xl p-4","data-testid":"fee-edit-modal",children:[e.jsx("h2",{className:"mb-4 text-center text-lg font-semibold",children:t("transaction:feeEdit.title")}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 text-sm text-muted-foreground",children:[e.jsxs("p",{children:[t("transaction:feeEdit.currentFee"),": ",o.currentFee," ",o.symbol]}),e.jsxs("p",{children:[t("transaction:feeEdit.minFee"),": ",o.minFee," ",o.symbol]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(g=>e.jsx("button",{type:"button",onClick:()=>h(g.value),className:R("rounded-full px-3 py-1 text-sm transition-colors",c===g.value?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"),children:g.label},g.value))}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:t("transaction:feeEdit.customFee")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{type:"text",inputMode:"decimal",value:c,onChange:f,placeholder:o.minFee,className:R(d&&"border-destructive"),"data-testid":"fee-input"}),e.jsx("span",{className:"shrink-0 text-sm text-muted-foreground",children:o.symbol})]}),d&&e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-destructive",children:[e.jsx(xt,{className:"size-4"}),e.jsx("span",{children:d})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(H,{type:"button",variant:"outline",onClick:j,className:"flex-1",children:t("common:cancel")}),e.jsx(H,{type:"submit",className:"flex-1",disabled:!c,children:t("common:confirm")})]})]})]})})}const Hc=({params:t})=>e.jsx(re,{params:t,children:e.jsx(kg,{})});Hc.__docgenInfo={description:"",methods:[],displayName:"FeeEditJob"};let vs=null,Nn=null,wn=null,Cn="";function Sg(t,s,n){vs=t,Nn=n??null,s&&(wn=s.amount,Cn=s.symbol)}function Ag(){vs=null,Nn=null,wn=null,Cn=""}function Ig(){const{t}=L(["security","transaction","common"]),{pop:s,push:n}=G(),{chainId:a,chainIcon:r,chainSymbol:o,address:c,chainName:i}=oe(),[d,u]=l.useState(""),[m,f]=l.useState(""),[h,v]=l.useState([]),[j,p]=l.useState(!1),[x,g]=l.useState("input"),[y,N]=l.useState(),[b,A]=l.useState(!1),[S,C]=l.useState("idle"),[_,w]=l.useState(),[T,P]=l.useState(null),I=l.useRef(vs),k=l.useRef(Nn),M=l.useRef({amount:wn,symbol:Cn}),E=T??M.current.amount?.toDisplayString()??"0";l.useEffect(()=>(vs&&!I.current&&(I.current=vs,k.current=Nn,M.current={amount:wn,symbol:Cn}),()=>{Ag()}),[]);const D=l.useCallback(()=>{const B=M.current.amount?.toDisplayString()??"0";$c({currentFee:E,minFee:B,symbol:M.current.symbol},Q=>{P(Q.fee)}),n("FeeEditJob",{})},[E,n]),z=l.useCallback(()=>{if(N(void 0),x==="input"){if(!d.trim())return;g("confirm")}else if(x==="confirm"){if(d!==m){N(t("security:twoStepSecret.notMatch"));return}g("walletLock")}},[x,d,m,t]),F=l.useCallback(async B=>{const Q=I.current;if(B.length<4||!Q)return;A(!0),C("broadcasting"),N(void 0),p(!1);const Y=ht(B);try{const X=await Q(d,Y);X.success?(w(X.txHash),C("broadcasted")):(C("idle"),p(!0),v([]),N(X.error??t("security:twoStepSecret.setFailed")))}catch{C("idle"),p(!0),v([]),N(t("security:twoStepSecret.setFailed"))}finally{A(!1)}},[d,t]);return S!=="idle"?e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),e.jsx(qi,{status:S,txHash:_,title:{confirmed:t("security:twoStepSecret.txConfirmed")},description:{confirmed:t("security:twoStepSecret.setSuccessDesc")},checkConfirmed:k.current??void 0,onStatusChange:C,onDone:()=>s()}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})}):e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl","data-testid":"set-two-step-secret-dialog",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),e.jsxs("div",{className:"border-b border-border px-4 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(zs,{className:"size-5 text-primary"}),e.jsx("h2",{className:"text-center text-lg font-semibold",children:t("security:twoStepSecret.setTitle")})]}),a&&c?e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(ya,{chainId:a,chainIcon:r,chainSymbol:o,address:c,size:"sm"})}):i?e.jsx("p",{className:"mt-1 text-center text-sm text-muted-foreground",children:i}):null]}),e.jsxs("div",{className:"space-y-6 p-4",children:[M.current.amount&&e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-muted/50 p-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:t("security:twoStepSecret.feeInfo")}),e.jsx(ka,{amount:E,symbol:M.current.symbol,editable:!0,onEdit:D})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:R("size-2 rounded-full",x==="input"?"bg-primary":"bg-muted")}),e.jsx("div",{className:R("size-2 rounded-full",x==="confirm"?"bg-primary":"bg-muted")}),e.jsx("div",{className:R("size-2 rounded-full",x==="walletLock"?"bg-primary":"bg-muted")})]}),x==="input"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-center text-sm text-muted-foreground",children:t("security:twoStepSecret.inputDesc")}),e.jsx(dn,{value:d,onChange:B=>u(B.target.value),placeholder:t("security:twoStepSecret.inputPlaceholder"),"aria-describedby":y?"two-step-secret-error":void 0,"data-testid":"new-two-step-secret-input"})]}),x==="confirm"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-center text-sm text-muted-foreground",children:t("security:twoStepSecret.confirmDesc")}),e.jsx(dn,{value:m,onChange:B=>f(B.target.value),placeholder:t("security:twoStepSecret.confirmPlaceholder"),"aria-describedby":y?"two-step-secret-error":void 0,"data-testid":"confirm-two-step-secret-input"})]}),x==="walletLock"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-center text-sm text-muted-foreground",children:t("security:twoStepSecret.walletLockDesc")}),e.jsx(Ft,{value:h,onChange:v,onComplete:F,minPoints:4,error:j,disabled:b,"data-testid":"wallet-lock-pattern"})]}),y&&e.jsxs("div",{id:"two-step-secret-error",className:"flex items-center gap-1.5 text-sm text-destructive",children:[e.jsx(xt,{className:"size-4"}),e.jsx("span",{children:y})]}),e.jsxs("div",{className:"space-y-3",children:[x!=="walletLock"&&e.jsx("button",{type:"button",onClick:z,"data-testid":"set-two-step-secret-next-button",className:R("w-full rounded-full py-3 font-medium text-primary-foreground transition-colors","bg-primary hover:bg-primary/90"),children:t("common:next")}),e.jsx("button",{type:"button",onClick:()=>{x==="input"?s():x==="confirm"?(g("input"),N(void 0)):(g("confirm"),N(void 0),p(!1),v([]))},disabled:b,"data-testid":"set-two-step-secret-cancel-button",className:"w-full py-2 text-center text-sm text-muted-foreground hover:text-foreground",children:t(x==="input"?"common:cancel":"common:back")})]})]}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const qc=({params:t})=>e.jsx(re,{params:t,children:e.jsx(Ig,{})});qc.__docgenInfo={description:"",methods:[],displayName:"SetTwoStepSecretJob"};let ua=null;function Tg(){ua=null}const Pg=[{value:"english",label:"English"},{value:"zh-Hans",label:""},{value:"zh-Hant",label:""}],_g=[12,15,18,21,24,36];function Eg(){const{t}=L("onboarding"),{pop:s}=G(),{language:n,length:a}=oe(),[r,o]=l.useState({language:n||"english",length:Number(a)||12}),c=u=>{o(m=>({...m,language:u}))},i=u=>{o(m=>({...m,length:u}))},d=()=>{ua&&ua(r),Tg(),s()};return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),e.jsx("div",{className:"border-border border-b px-4 pb-4",children:e.jsx("h2",{className:"text-center text-lg font-semibold",children:t("create.mnemonicOptions.title")})}),e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-muted-foreground text-sm font-medium",children:t("create.mnemonicOptions.language")}),e.jsx("div",{className:"space-y-1",role:"radiogroup",children:Pg.map(u=>e.jsxs("button",{type:"button",role:"radio","aria-checked":r.language===u.value,onClick:()=>c(u.value),className:R("flex w-full items-center justify-between rounded-lg px-4 py-3","hover:bg-muted/50 transition-colors",r.language===u.value&&"bg-muted"),children:[e.jsx("span",{className:"text-sm",children:u.label}),r.language===u.value&&e.jsx(fe,{className:"text-primary size-5"})]},u.value))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-muted-foreground text-sm font-medium",children:t("create.mnemonicOptions.wordCount")}),e.jsx("div",{className:"grid grid-cols-3 gap-2",role:"radiogroup",children:_g.map(u=>e.jsxs("button",{type:"button",role:"radio","aria-checked":r.length===u,onClick:()=>i(u),className:R("flex items-center justify-center rounded-lg py-3 text-sm font-medium","transition-colors",r.length===u?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"),children:[u," ",t("create.mnemonicOptions.words")]},u))})]}),e.jsx("button",{type:"button",onClick:d,className:R("text-primary-foreground w-full rounded-full py-3 font-medium transition-colors","bg-primary hover:bg-primary/90"),children:t("create.mnemonicOptions.confirm")})]}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const Uc=({params:t})=>e.jsx(re,{params:t,children:e.jsx(Eg,{})});Uc.__docgenInfo={description:"",methods:[],displayName:"MnemonicOptionsJob"};const Qn=3,Mg=10;function Rg(){const{t}=L("common"),{pop:s}=G(),{contactId:n}=oe(),a=Ne(bs,T=>T.contacts),r=n?a.find(T=>T.id===n):null,[o,c]=l.useState(""),[i,d]=l.useState([{id:crypto.randomUUID(),label:"",address:""}]),[u,m]=l.useState(""),[f,h]=l.useState(()=>Math.floor(Math.random()*1e4)),[v,j]=l.useState(!1),p=!!r;l.useEffect(()=>{r&&(c(r.name),d(r.addresses.length>0?r.addresses.map(T=>({id:T.id,label:T.label||"",address:T.address})):[{id:crypto.randomUUID(),label:"",address:""}]),m(r.memo??""),j(!1))},[r]);const x=l.useCallback(()=>{h(Math.floor(Math.random()*1e4)),j(!0)},[]),g=i.find(T=>T.address.trim())?.address.trim(),y=!p||v?g?_t(g,f):void 0:r?.avatar||(g?_t(g,f):void 0),N=l.useCallback(()=>{i.length>=Qn||d(T=>[...T,{id:crypto.randomUUID(),label:"",address:""}])},[i.length]),b=l.useCallback(T=>{d(P=>P.length<=1?P:P.filter(I=>I.id!==T))},[]),A=l.useCallback((T,P,I)=>{d(k=>k.map(M=>M.id===T?{...M,[P]:I}:M))},[]),S=l.useCallback(()=>{const T=o.trim(),P=u.trim(),I=i.filter(M=>M.address.trim()).map((M,E)=>({id:M.id,address:M.address.trim(),label:M.label.trim()||void 0,isDefault:E===0}));if(!T||I.length===0)return;const k=!p||v?I[0]?_t(I[0].address,f):void 0:r?.avatar;p&&r?js.updateContact(r.id,{name:T,avatar:k,addresses:I,memo:P||void 0}):js.addContact({name:T,addresses:I,avatar:k,memo:P||void 0}),s()},[o,i,u,f,p,r,s]),C=i.some(T=>T.address.trim()),_=o.trim().length>0&&C,w=i.length<Qn;return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),e.jsx("div",{className:"border-b border-border px-4 pb-4",children:e.jsx("h2",{className:"text-center text-lg font-semibold",children:t(p?"contact.editTitle":"contact.addTitle")})}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{type:"button",onClick:x,disabled:!g,className:"group relative shrink-0",title:t("addressBook.changeAvatar"),children:[e.jsx(ns,{src:y,size:56}),g&&e.jsx("div",{className:"bg-background/80 absolute inset-0 flex items-center justify-center rounded-full opacity-0 transition-opacity group-hover:opacity-100",children:e.jsx(as,{className:"text-primary size-5"})})]}),e.jsx("input",{id:"contact-name",type:"text",value:o,onChange:T=>c(T.target.value),placeholder:t("contact.namePlaceholder"),maxLength:20,className:R("flex-1 rounded-xl border border-border bg-background px-4 py-3","focus:outline-none focus:ring-2 focus:ring-primary")})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:t("contact.addresses")}),e.jsxs("span",{className:"text-muted-foreground text-xs",children:[i.length,"/",Qn]})]}),i.map((T,P)=>e.jsxs("div",{className:"space-y-2 rounded-xl border border-border p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:T.label,onChange:I=>A(T.id,"label",I.target.value),placeholder:t("contact.addressLabelPlaceholder"),maxLength:Mg,className:R("w-24 shrink-0 rounded-lg border border-border bg-muted/50 px-3 py-2 text-sm","focus:outline-none focus:ring-2 focus:ring-primary")}),i.length>1&&e.jsx("button",{type:"button",onClick:()=>b(T.id),className:"text-muted-foreground hover:text-destructive shrink-0 p-1",children:e.jsx(Bt,{className:"size-4"})}),P===0&&e.jsx("span",{className:"bg-primary/10 text-primary rounded px-1.5 py-0.5 text-xs",children:"Default"})]}),e.jsx("input",{type:"text",value:T.address,onChange:I=>A(T.id,"address",I.target.value),placeholder:t("contact.addressPlaceholder"),className:R("w-full rounded-lg border border-border bg-background px-3 py-2 font-mono text-sm","focus:outline-none focus:ring-2 focus:ring-primary")})]},T.id)),w&&e.jsxs("button",{type:"button",onClick:N,className:"flex w-full items-center justify-center gap-2 rounded-xl border border-dashed border-border py-3 text-sm text-muted-foreground hover:border-primary hover:text-primary",children:[e.jsx(st,{className:"size-4"}),t("contact.addAddress")]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"contact-memo",className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(Wi,{className:"size-4"}),t("contact.memoOptional")]}),e.jsx("textarea",{id:"contact-memo",value:u,onChange:T=>m(T.target.value),placeholder:t("contact.memoPlaceholder"),maxLength:100,rows:2,className:R("w-full resize-none rounded-xl border border-border bg-background px-4 py-3","focus:outline-none focus:ring-2 focus:ring-primary")})]}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsx("button",{onClick:S,disabled:!_,className:R("w-full rounded-full py-3 font-medium text-primary-foreground transition-colors","bg-primary hover:bg-primary/90","disabled:cursor-not-allowed disabled:opacity-50"),children:t(p?"contact.save":"contact.add")}),e.jsx("button",{onClick:()=>s(),className:"w-full py-2 text-center text-sm text-muted-foreground hover:text-foreground",children:t("contact.cancel")})]})]})}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const Vc=({params:t})=>e.jsx(re,{params:t,children:e.jsx(Rg,{})});Vc.__docgenInfo={description:"",methods:[],displayName:"ContactEditJob"};function zg(t,s=8,n=6){return t.length<=s+n+3?t:`${t.slice(0,s)}...${t.slice(-n)}`}function Dg(){const{t}=L("common"),{pop:s}=G(),{chainType:n}=oe(),a=n,[r,o]=l.useState(""),c=Ne(bs),i=l.useMemo(()=>{let u=c.contacts;return r&&(u=pa.searchContacts(c,r)),u=[...u].toSorted((m,f)=>f.updatedAt-m.updatedAt),u.map(m=>{const f=m.addresses.map(v=>({...v,isValidForCurrentChain:a?sm(v.address,a):!0})),h=f.some(v=>v.isValidForCurrentChain);return{contact:m,addresses:f,hasValidAddress:h}})},[c,r,a]),d=(u,m)=>{const f=new CustomEvent("contact-picker-select",{detail:{contact:u,address:m}});window.dispatchEvent(f),s()};return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),e.jsx("div",{className:"border-border border-b px-4 pb-4",children:e.jsx("h2",{className:"text-center text-lg font-semibold",children:t("contact.selectAddress")})}),e.jsx("div",{className:"border-border border-b p-4",children:e.jsxs("div",{className:"bg-muted/50 flex items-center gap-2 rounded-xl px-3 py-2",children:[e.jsx(Ds,{className:"text-muted-foreground size-4"}),e.jsx("input",{type:"text",value:r,onChange:u=>o(u.target.value),placeholder:t("addressBook.searchPlaceholder"),className:"placeholder:text-muted-foreground min-w-0 flex-1 bg-transparent text-sm outline-none"})]})}),e.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:i.length===0?e.jsx("div",{className:"text-muted-foreground py-12 text-center text-sm",children:t(r?"addressBook.noResults":"contact.noContacts")}):e.jsx("div",{className:"divide-border divide-y",children:i.map(({contact:u,addresses:m,hasValidAddress:f})=>e.jsxs("div",{className:R(!f&&"opacity-50"),children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 pt-3 pb-2",children:[e.jsx(ns,{src:u.avatar||(m[0]?.address?_t(m[0].address):void 0),size:40,className:"shrink-0"}),e.jsx("p",{className:"min-w-0 flex-1 truncate font-medium",children:u.name})]}),e.jsx("div",{className:"space-y-1 pb-3 pl-[56px] pr-4",children:m.map(h=>{const v=!h.isValidForCurrentChain,j=h.label;return e.jsxs("button",{onClick:()=>!v&&d(u,h),disabled:v,className:R("flex min-h-[44px] w-full items-center gap-3 rounded-xl px-3 py-2.5 transition-colors",v?"cursor-not-allowed opacity-50":"hover:bg-muted/50 active:bg-muted"),children:[e.jsx("p",{className:R("min-w-0 flex-1 truncate text-left font-mono text-sm",v?"text-muted-foreground/50":"text-foreground"),children:zg(h.address)}),e.jsxs("div",{className:"flex shrink-0 items-center gap-2",children:[j&&e.jsx("span",{className:R("max-w-[5rem] truncate rounded-md bg-muted px-2 py-0.5 text-xs",v?"text-muted-foreground/50":"text-muted-foreground"),children:j}),h.isDefault&&e.jsx("span",{className:"bg-primary/10 text-primary rounded-md px-2 py-0.5 text-xs",children:"Default"})]})]},h.id)})})]},u.id))})}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const Jc=({params:t})=>e.jsx(re,{params:t,children:e.jsx(Dg,{})});Jc.__docgenInfo={description:"",methods:[],displayName:"ContactPickerJob"};const Kc=()=>{const{t}=L(["wallet","home"]),{pop:s}=G(),{navigate:n}=se(),a=()=>{s(),n({to:"/wallet/create"})},r=()=>{s(),n({to:"/onboarding/recover"})};return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),e.jsx("div",{className:"border-b border-border px-4 pb-4",children:e.jsx("h2",{className:"text-center text-lg font-semibold",children:t("wallet:add")})}),e.jsxs("div",{className:"space-y-3 p-4",children:[e.jsxs("button",{onClick:a,className:R("flex w-full items-center gap-4 rounded-xl p-4 transition-colors","bg-muted/50 hover:bg-muted active:bg-muted/80"),children:[e.jsx("div",{className:"flex size-12 items-center justify-center rounded-full bg-primary/10",children:e.jsx(st,{className:"size-6 text-primary"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"font-semibold",children:t("home:welcome.createWallet")}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t("wallet:createDesc")})]})]}),e.jsxs("button",{onClick:r,className:R("flex w-full items-center gap-4 rounded-xl p-4 transition-colors","bg-muted/50 hover:bg-muted active:bg-muted/80"),children:[e.jsx("div",{className:"flex size-12 items-center justify-center rounded-full bg-primary/10",children:e.jsx(Ls,{className:"size-6 text-primary"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"font-semibold",children:t("home:welcome.importWallet")}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t("wallet:importDesc")})]})]})]}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})};Kc.__docgenInfo={description:"",methods:[],displayName:"WalletAddJob"};const Gc=()=>{const{t}=L(["wallet","common"]),{pop:s,push:n}=G(),a=gt(),o=ke()?.id,{getWalletTheme:c}=Ri(),i=zi(),d=m=>{me.setCurrentWallet(m),s()},u=()=>{s(),n("WalletAddJob",{})};return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),e.jsx("div",{className:"border-b border-border px-4 pb-4",children:e.jsx("h2",{className:"text-center text-lg font-semibold",children:t("common:a11y.tabWallet")})}),e.jsx("div",{className:"max-h-[50vh] space-y-2 overflow-y-auto p-4",children:a.map(m=>{const f=m.id===o,h=m.chainAddresses[0]?.address,v=h?`${h.slice(0,6)}...${h.slice(-4)}`:"---",j=c(m.id);return e.jsxs("button",{onClick:()=>d(m.id),className:R("flex w-full items-center gap-3 rounded-xl p-4 transition-all","active:scale-[0.98]",f?"bg-primary/10 ring-2 ring-primary":"bg-muted/50 hover:bg-muted"),children:[e.jsx(am,{themeHue:j,size:"md",watermarkIconUrl:i[m.chain]}),e.jsxs("div",{className:"min-w-0 flex-1 text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"truncate font-medium",children:m.name}),f&&e.jsx(im,{className:"size-4 shrink-0 text-primary"})]}),e.jsx("p",{className:"truncate font-mono text-xs text-muted-foreground",children:v})]})]},m.id)})}),e.jsx("div",{className:"border-t border-border p-4",children:e.jsxs("button",{onClick:u,className:R("flex w-full items-center justify-center gap-2 rounded-xl p-4","bg-muted/50 hover:bg-muted active:bg-muted/80 transition-colors"),children:[e.jsx(st,{className:"size-5"}),e.jsx("span",{className:"font-medium",children:t("wallet:add")})]})}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})};Gc.__docgenInfo={description:"",methods:[],displayName:"WalletListJob"};let ma=null;function Lg(t){ma=t}const Qc=()=>{const{t}=L(["onboarding","common"]),{pop:s}=G(),[n,a]=l.useState(!1),r=()=>{s()},o=()=>{n&&(s(),ma?.(),ma=null)};return e.jsx(zc,{children:e.jsxs("div",{className:"bg-background mx-4 max-w-sm rounded-2xl p-5",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-full bg-amber-500/15 p-2",children:e.jsx(Pe,{className:"size-5 text-amber-600","aria-hidden":"true"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"text-base font-semibold",children:t("onboarding:securityWarning.title")}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:t("onboarding:securityWarning.message")})]})]}),e.jsxs("label",{className:"mt-4 flex cursor-pointer items-center gap-2 text-sm",children:[e.jsx(Ui,{checked:n,onCheckedChange:a}),e.jsx("span",{children:t("onboarding:securityWarning.acknowledge")})]}),e.jsxs("div",{className:"mt-5 flex gap-2",children:[e.jsx(H,{type:"button",variant:"outline",className:"flex-1",onClick:r,children:t("common:cancel")}),e.jsx(H,{type:"button",className:"flex-1",onClick:o,disabled:!n,children:t("common:confirm")})]})]})})};Qc.__docgenInfo={description:"",methods:[],displayName:"SecurityWarningJob"};let ys=null;function Yc(t,s){ys={onConfirm:t,minFee:s?.minFee,onFeeChange:s?.onFeeChange}}function gi(){ys=null}function Bg(t){return t.length<=16?t:`${t.slice(0,10)}...${t.slice(-6)}`}function Og(){const{t}=L("transaction"),{pop:s,push:n}=G(),a=oe(),[r,o]=l.useState(!1),[c,i]=l.useState(!1),[d,u]=l.useState(!1),[m,f]=l.useState(null),h=l.useRef(ys),v=l.useRef(!1);!v.current&&ys&&(h.current=ys,gi(),v.current=!0),l.useEffect(()=>()=>{gi()},[]);const j=a.feeLoading==="true",p=a.feeFiatValue?parseFloat(a.feeFiatValue):void 0,x=m??a.feeAmount,g=!!h.current?.onFeeChange,y=l.useCallback(async()=>{try{await ba.write({text:a.toAddress}),i(!0),setTimeout(()=>i(!1),2e3)}catch{}},[a.toAddress]),N=l.useCallback(()=>{o(C=>!C)},[]),b=l.useCallback(()=>{const C=h.current;C?.onFeeChange&&($c({currentFee:x,minFee:C.minFee??a.feeAmount,symbol:a.feeSymbol},_=>{f(_.fee),C.onFeeChange?.(_.fee)}),n("FeeEditJob",{}))},[x,a.feeAmount,a.feeSymbol,n]),A=l.useCallback(async()=>{const C=h.current;if(!(!C?.onConfirm||d)){u(!0);try{s(),await C.onConfirm()}finally{u(!1)}}},[d,s]),S=l.useCallback(()=>{s()},[s]);return e.jsx(ie,{"data-testid":"transfer-confirm-sheet",children:e.jsx(yn,{title:t("confirmSheet.title"),children:e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-3xl font-bold",children:[a.amount," ",a.symbol]}),a.fiatValue&&e.jsxs("p",{className:"text-muted-foreground mt-1",children:[" $",a.fiatValue]})]}),e.jsxs("div",{className:"bg-muted/30 space-y-4 rounded-xl p-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:t("confirmSheet.toAddress")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:N,className:"hover:text-primary flex min-w-0 flex-1 items-center gap-1 text-left font-mono text-sm",children:[e.jsx("span",{className:R("min-w-0",r?"break-all":"truncate"),children:r?a.toAddress:Bg(a.toAddress)}),r?e.jsx(Vi,{className:"size-4 shrink-0"}):e.jsx(Ki,{className:"size-4 shrink-0"})]}),e.jsx("button",{type:"button",onClick:y,className:"text-muted-foreground hover:text-foreground shrink-0 p-1","aria-label":t(c?"confirmSheet.copied":"confirmSheet.copyAddress"),children:c?e.jsx(fe,{className:"size-4 text-green-500"}):e.jsx(Oi,{className:"size-4"})})]})]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:t("confirmSheet.networkFee")}),e.jsx(ka,{amount:x,symbol:a.feeSymbol,...p!==void 0&&{fiatValue:p},isLoading:j,editable:g,onEdit:b})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button","data-testid":"cancel-transfer-button",onClick:S,className:"border-border hover:bg-muted flex-1 rounded-full border py-3 font-medium transition-colors",disabled:d,children:t("confirmSheet.cancel")}),e.jsx("button",{type:"button","data-testid":"confirm-transfer-button",onClick:A,disabled:d||j,className:R("flex-1 rounded-full py-3 font-medium text-primary-foreground transition-colors","bg-primary hover:bg-primary/90","disabled:cursor-not-allowed disabled:opacity-50"),children:t(d?"confirmSheet.confirming":"confirmSheet.confirm")})]})]})})})}const Xc=({params:t})=>e.jsx(re,{params:t,children:e.jsx(Og,{})});Xc.__docgenInfo={description:"",methods:[],displayName:"TransferConfirmJob"};let kn=null;function Zc(t){kn=t}function Fg(){kn=null}function Wg(){const{t}=L(["security","transaction","common"]),{pop:s,push:n}=G(),{title:a}=oe(),r=Ma(),o=vt(),c=ze(),i=tt(),d=ke(),[u,m]=l.useState("wallet_lock"),[f,h]=l.useState([]),[v,j]=l.useState(""),[p,x]=l.useState("idle"),[g,y]=l.useState(),[N,b]=l.useState(),[A,S]=l.useState(!1),[C,_]=l.useState(!1),[w,T]=l.useState(),[P,I]=l.useState(null),k=l.useRef(null),M=l.useRef(""),E=l.useRef(!1);!E.current&&kn&&(k.current=kn,Fg(),E.current=!0),l.useEffect(()=>{if(!g||!c||!d?.address)return;const J=Ie(c);return J?.transaction?J.transaction.subscribe({txHash:g,senderId:d.address},ce=>{ce&&(ce.status==="confirmed"?x("confirmed"):ce.status==="failed"?x("failed"):ce.status==="pending"&&x("broadcasted"))}):void 0},[g,c,d?.address]),l.useEffect(()=>{if(p!=="confirmed"){I(null);return}I(5);const J=setInterval(()=>{I(V=>V===null||V<=1?(clearInterval(J),s(),null):V-1)},1e3);return()=>clearInterval(J)},[p,s]);const D=l.useMemo(()=>qe.getChainById(i,c),[i,c]),z=l.useMemo(()=>{const J=D?.explorer?.queryTx;return!J||!g?null:J.replace(":hash",g).replace(":signature",g)},[D?.explorer?.queryTx,g]),F=l.useCallback(()=>{z&&window.open(z,"_blank","noopener,noreferrer")},[z]),B=u==="wallet_lock"?a??t("security:walletLock.verifyTitle"):t("transaction:sendPage.twoStepSecretTitle"),Q=l.useCallback(async J=>{const V=k.current;if(J.length<4||!V)return;_(!0),b(void 0),S(!1),x("broadcasting");const ce=ht(J);M.current=ce;try{const pe=await V(ce);if(pe.status==="ok"){pe.txHash&&y(pe.txHash),pe.pendingTxId&&T(pe.pendingTxId),x("broadcasted");return}if(pe.status==="wallet_lock_invalid"){S(!0),h([]);return}if(pe.status==="two_step_secret_required"){m("two_step_secret"),b(void 0);return}if(pe.status==="error"){b(pe.message??t("security:walletLock.error")),x("failed"),pe.pendingTxId&&T(pe.pendingTxId);return}}catch{S(!0),h([])}finally{_(!1)}},[t]),Y=l.useCallback(async()=>{const J=k.current;if(!(!v.trim()||!J)){_(!0),b(void 0);try{const V=await J(M.current,v);if(V.status==="ok"){V.txHash&&y(V.txHash),V.pendingTxId&&T(V.pendingTxId),x("broadcasted");return}(V.status==="two_step_secret_invalid"||V.status==="error")&&(b(V.message??t("transaction:sendPage.twoStepSecretError")),V.pendingTxId&&(T(V.pendingTxId),x("failed")))}catch{b(t("transaction:sendPage.twoStepSecretError"))}finally{_(!1)}}},[v,t]),X=l.useCallback(J=>{J.preventDefault(),u==="two_step_secret"&&Y()},[u,Y]),Z=v.trim().length>0&&!C,W=l.useCallback(async()=>{if(w){_(!0),b(void 0);try{await nu.retryBroadcast(w,i),x("broadcasted")}catch(J){b(J instanceof Error?J.message:t("transaction:broadcast.unknown"))}finally{_(!1)}}},[w,i,t]);if(p!=="idle"){const J=p==="failed",V=p==="confirmed";return e.jsx(ie,{children:e.jsx("div",{"data-testid":"transfer-wallet-lock-dialog",children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),e.jsx(qi,{status:p,txHash:g,title:{broadcasted:t("transaction:txStatus.broadcasted"),confirmed:t("transaction:sendResult.success"),failed:t("transaction:broadcast.failed")},description:{broadcasted:t("transaction:txStatus.broadcastedDesc"),confirmed:P!==null?t("transaction:txStatus.autoCloseIn",{seconds:P}):t("transaction:txStatus.confirmedDesc"),failed:N},onStatusChange:x,onDone:()=>s(),onViewDetails:()=>{s(),g&&n("TransactionDetailActivity",{txId:g})},onViewExplorer:z?F:void 0,onShare:async()=>{g&&(await r.write({text:g}),o.show(t("common:copied")))}}),e.jsxs("div",{className:"px-4 pb-4 space-y-2",children:[J&&e.jsxs("button",{type:"button",onClick:W,disabled:C,className:R("w-full flex items-center justify-center gap-2 rounded-full py-3 font-medium transition-colors","bg-primary text-primary-foreground hover:bg-primary/90","disabled:cursor-not-allowed disabled:opacity-50"),children:[e.jsx(as,{className:"size-4"}),t(C?"common:retrying":"transaction:pendingTx.retry")]}),e.jsx("button",{type:"button",onClick:()=>s(),className:"w-full py-2 text-center text-sm text-muted-foreground hover:text-foreground",children:V&&P!==null?t("transaction:txStatus.closeIn",{seconds:P}):t("common:close")})]}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})})}return u==="wallet_lock"?e.jsx(ie,{children:e.jsx("div",{"data-testid":"transfer-wallet-lock-dialog",children:e.jsx(yn,{title:B,children:e.jsxs("div",{className:"p-4",children:[e.jsx(Ft,{value:f,onChange:h,onComplete:Q,minPoints:4,error:A,disabled:C,"data-testid":"transfer-wallet-lock-pattern"}),N&&e.jsxs("div",{className:"flex items-start justify-center gap-1.5 text-sm text-destructive mt-3",children:[e.jsx(xt,{className:"size-4 shrink-0 mt-0.5"}),e.jsx("pre",{className:"overflow-auto whitespace-break-spaces",children:N})]}),e.jsx("button",{type:"button",onClick:()=>s(),disabled:C,className:"mt-4 w-full py-2 text-center text-sm text-muted-foreground hover:text-foreground",children:t("common:cancel")})]})})})}):e.jsx(ie,{children:e.jsx("div",{"data-testid":"transfer-wallet-lock-dialog",children:e.jsx(yn,{title:B,children:e.jsxs("form",{onSubmit:X,className:"space-y-6 p-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary mb-2",children:[e.jsx(zs,{className:"size-5"}),e.jsx("span",{className:"text-sm",children:t("transaction:sendPage.twoStepSecretDescription")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(dn,{value:v,onChange:J=>j(J.target.value),placeholder:t("transaction:sendPage.twoStepSecretPlaceholder"),disabled:C,"aria-describedby":N?"two-step-error":void 0,"data-testid":"two-step-secret-input"}),v.length>0&&v.length<6&&e.jsx("div",{className:"absolute right-10 top-1/2 -translate-y-1/2",children:e.jsx("span",{className:"text-xs text-amber-500",children:t("security:twoStepSecret.lengthHint",{count:v.length})})})]}),N&&e.jsxs("div",{id:"two-step-error",className:"flex items-center gap-1.5 text-sm text-destructive",children:[e.jsx(xt,{className:"size-4"}),e.jsx("span",{children:N})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{type:"submit","data-testid":"two-step-confirm-button",disabled:!Z,className:R("w-full rounded-full py-3 font-medium text-primary-foreground transition-colors","bg-primary hover:bg-primary/90","disabled:cursor-not-allowed disabled:opacity-50"),children:t(C?"common:verifying":"common:confirm")}),e.jsx("button",{type:"button",onClick:()=>s(),disabled:C,className:"w-full py-2 text-center text-sm text-muted-foreground hover:text-foreground",children:t("common:cancel")})]})]})})})})}const el=({params:t})=>e.jsx(re,{params:t,children:e.jsx(Wg,{})});el.__docgenInfo={description:"",methods:[],displayName:"TransferWalletLockJob"};const $g=150;function Hg(){const{t}=L("scanner"),{pop:s}=G(),n=go(),{chainType:a,title:r,hint:o}=oe(),c=l.useRef(null),i=l.useRef(null),d=l.useRef(null),u=l.useRef(null),m=l.useRef(!1),f=l.useRef(!1),h=l.useRef(!1),[v,j]=l.useState(!1),[p,x]=l.useState(!1),[g,y]=l.useState(null),[N,b]=l.useState(null),A=cm(a),S=l.useCallback(k=>{if(k===N)return;b(k);const M=Gi(k),E=A(k,M);if(E===!0){y({type:"success",text:t("scanSuccess")}),"vibrate"in navigator&&navigator.vibrate(100),m.current=!1;const D=lm();setTimeout(()=>{s(),setTimeout(()=>{D?.({content:k,parsed:M})},100)},300)}else y({type:"error",text:t(E,{defaultValue:E})}),setTimeout(()=>{y(null),b(null)},3e3)},[N,A,t,s]),C=l.useCallback(()=>{if(m.current)return;m.current=!0,i.current||(i.current=document.createElement("canvas"));const k=async()=>{if(!(!m.current||!c.current||!u.current)){try{const M=await u.current.scanFromVideo(c.current,i.current??void 0);M&&S(M.content)}catch{}m.current&&setTimeout(k,$g)}};k()},[S]),_=l.useCallback(()=>{m.current=!1,d.current&&(d.current.getTracks().forEach(k=>k.stop()),d.current=null),j(!1)},[]),w=l.useCallback(async()=>{if(!h.current){if(h.current=!0,!navigator.mediaDevices?.getUserMedia){y({type:"error",text:t("error")}),h.current=!1;return}try{try{if(!await n.checkPermission()&&!await n.requestPermission()){y({type:"error",text:t("permissionDenied")}),h.current=!1;return}}catch{}if(!f.current){h.current=!1;return}const k=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});if(!f.current){k.getTracks().forEach(M=>M.stop()),h.current=!1;return}if(d.current=k,c.current){c.current.srcObject=k;try{await c.current.play(),f.current&&(j(!0),C())}catch(M){if(!(M instanceof DOMException&&M.name==="AbortError"))throw M}}}catch(k){if(!f.current){h.current=!1;return}k instanceof DOMException?k.name==="NotAllowedError"?y({type:"error",text:t("permissionDenied")}):k.name==="NotFoundError"?y({type:"error",text:t("noCameraFound",{defaultValue:t("error")})}):k.name==="AbortError"||y({type:"error",text:t("error")}):y({type:"error",text:t("error")})}finally{h.current=!1}}},[n,C,t]);l.useEffect(()=>(f.current=!0,u.current=Qi({useWorker:!0}),w(),()=>{f.current=!1,_(),u.current?.destroy(),u.current=null}),[]);const T=l.useCallback(()=>{const k=document.createElement("input");k.type="file",k.accept="image/*",k.onchange=async M=>{const E=M.target.files?.[0];if(!(!E||!u.current))try{const D=new Image,z=URL.createObjectURL(E);D.onload=async()=>{URL.revokeObjectURL(z);const F=document.createElement("canvas");F.width=D.width,F.height=D.height;const B=F.getContext("2d");if(!B||!u.current){y({type:"error",text:t("noQrFound")});return}B.drawImage(D,0,0);const Q=await u.current.scanFromCanvas(F);Q?S(Q.content):y({type:"error",text:t("noQrFound")})},D.onerror=()=>{URL.revokeObjectURL(z),y({type:"error",text:t("noQrFound")})},D.src=z}catch{y({type:"error",text:t("noQrFound")})}},k.click()},[S,t]),P=l.useCallback(async()=>{if(d.current){const k=d.current.getVideoTracks()[0];if(k)try{await k.applyConstraints({advanced:[{torch:!p}]}),x(!p)}catch{}}},[p]),I=l.useCallback(()=>{_(),s()},[_,s]);return e.jsx(ie,{children:e.jsxs("div",{className:"flex h-[80vh] flex-col overflow-hidden rounded-t-2xl bg-black",children:[e.jsx("div",{className:"flex justify-center py-2",children:e.jsx("div",{className:"h-1 w-10 rounded-full bg-white/30"})}),e.jsxs("div",{className:"flex items-center justify-between px-4 pb-2",children:[e.jsx(H,{variant:"ghost",size:"icon",onClick:I,className:"text-white hover:bg-white/20","data-testid":"scanner-close-button",children:e.jsx(Bs,{className:"size-6"})}),e.jsx("h2",{className:"text-lg font-medium text-white","data-testid":"scanner-title",children:r??t("title")}),e.jsx(H,{variant:"ghost",size:"icon",onClick:P,className:R("text-white hover:bg-white/20",p&&"text-yellow-400"),"data-testid":"scanner-flash-button",children:e.jsx(uo,{className:"size-6"})})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("video",{ref:c,className:R("absolute inset-0 size-full object-cover",!v&&"hidden"),playsInline:!0,muted:!0,"data-testid":"scanner-video"}),!v&&!g&&e.jsx("div",{className:"flex size-full items-center justify-center",children:e.jsx("p",{className:"text-white/60",children:t("initializing")})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"relative size-64","data-testid":"scanner-viewfinder",children:[e.jsx("div",{className:R("absolute top-0 left-0 size-8 border-t-4 border-l-4",g?.type==="success"?"border-green-500":"border-primary")}),e.jsx("div",{className:R("absolute top-0 right-0 size-8 border-t-4 border-r-4",g?.type==="success"?"border-green-500":"border-primary")}),e.jsx("div",{className:R("absolute bottom-0 left-0 size-8 border-b-4 border-l-4",g?.type==="success"?"border-green-500":"border-primary")}),e.jsx("div",{className:R("absolute right-0 bottom-0 size-8 border-r-4 border-b-4",g?.type==="success"?"border-green-500":"border-primary")}),v&&!g&&e.jsx("div",{className:"animate-scan bg-primary absolute right-2 left-2 h-0.5"})]})}),e.jsx("div",{className:"absolute inset-x-0 bottom-24 px-4 text-center",children:g?e.jsx("div",{className:R("inline-block rounded-lg px-4 py-2",g.type==="error"&&"bg-red-500/80 text-white",g.type==="success"&&"bg-green-500/80 text-white",g.type==="info"&&"bg-black/50 text-white"),"data-testid":"scanner-message",children:g.text}):v?e.jsx("p",{className:"text-white/80","data-testid":"scanner-hint",children:o??(a?t("scanPromptChain",{chain:a}):t("scanPrompt"))}):null})]}),e.jsx("div",{className:"flex justify-center gap-8 bg-black/50 py-6",children:e.jsxs(H,{variant:"ghost",size:"lg",onClick:T,className:"flex flex-col items-center text-white hover:bg-white/20","data-testid":"scanner-gallery-button",children:[e.jsx(oo,{className:"mb-1 size-6"}),e.jsx("span",{className:"text-xs",children:t("gallery")})]})}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)] bg-black"})]})})}const tl=({params:t})=>e.jsx(re,{params:t,children:e.jsx(Hg,{})});tl.__docgenInfo={description:"",methods:[],displayName:"ScannerJob"};function qg(){const{t}=L("common"),{pop:s}=G(),n=oe(),[a,r]=l.useState(n.name||""),[o,c]=l.useState(n.memo||""),[i,d]=l.useState(0),[u,m]=l.useState(!1),[f,h]=l.useState(!1),v=(()=>{try{return JSON.parse(n.addresses||"[]")}catch{return[]}})(),j=l.useCallback(()=>{d(g=>g+1)},[]),p=l.useCallback(async()=>{if(!(!a.trim()||v.length===0)){m(!0);try{const g=n.avatar||(v[0]?.address?_t(v[0].address,i):void 0);js.addContact({name:a.trim(),addresses:v.map((y,N)=>({id:`addr-${N}`,address:y.address,label:y.label,isDefault:N===0})),memo:o.trim()||void 0,avatar:g}),h(!0),setTimeout(()=>s(),500)}catch{}finally{m(!1)}}},[a,o,v,n.avatar,i,s]),x=l.useCallback(()=>{s()},[s]);return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl pb-[env(safe-area-inset-bottom)]",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),e.jsx("div",{className:"border-border border-b px-4 pb-4",children:e.jsx("h2",{className:"text-center text-lg font-semibold",children:t("addressBook.addContact")})}),e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{type:"button",onClick:j,className:"group relative",title:t("addressBook.changeAvatar"),children:[e.jsx(ns,{src:n.avatar||(v[0]?.address?_t(v[0].address,i):void 0),size:48}),!n.avatar&&e.jsx("div",{className:"bg-background/80 absolute inset-0 flex items-center justify-center rounded-full opacity-0 transition-opacity group-hover:opacity-100",children:e.jsx(as,{className:"text-primary size-5"})})]}),e.jsx(Re,{value:a,onChange:g=>r(g.target.value),placeholder:t("addressBook.namePlaceholder"),className:"flex-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-muted-foreground text-sm",children:t("addressBook.addresses")}),e.jsx("div",{className:"space-y-2",children:v.map((g,y)=>{const N=nm(g.address),b=g.label||N.chainType?.toUpperCase()||"";return e.jsxs("div",{className:"bg-muted/50 flex items-center gap-3 rounded-lg p-3",children:[e.jsx(Aa,{className:"text-muted-foreground size-5 shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[b&&e.jsx("div",{className:"text-muted-foreground text-xs",children:b}),e.jsx("div",{className:"truncate font-mono text-sm",children:g.address})]})]},y)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-muted-foreground text-sm",children:t("addressBook.memo")}),e.jsx(Re,{value:o,onChange:g=>c(g.target.value),placeholder:t("addressBook.memoPlaceholder")})]})]}),e.jsxs("div",{className:"flex gap-3 p-4",children:[e.jsx(H,{variant:"outline",onClick:x,disabled:u||f,className:"flex-1",children:t("cancel")}),e.jsx(H,{onClick:p,disabled:!a.trim()||v.length===0||u||f,className:R("flex-1",f&&"bg-green-500"),children:f?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"mr-1 size-4"}),t("saved")]}):t(u?"saving":"save")})]})]})})}const sl=({params:t})=>e.jsx(re,{params:t,children:e.jsx(qg,{})});sl.__docgenInfo={description:"",methods:[],displayName:"ContactAddConfirmJob"};function Ug(){const{t}=L("common"),{pop:s}=G(),n=oe(),a=l.useRef(null),[r,o]=l.useState(!1),c=l.useMemo(()=>{try{return JSON.parse(n.addresses||"[]")}catch{return[]}},[n.addresses]),i=l.useMemo(()=>Sa({name:n.name,addresses:c,avatar:n.avatar}),[n.name,c,n.avatar]),d=l.useCallback(async()=>{const m=a.current;if(!(!m||r)){o(!0);try{const{snapdom:f}=await ft(async()=>{const{snapdom:h}=await import("./snapdom-CO8q8LPW.js").then(v=>v.s);return{snapdom:h}},__vite__mapDeps([0,1]),import.meta.url);await f.download(m,{type:"png",filename:`contact-${n.name}.png`,scale:2,quality:1})}catch{}finally{o(!1)}}},[n.name,r]),u=l.useCallback(async()=>{const m=a.current;if(!(!m||!navigator.share)){o(!0);try{const{snapdom:f}=await ft(async()=>{const{snapdom:p}=await import("./snapdom-CO8q8LPW.js").then(x=>x.s);return{snapdom:p}},__vite__mapDeps([0,1]),import.meta.url),v=await(await f(m,{scale:2})).toBlob(),j=new File([v],`contact-${n.name}.png`,{type:"image/png"});await navigator.share({title:t("addressBook.shareContact"),text:`${n.name} - ${c.map(p=>`${p.label||""}: ${p.address}`).join(", ")}`,files:[j]})}catch{}finally{o(!1)}}},[n.name,c,t,r]);return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl pb-[env(safe-area-inset-bottom)]",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),e.jsxs("div",{className:"flex items-center justify-between border-b px-4 pb-4",children:[e.jsx(H,{variant:"ghost",size:"icon",onClick:()=>s(),children:e.jsx(Bs,{className:"size-5"})}),e.jsx("h2",{className:"text-lg font-semibold",children:t("addressBook.shareContact")}),e.jsx("div",{className:"w-10"})]}),e.jsxs("div",{className:"flex flex-col items-center p-6",children:[e.jsx("div",{ref:a,children:e.jsx(Ia,{name:n.name,avatar:n.avatar,addresses:c,qrContent:i})}),e.jsx("p",{className:"text-muted-foreground mt-4 text-center text-sm",children:t("addressBook.scanToAdd")})]}),e.jsxs("div",{className:"flex gap-3 p-4",children:[e.jsxs(H,{variant:"outline",onClick:d,disabled:r,className:"flex-1",children:[r?e.jsx(be,{className:"mr-2 size-4 animate-spin"}):e.jsx(Ls,{className:"mr-2 size-4"}),t("download")]}),"share"in navigator&&e.jsxs(H,{onClick:u,disabled:r,className:"flex-1",children:[r?e.jsx(be,{className:"mr-2 size-4 animate-spin"}):e.jsx(As,{className:"mr-2 size-4"}),t("share")]})]})]})})}const nl=({params:t})=>e.jsx(re,{params:t,children:e.jsx(Ug,{})});nl.__docgenInfo={description:"",methods:[],displayName:"ContactShareJob"};function Vg(){const{t}=L(["settings","common"]),{pop:s}=G(),[n,a]=l.useState(!1),r=l.useCallback(()=>{a(!0);const o="./";window.location.href=`${o}clear.html`},[]);return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-destructive/10 flex size-16 items-center justify-center rounded-full",children:e.jsx(Pe,{className:"text-destructive size-8"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:t("settings:clearData.title")}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:t("settings:clearData.warning")})]}),e.jsx("div",{className:"bg-destructive/5 rounded-lg p-4",children:e.jsxs("ul",{className:"text-destructive space-y-2 text-sm",children:[e.jsxs("li",{children:[" ",t("settings:clearData.item1")]}),e.jsxs("li",{children:[" ",t("settings:clearData.item2")]}),e.jsxs("li",{children:[" ",t("settings:clearData.item3")]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(H,{variant:"outline",className:"flex-1",onClick:()=>s(),disabled:n,children:t("common:cancel")}),e.jsx(H,{variant:"destructive",className:"flex-1",onClick:r,disabled:n,children:t("settings:clearData.confirm")})]})]}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const al=()=>e.jsx(Vg,{});al.__docgenInfo={description:"",methods:[],displayName:"ClearDataConfirmJob"};function Jg(t){if(!t)return;if(t.startsWith("0x")){const n=En(t);if(n)return n}const s=um(t);return xa.getConfig(s),s}function Kg(){const{t}=L("common"),{pop:s}=G(),{chain:n,exclude:a,appName:r,appIcon:o}=oe(),c=Es(),i=l.useMemo(()=>Jg(n),[n]),d=l.useMemo(()=>i?c.find(x=>x.id===i):null,[i,c]),u=i?xa.getName(i):void 0,m=Ne(we),f=_s.getCurrentWallet(m),h=l.useMemo(()=>{const x=a?.toLowerCase(),g=[];for(const y of m.wallets){const N=i?y.chainAddresses.find(b=>b.chain===i):y.chainAddresses[0];N&&(x&&N.address.toLowerCase()===x||g.push({id:y.id,name:y.name,address:N.address,themeHue:y.themeHue,chainIconUrl:d?.icon}))}return g},[m.wallets,i,a]),v=l.useMemo(()=>{const x=new Map;return m.wallets.forEach(g=>{const y=i?g.chainAddresses.find(N=>N.chain===i):g.chainAddresses[0];y&&x.set(g.id,{wallet:g,chainAddress:y})}),x},[m.wallets,i]),j=x=>{const g=v.get(x);if(!g)return;const y=new CustomEvent("wallet-picker-select",{detail:{address:g.chainAddress.address,chain:g.chainAddress.chain,name:g.wallet.name,publicKey:g.chainAddress.publicKey}});window.dispatchEvent(y),s()},p=()=>{const x=new CustomEvent("wallet-picker-cancel");window.dispatchEvent(x),s()};return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),e.jsx(Ot,{title:i?t("selectChainWallet",{chain:u}):t("selectWallet"),description:`${r||t("unknownDApp")} ${t("requestsAccess")}`,appName:r,appIcon:o,chainId:i}),e.jsx("div",{className:"max-h-[50vh] overflow-y-auto p-4",children:h.length===0?e.jsx("div",{className:"text-muted-foreground py-12 text-center text-sm",children:i?t("noWalletsForChain",{chain:i}):t("noWallets")}):e.jsx(om,{wallets:h,currentWalletId:f?.id,onSelect:j,showAddButton:!1})}),e.jsx("div",{className:"border-border border-t p-4",children:e.jsx("button",{onClick:p,className:"bg-muted hover:bg-muted/80 w-full rounded-xl py-3 font-medium transition-colors",children:t("cancel")})}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const rl=({params:t})=>e.jsx(re,{params:t,children:e.jsx(Kg,{})});rl.__docgenInfo={description:"",methods:[],displayName:"WalletPickerJob"};function Gg(){const{t}=L("common"),{pop:s,push:n}=G(),{message:a,address:r,appName:o,appIcon:c,chainName:i}=oe(),d=ke(),[u,m]=l.useState(!1),h=we.state.wallets.find(x=>x.chainAddresses.some(g=>g.address===r))?.name||t("unknownWallet"),v=l.useCallback(()=>{u||(jt(async x=>{m(!0);try{const g=d?.encryptedMnemonic;if(!g)return!1;const y=`miniapp_sign_${Date.now()}`,b=await new Ra(Zt,y).handleMessageSign({chainName:i||"bioforest",senderAddress:r,message:a},g,x),A=new CustomEvent("signing-confirm",{detail:{confirmed:!0,signature:b.signature,publicKey:b.publicKey}});return window.dispatchEvent(A),s(),!0}catch{return!1}finally{m(!1)}}),n("WalletLockConfirmJob",{title:t("sign")}))},[u,d,i,r,a,s,n,t]),j=l.useCallback(()=>{const x=new CustomEvent("signing-confirm",{detail:{confirmed:!1}});window.dispatchEvent(x),s()},[s]),p=a.startsWith("0x")&&/^0x[0-9a-fA-F]+$/.test(a);return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),e.jsx(Ot,{title:t("signMessage"),description:o||t("unknownDApp"),appName:o,appIcon:c,walletInfo:{name:h,address:r,chainId:i||"bfmeta"}}),e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsxs("div",{className:"bg-muted/50 rounded-xl p-3",children:[e.jsxs("p",{className:"text-muted-foreground mb-1 text-xs",children:[" ",t("message")]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:e.jsx("pre",{className:"font-mono text-sm break-all whitespace-pre-wrap",children:a})})]}),p&&e.jsxs("div",{className:"flex items-start gap-2 rounded-xl bg-amber-50 p-3 dark:bg-amber-950/30",children:[e.jsx(Pe,{className:"size-5 shrink-0 text-amber-600"}),e.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:t("hexDataWarning")})]})]}),e.jsxs("div",{className:"flex gap-3 p-4",children:[e.jsx("button",{onClick:j,disabled:u,className:"bg-muted hover:bg-muted/80 flex-1 rounded-xl py-3 font-medium transition-colors disabled:opacity-50",children:t("cancel")}),e.jsx("button",{onClick:v,disabled:u,className:R("flex-1 rounded-xl py-3 font-medium transition-colors","bg-primary text-primary-foreground hover:bg-primary/90","flex items-center justify-center gap-2 disabled:opacity-50"),children:u?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"size-4 animate-spin"}),t("signing")]}):t("sign")})]}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const il=({params:t})=>e.jsx(re,{params:t,children:e.jsx(Gg,{})});il.__docgenInfo={description:"",methods:[],displayName:"SigningConfirmJob"};const Qg={bio_requestAccounts:Aa,bio_createTransaction:Wi,bio_signMessage:Ln,bio_signTypedData:Ln,bio_signTransaction:Ln,bio_sendTransaction:Jm};function Yg(){const{t}=L("permission"),{pop:s}=G(),{appName:n,appIcon:a,permissions:r}=oe(),o=(()=>{try{return JSON.parse(r)}catch{return[]}})(),c=()=>{const m=new CustomEvent("permission-request",{detail:{approved:!0,permissions:o}});window.dispatchEvent(m),s()},i=()=>{const m=new CustomEvent("permission-request",{detail:{approved:!1}});window.dispatchEvent(m),s()},d=m=>{const f=`${m}.label`;return t(f)},u=m=>{const f=`${m}.description`;return t(f)};return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),e.jsxs("div",{className:"border-border border-b px-4 pb-4",children:[e.jsx("div",{className:"bg-primary/10 mx-auto mb-3 flex size-14 items-center justify-center rounded-2xl",children:a?e.jsx("img",{src:a,alt:n,className:"size-10 rounded-xl"}):e.jsx(fm,{className:"text-primary size-8"})}),e.jsx("h2",{className:"text-center text-lg font-semibold",children:n}),e.jsx("p",{className:"text-muted-foreground mt-1 text-center text-sm",children:t("requestsPermissions")})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"space-y-3",children:o.map(m=>{const f=Qg[m];return f?e.jsxs("div",{className:"bg-muted/50 flex items-center gap-3 rounded-xl p-3",children:[e.jsx("div",{className:"bg-primary/10 flex size-10 shrink-0 items-center justify-center rounded-full",children:e.jsx(f,{className:"text-primary size-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-medium",children:d(m)}),e.jsx("p",{className:"text-muted-foreground text-sm",children:u(m)})]})]},m):null})}),e.jsxs("div",{className:"text-muted-foreground mt-4 flex items-center gap-2 text-sm",children:[e.jsx(Yi,{className:"size-4"}),e.jsx("span",{children:t("permissionNote")})]})]}),e.jsxs("div",{className:"flex gap-3 p-4",children:[e.jsx("button",{onClick:i,className:"bg-muted hover:bg-muted/80 flex-1 rounded-xl py-3 font-medium transition-colors",children:t("reject")}),e.jsx("button",{onClick:c,className:R("flex-1 rounded-xl py-3 font-medium transition-colors","bg-primary text-primary-foreground hover:bg-primary/90"),children:t("approve")})]}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const ol=({params:t})=>e.jsx(re,{params:t,children:e.jsx(Yg,{})});ol.__docgenInfo={description:"",methods:[],displayName:"PermissionRequestJob"};function Xg(){const{t}=L("common"),{pop:s,push:n}=G(),a=oe(),{appName:r,appIcon:o,from:c,to:i,amount:d,chain:u,asset:m}=a,f=ke(),[h,v]=l.useState(!1),p=we.state.wallets.find(N=>N.chainAddresses.some(b=>b.address===c))?.name||t("unknownWallet"),x=l.useCallback(()=>{h||(jt(async N=>{v(!0);try{const b=f?.encryptedMnemonic;if(!b)return!1;const A=`miniapp_transfer_${Date.now()}`,S=new Ra(Zt,A),C={chainName:u,senderAddress:c,receiveAddress:i,balance:d};m&&(C.assetType=m);const w=await S.handleTransferSign(C,b,N),T=new CustomEvent("miniapp-transfer-confirm",{detail:{confirmed:!0,txHash:w}});return window.dispatchEvent(T),s(),!0}catch{return!1}finally{v(!1)}}),n("WalletLockConfirmJob",{title:t("confirmTransfer")}))},[h,f,u,c,i,d,m,s,n,t]),g=l.useCallback(()=>{const N=new CustomEvent("miniapp-transfer-confirm",{detail:{confirmed:!1}});window.dispatchEvent(N),s()},[s]),y=m||u.toUpperCase();return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),e.jsx(Ot,{title:t("confirmTransfer"),description:`${r||t("unknownDApp")} ${t("requestsTransfer")}`,appName:r,appIcon:o,walletInfo:{name:p,address:c,chainId:u}}),e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsx("div",{className:"bg-muted/50 rounded-xl p-4 text-center",children:e.jsx(Ct,{value:d,symbol:y,size:"xl",weight:"bold",decimals:8,fixedDecimals:!0})}),e.jsxs("div",{className:"bg-muted/50 space-y-3 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-muted-foreground w-10 shrink-0 text-xs",children:[" ",t("from")]}),e.jsx(At,{address:c,copyable:!0,className:"flex-1 text-sm"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(_n,{className:"text-muted-foreground size-4"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-muted-foreground w-10 shrink-0 text-xs",children:[" ",t("to")]}),e.jsx(At,{address:i,copyable:!0,className:"flex-1 text-sm"})]})]}),e.jsxs("div",{className:"bg-muted/50 flex items-center justify-between rounded-xl p-3",children:[e.jsxs("span",{className:"text-muted-foreground text-sm",children:[" ",t("network")]}),e.jsx(Ca,{chainId:u})]}),e.jsxs("div",{className:"flex items-start gap-2 rounded-xl bg-amber-50 p-3 dark:bg-amber-950/30",children:[e.jsx(Pe,{className:"mt-0.5 size-5 shrink-0 text-amber-600"}),e.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:t("transferWarning")})]})]}),e.jsxs("div",{className:"flex gap-3 p-4",children:[e.jsx("button",{onClick:g,disabled:h,className:"bg-muted hover:bg-muted/80 flex-1 rounded-xl py-3 font-medium transition-colors disabled:opacity-50",children:t("cancel")}),e.jsx("button",{onClick:x,disabled:h,className:R("flex-1 rounded-xl py-3 font-medium transition-colors","bg-primary text-primary-foreground hover:bg-primary/90","flex items-center justify-center gap-2 disabled:opacity-50"),children:h?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"size-4 animate-spin"}),t("confirming")]}):t("confirm")})]}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const cl=({params:t})=>e.jsx(re,{params:t,children:e.jsx(Xg,{})});cl.__docgenInfo={description:"",methods:[],displayName:"MiniappTransferConfirmJob"};const us=ge.t.bind(ge);async function ll(t,s,n){const a=Ie(t.id);return a.bioGetAssetDetail?(await a.bioGetAssetDetail(s,n))?.applyAddress??null:null}async function dl(t,s,n){const a=Ie(t.id);if(!a.buildTransaction||!a.estimateFee)return{amount:ne.fromRaw("1000",t.decimals,t.symbol),symbol:t.symbol};try{const r=await a.buildTransaction({type:"destroy",from:"0x0000000000000000000000000000000000000000",recipientId:"0x0000000000000000000000000000000000000000",bioAssetType:s,amount:ne.fromRaw(n,t.decimals,t.symbol)});return{amount:(await a.estimateFee(r)).standard.amount,symbol:t.symbol}}catch{return{amount:ne.fromRaw("1000",t.decimals,t.symbol),symbol:t.symbol}}}async function Sn({chainConfig:t,walletId:s,password:n,fromAddress:a,recipientAddress:r,assetType:o,amount:c,fee:i,twoStepSecret:d}){let u;try{u=await Xt.getMnemonic(s,n)}catch(f){return f instanceof Tn&&f.code===Pn.DECRYPTION_FAILED?{status:"password"}:{status:"error",message:f instanceof Error?f.message:us("error:unknown")}}if(!c.isPositive())return{status:"error",message:us("error:validation.enterValidAmount")};const m=Ie(t.id);if(!m.supportsFullTransaction)return{status:"error",message:us("error:transaction.chainNotSupported")};try{let f=null;if(m.bioGetAccountInfo){if(f=(await m.bioGetAccountInfo(a)).secondPublicKey,f&&!d)return{status:"password_required",secondPublicKey:f};if(d&&f&&m.bioVerifyPayPassword&&!await m.bioVerifyPayPassword({mainSecret:u,paySecret:d,publicKey:f}))return{status:"error",message:us("error:transaction.securityPasswordFailed")}}const h=await m.buildTransaction({type:"destroy",from:a,recipientId:r,amount:c,bioAssetType:o}),v=await m.signTransaction(h,{privateKey:new TextEncoder().encode(u),bioSecret:u,bioPaySecret:d}),j=await ct.create({walletId:s,chainId:t.id,fromAddress:a,rawTx:v,meta:{type:"destroy",displayAmount:c.toFormatted(),displaySymbol:o,displayToAddress:r}});await ct.updateStatus({id:j.id,status:"broadcasting"});try{const p=await m.broadcastTransaction(v);return await ct.updateStatus({id:j.id,status:"broadcasted",txHash:p}),{status:"ok",txHash:p,pendingTxId:j.id}}catch(p){const x=p;return await ct.updateStatus({id:j.id,status:"failed",errorCode:"BROADCAST_FAILED",errorMessage:x.message}),{status:"error",message:x.message,pendingTxId:j.id}}}catch(f){return{status:"error",message:(f instanceof Error?f.message:String(f))||us("error:transaction.burnFailed")}}}const Zg=Object.freeze(Object.defineProperty({__proto__:null,fetchAssetApplyAddress:ll,fetchBioforestBurnFee:dl,submitBioforestBurn:Sn},Symbol.toStringTag,{value:"Module"}));function ev(){const{t}=L(["common","transaction"]),{pop:s,push:n}=G(),a=oe(),{appName:r,appIcon:o,from:c,amount:i,chain:d,asset:u}=a,m=ke(),f=tt(),h=f.snapshot?qe.getChainById(f,d):null,[v,j]=l.useState(!1),x=we.state.wallets.find(N=>N.chainAddresses.some(b=>b.address===c))?.name||t("common:unknownWallet"),g=l.useCallback(()=>{v||(jt(async N=>{j(!0);try{if(!m?.id||!h)return!1;const{fetchAssetApplyAddress:b}=await ft(async()=>{const{fetchAssetApplyAddress:w}=await Promise.resolve().then(()=>Zg);return{fetchAssetApplyAddress:w}},void 0,import.meta.url),A=await b(h,u,c);if(!A)return!1;const S=ne.fromFormatted(i,h.decimals,u),C=await Sn({chainConfig:h,walletId:m.id,password:N,fromAddress:c,recipientAddress:A,assetType:u,amount:S});if(C.status==="password"||C.status==="error")return!1;const _=new CustomEvent("miniapp-destroy-confirm",{detail:{confirmed:!0,txHash:C.status==="ok"?C.txHash:void 0}});return window.dispatchEvent(_),s(),!0}catch{return!1}finally{j(!1)}}),n("WalletLockConfirmJob",{title:t("transaction:destroyPage.title")}))},[v,m,h,u,c,i,s,n,t]),y=l.useCallback(()=>{const N=new CustomEvent("miniapp-destroy-confirm",{detail:{confirmed:!1}});window.dispatchEvent(N),s()},[s]);return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),e.jsx(Ot,{title:t("transaction:destroyPage.title"),description:`${r||t("common:unknownDApp")} ${t("common:requestsDestroy")}`,appName:r,appIcon:o,walletInfo:{name:x,address:c,chainId:d}}),e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsx("div",{className:"bg-destructive/5 rounded-xl p-4 text-center",children:e.jsx(Ct,{value:i,symbol:u,size:"xl",weight:"bold",decimals:8,fixedDecimals:!0})}),e.jsx("div",{className:"bg-muted/50 space-y-3 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-muted-foreground w-10 shrink-0 text-xs",children:[" ",t("common:from")]}),e.jsx(ya,{chainId:d,address:c,copyable:!0,size:"sm"})]})}),e.jsxs("div",{className:"bg-muted/50 flex items-center justify-between rounded-xl p-3",children:[e.jsxs("span",{className:"text-muted-foreground text-sm",children:[" ",t("common:network")]}),e.jsx(Ca,{chainId:d})]}),e.jsxs("div",{className:"bg-destructive/10 flex items-start gap-2 rounded-xl p-3",children:[e.jsx(Pe,{className:"text-destructive mt-0.5 size-5 shrink-0"}),e.jsx("p",{className:"text-destructive text-sm",children:t("transaction:destroyPage.warning")})]})]}),e.jsxs("div",{className:"flex gap-3 p-4",children:[e.jsx("button",{onClick:y,disabled:v,className:"bg-muted hover:bg-muted/80 flex-1 rounded-xl py-3 font-medium transition-colors disabled:opacity-50",children:t("common:cancel")}),e.jsx("button",{onClick:g,disabled:v,className:R("flex-1 rounded-xl py-3 font-medium transition-colors","bg-destructive text-destructive-foreground hover:bg-destructive/90","flex items-center justify-center gap-2 disabled:opacity-50"),children:v?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"size-4 animate-spin"}),t("common:confirming")]}):e.jsxs(e.Fragment,{children:[e.jsx(ln,{className:"size-4"}),t("transaction:destroyPage.confirm")]})})]}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const ul=({params:t})=>e.jsx(re,{params:t,children:e.jsx(ev,{})});ul.__docgenInfo={description:"",methods:[],displayName:"MiniappDestroyConfirmJob"};function tv(t,s){const n=s.startsWith("0x"),a=n?s.toLowerCase():s;for(const r of we.state.wallets)if(r.chainAddresses.find(c=>c.chain!==t?!1:n||c.address.startsWith("0x")?c.address.toLowerCase()===a:c.address===a))return r.id;return null}function sv(){const{t}=L("common"),{pop:s,push:n}=G(),a=oe(),{appName:r,appIcon:o,from:c,chain:i,unsignedTx:d}=a,[u,m]=l.useState(!1),f=l.useMemo(()=>{try{return JSON.parse(d)}catch{return null}},[d]),h=l.useMemo(()=>tv(i,c),[i,c]),j=we.state.wallets.find(y=>y.id===h)?.name||t("unknownWallet"),p=l.useCallback(()=>{u||f&&h&&(jt(async y=>{m(!0);try{const N=await Mu({walletId:h,password:y,from:c,chainId:i,unsignedTx:f}),b=new CustomEvent("miniapp-sign-transaction-confirm",{detail:{confirmed:!0,signedTx:N}});return window.dispatchEvent(b),s(),!0}catch{return!1}finally{m(!1)}}),n("WalletLockConfirmJob",{title:t("signTransaction")}))},[i,c,u,s,n,t,f,h]),x=l.useCallback(()=>{const y=new CustomEvent("miniapp-sign-transaction-confirm",{detail:{confirmed:!1}});window.dispatchEvent(y),s()},[s]),g=l.useMemo(()=>{if(!f)return"";try{return JSON.stringify(f.data,null,2)}catch{return String(f.data)}},[f]);return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),e.jsx(Ot,{title:t("signTransaction"),description:r||t("unknownDApp"),appName:r,appIcon:o,walletInfo:{name:j,address:c,chainId:i}}),e.jsxs("div",{className:"space-y-4 p-4",children:[!f&&e.jsx("div",{className:"bg-destructive/10 text-destructive rounded-xl p-3 text-sm",children:t("invalidTransaction")}),f&&!h&&e.jsx("div",{className:"rounded-xl bg-amber-50 p-3 text-sm text-amber-800 dark:bg-amber-950/30 dark:text-amber-200",children:t("signingAddressNotFound")}),e.jsxs("div",{className:"bg-muted/50 rounded-xl p-3",children:[e.jsx("p",{className:"text-muted-foreground mb-1 text-xs",children:t("network")}),e.jsx(Ca,{chainId:i})]}),e.jsxs("div",{className:"bg-muted/50 rounded-xl p-3",children:[e.jsx("p",{className:"text-muted-foreground mb-1 text-xs",children:t("signingAddress")}),e.jsx(ya,{chainId:i,address:c,copyable:!1,size:"sm"})]}),e.jsxs("div",{className:"bg-muted/50 rounded-xl p-3",children:[e.jsx("p",{className:"text-muted-foreground mb-1 text-xs",children:t("transaction")}),e.jsx("div",{className:"max-h-44 overflow-y-auto",children:e.jsx("pre",{className:"font-mono text-xs break-all whitespace-pre-wrap",children:g})})]}),e.jsxs("div",{className:"flex items-start gap-2 rounded-xl bg-amber-50 p-3 dark:bg-amber-950/30",children:[e.jsx(Pe,{className:"mt-0.5 size-5 shrink-0 text-amber-600"}),e.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:t("signTxWarning")})]})]}),e.jsxs("div",{className:"flex gap-3 p-4",children:[e.jsx("button",{onClick:x,disabled:u,className:"bg-muted hover:bg-muted/80 flex-1 rounded-xl py-3 font-medium transition-colors disabled:opacity-50",children:t("cancel")}),e.jsx("button",{onClick:p,disabled:u||!f||!h,className:R("flex-1 rounded-xl py-3 font-medium transition-colors","bg-primary text-primary-foreground hover:bg-primary/90","flex items-center justify-center gap-2 disabled:opacity-50"),children:u?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"size-4 animate-spin"}),t("signing")]}):t("sign")})]}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const ml=({params:t})=>e.jsx(re,{params:t,children:e.jsx(sv,{})});ml.__docgenInfo={description:"",methods:[],displayName:"MiniappSignTransactionJob"};function vi(t){const s=En(t);if(s)return xa.getName(s);try{return`Chain ${mm(t)}`}catch{return t}}function yi(t){return En(t)}function nv(){const{t}=L("common"),{pop:s}=G(),{fromChainId:n,toChainId:a,appName:r,appIcon:o}=oe(),c=vi(n),i=vi(a),d=yi(n),u=yi(a),m=()=>{const h=new CustomEvent("chain-switch-confirm",{detail:{approved:!0,toChainId:a}});window.dispatchEvent(h),s()},f=()=>{const h=new CustomEvent("chain-switch-confirm",{detail:{approved:!1}});window.dispatchEvent(h),s()};return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background rounded-t-2xl",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),e.jsx(Ot,{title:t("switchNetwork"),description:`${r||t("unknownDApp")} ${t("requestsNetworkSwitch")}`,appName:r,appIcon:o}),e.jsxs("div",{className:"flex items-center justify-center gap-4 px-6 py-8",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d?e.jsx(pt,{chain:d,size:"lg"}):e.jsx("div",{className:"bg-muted flex size-12 items-center justify-center rounded-full",children:e.jsx(Pe,{className:"text-muted-foreground size-6"})}),e.jsx("span",{className:"text-muted-foreground text-sm",children:c})]}),e.jsx(co,{className:"text-primary size-8"}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u?e.jsx(pt,{chain:u,size:"lg"}):e.jsx("div",{className:"bg-muted flex size-12 items-center justify-center rounded-full",children:e.jsx(Pe,{className:"text-muted-foreground size-6"})}),e.jsx("span",{className:"font-medium",children:i})]})]}),e.jsx("div",{className:"bg-warning/10 border-warning/20 mx-4 mb-4 rounded-lg border p-3",children:e.jsx("p",{className:"text-warning text-sm",children:t("chainSwitchWarning")})}),e.jsxs("div",{className:"flex gap-3 p-4",children:[e.jsx("button",{onClick:f,className:"bg-muted hover:bg-muted/80 flex-1 rounded-xl py-3 font-medium transition-colors",children:t("cancel")}),e.jsx("button",{onClick:m,className:"bg-primary hover:bg-primary/90 text-primary-foreground flex-1 rounded-xl py-3 font-medium transition-colors",children:t("confirm")})]}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})}const fl=({params:t})=>e.jsx(re,{params:t,children:e.jsx(nv,{})});fl.__docgenInfo={description:"",methods:[],displayName:"ChainSwitchConfirmJob"};function av(){const{t}=L("common"),{pop:s}=G(),n=oe(),a=JSON.parse(n.actions),r=n.duration,{address:o,chainId:c,appName:i,appIcon:d}=n,u=we.state.wallets.find(S=>S.chainAddresses.some(C=>C.address===o)),m=u?.name,f=u?.id,[h,v]=l.useState([]),[j,p]=l.useState(!1),[x,g]=l.useState(!1),[y,N]=l.useState(r),b=l.useCallback(async S=>{g(!0),p(!1);try{const C=ht(S),_=await Xt.getAllWallets();if(_.length===0){p(!0),v([]),g(!1);return}let w=!1;for(const T of _)try{await Xt.getMnemonic(T.id,C),w=!0;break}catch{}if(w&&f){const T=new CustomEvent("crypto-authorize-confirm",{detail:{approved:!0,patternKey:C,walletId:f,selectedDuration:y}});window.dispatchEvent(T),s()}else p(!0),v([])}catch{p(!0),v([])}finally{g(!1)}},[s,y]),A=l.useCallback(()=>{const S=new CustomEvent("crypto-authorize-confirm",{detail:{approved:!1}});window.dispatchEvent(S),s()},[s]);return e.jsx(ie,{children:e.jsxs("div",{className:"bg-background flex max-h-[85vh] flex-col rounded-t-2xl",children:[e.jsx("div",{className:"flex flex-shrink-0 justify-center py-2",children:e.jsx("div",{className:"bg-muted h-1 w-10 rounded-full"})}),e.jsx(Ot,{title:t("cryptoAuthorize"),description:i||t("unknownDApp"),appName:i,appIcon:d,walletInfo:{name:m||t("unknownWallet"),address:o,chainId:c||"bfmeta"}}),e.jsx("div",{className:"min-h-0 flex-1 space-y-3 overflow-y-auto px-4 py-3",children:e.jsxs("div",{className:"bg-muted/50 space-y-2 rounded-xl p-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zs,{className:"text-primary size-4 flex-shrink-0"}),e.jsxs("span",{className:"text-muted-foreground",children:[t("permissions"),""]}),e.jsx("span",{className:"truncate font-medium",children:a.map(S=>Ru[S]?.name||S).join("")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-muted-foreground ml-6",children:[t("duration"),""]}),e.jsxs(ws,{value:y,onValueChange:S=>N(S),children:[e.jsx(Cs,{className:"h-7 w-24 text-xs",children:e.jsx(ks,{})}),e.jsx(Ss,{children:zu.map(S=>e.jsx(Dt,{value:S,children:Du[S]},S))})]})]})]})}),e.jsxs("div",{className:"flex-shrink-0 px-4 pb-2",children:[e.jsx("p",{className:"text-muted-foreground mb-2 text-center text-xs",children:t("drawPatternToConfirm")}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-[280px]",children:e.jsx(Ft,{value:h,onChange:v,onComplete:b,error:j,disabled:x})})}),e.jsx("div",{className:"flex h-6 items-center justify-center",children:x&&e.jsxs("div",{className:"text-muted-foreground flex items-center gap-2",children:[e.jsx(be,{className:"size-4 animate-spin"}),e.jsx("span",{className:"text-xs",children:t("verifying")})]})})]}),e.jsx("div",{className:"flex-shrink-0 px-4 pb-2",children:e.jsx("button",{onClick:A,disabled:x,className:"bg-muted hover:bg-muted/80 w-full rounded-xl py-2.5 text-sm font-medium transition-colors disabled:opacity-50",children:t("cancel")})}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)] flex-shrink-0"})]})})}const pl=({params:t})=>e.jsx(re,{params:t,children:e.jsx(av,{})});pl.__docgenInfo={description:"",methods:[],displayName:"CryptoAuthorizeJob"};const rv={"zh-CN":"","zh-TW":"",en:"English",ja:"",ko:"",ar:""},iv={USD:"USD ($)",CNY:"CNY ()",EUR:"EUR ()",JPY:"JPY ()",KRW:"KRW ()"};function nr(){const{navigate:t}=se(),{push:s}=G(),{t:n}=L(["settings","common","security"]),a=ke(),r=ha(),o=Lt(),c=Mi(),i=Ei(),[d,u]=l.useState(!1),[m,f]=l.useState("loading");l.useEffect(()=>{async function p(){if(!a){f("unavailable");return}const x=a.chainAddresses.find(g=>g.chain==="bfmeta"||g.chain==="bfm");if(!x){f("unavailable");return}try{const g=qe.getChainById(rr.state,"bfmeta");if(!g){f("unavailable");return}const y=await pg(g,x.address);f(y?"set":"not_set")}catch{f("unavailable")}}p()},[a]);const h=()=>n(`settings:appearance.${i}`),v=()=>{switch(m){case"loading":return"...";case"set":return n("security:twoStepSecret.alreadySet");case"not_set":return n("security:twoStepSecret.notSet");default:return n("settings:notSupported")}},j=async()=>{if(m!=="not_set"||!a)return;const p=a.chainAddresses.find(y=>y.chain==="bfmeta"||y.chain==="bfm");if(!p)return;const x=qe.getChainById(rr.state,"bfmeta");if(!x)return;const g=await fg(x);Sg(async(y,N)=>{const b=await mg({chainConfig:x,walletId:a.id,password:N,fromAddress:p.address,newTwoStepSecret:y});return b.status==="ok"?(f("set"),{success:!0,txHash:b.txHash}):b.status==="password"?{success:!1,error:n("security:passwordConfirm.verifying")}:b.status==="already_set"?(f("set"),{success:!1,error:n("security:twoStepSecret.alreadySet")}):{success:!1,error:b.message}},g??void 0,async()=>{const{getChainProvider:y}=await ft(async()=>{const{getChainProvider:b}=await import("./index-DpMoyOsT.js").then(A=>A.i);return{getChainProvider:b}},__vite__mapDeps([2,3,4,1,5,6,7,8,9]),import.meta.url),N=y(x.id);if(!N.bioGetAccountInfo)return!1;try{return!!(await N.bioGetAccountInfo(p.address)).secondPublicKey}catch{return!1}}),s("SetTwoStepSecretJob",{chainName:"BioForest Chain"})};return e.jsxs("div",{className:"bg-muted/30 flex h-full flex-col overflow-y-auto",children:[e.jsx(U,{title:n("common:a11y.tabSettings")}),e.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[e.jsxs("button",{type:"button",onClick:()=>t({to:"/my-card"}),className:"bg-card hover:bg-accent flex w-full items-center gap-4 rounded-xl p-4 shadow-sm transition-colors","data-testid":"my-card-button",children:[e.jsx(ns,{src:r.avatar,size:56}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("h2",{className:"font-semibold",children:r.username||n("common:myCard.defaultName")}),e.jsx("p",{className:"text-muted-foreground text-sm",children:n("settings:items.myCard")})]}),e.jsx(rf,{size:20,className:"text-muted-foreground"})]}),e.jsxs(ps,{title:n("settings:sections.walletManagement"),children:[e.jsx(je,{icon:e.jsx(Aa,{size:20}),label:n("settings:items.walletManagement"),onClick:()=>t({to:`/wallet/${a?.id??""}`})}),e.jsx("div",{className:"bg-border mx-4 h-px"}),e.jsx(je,{icon:e.jsx(po,{size:20}),label:n("settings:items.walletChains"),onClick:()=>t({to:"/settings/wallet-chains"}),testId:"wallet-chains-button"}),e.jsx("div",{className:"bg-border mx-4 h-px"}),e.jsx(je,{icon:e.jsx(Em,{size:20}),label:n("settings:items.addressBook"),onClick:()=>t({to:"/address-book"}),testId:"address-book-button"})]}),e.jsxs(ps,{title:n("settings:sections.security"),children:[e.jsx(je,{icon:e.jsx(zs,{size:20}),label:n("settings:items.appLock"),value:n("settings:notSupported"),disabled:!0}),e.jsx("div",{className:"bg-border mx-4 h-px"}),e.jsx(je,{icon:e.jsx(Ta,{size:20}),label:n("settings:items.viewMnemonic"),onClick:()=>t({to:"/settings/mnemonic"})}),e.jsx("div",{className:"bg-border mx-4 h-px"}),e.jsx(je,{icon:e.jsx(Ea,{size:20}),label:n("settings:items.changeWalletLock"),onClick:()=>t({to:"/settings/wallet-lock"})}),e.jsx("div",{className:"bg-border mx-4 h-px"}),e.jsx(je,{icon:e.jsx(wu,{size:20}),label:n("security:twoStepSecret.setup"),value:v(),onClick:j,disabled:m==="set"||m==="unavailable",testId:"set-pay-password-button"})]}),e.jsxs(ps,{title:n("settings:sections.preferences"),children:[e.jsx(je,{icon:e.jsx(cf,{size:20}),label:n("settings:items.language"),value:rv[o],onClick:()=>t({to:"/settings/language"})}),e.jsx("div",{className:"bg-border mx-4 h-px"}),e.jsx(je,{icon:e.jsx(Um,{size:20}),label:n("settings:items.currency"),value:iv[c],onClick:()=>t({to:"/settings/currency"})}),e.jsx("div",{className:"bg-border mx-4 h-px"}),e.jsx(je,{icon:e.jsx(hf,{size:20}),label:n("settings:items.appearance"),value:h(),onClick:()=>u(!0)}),e.jsx("div",{className:"bg-border mx-4 h-px"}),e.jsx(je,{icon:e.jsx(ff,{size:20}),label:n("settings:items.chainConfig"),onClick:()=>t({to:"/settings/chains"})}),e.jsx("div",{className:"bg-border mx-4 h-px"}),e.jsx(je,{icon:e.jsx(xo,{size:20}),label:n("settings:items.miniappSources"),onClick:()=>t({to:"/settings/sources"})})]}),e.jsxs(ps,{title:n("settings:sections.about"),children:[e.jsx(je,{icon:e.jsx(Wu,{size:20}),label:n("settings:items.aboutApp"),value:"v1.0.0",onClick:()=>{}}),e.jsx("div",{className:"bg-border mx-4 h-px"}),e.jsx(je,{icon:e.jsx(mo,{size:20}),label:n("settings:items.storage"),onClick:()=>t({to:"/settings/storage"}),testId:"storage-button"})]}),e.jsx("div",{className:"h-[var(--tab-bar-height)]"})]}),e.jsx(Rc,{open:d,onOpenChange:u})]})}nr.__docgenInfo={description:"",methods:[],displayName:"SettingsPage"};function hl(){return e.jsx(nr,{})}hl.__docgenInfo={description:`SettingsTab - 

 SettingsPage `,methods:[],displayName:"SettingsTab"};function ov(t,s){let n=t.toString();const a=n.startsWith("-");a&&(n=n.slice(1)),n=n.padStart(s,"0");let[r,o]=[n.slice(0,n.length-s),n.slice(n.length-s)];return o=o.replace(/(0+)$/,""),`${a?"-":""}${r||"0"}${o?`.${o}`:""}`}const xl=({params:t})=>{const{push:s}=G(),[n,a]=l.useState(t.tab||"wallet");return l.useEffect(()=>(Lu(),or().setPermissionRequestCallback(async(r,o,c)=>{const i=Bu.state.apps.get(r)?.manifest.icon;return new Promise(d=>{const u=window.setTimeout(()=>d(!1),3e4),m=f=>{window.clearTimeout(u);const h=f.detail;d(h?.approved===!0)};window.addEventListener("permission-request",m,{once:!0}),s("PermissionRequestJob",{appName:o,appIcon:i,permissions:JSON.stringify(c)})})}),cr(async r=>{const o=r?.app?.name,c=r?.app?.icon;return new Promise(i=>{const d=window.setTimeout(()=>i(null),3e4),u=()=>{window.clearTimeout(d),window.removeEventListener("wallet-picker-select",m),window.removeEventListener("wallet-picker-cancel",f)},m=h=>{u();const v=h.detail;i({address:v.address,chain:v.chain,name:v.name})},f=()=>{u(),i(null)};window.addEventListener("wallet-picker-select",m),window.addEventListener("wallet-picker-cancel",f),s("WalletPickerJob",{chain:r?.chain,exclude:r?.exclude,...o?{appName:o}:{},...c?{appIcon:c}:{}})})}),lr(()=>{const r=we.state,o=_s.getCurrentWallet(r);return o?o.chainAddresses.map(c=>({address:c.address,chain:c.chain,name:o.name})):[]}),dr(async r=>new Promise(o=>{const c=window.setTimeout(()=>o(null),6e4),i=d=>{window.clearTimeout(c);const u=d.detail;if(u?.confirmed&&u.signature&&u.publicKey){o({signature:u.signature,publicKey:u.publicKey});return}o(null)};window.addEventListener("signing-confirm",i,{once:!0}),s("SigningConfirmJob",{message:r.message,address:r.address,appName:r.app.name,appIcon:r.app.icon??"",chainName:"bioforest"})})),ur(async r=>new Promise(o=>{const c=window.setTimeout(()=>o(null),6e4),i=d=>{window.clearTimeout(c);const u=d.detail;if(u?.confirmed&&u.txHash){o({txHash:u.txHash});return}o(null)};window.addEventListener("miniapp-transfer-confirm",i,{once:!0}),s("MiniappTransferConfirmJob",{appName:r.app.name,appIcon:r.app.icon??"",from:r.from,to:r.to,amount:r.amount,chain:r.chain,...r.asset?{asset:r.asset}:{}})})),mr(async r=>new Promise(o=>{const c=window.setTimeout(()=>o(null),6e4),i=d=>{window.clearTimeout(c);const u=d.detail;if(u?.confirmed&&u.signedTx){o(u.signedTx);return}o(null)};window.addEventListener("miniapp-sign-transaction-confirm",i,{once:!0}),s("MiniappSignTransactionJob",{appName:r.app.name,appIcon:r.app.icon??"",from:r.from,chain:r.chain,unsignedTx:JSON.stringify(r.unsignedTx)})})),fr(async r=>{const o=r.app?.name,c=r.app?.icon;return new Promise(i=>{const d=window.setTimeout(()=>i(null),3e4),u=()=>{window.clearTimeout(d),window.removeEventListener("wallet-picker-select",m),window.removeEventListener("wallet-picker-cancel",f)},m=h=>{u();const v=h.detail;i({address:v.address,chain:v.chain,name:v.name})},f=()=>{u(),i(null)};window.addEventListener("wallet-picker-select",m),window.addEventListener("wallet-picker-cancel",f),s("WalletPickerJob",{chain:r.chainId,...o?{appName:o}:{},...c?{appIcon:c}:{}})})}),gr(async r=>new Promise(o=>{const c=window.setTimeout(()=>o(!1),3e4),i=d=>{window.clearTimeout(c);const u=d.detail;o(u?.approved===!0)};window.addEventListener("chain-switch-confirm",i,{once:!0}),s("ChainSwitchConfirmJob",{fromChainId:r.fromChainId,toChainId:r.toChainId,appName:r.appName,appIcon:r.appIcon})})),pr(async r=>new Promise(o=>{const c=window.setTimeout(()=>o(null),6e4),i=d=>{window.clearTimeout(c);const u=d.detail;if(u?.confirmed&&u.signature){o({signature:u.signature});return}o(null)};window.addEventListener("signing-confirm",i,{once:!0}),s("SigningConfirmJob",{message:r.message,address:r.address,appName:r.appName,chainName:"ethereum"})})),hr(async r=>{const{from:o,to:c,value:i,chainId:d}=r.tx;if(!o||!c)return null;const u=BigInt(i??"0x0"),m=ov(u,18),f=d?En(d):null;return new Promise(h=>{const v=window.setTimeout(()=>h(null),6e4),j=p=>{window.clearTimeout(v);const x=p.detail;if(x?.confirmed&&x.txHash){h({txHash:x.txHash});return}h(null)};window.addEventListener("miniapp-transfer-confirm",j,{once:!0}),s("MiniappTransferConfirmJob",{appName:r.appName,from:o,to:c,amount:m,chain:f??"ethereum"})})}),xr(async r=>{const o=r?.app?.name,c=r?.app?.icon;return new Promise(i=>{const d=window.setTimeout(()=>i(null),3e4),u=()=>{window.clearTimeout(d),window.removeEventListener("wallet-picker-select",m),window.removeEventListener("wallet-picker-cancel",f)},m=h=>{u();const v=h.detail;i({address:v.address,chain:v.chain,name:v.name})},f=()=>{u(),i(null)};window.addEventListener("wallet-picker-select",m),window.addEventListener("wallet-picker-cancel",f),s("WalletPickerJob",{chain:"tron",...o?{appName:o}:{},...c?{appIcon:c}:{}})})}),vr(r=>async o=>new Promise(c=>{const i=window.setTimeout(()=>c({approved:!1}),6e4),d=u=>{window.clearTimeout(i);const m=u.detail;if(m?.approved&&m.patternKey&&m.walletId){c({approved:!0,patternKey:m.patternKey,walletId:m.walletId,selectedDuration:m.selectedDuration});return}c({approved:!1})};window.addEventListener("crypto-authorize-confirm",d,{once:!0}),s("CryptoAuthorizeJob",{actions:JSON.stringify(o.actions),duration:o.duration,address:o.address,chainId:o.chainId,appName:o.app.name,appIcon:o.app.icon})})),()=>{or().setPermissionRequestCallback(null),cr(null),fr(null),gr(null),pr(null),hr(null),xr(null),vr(null),lr(null),dr(null),ur(null),mr(null)}),[s]),e.jsx(te,{children:e.jsx(uu,{children:e.jsxs("div",{className:"bg-background relative h-dvh",children:[e.jsx(l.Activity,{mode:n==="wallet"?"visible":"hidden",children:e.jsx(Tc,{})}),e.jsx("div",{style:{display:n==="ecosystem"?"contents":"none"},children:e.jsx(Mc,{})}),e.jsx(l.Activity,{mode:n==="settings"?"visible":"hidden",children:e.jsx(hl,{})}),e.jsx(au,{activeTab:n,onTabChange:a})]})})})};xl.__docgenInfo={description:"",methods:[],displayName:"MainTabsActivity"};function gl(){const{t}=L("wallet"),{navigate:s,goBack:n}=se(),{push:a}=G(),r=Ne(we,m=>m.wallets),o=Ne(we,m=>m.currentWalletId),c=l.useCallback(m=>{me.setCurrentWallet(m)},[]),i=l.useCallback(m=>{s({to:`/wallet/${m}`})},[s]),d=l.useCallback(()=>{a("WalletAddJob",{})},[a]),u=l.useCallback(()=>{n()},[n]);return e.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[e.jsx(U,{title:t("list.title"),onBack:u,rightAction:e.jsx("button",{onClick:d,className:R("rounded-full p-2 transition-colors","hover:bg-muted active:bg-muted/80"),"aria-label":t("add"),children:e.jsx(st,{className:"size-5"})})}),e.jsx("div",{className:"flex-1 p-4",children:r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-12",children:[e.jsx("p",{className:"text-muted-foreground",children:t("list.empty")}),e.jsx("button",{onClick:d,className:R("bg-primary rounded-full px-6 py-2.5 text-sm font-medium text-primary-foreground","hover:bg-primary/90 active:bg-primary/80"),children:t("add")})]}):e.jsx("div",{className:"space-y-3",children:r.map(m=>e.jsx(cv,{wallet:m,isActive:m.id===o,onSelect:()=>c(m.id),onDetail:()=>i(m.id),t},m.id))})})]})}function cv({wallet:t,isActive:s,onSelect:n,onDetail:a,t:r}){return e.jsxs("div",{className:R("bg-card rounded-xl p-4 shadow-sm transition-colors",s&&"ring-primary ring-2"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:n,className:R("flex size-12 items-center justify-center rounded-full text-lg font-semibold",s?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:t.name.slice(0,1)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"truncate font-semibold",children:t.name}),s&&e.jsxs("span",{className:"text-primary flex items-center gap-1 text-xs",children:[e.jsx(fe,{className:"size-3"}),r("list.current")]})]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:r("list.chainAddresses",{count:t.chainAddresses.length})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold",children:["$",0 .toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),e.jsx("button",{onClick:a,className:R("rounded-full p-2 transition-colors","hover:bg-muted active:bg-muted/80"),"aria-label":r("list.viewDetail"),children:e.jsx(Ae,{className:"text-muted-foreground size-5"})})]})]}),e.jsx("p",{className:"text-muted-foreground mt-2 truncate font-mono text-xs",children:t.address})]})}gl.__docgenInfo={description:"",methods:[],displayName:"WalletListPage"};const vl=()=>e.jsx(te,{children:e.jsx(gl,{})});vl.__docgenInfo={description:"",methods:[],displayName:"WalletListActivity"};function lv(){const{t}=L("wallet"),{walletId:s,mode:n="default"}=oe(),{goBack:a,navigate:r}=se(),c=gt().find(u=>u.id===s),i=()=>{r({to:"/",replace:!0})};if(!c)return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx(U,{title:t("detail.title"),onBack:a}),e.jsx("div",{className:"flex-1 p-4",children:e.jsx(Mt,{variant:"error",children:t("detail.notFound")})})]});const d=t(n==="edit-only"?"detail.editTitle":"detail.title");return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx(U,{title:d,...n!=="edit-only"&&{onBack:a}}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsx(zn,{mode:n,walletId:s,onEditOnlyComplete:i}),n==="default"&&e.jsx("div",{className:"mt-6",children:e.jsx(Mt,{variant:"warning",children:t("detail.securityWarning")})})]})]})}const yl=({params:t})=>e.jsx(te,{children:e.jsx(re,{params:t,children:e.jsx(lv,{})})});yl.__docgenInfo={description:"",methods:[],displayName:"WalletConfigActivity"};const dv=["pattern","mnemonic","verify","chains","theme"];function bl(){const{goBack:t,navigate:s}=se(),{t:n}=L("onboarding"),a=Es(),r=Lt(),[o,c]=l.useState("pattern"),[i,d]=l.useState(""),[u]=l.useState(()=>{if(typeof window<"u"){const k=window.__E2E_MNEMONIC__;if(typeof k=="string"&&k.trim())return k.trim().split(/\s+/);if(Array.isArray(k)&&k.every(M=>typeof M=="string"))return k}return ru()}),[m,f]=l.useState(!0),[h,v]=l.useState(!1),[j,p]=l.useState([]),[x,g]=l.useState(!1),[y,N]=l.useState(!1),[b,A]=l.useState(null),S=dv.indexOf(o)+1;l.useEffect(()=>{!x&&a.length>0&&(p(Zi(a)),g(!0))},[a,x]);const C=()=>{o==="mnemonic"?(c("pattern"),d("")):o==="verify"?c("mnemonic"):o==="chains"?c("verify"):o==="theme"||t()},_=k=>{d(k),c("mnemonic")},w=()=>{(h||!m)&&c("verify")},T=()=>{c("chains")},P=async()=>{if(!y){N(!0);try{const k=u.join(" "),E=(await eo({mnemonic:k,selectedChainIds:j,chainConfigs:a})).map(({chainId:B,address:Q,publicKey:Y})=>({chain:B,address:Q,publicKey:Y??"",tokens:[]})),D=E[0];if(!D)throw new Error("No chain addresses derived");const z=Zn(D.address),F=await me.createWallet({name:n("create.generatedNamePattern",{word:mn(r),suffix:n("create.walletSuffix")}),keyType:"mnemonic",address:D.address,chain:D.chain,chainAddresses:E,themeHue:z},k,i,z);A(F.id),c("theme")}catch{}finally{N(!1)}}},I=()=>{s({to:"/",replace:!0})};return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx(U,{title:n("create.title"),onBack:C}),e.jsx("div",{className:"px-4 pt-4",children:e.jsx(it,{total:5,current:S})}),e.jsxs("div",{className:"flex-1 p-4",children:[o==="pattern"&&e.jsx("div",{"data-testid":"pattern-step",children:e.jsx(Pa,{onComplete:_,minPoints:4})}),o==="mnemonic"&&e.jsx("div",{"data-testid":"mnemonic-step",children:e.jsx(uv,{mnemonic:u,hidden:m,copied:h,onToggleHidden:()=>f(!m),onCopy:()=>v(!0),onContinue:w})}),o==="verify"&&e.jsx("div",{"data-testid":"verify-step",children:e.jsx(mv,{mnemonic:u,onContinue:T})}),o==="chains"&&e.jsx("div",{"data-testid":"chain-selector-step",children:e.jsx(fv,{chains:a,selectedChains:j,selectionCount:j.length,onSelectionChange:p,onComplete:P,completeLabel:n("create.nextStep"),isSubmitting:y})}),o==="theme"&&b&&e.jsx("div",{"data-testid":"theme-step",children:e.jsx(zn,{mode:"edit-only",walletId:b,onEditOnlyComplete:I})})]})]})}function uv({mnemonic:t,hidden:s,copied:n,onToggleHidden:a,onCopy:r,onContinue:o}){const{t:c}=L("onboarding"),i=n||!s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Rs,{icon:e.jsx(Ea,{className:"size-full"}),variant:"warning",size:"lg",className:"mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold",children:c("create.backupMnemonic")}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:c("create.backupHint")})]}),e.jsx(Mt,{variant:"warning",children:c("create.mnemonicWarning")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:c("create.mnemonicTitle")}),e.jsxs("button",{type:"button","data-testid":"toggle-mnemonic-button",onClick:a,className:"text-primary flex items-center gap-1 text-sm",children:[s?e.jsx(Ta,{className:"size-4"}):e.jsx(to,{className:"size-4"}),c(s?"create.mnemonicShow":"create.mnemonicHide")]})]}),e.jsx(Xi,{words:t,hidden:s,onCopy:r})]}),e.jsxs(Me,{variant:"mint",className:"w-full","data-testid":"mnemonic-backed-up-button",disabled:!i,onClick:o,children:[c(i?"create.mnemonicBackedUp":"create.mnemonicViewFirst"),i&&e.jsx(Ae,{className:"ml-2 size-4"})]})]})}function mv({mnemonic:t,onContinue:s}){const{t:n}=L(["onboarding","common"]),[a]=l.useState(()=>Array.from({length:t.length},(f,h)=>h).toSorted(()=>Math.random()-.5).slice(0,3).toSorted((f,h)=>f-h)),[r,o]=l.useState({}),c=a.every(u=>{const m=t[u],f=r[u];return m&&f&&f.toLowerCase()===m.toLowerCase()}),i=(u,m)=>{o(f=>({...f,[u]:m}))},d=u=>{const m=t[u],f=r[u];if(f&&m&&f.toLowerCase()!==m.toLowerCase())return n("create.wordIncorrect")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Rs,{icon:e.jsx(rs,{className:"size-full"}),variant:"success",size:"lg",className:"mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold",children:n("create.verifyTitle")}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:n("create.verifyDesc")})]}),e.jsx("div",{className:"space-y-4",children:a.map(u=>e.jsx(_u,{label:n("create.wordN",{n:u+1}),error:d(u),children:e.jsx(Re,{"data-testid":`verify-word-input-${u}`,"data-verify-index":u,value:r[u]||"",onChange:m=>i(u,m.target.value),className:R(d(u)&&"border-destructive focus-visible:ring-destructive"),placeholder:n("create.wordNPlaceholder",{n:u+1}),autoCapitalize:"off",autoCorrect:"off"})},u))}),e.jsx(Me,{variant:"mint",className:"w-full","data-testid":"verify-next-button",disabled:!c,onClick:s,children:n("common:next")})]})}function fv({chains:t,selectedChains:s,selectionCount:n,isSubmitting:a,completeLabel:r,onSelectionChange:o,onComplete:c}){const{t:i}=L(["onboarding","common"]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Rs,{icon:e.jsx(rs,{className:"size-full"}),variant:"success",size:"lg",className:"mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold",children:i("chainSelector.title")}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:i("chainSelector.subtitle")})]}),t.length===0?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(Ce,{})}):e.jsx(_a,{"data-testid":"chain-selector",chains:t,selectedChains:s,onSelectionChange:o}),e.jsx(Me,{variant:"mint",className:"w-full","data-testid":"chain-selector-complete-button",disabled:n===0||a,onClick:c,children:r})]})}bl.__docgenInfo={description:"",methods:[],displayName:"WalletCreatePage"};const jl=()=>e.jsx(te,{children:e.jsx(bl,{})});jl.__docgenInfo={description:"",methods:[],displayName:"WalletCreateActivity"};function pv(t,s){return{symbol:t.symbol,name:t.name,balance:t.amount.toFormatted(),decimals:t.decimals,fiatValue:void 0,chain:s,icon:t.icon,change24h:0}}function Nl(t,s){return t.map(n=>pv(n,s))}const hv={ETH:{amount:"0.002",symbol:"ETH"},USDT:{amount:"0.003",symbol:"ETH"},USDC:{amount:"0.003",symbol:"ETH"},BTC:{amount:"0.0001",symbol:"BTC"},TRX:{amount:"1",symbol:"TRX"},BFM:{amount:"0.1",symbol:"BFM"}},bi={step:"input",asset:null,toAddress:"",amount:null,addressError:null,amountError:null,feeAmount:null,feeMinAmount:null,feeSymbol:"",feeLoading:!1,isSubmitting:!1,resultStatus:null,txHash:null,errorMessage:null},Te=ge.t.bind(ge);async function xv(t,s){const n=Ie(t.id);if(!n.supportsFeeEstimate||!n.supportsBuildTransaction)throw new Error(`Chain ${t.id} does not support fee estimation`);const a=await n.buildTransaction({type:"transfer",from:s,to:s,amount:ne.fromRaw("1",t.decimals,t.symbol)});return{amount:(await n.estimateFee(a)).standard.amount,symbol:t.symbol}}async function gv({chainConfig:t,walletId:s,password:n,fromAddress:a,toAddress:r,amount:o}){let c;try{c=await Xt.getMnemonic(s,n)}catch(i){return i instanceof Tn&&i.code===Pn.DECRYPTION_FAILED?{status:"password"}:{status:"error",message:i instanceof Error?i.message:Te("error:transaction.unknownError")}}if(!o.isPositive())return{status:"error",message:Te("error:validation.enterValidAmount")};try{const i=Ie(t.id);if(!i.supportsFullTransaction)return{status:"error",message:Te("error:transaction.chainNotSupported",{chainId:t.id})};const d=xu(c),u=await i.buildTransaction({type:"transfer",from:a,to:r,amount:o}),m=await i.signTransaction(u,{privateKey:d});return{status:"ok",txHash:await i.broadcastTransaction(m)}}catch(i){const d=i instanceof Error?i.message:String(i);return d.includes("insufficient")||d.includes("balance")?{status:"error",message:Te("error:transaction.insufficientBalance")}:d.includes("fee")||d.includes("gas")?{status:"error",message:Te("error:transaction.insufficientFee")}:d.includes("not yet implemented")||d.includes("not supported")?{status:"error",message:Te("error:transaction.featureNotImplemented")}:{status:"error",message:d||Te("error:transaction.transactionFailed")}}}function vv(t,s){const n=Ie(t.id);return n.supportsAddressValidation?!s||s.trim()===""?Te("error:validation.enterRecipientAddress"):n.isValidAddress(s)?!s||s.trim()===""?Te("error:validation.enterReceiverAddress"):n.isValidAddress(s)?null:Te("error:validation.invalidAddress"):Te("error:validation.invalidAddressFormat"):Te("error:validation.unsupportedChainType")}const $e=ge.t.bind(ge);function wl(t,s){return t.trim()?s?gu(t):Iu(t):!1}function yv(t,s,n){return t.trim()?wl(t,s)?s&&n&&t.trim()===n.trim()?$e("error:validation.cannotTransferToSelf"):null:$e("error:validation.invalidAddressFormat"):$e("error:validation.enterRecipientAddress")}function bv(t,s){return t?s?t.isPositive()?t.gt(s.amount)?$e("error:insufficientFunds"):null:$e("error:validation.enterValidAmount"):null:$e("error:validation.enterAmount")}function jv(t){const{toAddress:s,amount:n,asset:a,isBioforestChain:r,feeLoading:o}=t;return!a||!n||o?!1:s.trim()!==""&&wl(s,r)&&n.isPositive()&&n.lte(a.amount)}function Nv(t,s,n){if(!t)return{status:"error",message:$e("error:validation.enterValidAmount")};const a=s.amount;if(s.assetType===n.symbol){if(t.add(n).lte(a))return{status:"ok"};if(!t.eq(a))return{status:"error",message:$e("error:insufficientFunds")};const o=a.sub(n);return o.isPositive()?{status:"ok",adjustedAmount:o}:{status:"error",message:$e("error:insufficientFunds")}}else return t.lte(a)?{status:"ok"}:{status:"error",message:$e("error:insufficientFunds")}}const ji=ge.t.bind(ge);async function wv(t){t(s=>({...s,step:"sending",isSubmitting:!0}));try{if(await new Promise(n=>setTimeout(n,2e3)),Math.random()>.2)return t(n=>({...n,step:"result",isSubmitting:!1,resultStatus:"success",txHash:`0x${Math.random().toString(16).slice(2)}${Math.random().toString(16).slice(2)}`,errorMessage:null})),{status:"ok"};throw new Error(ji("error:transaction.transactionFailed"))}catch(s){return t(n=>({...n,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:s instanceof Error?s.message:ji("error:transaction.unknownError")})),{status:"error"}}}const Ve=ge.t.bind(ge);function Cv(t={}){const{initialAsset:s,useMock:n=!0,walletId:a,fromAddress:r,chainConfig:o,getBalance:c}=t,[i,d]=l.useState({...bi,asset:s??null}),u=o?.chainKind==="bioforest",m=o?.chainKind==="evm"||o?.chainKind==="tron"||o?.chainKind==="bitcoin",f=l.useCallback(w=>m&&o?vv(o,w):yv(w,u,r),[u,m,o,r]),h=l.useCallback((w,T)=>bv(w,T),[]),v=l.useCallback(w=>{d(T=>({...T,toAddress:w,addressError:null}))},[]),j=l.useCallback(w=>{d(T=>({...T,amount:w,amountError:null}))},[]),p=l.useCallback(w=>{d(T=>{if(!T.feeAmount)return T;const P=ne.fromFormatted(w,T.feeAmount.decimals,T.feeAmount.symbol);return{...T,feeAmount:P}})},[]),x=l.useCallback(w=>{if(d(P=>({...P,asset:w,feeLoading:!0})),n||!u&&!m||!o||!r){setTimeout(()=>{const P=hv[w.assetType]??{amount:"0.001",symbol:w.assetType},I=ne.fromFormatted(P.amount,w.decimals,P.symbol);d(k=>({...k,feeAmount:I,feeMinAmount:I,feeSymbol:P.symbol,feeLoading:!1}))},300);return}(async()=>{try{const P=m?await xv(o,r):await ug(o,r);d(I=>({...I,feeAmount:P.amount,feeMinAmount:P.amount,feeSymbol:P.symbol,feeLoading:!1}))}catch(P){d(I=>({...I,feeLoading:!1,errorMessage:P instanceof Error?P.message:Ve("error:transaction.feeEstimateFailed")}))}})()},[o,r,u,m,n]),g=l.useMemo(()=>!i.asset?.assetType||!c?i.asset?.amount??null:c(i.asset.assetType)??i.asset?.amount??null,[i.asset?.assetType,i.asset?.amount,c]),y=l.useMemo(()=>!i.asset||!g?i.asset:{...i.asset,amount:g},[i.asset,g]),N=l.useMemo(()=>jv({toAddress:i.toAddress,amount:i.amount,asset:y,isBioforestChain:u,feeLoading:i.feeLoading}),[u,i.amount,y,i.toAddress,i.feeLoading]),b=l.useCallback(()=>{const w=f(i.toAddress),T=y?h(i.amount,y):Ve("error:validation.selectAsset");if(w||T)return d(P=>({...P,addressError:w,amountError:T})),!1;if(y&&i.feeAmount&&i.amount){const P=Nv(i.amount,y,i.feeAmount);if(P.status==="error")return d(I=>({...I,amountError:P.message})),!1;P.adjustedAmount&&d(I=>({...I,amount:P.adjustedAmount??I.amount}))}return d(P=>({...P,step:"confirm",addressError:null,amountError:null})),!0},[i.toAddress,i.amount,y,i.feeAmount,f,h]),A=l.useCallback(()=>{d(w=>({...w,step:"input"}))},[]),S=l.useCallback(async w=>{if(n)return(await wv(d)).status==="ok"?{status:"ok"}:{status:"error"};if(!o)return d(k=>({...k,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:Ve("error:transaction.chainConfigMissing")})),{status:"error"};if(o.chainKind==="evm"||o.chainKind==="tron"||o.chainKind==="bitcoin"){if(!a||!r||!i.asset||!i.amount)return d(M=>({...M,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:Ve("error:transaction.walletInfoIncomplete")})),{status:"error"};d(M=>({...M,step:"sending",isSubmitting:!0,errorMessage:null}));const k=await gv({chainConfig:o,walletId:a,password:w,fromAddress:r,toAddress:i.toAddress,amount:i.amount});return k.status==="password"?(d(M=>({...M,step:"confirm",isSubmitting:!1})),{status:"password"}):k.status==="error"?(d(M=>({...M,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:k.message})),{status:"error"}):(d(M=>({...M,step:"result",isSubmitting:!1,resultStatus:"success",txHash:k.txHash,errorMessage:null})),{status:"ok",txHash:k.txHash})}if(o.chainKind!=="bioforest")return d(k=>({...k,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:Ve("error:transaction.unsupportedChainType",{chainType:o.chainKind})})),{status:"error"};if(!a||!r||!i.asset)return d(k=>({...k,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:Ve("error:wallet.incompleteInfo")})),{status:"error"};const T=f(i.toAddress),P=h(i.amount,i.asset);if(T||P)return d(k=>({...k,addressError:T,amountError:P})),{status:"error"};if(d(k=>({...k,step:"sending",isSubmitting:!0,errorMessage:null})),!i.amount)return d(k=>({...k,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:Ve("error:transaction.invalidAmount")})),{status:"error"};const I=await pi({chainConfig:o,walletId:a,password:w,fromAddress:r,toAddress:i.toAddress,amount:i.amount,assetType:i.asset.assetType,fee:i.feeAmount??void 0});return I.status==="password"?(d(k=>({...k,step:"confirm",isSubmitting:!1})),{status:"password"}):I.status==="password_required"?(d(k=>({...k,step:"confirm",isSubmitting:!1})),{status:"two_step_secret_required",secondPublicKey:I.secondPublicKey}):I.status==="error"?(d(k=>({...k,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:I.message})),{status:"error",message:I.message,pendingTxId:I.pendingTxId}):(d(k=>({...k,step:"result",isSubmitting:!1,resultStatus:"success",txHash:I.txHash,errorMessage:null})),{status:"ok",txHash:I.txHash,pendingTxId:I.pendingTxId})},[o,r,i.amount,i.asset,i.toAddress,n,f,h,a]),C=l.useCallback(async(w,T)=>{if(!o||!a||!r)return{status:"error"};if(d(I=>({...I,step:"sending",isSubmitting:!0,resultStatus:null,txHash:null,errorMessage:null})),!i.amount||!i.asset)return d(I=>({...I,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:Ve("error:transaction.invalidAmount")})),{status:"error"};const P=await pi({chainConfig:o,walletId:a,password:w,fromAddress:r,toAddress:i.toAddress,amount:i.amount,assetType:i.asset.assetType,fee:i.feeAmount??void 0,twoStepSecret:T});return P.status==="password"?(d(I=>({...I,step:"confirm",isSubmitting:!1})),{status:"password"}):P.status==="error"?(d(I=>({...I,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:P.message})),{status:"error",message:P.message,pendingTxId:P.pendingTxId}):P.status==="password_required"?(d(I=>({...I,step:"result",isSubmitting:!1,resultStatus:"failed",txHash:null,errorMessage:Ve("error:transaction.securityPasswordFailed")})),{status:"error"}):(d(I=>({...I,step:"result",isSubmitting:!1,resultStatus:"success",txHash:P.txHash,errorMessage:null})),{status:"ok",txHash:P.txHash,pendingTxId:P.pendingTxId})},[o,r,i.amount,i.toAddress,a]),_=l.useCallback(()=>{d({...bi,asset:s??null})},[s]);return{state:i,setToAddress:v,setAmount:j,setAsset:x,setFee:p,goToConfirm:b,goBack:A,submit:S,submitWithTwoStepSecret:C,reset:_,canProceed:N}}const kv={ethereum:"Ethereum",bitcoin:"Bitcoin",tron:"Tron",binance:"BSC",bfmeta:"BFMeta",ccchain:"CCChain",pmchain:"PMChain",bfchainv2:"BFChain V2",btgmeta:"BTGMeta",biwmeta:"BIWMeta",ethmeta:"ETHMeta",malibu:"Malibu"};function Sv(){const{t}=L(["transaction","common","security"]),{goBack:s}=se(),{push:n}=G(),a=vt(),r=Os(),o=l.useRef(!1),{address:c,amount:i,assetType:d,assetLocked:u}=oe(),m=u==="true",f=ze(),h=ke(),v=va(),j=tt(),p=j.snapshot?qe.getChainById(j,f):null,x=p?.name??kv[f]??f,y=$t().tokenBalances.useState({address:v?.address??""},{enabled:!!v?.address}),N=l.useMemo(()=>y?.data?Nl(y.data,f):[],[y?.data,f]),b=l.useMemo(()=>{if(!p)return null;if(d){const V=N.find(ce=>ce.symbol.toUpperCase()===d.toUpperCase());return V?{assetType:V.symbol,name:V.name,amount:ne.fromFormatted(V.balance,V.decimals??p.decimals,V.symbol),decimals:V.decimals??p.decimals,logoUrl:V.icon}:null}const J=N.find(V=>V.symbol===p.symbol)?.balance??"0";return{assetType:p.symbol,name:p.name,amount:ne.fromFormatted(J,p.decimals,p.symbol),decimals:p.decimals}},[p,N,d]),A=l.useCallback(W=>{const J=N.find(V=>V.symbol===W);return J?ne.fromFormatted(J.balance,J.decimals??p?.decimals??8,J.symbol):null},[N,p?.decimals]),{state:S,setToAddress:C,setAmount:_,setAsset:w,setFee:T,goToConfirm:P,submit:I,submitWithTwoStepSecret:k,canProceed:M}=Cv({initialAsset:b??void 0,useMock:!1,walletId:h?.id,fromAddress:v?.address,chainConfig:p,getBalance:A}),E=l.useMemo(()=>{if(!S.asset)return null;const W=A(S.asset.assetType);return{symbol:S.asset.assetType,name:S.asset.name??S.asset.assetType,balance:W?.toFormatted()??S.asset.amount.toFormatted(),decimals:S.asset.decimals,chain:f,icon:S.asset.logoUrl}},[S.asset,f,A]),D=l.useCallback(W=>{const J={assetType:W.symbol,name:W.name,amount:ne.fromFormatted(W.balance,W.decimals??p?.decimals??8,W.symbol),decimals:W.decimals??p?.decimals??8,logoUrl:W.icon};w(J)},[p?.decimals,w]),z=l.useRef(!1);l.useEffect(()=>{b&&!z.current&&!S.asset&&(w(b),z.current=!0)},[b,w,S.asset]),l.useEffect(()=>{if(c&&!S.toAddress&&C(c),i&&!S.amount&&S.asset){const W=ne.tryFromFormatted(i,S.asset.decimals,S.asset.assetType);W&&_(W)}},[c,i,S.toAddress,S.amount,S.asset,C,_]),l.useEffect(()=>{const W=J=>{C(J.detail.address.address)};return window.addEventListener("contact-picker-select",W),()=>window.removeEventListener("contact-picker-select",W)},[C]),l.useEffect(()=>{if(S.resultStatus==="success"&&S.toAddress){const W=pa.getContactByAddress(bs.state,S.toAddress);W&&An.trackRecentContact(W.contact.id)}},[S.resultStatus,S.toAddress]);const F=l.useCallback(()=>{n("ContactPickerJob",{chainType:f})},[n,f]),B=l.useMemo(()=>S.asset?N.find(W=>W.symbol===S.asset?.assetType):null,[S.asset,N]),Q=l.useMemo(()=>B?ne.fromFormatted(B.balance,B.decimals??S.asset?.decimals??8,B.symbol):null,[B,S.asset?.decimals]),Y=S.asset?.assetType??"TOKEN",X=l.useCallback(()=>{dm(({content:W,parsed:J})=>{let V=W;J.type==="address"||J.type==="payment"?V=J.address:J.type==="contact"&&J.addresses.length>0&&(V=J.addresses[0].address),C(V),r.impact("success"),a.show(t("sendPage.scanSuccess"))}),n("ScannerJob",{chainType:x??f})},[n,f,x,C,r,a,t]),Z=()=>{P()&&(r.impact("light"),Yc(async()=>{o.current||(o.current=!0,await r.impact("medium"),Zc(async(W,J)=>{if(!J){const ce=await I(W);return ce.status==="password"?{status:"wallet_lock_invalid"}:ce.status==="two_step_secret_required"?{status:"two_step_secret_required"}:ce.status==="ok"?(o.current=!1,{status:"ok",txHash:ce.txHash,pendingTxId:ce.pendingTxId}):ce.status==="error"?{status:"error",message:ce.message,pendingTxId:ce.pendingTxId}:{status:"error",message:t("error:transaction.transferFailed")}}const V=await k(W,J);return V.status==="ok"?(o.current=!1,{status:"ok",txHash:V.txHash,pendingTxId:V.pendingTxId}):V.status==="password"?{status:"two_step_secret_invalid",message:t("error:transaction.securityPasswordWrong")}:V.status==="error"?{status:"error",message:V.message,pendingTxId:V.pendingTxId}:{status:"error",message:t("error:transaction.unknownError")}}),n("TransferWalletLockJob",{title:t("security:walletLock.verifyTitle")}))},{minFee:S.feeMinAmount?.toFormatted()??S.feeAmount?.toFormatted()??"0",onFeeChange:T}),n("TransferConfirmJob",{amount:S.amount?.toFormatted()??"0",symbol:Y,toAddress:S.toAddress,feeAmount:S.feeAmount?.toFormatted()??"0",feeSymbol:S.feeSymbol,feeLoading:S.feeLoading?"true":"false"}))};return!h||!v?e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx(U,{title:t("sendPage.title"),onBack:s}),e.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:e.jsx("p",{className:"text-muted-foreground",children:t("history.noWallet")})})]}):e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx(U,{title:t("sendPage.title"),onBack:s}),e.jsxs("div",{className:"flex-1 space-y-6 p-4",children:[e.jsxs("div",{className:"bg-muted/50 space-y-2 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(pt,{chain:f,size:"sm"}),e.jsx("span",{className:"text-sm font-medium",children:x})]}),v?.address&&e.jsxs("div",{className:"text-muted-foreground flex items-center justify-center gap-1 text-xs",children:[e.jsxs("span",{children:[t("sendPage.from"),":"]}),e.jsxs("span",{className:"font-mono",children:[v.address.slice(0,8),"...",v.address.slice(-6)]})]})]}),N.length>1&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:t("sendPage.assetLabel")}),e.jsx(Ji,{selectedAsset:E,assets:N,onSelect:D,disabled:m,testId:"send-asset-selector"})]}),e.jsx(Tu,{label:t("sendPage.toAddressLabel"),value:S.toAddress,onChange:C,placeholder:t("sendPage.toAddressPlaceholder",{chain:x}),onScan:X,onContactPicker:F,chainType:f,error:S.addressError??void 0}),e.jsx(so,{label:t("sendPage.amountLabel"),value:S.amount??void 0,onChange:_,balance:Q??void 0,symbol:Y,error:S.amountError??void 0,fiatValue:S.amount?S.amount.toNumber().toFixed(2):void 0}),e.jsx(Mt,{variant:"info",children:t("sendPage.networkWarning",{chain:x})}),e.jsx("div",{className:"pt-4",children:e.jsxs(Me,{variant:"mint",className:"w-full","data-testid":"send-continue-button",disabled:!M,onClick:Z,children:[t("sendPage.continue"),e.jsx(Ae,{className:"-mr-4 ml-2 size-4"})]})})]})]})}function Cl(){const{goBack:t}=se(),s=ze(),{t:n}=L(["transaction","common"]);return e.jsx(bt,{chainId:s,fallback:e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx(U,{title:n("sendPage.title"),onBack:t}),e.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:e.jsx("p",{className:"text-muted-foreground",children:"Chain not supported"})})]}),children:e.jsx(Sv,{})})}Cl.__docgenInfo={description:"",methods:[],displayName:"SendPage"};const kl=({params:t})=>e.jsx(te,{children:e.jsx(re,{params:t,children:e.jsx($i,{children:e.jsx(Cl,{})})})});kl.__docgenInfo={description:"",methods:[],displayName:"SendActivity"};const Oe=ge.t.bind(ge),Ni={step:"input",asset:null,amount:null,amountError:null,recipientAddress:null,feeAmount:null,feeMinAmount:null,feeSymbol:"",feeLoading:!1,isSubmitting:!1,resultStatus:null,txHash:null,errorMessage:null},ms={amount:"0.001",symbol:"BFM"};function Av(t,s){if(!t||!s)return null;if(!t.isPositive())return Oe("error:validation.enterValidAmount");const n=s.amount;return t.gt(n)?Oe("error:validation.exceedsBalance"):null}function Iv(t={}){const{initialAsset:s,assetLocked:n=!1,useMock:a=!0,walletId:r,fromAddress:o,chainConfig:c}=t,[i,d]=l.useState({...Ni,asset:s??null}),u=c?.chainKind==="bioforest",m=l.useCallback((N,b)=>Av(N,b),[]),f=l.useCallback(N=>{d(b=>({...b,amount:N,amountError:null}))},[]),h=l.useCallback(N=>{if(d(A=>({...A,asset:N,amount:null,amountError:null,feeLoading:!0,recipientAddress:null})),a||!u||!c||!o){setTimeout(()=>{d(A=>({...A,recipientAddress:"mock_apply_address",feeAmount:ne.fromFormatted(ms.amount,N.decimals,ms.symbol),feeMinAmount:ne.fromFormatted(ms.amount,N.decimals,ms.symbol),feeSymbol:c?.symbol??ms.symbol,feeLoading:!1}))},300);return}(async()=>{try{const A=await ll(c,N.assetType,o);if(!A){d(C=>({...C,feeLoading:!1,errorMessage:Oe("error:transaction.issuerAddressNotFound")}));return}const S=await dl(c,N.assetType,"1");d(C=>({...C,recipientAddress:A,feeAmount:S.amount,feeMinAmount:S.amount,feeSymbol:S.symbol,feeLoading:!1}))}catch(A){d(S=>({...S,feeLoading:!1,errorMessage:A instanceof Error?A.message:Oe("error:transaction.feeEstimateFailed")}))}})()},[c,o,u,a]);l.useEffect(()=>{s&&!i.recipientAddress&&h(s)},[s,h,i.recipientAddress]);const v=l.useMemo(()=>!!(i.asset&&i.amount&&i.amount.isPositive()&&i.recipientAddress&&!i.feeLoading),[i.amount,i.asset,i.recipientAddress,i.feeLoading]),j=l.useCallback(()=>{const N=m(i.amount,i.asset);return N?(d(b=>({...b,amountError:N})),!1):i.recipientAddress?(d(b=>({...b,step:"confirm",amountError:null})),!0):(d(b=>({...b,errorMessage:Oe("error:transaction.issuerAddressNotReady")})),!1)},[i.amount,i.asset,i.recipientAddress,m]),p=l.useCallback(()=>{d(N=>({...N,step:"input"}))},[]),x=l.useCallback(async N=>{if(a)return d(A=>({...A,step:"burning",isSubmitting:!0})),await new Promise(A=>setTimeout(A,1500)),d(A=>({...A,step:"result",isSubmitting:!1,resultStatus:"success",txHash:`mock_burn_tx_${Date.now()}`})),{status:"ok",txHash:`mock_burn_tx_${Date.now()}`};if(!c||c.chainKind!=="bioforest")return d(A=>({...A,step:"result",isSubmitting:!1,resultStatus:"failed",errorMessage:Oe("error:burn.bioforestOnly")})),{status:"error",message:Oe("error:burn.bioforestOnly")};if(!r||!o||!i.asset||!i.amount||!i.recipientAddress)return d(A=>({...A,step:"result",isSubmitting:!1,resultStatus:"failed",errorMessage:Oe("error:transaction.paramsIncomplete")})),{status:"error",message:Oe("error:transaction.paramsIncomplete")};d(A=>({...A,step:"burning",isSubmitting:!0,errorMessage:null}));const b=await Sn({chainConfig:c,walletId:r,password:N,fromAddress:o,recipientAddress:i.recipientAddress,assetType:i.asset.assetType,amount:i.amount,fee:i.feeAmount??void 0});return b.status==="password"?(d(A=>({...A,step:"confirm",isSubmitting:!1})),{status:"password"}):b.status==="password_required"?(d(A=>({...A,step:"confirm",isSubmitting:!1})),{status:"two_step_secret_required",secondPublicKey:b.secondPublicKey}):b.status==="error"?(d(A=>({...A,step:"result",isSubmitting:!1,resultStatus:"failed",errorMessage:b.message})),{status:"error",message:b.message}):(d(A=>({...A,step:"result",isSubmitting:!1,resultStatus:"success",txHash:b.txHash})),{status:"ok",txHash:b.txHash})},[c,o,i.amount,i.asset,i.feeAmount,i.recipientAddress,a,r]),g=l.useCallback(async(N,b)=>{if(!c||!r||!o||!i.asset||!i.amount||!i.recipientAddress)return{status:"error",message:Oe("error:transaction.paramsIncomplete")};d(S=>({...S,step:"burning",isSubmitting:!0,errorMessage:null}));const A=await Sn({chainConfig:c,walletId:r,password:N,fromAddress:o,recipientAddress:i.recipientAddress,assetType:i.asset.assetType,amount:i.amount,fee:i.feeAmount??void 0,twoStepSecret:b});return A.status==="password"?(d(S=>({...S,step:"confirm",isSubmitting:!1})),{status:"password"}):A.status==="error"?(d(S=>({...S,step:"result",isSubmitting:!1,resultStatus:"failed",errorMessage:A.message})),{status:"error",message:A.message}):A.status==="password_required"?(d(S=>({...S,step:"confirm",isSubmitting:!1})),{status:"two_step_secret_required",secondPublicKey:A.secondPublicKey}):(d(S=>({...S,step:"result",isSubmitting:!1,resultStatus:"success",txHash:A.txHash})),{status:"ok",txHash:A.txHash})},[c,o,i.amount,i.asset,i.feeAmount,i.recipientAddress,r]),y=l.useCallback(()=>{d({...Ni,asset:s??null})},[s]);return{state:i,setAmount:f,setAsset:h,goToConfirm:j,goBack:p,submit:x,submitWithTwoStepSecret:g,reset:y,canProceed:v,assetLocked:n}}const Tv={ethereum:"Ethereum",bitcoin:"Bitcoin",tron:"Tron",binance:"BSC",bfmeta:"BFMeta",ccchain:"CCChain",pmchain:"PMChain",bfchainv2:"BFChain V2",btgmeta:"BTGMeta",biwmeta:"BIWMeta",ethmeta:"ETHMeta",malibu:"Malibu"};function wi(t){return{assetType:t.symbol,name:t.name,amount:ne.fromFormatted(t.balance,t.decimals??8,t.symbol),decimals:t.decimals??8,logoUrl:t.icon}}function Pv(t,s){return{symbol:t.assetType,name:t.name??t.assetType,balance:t.amount.toFormatted(),decimals:t.decimals,chain:s,icon:t.logoUrl}}function _v(){const{t}=L(["transaction","common","security"]),{goBack:s}=se(),{push:n}=G(),a=vt(),r=Os(),o=l.useRef(!1),{assetType:c,assetLocked:i}=oe(),d=ze(),u=ke(),m=va(),f=tt(),h=f.snapshot?qe.getChainById(f,d):null,v=h?.name??Tv[d]??d,p=$t().tokenBalances.useState({address:m?.address??""},{enabled:!!m?.address}),x=l.useMemo(()=>p?.data?Nl(p.data,d):[],[p?.data,d]),g=l.useMemo(()=>h?x.filter(Y=>Y.symbol.toUpperCase()!==h.symbol.toUpperCase()):[],[x,h]),y=l.useMemo(()=>{if(!c||g.length===0)return null;const Y=g.find(X=>X.symbol.toUpperCase()===c.toUpperCase());return Y?wi(Y):null},[c,g]),N=i==="true",{state:b,setAmount:A,setAsset:S,goToConfirm:C,submit:_,submitWithTwoStepSecret:w,reset:T,canProceed:P}=Iv({initialAsset:y??void 0,assetLocked:N,useMock:!1,walletId:u?.id,fromAddress:m?.address,chainConfig:h}),I=l.useCallback(Y=>{S(wi(Y))},[S]),k=l.useMemo(()=>b.asset?Pv(b.asset,d):null,[b.asset,d]),M=b.asset?.amount??null,E=b.asset?.assetType??"TOKEN",D=()=>{C()&&(r.impact("light"),Yc(async()=>{o.current||(o.current=!0,await r.impact("medium"),Zc(async(Y,X)=>{if(!X){const W=await _(Y);return W.status==="password"?{status:"wallet_lock_invalid"}:W.status==="two_step_secret_required"?{status:"two_step_secret_required"}:W.status==="ok"?(o.current=!1,{status:"ok",txHash:W.txHash,pendingTxId:W.pendingTxId}):W.status==="error"?{status:"error",message:W.message,pendingTxId:W.pendingTxId}:{status:"error",message:t("error:destroy.failed")}}const Z=await w(Y,X);return Z.status==="ok"?(o.current=!1,{status:"ok",txHash:Z.txHash,pendingTxId:Z.pendingTxId}):Z.status==="password"?{status:"two_step_secret_invalid",message:t("error:security.passwordInvalid")}:Z.status==="error"?{status:"error",message:Z.message,pendingTxId:Z.pendingTxId}:{status:"error",message:t("error:unknown")}}),n("TransferWalletLockJob",{title:t("security:walletLock.verifyTitle")}))},{minFee:b.feeMinAmount?.toFormatted()??b.feeAmount?.toFormatted()??"0"}),n("TransferConfirmJob",{amount:b.amount?.toFormatted()??"0",symbol:E,toAddress:b.recipientAddress??"",feeAmount:b.feeAmount?.toFormatted()??"0",feeSymbol:b.feeSymbol,feeLoading:b.feeLoading?"true":"false"}))},z=()=>{b.resultStatus==="success"&&r.impact("success"),s()},F=()=>{T()},B=l.useCallback(()=>{if(!b.txHash)return;const Y=h?.explorer?.queryTx;if(!Y){a.show(t("sendPage.explorerNotImplemented"));return}const X=Y.replace(":hash",b.txHash).replace(":signature",b.txHash);window.open(X,"_blank","noopener,noreferrer")},[b.txHash,h?.explorer?.queryTx,a,t]),Q=h?.chainKind==="bioforest";return!u||!m?e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx(U,{title:t("destroyPage.title"),onBack:s}),e.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:e.jsx("p",{className:"text-muted-foreground",children:t("history.noWallet")})})]}):Q?b.step==="result"||b.step==="burning"?e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx(U,{title:t("destroyPage.resultTitle")}),e.jsx(hm,{status:b.step==="burning"?"pending":b.resultStatus??"pending",amount:b.amount?.toFormatted()??"0",symbol:E,toAddress:b.recipientAddress??"",txHash:b.txHash??void 0,errorMessage:b.errorMessage??void 0,onDone:z,onRetry:b.resultStatus==="failed"?F:void 0,onViewExplorer:b.resultStatus==="success"&&h?.explorer?.queryTx?B:void 0})]}):e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx(U,{title:t("destroyPage.title"),onBack:s}),e.jsxs("div",{className:"flex-1 space-y-6 p-4",children:[e.jsxs("div",{className:"bg-muted/50 space-y-2 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(pt,{chain:d,size:"sm"}),e.jsx("span",{className:"text-sm font-medium",children:v})]}),m?.address&&e.jsxs("div",{className:"text-muted-foreground flex items-center justify-center gap-1 text-xs",children:[e.jsxs("span",{children:[t("sendPage.from"),":"]}),e.jsxs("span",{className:"font-mono",children:[m.address.slice(0,8),"...",m.address.slice(-6)]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:t("destroyPage.assetLabel")}),e.jsx(Ji,{selectedAsset:k,assets:g,onSelect:I,disabled:N,excludeAssets:h?[h.symbol]:[],testId:"destroy-asset-selector"}),g.length===0&&e.jsx("p",{className:"text-muted-foreground text-xs",children:t("destroyPage.noDestroyableAssets")})]}),b.asset&&e.jsx(so,{label:t("destroyPage.amountLabel"),value:b.amount??void 0,onChange:A,balance:M??void 0,symbol:E,error:b.amountError??void 0}),e.jsx(Mt,{variant:"warning",children:t("destroyPage.warning")}),b.feeAmount&&e.jsx("div",{className:"bg-muted/50 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:t("sendPage.fee")}),e.jsxs("span",{className:"font-medium",children:[b.feeAmount.toFormatted()," ",b.feeSymbol]})]})}),e.jsx("div",{className:"pt-4",children:e.jsxs(Me,{variant:"mint",className:"w-full","data-testid":"destroy-confirm-button",disabled:!P,onClick:D,children:[e.jsx(ln,{className:"mr-2 -ml-4 size-4"}),t("destroyPage.confirm")]})})]})]}):e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx(U,{title:t("destroyPage.title"),onBack:s}),e.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 p-4",children:[e.jsx(ln,{className:"text-muted-foreground size-16"}),e.jsx("p",{className:"text-muted-foreground text-center",children:t("destroyPage.notSupported")})]})]})}function Sl(){const{goBack:t}=se(),s=ze(),{t:n}=L(["transaction","common"]);return e.jsx(bt,{chainId:s,fallback:e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx(U,{title:n("destroyPage.title"),onBack:t}),e.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:e.jsx("p",{className:"text-muted-foreground",children:"Chain not supported"})})]}),children:e.jsx(_v,{})})}Sl.__docgenInfo={description:"",methods:[],displayName:"DestroyPage"};const Al=({params:t})=>e.jsx(te,{children:e.jsx(re,{params:t,children:e.jsx($i,{children:e.jsx(Sl,{})})})});Al.__docgenInfo={description:"",methods:[],displayName:"DestroyActivity"};const Ev={ethereum:"Ethereum",bitcoin:"Bitcoin",tron:"Tron",binance:"BSC",bfmeta:"BFMeta",ccchain:"CCChain",pmchain:"PMChain",bfchainv2:"BFChain V2",btgmeta:"BTGMeta",biwmeta:"BIWMeta",ethmeta:"ETHMeta",malibu:"Malibu"};function Il(){const{t}=L(["transaction","common"]),{goBack:s}=se(),n=Ma(),a=vt(),r=Os(),o=va(),c=ze(),i=Ev[c]??c,d=ha(),[u,m]=l.useState(!1),[f,h]=l.useState(!1),v=l.useRef(null),j=o?.address||"",p=d.username||t("common:myCard.defaultName"),x=l.useMemo(()=>j?Sa({name:p,addresses:[{address:j,label:i}],avatar:d.avatar}):"",[p,j,i,d.avatar]),g=async()=>{j&&(await n.write({text:j}),await r.impact("light"),m(!0),a.show(t("receivePage.addressCopied")),setTimeout(()=>m(!1),2e3))},y=l.useCallback(async()=>{const b=v.current;if(!(!b||f)){h(!0);try{const{snapdom:A}=await ft(async()=>{const{snapdom:S}=await import("./snapdom-CO8q8LPW.js").then(C=>C.s);return{snapdom:S}},__vite__mapDeps([0,1]),import.meta.url);await A.download(b,{type:"png",filename:`receive-${c}-${j.slice(0,8)}.png`,scale:2,quality:1}),await r.impact("success"),a.show(t("receivePage.imageSaved"))}catch{}finally{h(!1)}}},[j,c,f,r,a,t]),N=l.useCallback(async()=>{const b=v.current;if(!(!b||f)){h(!0);try{if(navigator.share){const{snapdom:A}=await ft(async()=>{const{snapdom:w}=await import("./snapdom-CO8q8LPW.js").then(T=>T.s);return{snapdom:w}},__vite__mapDeps([0,1]),import.meta.url),C=await(await A(b,{scale:2})).toBlob(),_=new File([C],`receive-${c}.png`,{type:"image/png"});await navigator.share({title:t("receivePage.shareTitle"),text:j,files:[_]}),await r.impact("success")}}catch{}finally{h(!1)}}},[j,c,f,r,t]);return e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:t("receivePage.title"),onBack:s}),e.jsxs("div",{className:"flex-1 space-y-6 p-4",children:[e.jsxs("div",{className:"text-muted-foreground flex items-center justify-center gap-2",children:[e.jsx(pt,{chain:c,size:"sm"}),e.jsx("span",{className:"text-sm",children:i})]}),e.jsx("div",{ref:v,className:"flex justify-center",children:e.jsx(Ia,{name:p,avatar:d.avatar,addresses:[{address:j,label:i}],qrContent:x,caption:t("common:contactCard.transferToMe")})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-muted-foreground text-sm font-medium",children:t("receivePage.receiveAddress")}),e.jsx("div",{className:"border-border bg-card rounded-xl border p-4",children:e.jsx(At,{address:j,copyable:!0})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(H,{variant:"outline",className:"flex-1",onClick:g,children:u?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"mr-2 size-4"}),t("receivePage.copied")]}):e.jsxs(e.Fragment,{children:[e.jsx(Oi,{className:"mr-2 size-4"}),t("receivePage.copyAddress")]})}),e.jsxs(H,{variant:"outline",className:"flex-1",onClick:y,disabled:f,children:[f?e.jsx(be,{className:"mr-2 size-4 animate-spin"}):e.jsx(Ls,{className:"mr-2 size-4"}),t("receivePage.saveImage")]})]}),e.jsxs(Me,{variant:"mint",className:"w-full",onClick:N,disabled:f,children:[f?e.jsx(be,{className:"mr-2 size-4 animate-spin"}):e.jsx(Nf,{className:"mr-2 size-4"}),t("receivePage.share")]}),e.jsx(Mt,{variant:"info",children:t("receivePage.networkWarning",{chain:i})})]})]})}Il.__docgenInfo={description:"",methods:[],displayName:"ReceivePage"};const Tl=()=>e.jsx(te,{children:e.jsx(Il,{})});Tl.__docgenInfo={description:"",methods:[],displayName:"ReceiveActivity"};const Pl=()=>e.jsx(te,{children:e.jsx(nr,{})});Pl.__docgenInfo={description:"",methods:[],displayName:"SettingsActivity"};const Mv={"zh-CN":"","zh-TW":"",en:"English",ar:""};function _l(){const{goBack:t}=se(),{t:s}=L("settings"),n=Lt(),a=r=>{An.setLanguage(r),t()};return e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:s("languagePage.title"),onBack:t}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsx("div",{className:"bg-card overflow-hidden rounded-xl shadow-sm",children:Object.keys(qd).map((r,o)=>e.jsxs("div",{children:[o>0&&e.jsx("div",{className:"bg-border mx-4 h-px"}),e.jsxs("button",{onClick:()=>a(r),className:R("flex w-full items-center justify-between px-4 py-3.5","hover:bg-muted/50 active:bg-muted transition-colors",r===n&&"bg-primary/5"),children:[e.jsx("span",{className:"text-sm font-medium",children:Mv[r]}),r===n&&e.jsx(fe,{className:"text-primary size-5"})]})]},r))}),e.jsx("p",{className:"text-muted-foreground mt-4 px-1 text-xs",children:s("languagePage.hint")})]})]})}_l.__docgenInfo={description:"",methods:[],displayName:"LanguagePage"};const El=()=>e.jsx(te,{children:e.jsx(_l,{})});El.__docgenInfo={description:"",methods:[],displayName:"SettingsLanguageActivity"};function Ml(){const{t}=L("settings"),{goBack:s}=se(),n=Mi(),a=r=>{An.setCurrency(r),s()};return e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:t("currency.title"),onBack:s}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsx("div",{className:"bg-card overflow-hidden rounded-xl shadow-sm",children:Object.keys(ar).map((r,o)=>e.jsxs("div",{children:[o>0&&e.jsx("div",{className:"bg-border mx-4 h-px"}),e.jsxs("button",{onClick:()=>a(r),className:R("flex w-full items-center justify-between px-4 py-3.5","hover:bg-muted/50 active:bg-muted transition-colors",r===n&&"bg-primary/5"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-muted-foreground text-base font-semibold",children:ar[r].symbol}),e.jsx("span",{className:"text-sm font-medium",children:t(`currency.names.${r}`)})]}),r===n&&e.jsx(fe,{className:"text-primary size-5"})]})]},r))}),e.jsx("p",{className:"text-muted-foreground mt-4 px-1 text-xs",children:t("currency.hint")})]})]})}Ml.__docgenInfo={description:"",methods:[],displayName:"CurrencyPage"};const Rl=()=>e.jsx(te,{children:e.jsx(Ml,{})});Rl.__docgenInfo={description:"",methods:[],displayName:"SettingsCurrencyActivity"};function Rv(t){const{children:s,open:n,defaultOpen:a=!1,onOpenChange:r,onOpenChangeComplete:o,actionsRef:c,handle:i,triggerId:d,defaultTriggerId:u=null}=t,m=Uu(),f=!!m,h=xm(()=>i?.store??new Ku({open:n??a,activeTriggerId:d!==void 0?d:u,modal:!0,disablePointerDismissal:!0,nested:f,role:"alertdialog"})).current;h.useControlledProp("open",n,a),h.useControlledProp("activeTriggerId",d,u),h.useSyncedValue("nested",f),h.useContextCallback("onOpenChange",r),h.useContextCallback("onOpenChangeComplete",o);const v=h.useState("payload");Vu({store:h,actionsRef:c,parentContext:m?.store.context});const j=l.useMemo(()=>({store:h}),[h]);return e.jsx(Ju.Provider,{value:j,children:typeof s=="function"?s({payload:v}):s})}function zl({...t}){return e.jsx(Rv,{"data-slot":"alert-dialog",...t})}function Dl({...t}){return e.jsx(Zu,{"data-slot":"alert-dialog-portal",...t})}function Ll({className:t,...s}){return e.jsx(em,{"data-slot":"alert-dialog-overlay",className:R("data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 bg-black/10 duration-100 supports-backdrop-filter:backdrop-blur-xs fixed inset-0 isolate z-50",t),...s})}function Bl({className:t,size:s="default",...n}){return e.jsxs(Dl,{children:[e.jsx(Ll,{}),e.jsx(Gu,{"data-slot":"alert-dialog-content","data-size":s,className:R("data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 bg-background ring-foreground/10 gap-4 rounded-xl p-4 ring-1 duration-100 data-[size=default]:max-w-xs data-[size=sm]:max-w-xs data-[size=default]:sm:max-w-sm group/alert-dialog-content fixed top-1/2 left-1/2 z-50 grid w-full -translate-x-1/2 -translate-y-1/2 outline-none",t),...n})]})}function Ol({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:R("grid grid-rows-[auto_1fr] place-items-center gap-1.5 text-center has-data-[slot=alert-dialog-media]:grid-rows-[auto_auto_1fr] has-data-[slot=alert-dialog-media]:gap-x-4 sm:group-data-[size=default]/alert-dialog-content:place-items-start sm:group-data-[size=default]/alert-dialog-content:text-left sm:group-data-[size=default]/alert-dialog-content:has-data-[slot=alert-dialog-media]:grid-rows-[auto_1fr]",t),...s})}function Fl({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:R("bg-muted/50 -mx-4 -mb-4 rounded-b-xl border-t p-4 flex flex-col-reverse gap-2 group-data-[size=sm]/alert-dialog-content:grid group-data-[size=sm]/alert-dialog-content:grid-cols-2 sm:flex-row sm:justify-end",t),...s})}function Wl({className:t,...s}){return e.jsx(Qu,{"data-slot":"alert-dialog-title",className:R("text-sm font-medium sm:group-data-[size=default]/alert-dialog-content:group-has-data-[slot=alert-dialog-media]/alert-dialog-content:col-start-2",t),...s})}function $l({className:t,...s}){return e.jsx(Yu,{"data-slot":"alert-dialog-description",className:R("text-muted-foreground *:[a]:hover:text-foreground text-sm text-balance md:text-pretty *:[a]:underline *:[a]:underline-offset-3",t),...s})}function Hl({className:t,...s}){return e.jsx(H,{"data-slot":"alert-dialog-action",className:R(t),...s})}function ql({className:t,variant:s="outline",size:n="default",...a}){return e.jsx(Xu,{"data-slot":"alert-dialog-cancel",className:R(t),render:e.jsx(H,{variant:s,size:n}),...a})}zl.__docgenInfo={description:"",methods:[],displayName:"AlertDialog"};Hl.__docgenInfo={description:"",methods:[],displayName:"AlertDialogAction"};ql.__docgenInfo={description:"",methods:[],displayName:"AlertDialogCancel",props:{variant:{defaultValue:{value:'"outline"',computed:!1},required:!1},size:{defaultValue:{value:'"default"',computed:!1},required:!1}}};Bl.__docgenInfo={description:"",methods:[],displayName:"AlertDialogContent",props:{size:{required:!1,tsType:{name:"union",raw:'"default" | "sm"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"sm"'}]},description:"",defaultValue:{value:'"default"',computed:!1}}}};$l.__docgenInfo={description:"",methods:[],displayName:"AlertDialogDescription"};Fl.__docgenInfo={description:"",methods:[],displayName:"AlertDialogFooter"};Ol.__docgenInfo={description:"",methods:[],displayName:"AlertDialogHeader"};Ll.__docgenInfo={description:"",methods:[],displayName:"AlertDialogOverlay"};Dl.__docgenInfo={description:"",methods:[],displayName:"AlertDialogPortal"};Wl.__docgenInfo={description:"",methods:[],displayName:"AlertDialogTitle"};function Ci(t){if(typeof t!="object"||t===null||Array.isArray(t))return null;const s=t.id;return typeof s=="string"&&s.trim()!==""?s:null}function zv(t){try{const s=JSON.parse(t),n=Array.isArray(s)?s.map(Ci):[Ci(s)];return Array.from(new Set(n.filter(a=>typeof a=="string")))}catch{return[]}}function Dv(t,s){switch(s){case"default":return t("chainConfig.source.default");case"subscription":return t("chainConfig.source.subscription");case"manual":return t("chainConfig.source.manual")}}function Lv(t){switch(t){case"default":return"bg-muted text-muted-foreground";case"subscription":return"bg-blue-500/10 text-blue-600";case"manual":return"bg-amber-500/10 text-amber-700"}}function Bv(t){const s=new Map;for(const n of t)s.set(n.id,n);return s}function Ul(){const{goBack:t}=se(),{t:s}=L("settings"),n=vt(),a=Es(),r=Qd(),o=Yd(),c=Xd(),i=Zd(),d=l.useMemo(()=>Bv(o),[o]),[u,m]=l.useState("default"),[f,h]=l.useState(""),[v,j]=l.useState(!1),[p,x]=l.useState([]),g=l.useRef(null),y=l.useRef(null),N=l.useRef(!1);l.useEffect(()=>{Ht.initialize()},[]),l.useEffect(()=>{r?.url&&m(r.url)},[r?.url]),l.useEffect(()=>{const w=N.current;if(N.current=c,!w||c)return;const T=g.current;if(T){if(g.current=null,i){n.show(i);return}n.show(s(`chainConfig.toast.${T}`)),T==="manualAdded"&&h("")}},[i,c,s,n]);const b=async()=>{g.current="subscriptionSaved",await Ht.setSubscriptionUrl(u)},A=async()=>{g.current="subscriptionRefreshed",await Ht.refreshSubscription()},S=async()=>{const w=zv(f),T=new Set(a.map(I=>I.id)),P=w.filter(I=>T.has(I));if(P.length>0){y.current=f,x(P),j(!0);return}g.current="manualAdded",await Ht.addManualConfig(f)},C=()=>{y.current=null,x([]),j(!1)},_=async()=>{const w=y.current;y.current=null,x([]),j(!1),w&&(g.current="manualAdded",await Ht.addManualConfig(w))};return e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:s("chainConfig.title"),onBack:t}),e.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[e.jsx(zl,{open:v,onOpenChange:w=>{w?j(w):C()},children:e.jsxs(Bl,{children:[e.jsxs(Ol,{children:[e.jsx(Wl,{children:s("chainConfig.manual.duplicate.title")}),e.jsx($l,{children:s("chainConfig.manual.duplicate.description")})]}),e.jsx("div",{className:"bg-muted/50 text-muted-foreground rounded-lg px-3 py-2 text-xs font-mono break-all",children:p.join(", ")}),e.jsxs(Fl,{children:[e.jsx(ql,{onClick:C,children:s("chainConfig.manual.duplicate.cancel")}),e.jsx(Hl,{onClick:_,disabled:c,children:s("chainConfig.manual.duplicate.replace")})]})]})}),i&&e.jsx("div",{className:"border-destructive/20 bg-destructive/5 text-destructive rounded-xl border px-4 py-3 text-sm",children:i}),e.jsx("div",{className:"bg-card overflow-hidden rounded-xl shadow-sm",children:e.jsxs("div",{className:"space-y-3 px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:s("chainConfig.subscription.title")}),e.jsx("div",{className:"text-muted-foreground text-xs",children:e.jsx(ao,{ns:"settings",i18nKey:"chainConfig.subscription.description",components:{code:e.jsx("code",{className:"font-mono"})}})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{type:"button",variant:"outline",size:"icon","data-testid":"refresh-subscription-button",onClick:A,disabled:c,"aria-label":s("chainConfig.subscription.refreshAriaLabel"),children:e.jsx(as,{className:R("size-4",c&&"animate-spin")})}),e.jsx(H,{type:"button","data-testid":"save-subscription-button",onClick:b,disabled:c,children:s("chainConfig.subscription.save")})]})]}),e.jsx(Re,{"data-testid":"subscription-url-input",value:u,onChange:w=>m(w.target.value),placeholder:s("chainConfig.subscription.placeholder"),disabled:c,autoCapitalize:"off",autoCorrect:"off",spellCheck:!1}),r?.lastUpdated&&e.jsx("div",{className:"text-muted-foreground text-xs",children:s("chainConfig.subscription.lastUpdated",{value:r.lastUpdated})})]})}),e.jsx("div",{className:"bg-card overflow-hidden rounded-xl shadow-sm","data-testid":"manual-add-section",children:e.jsxs("div",{className:"space-y-3 px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:s("chainConfig.manual.title")}),e.jsx("div",{className:"text-muted-foreground text-xs",children:s("chainConfig.manual.description")})]}),e.jsxs(H,{type:"button",variant:"outline","data-testid":"add-chain-button",onClick:S,disabled:c||f.trim()==="",children:[e.jsx(st,{className:"size-4"}),s("chainConfig.manual.add")]})]}),e.jsx("textarea",{"data-testid":"manual-config-textarea",value:f,onChange:w=>h(w.target.value),placeholder:s("chainConfig.manual.placeholder"),rows:5,disabled:c,className:R("bg-background w-full resize-none rounded-lg border px-3 py-3 text-sm","placeholder:text-muted-foreground","focus:ring-ring focus:ring-2 focus:ring-offset-2 focus:outline-none","disabled:cursor-not-allowed disabled:opacity-50"),autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})]})}),e.jsxs("div",{className:"bg-card overflow-hidden rounded-xl shadow-sm",children:[e.jsxs("div",{className:"px-4 py-3",children:[e.jsx("div",{className:"text-sm font-medium",children:s("chainConfig.list.title")}),e.jsx("div",{className:"text-muted-foreground text-xs",children:s("chainConfig.list.description")})]}),e.jsx("div",{className:"bg-border h-px"}),e.jsxs("div",{children:[a.map((w,T)=>{const P=d.get(w.id),I=P?.kind==="incompatible_major",k=Dv(s,w.source);return e.jsxs("div",{"data-testid":`chain-item-${w.id}`,children:[T>0&&e.jsx("div",{className:"bg-border mx-4 h-px"}),e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"truncate text-sm font-medium",children:w.name}),e.jsx("span",{className:R("rounded px-2 py-0.5 text-xs",Lv(w.source)),children:k})]}),e.jsxs("div",{className:"text-muted-foreground mt-1 flex flex-wrap gap-x-3 gap-y-1 text-xs",children:[e.jsx("span",{className:"font-mono",children:w.id}),e.jsxs("span",{children:["v",w.version]}),e.jsx("span",{children:w.chainKind}),e.jsx("span",{children:w.symbol})]}),P?.kind==="incompatible_major"&&e.jsxs("div",{className:"mt-2 flex items-start gap-2 rounded-lg bg-amber-500/10 px-3 py-2 text-xs text-amber-800",children:[e.jsx(Pe,{className:"mt-0.5 size-4 shrink-0"}),e.jsx("div",{children:s("chainConfig.warning.incompatibleMajor",{version:P.version,supportedMajor:P.supportedMajor})})]})]}),e.jsx(Ui,{checked:w.enabled,onCheckedChange:M=>{Ht.setChainEnabled(w.id,M)},disabled:c||I,className:R(I&&"cursor-not-allowed opacity-60")})]})})]},w.id)}),a.length===0&&e.jsx("div",{className:"text-muted-foreground px-4 py-8 text-center text-sm",children:s("chainConfig.list.empty")})]})]}),e.jsx("div",{className:"text-muted-foreground px-1 text-xs",children:s("chainConfig.hint")})]})]})}Ul.__docgenInfo={description:"",methods:[],displayName:"ChainConfigPage"};const Vl=()=>e.jsx(te,{children:e.jsx(Ul,{})});Vl.__docgenInfo={description:"",methods:[],displayName:"SettingsChainsActivity"};const Ov=3e4;function Jl(){const{t}=L("settings"),{goBack:s}=se(),{push:n}=G(),a=ke(),o=(a?.keyType??"mnemonic")==="arbitrary",[c,i]=l.useState(""),[d,u]=l.useState(!0),m=l.useRef(!1);l.useEffect(()=>{if(c.length>0&&!d){const v=setTimeout(()=>{u(!0)},Ov);return()=>clearTimeout(v)}},[c.length,d]),l.useEffect(()=>{const v=()=>{document.hidden&&c.length>0&&u(!0)};return document.addEventListener("visibilitychange",v),()=>{document.removeEventListener("visibilitychange",v)}},[c.length]),l.useEffect(()=>{m.current||!a?.encryptedMnemonic||(m.current=!0,jt(async v=>{try{const j=await Qt(a.encryptedMnemonic,v);return i(j),u(!1),!0}catch{return!1}}),n("WalletLockConfirmJob",{title:t("viewMnemonic.verifyTitle"),description:t(o?"viewMnemonic.verifyDescKey":"viewMnemonic.verifyDescMnemonic")}))},[a,n,t,o]);const f=()=>{u(v=>!v)};if(!a)return e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:t(o?"viewMnemonic.titleKey":"viewMnemonic.titleMnemonic"),onBack:s}),e.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:e.jsx("p",{className:"text-muted-foreground",children:t("viewMnemonic.noWallet")})})]});const h=o?[]:c.trim().split(/\s+/).filter(Boolean);return e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:t(o?"viewMnemonic.titleKey":"viewMnemonic.titleMnemonic"),onBack:s}),e.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[e.jsxs("div",{className:"flex gap-3 rounded-xl bg-amber-500/10 p-4",children:[e.jsx(Pe,{className:"size-5 shrink-0 text-amber-500"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsx("p",{className:"font-medium text-amber-700 dark:text-amber-400",children:t("viewMnemonic.securityTip")}),e.jsx("p",{className:"text-muted-foreground",children:t(o?"viewMnemonic.securityWarningKey":"viewMnemonic.securityWarningMnemonic")})]})]}),c.length>0&&e.jsxs("div",{className:"bg-card space-y-4 rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:o?t("viewMnemonic.charCount",{count:c.length}):t("viewMnemonic.wordCount",{count:h.length})}),e.jsx("button",{onClick:f,className:R("flex items-center gap-1.5 rounded-full px-3 py-1.5 text-xs font-medium","bg-muted hover:bg-muted/80 transition-colors"),children:d?e.jsxs(e.Fragment,{children:[e.jsx(Ta,{className:"size-3.5"}),t("viewMnemonic.show")]}):e.jsxs(e.Fragment,{children:[e.jsx(to,{className:"size-3.5"}),t("viewMnemonic.hide")]})})]}),o?e.jsx("textarea",{value:c,readOnly:!0,rows:4,"data-testid":"secret-textarea",className:R("bg-background w-full resize-none rounded-lg border px-3 py-3 font-mono text-sm","focus:outline-none",d?"[-webkit-text-security:disc]":"[-webkit-text-security:none]")}):e.jsx(Xi,{words:h,hidden:d}),!d&&e.jsx("p",{className:"text-muted-foreground text-center text-xs",children:t("viewMnemonic.autoHideNote")})]})]})]})}Jl.__docgenInfo={description:"",methods:[],displayName:"ViewMnemonicPage"};const Kl=()=>e.jsx(te,{children:e.jsx(Jl,{})});Kl.__docgenInfo={description:"",methods:[],displayName:"SettingsMnemonicActivity"};function Gl(){const{t}=L("settings"),{goBack:s}=se(),n=ke(),[a,r]=l.useState("verify"),[o,c]=l.useState("pattern"),[i,d]=l.useState([]),[u,m]=l.useState(!1),[f,h]=l.useState(!1),v=l.useRef(null),[j,p]=l.useState([]),[x,g]=l.useState(!1),[y,N]=l.useState(null),[b,A]=l.useState(null),S=l.useCallback(()=>{v.current&&(clearTimeout(v.current),v.current=null),m(!1)},[]),C=l.useCallback(I=>{u&&I.length>0&&S(),d(I)},[u,S]),_=l.useCallback(async I=>{if(n?.encryptedMnemonic){h(!0),S();try{const k=ht(I);await Pt(n.encryptedMnemonic,k)?(d(I),r("setup")):(m(!0),d([]),v.current=setTimeout(()=>{m(!1)},1500))}catch{m(!0),d([]),v.current=setTimeout(()=>{m(!1)},1500)}finally{h(!1)}}},[n,S]),w=l.useCallback((I,k)=>{p(I),g(k),N(null)},[]),T=l.useCallback(async()=>{if(n?.encryptedWalletLock){h(!0),N(null);try{if(!Bi(j)){N(t("changeWalletLock.invalidMnemonic")),h(!1);return}const I=j.join(" ");await me.verifyMnemonic(n.id,I)?(A(I),r("setup")):N(t("changeWalletLock.mnemonicVerifyFailed"))}catch{N(t("changeWalletLock.mnemonicVerifyFailed"))}finally{h(!1)}}},[n,j,t]),P=l.useCallback(async I=>{if(n)try{if(o==="mnemonic"&&b)await me.resetWalletLockByMnemonic(n.id,b,I);else{const k=ht(i);await me.updateWalletLock(n.id,k,I)}r("success"),setTimeout(()=>{s()},2e3)}catch{r("verify"),d([]),A(null)}},[n,o,b,i,s]);return n?a==="success"?e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:t("changeWalletLock.title")}),e.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 p-4",children:[e.jsx("div",{className:"bg-green-500/10 flex size-16 items-center justify-center rounded-full",children:e.jsx(fe,{className:"text-green-500 size-8"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:t("changeWalletLock.success")}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:t("changeWalletLock.returning")})]})]})]}):a==="verify"?e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:t("changeWalletLock.title"),onBack:s}),e.jsx("div",{className:"flex-1 p-4",children:o==="pattern"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:t("changeWalletLock.verifyTitle")}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:t("changeWalletLock.verifyDesc")})]}),e.jsx(Ft,{value:i,onChange:C,onComplete:_,minPoints:4,error:u,disabled:f,"data-testid":"verify-pattern-lock"}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("button",{type:"button",onClick:()=>c("mnemonic"),className:"text-primary hover:text-primary/80 text-sm underline","data-testid":"switch-to-mnemonic",children:t("changeWalletLock.forgotPattern")})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:t("changeWalletLock.mnemonicVerifyTitle")}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:t("changeWalletLock.mnemonicVerifyDesc")})]}),e.jsx(gm,{wordCount:12,onChange:w}),y&&e.jsx("p",{className:"text-destructive mt-4 text-center text-sm",children:y}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx(H,{onClick:T,disabled:!x||f,className:"w-full","data-testid":"verify-mnemonic-button",children:t(f?"changeWalletLock.verifying":"changeWalletLock.verifyMnemonic")}),e.jsx("button",{type:"button",onClick:()=>{c("pattern"),p([]),N(null)},className:"text-muted-foreground hover:text-foreground w-full text-center text-sm","data-testid":"switch-to-pattern",children:t("changeWalletLock.usePattern")})]})]})})]}):e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:t("changeWalletLock.title"),onBack:()=>{r("verify"),d([])}}),e.jsx("div",{className:"flex-1 p-4",children:e.jsx(Pa,{onComplete:P,minPoints:4})})]}):e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:t("changeWalletLock.title"),onBack:s}),e.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:e.jsx("p",{className:"text-muted-foreground",children:t("changeWalletLock.noWallet")})})]})}Gl.__docgenInfo={description:"",methods:[],displayName:"ChangeWalletLockPage"};const Ql=()=>e.jsx(te,{children:e.jsx(Gl,{})});Ql.__docgenInfo={description:"",methods:[],displayName:"SettingsWalletLockActivity"};function Fv({targetChain:t,address:s,filter:n,setFilter:a,walletId:r,decimals:o}){const{navigate:c,goBack:i}=se(),d=Ms(),{t:u}=L(["transaction","common"]),m=$t(),{data:f,isLoading:h,isFetching:v,refetch:j}=m.transactionHistory.useState({address:s,limit:50},{enabled:!!s}),{transactions:p,deleteTransaction:x,retryTransaction:g}=Li(r),y=l.useMemo(()=>{if(!f)return[];const w=n.period;if(!w||w==="all")return f;const T=w==="7d"?7:w==="30d"?30:90,P=Date.now()-T*24*60*60*1e3;return f.filter(I=>I.timestamp>=P)},[f,n.period]),N=l.useMemo(()=>[{value:"all",label:u("history.filter.allTime")},{value:"7d",label:u("history.filter.days7")},{value:"30d",label:u("history.filter.days30")},{value:"90d",label:u("history.filter.days90")}],[u]),b=l.useMemo(()=>[{value:"all",label:u("history.filter.allChains")},...d.map(w=>({value:w.id,label:w.name}))],[u,d]),A=l.useCallback(w=>{if(!w.id)return;const T=f?.find(I=>I.hash===w.hash),P=T?ts.superjson.stringify(T):void 0;c({to:`/transaction/${w.id}`,search:{txData:P}})},[c,f]),S=l.useCallback(w=>{a(T=>({...T,chain:w}))},[a]),C=l.useCallback(w=>{a(T=>({...T,period:w}))},[a]),_=l.useCallback(async()=>{await j?.()},[j]);return e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:u("transaction:history.title"),onBack:i,rightAction:e.jsx("button",{onClick:_,disabled:v,className:R("rounded-full p-2 transition-colors","hover:bg-muted active:bg-muted/80",v&&"animate-spin"),"aria-label":u("common:a11y.refresh"),children:e.jsx(as,{className:"size-5"})})}),e.jsxs("div",{className:"bg-card border-b px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fo,{className:"text-muted-foreground size-4"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:u("history.filter.chainLabel")}),e.jsxs(ws,{value:n.chain||"all",onValueChange:w=>S(w),children:[e.jsx(Cs,{size:"sm","aria-label":u("common:a11y.selectChain"),children:e.jsx(ks,{children:b.find(w=>w.value===(n.chain||"all"))?.label})}),e.jsx(Ss,{children:b.map(w=>e.jsx(Dt,{value:w.value,children:w.label},w.value))})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:u("history.filter.periodLabel")}),e.jsxs(ws,{value:n.period||"all",onValueChange:w=>C(w),children:[e.jsx(Cs,{size:"sm","aria-label":u("common:a11y.selectPeriod"),children:e.jsx(ks,{children:N.find(w=>w.value===(n.period||"all"))?.label})}),e.jsx(Ss,{children:N.map(w=>e.jsx(Dt,{value:w.value,children:w.label},w.value))})]})]})]}),e.jsx("p",{className:"text-muted-foreground mt-2 text-xs",children:u("transaction:history.totalRecords",{count:y.length})})]}),e.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[p.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-muted-foreground text-xs font-medium uppercase tracking-wider px-1",children:u("pendingTx.title")}),e.jsx("div",{className:"space-y-1",children:p.map(w=>{const T=Sc(w,o);return e.jsx(Fi,{transaction:T,onClick:()=>c({to:`/pending-tx/${w.id}`}),onRetry:w.status==="failed"?()=>g(w):void 0,onDelete:()=>x(w)},w.id)})})]}),e.jsx(ro,{transactions:Ic(y??[],t),loading:h,onTransactionClick:A,emptyTitle:u("transaction:history.emptyTitle"),emptyDescription:u("transaction:history.emptyDesc"),showChainIcon:!0})]})]})}function Yl({initialChain:t}){const{goBack:s}=se(),n=ke(),a=ze(),{t:r}=L(["transaction","common"]),o=tt(),[c,i]=l.useState({chain:t??a,period:"all"}),d=c.chain==="all"?a:c.chain,u=o.snapshot?qe.getChainById(o,d??""):void 0,f=n?.chainAddresses?.find(h=>h.chain===d)?.address??"";return n?e.jsx(bt,{chainId:d,fallback:e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:r("transaction:history.title"),onBack:s}),e.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:e.jsx("p",{className:"text-muted-foreground",children:"Chain not supported"})})]}),children:e.jsx(Fv,{targetChain:d,address:f,filter:c,setFilter:i,walletId:n.id,decimals:u?.decimals??8})}):e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:r("transaction:history.title"),onBack:s}),e.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:e.jsx("p",{className:"text-muted-foreground",children:r("transaction:history.noWallet")})})]})}Yl.__docgenInfo={description:"",methods:[],displayName:"TransactionHistoryPage",props:{initialChain:{required:!1,tsType:{name:"union",raw:"ChainType | 'all' | undefined",elements:[{name:"ChainType"},{name:"literal",value:"'all'"},{name:"undefined"}]},description:""}}};const Xl=()=>{const t=Wf();return e.jsx(te,{children:e.jsx(Yl,{initialChain:t.chain})})};Xl.__docgenInfo={description:"",methods:[],displayName:"HistoryActivity"};const Wv={transfer:"send",swap:"swap",exchange:"exchange",approve:"approve",signature:"signature",stake:"stake",unstake:"unstake",mint:"mint",burn:"destroy",gift:"gift",grab:"grab",trust:"trust",signFor:"signFor",emigrate:"emigrate",immigrate:"immigrate",issueAsset:"issueAsset",increaseAsset:"increaseAsset",destroyAsset:"destroy",issueEntity:"issueEntity",destroyEntity:"destroyEntity",locationName:"locationName",dapp:"dapp",certificate:"certificate",mark:"mark",contract:"interaction",unknown:"other",revoke:"approve",claim:"receive"};function $v(t,s){const n=t.action,a=t.direction,r=n==="transfer"?a==="in"?"receive":"send":Wv[n]??"other",o=t.assets[0],c=o.assetType==="nft"?"1":o.value,i=o.assetType==="nft"?0:o.decimals,d=o.assetType==="nft"?"NFT":o.symbol,u=a==="in"?t.from:t.to;return{hash:t.hash,from:t.from,to:t.to,address:u,timestamp:t.timestamp,status:t.status,type:r,direction:a,amount:ne.fromRaw(c,i,d),symbol:d,chain:s,assets:t.assets,fee:t.fee?ne.fromRaw(t.fee.value,t.fee.decimals,t.fee.symbol):void 0,contract:t.contract,blockNumber:t.blockNumber}}function ki(t){return!t||t.assetType==="nft"?null:{value:t.value,decimals:t.decimals,symbol:t.symbol}}function Hv(t){if(!t)return null;const[s,n]=t.split("--");return!s||!n?null:{chainId:s,hash:n}}function qv({hash:t,chainId:s,txData:n,onBack:a}){const{t:r}=L(["transaction","common"]),o=tt(),c=$t(),i=l.useMemo(()=>n?ts.superjson.parse(n):null,[n]),{data:d,isLoading:u,error:m}=c.transaction.useState({txHash:t},{enabled:!!t}),f=d??i,h=l.useMemo(()=>f?$v(f,s):null,[f,s]),v=l.useMemo(()=>{const D=h?.chain??s;return D?qe.getChainById(o,D):null},[o,s,h?.chain]),j=l.useMemo(()=>{const D=v?.explorer?.queryTx;return!D||!t?null:D.replace(":signature",t)},[v?.explorer?.queryTx,t]),p=l.useCallback(()=>{j&&window.open(j,"_blank","noopener,noreferrer")},[j]),[x,g]=l.useState(!1),y=l.useCallback(async()=>{j&&(await ba.write({text:j}),g(!0),setTimeout(()=>g(!1),2e3))},[j]);if(u&&!i)return e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:r("detail.title"),onBack:a}),e.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[e.jsx(Dn,{className:"h-48"}),e.jsx(Dn,{className:"h-64"}),e.jsx(Dn,{className:"h-32"})]})]});if(m instanceof ju)return e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:r("detail.title"),onBack:a}),e.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[e.jsx("div",{className:"bg-card flex items-center justify-center rounded-xl p-6 shadow-sm",children:e.jsx("p",{className:"text-muted-foreground",children:r("detail.invalidData")})}),t&&e.jsxs("div",{className:"bg-card space-y-3 rounded-xl p-4 shadow-sm",children:[e.jsx("h3",{className:"text-muted-foreground text-sm font-medium",children:r("detail.hash")}),e.jsx(ir,{text:t,className:"text-muted-foreground text-xs"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:p,disabled:!j,className:R("flex flex-1 items-center justify-center gap-2 rounded-lg py-2.5","bg-background border transition-colors","hover:bg-muted active:bg-muted/80","disabled:opacity-50 disabled:cursor-not-allowed"),children:[e.jsx(ea,{className:"size-4"}),e.jsx("span",{className:"text-sm",children:r("detail.openInExplorer")})]}),e.jsx("button",{onClick:y,disabled:!j,className:R("flex flex-1 items-center justify-center gap-2 rounded-lg py-2.5","bg-background border transition-colors","hover:bg-muted active:bg-muted/80","disabled:opacity-50 disabled:cursor-not-allowed"),children:x?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"text-green-500 size-4"}),e.jsx("span",{className:"text-sm",children:r("detail.copied")})]}):e.jsxs(e.Fragment,{children:[e.jsx(As,{className:"size-4"}),e.jsx("span",{className:"text-sm",children:r("detail.share")})]})})]})]})]})]});if(!h)return e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:r("detail.title"),onBack:a}),e.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:e.jsx("p",{className:"text-muted-foreground",children:r("detail.notFound")})})]});const N=h.type,b=Cu(N),A=b.Icon,S=h.type==="swap"?h.assets?.[0]:void 0,C=h.type==="swap"?h.assets?.[1]:void 0,_=ki(S),w=ki(C),T=h.contract?.address||h.to,P=h.contract?.method,I=h.contract?.methodId,k=P?r(`method.${P}`,{defaultValue:P}):null,M=_?ne.fromRaw(_.value,_.decimals,_.symbol):null,E=w?ne.fromRaw(w.value,w.decimals,w.symbol):null;return e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:r("detail.title"),onBack:a}),e.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[e.jsxs("div",{className:"bg-card flex flex-col items-center gap-3 rounded-xl p-6 shadow-sm",children:[e.jsx("div",{className:R("flex size-16 items-center justify-center rounded-full",b.bg),children:e.jsx(A,{className:R("size-8",b.color)})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:r(`type.${h.type}`,{defaultValue:h.type})}),h.type==="swap"&&M&&E?e.jsxs("div",{className:R("flex items-center justify-center gap-2",b.color),children:[e.jsx(Ct,{value:M.toNumber(),symbol:M.symbol,decimals:M.decimals,sign:"never",color:"default",weight:"normal",size:"lg"}),e.jsx("span",{className:"text-lg",children:""}),e.jsx(Ct,{value:E.toNumber(),symbol:E.symbol,decimals:E.decimals,sign:"never",color:"default",weight:"normal",size:"lg"})]}):e.jsx(Ct,{value:h.type==="send"?-Math.abs(h.amount.toNumber()):h.amount.toNumber(),symbol:h.symbol,sign:b.amountSign,color:"default",weight:"normal",size:"xl",className:b.color})]}),e.jsx(vm,{status:ku(h.status).badgeStatus,label:r(`transaction:status.${h.status}`)})]}),e.jsxs("div",{className:"bg-card space-y-3 rounded-xl p-4 shadow-sm",children:[e.jsx("h3",{className:"text-muted-foreground text-sm font-medium",children:r("detail.info")}),h.from&&h.to?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:r("detail.fromAddress")}),e.jsx(At,{address:h.from,copyable:!0,className:"text-sm"})]}),e.jsx("div",{className:"bg-border h-px"}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:r("detail.toAddress")}),e.jsx(At,{address:h.to,copyable:!0,className:"text-sm"})]})]}):e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:h.type==="send"?r("detail.toAddress"):r("detail.fromAddress")}),e.jsx(At,{address:h.address,copyable:!0,className:"text-sm"})]}),e.jsx("div",{className:"bg-border h-px"}),h.type==="swap"&&(_||w)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:r("detail.swapFrom")}),e.jsx("span",{className:"text-sm font-medium",children:_?e.jsx(Ct,{value:ne.fromRaw(_.value,_.decimals,_.symbol).toNumber(),symbol:_.symbol,decimals:_.decimals,sign:"never",color:"default",size:"sm"}):"-"})]}),e.jsx("div",{className:"bg-border h-px"}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:r("detail.swapTo")}),e.jsx("span",{className:"text-sm font-medium",children:w?e.jsx(Ct,{value:ne.fromRaw(w.value,w.decimals,w.symbol).toNumber(),symbol:w.symbol,decimals:w.decimals,sign:"never",color:"default",size:"sm"}):"-"})]}),e.jsx("div",{className:"bg-border h-px"})]}),(h.type==="approve"||h.type==="interaction"||h.type==="swap")&&T&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:r("detail.contractAddress")}),e.jsx(At,{address:T,copyable:!0,className:"text-sm"})]}),(h.type==="approve"||h.type==="interaction")&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-border h-px"}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:r("detail.method")}),e.jsx("span",{className:"text-sm font-medium font-mono",children:k||I||r("common:unknown")})]}),h.type==="approve"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-border h-px"}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:r("detail.spender")}),e.jsx("span",{className:"text-sm font-medium",children:r("common:unknown")})]}),e.jsx("div",{className:"bg-border h-px"}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:r("detail.allowance")}),e.jsx("span",{className:"text-sm font-medium",children:r("common:unknown")})]})]})]}),e.jsx("div",{className:"bg-border h-px"})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:r("detail.time")}),e.jsx(Pu,{value:h.timestamp,format:"datetime",className:"text-sm"})]}),e.jsx("div",{className:"bg-border h-px"}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:r("detail.network")}),e.jsx("span",{className:"text-sm font-medium capitalize",children:h.chain})]}),h.fee&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-border h-px"}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:r("detail.fee")}),e.jsx(ka,{amount:h.fee?.toNumber?.()??0,symbol:h.fee?.symbol??"",className:"text-sm"})]})]}),h.blockNumber&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-border h-px"}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:r("detail.blockHeight")}),e.jsx("span",{className:"text-sm font-medium",children:h.blockNumber.toLocaleString()})]})]}),h.confirmations!==void 0&&h.confirmations>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-border h-px"}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:r("detail.confirmations")}),e.jsx("span",{className:"text-sm font-medium",children:h.confirmations})]})]})]}),t&&e.jsxs("div",{className:"bg-card space-y-3 rounded-xl p-4 shadow-sm",children:[e.jsx("h3",{className:"text-muted-foreground text-sm font-medium",children:r("detail.hash")}),e.jsx(ir,{text:t,className:"text-muted-foreground text-xs"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:p,disabled:!j,className:R("flex flex-1 items-center justify-center gap-2 rounded-lg py-2.5","bg-background border transition-colors","hover:bg-muted active:bg-muted/80","disabled:opacity-50 disabled:cursor-not-allowed"),children:[e.jsx(ea,{className:"size-4"}),e.jsx("span",{className:"text-sm",children:r("detail.openInExplorer")})]}),e.jsx("button",{onClick:y,disabled:!j,className:R("flex flex-1 items-center justify-center gap-2 rounded-lg py-2.5","bg-background border transition-colors","hover:bg-muted active:bg-muted/80","disabled:opacity-50 disabled:cursor-not-allowed"),children:x?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"text-green-500 size-4"}),e.jsx("span",{className:"text-sm",children:r("detail.copied")})]}):e.jsxs(e.Fragment,{children:[e.jsx(As,{className:"size-4"}),e.jsx("span",{className:"text-sm",children:r("detail.share")})]})})]})]})]})]})}function Zl(){const{t}=L(["transaction","common"]),{goBack:s}=se(),{txId:n,txData:a}=oe(),r=ke(),o=l.useMemo(()=>Hv(n),[n]),c=l.useCallback(()=>{s()},[s]);return r?o?e.jsx(bt,{chainId:o.chainId,fallback:e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:t("detail.title"),onBack:c}),e.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:e.jsx("p",{className:"text-muted-foreground",children:"Chain not supported"})})]}),children:e.jsx(qv,{hash:o.hash,chainId:o.chainId,txData:a,onBack:c})}):e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:t("detail.title"),onBack:c}),e.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:e.jsx("p",{className:"text-muted-foreground",children:t("detail.notFound")})})]}):e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:t("detail.title"),onBack:c}),e.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:e.jsx("p",{className:"text-muted-foreground",children:t("history.noWallet")})})]})}Zl.__docgenInfo={description:"",methods:[],displayName:"TransactionDetailPage"};const ed=({params:t})=>e.jsx(te,{children:e.jsx(re,{params:t,children:e.jsx(Zl,{})})});ed.__docgenInfo={description:"",methods:[],displayName:"TransactionDetailActivity"};const Uv=150;function td({onScan:t,className:s}){const{t:n}=L("scanner"),{t:a}=L("common"),{navigate:r,goBack:o}=se(),{push:c}=G(),i=go(),d=l.useRef(null),u=l.useRef(null),m=l.useRef(null),f=l.useRef(null),h=l.useRef(!1),v=l.useRef(null),j=l.useRef(t),[p,x]=l.useState("idle"),[g,y]=l.useState(null),[N,b]=l.useState(!1);l.useEffect(()=>{j.current=t},[t]);const A=l.useCallback(I=>{if(I===v.current)return;v.current=I,x("success"),h.current=!1,"vibrate"in navigator&&navigator.vibrate(100);const k=Gi(I);if(j.current)j.current(I,k);else switch(k.type){case"address":case"payment":r({to:"/send",search:{address:k.address,chain:k.chain,amount:k.type==="payment"?k.amount:void 0}});break;case"deeplink":r({to:k.path,search:k.params});break;case"contact":c("ContactAddConfirmJob",{name:k.name,addresses:JSON.stringify(k.addresses),memo:k.memo,avatar:k.avatar});break;case"unknown":r({to:"/send",search:{address:k.content}});break}},[r,c]),S=l.useCallback(()=>{if(h.current)return;h.current=!0,u.current||(u.current=document.createElement("canvas"));const I=async()=>{if(!(!h.current||!d.current||!f.current)){try{const k=await f.current.scanFromVideo(d.current,u.current??void 0);if(k){A(k.content);return}}catch{}h.current&&setTimeout(I,Uv)}};I()},[A]),C=l.useCallback(()=>{h.current=!1,m.current&&(m.current.getTracks().forEach(I=>I.stop()),m.current=null)},[]),_=l.useCallback(async()=>{C(),x("requesting"),v.current=null;try{if(!await i.checkPermission()&&!await i.requestPermission()){x("denied");return}const k=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});m.current=k,d.current&&(d.current.srcObject=k,await d.current.play(),S()),x("scanning")}catch(I){x("error"),y(I instanceof Error?I.message:"Camera initialization failed")}},[i,S,C]);l.useEffect(()=>(f.current=Qi({useWorker:!0}),_(),()=>{C(),f.current?.destroy(),f.current=null}),[]);const w=l.useCallback(()=>{C(),o()},[C,o]),T=l.useCallback(()=>{const I=document.createElement("input");I.type="file",I.accept="image/*",I.onchange=async k=>{const M=k.target.files?.[0];if(M)try{const E=new Image,D=URL.createObjectURL(M);E.onload=async()=>{URL.revokeObjectURL(D);const z=document.createElement("canvas");z.width=E.width,z.height=E.height;const F=z.getContext("2d");if(!F||!f.current){y(n("noQrFound")),x("error");return}F.drawImage(E,0,0);const B=await f.current.scanFromCanvas(z);B?A(B.content):(y(n("noQrFound")),x("error"))},E.onerror=()=>{URL.revokeObjectURL(D),y(n("noQrFound")),x("error")},E.src=D}catch{y(n("noQrFound")),x("error")}},I.click()},[A,n]),P=l.useCallback(async()=>{if(m.current){const I=m.current.getVideoTracks()[0];if(I)try{await I.applyConstraints({advanced:[{torch:!N}]}),b(!N)}catch{}}},[N]);return e.jsxs("div",{className:R("relative flex h-screen flex-col bg-black",s),children:[e.jsxs("div",{className:"absolute top-0 right-0 left-0 z-10 flex items-center justify-between p-4",children:[e.jsx(H,{variant:"ghost",size:"icon","data-testid":"back-button",onClick:w,className:"text-white","aria-label":a("a11y.back"),children:e.jsx(Bs,{className:"size-6"})}),e.jsx("h1",{"data-testid":"page-title",className:"text-lg font-medium text-white",children:n("title")}),e.jsx(H,{variant:"ghost",size:"icon",onClick:P,className:R("text-white",N&&"text-yellow-400"),"aria-label":n(N?"flashOff":"flashOn"),children:e.jsx(uo,{className:"size-6"})})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("video",{ref:d,className:R("absolute inset-0 size-full object-cover",p!=="scanning"&&p!=="success"&&"invisible"),playsInline:!0,muted:!0}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"relative size-64",children:[e.jsx("div",{className:R("absolute top-0 left-0 size-8 border-t-4 border-l-4",p==="success"?"border-green-500":"border-primary")}),e.jsx("div",{className:R("absolute top-0 right-0 size-8 border-t-4 border-r-4",p==="success"?"border-green-500":"border-primary")}),e.jsx("div",{className:R("absolute bottom-0 left-0 size-8 border-b-4 border-l-4",p==="success"?"border-green-500":"border-primary")}),e.jsx("div",{className:R("absolute right-0 bottom-0 size-8 border-r-4 border-b-4",p==="success"?"border-green-500":"border-primary")}),p==="scanning"&&e.jsx("div",{className:"animate-scan bg-primary absolute right-2 left-2 h-0.5"})]})}),e.jsxs("div",{className:"absolute inset-x-0 bottom-32 text-center",children:[p==="idle"&&e.jsx("p",{className:"text-white/80",children:n("initializing")}),p==="requesting"&&e.jsx("p",{className:"text-white/80",children:n("requestingPermission")}),p==="scanning"&&e.jsx("p",{className:"text-white/80",children:n("scanPrompt")}),p==="success"&&e.jsx("div",{className:"space-y-2",children:e.jsx("p",{className:"text-green-400",children:n("scanSuccess")})}),p==="denied"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-red-400",children:n("permissionDenied")}),e.jsx(H,{variant:"outline","data-testid":"retry-button",onClick:_,children:n("retry")})]}),p==="error"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-red-400",children:g||n("error")}),e.jsx(H,{variant:"outline","data-testid":"retry-button",onClick:_,children:n("retry")})]})]})]}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 flex justify-center gap-8 pb-8",children:[e.jsxs(H,{variant:"ghost",size:"lg","data-testid":"gallery-button",onClick:T,className:"flex flex-col items-center text-white",children:[e.jsx(oo,{className:"mb-1 size-6"}),e.jsx("span",{className:"text-xs",children:n("gallery")})]}),e.jsx("div",{className:"flex size-16 items-center justify-center rounded-full bg-white/20",children:e.jsx($m,{className:"size-8 text-white"})}),e.jsx("div",{className:"w-16"})," "]})]})}td.__docgenInfo={description:"",methods:[],displayName:"ScannerPage",props:{onScan:{required:!1,tsType:{name:"union",raw:"((content: string, parsed: ParsedQRContent) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"Callback when QR code is scanned"},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Custom class name"}}};const sd=()=>e.jsx(te,{children:e.jsx(td,{})});sd.__docgenInfo={description:"",methods:[],displayName:"ScannerActivity"};const Vv=300*1e3,cn={ethereum:"Ethereum",bitcoin:"Bitcoin",tron:"Tron",binance:"BSC",bsc:"BSC",bfmeta:"BFMeta",ccchain:"CCChain",pmchain:"PMChain",bfchainv2:"BFChain V2",btgmeta:"BTGMeta",biwmeta:"BIWMeta",ethmeta:"ETHMeta",malibu:"Malibu",ccc:"CCChain"};function nd(t){if(t)return t}function Jv(t){return t.map(s=>({id:s.id,name:s.name,address:s.address,balance:""}))}function Kv(t,s){const n=new Map;for(const a of t)for(const r of a.chainAddresses){const o=nd(r.chain);if(!o)continue;const c=n.get(o)??[];c.push({address:r.address,isDefault:a.id===s}),n.set(o,c)}return Array.from(n.entries()).map(([a,r])=>({chain:a,name:cn[a]??a,addresses:r.map(o=>({address:o.address,isDefault:o.isDefault}))}))}function Si(t){const s=t?.trim().toLowerCase();return s==="true"||s==="1"}function ad(){const{t}=L("authorize"),{t:s}=L("common"),{navigate:n,goBack:a}=se(),{push:r}=G(),o=vt(),{id:c,type:i,chainName:d,signMessage:u,getMain:m}=oe(),f=Ne(we,O=>O.currentWalletId),h=Ne(we,O=>O.wallets),v=Ne(we,_s.getCurrentWallet),[j,p]=l.useState(null),[x,g]=l.useState(null),[y,N]=l.useState(!1),b=l.useMemo(()=>Jv(h),[h]),A=v?.id??h[0]?.id,[S,C]=l.useState(A),_=l.useMemo(()=>nd(d),[d]),[w,T]=l.useState(_);l.useEffect(()=>T(_),[_]);const[P,I]=l.useState(void 0),[k,M]=l.useState(()=>new Set(h.map(O=>O.id))),[E,D]=l.useState(!1);l.useEffect(()=>{C(A)},[A]),l.useEffect(()=>{M(new Set(h.map(O=>O.id)))},[h]);const z=l.useMemo(()=>{const O=["viewAddress","viewPublicKey"];return u?.trim()&&O.push("signMessage"),Si(m)&&O.push("getMain"),O},[m,u]),F=l.useMemo(()=>new Ef(Zt,c),[c]),B=l.useMemo(()=>!!u?.trim(),[u]),Q=l.useMemo(()=>Si(m),[m]),Y=B||Q;l.useEffect(()=>{let O=!1;async function de(){g(null);try{const ee=await Zt.getCallerAppInfo(c);if(O)return;p(ee)}catch{if(O)return;g(t("error.authFailed"))}}return de(),()=>{O=!0}},[c,t]),l.useEffect(()=>{const O=window.setTimeout(()=>{(async()=>(await F.reject("timeout"),o.show({message:t("error.timeout"),position:"center"}),n({to:"/"})))()},Vv);return()=>{window.clearTimeout(O)}},[F,n,t,o]);const X=l.useMemo(()=>S?h.find(O=>O.id===S)??null:null,[S,h]),Z=l.useMemo(()=>Kv(h,f),[h,f]),W=l.useMemo(()=>v?v.chainAddresses.map(O=>O.chain):[],[v]),J=l.useMemo(()=>{if(!(!v||!w))return v.chainAddresses.find(O=>O.chain===w)?.address},[v,w]);l.useEffect(()=>{i==="network"&&(w||T(Z[0]?.chain))},[Z,w,i]);const V=l.useMemo(()=>h.length===0?!1:i==="main"?!!X:i==="network"?w?(Z.find(O=>O.chain===w)?.addresses.length??0)>0:!1:k.size>0,[Z,w,X,k.size,i,h.length]),ce=l.useCallback(()=>{a()},[a]),pe=l.useCallback(async()=>{if(!y){N(!0);try{await F.reject("rejected"),n({to:"/"})}finally{N(!1)}}},[F,y,n]),is=l.useCallback(async()=>{if(!(!V||y)){if(Y){jt(async O=>{N(!0);try{const de=u?.trim()??"";let ee=[],ue=[];if(i==="main"){if(!X)return!1;ee=F.handleMainAddresses(X),ue=[X]}else if(i==="network"){if(!w)return!1;ee=F.handleNetworkAddresses(h,w),ue=h}else{const De=h.filter(he=>k.has(he.id));ee=F.handleAllAddresses(De),ue=De}return ee=await F.applySensitiveOptions(ee,ue,{password:O,signMessage:de,getMain:Q}),await F.approve(ee),n({to:"/"}),!0}catch{return!1}finally{N(!1)}}),r("WalletLockConfirmJob",{title:t("passwordConfirm.title")});return}N(!0);try{let O=[];if(i==="main"){if(!X)return;O=F.handleMainAddresses(X)}else if(i==="network"){if(!w)return;O=F.handleNetworkAddresses(h,w)}else{const de=h.filter(ee=>k.has(ee.id));O=F.handleAllAddresses(de)}await F.approve(O),n({to:"/"})}finally{N(!1)}}},[F,V,y,n,Y,Q,r,w,X,k,u,t,i,h]);return i==="network"&&d&&!_?e.jsxs("div",{className:"flex min-h-screen flex-col bg-muted/30",children:[e.jsx(U,{title:t("title.address"),onBack:ce}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"rounded-xl bg-card p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-destructive",children:t("error.unknownChain")}),e.jsx("div",{className:"mt-4",children:e.jsx(H,{onClick:()=>n({to:"/"}),className:"w-full",children:s("back")})})]})})]}):x?e.jsxs("div",{className:"flex min-h-screen flex-col bg-muted/30",children:[e.jsx(U,{title:t("title.address"),onBack:ce}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"rounded-xl bg-card p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-destructive",children:x}),e.jsx("div",{className:"mt-4",children:e.jsx(H,{onClick:()=>n({to:"/"}),className:"w-full",children:s("back")})})]})})]}):e.jsxs("div",{className:"flex min-h-screen flex-col bg-muted/30",children:[e.jsx(U,{title:t("title.address"),onBack:ce}),e.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[j&&e.jsx(io,{appInfo:j}),e.jsx("div",{className:"px-1 text-sm text-foreground",children:t("address.shareWith")}),e.jsx(ym,{permissions:z}),e.jsx("div",{className:"rounded-xl bg-card p-4 shadow-sm",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:[i==="main"&&t("address.scope.main"),i==="network"&&t("address.scope.network",{chainName:cn[w??""]??w??""}),i==="all"&&t("address.scope.all")]})}),e.jsxs("div",{className:"rounded-xl bg-card p-4 shadow-sm",children:[i==="main"&&e.jsx(bm,{wallets:b,...S?{selectedId:S}:{},onSelect:O=>C(O.id)}),i==="network"&&v&&w&&e.jsx("div",{className:"aspect-[1.6/1] w-full",children:e.jsx(Di,{wallet:v,chain:w,chainName:cn[w]??w,address:J,priority:"low",onOpenChainSelector:_?void 0:()=>D(!0)})}),i==="all"&&e.jsxs("div",{className:"space-y-2",children:[h.length===0&&e.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:t("address.noWallets")}),h.map(O=>{const de=k.has(O.id);return e.jsxs("button",{type:"button",onClick:()=>{M(ee=>{const ue=new Set(ee);return ue.has(O.id)?ue.delete(O.id):ue.add(O.id),ue})},className:R("flex w-full items-center justify-between rounded-lg border px-3 py-2 text-left transition-colors","hover:bg-muted/50",de?"border-primary bg-primary/5":"border-border bg-background"),"aria-pressed":de,children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-sm font-medium",children:O.name}),e.jsx("div",{className:"truncate font-mono text-xs text-muted-foreground",children:O.address})]}),e.jsx("div",{className:R("flex size-5 items-center justify-center rounded border",de?"border-primary bg-primary text-primary-foreground":"border-border bg-background"),"aria-hidden":"true",children:de?"":""})]},O.id)})]})]})]}),e.jsx("div",{className:"sticky bottom-0 border-t border-border bg-background p-4 safe-area-inset-bottom",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(H,{type:"button",variant:"outline",className:"flex-1",onClick:pe,disabled:y,children:t("button.reject")}),e.jsx(H,{type:"button",className:"flex-1",onClick:is,disabled:!V||y,children:t("button.approve")})]})}),E&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50",onClick:()=>D(!1),children:e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-background rounded-t-2xl",onClick:O=>O.stopPropagation(),children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"h-1 w-10 rounded-full bg-muted"})}),e.jsx("div",{className:"border-b border-border px-4 pb-4",children:e.jsx("h2",{className:"text-center text-lg font-semibold",children:t("address.selectNetwork")})}),e.jsx("div",{className:"max-h-[60vh] space-y-2 overflow-y-auto p-4",children:W.map(O=>{const de=v?.chainAddresses.find(ee=>ee.chain===O);return e.jsxs("button",{onClick:()=>{T(O),D(!1)},className:R("flex w-full items-center gap-3 rounded-xl p-4 transition-colors",O===w?"bg-primary/10 ring-1 ring-primary":"bg-muted/50 hover:bg-muted"),children:[e.jsx(pt,{chain:O,size:"md"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"font-medium",children:cn[O]??O}),e.jsx("div",{className:"font-mono text-xs text-muted-foreground",children:de?.address?Gv(de.address):"---"})]}),O===w&&e.jsx(fe,{className:"size-5 text-primary"})]},O)})}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})]})}function Gv(t,s=10,n=8){return t.length<=s+n+3?t:`${t.slice(0,s)}...${t.slice(-n)}`}ad.__docgenInfo={description:"",methods:[],displayName:"AddressAuthPage"};const rd=({params:t})=>e.jsx(te,{children:e.jsx(re,{params:t,children:e.jsx(ad,{})})});rd.__docgenInfo={description:"",methods:[],displayName:"AuthorizeAddressActivity"};const Qv=300*1e3;function Ai(t){return typeof t=="object"&&t!==null}function Fe(t,s){const n=t[s];if(typeof n=="string")return n;if(typeof n=="number"&&Number.isFinite(n))return String(n)}function Yv(t,s,n){const a=Fe(t,s)?.trim();return a?{ok:!0,value:a}:{ok:!1,error:`signaturedata missing field: ${n}`}}function wt(t,s){for(const n of s){const a=Fe(t,n.key)?.trim();if(a)return{ok:!0,value:a}}return{ok:!1,error:`signaturedata missing field: ${s.map(n=>n.label).join(" / ")}`}}function Xv(t){if(typeof t=="string"){const s=t.trim().toLowerCase();return s==="message"?{ok:!0,value:"message"}:s==="transfer"?{ok:!0,value:"transfer"}:s==="destroy"||s==="destory"?{ok:!0,value:"destory"}:{ok:!1,error:`Unsupported signature type: ${t}`}}return typeof t=="number"&&Number.isInteger(t)?t===0?{ok:!0,value:"message"}:t===1?{ok:!0,value:"transfer"}:t===7?{ok:!0,value:"destory"}:{ok:!1,error:`Unsupported signature type: ${t}`}:{ok:!1,error:"signaturedata.type must be string or number"}}function Zv(t){if(t===void 0||t.trim()==="")return{ok:!1,error:"Missing signaturedata parameter"};let s;try{s=JSON.parse(t)}catch{return{ok:!1,error:"signaturedata is not valid JSON"}}if(!Array.isArray(s))return{ok:!1,error:"signaturedata must be a JSON array"};if(s.length===0)return{ok:!1,error:"signaturedata cannot be an empty array"};const n=s[0];if(!Ai(n))return{ok:!1,error:"signaturedata[0] must be an object"};const a=Xv(n.type);if(!a.ok)return a;const r=wt(n,[{key:"chainName",label:"chainName"},{key:"chain",label:"chain"}]);if(!r.ok)return r;const o=r.value;if(a.value==="message"){const c=wt(n,[{key:"senderAddress",label:"senderAddress"},{key:"from",label:"from"}]);if(!c.ok)return c;const i=Yv(n,"message","message");return i.ok?{ok:!0,item:{type:"message",payload:{chainName:o,senderAddress:c.value,message:i.value}}}:i}if(a.value==="transfer"){const c=wt(n,[{key:"senderAddress",label:"senderAddress"},{key:"from",label:"from"}]);if(!c.ok)return c;const i=wt(n,[{key:"receiveAddress",label:"receiveAddress"},{key:"to",label:"to"}]);if(!i.ok)return i;const d=wt(n,[{key:"balance",label:"balance"},{key:"amount",label:"amount"}]);if(!d.ok)return d;const u=Fe(n,"fee")?.trim(),m=Fe(n,"assetType")?.trim();let f;const h=n.contractInfo;if(Ai(h)){const v=Fe(h,"assetType")?.trim(),j=h.decimals,p=Fe(h,"contractAddress")?.trim(),x=typeof j=="number"&&Number.isFinite(j)?j:typeof j=="string"&&j.trim()!==""?Number(j):void 0;v&&p&&typeof x=="number"&&Number.isFinite(x)&&(f={assetType:v,contractAddress:p,decimals:x})}return{ok:!0,item:{type:"transfer",payload:{chainName:o,senderAddress:c.value,receiveAddress:i.value,balance:d.value,...u?{fee:u}:{},...m?{assetType:m}:{},...f?{contractInfo:f}:{}}}}}{const c=wt(n,[{key:"senderAddress",label:"senderAddress"},{key:"from",label:"from"}]);if(!c.ok)return c;const i=wt(n,[{key:"destoryAmount",label:"destoryAmount"},{key:"amount",label:"amount"}]);if(!i.ok)return i;const d=Fe(n,"destoryAddress")?.trim()??Fe(n,"to")?.trim()??c.value,u=Fe(n,"fee")?.trim(),m=Fe(n,"assetType")?.trim();return{ok:!0,item:{type:"destory",payload:{chainName:o,senderAddress:c.value,destoryAddress:d,destoryAmount:i.value,...u?{fee:u}:{},...m?{assetType:m}:{}}}}}}function ey(t){return typeof t=="object"&&t!==null&&"senderAddress"in t&&"receiveAddress"in t&&"balance"in t}function ty(t){return typeof t=="object"&&t!==null&&"senderAddress"in t&&"message"in t&&!("receiveAddress"in t)}function sy(t){return typeof t=="object"&&t!==null&&"senderAddress"in t&&"destoryAddress"in t&&"destoryAmount"in t}function Ii(t){return t.contractInfo?.assetType?t.contractInfo.assetType.toUpperCase():t.assetType?t.assetType.toUpperCase():{ethereum:"ETH",bitcoin:"BTC",tron:"TRX",binance:"BNB",bsc:"BNB"}[t.chainName?.toLowerCase()??""]??"TOKEN"}function ny(t,s,n){const a=parseFloat(t)||0,r=parseFloat(s)||0,o=parseFloat(n??"0")||0,c=r+o;return{sufficient:a>=c,required:c.toString()}}function id(){const{t}=L("authorize"),{t:s}=L("common"),{navigate:n,goBack:a}=se(),{push:r}=G(),o=vt(),{id:c,signaturedata:i}=oe(),d=Ne(we,_s.getCurrentWallet),[u,m]=l.useState(null),[f,h]=l.useState(null),[v,j]=l.useState(null),[p,x]=l.useState(!1),g=l.useMemo(()=>new Ra(Zt,c),[c]);l.useEffect(()=>{let P=!1;async function I(){j(null);try{const k=Zv(i);if(!k.ok){j(k.error);return}const M=await Zt.getCallerAppInfo(c);if(P)return;m(M);const E={eventId:c,type:k.item.type,payload:k.item.payload,appName:M.appName,appHome:M.origin,appLogo:M.appIcon};h(E)}catch{if(P)return;j(t("error.authFailed"))}}return I(),()=>{P=!0}},[c,i,t]),l.useEffect(()=>{const P=window.setTimeout(()=>{(async()=>(await g.reject("timeout"),o.show({message:t("error.timeout"),position:"center"}),n({to:"/"})))()},Qv);return()=>{window.clearTimeout(P)}},[g,n,t,o]);const y=l.useMemo(()=>!f||!ey(f.payload)?null:f.payload,[f]),N=l.useMemo(()=>!f||!ty(f.payload)?null:f.payload,[f]),b=l.useMemo(()=>!f||!sy(f.payload)?null:f.payload,[f]),A=l.useMemo(()=>{if(!d)return{sufficient:!0,required:"0",walletBalance:"0"};const P=y?{chainName:y.chainName,amount:y.balance,fee:y.fee}:b?{chainName:b.chainName,amount:b.destoryAmount,fee:b.fee}:null;if(!P)return{sufficient:!0,required:"0",walletBalance:"0"};const k=d.chainAddresses.find(E=>E.chain.toLowerCase()===P.chainName?.toLowerCase())?"1.0":"0";return{...ny(k,P.amount,P.fee),walletBalance:k}},[d,b,y]),S=l.useMemo(()=>y?Ii(y):b?Ii(b):"TOKEN",[b,y]),C=l.useCallback(()=>{a()},[a]),_=l.useCallback(async()=>{if(!p){x(!0);try{await g.reject(A.sufficient?"rejected":"insufficient_balance"),n({to:"/"})}finally{x(!1)}}},[g,A.sufficient,p,n]),w=l.useCallback(()=>{A.sufficient&&(p||(jt(async P=>{x(!0);try{const I=d?.encryptedMnemonic;if(!I||!f)return!1;let k="";if(f.type==="message"){if(!N)return!1;const M=await g.handleMessageSign(N,I,P);k=typeof M=="string"?M:M.signature??""}else if(f.type==="transfer"){if(!y)return!1;const M=await g.handleTransferSign(y,I,P);k=typeof M=="string"?M:M.signature??""}else if(f.type==="destory"){if(!b)return!1;const M=await g.handleDestroySign(b,I,P);k=typeof M=="string"?M:M.signature??""}else return!1;return await g.approve(k),n({to:"/"}),!0}catch{return!1}finally{x(!1)}}),r("WalletLockConfirmJob",{title:t("button.confirm")})))},[g,A.sufficient,d?.encryptedMnemonic,b,p,N,n,r,f,t,y]);if(v)return e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:t("title.signature"),onBack:C}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"bg-card rounded-xl p-4 shadow-sm",children:[e.jsx("p",{className:"text-destructive text-sm",children:v}),e.jsx("div",{className:"mt-4",children:e.jsx(H,{onClick:()=>n({to:"/"}),className:"w-full",children:s("back")})})]})})]});const T=f?.type==="message"?t("signature.type.message"):f?.type==="destory"?t("signature.type.destroy"):t("title.signature");return e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:T,onBack:C}),e.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[u&&e.jsx(io,{appInfo:u}),e.jsx("div",{className:"text-foreground px-1 text-sm",children:t("signature.reviewTransaction")}),y&&e.jsxs(e.Fragment,{children:[e.jsx(yr,{from:y.senderAddress,to:y.receiveAddress,amount:`${y.balance} ${S}`,...y.fee?{fee:`${y.fee} ${S}`}:{},chainId:y.chainName}),!A.sufficient&&e.jsx(br,{balance:A.walletBalance,required:A.required,symbol:S})]}),N&&e.jsxs("div",{className:"bg-card rounded-xl p-4 shadow-sm",children:[e.jsx("div",{className:"text-muted-foreground mb-2 text-sm",children:t("signature.messageToSign")}),e.jsx("div",{className:R("bg-muted/50 rounded-lg p-3","font-mono text-sm break-all whitespace-pre-wrap","max-h-48 overflow-y-auto"),children:N.message})]}),b&&e.jsxs(e.Fragment,{children:[e.jsx(yr,{from:b.senderAddress,to:b.destoryAddress,amount:`${b.destoryAmount} ${S}`,...b.fee?{fee:`${b.fee} ${S}`}:{},chainId:b.chainName}),!A.sufficient&&e.jsx(br,{balance:A.walletBalance,required:A.required,symbol:S})]}),f&&e.jsx("div",{className:"bg-card rounded-xl p-4 shadow-sm",children:e.jsxs("div",{className:"text-muted-foreground text-sm",children:[f.type==="transfer"&&t("signature.type.transfer"),f.type==="message"&&t("signature.type.message"),f.type==="destory"&&t("signature.type.destroy")]})})]}),e.jsx("div",{className:"border-border bg-background safe-area-inset-bottom sticky bottom-0 border-t p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(H,{type:"button",variant:"outline",className:"flex-1",onClick:_,disabled:p,children:t("button.reject")}),e.jsx(H,{type:"button",className:"flex-1",onClick:w,disabled:p||!A.sufficient,children:t("button.confirm")})]})})]})}id.__docgenInfo={description:"",methods:[],displayName:"SignatureAuthPage"};const od=({params:t})=>e.jsx(te,{children:e.jsx(re,{params:t,children:e.jsx(id,{})})});od.__docgenInfo={description:"",methods:[],displayName:"AuthorizeSignatureActivity"};function cd({walletName:t,onEnterWallet:s,className:n}){const{t:a}=L("onboarding");return e.jsxs("div",{"data-testid":"import-success-step",className:R("flex min-h-screen flex-col items-center justify-center px-6 py-8",n),children:[e.jsx("div",{className:"mb-6 flex size-20 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/30",children:e.jsx(rs,{className:"size-10 text-green-600 dark:text-green-400"})}),e.jsx("h1",{"data-testid":"success-message",className:"mb-2 text-2xl font-bold",children:a("import.success.title")}),e.jsx("p",{className:"text-muted-foreground mb-8 text-center",children:e.jsx(ao,{i18nKey:"import.success.description",ns:"onboarding",values:{name:t},components:{bold:e.jsx("span",{className:"text-foreground font-medium"})}})}),e.jsx("div",{className:"w-full max-w-xs",children:e.jsxs("button",{type:"button","data-testid":"enter-wallet-button",onClick:s,className:R("flex w-full items-center justify-center gap-2 rounded-full py-3 font-medium transition-colors","bg-primary hover:bg-primary/90 text-primary-foreground"),children:[e.jsx("span",{children:a("import.success.enterWallet")}),e.jsx(Ae,{className:"size-5"})]})})]})}cd.__docgenInfo={description:"Success screen shown after wallet import",methods:[],displayName:"ImportWalletSuccess",props:{walletName:{required:!0,tsType:{name:"string"},description:"Wallet name"},onEnterWallet:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Callback when user chooses to enter wallet"},className:{required:!1,tsType:{name:"string"},description:"Additional class name"}}};ge.t.bind(ge);function ay(t){if(!Bi(t))throw new Error("Invalid mnemonic");return vu(t.join(" "))}function ry(t){return new Set(t.map(s=>s.address.toLowerCase()))}const iy=ge.t.bind(ge),Yn={isDuplicate:!1,type:"none"};function oy(t){const[s,n]=l.useState(Yn),[a,r]=l.useState(!1),[o,c]=l.useState(null),i=l.useCallback(async u=>{r(!0),c(null);try{const m=ay(u),f=ry(m),h=await t.getAllAddresses();for(const x of h)if(f.has(x.address.toLowerCase())){const g={isDuplicate:!0,type:"address",matchedWallet:{id:x.walletId,name:x.walletName,importType:"mnemonic",matchedAddress:x.address}};return n(g),g}const j=(await t.getAllMainWallets()).filter(x=>x.importType==="privateKey");for(const x of j)for(const g of x.addresses)if(f.has(g.address.toLowerCase())){const y={isDuplicate:!0,type:"privateKey",matchedWallet:{id:x.id,name:x.name,importType:"privateKey",matchedAddress:g.address}};return n(y),y}const p={isDuplicate:!1,type:"none"};return n(p),p}catch(m){const f=m instanceof Error?m.message:iy("error:duplicate.detectionFailed");return c(f),Yn}finally{r(!1)}},[t]),d=l.useCallback(()=>{n(Yn),c(null)},[]);return{result:s,isChecking:a,error:o,check:i,reset:d}}const cy={getAllAddresses:async()=>[],getAllMainWallets:async()=>[],findWalletByAddress:async()=>null};function ld(){const{navigate:t,goBack:s}=se(),{push:n}=G(),{t:a}=L(["onboarding","common","wallet"]),r=Es(),o=tt().snapshot,c=eu(),i=Lt(),[d,u]=l.useState("keyType"),[m,f]=l.useState("mnemonic"),[h,v]=l.useState(!1),[j,p]=l.useState([]),[x,g]=l.useState(""),[y,N]=l.useState(null),[b,A]=l.useState([]),[S,C]=l.useState(!1),[_,w]=l.useState(""),[T,P]=l.useState(null),[I,k]=l.useState([]),[M,E]=l.useState(!1);l.useEffect(()=>{!M&&r.length>0&&(k(Zi(r)),E(!0))},[r,M]);const D=oy(cy),z=(()=>{switch(d){case"keyType":return 1;case"mnemonic":case"arbitrary":return 2;case"collision":return 2;case"pattern":return 3;case"chains":return 4;case"theme":return 5;case"success":return 5;default:return 1}})(),F=l.useCallback(()=>{switch(d){case"keyType":s();break;case"mnemonic":case"arbitrary":u("keyType"),D.reset();break;case"collision":u("mnemonic"),D.reset();break;case"pattern":u(m==="arbitrary"?"arbitrary":"mnemonic");break;case"chains":u("pattern");break;case"theme":u("chains");break}},[d,s,D,m]),B=l.useCallback(()=>{u("pattern")},[]),Q=l.useCallback(O=>{w(O),u("chains")},[]),Y=l.useCallback(()=>{if(m==="mnemonic"){u("mnemonic");return}if(h){u("arbitrary");return}Lg(()=>{v(!0),u("arbitrary")}),n("SecurityWarningJob",{})},[m,h,n]),X=l.useCallback(async O=>{p(O.mnemonic);const de=await D.check(O.mnemonic);if(de.isDuplicate){if(de.type==="address")return;if(de.type==="privateKey"){u("collision");return}}B()},[D,B]),Z=l.useCallback(async()=>{B()},[B]),W=l.useCallback(()=>{u("mnemonic"),D.reset()},[D]),J=l.useCallback(async(O,de)=>{C(!0);try{const ee=O.join(" "),De=(await eo({mnemonic:ee,selectedChainIds:I,chainConfigs:r})).map(({chainId:Fd,address:Wd,publicKey:$d})=>({chain:Fd,address:Wd,publicKey:$d??"",tokens:[]})),he=De[0];if(!he)throw new Error("No chain addresses derived");const os=Zn(he.address),Od=await me.createWallet({name:a("onboarding:create.generatedNamePattern",{word:mn(i),suffix:a("onboarding:create.walletSuffix")}),keyType:"mnemonic",address:he.address,chain:he.chain,chainAddresses:De,themeHue:os},ee,de,os);P(Od.id),u("theme")}catch{}finally{C(!1)}},[r,I,a]),V=l.useCallback(async O=>{const de=x.trim();if(de&&b.length!==0){C(!0);try{const ee=b[0];if(!ee)throw new Error("No enabled bioforest chains");const ue=Zn(ee.address),De=b.map(os=>({chain:os.chainId,address:os.address,publicKey:"",tokens:[]})),he=await me.createWallet({name:a("onboarding:create.generatedNamePattern",{word:mn(i),suffix:a("onboarding:create.walletSuffix")}),keyType:"arbitrary",address:ee.address,chain:ee.chainId,chainAddresses:De,themeHue:ue},de,O,ue);P(he.id),u("theme")}catch{}finally{C(!1)}}},[b,x,a]),ce=l.useCallback(()=>{t({to:"/",replace:!0})},[t]),pe=l.useCallback(async()=>{if(!S){if(m==="arbitrary"){await V(_);return}j.length!==0&&await J(j,_)}},[V,J,S,m,j,_]),is=l.useCallback(()=>{t({to:"/"})},[t]);return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[d==="keyType"&&e.jsxs(e.Fragment,{children:[e.jsx(U,{title:a("onboarding:keyType.title"),onBack:F}),e.jsx("div",{className:"px-4 pt-4",children:e.jsx(it,{total:5,current:z})}),e.jsxs("div",{"data-testid":"key-type-step",className:"flex-1 space-y-6 p-4",children:[e.jsx(jm,{value:m,onChange:O=>{f(O),O==="mnemonic"&&(g(""),A([]))}}),e.jsx(H,{type:"button","data-testid":"continue-button",onClick:Y,className:"w-full",children:a("common:continue")})]})]}),d==="mnemonic"&&e.jsxs(e.Fragment,{children:[e.jsx(U,{title:a("onboarding:recover.title"),onBack:F}),e.jsx("div",{className:"px-4 pt-4",children:e.jsx(it,{total:5,current:z})}),e.jsx("div",{"data-testid":"mnemonic-step",className:"flex-1 p-4",children:e.jsx(iu,{onSubmit:X,isSubmitting:D.isChecking})})]}),d==="arbitrary"&&e.jsxs(e.Fragment,{children:[e.jsx(U,{title:a("onboarding:keyType.arbitrary"),onBack:F}),e.jsx("div",{className:"px-4 pt-4",children:e.jsx(it,{total:5,current:z})}),e.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[e.jsx(Nm,{value:x,onChange:O=>{N(null),g(O)},disabled:S}),y&&e.jsxs("div",{className:"bg-destructive/10 text-destructive flex items-start gap-2 rounded-lg px-3 py-2 text-sm",children:[e.jsx(xt,{className:"mt-0.5 size-4 shrink-0"}),e.jsx("span",{children:y})]}),e.jsx(wm,{secret:x,enabledBioforestChainConfigs:o?c:void 0,onDerived:A}),e.jsxs(H,{type:"button",className:"w-full",disabled:S||x.trim()!==""&&b.length===0,onClick:()=>{if(!x.trim()){N(a("onboarding:arbitraryKey.required"));return}B()},children:[S&&e.jsx(be,{className:"size-4 animate-spin"}),a("common:continue")]})]})]}),d==="collision"&&e.jsxs(e.Fragment,{children:[e.jsx(U,{title:a("onboarding:recover.addressConflict"),onBack:F}),e.jsx("div",{className:"px-4 pt-4",children:e.jsx(it,{total:5,current:z})}),e.jsx("div",{className:"flex-1 p-4",children:e.jsx(Cm,{result:D.result,onConfirm:Z,onCancel:W,isLoading:S})})]}),d==="pattern"&&e.jsxs(e.Fragment,{children:[e.jsx(U,{title:a("onboarding:recover.setWalletLock"),onBack:F}),e.jsx("div",{className:"px-4 pt-4",children:e.jsx(it,{total:5,current:z})}),e.jsx("div",{"data-testid":"pattern-step",className:"flex-1 p-4",children:e.jsx(Pa,{onComplete:Q,minPoints:4})})]}),d==="chains"&&e.jsxs(e.Fragment,{children:[e.jsx(U,{title:a("onboarding:chainSelector.title"),onBack:F}),e.jsx("div",{className:"px-4 pt-4",children:e.jsx(it,{total:5,current:z})}),e.jsx("div",{"data-testid":"chains-step",className:"flex-1 p-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Rs,{icon:e.jsx(rs,{className:"size-full"}),variant:"success",size:"lg",className:"mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold",children:a("onboarding:chainSelector.title")}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:a("onboarding:chainSelector.subtitle")})]}),r.length===0?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(Ce,{})}):e.jsx(_a,{"data-testid":"chain-selector",chains:r,selectedChains:I,onSelectionChange:k}),e.jsx(Me,{variant:"mint",className:"w-full","data-testid":"chains-continue-button",disabled:I.length===0,onClick:pe,children:a("common:next")})]})})]}),d==="theme"&&T&&e.jsxs(e.Fragment,{children:[e.jsx(U,{title:a("onboarding:create.themeTitle")}),e.jsx("div",{className:"px-4 pt-4",children:e.jsx(it,{total:5,current:z})}),e.jsx("div",{"data-testid":"theme-step",className:"flex-1 p-4",children:e.jsx(zn,{mode:"edit-only",walletId:T,onEditOnlyComplete:ce})})]}),d==="success"&&e.jsx(cd,{walletName:a("wallet:defaultName"),onEnterWallet:is})]})}ld.__docgenInfo={description:`Onboarding recover wallet page
Implements wallet recovery with duplicate detection per openspec/changes/add-wallet-recover-duplicate-guards`,methods:[],displayName:"OnboardingRecoverPage"};const dd=()=>e.jsx(te,{children:e.jsx(ld,{})});dd.__docgenInfo={description:"",methods:[],displayName:"OnboardingRecoverActivity"};const Ys={symbol:"USDT",balance:1234.56,fiatValue:"1234.56"},ly=[{id:"1",type:"send",status:"confirmed",amount:ne.fromFormatted("100",6,"USDT"),symbol:"USDT",address:"0xabcd...1234",timestamp:new Date(Date.now()-36e5)},{id:"2",type:"receive",status:"confirmed",amount:ne.fromFormatted("500",6,"USDT"),symbol:"USDT",address:"0x1234...abcd",timestamp:new Date(Date.now()-864e5)}];function ud(){const{t}=L("token"),{navigate:s,goBack:n}=se();return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx(U,{title:Ys.symbol,onBack:n}),e.jsxs("div",{className:"flex-1 space-y-6 p-4",children:[e.jsx("div",{className:"text-center",children:e.jsx(pm,{value:Ys.balance,symbol:Ys.symbol,fiatValue:Ys.fiatValue,size:"lg"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Me,{variant:"mint",className:"flex-1",onClick:()=>s({to:"/send",search:{address:void 0,chain:void 0,amount:void 0}}),children:[e.jsx(Su,{className:"mr-2 size-4"}),t("detail.send")]}),e.jsxs(Me,{variant:"blue",className:"flex-1",onClick:()=>s({to:"/receive"}),children:[e.jsx(_n,{className:"mr-2 size-4"}),t("detail.receive")]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-lg font-semibold",children:t("detail.transactionHistory")}),e.jsx(ro,{transactions:ly,emptyTitle:t("detail.noTransactions"),emptyDescription:t("detail.noTransactionsDesc")})]})]})]})}ud.__docgenInfo={description:"",methods:[],displayName:"TokenDetailPage"};const md=({params:t})=>e.jsx(te,{children:e.jsx(re,{params:t,children:e.jsx(ud,{})})});md.__docgenInfo={description:"",methods:[],displayName:"TokenDetailActivity"};function fd(){const{t}=L("common"),{goBack:s}=se(),{push:n}=G(),r=Ne(bs).contacts,o=Ne(we,_s.getCurrentWallet),[c,i]=l.useState(""),d=l.useRef(null),u=l.useMemo(()=>c.trim()?pa.searchContacts(bs.state,c.trim()):r,[r,c]),m=l.useCallback(()=>{s()},[s]),f=l.useCallback(()=>{n("ContactEditJob",{})},[n]),h=l.useCallback(p=>{n("ContactEditJob",{contactId:p.id})},[n]),v=l.useCallback(p=>{n("ContactShareJob",{name:p.name,addresses:JSON.stringify(p.addresses.map(x=>({address:x.address,label:x.label}))),memo:p.memo,avatar:p.avatar})},[n]),j=l.useCallback(p=>{d.current=p,o?.encryptedMnemonic?(jt(async x=>{try{return await Pt(o.encryptedMnemonic,x)?(js.deleteContact(p.id),d.current=null,!0):!1}catch{return!1}}),n("WalletLockConfirmJob",{title:t("addressBook.deleteTitle"),description:t("addressBook.deleteConfirm",{name:p.name})})):(js.deleteContact(p.id),d.current=null)},[o?.encryptedMnemonic,n,t]);return e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:t("addressBook.title"),onBack:m,rightAction:e.jsx("button",{onClick:f,className:R("rounded-full p-2 transition-colors","hover:bg-muted active:bg-muted/80"),"aria-label":t("a11y.addContact"),"data-testid":"address-book-add-button",children:e.jsx(st,{className:"size-5"})})}),e.jsx("div",{className:"px-4 py-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ds,{className:"text-muted-foreground absolute top-1/2 left-3 size-4 -translate-y-1/2"}),e.jsx("input",{type:"text",value:c,onChange:p=>i(p.target.value),placeholder:t("addressBook.searchPlaceholder"),className:R("border-border bg-background w-full rounded-xl border py-2.5 pr-4 pl-10","focus:ring-primary focus:ring-2 focus:outline-none")})]})}),e.jsx("div",{className:"flex-1 p-4",children:u.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-12",children:[e.jsx(qu,{className:"text-muted-foreground/50 size-12"}),e.jsx("p",{className:"text-muted-foreground",children:t(c?"addressBook.noResults":"addressBook.noContacts")}),!c&&e.jsx("button",{onClick:f,className:R("bg-primary rounded-full px-6 py-2.5 text-sm font-medium text-primary-foreground","hover:bg-primary/90 active:bg-primary/80"),children:t("contact.addTitle")})]}):e.jsx("div",{className:"space-y-2",children:u.map(p=>e.jsx(dy,{contact:p,onShare:()=>v(p),onEdit:()=>h(p),onDelete:()=>j(p)},p.id))})})]})}function dy({contact:t,onEdit:s,onDelete:n,onShare:a}){const{t:r}=L("common"),[o,c]=l.useState(!1);return e.jsx("div",{className:R("bg-card rounded-xl p-4 shadow-sm","transition-colors"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ns,{src:t.avatar||(t.addresses[0]?.address?_t(t.addresses[0].address):void 0),size:40}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"truncate font-medium",children:t.name}),t.addresses.length>0&&e.jsxs("p",{className:"text-muted-foreground truncate font-mono text-xs",children:[t.addresses[0]?.address,t.addresses.length>1&&` (+${t.addresses.length-1})`]}),t.memo&&e.jsx("p",{className:"text-muted-foreground mt-1 truncate text-xs",children:t.memo})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>c(!o),className:R("rounded-full p-2 transition-colors","hover:bg-muted active:bg-muted/80"),"aria-label":r("a11y.moreActions"),children:e.jsx(km,{className:"text-muted-foreground size-4"})}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)}),e.jsxs("div",{className:"bg-popover border-border absolute top-full right-0 z-20 mt-1 w-32 rounded-lg border py-1 shadow-lg",children:[e.jsx("button",{onClick:()=>{c(!1),a()},className:"hover:bg-muted w-full px-4 py-2 text-left text-sm transition-colors",children:r("addressBook.shareContact")}),e.jsx("button",{onClick:()=>{c(!1),s()},className:"hover:bg-muted w-full px-4 py-2 text-left text-sm transition-colors",children:r("addressBook.edit")}),e.jsx("button",{onClick:()=>{c(!1),n()},className:"text-destructive hover:bg-destructive/10 w-full px-4 py-2 text-left text-sm transition-colors",children:r("addressBook.delete")})]})]})]})]})})}fd.__docgenInfo={description:"",methods:[],displayName:"AddressBookPage"};const pd=()=>e.jsx(te,{children:e.jsx(fd,{})});pd.__docgenInfo={description:"",methods:[],displayName:"AddressBookActivity"};const uy={ethereum:"Ethereum",bitcoin:"Bitcoin",tron:"Tron",binance:"BSC",bfmeta:"BFMeta",ccchain:"CCChain",pmchain:"PMChain",bfchainv2:"BFChain V2",btgmeta:"BTGMeta",biwmeta:"BIWMeta",ethmeta:"ETHMeta",malibu:"Malibu"};function hd({open:t,onOpenChange:s}){const{t:n}=L("common"),a=gt(),r=ga(),o=Jd(),c=Kd(),i=l.useCallback(d=>{!o.includes(d)&&!c||Vt.toggleWalletSelection(d)},[o,c]);return e.jsx(lt,{open:t,onOpenChange:s,children:e.jsxs(dt,{side:"bottom",className:"rounded-t-2xl",children:[e.jsx(ut,{className:"pb-4",children:e.jsx(mt,{children:n("myCard.selectWallets")})}),e.jsxs("div",{className:"max-h-[50vh] overflow-y-auto pb-[env(safe-area-inset-bottom)]",children:[a.map(d=>{const u=r[d.id]||d.chain,m=d.chainAddresses.find(v=>v.chain===u),f=o.includes(d.id),h=!f&&!c;return e.jsxs("button",{type:"button",onClick:()=>i(d.id),disabled:h,className:R("flex w-full items-center gap-3 rounded-lg p-3 text-left transition-colors",f&&"bg-primary/10",!h&&"hover:bg-muted",h&&"cursor-not-allowed opacity-50"),children:[e.jsx(pt,{chain:u,size:"md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium",children:d.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:uy[u]||u}),e.jsxs("span",{className:"truncate font-mono text-xs",children:[m?.address.slice(0,8),"...",m?.address.slice(-6)]})]})]}),f&&e.jsx("div",{className:"flex size-6 items-center justify-center rounded-full bg-primary",children:e.jsx(fe,{className:"size-4 text-primary-foreground"})})]},d.id)}),a.length===0&&e.jsx("div",{className:"py-8 text-center text-muted-foreground",children:n("noAssets")})]}),e.jsx("p",{className:"py-4 text-center text-xs text-muted-foreground",children:n("myCard.maxWallets",{max:3})})]})})}hd.__docgenInfo={description:"",methods:[],displayName:"WalletPickerSheet",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""}}};function my(t,s){const[n,a]=l.useState(!1),{filename:r,shareTitle:o,shareText:c}=s,i=l.useCallback(async()=>{const u=t.current;if(!(!u||n)){a(!0);try{const{snapdom:m}=await ft(async()=>{const{snapdom:f}=await import("./snapdom-CO8q8LPW.js").then(h=>h.s);return{snapdom:f}},__vite__mapDeps([0,1]),import.meta.url);await m.download(u,{type:"png",filename:`${r}.png`,scale:2,quality:1})}catch(m){console.error("Download failed:",m)}finally{a(!1)}}},[t,r,n]),d=l.useCallback(async()=>{const u=t.current;if(!(!u||!navigator.share||n)){a(!0);try{const{snapdom:m}=await ft(async()=>{const{snapdom:j}=await import("./snapdom-CO8q8LPW.js").then(p=>p.s);return{snapdom:j}},__vite__mapDeps([0,1]),import.meta.url),h=await(await m(u,{scale:2})).toBlob(),v=new File([h],`${r}.png`,{type:"image/png"});await navigator.share({title:o,text:c,files:[v]})}catch{}finally{a(!1)}}},[t,r,o,c,n]);return{isProcessing:n,download:i,share:d,canShare:typeof navigator<"u"&&"share"in navigator}}const fy={ethereum:"ETH",bitcoin:"BTC",tron:"TRX",binance:"BSC",bfmeta:"BFMeta",ccchain:"CCChain",pmchain:"PMChain",bfchainv2:"BFChain V2",btgmeta:"BTGMeta",biwmeta:"BIWMeta",ethmeta:"ETHMeta",malibu:"Malibu"};function xd(){const{t}=L(["common","settings"]),{goBack:s}=se(),n=l.useRef(null),a=ha(),r=gt(),o=ga(),[c,i]=l.useState(!1),[d,u]=l.useState(a.username),[m,f]=l.useState(!1);l.useEffect(()=>{if(!a.avatar&&r.length>0){const C=r[0]?.chainAddresses[0]?.address;C&&Vt.initializeDefaultAvatar(C)}},[a.avatar,r]),l.useEffect(()=>{if(a.selectedWalletIds.length===0&&r.length>0){const C=r[0];C&&Vt.toggleWalletSelection(C.id)}},[a.selectedWalletIds,r]);const h=l.useMemo(()=>a.selectedWalletIds.map(C=>r.find(_=>_.id===C)).filter(C=>!!C).map(C=>{const _=o[C.id]||C.chain,w=C.chainAddresses.find(T=>T.chain===_);return{wallet:C,chain:_,address:w?.address}}).filter(C=>C.address),[a.selectedWalletIds,r,o]),v=l.useMemo(()=>h.map(({wallet:C,address:_})=>({address:_,label:C.name})),[h]),j=l.useMemo(()=>v.length===0?"":Sa({name:a.username||t("myCard.defaultName"),addresses:v,avatar:a.avatar}),[a.username,a.avatar,v,t]),p=l.useCallback(()=>{Vt.randomizeAvatar()},[]),x=l.useCallback(()=>{u(a.username),i(!0)},[a.username]),g=l.useCallback(()=>{Vt.setUsername(d),i(!1)},[d]),y=l.useCallback(C=>{C.key==="Enter"?g():C.key==="Escape"&&i(!1)},[g]),{isProcessing:N,download:b,share:A}=my(n,{filename:`my-card-${Date.now()}`,shareTitle:t("myCard.title"),shareText:a.username||t("myCard.defaultName")}),S=a.username||t("myCard.defaultName");return e.jsxs("div",{className:"flex min-h-screen flex-col bg-background",children:[e.jsx(U,{title:t("myCard.title"),onBack:s}),e.jsxs("div",{className:"flex flex-1 flex-col items-center p-6",children:[e.jsxs("button",{type:"button",onClick:p,className:"group relative mb-4 cursor-pointer transition-transform hover:scale-105","aria-label":t("myCard.changeAvatar"),children:[e.jsx(ns,{src:a.avatar,size:80}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-full bg-black/50 opacity-0 transition-opacity group-hover:opacity-100",children:e.jsx("span",{className:"text-xs text-white",children:t("myCard.changeAvatar")})})]}),c?e.jsx("div",{className:"mb-6 flex items-center gap-2",children:e.jsx(Re,{value:d,onChange:C=>u(C.target.value),onBlur:g,onKeyDown:y,placeholder:t("myCard.usernamePlaceholder"),className:"w-48 text-center",autoFocus:!0})}):e.jsxs("button",{type:"button",onClick:x,className:"group mb-6 flex items-center gap-2 text-xl font-semibold",children:[e.jsx("span",{children:S}),e.jsx(Sm,{className:"size-4 text-muted-foreground opacity-50 group-hover:opacity-100"})]}),v.length>0?e.jsx("div",{ref:n,className:"mb-6",children:e.jsx(Ia,{name:S,avatar:a.avatar,addresses:v,qrContent:j})}):e.jsx("div",{className:"mb-6 flex h-[300px] w-[320px] items-center justify-center rounded-3xl bg-muted",children:e.jsx("p",{className:"text-muted-foreground",children:t("myCard.noWalletsSelected")})}),e.jsxs("div",{className:"mb-6 w-full max-w-[320px]",children:[e.jsx("h3",{className:"mb-2 text-sm font-medium text-muted-foreground",children:t("myCard.selectWallets")}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.map(({wallet:C,chain:_})=>{const{c0:w}=rm(C.themeHue);return e.jsxs("div",{className:"flex items-center gap-1.5 rounded-full px-3 py-1.5 text-sm font-medium",style:{backgroundColor:w,color:"#FFFFFF"},children:[e.jsx("span",{children:C.name}),e.jsxs("span",{style:{opacity:.8},children:["(",fy[_]||_,")"]}),e.jsx("button",{type:"button",onClick:()=>Vt.toggleWalletSelection(C.id),className:"ml-0.5 rounded-full p-0.5 transition-colors hover:bg-white/20","aria-label":`Remove ${C.name}`,children:e.jsx(Bs,{className:"size-3"})})]},C.id)}),a.selectedWalletIds.length<3&&e.jsxs("button",{type:"button",onClick:()=>f(!0),className:"flex items-center gap-1 rounded-full border border-dashed border-muted-foreground/50 px-3 py-1 text-sm text-muted-foreground hover:border-primary hover:text-primary",children:[e.jsx(st,{className:"size-3"}),t("myCard.addWallet")]})]}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:t("myCard.maxWallets",{max:3})})]}),e.jsxs("div",{className:"flex w-full max-w-[320px] gap-3",children:[e.jsxs(H,{variant:"outline",onClick:b,disabled:N||v.length===0,className:"flex-1",children:[N?e.jsx(be,{className:"mr-2 size-4 animate-spin"}):e.jsx(Ls,{className:"mr-2 size-4"}),t("download")]}),"share"in navigator&&e.jsxs(H,{onClick:A,disabled:N||v.length===0,className:"flex-1",children:[N?e.jsx(be,{className:"mr-2 size-4 animate-spin"}):e.jsx(As,{className:"mr-2 size-4"}),t("share")]})]}),e.jsx("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:t("myCard.scanToAdd")})]}),e.jsx(hd,{open:m,onOpenChange:f})]})}xd.__docgenInfo={description:"",methods:[],displayName:"MyCardPage"};const gd=()=>e.jsx(te,{children:e.jsx(xd,{})});gd.__docgenInfo={description:"",methods:[],displayName:"MyCardActivity"};const py={transaction:{icon:"",bg:"bg-blue-100 dark:bg-blue-900/30"},security:{icon:"",bg:"bg-red-100 dark:bg-red-900/30"},system:{icon:"",bg:"bg-gray-100 dark:bg-gray-800/30"}};function hy(){const{t}=L("notification"),s=Lt();return l.useCallback(n=>{const r=Date.now()-n,o=Math.floor(r/6e4),c=Math.floor(r/36e5),i=Math.floor(r/864e5);return o<1?t("time.justNow"):o<60?t("time.minutesAgo",{count:o}):c<24?t("time.hoursAgo",{count:c}):i<7?t("time.daysAgo",{count:i}):new Date(n).toLocaleDateString(s)},[t,s])}function xy({notification:t,onRead:s,onRemove:n,onNavigate:a,formatRelativeTime:r,t:o}){const c=py[t.type],i=t.type==="transaction"&&!!t.data?.pendingTxId,d=l.useCallback(()=>{t.read||s(t.id),i&&a&&a(t)},[t,s,a,i]);return e.jsxs("div",{onClick:d,className:R("flex cursor-pointer items-start gap-3 rounded-xl p-4 transition-colors",t.read?"bg-muted/30":"bg-card shadow-sm"),children:[e.jsx("div",{className:R("flex size-10 shrink-0 items-center justify-center rounded-full",c.bg),children:e.jsx("span",{className:"text-lg",children:c.icon})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h4",{className:R("font-medium",t.read&&"text-muted-foreground"),children:t.title}),e.jsx("span",{className:"text-muted-foreground shrink-0 text-xs",children:r(t.timestamp)})]}),e.jsx("p",{className:R("mt-1 text-sm",t.read?"text-muted-foreground":"text-foreground/80"),children:t.message}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[!t.read&&e.jsx("div",{className:"bg-primary flex size-2 rounded-full","aria-label":o("unread")}),i&&e.jsxs("span",{className:"text-primary flex items-center gap-0.5 text-xs",children:[o("viewDetails"),e.jsx(Ae,{className:"size-3"})]})]})]}),e.jsx("button",{onClick:u=>{u.stopPropagation(),n(t.id)},className:"text-muted-foreground hover:text-destructive shrink-0 p-1","aria-label":o("delete"),children:e.jsx(Bt,{className:"size-4"})})]})}function gy({notifications:t,onRead:s,onRemove:n,onNavigate:a,formatRelativeTime:r,t:o,language:c}){const i=l.useMemo(()=>{const d=new Map,u=new Date().toLocaleDateString(c),m=new Date(Date.now()-864e5).toLocaleDateString(c);for(const f of t){const h=new Date(f.timestamp).toLocaleDateString(c);let v=h;h===u?v=o("time.today"):h===m&&(v=o("time.yesterday"));const j=d.get(v)||[];d.set(v,[...j,f])}return d},[t,c,o]);return t.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx("div",{className:"bg-muted mb-4 flex size-16 items-center justify-center rounded-full",children:e.jsx(Am,{className:"text-muted-foreground size-8"})}),e.jsx("h3",{className:"text-lg font-medium",children:o("empty.title")}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:o("empty.desc")})]}):e.jsx("div",{className:"space-y-6",children:Array.from(i.entries()).map(([d,u])=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-muted-foreground mb-2 text-sm font-medium",children:d}),e.jsx("div",{className:"space-y-2",children:u.map(m=>e.jsx(xy,{notification:m,onRead:s,onRemove:n,onNavigate:a,formatRelativeTime:r,t:o},m.id))})]},d))})}function vd(){const{t}=L("notification"),s=Lt(),n=hy(),{goBack:a,navigate:r}=se(),o=Ne(yu);l.useEffect(()=>{o.isInitialized||cs.initialize()},[o.isInitialized]);const c=l.useCallback(f=>{cs.markRead(f)},[]),i=l.useCallback(f=>{cs.remove(f)},[]),d=l.useCallback(()=>{cs.markAllRead()},[]),u=l.useCallback(()=>{cs.clearAll()},[]),m=l.useCallback(f=>{f.type==="transaction"&&f.data?.pendingTxId&&r({to:`/pending-tx/${f.data.pendingTxId}`})},[r]);return e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:t("title"),onBack:a,rightAction:o.unreadCount>0?e.jsxs("button",{onClick:d,className:"text-primary hover:bg-primary/10 flex items-center gap-1 rounded-full px-3 py-1.5 text-sm","aria-label":t("markAllRead"),children:[e.jsx(fe,{className:"size-4"}),t("markAllRead")]}):void 0}),e.jsx("div",{className:"bg-card border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:o.unreadCount>0?t("unreadCount",{count:o.unreadCount}):t("noUnread")}),o.notifications.length>0&&e.jsxs(H,{variant:"ghost",size:"sm",onClick:u,className:"text-destructive",children:[e.jsx(Bt,{className:"mr-1 size-4"}),t("clear")]})]})}),e.jsx("div",{className:"flex-1 p-4",children:e.jsx(gy,{notifications:o.notifications,onRead:c,onRemove:i,onNavigate:m,formatRelativeTime:n,t,language:s})})]})}vd.__docgenInfo={description:"",methods:[],displayName:"NotificationCenterPage"};const yd=()=>e.jsx(te,{children:e.jsx(vd,{})});yd.__docgenInfo={description:"",methods:[],displayName:"NotificationsActivity"};function vy(t){const s=t.toNumber();return s>=1e9?`${(s/1e9).toFixed(2)}B`:s>=1e6?`${(s/1e6).toFixed(2)}M`:s>=1e3?`${(s/1e3).toFixed(2)}K`:s.toFixed(Math.min(5,8))}function bd({item:t,onMint:s,className:n}){const{t:a}=L("staking"),r=[{label:a("totalMinted",{asset:t.assetType}),value:t.totalMinted},{label:a("totalCirculation",{asset:t.assetType}),value:t.totalCirculation},{label:a("totalBurned",{asset:t.assetType}),value:t.totalBurned},{label:a("totalStaked",{asset:t.externalAssetType}),value:t.totalStaked}];return e.jsxs("div",{className:R("overflow-hidden rounded-xl shadow-md","bg-gradient-to-b from-primary/90 to-primary",n),children:[e.jsxs("div",{className:"relative grid grid-cols-2 gap-3 p-4",children:[r.map((o,c)=>e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("span",{className:"text-lg font-semibold text-amber-300",children:vy(o.value)}),e.jsx("span",{className:"text-xs text-primary-foreground/70",children:o.label})]},c)),e.jsx("div",{className:"pointer-events-none absolute right-4 top-1/2 -translate-y-1/2 opacity-20",children:e.jsx("div",{className:"flex size-16 items-center justify-center rounded-full bg-white/20 text-2xl font-bold text-white",children:t.chain.charAt(0)})})]}),e.jsxs("div",{className:"flex items-center justify-between bg-card px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{symbol:t.externalAssetType,size:"sm"}),e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium text-foreground",children:t.externalAssetType}),e.jsx("div",{className:"text-muted-foreground",children:t.externalChain})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{symbol:t.assetType,size:"sm"}),e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium text-foreground",children:t.assetType}),e.jsx("div",{className:"text-muted-foreground",children:t.chain})]})]}),e.jsx(H,{size:"sm",variant:"default",className:"rounded-full px-4",onClick:()=>s?.(t),children:a("mint")})]})]})]})}bd.__docgenInfo={description:"Staking pool card component",methods:[],displayName:"StakingPoolCard",props:{item:{required:!0,tsType:{name:"StakingOverviewItem"},description:""},onMint:{required:!1,tsType:{name:"union",raw:"((item: StakingOverviewItem) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};const yy=[{value:"all",label:"allNetworks"},{value:"ETH",label:"Ethereum"},{value:"BSC",label:"BNB Chain"},{value:"TRON",label:"Tron"},{value:"BFMeta",label:"BFMeta"},{value:"BFChain",label:"BFChain"}];function jd({onMint:t,className:s}){const{t:n}=L("staking"),[a,r]=l.useState(""),[o,c]=l.useState("all"),[i,d]=l.useState(!1),[u,m]=l.useState([]),[f,h]=l.useState(!0);l.useEffect(()=>{let p=!0;return h(!0),Et.getOverview().then(x=>{p&&(m(x),h(!1))}),()=>{p=!1}},[]);const v=l.useMemo(()=>{let p=u;if(a.trim()){const x=a.toLowerCase();p=p.filter(g=>g.assetType.toLowerCase().includes(x)||g.externalAssetType.toLowerCase().includes(x)||g.chain.toLowerCase().includes(x)||g.externalChain.toLowerCase().includes(x))}return o!=="all"&&(p=p.filter(x=>x.chain===o||x.externalChain===o)),p},[u,a,o]),j=p=>{c(p),d(!1)};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(Ce,{size:"lg"}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:n("loading")})]}):e.jsxs("div",{className:R("space-y-4",s),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ds,{className:"text-muted-foreground absolute top-1/2 left-3 size-4 -translate-y-1/2"}),e.jsx(Re,{type:"text",placeholder:n("searchPlaceholder"),value:a,onChange:p=>r(p.target.value),className:"pl-9"})]}),e.jsxs(lt,{open:i,onOpenChange:d,children:[e.jsx(tm,{render:e.jsxs(H,{variant:"outline",size:"icon",className:"relative",children:[e.jsx(fo,{className:"size-4"}),o!=="all"&&e.jsx("span",{className:"bg-primary absolute -top-1 -right-1 size-2 rounded-full"})]})}),e.jsxs(dt,{side:"bottom",className:"h-[60vh]",children:[e.jsx(ut,{children:e.jsx(mt,{children:n("selectNetwork")})}),e.jsx("div",{className:"mt-4 space-y-2",children:yy.map(p=>e.jsxs("button",{onClick:()=>j(p.value),className:R("flex w-full items-center justify-between rounded-lg px-4 py-3 text-left transition-colors",o===p.value?"bg-primary/10 text-primary":"hover:bg-muted"),children:[e.jsx("span",{children:p.value==="all"?n("allNetworks"):p.label}),o===p.value&&e.jsx("span",{className:"text-primary",children:""})]},p.value))})]})]})]}),v.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center py-20",children:e.jsx("p",{className:"text-muted-foreground",children:n("noResults")})}):e.jsx("div",{className:"space-y-4",children:v.map((p,x)=>e.jsx(bd,{item:p,onMint:t},`${p.chain}-${p.assetType}-${x}`))})]})}jd.__docgenInfo={description:"Staking overview panel with search and filter",methods:[],displayName:"StakingOverviewPanel",props:{onMint:{required:!1,tsType:{name:"signature",type:"function",raw:"(item: StakingOverviewItem) => void",signature:{arguments:[{type:{name:"StakingOverviewItem"},name:"item"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};const by=["ETH","BSC","TRON"],Xs={ETH:"Ethereum",BSC:"BNB Chain",TRON:"Tron",BFMeta:"BFMeta",BFChain:"BFChain",CCChain:"CCChain",PMChain:"PMChain"},Ti={ETH:{BFM:"1000.00",USDT:"5000.00"},BSC:{BFM:"2500.00",USDT:"10000.00",BFC:"500.00"},TRON:{USDT:"8000.00"}};function jy(t,s){if(!t)return[];const n=[];for(const[a,r]of Object.entries(t))for(const[o,c]of Object.entries(r)){const i=c.supportChain[s];i&&n.push({asset:i.assetType,targetChain:a,targetAsset:o})}return n}function Nd({onSuccess:t,className:s}){const{t:n}=L("staking"),[a,r]=l.useState("BSC"),[o,c]=l.useState(""),[i,d]=l.useState(""),[u,m]=l.useState(""),[f,h]=l.useState(""),[v,j]=l.useState(!1),[p,x]=l.useState(!1),[g,y]=l.useState(!0),[N,b]=l.useState(!1),[A,S]=l.useState(null);l.useEffect(()=>{let E=!0;return Et.getRechargeConfig().then(D=>{E&&(S(D),y(!1))}),()=>{E=!1}},[]);const C=l.useMemo(()=>jy(A,a),[A,a]);l.useEffect(()=>{const E=C[0];E&&!o&&(c(E.asset),d(E.targetChain),m(E.targetAsset))},[C,o]);const _=l.useCallback(E=>{r(E),c(""),d(""),m(""),h(""),j(!1)},[]),w=l.useCallback(E=>{c(E.asset),d(E.targetChain),m(E.targetAsset),x(!1)},[]),T=l.useMemo(()=>Ti[a]?.[o]??"0.00",[a,o]),P=l.useCallback(()=>{h(T.replace(/,/g,""))},[T]),I=l.useMemo(()=>{if(!f)return null;const E=parseFloat(f);if(isNaN(E)||E<=0)return n("invalidAmount");const D=parseFloat(T.replace(/,/g,""));return E>D?n("insufficientBalance"):null},[f,T,n]),k=l.useMemo(()=>a&&o&&i&&u&&f&&!I&&!N,[a,o,i,u,f,I,N]),M=l.useCallback(async()=>{if(k){b(!0);try{const E=f.replace(/,/g,""),D={sourceChain:a,sourceAsset:o,amount:ne.fromFormatted(E,18,o),targetChain:i,targetAsset:u},z=await Et.submitMint(D);t?.(z.id)}finally{b(!1)}}},[k,a,o,f,i,u,t]);return g?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Ce,{size:"lg"}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:n("loading")})]}):e.jsxs("div",{className:R("space-y-4",s),children:[e.jsxs("div",{className:"bg-muted/50 rounded-xl p-4",children:[e.jsx("div",{className:"text-muted-foreground mb-2 text-xs",children:n("sourceChain")}),e.jsxs("button",{type:"button",onClick:()=>j(!0),className:"bg-background mb-3 flex w-full items-center justify-between rounded-lg px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-muted flex size-6 items-center justify-center rounded-full text-xs font-bold",children:a.charAt(0)}),e.jsx("span",{className:"font-medium",children:Xs[a]})]}),e.jsx(Ae,{className:"text-muted-foreground size-4"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>x(!0),className:"bg-background flex shrink-0 items-center gap-2 rounded-lg px-3 py-2",children:[e.jsx(Ze,{symbol:o||"?",size:"sm"}),e.jsx("span",{className:"font-medium",children:o||n("selectToken")}),e.jsx(Ae,{className:"text-muted-foreground size-4"})]}),e.jsx("div",{className:"flex-1",children:e.jsx(Re,{type:"text",inputMode:"decimal",placeholder:"0.00",value:f,onChange:E=>h(E.target.value),className:"border-0 bg-transparent text-right text-lg font-semibold"})})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-muted-foreground",children:[n("availableBalance"),": ",T]}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"text-primary h-auto px-2 py-1 text-xs",onClick:P,children:n("max")})]}),I&&e.jsx("div",{className:"text-destructive mt-2 text-xs",children:I})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-muted rounded-full p-2",children:e.jsx(_n,{className:"text-muted-foreground size-4"})})}),e.jsxs("div",{className:"bg-muted/50 rounded-xl p-4",children:[e.jsx("div",{className:"text-muted-foreground mb-2 text-xs",children:n("targetChain")}),e.jsxs("div",{className:"bg-background flex items-center justify-between rounded-lg px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-primary/20 text-primary flex size-6 items-center justify-center rounded-full text-xs font-bold",children:i.charAt(0)||"?"}),e.jsx("span",{className:"font-medium",children:Xs[i]||n("selectToken")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{symbol:u||"?",size:"sm"}),e.jsx("span",{className:"font-medium",children:u||"-"})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:n("amount")}),e.jsxs("span",{className:"font-semibold",children:[f||"0.00"," ",u]})]})]}),e.jsx(H,{type:"button",size:"lg",className:"w-full",disabled:!k,onClick:M,children:N?e.jsxs(e.Fragment,{children:[e.jsx(Ce,{size:"sm"}),e.jsx("span",{className:"ml-2",children:n("confirm")})]}):n("confirm")}),e.jsx(lt,{open:v,onOpenChange:j,children:e.jsxs(dt,{side:"bottom",className:"h-[50vh]",children:[e.jsx(ut,{children:e.jsx(mt,{children:n("selectChain")})}),e.jsx("div",{className:"mt-4 space-y-2",children:by.map(E=>e.jsxs("button",{onClick:()=>_(E),className:R("flex w-full items-center gap-3 rounded-lg px-4 py-3 transition-colors",a===E?"bg-primary/10 text-primary":"hover:bg-muted"),children:[e.jsx("div",{className:"bg-muted flex size-8 items-center justify-center rounded-full text-sm font-bold",children:E.charAt(0)}),e.jsx("span",{className:"font-medium",children:Xs[E]}),a===E&&e.jsx("span",{className:"text-primary ml-auto",children:""})]},E))})]})}),e.jsx(lt,{open:p,onOpenChange:x,children:e.jsxs(dt,{side:"bottom",className:"h-[60vh]",children:[e.jsx(ut,{children:e.jsx(mt,{children:n("selectToken")})}),e.jsx("div",{className:"mt-4 space-y-2",children:C.length===0?e.jsx("p",{className:"text-muted-foreground py-8 text-center",children:n("noResults")}):C.map(E=>e.jsxs("button",{onClick:()=>w(E),className:R("flex w-full items-center gap-3 rounded-lg px-4 py-3 transition-colors",o===E.asset?"bg-primary/10 text-primary":"hover:bg-muted"),children:[e.jsx(Ze,{symbol:E.asset,size:"md"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"font-medium",children:E.asset}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:[" ",Xs[E.targetChain]," (",E.targetAsset,")"]})]}),e.jsx("div",{className:"text-muted-foreground text-right text-sm",children:Ti[a]?.[E.asset]??"0.00"}),o===E.asset&&e.jsx("span",{className:"text-primary",children:""})]},`${E.targetChain}-${E.asset}`))})]})})]})}Nd.__docgenInfo={description:"Mint form component",methods:[],displayName:"MintForm",props:{onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"(txId: string) => void",signature:{arguments:[{type:{name:"string"},name:"txId"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};const Ny=["BFMeta","BFChain","CCChain","PMChain"],Zs={ETH:"Ethereum",BSC:"BNB Chain",TRON:"Tron",BFMeta:"BFMeta",BFChain:"BFChain",CCChain:"CCChain",PMChain:"PMChain"},Pi={BFMeta:{BFM:"5000.00",USDT:"2500.00"},BFChain:{BFC:"1000.00"},CCChain:{},PMChain:{}};function wy(t,s){if(!t)return[];const n=s.toLowerCase(),a=t[n];if(!a)return[];const r=[];for(const[o,c]of Object.entries(a)){const i=[];c.supportChain.ETH&&i.push("ETH"),c.supportChain.BSC&&i.push("BSC"),c.supportChain.TRON&&i.push("TRON"),i.length>0&&r.push({asset:o,targetChains:i})}return r}function wd({onSuccess:t,className:s}){const{t:n}=L("staking"),[a,r]=l.useState("BFMeta"),[o,c]=l.useState(""),[i,d]=l.useState(""),[u,m]=l.useState(""),[f,h]=l.useState(!1),[v,j]=l.useState(!1),[p,x]=l.useState(!1),[g,y]=l.useState(!0),[N,b]=l.useState(!1),[A,S]=l.useState(null);l.useEffect(()=>{let z=!0;return Et.getRechargeConfig().then(F=>{z&&(S(F),y(!1))}),()=>{z=!1}},[]);const C=l.useMemo(()=>wy(A,a),[A,a]),_=l.useMemo(()=>o?C.find(F=>F.asset===o)?.targetChains??[]:[],[C,o]);l.useEffect(()=>{const z=C[0];if(z&&!o){c(z.asset);const F=z.targetChains[0];F&&d(F)}},[C,o]);const w=l.useCallback(z=>{r(z),c(""),d(""),m(""),h(!1)},[]),T=l.useCallback(z=>{c(z.asset);const F=z.targetChains[0];F&&d(F),j(!1)},[]),P=l.useCallback(z=>{d(z),x(!1)},[]),I=l.useMemo(()=>Pi[a]?.[o]??"0.00",[a,o]),k=l.useCallback(()=>{m(I.replace(/,/g,""))},[I]),M=l.useMemo(()=>{if(!u)return null;const z=parseFloat(u);if(isNaN(z)||z<=0)return n("invalidAmount");const F=parseFloat(I.replace(/,/g,""));return z>F?n("insufficientBalance"):null},[u,I,n]),E=l.useMemo(()=>a&&o&&i&&u&&!M&&!N,[a,o,i,u,M,N]),D=l.useCallback(async()=>{if(!(!E||!i)){b(!0);try{const z=u.replace(/,/g,""),F={sourceChain:a,sourceAsset:o,amount:ne.fromFormatted(z,8,o),targetChain:i,targetAsset:o},B=await Et.submitBurn(F);t?.(B.id)}finally{b(!1)}}},[E,a,o,u,i,t]);return g?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Ce,{size:"lg"}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:n("loading")})]}):e.jsxs("div",{className:R("space-y-4",s),children:[e.jsxs("div",{className:"bg-muted/50 rounded-xl p-4",children:[e.jsx("div",{className:"text-muted-foreground mb-2 text-xs",children:n("sourceChain")}),e.jsxs("button",{type:"button",onClick:()=>h(!0),className:"bg-background mb-3 flex w-full items-center justify-between rounded-lg px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-primary/20 text-primary flex size-6 items-center justify-center rounded-full text-xs font-bold",children:a.charAt(0)}),e.jsx("span",{className:"font-medium",children:Zs[a]})]}),e.jsx(Ae,{className:"text-muted-foreground size-4"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>j(!0),className:"bg-background flex shrink-0 items-center gap-2 rounded-lg px-3 py-2",children:[e.jsx(Ze,{symbol:o||"?",size:"sm"}),e.jsx("span",{className:"font-medium",children:o||n("selectToken")}),e.jsx(Ae,{className:"text-muted-foreground size-4"})]}),e.jsx("div",{className:"flex-1",children:e.jsx(Re,{type:"text",inputMode:"decimal",placeholder:"0.00",value:u,onChange:z=>m(z.target.value),className:"border-0 bg-transparent text-right text-lg font-semibold"})})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-muted-foreground",children:[n("availableBalance"),": ",I]}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"text-primary h-auto px-2 py-1 text-xs",onClick:k,children:n("max")})]}),M&&e.jsx("div",{className:"text-destructive mt-2 text-xs",children:M})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-muted rounded-full p-2",children:e.jsx(_n,{className:"text-muted-foreground size-4"})})}),e.jsxs("div",{className:"bg-muted/50 rounded-xl p-4",children:[e.jsx("div",{className:"text-muted-foreground mb-2 text-xs",children:n("targetChain")}),e.jsxs("button",{type:"button",onClick:()=>x(!0),disabled:_.length===0,className:"bg-background flex w-full items-center justify-between rounded-lg px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-muted flex size-6 items-center justify-center rounded-full text-xs font-bold",children:i?i.charAt(0):"?"}),e.jsx("span",{className:"font-medium",children:i?Zs[i]:n("selectChain")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{symbol:o||"?",size:"sm"}),e.jsx("span",{className:"font-medium",children:o||"-"}),e.jsx(Ae,{className:"text-muted-foreground size-4"})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:n("amount")}),e.jsxs("span",{className:"font-semibold",children:[u||"0.00"," ",o]})]})]}),e.jsx(H,{type:"button",size:"lg",className:"w-full",disabled:!E,onClick:D,children:N?e.jsxs(e.Fragment,{children:[e.jsx(Ce,{size:"sm"}),e.jsx("span",{className:"ml-2",children:n("confirm")})]}):n("confirm")}),e.jsx(lt,{open:f,onOpenChange:h,children:e.jsxs(dt,{side:"bottom",className:"h-[50vh]",children:[e.jsx(ut,{children:e.jsx(mt,{children:n("selectChain")})}),e.jsx("div",{className:"mt-4 space-y-2",children:Ny.map(z=>e.jsxs("button",{onClick:()=>w(z),className:R("flex w-full items-center gap-3 rounded-lg px-4 py-3 transition-colors",a===z?"bg-primary/10 text-primary":"hover:bg-muted"),children:[e.jsx("div",{className:"bg-primary/20 text-primary flex size-8 items-center justify-center rounded-full text-sm font-bold",children:z.charAt(0)}),e.jsx("span",{className:"font-medium",children:Zs[z]}),a===z&&e.jsx("span",{className:"text-primary ml-auto",children:""})]},z))})]})}),e.jsx(lt,{open:v,onOpenChange:j,children:e.jsxs(dt,{side:"bottom",className:"h-[60vh]",children:[e.jsx(ut,{children:e.jsx(mt,{children:n("selectToken")})}),e.jsx("div",{className:"mt-4 space-y-2",children:C.length===0?e.jsx("p",{className:"text-muted-foreground py-8 text-center",children:n("noResults")}):C.map(z=>e.jsxs("button",{onClick:()=>T(z),className:R("flex w-full items-center gap-3 rounded-lg px-4 py-3 transition-colors",o===z.asset?"bg-primary/10 text-primary":"hover:bg-muted"),children:[e.jsx(Ze,{symbol:z.asset,size:"md"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"font-medium",children:z.asset}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:[" ",z.targetChains.join(", ")]})]}),e.jsx("div",{className:"text-muted-foreground text-right text-sm",children:Pi[a]?.[z.asset]??"0.00"}),o===z.asset&&e.jsx("span",{className:"text-primary",children:""})]},z.asset))})]})}),e.jsx(lt,{open:p,onOpenChange:x,children:e.jsxs(dt,{side:"bottom",className:"h-[50vh]",children:[e.jsx(ut,{children:e.jsx(mt,{children:n("selectChain")})}),e.jsx("div",{className:"mt-4 space-y-2",children:_.map(z=>e.jsxs("button",{onClick:()=>P(z),className:R("flex w-full items-center gap-3 rounded-lg px-4 py-3 transition-colors",i===z?"bg-primary/10 text-primary":"hover:bg-muted"),children:[e.jsx("div",{className:"bg-muted flex size-8 items-center justify-center rounded-full text-sm font-bold",children:z.charAt(0)}),e.jsx("span",{className:"font-medium",children:Zs[z]}),i===z&&e.jsx("span",{className:"text-primary ml-auto",children:""})]},z))})]})})]})}wd.__docgenInfo={description:"Burn form component",methods:[],displayName:"BurnForm",props:{onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"(txId: string) => void",signature:{arguments:[{type:{name:"string"},name:"txId"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};const _i={ETH:"Ethereum",BSC:"BNB Chain",TRON:"Tron",BFMeta:"BFMeta",BFChain:"BFChain",CCChain:"CCChain",PMChain:"PMChain"};function Cy({status:t}){switch(t){case"pending":return e.jsx(Tm,{className:"size-4 text-yellow-500"});case"confirming":return e.jsx(be,{className:"size-4 animate-spin text-blue-500"});case"confirmed":return e.jsx(rs,{className:"size-4 text-green-500"});case"failed":return e.jsx(Im,{className:"text-destructive size-4"})}}function ky(t){const n=Date.now()-t;return n<6e4?"Just now":n<36e5?`${Math.floor(n/6e4)}m ago`:n<864e5?`${Math.floor(n/36e5)}h ago`:new Date(t).toLocaleDateString()}function Sy(t){const s=t.toNumber();return s>=1e6?`${(s/1e6).toFixed(2)}M`:s>=1e3?`${(s/1e3).toFixed(2)}K`:s.toFixed(4)}function Ay({record:t,onClick:s}){const{t:n}=L("staking"),a=t.type==="mint",r=a?Lm:lo;return e.jsxs("button",{type:"button",onClick:s,className:"bg-card hover:bg-muted/50 flex w-full items-center gap-3 rounded-lg p-3 text-left transition-colors",children:[e.jsx("div",{className:R("flex size-10 items-center justify-center rounded-full",a?"bg-green-500/10":"bg-orange-500/10"),children:e.jsx(r,{className:R("size-5",a?"text-green-500":"text-orange-500")})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:n(a?"mint":"burn")}),e.jsx(Cy,{status:t.status})]}),e.jsxs("div",{className:"text-muted-foreground flex items-center gap-1 text-xs",children:[e.jsx("span",{children:_i[t.sourceChain]}),e.jsx("span",{children:""}),e.jsx("span",{children:_i[t.targetChain]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(Ze,{symbol:t.sourceAsset,size:"sm"}),e.jsx("span",{className:"font-medium",children:Sy(t.sourceAmount)})]}),e.jsx("div",{className:"text-muted-foreground text-xs",children:ky(t.createdAt)})]})]})}function Cd({filterType:t="all",onRecordClick:s,className:n}){const{t:a}=L("staking"),[r,o]=l.useState([]),[c,i]=l.useState(!0),[d,u]=l.useState(t==="all"?"all":t);l.useEffect(()=>{let v=!0;return i(!0),Et.getTransactions().then(j=>{v&&(o(j),i(!1))}),()=>{v=!1}},[]);const m=l.useMemo(()=>d==="all"?r:r.filter(v=>v.type===d),[r,d]),f=[{id:"all",label:a("history")},{id:"mint",label:a("mint")},{id:"burn",label:a("burn")}],h=l.useCallback(()=>{i(!0),Et.getTransactions().then(v=>{o(v),i(!1)})},[]);return c?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Ce,{size:"lg"}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:a("loading")})]}):e.jsxs("div",{className:R("space-y-4",n),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[f.map(v=>e.jsx(H,{type:"button",variant:d===v.id?"default":"outline",size:"sm",onClick:()=>u(v.id),children:v.label},v.id)),e.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"ml-auto",onClick:h,children:a("refresh")})]}),m.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:a("noTransactions")})}):e.jsx("div",{className:"space-y-2",children:m.map(v=>e.jsx(Ay,{record:v,onClick:()=>s?.(v)},v.id))})]})}Cd.__docgenInfo={description:"Staking record list component",methods:[],displayName:"StakingRecordList",props:{filterType:{required:!1,tsType:{name:"union",raw:"StakingTxType | 'all'",elements:[{name:"StakingTxType"},{name:"literal",value:"'all'"}]},description:"Filter by transaction type",defaultValue:{value:"'all'",computed:!1}},onRecordClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(record: StakingTransaction) => void",signature:{arguments:[{type:{name:"StakingTransaction"},name:"record"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};function kd(){const{t}=L("staking"),{goBack:s}=se(),[n,a]=l.useState("overview"),r=[{id:"overview",label:t("overview")},{id:"mint",label:t("mint")},{id:"burn",label:t("burn")},{id:"history",label:t("history")}],o=c=>{a("mint")};return e.jsxs("div",{className:"flex min-h-screen flex-col bg-background",children:[e.jsx(U,{title:t("title"),onBack:s}),e.jsx("div",{className:"flex border-b border-border px-4",children:r.map(c=>e.jsx("button",{onClick:()=>a(c.id),className:R("flex-1 py-3 text-sm font-medium transition-colors",n===c.id?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"),children:c.label},c.id))}),e.jsxs("div",{className:"flex-1 p-4",children:[n==="overview"&&e.jsx(jd,{onMint:o}),n==="mint"&&e.jsx(Iy,{}),n==="burn"&&e.jsx(Ty,{}),n==="history"&&e.jsx(Cd,{})]})]})}function Iy(){const{t}=L("staking"),s=n=>{};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:t("mintDescription")}),e.jsx(Nd,{onSuccess:s})]})}function Ty(){const{t}=L("staking"),s=n=>{};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:t("burnDescription")}),e.jsx(wd,{onSuccess:s})]})}kd.__docgenInfo={description:"Staking page with tab navigation",methods:[],displayName:"StakingPage"};const Sd=()=>e.jsx(te,{children:e.jsx(kd,{})});Sd.__docgenInfo={description:"",methods:[],displayName:"StakingActivity"};const Py=ss({assetType:q(),decimals:zt(),amount:q().optional(),useDefaultDecimals:Xe().optional(),logoUrl:q().optional(),contractAddress:q().optional()}),_y=ss({address:q(),symbol:q(),addressKey:q(),mainWalletId:q(),chain:q(),mnemonic:q().optional(),privateKey:q(),publicKey:q().optional(),isCustomAssets:Xe().optional(),isFreezed:Xe().optional(),assets:Ye(Py),name:q(),prohibitChangeName:Xe().optional(),index:zt().optional(),purpose:wa([Qe(44),Qe(49),Qe(84),Qe(86)]).optional()}),Ey=ss({chainName:q(),addressKey:q(),address:q(),symbol:q(),mainWalletId:q(),index:zt().optional(),purpose:wa([Qe(44),Qe(49),Qe(84),Qe(86)]).optional()});ss({name:q(),skipBackup:Xe().optional(),importPhrase:q(),importType:q(),addressKeyList:Ye(Ey),mainWalletId:q(),headSculpture:q(),createTimestamp:zt(),lastBitcoinAddressKey:q().optional()});ss({addressBookId:q(),name:q(),address:q(),chainList:Ye(q()).optional(),remarks:q().optional(),iconName:q().optional(),symbol:q().optional()});ss({password:q(),passwordTips:q().optional(),lastWalletActivate:_y.optional(),walletLock:Xe().optional(),fingerprintLock:Xe().optional(),fingerprintPay:Xe().optional()});const My=l.createContext(null);function Ry(){return l.useContext(My)}const zy="keyapp_welcome_shown";function en(){localStorage.setItem(zy,"1")}function Ad(){const{t}=L("guide"),{navigate:s}=se(),[n,a]=l.useState(0),r=Ry(),o=l.useMemo(()=>[{icon:e.jsx(ho,{className:"text-primary size-16"}),title:t("welcome.slides.transfer.title"),description:t("welcome.slides.transfer.description")},{icon:e.jsx(po,{className:"text-primary size-16"}),title:t("welcome.slides.multichain.title"),description:t("welcome.slides.multichain.description")},{icon:e.jsx(Pm,{className:"text-primary size-16"}),title:t("welcome.slides.security.title"),description:t("welcome.slides.security.description")}],[t]),c=o[n];if(!c)return null;const i=l.useCallback(()=>{en(),s({to:"/wallet/create"})},[s]),d=l.useCallback(()=>{en(),s({to:"/onboarding/recover"})},[s]),u=l.useCallback(()=>{en(),s({to:"/onboarding/migrate"})},[s]),m=l.useCallback(()=>{en(),s({to:"/"})},[s]),f=l.useCallback(()=>{n<o.length-1&&a(j=>j+1)},[n,o.length]),h=n===o.length-1,v=r?.shouldPromptMigration;return e.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[e.jsx("div",{className:"flex justify-end p-4",children:e.jsx(H,{variant:"ghost",size:"sm","data-testid":"skip-button",onClick:m,children:t("welcome.skip")})}),e.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center px-8",children:[e.jsx("div",{className:"bg-primary/10 mb-8 flex size-32 items-center justify-center rounded-full",children:c.icon}),e.jsx("h1",{className:"mb-4 text-center text-2xl font-bold",children:c.title}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-sm text-center",children:c.description}),e.jsx("div",{className:"mb-8 flex gap-2",children:o.map((j,p)=>e.jsx("button",{"data-testid":`slide-dot-${p}`,onClick:()=>a(p),className:R("size-2 rounded-full transition-colors",p===n?"bg-primary":"bg-muted-foreground/30"),"aria-label":t("welcome.goToSlide",{number:p+1})},p))})]}),e.jsx("div",{className:"p-6",children:h?e.jsxs("div",{className:"flex flex-col gap-3",children:[v&&e.jsxs(H,{"data-testid":"migrate-button",onClick:u,className:"w-full",size:"lg",variant:"default",children:[e.jsx(Ls,{className:"mr-2 size-4"}),t("welcome.migrateFromMpay")]}),e.jsx(H,{"data-testid":"get-started-button",onClick:i,className:"w-full",size:"lg",variant:v?"outline":"default",children:t("welcome.getStarted")}),e.jsx(H,{"data-testid":"have-wallet-button",onClick:d,variant:"outline",className:"w-full",size:"lg",children:t("welcome.haveWallet")})]}):e.jsxs(H,{"data-testid":"next-button",onClick:f,className:"w-full",size:"lg",children:[t("welcome.next"),e.jsx(Ae,{className:"ml-2 size-4"})]})})]})}Ad.__docgenInfo={description:"",methods:[],displayName:"WelcomeScreen"};const Id=()=>e.jsx(te,{children:e.jsx(Ad,{})});Id.__docgenInfo={description:"",methods:[],displayName:"WelcomeActivity"};function Td(){const{t}=L(["wallet","onboarding","security","common"]),{goBack:s}=se(),n=ke(),a=Es(),r=ze(),[o,c]=l.useState("select"),[i,d]=l.useState([]),[u,m]=l.useState([]),[f,h]=l.useState(!1),v=l.useRef(!1);l.useEffect(()=>{!v.current&&n&&(d(n.chainAddresses.map(g=>g.chain)),v.current=!0)},[n]);const j=l.useCallback(()=>{if(!n)return!1;const g=new Set(n.chainAddresses.map(y=>y.chain));return g.size!==i.length?!0:i.some(y=>!g.has(y))},[n,i]),p=l.useCallback(()=>{if(!j()){s();return}c("verify")},[j,s]),x=l.useCallback(async g=>{if(!(!n||g.length<4)){h(!1),c("saving");try{const y=ht(g);await me.updateWalletChainAddresses(n.id,i,y,a),!i.includes(r)&&i.length>0&&me.setSelectedChain(i[0]),c("success"),setTimeout(()=>{s()},1500)}catch(y){y instanceof Error&&y.message.includes("decrypt")?(h(!0),m([]),c("verify"),setTimeout(()=>{h(!1)},1500)):c("select")}}},[n,i,a,s]);return n?o==="saving"?e.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[e.jsx(U,{title:t("wallet:chains.title")}),e.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 p-4",children:[e.jsx(Ce,{size:"lg"}),e.jsx("p",{className:"text-muted-foreground",children:t("wallet:chains.saving")})]})]}):o==="success"?e.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[e.jsx(U,{title:t("wallet:chains.title")}),e.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 p-4",children:[e.jsx("div",{className:"flex size-16 items-center justify-center rounded-full bg-green-500/10",children:e.jsx(fe,{className:"size-8 text-green-500"})}),e.jsx("p",{className:"font-medium",children:t("wallet:chains.success")})]})]}):o==="verify"?e.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[e.jsx(U,{title:t("wallet:chains.verifyTitle"),onBack:()=>{c("select"),m([])}}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:t("wallet:chains.verifyTitle")}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:t("wallet:chains.verifyDesc")})]}),e.jsx(Ft,{value:u,onChange:m,onComplete:x,minPoints:4,error:f,"data-testid":"wallet-chains-pattern"})]})]}):e.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[e.jsx(U,{title:t("wallet:chains.title"),onBack:s}),e.jsxs("div",{className:"flex-1 space-y-6 p-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Rs,{icon:e.jsx(rs,{className:"size-full"}),variant:"success",size:"lg",className:"mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold",children:t("onboarding:chainSelector.title")}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:t("onboarding:chainSelector.subtitle")})]}),a.length===0?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(Ce,{})}):e.jsx(_a,{"data-testid":"wallet-chains-selector",chains:a,selectedChains:i,onSelectionChange:d}),e.jsx(Me,{variant:"mint",className:"w-full","data-testid":"wallet-chains-save",disabled:i.length===0,onClick:p,children:j()?t("common:save"):t("common:done")})]})]}):e.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[e.jsx(U,{title:t("wallet:chains.title"),onBack:s}),e.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:e.jsx(Mt,{variant:"warning",children:t("wallet:chains.noWallet")})})]})}Td.__docgenInfo={description:"",methods:[],displayName:"WalletChainsPage"};const Pd=()=>e.jsx(te,{children:e.jsx(Td,{})});Pd.__docgenInfo={description:"",methods:[],displayName:"SettingsWalletChainsActivity"};function Xn(t){if(t===0)return"0 B";const s=1024,n=["B","KB","MB","GB"],a=Math.floor(Math.log(t)/Math.log(s));return`${parseFloat((t/Math.pow(s,a)).toFixed(2))} ${n[a]}`}function _d(){const{t}=L(["settings","common"]),{goBack:s}=se(),{push:n}=G(),[a,r]=l.useState(null),[o,c]=l.useState(!0),i=l.useCallback(async()=>{c(!0);try{if(navigator.storage&&navigator.storage.estimate){const u=await navigator.storage.estimate();r({usage:u.usage??0,quota:u.quota??0})}}catch{}finally{c(!1)}},[]);l.useEffect(()=>{i()},[i]);const d=a?a.usage/a.quota*100:0;return e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(U,{title:t("settings:storage.title"),onBack:s}),e.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[e.jsxs("div",{className:"bg-card rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-primary/10 flex size-10 items-center justify-center rounded-full",children:e.jsx(mo,{className:"text-primary size-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:t("settings:storage.usage")}),e.jsx("p",{className:"text-muted-foreground text-sm",children:t("settings:storage.basedOn")})]})]}),o?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(be,{className:"text-muted-foreground size-6 animate-spin"})}):a?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted h-3 w-full overflow-hidden rounded-full",children:e.jsx("div",{className:"bg-primary h-full rounded-full transition-all",style:{width:`${Math.min(d,100)}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[t("settings:storage.used"),": ",Xn(a.usage)]}),e.jsxs("span",{className:"text-muted-foreground",children:[t("settings:storage.total"),": ",Xn(a.quota)]})]})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:t("settings:storage.usagePercent")}),e.jsxs("span",{className:"font-medium",children:[d.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:t("settings:storage.available")}),e.jsx("span",{className:"font-medium",children:Xn(a.quota-a.usage)})]})]})]}):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:t("settings:storage.unavailable")})]}),e.jsxs("div",{className:"bg-card rounded-xl p-4 shadow-sm",children:[e.jsx("h3",{className:"font-medium mb-2",children:t("settings:storage.clearTitle")}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:t("settings:storage.clearDesc")}),e.jsxs(H,{variant:"destructive",className:"w-full",onClick:()=>n("ClearDataConfirmJob",{}),children:[e.jsx(Bt,{className:"size-4 mr-2"}),t("settings:items.clearData")]})]})]})]})}_d.__docgenInfo={description:"",methods:[],displayName:"SettingsStoragePage"};const Ed=()=>e.jsx(te,{children:e.jsx(_d,{})});Ed.__docgenInfo={description:"",methods:[],displayName:"SettingsStorageActivity"};const Md=()=>{const{t}=L("common"),{pop:s}=G(),n=Ne(Rt),[a,r]=l.useState(!1),[o,c]=l.useState(""),[i,d]=l.useState(""),[u,m]=l.useState(!1),[f,h]=l.useState(null),v=async()=>{if(!o.trim()){h(t("sources.enterUrl"));return}try{new URL(o)}catch{h(t("sources.invalidUrl"));return}if(n.sources.some(g=>g.url===o)){h(t("sources.alreadyExists"));return}ye.addSource(o,i||t("sources.customSource")),c(""),d(""),r(!1),h(null),cg(o)},j=g=>{ye.removeSource(g)},p=g=>{ye.toggleSource(g)},x=async()=>{m(!0);try{await tr()}catch{}m(!1)};return e.jsx(te,{children:e.jsxs("div",{className:"bg-background flex min-h-full flex-col",children:[e.jsx("div",{className:"bg-background sticky top-0 z-10 border-b",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[e.jsx("button",{onClick:()=>s(),className:"hover:bg-muted rounded-full p-1.5 transition-colors","aria-label":t("back"),children:e.jsx(no,{className:"size-5",stroke:1.5})}),e.jsx("h1",{className:"flex-1 text-lg font-semibold",children:t("sources.title")}),e.jsx("button",{onClick:x,disabled:u,className:"hover:bg-muted rounded-full p-1.5 transition-colors","aria-label":t("refresh"),children:e.jsx(as,{className:R("size-5",u&&"animate-spin"),stroke:1.5})})]})}),e.jsxs("div",{className:"flex-1 space-y-3 p-4",children:[n.sources.map(g=>e.jsx(Dy,{source:g,onToggle:()=>p(g.url),onRemove:()=>j(g.url)},g.url)),n.sources.length===0&&e.jsx("div",{className:"text-muted-foreground py-12 text-center",children:""})]}),a?e.jsxs("div",{className:"bg-background space-y-3 border-t p-4",children:[e.jsx("input",{type:"url",value:o,onChange:g=>{c(g.target.value),h(null)},placeholder:t("sources.urlPlaceholder"),className:"bg-background focus:ring-primary w-full rounded-lg border px-3 py-2 focus:ring-2 focus:outline-none"}),e.jsx("input",{type:"text",value:i,onChange:g=>d(g.target.value),placeholder:t("sources.namePlaceholder"),className:"bg-background focus:ring-primary w-full rounded-lg border px-3 py-2 focus:ring-2 focus:outline-none"}),f&&e.jsx("p",{className:"text-destructive text-sm",children:f}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{r(!1),c(""),d(""),h(null)},className:"bg-muted hover:bg-muted/80 flex-1 rounded-lg py-2 font-medium",children:t("cancel")}),e.jsx("button",{onClick:v,className:"bg-primary text-primary-foreground hover:bg-primary/90 flex-1 rounded-lg py-2 font-medium",children:t("add")})]})]}):e.jsx("div",{className:"border-t p-4",children:e.jsxs("button",{onClick:()=>r(!0),className:"border-muted-foreground/30 hover:border-primary hover:bg-primary/5 text-muted-foreground hover:text-primary flex w-full items-center justify-center gap-2 rounded-xl border-2 border-dashed py-3 transition-colors",children:[e.jsx(st,{className:"size-5",stroke:1.5}),e.jsx("span",{children:t("sources.addSource")})]})}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)]"})]})})};function Dy({source:t,onToggle:s,onRemove:n}){const{t:a}=L("common"),r=t.url.includes("ecosystem.json"),o={idle:null,loading:e.jsx(be,{className:"text-muted-foreground size-3 animate-spin"}),success:e.jsx(fe,{className:"size-3 text-green-500"}),error:e.jsx(xt,{className:"size-3 text-red-500"})}[t.status];return e.jsx("div",{className:R("rounded-xl border p-4 transition-colors",t.enabled?"bg-card":"bg-muted/30 opacity-60"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-primary/10 shrink-0 rounded-full p-2",children:e.jsx(xo,{className:"text-primary size-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"truncate font-medium",children:t.name}),r&&e.jsx("span",{className:"bg-primary/10 text-primary rounded px-1.5 py-0.5 text-xs",children:a("sources.official")}),o]}),e.jsx("p",{className:"text-muted-foreground mt-0.5 truncate text-sm",children:t.url}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:a("sources.updatedAt",{date:new Date(t.lastUpdated).toLocaleString()})}),t.status==="error"&&t.errorMessage&&e.jsx("p",{className:"truncate text-xs text-red-500",children:t.errorMessage})]})]}),e.jsxs("div",{className:"flex shrink-0 items-center gap-1",children:[e.jsx("button",{onClick:s,className:R("rounded-full p-2 transition-colors",t.enabled?"bg-green-100 text-green-600 hover:bg-green-200":"bg-muted text-muted-foreground hover:bg-muted/80"),"aria-label":t.enabled?a("disable"):a("enable"),children:t.enabled?e.jsx(fe,{className:"size-4",stroke:2}):e.jsx(Bs,{className:"size-4",stroke:2})}),!r&&e.jsx("button",{onClick:n,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-full p-2 transition-colors","aria-label":a("delete"),children:e.jsx(Bt,{className:"size-4",stroke:1.5})})]})]})})}Md.__docgenInfo={description:"",methods:[],displayName:"SettingsSourcesActivity"};function Ly({permission:t,isLast:s}){const a=Ou[t]?.risk??"medium",r=Fu(t),o=a==="high"?Pe:Yi,c=a==="high"?"text-red-500":a==="medium"?"text-amber-500":"text-green-500";return e.jsxs("div",{className:R("flex items-start gap-3 py-3",!s&&"border-border/50 border-b"),children:[e.jsx(o,{className:R("mt-0.5 size-5 shrink-0",c),stroke:1.5}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:r.label}),e.jsx("p",{className:"text-muted-foreground mt-0.5 text-xs",children:r.description})]})]})}function Ut({label:t,value:s,isLink:n=!1,href:a}){const r=e.jsxs("div",{className:"border-border/50 flex items-center justify-between border-b py-3 last:border-0",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:t}),e.jsxs("span",{className:R("text-sm font-medium",n&&"text-primary flex items-center gap-1"),children:[s,n&&e.jsx(Ae,{className:"size-4"})]})]});return n&&a?e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",children:r}):r}const Rd=({params:t})=>{const{pop:s}=G(),{t:n}=L("ecosystem"),[a,r]=l.useState(null),[o,c]=l.useState(!0),[i,d]=l.useState(!1),u=Ne(Rt,p=>ja.isAppInstalled(p,t.appId));l.useEffect(()=>{let p=!1;return(async()=>{c(!0),await Ec();let g=fi(t.appId);g||(await tr({force:!1}),g=fi(t.appId)),!p&&(r(g??null),c(!1))})(),()=>{p=!0}},[t.appId]);const m=l.useCallback(()=>{a&&ye.installApp(a.id)},[a]),f=l.useCallback(()=>{a&&(ye.updateAppLastUsed(a.id),ye.setActiveSubPage("mine"),Hi(a.id,{...a,targetDesktop:"mine"}),s())},[a,s]);if(o)return e.jsx(te,{children:e.jsx("div",{className:"bg-background flex min-h-screen items-center justify-center",children:e.jsx(Ce,{size:"lg"})})});if(!a)return e.jsx(te,{children:e.jsxs("div",{className:"bg-background flex min-h-screen flex-col items-center justify-center gap-4",children:[e.jsx("p",{className:"text-muted-foreground",children:n("detail.notFound")}),e.jsx("button",{onClick:()=>s(),className:"bg-primary text-primary-foreground rounded-full px-4 py-2 text-sm font-medium",children:n("detail.back")})]})});const h=a.longDescription??a.description,v=h.length>150,j=i||!v?h:h.slice(0,150)+"...";return e.jsx(te,{children:e.jsxs("div",{className:"bg-background detail-scroll-container flex min-h-screen flex-col",children:[e.jsx("div",{className:"bg-background/80 border-border/50 sticky top-0 z-20 border-b backdrop-blur-xl",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsx("button",{onClick:()=>s(),className:"hover:bg-muted -ml-1.5 rounded-full p-1.5 transition-colors",children:e.jsx(no,{className:"size-5",stroke:1.5})}),e.jsx("span",{className:"detail-header-title max-w-[200px] truncate font-semibold",children:a.name}),e.jsx("button",{className:"hover:bg-muted -mr-1.5 rounded-full p-1.5 transition-colors",children:e.jsx(As,{className:"size-5",stroke:1.5})})]})}),e.jsxs("div",{className:"detail-scroller flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"px-5 pt-4 pb-5",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx($u,{src:a.icon,name:a.name,size:"2xl",shadow:"lg",className:"shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1 pt-1",children:[e.jsx("h1",{className:"truncate text-xl font-bold",children:a.name}),e.jsx("p",{className:"text-muted-foreground mt-0.5 truncate text-sm",children:a.author??n("detail.unknownDeveloper")}),u?e.jsx("button",{onClick:f,className:"bg-primary text-primary-foreground mt-4 rounded-full px-8 py-2 text-sm font-semibold",children:n("detail.open")}):e.jsx("button",{onClick:m,className:"bg-primary text-primary-foreground mt-4 rounded-full px-8 py-2 text-sm font-semibold",children:n("detail.get")})]})]}),e.jsxs("div",{className:"text-muted-foreground mt-5 flex items-center gap-4 text-xs",children:[a.category&&e.jsx("span",{className:"text-foreground font-medium",children:n(`detail.categories.${a.category}`,{defaultValue:a.category})}),a.beta&&e.jsx("span",{className:"rounded-full bg-amber-100 px-2 py-0.5 font-medium text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",children:"Beta"}),e.jsxs("span",{children:["v",a.version]})]})]}),a.screenshots&&a.screenshots.length>0&&e.jsx("div",{className:"border-border/50 border-t",children:e.jsxs("div",{className:"px-5 py-4",children:[e.jsx("h2",{className:"mb-4 text-lg font-bold",children:n("detail.preview")}),e.jsx("div",{className:"-mx-5 flex snap-x snap-mandatory gap-3 overflow-x-auto px-5 pb-2",style:{scrollbarWidth:"none"},children:a.screenshots.map((p,x)=>e.jsx("div",{className:"bg-muted aspect-[9/19.5] w-[220px] shrink-0 snap-center overflow-hidden rounded-2xl shadow-lg ring-1 ring-black/5",children:e.jsx("img",{src:p,alt:`${a.name} screenshot ${x+1}`,className:"h-full w-full object-cover",loading:"lazy",onError:g=>{g.currentTarget.parentElement.style.display="none"}})},x))})]})}),e.jsxs("div",{className:"border-border/50 border-t px-5 py-4",children:[e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:j}),v&&e.jsxs("button",{onClick:()=>d(!i),className:"text-primary mt-2 flex items-center gap-1 text-sm font-medium",children:[n(i?"detail.collapse":"detail.more"),i?e.jsx(Vi,{className:"size-4"}):e.jsx(Ki,{className:"size-4"})]})]}),a.chains&&a.chains.length>0&&e.jsxs("div",{className:"border-border/50 border-t px-5 py-4",children:[e.jsx("h2",{className:"mb-3 text-lg font-bold",children:n("detail.supportedChains")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.chains.map(p=>e.jsx("span",{className:"bg-muted rounded-full px-3 py-1.5 text-sm font-medium",children:p},p))})]}),a.permissions&&a.permissions.length>0&&e.jsxs("div",{className:"border-border/50 border-t px-5 py-4",children:[e.jsx("h2",{className:"mb-1 text-lg font-bold",children:n("detail.privacy")}),e.jsx("p",{className:"text-muted-foreground mb-4 text-xs",children:n("detail.privacyHint")}),e.jsx("div",{className:"bg-muted/50 rounded-2xl px-4",children:a.permissions.map((p,x)=>e.jsx(Ly,{permission:p,isLast:x===a.permissions.length-1},p))})]}),a.tags&&a.tags.length>0&&e.jsxs("div",{className:"border-border/50 border-t px-5 py-4",children:[e.jsx("h2",{className:"mb-3 text-lg font-bold",children:n("detail.tags")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map(p=>e.jsxs("span",{className:"bg-primary/10 text-primary rounded-full px-3 py-1.5 text-sm font-medium",children:["#",p]},p))})]}),e.jsxs("div",{className:"border-border/50 border-t px-5 py-4",children:[e.jsx("h2",{className:"mb-2 text-lg font-bold",children:n("detail.info")}),e.jsxs("div",{className:"bg-muted/50 rounded-2xl px-4",children:[a.author&&e.jsx(Ut,{label:n("detail.developer"),value:a.author}),e.jsx(Ut,{label:n("detail.version"),value:a.version}),a.category&&e.jsx(Ut,{label:n("detail.category"),value:n(`detail.categories.${a.category}`,{defaultValue:a.category})}),a.publishedAt&&e.jsx(Ut,{label:n("detail.publishedAt"),value:a.publishedAt}),a.updatedAt&&e.jsx(Ut,{label:n("detail.updatedAt"),value:a.updatedAt}),a.website&&e.jsx(Ut,{label:n("detail.website"),value:n("detail.visit"),isLink:!0,href:a.website})]})]}),e.jsx("div",{className:"h-8"})]})]})})};Rd.__docgenInfo={description:"",methods:[],displayName:"MiniappDetailActivity"};function Ps({className:t,...s}){return e.jsx("label",{"data-slot":"label",className:R("gap-2 text-sm leading-none font-medium group-data-[disabled=true]:opacity-50 peer-disabled:opacity-50 flex items-center select-none group-data-[disabled=true]:pointer-events-none peer-disabled:cursor-not-allowed",t),...s})}Ps.__docgenInfo={description:"",methods:[],displayName:"Label"};function qs({className:t,size:s="default",...n}){return e.jsx("div",{"data-slot":"card","data-size":s,className:R("ring-foreground/10 bg-card text-card-foreground gap-4 overflow-hidden rounded-xl py-4 text-sm ring-1 has-data-[slot=card-footer]:pb-0 has-[>img:first-child]:pt-0 data-[size=sm]:gap-3 data-[size=sm]:py-3 data-[size=sm]:has-data-[slot=card-footer]:pb-0 *:[img:first-child]:rounded-t-xl *:[img:last-child]:rounded-b-xl group/card flex flex-col",t),...n})}function Us({className:t,...s}){return e.jsx("div",{"data-slot":"card-content",className:R("px-4 group-data-[size=sm]/card:px-3",t),...s})}qs.__docgenInfo={description:"",methods:[],displayName:"Card",props:{size:{required:!1,tsType:{name:"union",raw:'"default" | "sm"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"sm"'}]},description:"",defaultValue:{value:'"default"',computed:!1}}}};Us.__docgenInfo={description:"",methods:[],displayName:"CardContent"};function By({queryAddress:t,queryChain:s}){const{t:n}=L(["common"]),a=Ms(),r=$t(),{data:o,isLoading:c,error:i}=r.nativeBalance.useState({address:t},{enabled:!!t});return e.jsx(qs,{className:R("transition-all",c&&"opacity-50"),children:e.jsx(Us,{className:"pt-6",children:i?e.jsxs("div",{className:"flex items-center gap-3 text-destructive",children:[e.jsx(xt,{className:"size-5 shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:n("common:addressLookup.error")}),e.jsx("div",{className:"text-sm opacity-80",children:i.message})]})]}):o?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-primary/10 flex size-12 items-center justify-center rounded-full",children:e.jsx(Gm,{className:"text-primary size-6"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[o.amount.toFormatted()," ",o.symbol]}),e.jsx("div",{className:"text-muted-foreground text-sm",children:n("common:addressLookup.onChain",{chain:a.find(d=>d.id===s)?.name??s})})]})]}):c?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(Ce,{size:"lg"})}):null})})}function zd(){const{t}=L(["common","wallet"]),{goBack:s}=se(),n=Ms(),[a,r]=l.useState("ethereum"),[o,c]=l.useState(""),[i,d]=l.useState(""),[u,m]=l.useState(""),[f,h]=l.useState(!1),v=l.useCallback(()=>{o.trim()&&(h(!0),d(o.trim()),m(a),setTimeout(()=>h(!1),100))},[o,a]),j=l.useCallback(g=>{g.key==="Enter"&&v()},[v]),p=n.filter(g=>g.chainKind==="evm"),x=n.filter(g=>g.chainKind!=="evm");return e.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[e.jsx(U,{title:t("common:addressLookup.balanceTitle"),onBack:s}),e.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ps,{children:t("common:addressLookup.chain")}),e.jsxs(ws,{value:a,onValueChange:g=>g&&r(g),children:[e.jsx(Cs,{children:e.jsx(ks,{})}),e.jsxs(Ss,{children:[p.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-muted-foreground px-2 py-1.5 text-xs font-medium",children:"EVM"}),p.map(g=>e.jsx(Dt,{value:g.id,children:g.name},g.id))]}),x.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-muted-foreground px-2 py-1.5 text-xs font-medium",children:t("common:addressLookup.otherChains")}),x.map(g=>e.jsx(Dt,{value:g.id,children:g.name},g.id))]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ps,{children:t("common:addressLookup.address")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Re,{placeholder:t("common:addressLookup.addressPlaceholder"),value:o,onChange:g=>c(g.target.value),onKeyDown:j,className:"flex-1 font-mono text-sm"}),e.jsx(H,{onClick:v,disabled:!o.trim()||f,children:f?e.jsx(Ce,{size:"sm"}):e.jsx(Ds,{className:"size-4"})})]})]}),i&&u&&e.jsx(bt,{chainId:u,fallback:e.jsx(qs,{children:e.jsx(Us,{className:"pt-6",children:e.jsx("p",{className:"text-muted-foreground text-center",children:"Chain not supported"})})}),children:e.jsx(By,{queryAddress:i,queryChain:u})}),!1]})]})}zd.__docgenInfo={description:"",methods:[],displayName:"AddressBalancePage"};const Dd=()=>e.jsx(te,{children:e.jsx(zd,{})});Dd.__docgenInfo={description:"",methods:[],displayName:"AddressBalanceActivity"};function Oy(t,s){return(parseFloat(t)/Math.pow(10,s)).toLocaleString(void 0,{maximumFractionDigits:6})}function Fy(t){return new Date(t).toLocaleString()}function Wy({tx:t,address:s}){const n=t.direction==="out"||t.from.toLowerCase()===s.toLowerCase(),a=t.assets.find(i=>i.assetType==="native"||i.assetType==="token"),r=a?a.value:"0",o=a?a.symbol:"",c=a?a.decimals:0;return e.jsxs("div",{className:"flex items-center gap-3 py-3 border-b last:border-b-0",children:[e.jsx("div",{className:`p-2 rounded-full ${n?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:n?e.jsx(lo,{className:"size-4"}):e.jsx(zm,{className:"size-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium truncate",children:n?`To: ${t.to}`:`From: ${t.from}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:Fy(t.timestamp)})]}),e.jsxs("div",{className:`text-sm font-medium ${n?"text-red-600":"text-green-600"}`,children:[n?"-":"+",Oy(r,c)," ",o]})]})}function $y({searchAddress:t,selectedChain:s,explorerUrl:n,onOpenExplorer:a}){const{t:r}=L(["common"]),o=Ms(),c=l.useMemo(()=>o.find(h=>h.id===s),[o,s]),i=$t(),{data:d,isLoading:u,error:m}=i.transactionHistory.useState({address:t,limit:50},{enabled:!!t}),f=!(m instanceof Nu);return e.jsx(qs,{children:e.jsxs(Us,{className:"pt-6",children:[u?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(be,{className:"size-6 animate-spin text-muted-foreground"})}):m?e.jsx("div",{className:"text-center py-8 text-destructive",children:r("common:addressLookup.queryError")}):d&&d.length>0?e.jsx("div",{className:"divide-y",children:d.map(h=>e.jsx(Wy,{tx:h,address:t},h.hash))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:f?e.jsx("p",{children:r("common:addressLookup.noTransactions")}):e.jsx("p",{children:r("common:addressLookup.useExplorerHint")})}),n&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs(H,{variant:f?"outline":"default",size:"sm",className:"w-full gap-2",onClick:a,children:[e.jsx(ea,{className:"size-4"}),r("common:addressLookup.viewOnExplorer",{name:c?.name??s})]})})]})})}function Ld(){const{t}=L(["common","wallet"]),{goBack:s}=se(),n=Ms(),[a,r]=l.useState("bfmeta"),[o,c]=l.useState(""),[i,d]=l.useState(""),[u,m]=l.useState(""),f=l.useMemo(()=>n.find(y=>y.id===u),[n,u]),h=l.useMemo(()=>{if(!f?.explorer||!i.trim())return null;const{queryAddress:y,url:N}=f.explorer;return y?y.replace(":address",i.trim()):`${N}/address/${i.trim()}`},[f,i]),v=l.useCallback(()=>{o.trim()&&(d(o.trim()),m(a))},[o,a]),j=l.useCallback(y=>{y.key==="Enter"&&v()},[v]),p=l.useCallback(()=>{h&&window.open(h,"_blank","noopener,noreferrer")},[h]),x=n.filter(y=>y.chainKind==="evm"),g=n.filter(y=>y.chainKind!=="evm");return e.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[e.jsx(U,{title:t("common:addressLookup.transactionsTitle"),onBack:s}),e.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ps,{children:t("common:addressLookup.chain")}),e.jsxs(ws,{value:a,onValueChange:y=>y&&r(y),children:[e.jsx(Cs,{children:e.jsx(ks,{})}),e.jsxs(Ss,{children:[x.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-muted-foreground px-2 py-1.5 text-xs font-medium",children:"EVM"}),x.map(y=>e.jsx(Dt,{value:y.id,children:y.name},y.id))]}),g.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-muted-foreground px-2 py-1.5 text-xs font-medium",children:t("common:addressLookup.otherChains")}),g.map(y=>e.jsx(Dt,{value:y.id,children:y.name},y.id))]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ps,{children:t("common:addressLookup.address")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Re,{placeholder:t("common:addressLookup.addressPlaceholder"),value:o,onChange:y=>c(y.target.value),onKeyDown:j,className:"flex-1 font-mono text-sm"}),e.jsx(H,{onClick:v,disabled:!o.trim(),children:e.jsx(Ds,{className:"size-4"})})]})]}),i&&u&&e.jsx(bt,{chainId:u,fallback:e.jsx(qs,{children:e.jsx(Us,{className:"pt-6",children:e.jsx("p",{className:"text-muted-foreground text-center",children:"Chain not supported"})})}),children:e.jsx($y,{searchAddress:i,selectedChain:u,explorerUrl:h,onOpenExplorer:p})})]})]})}Ld.__docgenInfo={description:"",methods:[],displayName:"AddressTransactionsPage"};const Bd=()=>e.jsx(te,{children:e.jsx(Ld,{})});Bd.__docgenInfo={description:"",methods:[],displayName:"AddressTransactionsActivity"};const{useFlow:G}=Xp({transitionDuration:350,plugins:[Zp(),kh({theme:"cupertino"}),Fx({routes:{MainTabsActivity:"/",WalletListActivity:"/wallet/list",WalletConfigActivity:"/wallet/:walletId",WalletCreateActivity:"/wallet/create",SendActivity:"/send",DestroyActivity:"/destroy",ReceiveActivity:"/receive",SettingsActivity:"/settings",SettingsLanguageActivity:"/settings/language",SettingsCurrencyActivity:"/settings/currency",SettingsChainsActivity:"/settings/chains",SettingsMnemonicActivity:"/settings/mnemonic",SettingsWalletLockActivity:"/settings/wallet-lock",SettingsWalletChainsActivity:"/settings/wallet-chains",SettingsStorageActivity:"/settings/storage",HistoryActivity:"/history",TransactionDetailActivity:"/transaction/:txId",ScannerActivity:"/scanner",AuthorizeAddressActivity:"/authorize/address/:id",AuthorizeSignatureActivity:"/authorize/signature/:id",OnboardingRecoverActivity:"/onboarding/recover",TokenDetailActivity:"/token/:tokenId",AddressBookActivity:"/address-book",MyCardActivity:"/my-card",NotificationsActivity:"/notifications",StakingActivity:"/staking",WelcomeActivity:"/welcome",SettingsSourcesActivity:"/settings/sources",MiniappDetailActivity:"/miniapp/:appId/detail",AddressBalanceActivity:"/address-balance",AddressTransactionsActivity:"/address-transactions",ChainSelectorJob:"/job/chain-selector",WalletRenameJob:"/job/wallet-rename/:walletId",WalletDeleteJob:"/job/wallet-delete/:walletId",WalletLockConfirmJob:"/job/wallet-lock-confirm",TwoStepSecretConfirmJob:"/job/two-step-secret-confirm",SetTwoStepSecretJob:"/job/set-two-step-secret",MnemonicOptionsJob:"/job/mnemonic-options",ContactEditJob:"/job/contact-edit",ContactPickerJob:"/job/contact-picker",WalletAddJob:"/job/wallet-add",WalletListJob:"/job/wallet-list",SecurityWarningJob:"/job/security-warning",TransferConfirmJob:"/job/transfer-confirm",TransferWalletLockJob:"/job/transfer-wallet-lock",FeeEditJob:"/job/fee-edit",ScannerJob:"/job/scanner",ContactAddConfirmJob:"/job/contact-add-confirm",ContactShareJob:"/job/contact-share",ClearDataConfirmJob:"/job/clear-data-confirm",WalletPickerJob:"/job/wallet-picker",SigningConfirmJob:"/job/signing-confirm",PermissionRequestJob:"/job/permission-request",MiniappTransferConfirmJob:"/job/miniapp-transfer-confirm",MiniappDestroyConfirmJob:"/job/miniapp-destroy-confirm",MiniappSignTransactionJob:"/job/miniapp-sign-transaction",ChainSwitchConfirmJob:"/job/chain-switch-confirm",CryptoAuthorizeJob:"/job/crypto-authorize"},fallbackActivity:()=>"MainTabsActivity",useHash:!0,urlPatternOptions:{segmentValueCharset:"a-zA-Z0-9-._~ %"}})],activities:{MainTabsActivity:xl,WalletListActivity:vl,WalletConfigActivity:yl,WalletCreateActivity:jl,SendActivity:kl,DestroyActivity:Al,ReceiveActivity:Tl,SettingsActivity:Pl,SettingsLanguageActivity:El,SettingsCurrencyActivity:Rl,SettingsChainsActivity:Vl,SettingsMnemonicActivity:Kl,SettingsWalletLockActivity:Ql,SettingsWalletChainsActivity:Pd,SettingsStorageActivity:Ed,HistoryActivity:Xl,TransactionDetailActivity:ed,ScannerActivity:sd,AuthorizeAddressActivity:rd,AuthorizeSignatureActivity:od,OnboardingRecoverActivity:dd,TokenDetailActivity:md,AddressBookActivity:pd,MyCardActivity:gd,NotificationsActivity:yd,StakingActivity:Sd,WelcomeActivity:Id,SettingsSourcesActivity:Md,MiniappDetailActivity:Rd,AddressBalanceActivity:Dd,AddressTransactionsActivity:Bd,ChainSelectorJob:Dc,WalletRenameJob:Bc,WalletDeleteJob:Oc,WalletLockConfirmJob:Fc,TwoStepSecretConfirmJob:Wc,SetTwoStepSecretJob:qc,MnemonicOptionsJob:Uc,ContactEditJob:Vc,ContactPickerJob:Jc,WalletAddJob:Kc,WalletListJob:Gc,SecurityWarningJob:Qc,TransferConfirmJob:Xc,TransferWalletLockJob:el,FeeEditJob:Hc,ScannerJob:tl,ContactAddConfirmJob:sl,ContactShareJob:nl,ClearDataConfirmJob:al,WalletPickerJob:rl,SigningConfirmJob:il,PermissionRequestJob:ol,MiniappTransferConfirmJob:cl,MiniappDestroyConfirmJob:ul,MiniappSignTransactionJob:ml,ChainSwitchConfirmJob:fl,CryptoAuthorizeJob:pl}});function Hy(t,s){const n=Math.abs(t-s);return Math.min(n,360-n)}function qy(t,s,n=30){if(s.length===0)return 1;let a=180;for(const r of s){const o=Hy(t,r);o<a&&(a=o)}return a<n?a/n:1}function Uy(t){return Ud.map(s=>({...s,weight:qy(s.hue,t)}))}function zn({mode:t,walletId:s,onEditOnlyComplete:n,className:a}){const{t:r}=L(["wallet","onboarding","common"]),{push:o}=G(),c=gt(),i=c.find(B=>B.id===s),d=ze(),u=zi(),m=Lt(),[f,h]=l.useState(t==="edit-only"?"edit":t),[v,j]=l.useState(""),[p,x]=l.useState(0),g=l.useRef(null),[y,N]=l.useState(!1),b=l.useMemo(()=>c.filter(B=>B.id!==s).map(B=>B.themeHue),[c,s]),A=l.useMemo(()=>Uy(b),[b]);l.useEffect(()=>{i&&(j(i.name),x(i.themeHue))},[i]);const S=l.useMemo(()=>i?.chainAddresses.find(B=>B.chain===d)??i?.chainAddresses[0],[i,d]),C=l.useCallback(B=>{if(!g.current)return;const Q=g.current.getBoundingClientRect(),X=Math.max(0,Math.min(B-Q.left,Q.width))/Q.width,Z=Math.round(X*3600)/10;x(Z)},[]),_=B=>{B.stopPropagation(),N(!0),C(B.clientX)},w=B=>{B.stopPropagation(),N(!0),B.touches[0]&&C(B.touches[0].clientX)};l.useEffect(()=>{if(!y)return;const B=X=>C(X.clientX),Q=X=>{X.touches[0]&&C(X.touches[0].clientX)},Y=()=>N(!1);return document.addEventListener("mousemove",B),document.addEventListener("mouseup",Y),document.addEventListener("touchmove",Q),document.addEventListener("touchend",Y),()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",Y),document.removeEventListener("touchmove",Q),document.removeEventListener("touchend",Y)}},[y,C]);const T=l.useCallback(()=>{o("ChainSelectorJob",{})},[o]),P=l.useCallback(()=>{i&&(j(i.name),x(i.themeHue)),h("edit")},[i]),I=l.useCallback(async()=>{if(!i)return;const B=v.trim();B&&B!==i.name&&await me.updateWalletName(i.id,B),p!==i.themeHue&&await me.updateWalletThemeHue(i.id,p),h("default")},[i,v,p]),k=l.useCallback(()=>{i&&(j(i.name),x(i.themeHue)),h("default")},[i]),M=l.useCallback(async()=>{if(!i)return;const B=v.trim();B&&B!==i.name&&await me.updateWalletName(i.id,B),p!==i.themeHue&&await me.updateWalletThemeHue(i.id,p),n?.()},[i,v,p,n]),E=l.useCallback(async()=>{i&&(await me.setCurrentWallet(i.id),o("SettingsMnemonicActivity",{}))},[i,o]),D=l.useCallback(()=>{i&&o("WalletDeleteJob",{walletId:i.id})},[i,o]);if(!i)return e.jsx("div",{className:R("text-muted-foreground p-4 text-center",a),children:r("wallet:detail.notFound")});const z=f==="edit"||t==="edit-only"?p:i.themeHue,F=f==="edit"||t==="edit-only";return e.jsxs("div",{className:R("space-y-6",a),children:[e.jsx("div",{className:"flex justify-center px-4",children:e.jsx("div",{className:"aspect-[1.6/1] w-full max-w-[360px]",children:e.jsx(Di,{wallet:{...i,name:F?v:i.name,themeHue:z},themeHue:z,walletNameTestId:"wallet-config-preview-name",chain:S?.chain,chainName:S?.chain||"",address:S?.address||i.address,chainIconUrl:u[S?.chain??""],onOpenChainSelector:T})})}),F?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-muted-foreground text-sm",children:r("onboarding:theme.walletName")}),e.jsxs(ou,{children:[e.jsx(cu,{value:v,onChange:B=>j(B.target.value),placeholder:r("wallet:defaultName"),maxLength:20,className:"text-center"}),e.jsx(lu,{align:"inline-end",children:e.jsx(du,{size:"icon-xs",variant:"ghost",onClick:()=>j(r("onboarding:create.generatedNamePattern",{word:mn(m),suffix:r("onboarding:create.walletSuffix")})),title:r("wallet:randomName"),children:e.jsx(ef,{className:"size-4"})})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:r("onboarding:theme.customColor")}),e.jsxs("span",{className:"text-muted-foreground font-mono",children:[p.toFixed(1),""]})]}),e.jsxs("div",{ref:g,className:"relative h-8 cursor-pointer touch-none rounded-full",style:{background:"linear-gradient(to right, oklch(0.6 0.25 0), oklch(0.6 0.25 60), oklch(0.6 0.25 120), oklch(0.6 0.25 180), oklch(0.6 0.25 240), oklch(0.6 0.25 300), oklch(0.6 0.25 360))"},onMouseDown:_,onTouchStart:w,children:[b.map((B,Q)=>e.jsx("div",{className:"absolute top-0 h-full w-0.5 bg-black/30",style:{left:`${B/360*100}%`},title:r("onboarding:theme.usedColor")},Q)),e.jsx("div",{className:"absolute top-1/2 -translate-x-1/2 -translate-y-1/2",style:{left:`${p/360*100}%`},children:e.jsx("div",{className:"size-6 rounded-full border-2 border-white shadow-md",style:{backgroundColor:`oklch(0.6 0.25 ${p})`}})})]})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:A.map(B=>{const Q=Math.abs(p-B.hue)<.5,Y=B.weight<.5;return e.jsx("button",{type:"button",onClick:()=>x(B.hue),className:R("relative size-10 rounded-full transition-all","ring-offset-background focus-visible:ring-ring focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none",Q&&"ring-primary ring-2 ring-offset-2",Y&&"opacity-50"),style:{backgroundColor:B.color},title:B.name,children:Q&&e.jsx(fe,{className:"absolute inset-0 m-auto size-5 text-white drop-shadow-md"})},B.hue)})})]}),t==="edit-only"?e.jsx(H,{className:"w-full",onClick:M,disabled:!v.trim(),"data-testid":"theme-complete-button",style:{"--primary-hue":p,"--primary":`oklch(var(--primary-lightness) var(--primary-saturation) ${p})`},children:r("common:confirm")}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{variant:"outline",className:"flex-1",onClick:k,children:r("common:cancel")}),e.jsx(H,{className:"flex-1",onClick:I,disabled:!v.trim(),style:{"--primary-hue":p,"--primary":`oklch(var(--primary-lightness) var(--primary-saturation) ${p})`},children:r("common:save")})]})]}):e.jsxs("div",{className:"flex justify-center gap-8",children:[e.jsxs("button",{onClick:P,className:"group flex flex-col items-center gap-1.5",children:[e.jsx("div",{className:"bg-primary/10 text-primary group-hover:bg-primary/20 flex size-12 items-center justify-center rounded-full transition-all active:scale-95",children:e.jsx(gf,{className:"size-5"})}),e.jsx("span",{className:"text-xs font-medium",children:r("wallet:detail.editName")})]}),e.jsxs("button",{onClick:E,className:"group flex flex-col items-center gap-1.5",children:[e.jsx("div",{className:"bg-primary/10 text-primary group-hover:bg-primary/20 flex size-12 items-center justify-center rounded-full transition-all active:scale-95",children:e.jsx(Ea,{className:"size-5"})}),e.jsx("span",{className:"text-xs font-medium",children:r("wallet:detail.exportMnemonic")})]}),e.jsxs("button",{onClick:D,className:"group flex flex-col items-center gap-1.5",children:[e.jsx("div",{className:"bg-destructive/10 text-destructive group-hover:bg-destructive/20 flex size-12 items-center justify-center rounded-full transition-all active:scale-95",children:e.jsx(Bt,{className:"size-5"})}),e.jsx("span",{className:"text-destructive text-xs font-medium",children:r("wallet:detail.deleteWallet")})]})]})]})}zn.__docgenInfo={description:`
- default: + edit
- edit:  default  default
- edit-only: / onEditOnlyComplete`,methods:[],displayName:"WalletConfig",props:{mode:{required:!0,tsType:{name:"union",raw:"'edit-only' | 'default' | 'edit'",elements:[{name:"literal",value:"'edit-only'"},{name:"literal",value:"'default'"},{name:"literal",value:"'edit'"}]},description:""},walletId:{required:!0,tsType:{name:"string"},description:""},onEditOnlyComplete:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};export{fd as A,Ul as C,Sl as D,cf as I,_l as L,xd as M,vd as N,Il as R,je as S,Zl as T,Jl as V,zn as W,Ld as a,Yl as b,Gl as c,Ml as d,ps as e,nr as f,gl as g};
