import{j as r,r as c}from"./iframe-Bc5dYfO-.js";import{c as l}from"./utils-4perknFd.js";import{s as f}from"./index-D0E7N0oa.js";import{c as v,B as T}from"./button-BcW1mNGg.js";import{I as G}from"./input-mjNHB9cK.js";import{u as M}from"./useTranslation-pE0FQzrM.js";import{I as A}from"./IconX-D8_buM2p.js";import{I as R}from"./IconCheck-ZF7qLp9s.js";import{I as h}from"./IconAlertCircle-CAwGoiAl.js";import{I as q}from"./IconLoader2-D2qOSHWH.js";function te(t=128){return f.generateMnemonic(t).split(" ")}function B(t){const e=t.join(" ").toLowerCase().trim();return y().some(n=>f.validateMnemonic(e,n))}function L(t){const e=t.toLowerCase();return y().some(n=>n.includes(e))}function y(){return Object.values(f.wordlists).filter(t=>Array.isArray(t))}function w({className:t,...e}){return r.jsx("textarea",{"data-slot":"textarea",className:l("border-input dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 disabled:bg-input/50 dark:disabled:bg-input/80 rounded-lg border bg-transparent px-2.5 py-2 text-base transition-colors focus-visible:ring-[3px] aria-invalid:ring-[3px] md:text-sm placeholder:text-muted-foreground flex field-sizing-content min-h-16 w-full outline-none disabled:cursor-not-allowed disabled:opacity-50",t),...e})}w.__docgenInfo={description:"",methods:[],displayName:"Textarea"};function C({className:t,...e}){return r.jsx("div",{"data-slot":"input-group",role:"group",className:l("border-input dark:bg-input/30 has-[[data-slot=input-group-control]:focus-visible]:border-ring has-[[data-slot=input-group-control]:focus-visible]:ring-ring/50 has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40 has-disabled:bg-input/50 dark:has-disabled:bg-input/80 h-8 rounded-lg border transition-colors has-disabled:opacity-50 has-[[data-slot=input-group-control]:focus-visible]:ring-[3px] has-[[data-slot][aria-invalid=true]]:ring-[3px] has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3 has-[>[data-align=block-start]]:[&>input]:pb-3 has-[>[data-align=inline-end]]:[&>input]:pr-1.5 has-[>[data-align=inline-start]]:[&>input]:pl-1.5 [[data-slot=combobox-content]_&]:focus-within:border-inherit [[data-slot=combobox-content]_&]:focus-within:ring-0 group/input-group relative flex w-full min-w-0 items-center outline-none has-[>textarea]:h-auto",t),...e})}const F=v("text-muted-foreground h-auto gap-2 py-1.5 text-sm font-medium group-data-[disabled=true]/input-group:opacity-50 [&>kbd]:rounded-[calc(var(--radius)-5px)] [&>svg:not([class*='size-'])]:size-4 flex cursor-text items-center justify-center select-none",{variants:{align:{"inline-start":"pl-2 has-[>button]:ml-[-0.3rem] has-[>kbd]:ml-[-0.15rem] order-first","inline-end":"pr-2 has-[>button]:mr-[-0.3rem] has-[>kbd]:mr-[-0.15rem] order-last","block-start":"px-2.5 pt-2 group-has-[>input]/input-group:pt-2 [.border-b]:pb-2 order-first w-full justify-start","block-end":"px-2.5 pb-2 group-has-[>input]/input-group:pb-2 [.border-t]:pt-2 order-last w-full justify-start"}},defaultVariants:{align:"inline-start"}});function k({className:t,align:e="inline-start",...n}){return r.jsx("div",{role:"group","data-slot":"input-group-addon","data-align":e,className:l(F({align:e}),t),onClick:a=>{a.target.closest("button")||a.currentTarget.parentElement?.querySelector("input")?.focus()},...n})}const D=v("gap-2 text-sm shadow-none flex items-center",{variants:{size:{xs:"h-6 gap-1 rounded-[calc(var(--radius)-3px)] px-1.5 [&>svg:not([class*='size-'])]:size-3.5",sm:"","icon-xs":"size-6 rounded-[calc(var(--radius)-3px)] p-0 has-[>svg]:p-0","icon-sm":"size-8 p-0 has-[>svg]:p-0"}},defaultVariants:{size:"xs"}});function I({className:t,type:e="button",variant:n="ghost",size:a="xs",...o}){return r.jsx(T,{type:e,"data-size":a,variant:n,className:l(D({size:a}),t),...o})}function E({className:t,...e}){return r.jsx(G,{"data-slot":"input-group-control",className:l("rounded-none border-0 bg-transparent shadow-none ring-0 focus-visible:ring-0 disabled:bg-transparent aria-invalid:ring-0 dark:bg-transparent dark:disabled:bg-transparent flex-1",t),...e})}function j({className:t,...e}){return r.jsx(w,{"data-slot":"input-group-control",className:l("rounded-none border-0 bg-transparent py-2 shadow-none ring-0 focus-visible:ring-0 disabled:bg-transparent aria-invalid:ring-0 dark:bg-transparent dark:disabled:bg-transparent flex-1 resize-none",t),...e})}C.__docgenInfo={description:"",methods:[],displayName:"InputGroup"};k.__docgenInfo={description:"",methods:[],displayName:"InputGroupAddon",props:{align:{defaultValue:{value:'"inline-start"',computed:!1},required:!1}}};I.__docgenInfo={description:"",methods:[],displayName:"InputGroupButton",props:{type:{required:!1,tsType:{name:"union",raw:'"button" | "submit" | "reset"',elements:[{name:"literal",value:'"button"'},{name:"literal",value:'"submit"'},{name:"literal",value:'"reset"'}]},description:"",defaultValue:{value:'"button"',computed:!1}},variant:{defaultValue:{value:'"ghost"',computed:!1},required:!1},size:{defaultValue:{value:'"xs"',computed:!1},required:!1}}};E.__docgenInfo={description:"",methods:[],displayName:"InputGroupInput"};j.__docgenInfo={description:"",methods:[],displayName:"InputGroupTextarea"};const g=[12,15,18,21,24,36];function O(t){if(t<=0)return null;for(const e of g)if(t<=e)return e;return 36}function H(t){const e=t.trim().toLowerCase();if(!e)return{isValid:!1,wordCount:0,expectedWordCount:null,invalidWords:[],isValidating:!1};const n=e.split(/\s+/).filter(Boolean),a=n.length,o=O(a),p=n.filter(m=>!L(m));return{isValid:g.includes(a)&&p.length===0&&B(n),wordCount:a,expectedWordCount:o,invalidWords:p,isValidating:!1}}function P({onSubmit:t,isSubmitting:e=!1,className:n}){const{t:a}=M("onboarding"),[o,p]=c.useState(""),[d,b]=c.useState({isValid:!1,wordCount:0,expectedWordCount:null,invalidWords:[],isValidating:!1});c.useEffect(()=>{const s=setTimeout(()=>{b(H(o))},150);return()=>clearTimeout(s)},[o]);const m=c.useCallback(s=>{p(s.target.value)},[]),N=c.useCallback(s=>{if(s.preventDefault(),!d.isValid||e)return;const i=o.trim().toLowerCase().split(/\s+/).filter(Boolean);t({mnemonic:i,wordCount:i.length})},[o,d.isValid,e,t]),V=c.useCallback(()=>{p("")},[]),z=c.useCallback(s=>{const i=s.target;i.style.height="auto",i.style.height=Math.min(i.scrollHeight,200)+"px"},[]),u=c.useMemo(()=>{const{isValid:s,wordCount:i,expectedWordCount:W,invalidWords:x}=d;if(i===0)return{type:"hint",text:a("recover.form.hint")};if(x.length>0){const _=x[0];return{type:"error",text:a("recover.form.invalidWord",{word:_})}}return g.includes(i)?s?{type:"success",text:a("recover.form.validMnemonic")}:{type:"error",text:a("recover.form.checksumFailed")}:{type:"warning",text:a("recover.form.wordCountHint",{current:i,expected:W})}},[d,a]);return r.jsxs("form",{onSubmit:N,className:l("space-y-4",n),children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:a("recover.form.enterMnemonic")}),d.wordCount>0&&r.jsx("span",{className:"text-muted-foreground text-xs",children:a("recover.form.wordCount",{count:d.wordCount})})]}),r.jsxs(C,{className:l("h-auto",d.isValid&&"border-green-500/50",u.type==="error"&&"border-destructive/50"),children:[r.jsx(j,{"data-testid":"mnemonic-textarea",value:o,onChange:s=>{m(s),z(s)},placeholder:a("recover.form.placeholder"),disabled:e,rows:4,className:"min-h-24",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1}),o&&!e&&r.jsx(k,{align:"inline-end",className:"self-start pt-2",children:r.jsx(I,{size:"icon-xs",onClick:V,"aria-label":a("recover.form.clear"),children:r.jsx(A,{className:"size-4"})})})]}),r.jsxs("div",{className:l("flex items-start gap-2 rounded-lg px-3 py-2 text-sm",u.type==="hint"&&"bg-muted/50 text-muted-foreground",u.type==="success"&&"bg-green-500/10 text-green-600",u.type==="warning"&&"bg-yellow-500/10 text-yellow-600",u.type==="error"&&"bg-destructive/10 text-destructive"),children:[u.type==="success"&&r.jsx(R,{className:"mt-0.5 size-4 shrink-0"}),u.type==="error"&&r.jsx(h,{className:"mt-0.5 size-4 shrink-0"}),u.type==="warning"&&r.jsx(h,{className:"mt-0.5 size-4 shrink-0"}),r.jsx("span",{children:u.text})]}),r.jsx("div",{className:"bg-muted/30 text-muted-foreground rounded-lg px-3 py-2 text-xs",children:r.jsx("p",{children:a("recover.form.securityNotice")})}),r.jsxs("button",{type:"submit","data-testid":"continue-button",disabled:!d.isValid||e,className:l("flex w-full items-center justify-center gap-2 rounded-full py-3 font-medium text-primary-foreground transition-colors","bg-primary hover:bg-primary/90","disabled:cursor-not-allowed disabled:opacity-50"),children:[e&&r.jsx(q,{className:"size-4 animate-spin"}),a(e?"recover.form.verifying":"recover.form.continue")]})]})}P.__docgenInfo={description:`Recover wallet form component
Provides textarea input with real-time BIP39 validation`,methods:[],displayName:"RecoverWalletForm",props:{onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: RecoverWalletFormData) => void",signature:{arguments:[{type:{name:"RecoverWalletFormData"},name:"data"}],return:{name:"void"}}},description:"Form submit callback with validated mnemonic"},isSubmitting:{required:!1,tsType:{name:"boolean"},description:"Whether form is submitting",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"Additional class name"}}};export{C as I,P as R,E as a,k as b,I as c,te as g,B as v};
