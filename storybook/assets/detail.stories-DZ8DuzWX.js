import{j as e,r as p}from"./iframe-BJgN3E0_.js";import{P}from"./page-header-D9j4KJo5.js";import{B as f}from"./button-DI21DV3e.js";import{A as v}from"./address-display-BMuj8SYc.js";import{c as g}from"./utils-4perknFd.js";import{u as B}from"./useTranslation-BA-yisZJ.js";import{I as S}from"./IconAlertCircle-Cq4rmm7W.js";import{I as z}from"./IconExternalLink-DYwrOpBa.js";import{I as b}from"./IconLoader2-CqcErjZ-.js";import{I as H}from"./IconRefresh-BWwtUu7X.js";import{I as E}from"./IconTrash-CXRVeQ9Z.js";import{I as w}from"./IconClock-GxbAvHyj.js";import{I as F}from"./IconCheck-BUPYeoq8.js";import"./preload-helper-PPVm8Dsz.js";import"./useButton-kGvBe4pw.js";import"./useRenderElement-DsRqdjfH.js";import"./web-Dy1DU2Dg.js";import"./createReactComponent-BPs_Exgf.js";import"./breakpoint-DQ_qwb34.js";import"./schemas-CO8_C8zP.js";import"./index-mS2T2Imm.js";const ne={title:"Pages/PendingTx/DetailPage",parameters:{layout:"fullscreen"}};function R(r){switch(r){case"created":case"broadcasting":return b;case"broadcasted":return w;case"failed":return S;case"confirmed":return F;default:return w}}function L(r){switch(r){case"created":case"broadcasting":return"text-blue-500 bg-blue-500/10";case"broadcasted":return"text-amber-500 bg-amber-500/10";case"failed":return"text-red-500 bg-red-500/10";case"confirmed":return"text-green-500 bg-green-500/10";default:return"text-muted-foreground bg-muted"}}function m({initialStatus:r,errorMessage:k,txHash:I}){const{t:s}=B(["transaction","common"]),[a,h]=p.useState(r),[l,j]=p.useState(!1),[x,N]=p.useState(!1),t={fromAddress:"bXXX1234567890abcdef",txHash:I,errorCode:a==="failed"?"001-11028":void 0,errorMessage:a==="failed"?k:void 0,retryCount:a==="failed"?2:0,createdAt:Date.now()-3e5,meta:{type:"transfer",displayAmount:"100.5",displaySymbol:"BFM",displayToAddress:"bYYY0987654321fedcba"}},C=R(a),y=L(a),T=a==="broadcasting",u=a==="failed",M=a==="broadcasted",D=()=>{j(!0),h("broadcasting"),setTimeout(()=>{j(!1),h("broadcasted")},1500)},A=()=>{N(!0),setTimeout(()=>{N(!1),alert("Transaction deleted")},500)};return e.jsxs("div",{className:"bg-muted/30 flex min-h-screen flex-col",children:[e.jsx(P,{title:s("pendingTx.title"),onBack:()=>{}}),e.jsxs("div",{className:"flex-1 space-y-4 p-4",children:[e.jsxs("div",{className:"bg-card flex flex-col items-center gap-3 rounded-xl p-6 shadow-sm",children:[e.jsx("div",{className:g("flex size-16 items-center justify-center rounded-full",y),children:e.jsx(C,{className:g("size-8",T&&"animate-spin")})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:s(`type.${t.meta?.type}`,t.meta?.type)}),e.jsxs("p",{className:"text-2xl font-semibold",children:[t.meta?.displayAmount," ",t.meta?.displaySymbol]})]}),e.jsx("div",{className:g("rounded-full px-3 py-1 text-sm font-medium",y),children:s(`txStatus.${a}`)}),e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:s(`txStatus.${a}Desc`)})]}),u&&t.errorMessage&&e.jsx("div",{className:"bg-destructive/10 border-destructive/20 rounded-xl border p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(S,{className:"text-destructive mt-0.5 size-5 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-destructive text-sm font-medium",children:s("pendingTx.failed")}),e.jsx("p",{className:"text-destructive/80 mt-1 text-sm",children:t.errorMessage}),t.errorCode&&e.jsxs("p",{className:"text-destructive/60 mt-1 text-xs",children:[s("detail.errorCode"),": ",t.errorCode]})]})]})}),e.jsxs("div",{className:"bg-card space-y-3 rounded-xl p-4 shadow-sm",children:[e.jsx("h3",{className:"text-muted-foreground text-sm font-medium",children:s("detail.info")}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:s("detail.fromAddress")}),e.jsx(v,{address:t.fromAddress,copyable:!0,className:"max-w-[180px]"})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:s("detail.toAddress")}),e.jsx(v,{address:t.meta.displayToAddress,copyable:!0,className:"max-w-[180px]"})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:s("detail.chain")}),e.jsx("span",{className:"text-sm",children:"BioForest Mainnet"})]}),t.txHash&&e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:s("detail.hash")}),e.jsxs("span",{className:"text-muted-foreground max-w-[180px] truncate text-xs font-mono",children:[t.txHash.slice(0,16),"...",t.txHash.slice(-8)]})]}),t.retryCount>0&&e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:s("pendingTx.retryCount")}),e.jsx("span",{className:"text-sm",children:t.retryCount})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:s("detail.time")}),e.jsx("span",{className:"text-sm",children:new Date(t.createdAt).toLocaleString()})]})]}),e.jsxs("div",{className:"space-y-2",children:[M&&e.jsxs(f,{variant:"outline",className:"w-full",children:[e.jsx(z,{className:"mr-2 size-4"}),s("detail.openInExplorer")]}),u&&e.jsxs(f,{className:"w-full",onClick:D,disabled:l,"data-testid":"retry-button",children:[l?e.jsx(b,{className:"mr-2 size-4 animate-spin"}):e.jsx(H,{className:"mr-2 size-4"}),s(l?"common:loading":"pendingTx.retry")]}),(u||a==="created")&&e.jsxs(f,{variant:"destructive",className:"w-full",onClick:A,disabled:x,"data-testid":"delete-button",children:[x?e.jsx(b,{className:"mr-2 size-4 animate-spin"}):e.jsx(E,{className:"mr-2 size-4"}),s(x?"common:loading":"pendingTx.delete")]})]})]})]})}const d={render:()=>e.jsx("div",{className:"max-w-md mx-auto min-h-screen bg-background",children:e.jsx(m,{initialStatus:"broadcasting"})})},i={render:()=>e.jsx("div",{className:"max-w-md mx-auto min-h-screen bg-background",children:e.jsx(m,{initialStatus:"broadcasted",txHash:"0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"})})},n={render:()=>e.jsx("div",{className:"max-w-md mx-auto min-h-screen bg-background",children:e.jsx(m,{initialStatus:"failed",errorMessage:"资产余额不足"})})},c={render:()=>e.jsx("div",{className:"max-w-md mx-auto min-h-screen bg-background",children:e.jsx(m,{initialStatus:"confirmed",txHash:"0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"})})},o={render:()=>e.jsx("div",{className:"max-w-md mx-auto min-h-screen bg-background",children:e.jsx(m,{initialStatus:"failed",errorMessage:"手续费不足"})})};d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:`{
  render: () => <div className="max-w-md mx-auto min-h-screen bg-background">
      <MockDetailPage initialStatus="broadcasting" />
    </div>
}`,...d.parameters?.docs?.source},description:{story:"广播中状态",...d.parameters?.docs?.description}}};i.parameters={...i.parameters,docs:{...i.parameters?.docs,source:{originalSource:`{
  render: () => <div className="max-w-md mx-auto min-h-screen bg-background">
      <MockDetailPage initialStatus="broadcasted" txHash="0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef" />
    </div>
}`,...i.parameters?.docs?.source},description:{story:"等待上链状态",...i.parameters?.docs?.description}}};n.parameters={...n.parameters,docs:{...n.parameters?.docs,source:{originalSource:`{
  render: () => <div className="max-w-md mx-auto min-h-screen bg-background">
      <MockDetailPage initialStatus="failed" errorMessage="资产余额不足" />
    </div>
}`,...n.parameters?.docs?.source},description:{story:"广播失败状态",...n.parameters?.docs?.description}}};c.parameters={...c.parameters,docs:{...c.parameters?.docs,source:{originalSource:`{
  render: () => <div className="max-w-md mx-auto min-h-screen bg-background">
      <MockDetailPage initialStatus="confirmed" txHash="0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef" />
    </div>
}`,...c.parameters?.docs?.source},description:{story:"已确认状态",...c.parameters?.docs?.description}}};o.parameters={...o.parameters,docs:{...o.parameters?.docs,source:{originalSource:`{
  render: () => <div className="max-w-md mx-auto min-h-screen bg-background">
      <MockDetailPage initialStatus="failed" errorMessage="手续费不足" />
    </div>
}`,...o.parameters?.docs?.source},description:{story:"交互测试 - 重试和删除",...o.parameters?.docs?.description}}};const ce=["Broadcasting","Broadcasted","Failed","Confirmed","InteractiveTest"];export{i as Broadcasted,d as Broadcasting,c as Confirmed,n as Failed,o as InteractiveTest,ce as __namedExportsOrder,ne as default};
