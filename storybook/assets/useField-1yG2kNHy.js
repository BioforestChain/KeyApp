import{r as d}from"./iframe-BNKLbH-6.js";import{N as l,f as I,E as V,b as p,e as g,a as C}from"./useRenderElement-CgFrWgrs.js";import{a as h}from"./useBaseUiId-DDFK4Obv.js";import{r as E}from"./index-DGqLkL0S.js";function _({controlled:e,default:t,name:i,state:n="value"}){const{current:o}=d.useRef(e!==void 0),[a,u]=d.useState(t),r=o?e:a,c=d.useCallback(m=>{o||u(m)},[]);return[r,c]}let x=(function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e})({});const M={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},B={valid(e){return e===null?null:e?{[x.valid]:""}:{[x.invalid]:""}}},R=d.createContext({invalid:void 0,name:void 0,validityData:{state:M,errors:[],error:"",value:"",initialValue:null},setValidityData:l,disabled:void 0,touched:!1,setTouched:l,dirty:!1,setDirty:l,filled:!1,setFilled:l,focused:!1,setFocused:l,validate:()=>null,validationMode:"onSubmit",validationDebounceTime:0,shouldValidateOnChange:()=>!1,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1},validation:{getValidationProps:(e=V)=>e,getInputValidationProps:(e=V)=>e,inputRef:{current:null},commit:async()=>{}}});function L(e=!0){const t=d.useContext(R);if(t.setValidityData===l&&!e)throw new Error(I(28));return t}const S=d.createContext({controlId:void 0,setControlId:l,labelId:void 0,setLabelId:l,messageIds:[],setMessageIds:l,getDescriptionProps:e=>e});function T(){return d.useContext(S)}function N(e={}){const{id:t,implicit:i=!1,controlRef:n}=e,{controlId:o,setControlId:a}=T(),u=h(t);return p(()=>{if(!(!i&&!t||a===l)){if(i){const r=n?.current;g(r)&&r.closest("label")!=null?a(t??null):a(o??u)}else t&&a(t);return()=>{t&&a(void 0)}}},[t,n,o,a,i,u]),o??u}const D=d.createContext({formRef:{current:{fields:new Map}},errors:{},clearErrors:l,validationMode:"onSubmit",submitAttemptedRef:{current:!1}});function w(){return d.useContext(D)}function O(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}function Y(e){const{enabled:t=!0,value:i,id:n,name:o,controlRef:a,commit:u}=e,{formRef:r}=w(),{invalid:c,markedDirtyRef:m,validityData:v,setValidityData:b}=L(),f=C(e.getValue);p(()=>{if(!t)return;let s=i;s===void 0&&(s=f()),v.initialValue===null&&s!==null&&b(y=>({...y,initialValue:s}))},[t,b,i,v.initialValue,f]),p(()=>{!t||!n||r.current.fields.set(n,{getValue:f,name:o,controlRef:a,validityData:O(v,c),validate(){let s=i;s===void 0&&(s=f()),m.current=!0,E.flushSync(()=>u(s))}})},[u,a,t,r,f,n,c,m,o,v,i]),p(()=>{const s=r.current.fields;return()=>{n&&s.delete(n)}},[r,n])}export{T as a,N as b,_ as c,Y as d,w as e,B as f,L as u};
