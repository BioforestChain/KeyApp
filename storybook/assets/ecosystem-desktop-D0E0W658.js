import{r as A,j as o,u as O,y as it}from"./iframe-Cr_UN5ps.js";import{b as Ce,S as st,a as be}from"./swiper-DUMS8xXX.js";import{u as at,C as ot}from"./swiper-sync-context-BOMM0CvE.js";import{a as ae,f as ct,b as lt,c as ut,d as pt,e as dt,g as ft,M as ht}from"./my-apps-page-BlcLgx84.js";import{c as $}from"./utils-4perknFd.js";import{B as mt}from"./button-D1tYjhCW.js";import{u as fe}from"./useTranslation-CFi8Ka59.js";import{I as xt}from"./IconSearch-2-5ZusLn.js";import{I as gt}from"./IconChevronRight-6U-HJR-6.js";import{I as We}from"./IconApps-9d_8kao3.js";import{I as yt}from"./IconSparkles-H0hZ4IOC.js";import{M as wt}from"./miniapp-splash-screen-CNDir9nl.js";import{b as re,d as V,n as It,p as bt,g as Et,q as At,t as Bt,v as Nt,w as _t,x as vt,y as kt,z as St,A as Tt,B as jt,e as Be,C as Ft,E as Mt,F as Rt,G as Ct,H as me}from"./index-CqAM5tj-.js";import{r as Ut}from"./index-BBEtTe70.js";import{I as Pt}from"./IconDots-CCbtRLTE.js";import{c as _e}from"./createReactComponent-T6tanagy.js";import{A as Lt}from"./index-v6nqj9yV.js";import{m as te}from"./proxy-CgfTp22h.js";/* empty css                     */import{a as Ue}from"./chain-icon-bybjceh8.js";const Dt=[["path",{d:"M21 12a9 9 0 1 1 -18 0a9 9 0 0 1 18 0z",key:"svg-0"}],["path",{d:"M8 11.503a2.5 2.5 0 1 0 4 2v-3a2.5 2.5 0 1 1 4 2",key:"svg-1"}]],qt=_e("outline","brand-miniprogram","BrandMiniprogram",Dt);const $t=[["path",{d:"M12 4l-8 4l8 4l8 -4l-8 -4",key:"svg-0"}],["path",{d:"M4 12l8 4l8 -4",key:"svg-1"}],["path",{d:"M4 16l8 4l8 -4",key:"svg-2"}]],Ot=_e("outline","stack-2","Stack2",$t);const zt=[["path",{d:"M12 7a5 5 0 1 1 -4.995 5.217l-.005 -.217l.005 -.217a5 5 0 0 1 4.995 -4.783z",key:"svg-0"}]],Ht=_e("filled","point-filled","PointFilled",zt);function Wt({swiper:c,extendParams:u,on:m}){u({parallax:{enabled:!1}});const h="[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]",y=(i,w)=>{const{rtl:b}=c,E=b?-1:1,I=i.getAttribute("data-swiper-parallax")||"0";let B=i.getAttribute("data-swiper-parallax-x"),p=i.getAttribute("data-swiper-parallax-y");const g=i.getAttribute("data-swiper-parallax-scale"),x=i.getAttribute("data-swiper-parallax-opacity"),v=i.getAttribute("data-swiper-parallax-rotate");if(B||p?(B=B||"0",p=p||"0"):c.isHorizontal()?(B=I,p="0"):(p=I,B="0"),B.indexOf("%")>=0?B=`${parseInt(B,10)*w*E}%`:B=`${B*w*E}px`,p.indexOf("%")>=0?p=`${parseInt(p,10)*w}%`:p=`${p*w}px`,typeof x<"u"&&x!==null){const k=x-(x-1)*(1-Math.abs(w));i.style.opacity=k}let S=`translate3d(${B}, ${p}, 0px)`;if(typeof g<"u"&&g!==null){const k=g-(g-1)*(1-Math.abs(w));S+=` scale(${k})`}if(v&&typeof v<"u"&&v!==null){const k=v*w*-1;S+=` rotate(${k}deg)`}i.style.transform=S},d=()=>{const{el:i,slides:w,progress:b,snapGrid:E,isElement:I}=c,B=Ce(i,h);c.isElement&&B.push(...Ce(c.hostEl,h)),B.forEach(p=>{y(p,b)}),w.forEach((p,g)=>{let x=p.progress;c.params.slidesPerGroup>1&&c.params.slidesPerView!=="auto"&&(x+=Math.ceil(g/2)-b*(E.length-1)),x=Math.min(Math.max(x,-1),1),p.querySelectorAll(`${h}, [data-swiper-parallax-rotate]`).forEach(v=>{y(v,x)})})},f=(i=c.params.speed)=>{const{el:w,hostEl:b}=c,E=[...w.querySelectorAll(h)];c.isElement&&E.push(...b.querySelectorAll(h)),E.forEach(I=>{let B=parseInt(I.getAttribute("data-swiper-parallax-duration"),10)||i;i===0&&(B=0),I.style.transitionDuration=`${B}ms`})};m("beforeInit",()=>{c.params.parallax.enabled&&(c.params.watchSlidesProgress=!0,c.originalParams.watchSlidesProgress=!0)}),m("init",()=>{c.params.parallax.enabled&&d()}),m("setTranslate",()=>{c.params.parallax.enabled&&d()}),m("setTransition",(i,w)=>{c.params.parallax.enabled&&f(w)})}const Gt="_discoverPage_1xkto_2",Vt="_discoverHeader_1xkto_7",Pe={discoverPage:Gt,discoverHeader:Vt};function Yt(c){const u=new Date;return c("common:date.format",{month:u.getMonth()+1,day:u.getDate(),weekday:c(`common:weekdays.${u.getDay()}`)})}const Le=["from-violet-500 to-purple-600","from-orange-500 to-red-500","from-emerald-500 to-teal-500","from-pink-500 to-rose-500","from-blue-500 to-cyan-500"];function Xt(c,u=0){return c.themeColor||Le[u%Le.length]}function De({app:c,onTap:u}){const{t:m}=fe("ecosystem"),h=c.themeColor||"from-violet-600 via-purple-600 to-indigo-700";return o.jsxs("button",{onClick:u,className:$("group relative w-full overflow-hidden rounded-3xl text-left","shadow-xl shadow-black/10 dark:shadow-black/30","transition-all duration-300 ease-out active:scale-[0.98]","hover:shadow-2xl hover:shadow-black/20"),children:[o.jsx("div",{className:$("absolute inset-0 bg-gradient-to-br",h)}),o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_-20%,rgba(255,255,255,0.3),transparent_50%)]"}),o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_120%,rgba(0,0,0,0.2),transparent_50%)]"}),o.jsxs("div",{className:"@container relative flex min-h-[300px] flex-col p-6",children:[o.jsxs("div",{className:"mb-auto flex items-center gap-2 text-xs font-semibold tracking-wider text-white/80 uppercase",children:[o.jsx(yt,{className:"size-4"}),m("discover.featured")]}),o.jsx("div",{className:"mt-auto",children:o.jsxs("div",{className:"flex items-end gap-4 @sm:gap-5",children:[o.jsx(ae,{src:c.icon,name:c.name,size:"xl",glass:!0,className:"@sm:!size-24 @sm:!rounded-[24px]"}),o.jsxs("div",{className:"min-w-0 flex-1 pb-1",children:[o.jsx("h2",{className:"mb-1.5 text-2xl leading-tight font-bold text-white @sm:text-3xl",children:c.name}),o.jsx("p",{className:"line-clamp-2 text-sm leading-relaxed text-white/75 @sm:text-base",children:c.longDescription?.split(`
`)[0]||c.description})]})]})})]})]})}function Jt({app:c,onTap:u,fallbackColorIndex:m=0}){const h=Xt(c,m);return o.jsxs("button",{onClick:u,className:$("relative w-44 shrink-0 overflow-hidden rounded-2xl text-left","shadow-lg transition-all duration-200 active:scale-[0.96]","snap-start scroll-ml-5"),children:[o.jsx("div",{className:$("absolute inset-0 bg-gradient-to-br",h)}),o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_80%_-10%,rgba(255,255,255,0.25),transparent_40%)]"}),o.jsxs("div",{className:"relative flex h-[160px] flex-col p-4",children:[o.jsx(ae,{src:c.icon,name:c.name,size:"lg",customSize:56,glass:!0,className:"mb-auto"}),o.jsxs("div",{children:[o.jsx("h3",{className:"truncate text-base font-bold text-white",children:c.name}),o.jsx("p",{className:"mt-0.5 truncate text-xs text-white/70",children:c.description})]})]})]})}function Kt({app:c,onTap:u,onOpen:m,rank:h,showRank:y=!1}){const{t:d}=fe("ecosystem");return o.jsxs("div",{className:"flex items-center gap-3 py-3",children:[y&&h!==void 0&&o.jsx("span",{className:"text-muted-foreground/50 w-6 text-center text-lg font-bold",children:h}),o.jsx("button",{onClick:u,className:"shrink-0",children:o.jsx(ae,{src:c.icon,name:c.name,size:"lg",customSize:64,shadow:"sm"})}),o.jsxs("button",{onClick:u,className:"min-w-0 flex-1 text-left",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("h3",{className:"truncate font-semibold",children:c.name}),c.beta&&o.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[10px] font-semibold text-amber-600 dark:bg-amber-900/40 dark:text-amber-400",children:d("common:beta")})]}),o.jsx("p",{className:"text-muted-foreground mt-0.5 truncate text-xs",children:c.description})]}),o.jsx(mt,{size:"sm",variant:"secondary",className:"h-8 shrink-0 rounded-full px-5 text-xs font-bold",onClick:f=>{f.stopPropagation(),m()},children:d("discover.get")})]})}function Zt({message:c}){return o.jsxs("div",{className:"flex flex-col items-center justify-center px-5 py-20 text-center",children:[o.jsx("div",{className:"bg-muted mb-4 flex size-20 items-center justify-center rounded-full",children:o.jsx(We,{className:"text-muted-foreground size-10",stroke:1.5})}),o.jsx("h2",{className:"mb-1 text-lg font-semibold",children:c})]})}const Ge=A.forwardRef(function({apps:u,featuredApp:m,featuredApps:h,recommendedApps:y,hotApps:d,onAppDetail:f,onAppOpen:i},w){const{t:b}=fe(["ecosystem","common"]),E=A.useRef(null);return A.useImperativeHandle(w,()=>({focusSearch:()=>{E.current?.focus()}})),o.jsxs("div",{className:$(Pe.discoverPage,"scrollbar-none h-full overflow-y-auto"),children:[o.jsxs("header",{className:$(Pe.discoverHeader,"sticky top-0 z-10 px-5 pt-12 pb-4"),children:[o.jsx("div",{className:"mb-4 flex items-center justify-between",children:o.jsx("p",{className:"text-foreground text-sm font-medium",children:Yt(b)})}),o.jsxs("div",{className:"relative",children:[o.jsx(xt,{className:"text-muted-foreground absolute top-1/2 left-4 size-5 -translate-y-1/2",stroke:1.5}),o.jsx("input",{ref:E,type:"text",placeholder:b("discover.searchPlaceholder"),className:$("bg-muted/60 w-full rounded-xl py-3 pr-4 pl-12","placeholder:text-muted-foreground/60 text-base","focus:ring-primary/30 focus:ring-2 focus:outline-none","transition-all duration-200")})]})]}),o.jsxs("div",{className:"space-y-8",children:[u.length===0?o.jsx(Zt,{message:b("discover.empty")}):o.jsxs(o.Fragment,{children:[m&&o.jsx("section",{className:"px-5",children:o.jsx(De,{app:m,onTap:()=>f(m)})}),y.length>0&&o.jsxs("section",{children:[o.jsxs("div",{className:"mb-3 flex items-center justify-between px-5",children:[o.jsx("h2",{className:"text-xl font-bold",children:b("discover.recommended")}),o.jsxs("button",{className:"text-primary flex items-center text-sm font-medium",children:[b("discover.viewAll"),o.jsx(gt,{className:"size-4"})]})]}),o.jsx("div",{className:$("flex gap-3 overflow-x-auto px-5 pb-3","snap-x snap-mandatory scroll-smooth","[-ms-overflow-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden"),children:y.map((I,B)=>o.jsx(Jt,{app:I,onTap:()=>f(I),fallbackColorIndex:B},I.id))})]}),o.jsxs("section",{className:"px-5",children:[o.jsx("h2",{className:"mb-3 text-xl font-bold",children:b("discover.hotApps")}),o.jsx("div",{className:"bg-card divide-y rounded-2xl border",children:d.map((I,B)=>o.jsx("div",{className:"px-4",children:o.jsx(Kt,{app:I,rank:B+1,showRank:!0,onTap:()=>f(I),onOpen:()=>i(I)})},I.id))})]}),h.length>1&&o.jsx("section",{className:"px-5",children:o.jsx(De,{app:h[1],onTap:()=>f(h[1])})})]}),o.jsx("div",{className:"h-[var(--tab-bar-height)]"})]})]})});Ge.__docgenInfo={description:"",methods:[{name:"focusSearch",docblock:null,modifiers:[],params:[],returns:null}],displayName:"DiscoverPage",props:{apps:{required:!0,tsType:{name:"Array",elements:[{name:"MiniappManifest"}],raw:"MiniappManifest[]"},description:""},featuredApp:{required:!1,tsType:{name:"MiniappManifest"},description:""},featuredApps:{required:!0,tsType:{name:"Array",elements:[{name:"MiniappManifest"}],raw:"MiniappManifest[]"},description:""},recommendedApps:{required:!0,tsType:{name:"Array",elements:[{name:"MiniappManifest"}],raw:"MiniappManifest[]"},description:""},hotApps:{required:!0,tsType:{name:"Array",elements:[{name:"MiniappManifest"}],raw:"MiniappManifest[]"},description:""},onAppDetail:{required:!0,tsType:{name:"signature",type:"function",raw:"(app: MiniappManifest) => void",signature:{arguments:[{type:{name:"MiniappManifest"},name:"app"}],return:{name:"void"}}},description:""},onAppOpen:{required:!0,tsType:{name:"signature",type:"function",raw:"(app: MiniappManifest) => void",signature:{arguments:[{type:{name:"MiniappManifest"},name:"app"}],return:{name:"void"}}},description:""}}};const Qt=["color-dodge","hard-light"],er=["rainbow","vivid"],tr=1e4;function rr(c){return c==="dark"?!0:c==="light"||typeof window>"u"?!1:window.matchMedia("(prefers-color-scheme: dark)").matches}function qe(c){return c[Math.floor(Math.random()*c.length)]}function nr(){const c=new Date,u=new Date(c);return u.setHours(c.getHours()+1,0,0,0),u.getTime()-c.getTime()}function Ve({className:c,children:u,variant:m}){const h=O(it,b=>b.theme),y=rr(h),[d,f]=A.useState(!1),i=A.useMemo(()=>({dark:qe(Qt),light:qe(er)}),[]),w=m??(y?i.dark:i.light);return A.useEffect(()=>{let b,E;const I=()=>{f(!0),b=setTimeout(()=>f(!1),tr)},B=()=>{const p=nr();E=setTimeout(()=>{I(),B()},p)};return B(),()=>{clearTimeout(b),clearTimeout(E)}},[]),o.jsxs("div",{className:$("ios-wallpaper relative h-full w-full",`ios-wallpaper--${w}`,d&&"ios-wallpaper--animating",c),children:[w==="hard-light"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"ios-wallpaper__stars"}),o.jsx("div",{className:"ios-wallpaper__glow"}),o.jsx("div",{className:"ios-wallpaper__highlight"})]}),u]})}Ve.__docgenInfo={description:"",methods:[],displayName:"IOSWallpaper",props:{className:{required:!1,tsType:{name:"string"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},variant:{required:!1,tsType:{name:"union",raw:"'color-dodge' | 'hard-light' | 'rainbow' | 'vivid'",elements:[{name:"literal",value:"'color-dodge'"},{name:"literal",value:"'hard-light'"},{name:"literal",value:"'rainbow'"},{name:"literal",value:"'vivid'"}]},description:""}}};function Ye({className:c}){const{t:u}=fe("ecosystem"),m=O(V,re.hasRunningApps),h=A.useCallback(y=>{if(y){It(y);return}bt()},[]);return o.jsx("div",{ref:h,className:$("relative h-full w-full","bg-transparent",c),"data-testid":"app-stack-page","data-has-apps":m,children:!m&&o.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center opacity-0",children:o.jsx("p",{className:"text-muted-foreground text-sm",children:u("stack.title")})})})}Ye.__docgenInfo={description:"",methods:[],displayName:"AppStackPage",props:{className:{required:!1,tsType:{name:"string"},description:""}}};const ir="_widgetContainer_1vhap_7",sr="_capsule_1vhap_32",ar="_themeDark_1vhap_46",or="_themeLight_1vhap_54",cr="_themeAuto_1vhap_62",lr="_button_1vhap_78",ur="_icon_1vhap_99",pr="_divider_1vhap_104",dr="_closeIcon_1vhap_116",fr="_closeIconInner_1vhap_129",W={widgetContainer:ir,capsule:sr,themeDark:ar,themeLight:or,themeAuto:cr,button:lr,icon:ur,divider:pr,closeIcon:dr,closeIconInner:fr},Xe=A.forwardRef(function({theme:u="auto",actionIcon:m,onAction:h,onClose:y,visible:d=!0,className:f},i){const{t:w}=fe("ecosystem");if(!d)return null;const b=u==="dark"?W.themeDark:u==="light"?W.themeLight:W.themeAuto;return o.jsx("div",{className:W.widgetContainer,children:o.jsxs("div",{ref:i,className:$(W.capsule,b,f),"data-testid":"miniapp-capsule",children:[o.jsx("button",{type:"button",onClick:h,className:W.button,"aria-label":w("capsule.more"),children:m??o.jsx(Pt,{className:W.icon,stroke:1.5})}),o.jsx("div",{className:W.divider}),o.jsx("button",{type:"button",onClick:y,className:W.button,"aria-label":w("capsule.close"),children:o.jsx("div",{className:W.closeIcon,children:o.jsx(Ht,{className:W.closeIconInner})})})]})})});Xe.__docgenInfo={description:"",methods:[],displayName:"MiniappCapsule",props:{theme:{required:!1,tsType:{name:"CapsuleTheme"},description:"胶囊主题",defaultValue:{value:"'auto'",computed:!1}},actionIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"多功能按钮的自定义图标"},onAction:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"多功能按钮点击回调"},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"关闭按钮点击回调"},visible:{required:!1,tsType:{name:"boolean"},description:"是否显示",defaultValue:{value:"true",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"自定义类名"}}};const hr="_window_p5x05_5",mr="_windowInner_p5x05_11",xr="_contentLayer_p5x05_29",gr="_blending_p5x05_36",yr="_splashBgLayer_p5x05_43",wr="_iframeLayer_p5x05_51",Ir="_animating_p5x05_63",br="_capsuleLayer_p5x05_72",Q={window:hr,windowInner:mr,contentLayer:xr,blending:gr,splashBgLayer:yr,iframeLayer:wr,animating:Ir,capsuleLayer:br},Er={open:{opacity:1,pointerEvents:"auto"},closed:{opacity:0,pointerEvents:"none"}},Ar={show:{opacity:1,pointerEvents:"auto"},hide:{opacity:0,pointerEvents:"none"}},Ee={top:{zIndex:10,opacity:1,pointerEvents:"auto"},bottom:{zIndex:0,opacity:0,pointerEvents:"none"},gone:{zIndex:0,opacity:0,display:"none",pointerEvents:"none"}};function Br({className:c}){const u=O(V,re.getPresentations),m=O(V,re.getFocusedAppId),h=O(V,re.getVisualConfig),y=Et(h);return u.length===0?null:o.jsx(o.Fragment,{children:u.filter(d=>d.state!=="hidden").map(d=>o.jsx(Nr,{appId:d.appId,presentation:d,motionPresets:y,className:c,isFocused:d.appId===m},d.appId))})}function Nr({appId:c,presentation:u,motionPresets:m,className:h,isFocused:y}){const d=A.useRef(null),f=A.useRef(null),[i,w]=A.useState(null),b=A.useRef(!1),E=A.useRef(null),I=O(V,z=>z.apps.get(c)??null),B=O(V,z=>{const H=z.apps.get(c);return H?.state==="launching"||H?.state==="splash"||H?.state==="closing"}),p=At(u.desktop,c),g=Bt(u.desktop,c),x=A.useMemo(()=>document.getElementById("miniapp-fallback-portal")??document.body,[]),v=g??x,S=p==="lost"||!g;A.useLayoutEffect(()=>{if(!I){w(null),b.current=!1;return}if(I.state==="preparing"){w(null),b.current=!1;return}if(u.state==="dismissing"||I.state==="closing"){if(b.current)return;w(I),E.current=u.transitionId,b.current=!0,requestAnimationFrame(()=>w(null));return}b.current=!1,w(I)},[I?.appId,I?.state,u.state,u.transitionId]),A.useEffect(()=>{i&&u.state==="presenting"&&u.transitionKind==="present"&&u.transitionId&&Nt(c,u.transitionId)},[c,i,u.state,u.transitionKind,u.transitionId]);const k=A.useRef("closed");i?.flow&&(k.current=i.flow);const T=i?i.flow:k.current,F=A.useCallback(()=>{i?.appId&&_t(i.appId)},[i?.appId]),M=ct[T],J=lt[T],Y=pt[T],ee=ut[T],oe=ft[T],ce=dt[T],le=T==="opening"||T==="closing",D=A.useMemo(()=>({appId:i?.appId??"",name:i?.manifest.name??"",icon:i?.manifest.icon??"",themeColor:i?.manifest.themeColorFrom??280}),[i?.appId,i?.manifest.name,i?.manifest.icon,i?.manifest.themeColorFrom]);A.useEffect(()=>{g&&(d.current&&vt(d.current),f.current&&kt(f.current))},[g]),A.useEffect(()=>{const z=i?.containerHandle,H=f.current;if(!z||!H)return;const X=z.element;X.parentElement!==H&&H.appendChild(X),X.style.display==="none"&&(X.style.display="")},[i?.containerHandle,i?.appId,g]);const ue=A.useCallback(()=>{St(c)},[c]),_=A.useCallback(()=>{Tt(c)},[c]),U=!S,K=o.jsx(Lt,{initial:!1,onExitComplete:()=>{const z=E.current;z&&jt(c,z),E.current=null,k.current="closed"},children:i&&o.jsx("div",{ref:d,className:$(Q.window,B&&Q.animating,h),style:{zIndex:u.zOrder,pointerEvents:y?void 0:"none",visibility:S?"hidden":"visible"},"data-testid":"miniapp-window","data-app-id":i.appId,"data-slot-lost":S?"true":void 0,children:o.jsxs(te.div,{className:Q.windowInner,variants:Er,initial:!1,animate:M,onLayoutAnimationComplete:F,...U&&D.appId?{layoutId:`miniapp:${D.appId}:container`,"data-layoutid":`miniapp:${D.appId}:container`}:{},transition:m.sharedLayout,"data-flow":T,children:[o.jsxs(te.div,{className:$(Q.contentLayer,le&&Q.blending),...U&&D.appId?{layoutId:`miniapp:${D.appId}:inner`,"data-layoutid":`miniapp:${D.appId}:inner`}:{},transition:m.sharedLayout,children:[o.jsx(te.div,{className:Q.splashBgLayer,variants:Ee,initial:!1,animate:J,"data-animate":J,children:o.jsx(wt,{appId:D.appId,app:{name:D.name,icon:D.icon,themeColor:D.themeColor},visible:!0,showIcon:!1,showSpinner:!1,onClose:_})}),o.jsx(te.div,{ref:f,className:Q.iframeLayer,variants:Ee,initial:!1,animate:ee,"data-animate":ee})]}),o.jsx(te.div,{className:"absolute inset-0 flex items-center justify-center",variants:Ee,initial:!1,animate:Y,"aria-hidden":Y!=="top",children:o.jsx(te.div,{className:"size-30 items-center justify-center",...U&&oe&&D.appId?{layoutId:`miniapp:${D.appId}:logo`,"data-layoutid":`miniapp:${D.appId}:logo`}:{},transition:m.sharedLayout,children:o.jsx(ae,{src:D.icon,name:D.name,size:"2xl"})})}),o.jsx("div",{className:Q.capsuleLayer,children:o.jsx(te.div,{variants:Ar,initial:!1,animate:ce,children:o.jsx(Xe,{visible:!0,theme:i?.ctx.capsuleTheme??"auto",onAction:()=>{},onClose:ue})})})]})})});return Ut.createPortal(K,v)}Br.__docgenInfo={description:"",methods:[],displayName:"MiniappWindow",props:{className:{required:!1,tsType:{name:"string"},description:""}}};const _r="_indicator_1e4mv_5",vr="_iconWrapper_1e4mv_24",kr="_icon_1e4mv_24",Sr="_dots_1e4mv_54",Tr="_dot_1e4mv_54",jr="_dotActive_1e4mv_73",se={indicator:_r,iconWrapper:vr,icon:kr,dots:Sr,dot:Tr,dotActive:jr},$e=["discover","mine","stack"],Fr={discover:We,mine:qt,stack:Ot},Mr={discover:"发现",mine:"我的",stack:"堆栈"};function Rr({activePage:c,onPageChange:u,hasRunningApps:m,className:h}){const y=O(Be,x=>x.activeSubPage),d=O(Be,x=>x.availableSubPages),f=O(V,re.hasRunningApps),i=c??y,w=m??f,b=A.useMemo(()=>d?.length?d:w?$e:$e.filter(x=>x!=="stack"),[d,w]),E=b.indexOf(i),I=A.useCallback(()=>{const x=(E+1)%b.length;return b[x]},[E,b]),B=A.useCallback(()=>{const x=I();x&&u?.(x)},[I,u]),p=Fr[i],g=Mr[i];return o.jsxs("button",{type:"button",onClick:B,className:$(se.indicator,h),"aria-label":`当前：${g}，点击切换`,"data-testid":"ecosystem-tab-indicator",children:[o.jsx("div",{className:se.iconWrapper,children:o.jsx(p,{className:se.icon,stroke:1.5})}),o.jsx("div",{className:se.dots,children:b.map((x,v)=>o.jsx("span",{className:$(se.dot,v===E&&se.dotActive)},x))})]})}Rr.__docgenInfo={description:"",methods:[],displayName:"EcosystemTabIndicator",props:{activePage:{required:!1,tsType:{name:"EcosystemSubPage"},description:"当前页面（可选，默认从 store 读取）"},onPageChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(page: EcosystemSubPage) => void",signature:{arguments:[{type:{name:"EcosystemSubPage"},name:"page"}],return:{name:"void"}}},description:"切换页面回调（可选，用于外部控制）"},hasRunningApps:{required:!1,tsType:{name:"boolean"},description:"是否有运行中的应用（可选，默认从 store 读取）"},className:{required:!1,tsType:{name:"string"},description:"自定义类名"}}};function Cr(c){return c.length<=14?c:`${c.slice(0,6)}...${c.slice(-4)}`}function Ur({title:c,description:u,appName:m,appIcon:h,chainId:y,walletInfo:d}){return d?o.jsx("div",{className:"border-border border-b px-4 pb-3",children:o.jsxs("div",{className:"flex items-center justify-between gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[o.jsx(ae,{src:h,name:m||"App",size:"sm",shadow:"sm"}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("h2",{className:"truncate text-sm font-semibold",children:c}),u&&o.jsx("p",{className:"text-muted-foreground truncate text-xs",children:u})]})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm font-medium",children:d.name}),o.jsx("p",{className:"text-muted-foreground text-xs font-mono",children:Cr(d.address)})]}),o.jsx(Ue,{chainId:d.chainId})]})]})}):o.jsx("div",{className:"border-border border-b px-4 pb-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ae,{src:h,name:m||"App",size:"md",shadow:"sm"}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h2",{className:"truncate text-base font-semibold",children:c}),u&&o.jsx("p",{className:"text-muted-foreground truncate text-sm",children:u})]}),y&&o.jsx(Ue,{chainId:y})]})})}Ur.__docgenInfo={description:"",methods:[],displayName:"MiniappSheetHeader",props:{title:{required:!0,tsType:{name:"string"},description:"Sheet 标题"},description:{required:!1,tsType:{name:"string"},description:"描述文本 (可选)"},appName:{required:!1,tsType:{name:"string"},description:"来源小程序名称"},appIcon:{required:!1,tsType:{name:"string"},description:"来源小程序图标 URL"},chainId:{required:!1,tsType:{name:"string"},description:"请求的链 ID (可选，传入时显示 ChainBadge，当有 walletInfo 时会被忽略)"},walletInfo:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 钱包名称 */
  name: string
  /** 钱包地址 */
  address: string
  /** 链 ID */
  chainId: string
}`,signature:{properties:[{key:"name",value:{name:"string",required:!0},description:"钱包名称"},{key:"address",value:{name:"string",required:!0},description:"钱包地址"},{key:"chainId",value:{name:"string",required:!0},description:"链 ID"}]}},description:"钱包信息 (可选，传入时在右侧显示钱包名+地址+链)"}}};var Ae={},de={},Oe;function Pr(){if(Oe)return de;Oe=1,de.byteLength=i,de.toByteArray=b,de.fromByteArray=B;for(var c=[],u=[],m=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=0,d=h.length;y<d;++y)c[y]=h[y],u[h.charCodeAt(y)]=y;u[45]=62,u[95]=63;function f(p){var g=p.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=p.indexOf("=");x===-1&&(x=g);var v=x===g?0:4-x%4;return[x,v]}function i(p){var g=f(p),x=g[0],v=g[1];return(x+v)*3/4-v}function w(p,g,x){return(g+x)*3/4-x}function b(p){var g,x=f(p),v=x[0],S=x[1],k=new m(w(p,v,S)),T=0,F=S>0?v-4:v,M;for(M=0;M<F;M+=4)g=u[p.charCodeAt(M)]<<18|u[p.charCodeAt(M+1)]<<12|u[p.charCodeAt(M+2)]<<6|u[p.charCodeAt(M+3)],k[T++]=g>>16&255,k[T++]=g>>8&255,k[T++]=g&255;return S===2&&(g=u[p.charCodeAt(M)]<<2|u[p.charCodeAt(M+1)]>>4,k[T++]=g&255),S===1&&(g=u[p.charCodeAt(M)]<<10|u[p.charCodeAt(M+1)]<<4|u[p.charCodeAt(M+2)]>>2,k[T++]=g>>8&255,k[T++]=g&255),k}function E(p){return c[p>>18&63]+c[p>>12&63]+c[p>>6&63]+c[p&63]}function I(p,g,x){for(var v,S=[],k=g;k<x;k+=3)v=(p[k]<<16&16711680)+(p[k+1]<<8&65280)+(p[k+2]&255),S.push(E(v));return S.join("")}function B(p){for(var g,x=p.length,v=x%3,S=[],k=16383,T=0,F=x-v;T<F;T+=k)S.push(I(p,T,T+k>F?F:T+k));return v===1?(g=p[x-1],S.push(c[g>>2]+c[g<<4&63]+"==")):v===2&&(g=(p[x-2]<<8)+p[x-1],S.push(c[g>>10]+c[g>>4&63]+c[g<<2&63]+"=")),S.join("")}return de}var xe={};var ze;function Lr(){return ze||(ze=1,xe.read=function(c,u,m,h,y){var d,f,i=y*8-h-1,w=(1<<i)-1,b=w>>1,E=-7,I=m?y-1:0,B=m?-1:1,p=c[u+I];for(I+=B,d=p&(1<<-E)-1,p>>=-E,E+=i;E>0;d=d*256+c[u+I],I+=B,E-=8);for(f=d&(1<<-E)-1,d>>=-E,E+=h;E>0;f=f*256+c[u+I],I+=B,E-=8);if(d===0)d=1-b;else{if(d===w)return f?NaN:(p?-1:1)*(1/0);f=f+Math.pow(2,h),d=d-b}return(p?-1:1)*f*Math.pow(2,d-h)},xe.write=function(c,u,m,h,y,d){var f,i,w,b=d*8-y-1,E=(1<<b)-1,I=E>>1,B=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=h?0:d-1,g=h?1:-1,x=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(i=isNaN(u)?1:0,f=E):(f=Math.floor(Math.log(u)/Math.LN2),u*(w=Math.pow(2,-f))<1&&(f--,w*=2),f+I>=1?u+=B/w:u+=B*Math.pow(2,1-I),u*w>=2&&(f++,w/=2),f+I>=E?(i=0,f=E):f+I>=1?(i=(u*w-1)*Math.pow(2,y),f=f+I):(i=u*Math.pow(2,I-1)*Math.pow(2,y),f=0));y>=8;c[m+p]=i&255,p+=g,i/=256,y-=8);for(f=f<<y|i,b+=y;b>0;c[m+p]=f&255,p+=g,f/=256,b-=8);c[m+p-g]|=x*128}),xe}var He;function Dr(){return He||(He=1,(function(c){const u=Pr(),m=Lr(),h=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;c.Buffer=i,c.SlowBuffer=k,c.INSPECT_MAX_BYTES=50;const y=2147483647;c.kMaxLength=y,i.TYPED_ARRAY_SUPPORT=d(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function f(r){if(r>y)throw new RangeError('The value "'+r+'" is invalid for option "size"');const e=new Uint8Array(r);return Object.setPrototypeOf(e,i.prototype),e}function i(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return I(r)}return w(r,e,t)}i.poolSize=8192;function w(r,e,t){if(typeof r=="string")return B(r,e);if(ArrayBuffer.isView(r))return g(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(G(r,ArrayBuffer)||r&&G(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(G(r,SharedArrayBuffer)||r&&G(r.buffer,SharedArrayBuffer)))return x(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return i.from(n,e,t);const s=v(r);if(s)return s;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return i.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}i.from=function(r,e,t){return w(r,e,t)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function b(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function E(r,e,t){return b(r),r<=0?f(r):e!==void 0?typeof t=="string"?f(r).fill(e,t):f(r).fill(e):f(r)}i.alloc=function(r,e,t){return E(r,e,t)};function I(r){return b(r),f(r<0?0:S(r)|0)}i.allocUnsafe=function(r){return I(r)},i.allocUnsafeSlow=function(r){return I(r)};function B(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!i.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const t=T(r,e)|0;let n=f(t);const s=n.write(r,e);return s!==t&&(n=n.slice(0,s)),n}function p(r){const e=r.length<0?0:S(r.length)|0,t=f(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function g(r){if(G(r,Uint8Array)){const e=new Uint8Array(r);return x(e.buffer,e.byteOffset,e.byteLength)}return p(r)}function x(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,i.prototype),n}function v(r){if(i.isBuffer(r)){const e=S(r.length)|0,t=f(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||Ie(r.length)?f(0):p(r);if(r.type==="Buffer"&&Array.isArray(r.data))return p(r.data)}function S(r){if(r>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return r|0}function k(r){return+r!=r&&(r=0),i.alloc(+r)}i.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==i.prototype},i.compare=function(e,t){if(G(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),G(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,s=t.length;for(let a=0,l=Math.min(n,s);a<l;++a)if(e[a]!==t[a]){n=e[a],s=t[a];break}return n<s?-1:s<n?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return i.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const s=i.allocUnsafe(t);let a=0;for(n=0;n<e.length;++n){let l=e[n];if(G(l,Uint8Array))a+l.length>s.length?(i.isBuffer(l)||(l=i.from(l)),l.copy(s,a)):Uint8Array.prototype.set.call(s,l,a);else if(i.isBuffer(l))l.copy(s,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=l.length}return s};function T(r,e){if(i.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||G(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);const t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return we(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Re(r).length;default:if(s)return n?-1:we(r).length;e=(""+e).toLowerCase(),s=!0}}i.byteLength=T;function F(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return X(this,e,t);case"utf8":case"utf-8":return _(this,e,t);case"ascii":return z(this,e,t);case"latin1":case"binary":return H(this,e,t);case"base64":return ue(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}i.prototype._isBuffer=!0;function M(r,e,t){const n=r[e];r[e]=r[t],r[t]=n}i.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)M(this,t,t+1);return this},i.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)M(this,t,t+3),M(this,t+1,t+2);return this},i.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)M(this,t,t+7),M(this,t+1,t+6),M(this,t+2,t+5),M(this,t+3,t+4);return this},i.prototype.toString=function(){const e=this.length;return e===0?"":arguments.length===0?_(this,0,e):F.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:i.compare(this,e)===0},i.prototype.inspect=function(){let e="";const t=c.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},h&&(i.prototype[h]=i.prototype.inspect),i.prototype.compare=function(e,t,n,s,a){if(G(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),s===void 0&&(s=0),a===void 0&&(a=this.length),t<0||n>e.length||s<0||a>this.length)throw new RangeError("out of range index");if(s>=a&&t>=n)return 0;if(s>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,s>>>=0,a>>>=0,this===e)return 0;let l=a-s,N=n-t;const P=Math.min(l,N),C=this.slice(s,a),L=e.slice(t,n);for(let j=0;j<P;++j)if(C[j]!==L[j]){l=C[j],N=L[j];break}return l<N?-1:N<l?1:0};function J(r,e,t,n,s){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Ie(t)&&(t=s?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(s)return-1;t=r.length-1}else if(t<0)if(s)t=0;else return-1;if(typeof e=="string"&&(e=i.from(e,n)),i.isBuffer(e))return e.length===0?-1:Y(r,e,t,n,s);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):Y(r,[e],t,n,s);throw new TypeError("val must be string, number or Buffer")}function Y(r,e,t,n,s){let a=1,l=r.length,N=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;a=2,l/=2,N/=2,t/=2}function P(L,j){return a===1?L[j]:L.readUInt16BE(j*a)}let C;if(s){let L=-1;for(C=t;C<l;C++)if(P(r,C)===P(e,L===-1?0:C-L)){if(L===-1&&(L=C),C-L+1===N)return L*a}else L!==-1&&(C-=C-L),L=-1}else for(t+N>l&&(t=l-N),C=t;C>=0;C--){let L=!0;for(let j=0;j<N;j++)if(P(r,C+j)!==P(e,j)){L=!1;break}if(L)return C}return-1}i.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},i.prototype.indexOf=function(e,t,n){return J(this,e,t,n,!0)},i.prototype.lastIndexOf=function(e,t,n){return J(this,e,t,n,!1)};function ee(r,e,t,n){t=Number(t)||0;const s=r.length-t;n?(n=Number(n),n>s&&(n=s)):n=s;const a=e.length;n>a/2&&(n=a/2);let l;for(l=0;l<n;++l){const N=parseInt(e.substr(l*2,2),16);if(Ie(N))return l;r[t+l]=N}return l}function oe(r,e,t,n){return he(we(e,r.length-t),r,t,n)}function ce(r,e,t,n){return he(et(e),r,t,n)}function le(r,e,t,n){return he(Re(e),r,t,n)}function D(r,e,t,n){return he(tt(e,r.length-t),r,t,n)}i.prototype.write=function(e,t,n,s){if(t===void 0)s="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")s=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,s===void 0&&(s="utf8")):(s=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const a=this.length-t;if((n===void 0||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let l=!1;for(;;)switch(s){case"hex":return ee(this,e,t,n);case"utf8":case"utf-8":return oe(this,e,t,n);case"ascii":case"latin1":case"binary":return ce(this,e,t,n);case"base64":return le(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,t,n);default:if(l)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),l=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ue(r,e,t){return e===0&&t===r.length?u.fromByteArray(r):u.fromByteArray(r.slice(e,t))}function _(r,e,t){t=Math.min(r.length,t);const n=[];let s=e;for(;s<t;){const a=r[s];let l=null,N=a>239?4:a>223?3:a>191?2:1;if(s+N<=t){let P,C,L,j;switch(N){case 1:a<128&&(l=a);break;case 2:P=r[s+1],(P&192)===128&&(j=(a&31)<<6|P&63,j>127&&(l=j));break;case 3:P=r[s+1],C=r[s+2],(P&192)===128&&(C&192)===128&&(j=(a&15)<<12|(P&63)<<6|C&63,j>2047&&(j<55296||j>57343)&&(l=j));break;case 4:P=r[s+1],C=r[s+2],L=r[s+3],(P&192)===128&&(C&192)===128&&(L&192)===128&&(j=(a&15)<<18|(P&63)<<12|(C&63)<<6|L&63,j>65535&&j<1114112&&(l=j))}}l===null?(l=65533,N=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|l&1023),n.push(l),s+=N}return K(n)}const U=4096;function K(r){const e=r.length;if(e<=U)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=U));return t}function z(r,e,t){let n="";t=Math.min(r.length,t);for(let s=e;s<t;++s)n+=String.fromCharCode(r[s]&127);return n}function H(r,e,t){let n="";t=Math.min(r.length,t);for(let s=e;s<t;++s)n+=String.fromCharCode(r[s]);return n}function X(r,e,t){const n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let s="";for(let a=e;a<t;++a)s+=rt[r[a]];return s}function ge(r,e,t){const n=r.slice(e,t);let s="";for(let a=0;a<n.length-1;a+=2)s+=String.fromCharCode(n[a]+n[a+1]*256);return s}i.prototype.slice=function(e,t){const n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);const s=this.subarray(e,t);return Object.setPrototypeOf(s,i.prototype),s};function R(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||R(e,t,this.length);let s=this[e],a=1,l=0;for(;++l<t&&(a*=256);)s+=this[e+l]*a;return s},i.prototype.readUintBE=i.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||R(e,t,this.length);let s=this[e+--t],a=1;for(;t>0&&(a*=256);)s+=this[e+--t]*a;return s},i.prototype.readUint8=i.prototype.readUInt8=function(e,t){return e=e>>>0,t||R(e,1,this.length),this[e]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||R(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||R(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||R(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readBigUInt64LE=Z(function(e){e=e>>>0,ie(e,"offset");const t=this[e],n=this[e+7];(t===void 0||n===void 0)&&pe(e,this.length-8);const s=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,a=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(s)+(BigInt(a)<<BigInt(32))}),i.prototype.readBigUInt64BE=Z(function(e){e=e>>>0,ie(e,"offset");const t=this[e],n=this[e+7];(t===void 0||n===void 0)&&pe(e,this.length-8);const s=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],a=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(s)<<BigInt(32))+BigInt(a)}),i.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||R(e,t,this.length);let s=this[e],a=1,l=0;for(;++l<t&&(a*=256);)s+=this[e+l]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*t)),s},i.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||R(e,t,this.length);let s=t,a=1,l=this[e+--s];for(;s>0&&(a*=256);)l+=this[e+--s]*a;return a*=128,l>=a&&(l-=Math.pow(2,8*t)),l},i.prototype.readInt8=function(e,t){return e=e>>>0,t||R(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},i.prototype.readInt16LE=function(e,t){e=e>>>0,t||R(e,2,this.length);const n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n},i.prototype.readInt16BE=function(e,t){e=e>>>0,t||R(e,2,this.length);const n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n},i.prototype.readInt32LE=function(e,t){return e=e>>>0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e=e>>>0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readBigInt64LE=Z(function(e){e=e>>>0,ie(e,"offset");const t=this[e],n=this[e+7];(t===void 0||n===void 0)&&pe(e,this.length-8);const s=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(s)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),i.prototype.readBigInt64BE=Z(function(e){e=e>>>0,ie(e,"offset");const t=this[e],n=this[e+7];(t===void 0||n===void 0)&&pe(e,this.length-8);const s=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(s)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)}),i.prototype.readFloatLE=function(e,t){return e=e>>>0,t||R(e,4,this.length),m.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e=e>>>0,t||R(e,4,this.length),m.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||R(e,8,this.length),m.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||R(e,8,this.length),m.read(this,e,!1,52,8)};function q(r,e,t,n,s,a){if(!i.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<a)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(e,t,n,s){if(e=+e,t=t>>>0,n=n>>>0,!s){const N=Math.pow(2,8*n)-1;q(this,e,t,n,N,0)}let a=1,l=0;for(this[t]=e&255;++l<n&&(a*=256);)this[t+l]=e/a&255;return t+n},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(e,t,n,s){if(e=+e,t=t>>>0,n=n>>>0,!s){const N=Math.pow(2,8*n)-1;q(this,e,t,n,N,0)}let a=n-1,l=1;for(this[t+a]=e&255;--a>=0&&(l*=256);)this[t+a]=e/l&255;return t+n},i.prototype.writeUint8=i.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||q(this,e,t,1,255,0),this[t]=e&255,t+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||q(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||q(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||q(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||q(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function ve(r,e,t,n,s){Me(e,n,s,r,t,7);let a=Number(e&BigInt(4294967295));r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a;let l=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=l,l=l>>8,r[t++]=l,l=l>>8,r[t++]=l,l=l>>8,r[t++]=l,t}function ke(r,e,t,n,s){Me(e,n,s,r,t,7);let a=Number(e&BigInt(4294967295));r[t+7]=a,a=a>>8,r[t+6]=a,a=a>>8,r[t+5]=a,a=a>>8,r[t+4]=a;let l=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=l,l=l>>8,r[t+2]=l,l=l>>8,r[t+1]=l,l=l>>8,r[t]=l,t+8}i.prototype.writeBigUInt64LE=Z(function(e,t=0){return ve(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=Z(function(e,t=0){return ke(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(e,t,n,s){if(e=+e,t=t>>>0,!s){const P=Math.pow(2,8*n-1);q(this,e,t,n,P-1,-P)}let a=0,l=1,N=0;for(this[t]=e&255;++a<n&&(l*=256);)e<0&&N===0&&this[t+a-1]!==0&&(N=1),this[t+a]=(e/l>>0)-N&255;return t+n},i.prototype.writeIntBE=function(e,t,n,s){if(e=+e,t=t>>>0,!s){const P=Math.pow(2,8*n-1);q(this,e,t,n,P-1,-P)}let a=n-1,l=1,N=0;for(this[t+a]=e&255;--a>=0&&(l*=256);)e<0&&N===0&&this[t+a+1]!==0&&(N=1),this[t+a]=(e/l>>0)-N&255;return t+n},i.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||q(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},i.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||q(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||q(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},i.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||q(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||q(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},i.prototype.writeBigInt64LE=Z(function(e,t=0){return ve(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=Z(function(e,t=0){return ke(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Se(r,e,t,n,s,a){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Te(r,e,t,n,s){return e=+e,t=t>>>0,s||Se(r,e,t,4),m.write(r,e,t,n,23,4),t+4}i.prototype.writeFloatLE=function(e,t,n){return Te(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){return Te(this,e,t,!1,n)};function je(r,e,t,n,s){return e=+e,t=t>>>0,s||Se(r,e,t,8),m.write(r,e,t,n,52,8),t+8}i.prototype.writeDoubleLE=function(e,t,n){return je(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){return je(this,e,t,!1,n)},i.prototype.copy=function(e,t,n,s){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!s&&s!==0&&(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<n&&(s=n),s===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-n&&(s=e.length-t+n);const a=s-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,s):Uint8Array.prototype.set.call(e,this.subarray(n,s),t),a},i.prototype.fill=function(e,t,n,s){if(typeof e=="string"){if(typeof t=="string"?(s=t,t=0,n=this.length):typeof n=="string"&&(s=n,n=this.length),s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!i.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(e.length===1){const l=e.charCodeAt(0);(s==="utf8"&&l<128||s==="latin1")&&(e=l)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let a;if(typeof e=="number")for(a=t;a<n;++a)this[a]=e;else{const l=i.isBuffer(e)?e:i.from(e,s),N=l.length;if(N===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=l[a%N]}return this};const ne={};function ye(r,e,t){ne[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(s){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:s,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError),ye("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,s=t;return Number.isInteger(t)&&Math.abs(t)>2**32?s=Fe(String(t)):typeof t=="bigint"&&(s=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(s=Fe(s)),s+="n"),n+=` It must be ${e}. Received ${s}`,n},RangeError);function Fe(r){let e="",t=r.length;const n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function Ke(r,e,t){ie(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&pe(e,r.length-(t+1))}function Me(r,e,t,n,s,a){if(r>t||r<e){const l=typeof e=="bigint"?"n":"";let N;throw e===0||e===BigInt(0)?N=`>= 0${l} and < 2${l} ** ${(a+1)*8}${l}`:N=`>= -(2${l} ** ${(a+1)*8-1}${l}) and < 2 ** ${(a+1)*8-1}${l}`,new ne.ERR_OUT_OF_RANGE("value",N,r)}Ke(n,s,a)}function ie(r,e){if(typeof r!="number")throw new ne.ERR_INVALID_ARG_TYPE(e,"number",r)}function pe(r,e,t){throw Math.floor(r)!==r?(ie(r,t),new ne.ERR_OUT_OF_RANGE("offset","an integer",r)):e<0?new ne.ERR_BUFFER_OUT_OF_BOUNDS:new ne.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${e}`,r)}const Ze=/[^+/0-9A-Za-z-_]/g;function Qe(r){if(r=r.split("=")[0],r=r.trim().replace(Ze,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function we(r,e){e=e||1/0;let t;const n=r.length;let s=null;const a=[];for(let l=0;l<n;++l){if(t=r.charCodeAt(l),t>55295&&t<57344){if(!s){if(t>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(l+1===n){(e-=3)>-1&&a.push(239,191,189);continue}s=t;continue}if(t<56320){(e-=3)>-1&&a.push(239,191,189),s=t;continue}t=(s-55296<<10|t-56320)+65536}else s&&(e-=3)>-1&&a.push(239,191,189);if(s=null,t<128){if((e-=1)<0)break;a.push(t)}else if(t<2048){if((e-=2)<0)break;a.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;a.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;a.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return a}function et(r){const e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function tt(r,e){let t,n,s;const a=[];for(let l=0;l<r.length&&!((e-=2)<0);++l)t=r.charCodeAt(l),n=t>>8,s=t%256,a.push(s),a.push(n);return a}function Re(r){return u.toByteArray(Qe(r))}function he(r,e,t,n){let s;for(s=0;s<n&&!(s+t>=e.length||s>=r.length);++s)e[s+t]=r[s];return s}function G(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function Ie(r){return r!==r}const rt=(function(){const r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){const n=t*16;for(let s=0;s<16;++s)e[n+s]=r[t]+r[s]}return e})();function Z(r){return typeof BigInt>"u"?nt:r}function nt(){throw new Error("BigInt not supported")}})(Ae)),Ae}var qr=Dr();function $r(c){const u=new TextEncoder().encode(c);let m="";return u.forEach(y=>{m+=String.fromCharCode(y)}),(typeof globalThis.btoa=="function"?globalThis.btoa(m):qr.Buffer.from(m,"binary").toString("base64")).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")}function Or(c){return c==="mine"||c==="stack"}function Ne(){const c=A.useRef(null),[u,m]=A.useState(null),h=O(V,re.getPresentations);A.useEffect(()=>{const d=c.current;if(!d)return;const f=d.closest("[data-ecosystem-subpage]")?.getAttribute("data-ecosystem-subpage")??null;m(Or(f)?f:null)},[]),A.useEffect(()=>{const d=c.current;if(!(!d||!u))return Ft(u,d),()=>Mt(u)},[u]);const y=A.useMemo(()=>u?h.filter(d=>d.desktop===u&&d.state!=="hidden"):[],[u,h]);return o.jsx("div",{ref:c,className:"absolute left-0 right-0 top-0 z-20 grid",style:{bottom:"var(--tab-bar-height)",pointerEvents:"none",gridTemplateColumns:"1fr",gridTemplateRows:"1fr"},"aria-hidden":!0,"data-testid":"miniapp-window-stack",children:y.map(d=>{const f=$r(d.appId),i=w=>{if(u){if(w){Rt(u,d.appId,w);return}Ct(u,d.appId)}};return o.jsx("div",{ref:i,style:{gridArea:"1 / 1",pointerEvents:"auto"},"data-miniapp-slot":!0,"data-app-id":d.appId,"data-area-name":f},d.appId)})})}Ne.__docgenInfo={description:`MiniappWindowStack

一个统一的“窗口堆栈层”覆盖网格：
- 由 slide 决定布局（本组件只提供 slot 容器）
- slot 统一叠放在同一 grid cell（1 / 1）
- 本组件不区分 mine/stack 的 props，通过 DOM 上的 \`data-ecosystem-subpage\` 自识别`,methods:[],displayName:"MiniappWindowStack"};const Je="-38.2%",zr=3,Hr=`${100+(zr-1)*Math.abs(parseFloat(Je))}%`,Wr=A.forwardRef(function(u,m){const{showDiscoverPage:h=!0,showStackPage:y="auto",initialPage:d,apps:f,myApps:i,featuredApps:w=[],recommendedApps:b=[],hotApps:E=[],onAppOpen:I,onAppDetail:B,onAppRemove:p}=u,g=A.useRef(null),x=A.useRef(null),v=A.useRef("mine"),S=O(V,_=>{if(_.presentations.size===0)return null;const U=Array.from(_.presentations.values()).filter(R=>R.state!=="hidden");if(U.length===0)return null;const K=_.focusedAppId??_.activeAppId,H=(K?_.presentations.get(K):null)?.desktop??(K?_.apps.get(K)?.manifest.targetDesktop??null:null),X=R=>R==="stack"?"stack":"mine";if(H)return X(H);const ge=U.reduce((R,q)=>q.zOrder>R.zOrder?q:R);return X(ge.desktop)}),k=O(V,re.hasRunningStackApps),T=y==="auto"?k:y,F=A.useMemo(()=>{const _=[];return h&&_.push("discover"),_.push("mine"),T&&_.push("stack"),_},[h,T]),M=F.length,J=O(Be,_=>_.activeSubPage),Y=A.useMemo(()=>{const _=d??J??(h?"discover":"mine"),U=F.indexOf(_);return U>=0?U:0},[d,J,h,F]),{onSwiper:ee,onSlideChange:oe}=at("ecosystem-main","ecosystem-indicator",{initialIndex:Y,onSlideChange:_=>{const U=F[_.activeIndex]??"mine";v.current=U,me.setActiveSubPage(U)}}),ce=A.useCallback(_=>{g.current=_,ee(_);const U=F[Y]??"mine";v.current=U,me.setAvailableSubPages(F)},[ee,F,Y]);A.useEffect(()=>{me.setAvailableSubPages(F)},[F]),A.useEffect(()=>{if(!S||v.current===S)return;const _=F.indexOf(S);_<0||g.current?.slideTo(_)},[S,F]);const le=A.useCallback((_,U)=>{me.setSwiperProgress(U*(M-1))},[M]),D=A.useCallback(()=>{if(!h)return;const _=F.indexOf("discover");_>=0&&(g.current?.slideTo(_),setTimeout(()=>x.current?.focusSearch(),300))},[h,F]);A.useImperativeHandle(m,()=>({slideTo:_=>{const U=F.indexOf(_);U>=0&&g.current?.slideTo(U)},focusSearch:()=>{h&&x.current?.focusSearch()},getCurrentPage:()=>v.current,getSwiper:()=>g.current}),[F,h]);const ue=w[0];return o.jsx("div",{className:"bg-background relative h-full",children:o.jsxs(st,{className:"h-full w-full",modules:[Wt,ot],parallax:!0,onSwiper:ce,onSlideChange:oe,onProgress:le,resistanceRatio:.5,children:[o.jsx("div",{className:"absolute inset-y-0 left-0 z-0",style:{width:Hr},"data-swiper-parallax":Je,children:o.jsx(Ve,{className:"h-full w-full"})}),h&&o.jsx(be,{className:"!h-full !overflow-hidden",children:o.jsx("div",{className:"relative z-10 h-full",children:o.jsx(Ge,{ref:x,apps:f,featuredApp:ue,featuredApps:w,recommendedApps:b,hotApps:E,onAppDetail:B,onAppOpen:I})})}),o.jsx(be,{className:"!h-full !overflow-hidden",children:o.jsxs("div",{className:"relative z-10 h-full","data-ecosystem-subpage":"mine",children:[o.jsx(ht,{apps:i,showSearch:h,onSearchClick:D,onAppOpen:I,onAppDetail:B,onAppRemove:p}),o.jsx(Ne,{})]})}),T&&o.jsx(be,{className:"!h-full !overflow-hidden",children:o.jsxs("div",{className:"relative z-10 h-full","data-ecosystem-subpage":"stack",children:[o.jsx(Ye,{}),o.jsx(Ne,{})]})})]})})});Wr.__docgenInfo={description:"",methods:[{name:"slideTo",docblock:null,modifiers:[],params:[{name:"page",optional:!1,type:{name:"EcosystemSubPage",alias:"EcosystemSubPage"}}],returns:null},{name:"focusSearch",docblock:null,modifiers:[],params:[],returns:null},{name:"getCurrentPage",docblock:null,modifiers:[],params:[],returns:null},{name:"getSwiper",docblock:null,modifiers:[],params:[],returns:null}],displayName:"EcosystemDesktop",props:{showDiscoverPage:{required:!1,tsType:{name:"boolean"},description:"是否显示发现页（默认 true）"},showStackPage:{required:!1,tsType:{name:"union",raw:"boolean | 'auto'",elements:[{name:"boolean"},{name:"literal",value:"'auto'"}]},description:"是否显示应用堆栈页（默认 'auto'，根据是否有运行中的应用自动判断）"},initialPage:{required:!1,tsType:{name:"EcosystemSubPage"},description:"初始页面（默认根据配置自动选择）"},apps:{required:!0,tsType:{name:"Array",elements:[{name:"MiniappManifest"}],raw:"MiniappManifest[]"},description:"所有应用列表"},myApps:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ app: MiniappManifest; lastUsed: number }",signature:{properties:[{key:"app",value:{name:"MiniappManifest",required:!0}},{key:"lastUsed",value:{name:"number",required:!0}}]}}],raw:"Array<{ app: MiniappManifest; lastUsed: number }>"},description:"我的应用（带最后使用时间）"},featuredApps:{required:!1,tsType:{name:"Array",elements:[{name:"MiniappManifest"}],raw:"MiniappManifest[]"},description:"精选应用"},recommendedApps:{required:!1,tsType:{name:"Array",elements:[{name:"MiniappManifest"}],raw:"MiniappManifest[]"},description:"推荐应用"},hotApps:{required:!1,tsType:{name:"Array",elements:[{name:"MiniappManifest"}],raw:"MiniappManifest[]"},description:"热门应用"},onAppOpen:{required:!0,tsType:{name:"signature",type:"function",raw:"(app: MiniappManifest) => void",signature:{arguments:[{type:{name:"MiniappManifest"},name:"app"}],return:{name:"void"}}},description:"打开应用"},onAppDetail:{required:!0,tsType:{name:"signature",type:"function",raw:"(app: MiniappManifest) => void",signature:{arguments:[{type:{name:"MiniappManifest"},name:"app"}],return:{name:"void"}}},description:"查看应用详情"},onAppRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"(appId: string) => void",signature:{arguments:[{type:{name:"string"},name:"appId"}],return:{name:"void"}}},description:"移除应用"}}};export{Wr as E,qt as I,Xe as M,Rr as a,Br as b,Ur as c};
