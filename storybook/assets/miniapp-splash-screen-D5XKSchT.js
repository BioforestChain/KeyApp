import{r as l,j as n}from"./iframe-BJgN3E0_.js";import{c as u}from"./utils-4perknFd.js";import{i as g}from"./config-HmZ3kn8E.js";import"./window-stack-BPi_p-h9.js";import{m as k}from"./proxy-DUx84_BC.js";const N="_splashScreen_6vpvn_8",C="_glowLayer_6vpvn_29",E="_glowPrimary_6vpvn_36",M="_glowSecondary_6vpvn_47",P="_glowTertiary_6vpvn_58",H="_content_6vpvn_101",V="_appIcon_6vpvn_111",W="_spinner_6vpvn_128",a={splashScreen:N,glowLayer:C,glowPrimary:E,glowSecondary:M,glowTertiary:P,content:H,appIcon:V,spinner:W};function A(r){if(r===void 0)return 280;if(typeof r=="number")return i(r);const e=r.trim().toLowerCase();if(e.startsWith("oklch")){const t=e.match(/oklch\s*\(\s*[\d.]+\s+[\d.]+\s+([\d.]+)/);if(t?.[1])return i(parseFloat(t[1]))}if(e.startsWith("hsl")){const t=e.match(/hsl\s*\(\s*([\d.]+)/);if(t?.[1])return i(parseFloat(t[1]))}if(e.startsWith("#"))return F(e);if(e.startsWith("rgb")){const t=e.match(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/);if(t?.[1]&&t[2]&&t[3])return v(parseInt(t[1]),parseInt(t[2]),parseInt(t[3]))}return 280}function i(r){return(r%360+360)%360}function F(r){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);return!e?.[1]||!e[2]||!e[3]?280:v(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16))}function v(r,e,t){r/=255,e/=255,t/=255;const c=Math.max(r,e,t),m=Math.min(r,e,t),o=c-m;if(o===0)return 0;let s=0;switch(c){case r:s=((e-t)/o+(e<t?6:0))/6;break;case e:s=((t-r)/o+2)/6;break;case t:s=((r-e)/o+4)/6;break}return Math.round(s*360)}function G(r){return[i(r),i(r+30),i(r-30)]}function $({appId:r,app:e,visible:t,animating:c=!0,onClose:m,iconLayoutId:o,showIcon:s=!0,showSpinner:p=!0,className:w}){const[_,h]=l.useState(!1),[x,f]=l.useState(!1),I=g("sharedLayout"),y=g("glow"),[b,S,T]=l.useMemo(()=>{const j=A(e.themeColor);return G(j)},[e.themeColor]);l.useEffect(()=>{h(!1),f(!1)},[e.icon]);const L={"--splash-hue-primary":b,"--splash-hue-secondary":S,"--splash-hue-tertiary":T},d=I?o:void 0,q=y&&c;return n.jsxs("div",{className:u(a.splashScreen,w),style:L,"data-app-id":r,"data-visible":t,"data-animating":q,"data-glow-enabled":y,"data-testid":"miniapp-splash-screen",role:"status","aria-label":`${e.name} 正在加载`,"aria-hidden":!t,children:[n.jsx("div",{className:u(a.glowLayer,a.glowPrimary)}),n.jsx("div",{className:u(a.glowLayer,a.glowSecondary)}),n.jsx("div",{className:u(a.glowLayer,a.glowTertiary)}),(s||p)&&n.jsxs("div",{className:a.content,children:[s&&n.jsx(k.div,{...d?{layoutId:d,"data-layoutid":d}:{},className:a.appIcon,children:!x&&n.jsx("img",{src:e.icon,alt:e.name,onLoad:()=>h(!0),onError:()=>f(!0),style:{opacity:_?1:0}})}),p&&n.jsx("div",{className:a.spinner,"aria-hidden":"true"})]})]})}$.__docgenInfo={description:"",methods:[],displayName:"MiniappSplashScreen",props:{appId:{required:!1,tsType:{name:"string"},description:"可选：用于埋点/调试/定位元素"},app:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  name: string;
  icon: string;
  /** 主题色，支持 hex、rgb、oklch 或直接传 hue 数值 */
  themeColor?: string | number;
}`,signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"themeColor",value:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}],required:!1},description:"主题色，支持 hex、rgb、oklch 或直接传 hue 数值"}]}},description:"应用信息"},visible:{required:!0,tsType:{name:"boolean"},description:"是否可见"},animating:{required:!1,tsType:{name:"boolean"},description:"是否播放呼吸动画",defaultValue:{value:"true",computed:!1}},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"关闭回调"},iconLayoutId:{required:!1,tsType:{name:"string"},description:"可选：共享元素动画 layoutId（用于 icon <-> splash.icon）"},showIcon:{required:!1,tsType:{name:"boolean"},description:"是否渲染图标（默认 true）",defaultValue:{value:"true",computed:!1}},showSpinner:{required:!1,tsType:{name:"boolean"},description:"是否渲染加载指示器（默认 true）",defaultValue:{value:"true",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"自定义类名"}}};export{$ as M};
