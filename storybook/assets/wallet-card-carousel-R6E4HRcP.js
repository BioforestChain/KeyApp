import{r as $,j as d}from"./iframe-13xkpxxJ.js";import{g as N,e as k,c as A,S as W,a as z}from"./swiper-ldoQySkF.js";import{W as O}from"./wallet-card-CfgViIY0.js";import{u as _}from"./useWalletTheme-ChBUNofe.js";import{b as D}from"./chain-config-BqHvYoiy.js";import{c as U}from"./utils-CDN07tui.js";import{D as V,a as H,I as X,b as L,c as R}from"./dropdown-menu-j2JwV_df.js";/* empty css                     */import{I as Y}from"./IconWallet-z6FiW41I.js";import{I as Z}from"./IconPlus-DYG4UuqU.js";import{I as F}from"./IconSearch-C4tYv-BI.js";import{c as G}from"./createReactComponent-BmAlyfWH.js";const J=[["path",{d:"M5 21v-16a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v16l-3 -2l-2 2l-2 -2l-2 2l-2 -2l-3 2m4 -14h6m-6 4h6m-2 4h2",key:"svg-0"}]],K=G("outline","receipt","Receipt",J);function Q(e){const{effect:a,swiper:t,on:u,setTranslate:g,setTransition:n,overwriteParams:l,perspective:i,recreateShadows:r,getEffectParams:p}=e;u("beforeInit",()=>{if(t.params.effect!==a)return;t.classNames.push(`${t.params.containerModifierClass}${a}`),i&&i()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const m=l?l():{};Object.assign(t.params,m),Object.assign(t.originalParams,m)}),u("setTranslate _virtualUpdated",()=>{t.params.effect===a&&g()}),u("setTransition",(m,f)=>{t.params.effect===a&&n(f)}),u("transitionEnd",()=>{if(t.params.effect===a&&r){if(!p||!p().slideShadows)return;t.slides.forEach(m=>{m.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(f=>f.remove())}),r()}});let y;u("virtualUpdate",()=>{t.params.effect===a&&(t.slides.length||(y=!0),requestAnimationFrame(()=>{y&&t.slides&&t.slides.length&&(g(),y=!1)}))})}function B(e,a){const t=N(a);return t!==a&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function ee({swiper:e,duration:a,transformElements:t,allSlides:u}){const{activeIndex:g}=e,n=l=>l.parentElement?l.parentElement:e.slides.find(r=>r.shadowRoot&&r.shadowRoot===l.parentNode);if(e.params.virtualTranslate&&a!==0){let l=!1,i;u?i=t:i=t.filter(r=>{const p=r.classList.contains("swiper-slide-transform")?n(r):r;return e.getSlideIndex(p)===g}),i.forEach(r=>{k(r,()=>{if(l||!e||e.destroyed)return;l=!0,e.animating=!1;const p=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(p)})})}}function te(e,a,t){const u=`swiper-slide-shadow${` swiper-slide-shadow-${e}`}`,g=N(a);let n=g.querySelector(`.${u.split(" ").join(".")}`);return n||(n=A("div",u.split(" ")),g.append(n)),n}function se({swiper:e,extendParams:a,on:t}){a({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),Q({effect:"cards",swiper:e,on:t,setTranslate:()=>{const{slides:n,activeIndex:l,rtlTranslate:i}=e,r=e.params.cardsEffect,{startTranslate:p,isTouched:y}=e.touchEventsData,m=i?-e.translate:e.translate;for(let f=0;f<n.length;f+=1){const x=n[f],w=x.progress,o=Math.min(Math.max(w,-4),4);let C=x.swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&(e.wrapperEl.style.transform=`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(C-=n[0].swiperSlideOffset);let c=e.params.cssMode?-C-e.translate:-C,S=0;const q=-100*Math.abs(o);let M=1,E=-r.perSlideRotate*o,j=r.perSlideOffset-Math.abs(o)*.75;const I=e.virtual&&e.params.virtual.enabled?e.virtual.from+f:f,s=(I===l||I===l-1)&&o>0&&o<1&&(y||e.params.cssMode)&&m<p,v=(I===l||I===l+1)&&o<0&&o>-1&&(y||e.params.cssMode)&&m>p;if(s||v){const h=(1-Math.abs((Math.abs(o)-.5)/.5))**.5;E+=-28*o*h,M+=-.5*h,j+=96*h,S=`${(r.rotate||e.isHorizontal()?-25:0)*h*Math.abs(o)}%`}if(o<0?c=`calc(${c}px ${i?"-":"+"} (${j*Math.abs(o)}%))`:o>0?c=`calc(${c}px ${i?"-":"+"} (-${j*Math.abs(o)}%))`:c=`${c}px`,!e.isHorizontal()){const h=S;S=c,c=h}const b=o<0?`${1+(1-M)*o}`:`${1-(1-M)*o}`,T=`
        translate3d(${c}, ${S}, ${q}px)
        rotateZ(${r.rotate?i?-E:E:0}deg)
        scale(${b})
      `;if(r.slideShadows){let h=x.querySelector(".swiper-slide-shadow");h||(h=te("cards",x)),h&&(h.style.opacity=Math.min(Math.max((Math.abs(o)-.5)/.5,0),1))}x.style.zIndex=-Math.abs(Math.round(w))+n.length;const P=B(r,x);P.style.transform=T}},setTransition:n=>{const l=e.slides.map(i=>N(i));l.forEach(i=>{i.style.transitionDuration=`${n}ms`,i.querySelectorAll(".swiper-slide-shadow").forEach(r=>{r.style.transitionDuration=`${n}ms`})}),ee({swiper:e,duration:n,transformElements:l})},perspective:()=>!0,overwriteParams:()=>({_loopSwapReset:!1,watchSlidesProgress:!0,loopAdditionalSlides:e.params.cardsEffect.rotate?3:2,centeredSlides:!0,virtualTranslate:!e.params.cssMode})})}function re(){const e=D();return $.useMemo(()=>{const a={};for(const t of e)t.icon&&(a[t.id]=t.icon);return a},[e])}function ae({wallets:e,currentWalletId:a,selectedChain:t,chainPreferences:u={},chainNames:g,onWalletChange:n,onCopyAddress:l,onOpenChainSelector:i,onOpenSettings:r,onOpenWalletList:p,onAddWallet:y,onOpenAddressBalance:m,onOpenAddressTransactions:f,className:x}){const w=$.useRef(null),{getWalletTheme:o}=_(),C=re(),c=e.findIndex(s=>s.id===a),[S,q]=$.useState(c>=0?c:0),M=s=>s===S?"high":Math.abs(s-S)===1?"medium":"low";$.useEffect(()=>{w.current&&c>=0&&w.current.slideTo(c,0)},[c]);const E=$.useCallback(s=>{q(s.activeIndex);const v=e[s.activeIndex];v&&v.id!==a&&n?.(v.id)},[e,a,n]),j=s=>u[s.id]??s.chain??t,I=(s,v)=>s.chainAddresses.find(T=>T.chain===v)?.address??s.address;return e.length===0?null:d.jsxs("div",{className:U("relative w-full pt-12 pb-2",x),children:[e.length>1&&d.jsxs("button",{onClick:p,className:"bg-primary text-primary-foreground hover:bg-primary/90 absolute top-0 left-4 z-10 flex items-center gap-1.5 rounded-full px-3 py-1.5 text-xs font-medium backdrop-blur-sm transition-colors",children:[d.jsx(Y,{className:"size-3.5"}),d.jsxs("span",{children:[e.length," 个钱包"]})]}),d.jsxs("div",{className:"absolute top-0 right-4 z-10 flex items-center gap-1.5",children:[y&&d.jsx("button",{onClick:y,className:"bg-primary text-primary-foreground hover:bg-primary/90 flex items-center justify-center rounded-full p-1.5 backdrop-blur-sm transition-colors",children:d.jsx(Z,{className:"size-4"})}),(m||f)&&d.jsxs(V,{children:[d.jsx(H,{className:"bg-primary text-primary-foreground hover:bg-primary/90 flex items-center justify-center rounded-full p-1.5 backdrop-blur-sm transition-colors",children:d.jsx(X,{className:"size-4"})}),d.jsxs(L,{align:"end",sideOffset:8,children:[m&&d.jsxs(R,{onClick:m,children:[d.jsx(F,{className:"size-4"}),"地址余额查询"]}),f&&d.jsxs(R,{onClick:f,children:[d.jsx(K,{className:"size-4"}),"地址交易查询"]})]})]})]}),d.jsx(W,{modules:[se],effect:"cards",grabCursor:!0,cardsEffect:{perSlideOffset:8,perSlideRotate:2,rotate:!0,slideShadows:!1},onSwiper:s=>{w.current=s,q(s.activeIndex)},onSlideChange:E,initialSlide:c>=0?c:0,className:"mx-auto h-[212px] w-[min(92vw,360px)] overflow-visible [&_.swiper-slide]:size-full [&_.swiper-slide]:overflow-visible! [&_.swiper-slide]:rounded-2xl",children:e.map((s,v)=>{const b=j(s),T=I(s,b);return d.jsx(z,{children:d.jsx(O,{wallet:s,chain:b,chainName:g[b]??b,priority:M(v),address:T,chainIconUrl:C[b],themeHue:o(s.id),onCopyAddress:()=>{T&&l?.(T)},onOpenChainSelector:i?()=>i(s.id):void 0,onOpenSettings:r?()=>r(s.id):void 0})},s.id)})})]})}ae.__docgenInfo={description:`钱包卡片轮播组件
使用 Swiper 实现卡片切换效果`,methods:[],displayName:"WalletCardCarousel",props:{wallets:{required:!0,tsType:{name:"Array",elements:[{name:"Wallet"}],raw:"Wallet[]"},description:""},currentWalletId:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},selectedChain:{required:!0,tsType:{name:"ChainType"},description:""},chainPreferences:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"ChainType"}],raw:"Record<string, ChainType>"},description:"每个钱包的链偏好 (walletId -> chainId)",defaultValue:{value:"{}",computed:!1}},chainNames:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"},description:""},onWalletChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(walletId: string) => void",signature:{arguments:[{type:{name:"string"},name:"walletId"}],return:{name:"void"}}},description:""},onCopyAddress:{required:!1,tsType:{name:"signature",type:"function",raw:"(address: string) => void",signature:{arguments:[{type:{name:"string"},name:"address"}],return:{name:"void"}}},description:""},onOpenChainSelector:{required:!1,tsType:{name:"signature",type:"function",raw:"(walletId: string) => void",signature:{arguments:[{type:{name:"string"},name:"walletId"}],return:{name:"void"}}},description:""},onOpenSettings:{required:!1,tsType:{name:"signature",type:"function",raw:"(walletId: string) => void",signature:{arguments:[{type:{name:"string"},name:"walletId"}],return:{name:"void"}}},description:""},onOpenWalletList:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onAddWallet:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenAddressBalance:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenAddressTransactions:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};export{ae as W,re as u};
