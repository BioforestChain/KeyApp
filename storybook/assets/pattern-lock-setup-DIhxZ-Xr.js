import{r as s,j as e}from"./iframe-Cdc63axx.js";import{c as y}from"./utils-CDN07tui.js";import{p as f,P as h}from"./pattern-lock-DeSVki0k.js";import{I as S}from"./icon-circle-BA3rQJgu.js";import{G as b}from"./gradient-button-CZKG_OxC.js";import{u as L}from"./useTranslation-B1THGpvK.js";import{I}from"./IconShieldCheck-G2qkR-oE.js";import{I as T}from"./IconChevronRight-pfWSeOFV.js";import{c as P}from"./createReactComponent-Byz9u14m.js";const R=[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]],_=P("outline","refresh","Refresh",R);function q({onComplete:l,minPoints:a=4,className:x}){const{t}=L("security"),[r,m]=s.useState("set"),[n,d]=s.useState([]),[k,o]=s.useState([]),[p,c]=s.useState(!1),g=s.useCallback(i=>{},[]),v=s.useCallback(i=>{if(i.length>=a){const u=f(n),C=f(i);u===C?l(u):(c(!0),setTimeout(()=>{c(!1),o([])},1500))}},[n,a,l]),j=s.useCallback(()=>{m("set"),d([]),o([]),c(!1)},[]),N=n.length>=a;return e.jsxs("div",{className:y("space-y-6",x),children:[e.jsxs("div",{className:"text-center",children:[e.jsx(S,{icon:I,variant:"primary",size:"lg",className:"mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold",children:t(r==="set"?"patternLock.setTitle":"patternLock.confirmTitle")}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:t(r==="set"?"patternLock.setDesc":"patternLock.confirmDesc")})]}),r==="set"?e.jsx(h,{value:n,onChange:d,onComplete:g,minPoints:a,"data-testid":"pattern-lock-set"}):e.jsx(h,{value:k,onChange:o,onComplete:v,minPoints:a,error:p,"data-testid":"pattern-lock-confirm"}),e.jsx("div",{className:"h-5",children:p&&e.jsx("p",{className:"text-destructive text-center text-sm animate-in fade-in","data-testid":"pattern-lock-mismatch",children:t("patternLock.mismatch")})}),e.jsxs("div",{className:"h-12",children:[r==="set"&&N&&e.jsxs(b,{variant:"mint",className:"w-full",onClick:()=>m("confirm"),"data-testid":"pattern-lock-next-button",children:[t("patternLock.confirmTitle"),e.jsx(T,{className:"ml-2 size-4"})]}),r==="confirm"&&e.jsxs("button",{type:"button",onClick:j,className:"mx-auto flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors","data-testid":"pattern-lock-reset-button",children:[e.jsx(_,{className:"size-4"}),t("patternLock.reset")]})]})]})}q.__docgenInfo={description:`图案锁设置组件

两步流程：
1. 设置图案
2. 确认图案`,methods:[],displayName:"PatternLockSetup",props:{onComplete:{required:!0,tsType:{name:"signature",type:"function",raw:"(patternKey: string) => void",signature:{arguments:[{type:{name:"string"},name:"patternKey"}],return:{name:"void"}}},description:"设置完成回调，返回图案字符串"},minPoints:{required:!1,tsType:{name:"number"},description:"最少需要连接的点数",defaultValue:{value:"4",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"额外的 className"}}};export{_ as I,q as P};
