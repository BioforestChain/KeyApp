import{r as j,j as d}from"./iframe-Dp2Ali2n.js";import{g as N,e as k,c as A,S as W,a as z}from"./swiper-BGfEJWqG.js";import{W as O}from"./wallet-card-_SaARk4t.js";import{u as _}from"./useWalletTheme-BjT5vyFJ.js";import"./user-profile-Cm8tk7wk.js";import{d as D}from"./index-DLitWbhY.js";import{c as U}from"./utils-4perknFd.js";import{D as V,a as H,I as X,b as L,c as R}from"./dropdown-menu-CYo36PiC.js";/* empty css                     */import{u as Q}from"./useTranslation-BYYU4Ehv.js";import{I as Y}from"./IconWallet-C8KAYvQ_.js";import{I as Z}from"./IconPlus-DltJjy4q.js";import{I as F}from"./IconSearch-CN46TqQC.js";import{c as B}from"./createReactComponent-Bvc6i3j5.js";const G=[["path",{d:"M5 21v-16a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v16l-3 -2l-2 2l-2 -2l-2 2l-2 -2l-3 2m4 -14h6m-6 4h6m-2 4h2",key:"svg-0"}]],J=B("outline","receipt","Receipt",G);function K(e){const{effect:a,swiper:t,on:u,setTranslate:p,setTransition:l,overwriteParams:n,perspective:i,recreateShadows:r,getEffectParams:m}=e;u("beforeInit",()=>{if(t.params.effect!==a)return;t.classNames.push(`${t.params.containerModifierClass}${a}`),i&&i()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const f=n?n():{};Object.assign(t.params,f),Object.assign(t.originalParams,f)}),u("setTranslate _virtualUpdated",()=>{t.params.effect===a&&p()}),u("setTransition",(f,h)=>{t.params.effect===a&&l(h)}),u("transitionEnd",()=>{if(t.params.effect===a&&r){if(!m||!m().slideShadows)return;t.slides.forEach(f=>{f.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>h.remove())}),r()}});let v;u("virtualUpdate",()=>{t.params.effect===a&&(t.slides.length||(v=!0),requestAnimationFrame(()=>{v&&t.slides&&t.slides.length&&(p(),v=!1)}))})}function ee(e,a){const t=N(a);return t!==a&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function te({swiper:e,duration:a,transformElements:t,allSlides:u}){const{activeIndex:p}=e,l=n=>n.parentElement?n.parentElement:e.slides.find(r=>r.shadowRoot&&r.shadowRoot===n.parentNode);if(e.params.virtualTranslate&&a!==0){let n=!1,i;u?i=t:i=t.filter(r=>{const m=r.classList.contains("swiper-slide-transform")?l(r):r;return e.getSlideIndex(m)===p}),i.forEach(r=>{k(r,()=>{if(n||!e||e.destroyed)return;n=!0,e.animating=!1;const m=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(m)})})}}function se(e,a,t){const u=`swiper-slide-shadow${` swiper-slide-shadow-${e}`}`,p=N(a);let l=p.querySelector(`.${u.split(" ").join(".")}`);return l||(l=A("div",u.split(" ")),p.append(l)),l}function ae({swiper:e,extendParams:a,on:t}){a({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),K({effect:"cards",swiper:e,on:t,setTranslate:()=>{const{slides:l,activeIndex:n,rtlTranslate:i}=e,r=e.params.cardsEffect,{startTranslate:m,isTouched:v}=e.touchEventsData,f=i?-e.translate:e.translate;for(let h=0;h<l.length;h+=1){const g=l[h],S=g.progress,o=Math.min(Math.max(S,-4),4);let I=g.swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&(e.wrapperEl.style.transform=`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(I-=l[0].swiperSlideOffset);let c=e.params.cssMode?-I-e.translate:-I,T=0;const q=-100*Math.abs(o);let M=1,E=-r.perSlideRotate*o,$=r.perSlideOffset-Math.abs(o)*.75;const C=e.virtual&&e.params.virtual.enabled?e.virtual.from+h:h,s=(C===n||C===n-1)&&o>0&&o<1&&(v||e.params.cssMode)&&f<m,x=(C===n||C===n+1)&&o<0&&o>-1&&(v||e.params.cssMode)&&f>m;if(s||x){const y=(1-Math.abs((Math.abs(o)-.5)/.5))**.5;E+=-28*o*y,M+=-.5*y,$+=96*y,T=`${(r.rotate||e.isHorizontal()?-25:0)*y*Math.abs(o)}%`}if(o<0?c=`calc(${c}px ${i?"-":"+"} (${$*Math.abs(o)}%))`:o>0?c=`calc(${c}px ${i?"-":"+"} (-${$*Math.abs(o)}%))`:c=`${c}px`,!e.isHorizontal()){const y=T;T=c,c=y}const b=o<0?`${1+(1-M)*o}`:`${1-(1-M)*o}`,w=`
        translate3d(${c}, ${T}, ${q}px)
        rotateZ(${r.rotate?i?-E:E:0}deg)
        scale(${b})
      `;if(r.slideShadows){let y=g.querySelector(".swiper-slide-shadow");y||(y=se("cards",g)),y&&(y.style.opacity=Math.min(Math.max((Math.abs(o)-.5)/.5,0),1))}g.style.zIndex=-Math.abs(Math.round(S))+l.length;const P=ee(r,g);P.style.transform=w}},setTransition:l=>{const n=e.slides.map(i=>N(i));n.forEach(i=>{i.style.transitionDuration=`${l}ms`,i.querySelectorAll(".swiper-slide-shadow").forEach(r=>{r.style.transitionDuration=`${l}ms`})}),te({swiper:e,duration:l,transformElements:n})},perspective:()=>!0,overwriteParams:()=>({_loopSwapReset:!1,watchSlidesProgress:!0,loopAdditionalSlides:e.params.cardsEffect.rotate?3:2,centeredSlides:!0,virtualTranslate:!e.params.cssMode})})}function re(){const e=D();return j.useMemo(()=>{const a={};for(const t of e)t.icon&&(a[t.id]=t.icon);return a},[e])}function ne({wallets:e,currentWalletId:a,selectedChain:t,chainPreferences:u={},onWalletChange:p,onCopyAddress:l,onOpenChainSelector:n,onOpenSettings:i,onOpenWalletList:r,onAddWallet:m,onOpenAddressBalance:v,onOpenAddressTransactions:f,className:h}){const{t:g}=Q(["home","wallet","common"]),S=j.useRef(null),{getWalletTheme:o}=_(),I=re(),c=e.findIndex(s=>s.id===a),[T,q]=j.useState(c>=0?c:0),M=s=>s===T?"high":Math.abs(s-T)===1?"medium":"low";j.useEffect(()=>{S.current&&c>=0&&S.current.slideTo(c,0)},[c]);const E=j.useCallback(s=>{q(s.activeIndex);const x=e[s.activeIndex];x&&x.id!==a&&p?.(x.id)},[e,a,p]),$=s=>u[s.id]??s.chain??t,C=(s,x)=>s.chainAddresses.find(w=>w.chain===x)?.address??s.address;return e.length===0?null:d.jsxs("div",{className:U("relative w-full pt-12 pb-2",h),children:[e.length>1&&d.jsxs("button",{onClick:r,className:"bg-primary text-primary-foreground hover:bg-primary/90 absolute top-0 left-4 z-10 flex items-center gap-1.5 rounded-full px-3 py-1.5 text-xs font-medium backdrop-blur-sm transition-colors",children:[d.jsx(Y,{className:"size-3.5"}),d.jsx("span",{children:g("wallet:carousel.walletCount",{count:e.length})})]}),d.jsxs("div",{className:"absolute top-0 right-4 z-10 flex items-center gap-1.5",children:[m&&d.jsx("button",{onClick:m,className:"bg-primary text-primary-foreground hover:bg-primary/90 flex items-center justify-center rounded-full p-1.5 backdrop-blur-sm transition-colors",children:d.jsx(Z,{className:"size-4"})}),(v||f)&&d.jsxs(V,{children:[d.jsx(H,{className:"bg-primary text-primary-foreground hover:bg-primary/90 flex items-center justify-center rounded-full p-1.5 backdrop-blur-sm transition-colors",children:d.jsx(X,{className:"size-4"})}),d.jsxs(L,{align:"end",sideOffset:8,children:[v&&d.jsxs(R,{onClick:v,children:[d.jsx(F,{className:"size-4"}),g("wallet:menu.addressBalanceQuery")]}),f&&d.jsxs(R,{onClick:f,children:[d.jsx(J,{className:"size-4"}),g("wallet:menu.addressTransactionsQuery")]})]})]})]}),d.jsx(W,{modules:[ae],effect:"cards",grabCursor:!0,cardsEffect:{perSlideOffset:8,perSlideRotate:2,rotate:!0,slideShadows:!1},onSwiper:s=>{S.current=s,q(s.activeIndex)},onSlideChange:E,initialSlide:c>=0?c:0,className:"mx-auto h-[212px] w-[min(92vw,360px)] overflow-visible [&_.swiper-slide]:size-full [&_.swiper-slide]:overflow-visible! [&_.swiper-slide]:rounded-2xl",children:e.map((s,x)=>{const b=$(s),w=C(s,b);return d.jsx(z,{children:d.jsx(O,{wallet:s,chain:b,chainName:g(`common:chains.${b}`,{defaultValue:b}),priority:M(x),address:w,chainIconUrl:I[b],themeHue:o(s.id),onCopyAddress:()=>{w&&l?.(w)},onOpenChainSelector:n?()=>n(s.id):void 0,onOpenSettings:i?()=>i(s.id):void 0})},s.id)})})]})}ne.__docgenInfo={description:`钱包卡片轮播组件
使用 Swiper 实现卡片切换效果`,methods:[],displayName:"WalletCardCarousel",props:{wallets:{required:!0,tsType:{name:"Array",elements:[{name:"Wallet"}],raw:"Wallet[]"},description:""},currentWalletId:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},selectedChain:{required:!0,tsType:{name:"ChainType"},description:""},chainPreferences:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"ChainType"}],raw:"Record<string, ChainType>"},description:"每个钱包的链偏好 (walletId -> chainId)",defaultValue:{value:"{}",computed:!1}},onWalletChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(walletId: string) => void",signature:{arguments:[{type:{name:"string"},name:"walletId"}],return:{name:"void"}}},description:""},onCopyAddress:{required:!1,tsType:{name:"signature",type:"function",raw:"(address: string) => void",signature:{arguments:[{type:{name:"string"},name:"address"}],return:{name:"void"}}},description:""},onOpenChainSelector:{required:!1,tsType:{name:"signature",type:"function",raw:"(walletId: string) => void",signature:{arguments:[{type:{name:"string"},name:"walletId"}],return:{name:"void"}}},description:""},onOpenSettings:{required:!1,tsType:{name:"signature",type:"function",raw:"(walletId: string) => void",signature:{arguments:[{type:{name:"string"},name:"walletId"}],return:{name:"void"}}},description:""},onOpenWalletList:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onAddWallet:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenAddressBalance:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenAddressTransactions:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};export{ne as W,re as u};
