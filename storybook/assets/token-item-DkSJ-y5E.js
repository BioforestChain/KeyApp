import{v as tt,w as he,x as N,y as ae,z as W,A as se,B as re,C as ge,D as nt,E as $,F as at,G as st,H as Te,J as Le,r as g,K as rt,N as ot,j as d,R as S,O as it,P as be}from"./iframe-g2b0m8DI.js";import{c as w}from"./utils-CDN07tui.js";import"./wallet-card-Ddaln5uG.js";import"./wallet-selector-DYNhADHH.js";import"./address-display-C7nFi0cW.js";import{C as oe}from"./chain-icon-COt1uHxx.js";import{c as lt,I as ct}from"./web-wmJrEV3C.js";import{u as de}from"./useTranslation-Cu2h0njW.js";import{I as dt}from"./IconCheck-C48_yMgZ.js";import{T as ut}from"./token-icon-uu9a5B4t.js";import{u as mt,i as ke,j as Me,k as ye,l as pt}from"./chain-config-DW44byg9.js";import{A as J}from"./amount-BQsqQYGO.js";import{a as te,i as Z,b as ft,C as ht,D as gt,A as Tt,d as bt,g as Be,I as yt}from"./index-BVzIq5_8.js";import"./index-D0E7N0oa.js";import{m as Pe}from"./transaction-item-91IuR5c8.js";import{d as D}from"./breakpoint-wIg8UP9C.js";import{e as De,a as v,o as _,c as q,s as l,n as k,f as _t,l as Rt,_ as R,b as j,r as H,u as Ot}from"./schemas-BX8BzOgD.js";import"./web-C48KhOIf.js";import"./gradient-button-Bxl7tD7d.js";import"./loading-spinner-BKRfkk18.js";import{E as Et}from"./empty-state-Djr2ZYm8.js";import{c as vt}from"./skeleton-BkqRBCyh.js";import{A as _e}from"./amount-display-p3kKhEyv.js";import{a as Ct}from"./animated-number-D2KYFGet.js";import"./time-display-BRjqNmbb.js";import"./qr-code-C7yKKB09.js";import"./icon-circle-BPhKNUJn.js";import"./copyable-text-BhO3508M.js";import{c as Ue}from"./index-B_jtOnfb.js";import{u as At,m as St}from"./useRenderElement-CculAx30.js";import{D as wt,a as xt,I as Nt,b as It,c as Lt}from"./dropdown-menu-pacyIMP3.js";import{B as kt}from"./button-CkH5a8bp.js";import{T as Mt}from"./transaction-list-CtSNixvf.js";import{S as Bt}from"./swipeable-tabs-C_CtScwj.js";import{I as Pt}from"./IconAlertTriangle-BX3363qR.js";var Dt=class extends tt{constructor(e,t){super(),this.options=t,this.#n=e,this.#s=null,this.#a=he(),this.bindMethods(),this.setOptions(t)}#n;#e=void 0;#f=void 0;#t=void 0;#o;#d;#a;#s;#h;#u;#m;#i;#l;#r;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),Re(this.#e,this.options)?this.#c():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ie(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ie(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#R(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,n=this.#e;if(this.options=this.#n.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof N(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#O(),this.#e.setOptions(this.options),t._defaulted&&!ae(this.options,t)&&this.#n.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const a=this.hasListeners();a&&Oe(this.#e,n,this.options,t)&&this.#c(),this.updateResult(),a&&(this.#e!==n||N(this.options.enabled,this.#e)!==N(t.enabled,this.#e)||W(this.options.staleTime,this.#e)!==W(t.staleTime,this.#e))&&this.#g();const s=this.#T();a&&(this.#e!==n||N(this.options.enabled,this.#e)!==N(t.enabled,this.#e)||s!==this.#r)&&this.#b(s)}getOptimisticResult(e){const t=this.#n.getQueryCache().build(this.#n,e),n=this.createResult(t,e);return Ft(this,n)&&(this.#t=n,this.#d=this.options,this.#o=this.#e.state),n}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(n,a)=>(this.trackProp(a),t?.(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#n.defaultQueryOptions(e),n=this.#n.getQueryCache().build(this.#n,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#c({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#c(e){this.#O();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(se)),t}#g(){this.#_();const e=W(this.options.staleTime,this.#e);if(re||this.#t.isStale||!ge(e))return;const n=nt(this.#t.dataUpdatedAt,e)+1;this.#i=$.setTimeout(()=>{this.#t.isStale||this.updateResult()},n)}#T(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#b(e){this.#R(),this.#r=e,!(re||N(this.options.enabled,this.#e)===!1||!ge(this.#r)||this.#r===0)&&(this.#l=$.setInterval(()=>{(this.options.refetchIntervalInBackground||at.isFocused())&&this.#c()},this.#r))}#y(){this.#g(),this.#b(this.#T())}#_(){this.#i&&($.clearTimeout(this.#i),this.#i=void 0)}#R(){this.#l&&($.clearInterval(this.#l),this.#l=void 0)}createResult(e,t){const n=this.#e,a=this.options,s=this.#t,r=this.#o,o=this.#d,m=e!==n?e.state:this.#f,{state:c}=e;let i={...c},f=!1,p;if(t._optimisticResults){const E=this.hasListeners(),U=!E&&Re(e,t),B=E&&Oe(e,n,t,a);(U||B)&&(i={...i,...st(c.data,e.options)}),t._optimisticResults==="isRestoring"&&(i.fetchStatus="idle")}let{error:T,errorUpdatedAt:b,status:h}=i;p=i.data;let y=!1;if(t.placeholderData!==void 0&&p===void 0&&h==="pending"){let E;s?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(E=s.data,y=!0):E=typeof t.placeholderData=="function"?t.placeholderData(this.#m?.state.data,this.#m):t.placeholderData,E!==void 0&&(h="success",p=Te(s?.data,E,t),f=!0)}if(t.select&&p!==void 0&&!y)if(s&&p===r?.data&&t.select===this.#h)p=this.#u;else try{this.#h=t.select,p=t.select(p),p=Te(s?.data,p,t),this.#u=p,this.#s=null}catch(E){this.#s=E}this.#s&&(T=this.#s,p=this.#u,b=Date.now(),h="error");const A=i.fetchStatus==="fetching",C=h==="pending",x=h==="error",I=C&&A,L=p!==void 0,O={status:h,fetchStatus:i.fetchStatus,isPending:C,isSuccess:h==="success",isError:x,isInitialLoading:I,isLoading:I,data:p,dataUpdatedAt:i.dataUpdatedAt,error:T,errorUpdatedAt:b,failureCount:i.fetchFailureCount,failureReason:i.fetchFailureReason,errorUpdateCount:i.errorUpdateCount,isFetched:i.dataUpdateCount>0||i.errorUpdateCount>0,isFetchedAfterMount:i.dataUpdateCount>m.dataUpdateCount||i.errorUpdateCount>m.errorUpdateCount,isFetching:A,isRefetching:A&&!C,isLoadingError:x&&!L,isPaused:i.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&L,isStale:ue(e,t),refetch:this.refetch,promise:this.#a,isEnabled:N(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const E=V=>{O.status==="error"?V.reject(O.error):O.data!==void 0&&V.resolve(O.data)},U=()=>{const V=this.#a=O.promise=he();E(V)},B=this.#a;switch(B.status){case"pending":e.queryHash===n.queryHash&&E(B);break;case"fulfilled":(O.status==="error"||O.data!==B.value)&&U();break;case"rejected":(O.status!=="error"||O.error!==B.reason)&&U();break}}return O}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#o=this.#e.state,this.#d=this.options,this.#o.data!==void 0&&(this.#m=this.#e),ae(t,e))return;this.#t=t;const n=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!this.#p.size)return!0;const r=new Set(s??this.#p);return this.options.throwOnError&&r.add("error"),Object.keys(this.#t).some(o=>{const u=o;return this.#t[u]!==e[u]&&r.has(u)})};this.#E({listeners:n()})}#O(){const e=this.#n.getQueryCache().build(this.#n,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#f=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#E(e){Le.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#n.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function Ut(e,t){return N(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Re(e,t){return Ut(e,t)||e.state.data!==void 0&&ie(e,t,t.refetchOnMount)}function ie(e,t,n){if(N(t.enabled,e)!==!1&&W(t.staleTime,e)!=="static"){const a=typeof n=="function"?n(e):n;return a==="always"||a!==!1&&ue(e,t)}return!1}function Oe(e,t,n,a){return(e!==t||N(a.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&ue(e,n)}function ue(e,t){return N(t.enabled,e)!==!1&&e.isStaleByTime(W(t.staleTime,e))}function Ft(e,t){return!ae(e.getCurrentResult(),t)}var Fe=g.createContext(!1),jt=()=>g.useContext(Fe);Fe.Provider;function Vt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Ht=g.createContext(Vt()),qt=()=>g.useContext(Ht),Gt=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},zt=e=>{g.useEffect(()=>{e.clearReset()},[e])},Wt=({result:e,errorResetBoundary:t,throwOnError:n,query:a,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&(s&&e.data===void 0||rt(n,[e.error,a])),Jt=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...s)=>n(a(...s)):n(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Qt=(e,t)=>e.isLoading&&e.isFetching&&!t,$t=(e,t)=>e?.suspense&&t.isPending,Ee=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Kt(e,t,n){const a=jt(),s=qt(),r=ot(),o=r.defaultQueryOptions(e);r.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=a?"isRestoring":"optimistic",Jt(o),Gt(o,s),zt(s);const u=!r.getQueryCache().get(o.queryHash),[m]=g.useState(()=>new t(r,o)),c=m.getOptimisticResult(o),i=!a&&e.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(f=>{const p=i?m.subscribe(Le.batchCalls(f)):se;return m.updateResult(),p},[m,i]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),g.useEffect(()=>{m.setOptions(o)},[o,m]),$t(o,c))throw Ee(o,m,s);if(Wt({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(o,c),o.experimental_prefetchInRender&&!re&&Qt(c,a)&&(u?Ee(o,m,s):r.getQueryCache().get(o.queryHash)?.promise)?.catch(se).finally(()=>{m.updateResult()}),o.notifyOnChangeProps?c:m.trackResult(c)}function ve(e,t){return Kt(e,Dt)}function Zt(e,t){const n=t==="sm"?16:20;if(e.length<=n)return e;const a=t==="sm"?6:8,s=t==="sm"?4:6;return`${e.slice(0,a)}...${e.slice(-s)}`}function Xt({chainId:e,chainIcon:t,chainSymbol:n,address:a,copyable:s=!0,onCopy:r,size:o="md",className:u}){const{t:m}=de("common"),[c,i]=g.useState(!1),f=g.useCallback(async()=>{try{await lt.write({text:a}),i(!0),r?.(),setTimeout(()=>i(!1),2e3)}catch{console.error("Failed to copy address")}},[a,r]),p=o==="sm"?"sm":"md",T=Zt(a,o);return s?d.jsxs("button",{type:"button",onClick:f,className:w("flex items-center gap-2 transition-colors","hover:text-primary focus-visible:ring-ring rounded focus:outline-none focus-visible:ring-2",u),title:a,"aria-label":c?m("copiedToClipboard"):`${m("copy")} ${a}`,children:[d.jsx(oe,{chainId:e,iconUrl:t,symbol:n,size:p}),d.jsx("span",{className:w("font-mono",o==="sm"?"text-xs":"text-sm"),children:T}),c?d.jsx(dt,{className:"size-4 shrink-0 text-green-500","aria-hidden":"true"}):d.jsx(ct,{className:"size-4 shrink-0 text-muted-foreground","aria-hidden":"true"})]}):d.jsxs("div",{className:w("flex items-center gap-2",u),children:[d.jsx(oe,{chainId:e,iconUrl:t,symbol:n,size:p}),d.jsx("span",{className:w("font-mono",o==="sm"?"text-xs":"text-sm"),title:a,children:T})]})}Xt.__docgenInfo={description:`链地址显示组件

组合显示链图标和地址，支持复制功能
图标自动从 ChainIconProvider context 获取

@example
// 自动获取图标（需要 ChainIconProvider）
<ChainAddressDisplay chainId="ethereum" address="0x1234...5678" />

// 手动指定图标
<ChainAddressDisplay chainId="ethereum" chainIcon="/custom.svg" address="0x1234...5678" />`,methods:[],displayName:"ChainAddressDisplay",props:{chainId:{required:!0,tsType:{name:"string"},description:"链 ID（用于从 ChainIconProvider 自动获取图标）"},chainIcon:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"链图标 URL（可选，覆盖 context）"},chainSymbol:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"链符号（可选，用于 fallback）"},address:{required:!0,tsType:{name:"string"},description:"地址"},copyable:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"是否可复制",defaultValue:{value:"true",computed:!1}},onCopy:{required:!1,tsType:{name:"union",raw:"(() => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"复制回调"},size:{required:!1,tsType:{name:"union",raw:"'sm' | 'md' | undefined",elements:[{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"undefined"}]},description:"尺寸",defaultValue:{value:"'md'",computed:!1}},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"额外样式"}}};function je({tokens:e,loading:t=!1,refreshing:n=!1,showChange:a=!1,onTokenClick:s,emptyTitle:r="暂无资产",emptyDescription:o="转入资产后将显示在这里",emptyAction:u,className:m,testId:c,renderActions:i,mainAssetSymbol:f,onContextMenu:p,menuItems:T}){return t?d.jsx(vt,{count:3,...m&&{className:m}}):e.length===0?d.jsx(Et,{...c&&{testId:`${c}-empty`},title:r,description:o,...u&&{action:u},icon:d.jsx("svg",{className:"size-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),...m&&{className:m}}):d.jsx("div",{...c&&{"data-testid":c},className:w("space-y-1",m),children:e.map(b=>d.jsx(Ye,{token:b,testId:c?`token-item-${b.chain}-${b.symbol}`:void 0,showChange:a,loading:n,renderActions:i,mainAssetSymbol:f,onContextMenu:p,menuItems:T,...s&&{onClick:()=>s(b)}},`${b.chain}-${b.symbol}`))})}je.__docgenInfo={description:"",methods:[],displayName:"TokenList",props:{tokens:{required:!0,tsType:{name:"Array",elements:[{name:"TokenInfo"}],raw:"TokenInfo[]"},description:""},loading:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"Show skeleton loading state (no tokens yet)",defaultValue:{value:"false",computed:!1}},refreshing:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"Show balance refresh animation (tokens exist but refreshing)",defaultValue:{value:"false",computed:!1}},showChange:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"",defaultValue:{value:"false",computed:!1}},onTokenClick:{required:!1,tsType:{name:"union",raw:"((token: TokenInfo) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},emptyTitle:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"",defaultValue:{value:"'暂无资产'",computed:!1}},emptyDescription:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"",defaultValue:{value:"'转入资产后将显示在这里'",computed:!1}},emptyAction:{required:!1,tsType:{name:"union",raw:"React.ReactNode | undefined",elements:[{name:"ReactReactNode",raw:"React.ReactNode"},{name:"undefined"}]},description:""},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},testId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},renderActions:{required:!1,tsType:{name:"union",raw:"((token: TokenInfo, context: TokenItemContext) => React.ReactNode) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"Render prop for custom actions per token item (deprecated: use menuItems)"},mainAssetSymbol:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Main asset symbol for the chain (used by renderActions context)"},onContextMenu:{required:!1,tsType:{name:"union",raw:"((event: React.MouseEvent | React.TouchEvent | null, token: TokenInfo, context: TokenItemContext) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"Context menu handler for token items (deprecated: use menuItems)"},menuItems:{required:!1,tsType:{name:"union",raw:"((token: TokenInfo, context: TokenItemContext) => TokenMenuItem[]) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"Menu items for dropdown menu (recommended approach)"}}};function le({feature:e,reason:t,className:n}){return d.jsx("div",{className:w("rounded-lg border border-yellow-200 bg-yellow-50 dark:border-yellow-900/50 dark:bg-yellow-950/20 px-4 py-3",n),"data-testid":"provider-fallback-warning",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Pt,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:[e," query failed"]}),d.jsx("p",{className:"mt-1 text-xs text-yellow-700 dark:text-yellow-300/80",children:"All configured providers failed. Showing default value."}),t&&d.jsxs("details",{className:"mt-2",children:[d.jsx("summary",{className:"text-xs text-yellow-600 dark:text-yellow-400 cursor-pointer hover:underline",children:"Technical details"}),d.jsx("p",{className:"mt-1 text-xs text-yellow-600 dark:text-yellow-400 font-mono break-all",children:t})]})]})]})})}le.__docgenInfo={description:"",methods:[],displayName:"ProviderFallbackWarning",props:{feature:{required:!0,tsType:{name:"string"},description:""},reason:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};function Ve({chainId:e,chainName:t,tokens:n,transactions:a,tokensLoading:s=!1,transactionsLoading:r=!1,tokensRefreshing:o=!1,tokensSupported:u=!0,tokensFallbackReason:m,transactionsSupported:c=!0,transactionsFallbackReason:i,onTokenClick:f,onTransactionClick:p,renderTransactionFooter:T,mainAssetSymbol:b,renderTokenActions:h,onTokenContextMenu:y,tokenMenuItems:A,className:C,testId:x="wallet-address-portfolio"}){const{t:I}=de(["home","transaction"]),[L,Q]=g.useState("assets"),O=t??e;return d.jsx("div",{"data-testid":x,className:C,children:d.jsx(Bt,{activeTab:L,onTabChange:Q,className:"h-full",testIdPrefix:`${x}-tabs`,children:E=>E==="assets"?d.jsxs("div",{className:"p-4","data-testid":`${x}-assets-panel`,children:[!u&&!s&&d.jsx(le,{feature:"Token balance",reason:m,className:"mb-4"}),d.jsx(je,{tokens:n,loading:s,refreshing:o,onTokenClick:f,emptyTitle:I("home:wallet.noAssets"),emptyDescription:I("home:wallet.noAssetsOnChain",{chain:O}),mainAssetSymbol:b,renderActions:h,onContextMenu:y,menuItems:A,testId:`${x}-token-list`})]}):d.jsxs("div",{className:"p-4","data-testid":`${x}-history-panel`,children:[!c&&!r&&d.jsx(le,{feature:"Transaction history",reason:i,className:"mb-4"}),d.jsx(Mt,{transactions:a,loading:r,onTransactionClick:p,emptyTitle:I("transaction:history.emptyTitle"),emptyDescription:I("transaction:history.emptyDesc"),testId:`${x}-transaction-list`}),T?.()]})})})}Ve.__docgenInfo={description:"",methods:[],displayName:"WalletAddressPortfolioView",props:{chainId:{required:!0,tsType:{name:"ChainType"},description:""},chainName:{required:!1,tsType:{name:"string"},description:""},tokens:{required:!0,tsType:{name:"Array",elements:[{name:"TokenInfo"}],raw:"TokenInfo[]"},description:""},transactions:{required:!0,tsType:{name:"Array",elements:[{name:"TransactionInfo"}],raw:"TransactionInfo[]"},description:""},tokensLoading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},transactionsLoading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},tokensRefreshing:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},tokensSupported:{required:!1,tsType:{name:"boolean"},description:"是否成功查询到 token 数据（false 表示 fallback）",defaultValue:{value:"true",computed:!1}},tokensFallbackReason:{required:!1,tsType:{name:"string"},description:""},transactionsSupported:{required:!1,tsType:{name:"boolean"},description:"是否成功查询到交易数据（false 表示 fallback）",defaultValue:{value:"true",computed:!1}},transactionsFallbackReason:{required:!1,tsType:{name:"string"},description:""},onTokenClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(token: TokenInfo) => void",signature:{arguments:[{type:{name:"TokenInfo"},name:"token"}],return:{name:"void"}}},description:""},onTransactionClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(tx: TransactionInfo) => void",signature:{arguments:[{type:{name:"TransactionInfo"},name:"tx"}],return:{name:"void"}}},description:""},renderTransactionFooter:{required:!1,tsType:{name:"signature",type:"function",raw:"() => React.ReactNode",signature:{arguments:[],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:'渲染交易列表底部额外内容（如"查看全部"按钮）'},mainAssetSymbol:{required:!1,tsType:{name:"string"},description:"Main asset symbol for the chain (used for renderActions context)"},renderTokenActions:{required:!1,tsType:{name:"signature",type:"function",raw:"(token: TokenInfo, context: TokenItemContext) => React.ReactNode",signature:{arguments:[{type:{name:"TokenInfo"},name:"token"},{type:{name:"TokenItemContext"},name:"context"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:"Render prop for token item actions (deprecated: use tokenMenuItems)"},onTokenContextMenu:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.MouseEvent | React.TouchEvent | null, token: TokenInfo, context: TokenItemContext) => void",signature:{arguments:[{type:{name:"union",raw:"React.MouseEvent | React.TouchEvent | null",elements:[{name:"ReactMouseEvent",raw:"React.MouseEvent"},{name:"ReactTouchEvent",raw:"React.TouchEvent"},{name:"null"}]},name:"event"},{type:{name:"TokenInfo"},name:"token"},{type:{name:"TokenItemContext"},name:"context"}],return:{name:"void"}}},description:"Context menu handler for token items (deprecated: use tokenMenuItems)"},tokenMenuItems:{required:!1,tsType:{name:"signature",type:"function",raw:"(token: TokenInfo, context: TokenItemContext) => TokenMenuItem[]",signature:{arguments:[{type:{name:"TokenInfo"},name:"token"},{type:{name:"TokenItemContext"},name:"context"}],return:{name:"Array",elements:[{name:"TokenMenuItem"}],raw:"TokenMenuItem[]"}}},description:"Menu items for token dropdown menu (recommended approach)"},className:{required:!1,tsType:{name:"string"},description:""},testId:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'wallet-address-portfolio'",computed:!1}}}};const Ce={all:["addressPortfolio"],tokens:(e,t)=>["addressPortfolio","tokens",e,t],transactions:(e,t)=>["addressPortfolio","transactions",e,t]};function Yt(e,t,n={}){const{enabled:a=!0,transactionLimit:s=20}=n,r=mt(),o=g.useMemo(()=>r.snapshot?te(e):null,[e,r.snapshot]),u=a&&!!o&&!!t&&(o.supportsTokenBalances||o.supportsNativeBalance),m=a&&!!o&&!!t&&o.supportsTransactionHistory,c=ve({queryKey:Ce.tokens(e,t),queryFn:async()=>{const h=r.snapshot?te(e):null;if(!h)return{data:[],supported:!1,fallbackReason:"Provider not ready"};if(h.supportsTokenBalances){const A=await h.getTokenBalances(t);if(Z(A)&&A.data.length>0)return{data:A.data.map(C=>({symbol:C.symbol,name:C.name,balance:C.amount.toFormatted(),decimals:C.amount.decimals,chain:e})),supported:!0}}const y=await h.getNativeBalance(t);return Z(y)?{data:[{symbol:y.data.symbol,name:y.data.symbol,balance:y.data.amount.toFormatted(),decimals:y.data.amount.decimals,chain:e}],supported:!0}:{data:[{symbol:y.data.symbol,name:y.data.symbol,balance:y.data.amount.toFormatted(),decimals:y.data.amount.decimals,chain:e}],supported:!1,fallbackReason:y.reason}},enabled:u,staleTime:3e4}),i=ve({queryKey:Ce.transactions(e,t),queryFn:async()=>{const h=r.snapshot?te(e):null;if(!h)return{data:[],supported:!1,fallbackReason:"Provider not ready"};const y=await h.getTransactionHistory(t,s),A=ft.getDecimals(e);return Z(y)?{data:y.data.map(C=>en(C,e,A)),supported:!0}:{data:[],supported:!1,fallbackReason:y.reason}},enabled:m,staleTime:3e4}),f=u&&c.isLoading,p=m&&i.isLoading,T=u?c.data?.supported??!0:!1,b=m?i.data?.supported??!0:!1;return{tokens:c.data?.data??[],transactions:i.data?.data??[],tokensLoading:f,transactionsLoading:p,tokensRefreshing:c.isFetching&&!c.isLoading,tokensSupported:T,tokensFallbackReason:u?c.data?.fallbackReason:"Provider does not support token balance queries",transactionsSupported:b,transactionsFallbackReason:m?i.data?.fallbackReason:"Provider does not support transaction history queries"}}function en(e,t,n){const a=e.direction==="out"?e.to:e.from,s=e.assets.find(c=>c.assetType==="native"||c.assetType==="token"),r=s?s.value:"0",o=s?s.symbol:"",u=s?s.decimals:n,m=Pe(e.action,e.direction);return{id:e.hash,type:m,status:e.status,amount:J.fromRaw(r,u,o),symbol:o,address:a,timestamp:new Date(e.timestamp),hash:e.hash,chain:t}}const Ae=De(e=>e instanceof J),He=v(["send","receive","signature","stake","unstake","destroy","gift","grab","trust","signFor","emigrate","immigrate","exchange","swap","issueAsset","increaseAsset","mint","issueEntity","destroyEntity","locationName","dapp","certificate","approve","interaction","mark","other"]),Se=_({id:l(),type:He,status:v(["pending","confirmed","failed"]),amount:Ae,symbol:l(),decimals:k(),address:l(),timestamp:_t(),hash:l().optional(),chain:l(),fee:Ae.optional(),feeSymbol:l().optional(),feeDecimals:k().optional(),blockNumber:k().optional(),confirmations:k().optional(),from:l().optional(),to:l().optional(),action:Tt.optional(),direction:gt.optional(),assets:q(bt).optional(),contract:ht.optional()}),tn=_({chain:l().optional(),period:v(["7d","30d","90d","all"]).optional(),type:He.or(Rt("all")).optional(),status:v(["pending","confirmed","failed","all"]).optional()}),nn=D("transaction",e=>e.description("交易服务").api("getHistory",_({walletId:l(),filter:tn.optional()}),q(Se)).api("getTransaction",_({id:l()}),Se.nullable()).api("refresh",_({walletId:l()}),R())),Y=new Map;function an(e){const[t,n]=e.split("--");return!t||!n?null:{chainId:t,hash:n}}async function we(e,t){await ye.initialize();const n=await ke(),a=pt(n),s=new Map(a.map(i=>[i.id,i])),r=await ye.getWalletChainAddresses(e),o=t?.chain&&t.chain!=="all"?t.chain:null,u=r.flatMap(i=>{if(o&&i.chain!==o)return[];const f=s.get(i.chain)??Me(n,i.chain);if(!f||!f.enabled)return[];try{return Be(i.chain).getTransactionHistory(i.address,50).then(T=>Z(T)?T.data.map(b=>qe(b,f)):[])}catch{return[]}});let c=(await Promise.all(u)).flat();t&&(c=cn(c,t.chain),c=rn(c,t.period),c=on(c,t.type),c=ln(c,t.status)),c.sort((i,f)=>f.timestamp.getTime()-i.timestamp.getTime()),Y.clear();for(const i of c)Y.set(i.id,i);return c}function sn(e,t){const n=e.assets.find(a=>a.assetType==="native"||a.assetType==="token");return n?{value:n.value,symbol:n.symbol,decimals:n.decimals}:{value:"0",symbol:t.symbol,decimals:t.decimals}}function qe(e,t){const n=Pe(e.action,e.direction),a=sn(e,{symbol:t.symbol,decimals:t.decimals}),r=e.action==="transfer"?e.direction==="out"?e.to:e.from:e.contract?.address??e.to??e.from;return{id:`${t.id}--${e.hash}`,type:n,status:e.status,amount:J.fromRaw(a.value,a.decimals,a.symbol),symbol:a.symbol,decimals:a.decimals,address:r,timestamp:new Date(e.timestamp),hash:e.hash,chain:t.id,blockNumber:e.blockNumber?Number(e.blockNumber):void 0,confirmations:void 0,fee:e.fee?J.fromRaw(e.fee.value,e.fee.decimals,e.fee.symbol):void 0,feeSymbol:e.fee?.symbol,feeDecimals:e.fee?.decimals,from:e.from,to:e.to,action:e.action,direction:e.direction,assets:e.assets,contract:e.contract}}function rn(e,t){if(!t||t==="all")return e;const n=t==="7d"?7:t==="30d"?30:90,a=Date.now()-n*24*60*60*1e3;return e.filter(s=>s.timestamp.getTime()>=a)}function on(e,t){return!t||t==="all"?e:e.filter(n=>n.type===t)}function ln(e,t){return!t||t==="all"?e:e.filter(n=>n.status===t)}function cn(e,t){return!t||t==="all"?e:e.filter(n=>n.chain===t)}const Ha=nn.impl({async getHistory({walletId:e,filter:t}){return we(e,t)},async getTransaction({id:e}){const t=Y.get(e);if(t)return t;const n=an(e);if(!n)return null;const a=await ke(),s=Me(a,n.chainId);if(!s||!s.enabled)return null;try{const r=Be(s.id);if(!r.getTransaction)return null;const o=await r.getTransaction(n.hash);if(!o)return null;const u=qe(o,s);return Y.set(u.id,u),u}catch(r){if(r instanceof yt)throw r;return null}},async refresh({walletId:e}){await we(e,{chain:"all",period:"all",type:"all",status:"all"})}}),dn=v(["fingerprint","face","iris","none"]),un=_({isAvailable:j(),biometricType:dn,error:l().optional()}),mn=_({title:l().optional(),description:l().optional(),cancelText:l().optional(),maxAttempts:k().optional(),fallbackToPassword:j().optional()}).optional(),pn=_({success:j(),errorMessage:l().optional()}),fn=D("biometric",e=>e.description("生物识别服务 - 指纹/面容验证").api("isAvailable",{description:"检查生物识别是否可用",input:R(),output:un}).api("verify",{description:"验证生物识别",input:mn,output:pn}));fn.impl({async isAvailable(){if(window.PublicKeyCredential)try{const e=await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();return{isAvailable:e,biometricType:e?"fingerprint":"none"}}catch{return{isAvailable:!1,biometricType:"none"}}return{isAvailable:!1,biometricType:"none"}},async verify(e){return console.warn("Biometric not available in web, falling back to password"),{success:!1,errorMessage:"Biometric authentication not available in web browser"}}});const hn=v(["light","medium","heavy","success","warning","error"]).optional(),gn=D("haptics",e=>e.description("触觉反馈服务").api("impact",{description:"触发触觉反馈",input:hn,output:R()}).api("vibrate",{description:"振动指定时长",input:k().optional(),output:R()})),qa=gn.impl({async impact(e){if("vibrate"in navigator){const t={light:10,medium:20,heavy:30,success:[10,50,10],warning:[20,30,20],error:[30,50,30,50,30]};navigator.vibrate(t[e??"medium"])}},async vibrate(e){"vibrate"in navigator&&navigator.vibrate(e??100)}}),Tn=D("secureStorage",e=>e.description("安全存储服务 - 加密存储键值对").api("set",{description:"存储数据",input:_({key:l(),value:l()}),output:R()}).api("get",{description:"获取数据",input:_({key:l()}),output:l().nullable()}).api("remove",{description:"删除数据",input:_({key:l()}),output:R()}).api("has",{description:"检查是否存在",input:_({key:l()}),output:j()}).api("clear",{description:"清空存储",input:R(),output:R()})),G="bfm_secure_";Tn.impl({async set({key:e,value:t}){localStorage.setItem(G+e,t)},async get({key:e}){return localStorage.getItem(G+e)},async remove({key:e}){localStorage.removeItem(G+e)},async has({key:e}){return localStorage.getItem(G+e)!==null},async clear(){const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n?.startsWith(G)&&e.push(n)}e.forEach(t=>localStorage.removeItem(t))}});const bn=_({content:l(),format:l().optional()}),yn=D("camera",e=>e.description("相机服务 - 扫描二维码").api("scanQRCode",{description:"扫描二维码",input:R(),output:bn}).api("checkPermission",{description:"检查相机权限",input:R(),output:j()}).api("requestPermission",{description:"请求相机权限",input:R(),output:j()})),Ga=yn.impl({async scanQRCode(){throw new Error("QR scanning not implemented in web.")},async checkPermission(){try{return(await navigator.permissions.query({name:"camera"})).state==="granted"}catch{return!1}},async requestPermission(){try{return(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(t=>t.stop()),!0}catch{return!1}}}),_n=_({base:l(),date:l(),rates:H(l(),k())}),Rn=D("currencyExchange",e=>e.description("货币兑换服务 - 获取汇率").api("getExchangeRates",{description:"获取汇率",input:_({baseCurrency:l(),targetCurrencies:q(l())}),output:_n})),z={CNY:7.24,EUR:.95,JPY:149.5,KRW:1320,GBP:.79,AUD:1.53,CAD:1.36,CHF:.88,HKD:7.82,SGD:1.34,TWD:31.5,THB:35.2,INR:83.5,MYR:4.72,PHP:56.2};function On(){return new Date().toISOString().split("T")[0]??new Date().toISOString().slice(0,10)}function En(e,t){const n={};if(e==="USD"){for(const r of t)r==="USD"?n[r]=1:z[r]!==void 0&&(n[r]=z[r]);return n}const a=z[e];if(a===void 0)return n;const s=1/a;for(const r of t)r===e?n[r]=1:r==="USD"?n[r]=s:z[r]!==void 0&&(n[r]=z[r]*s);return n}const vn=Rn.impl({async getExchangeRates({baseCurrency:e,targetCurrencies:t}){return await new Promise(n=>setTimeout(n,100)),{base:e,date:On(),rates:En(e,t)}}});g.createContext(null);const Cn=_({appId:l(),appName:l(),appIcon:l(),origin:l()});D("authorize",e=>e.description("授权适配器").api("getCallerAppInfo",_({eventId:l()}),Cn).api("respondWith",_({eventId:l(),path:l(),data:Ot()}),R()).api("removeEventId",_({eventId:l()}),R()).method("isAvailable",R(),j()));const M=De(e=>e instanceof J),An=H(l(),H(l(),_({assetType:l(),logo:l().optional(),supportChain:H(l(),_({assetType:l(),contract:l().optional(),decimals:k()}).optional())}))),Sn=H(l(),H(l(),l())),wn=_({chain:v(["BFMeta","BFChain","CCChain","PMChain"]),assetType:l(),stakedAmount:M,stakedFiat:l(),availableChains:q(v(["ETH","BSC","TRON"])),logoUrl:l().optional(),totalMinted:M,totalCirculation:M,totalBurned:M,totalStaked:M,externalChain:v(["ETH","BSC","TRON"]),externalAssetType:l()}),K=_({id:l(),type:v(["mint","burn"]),sourceChain:l(),sourceAsset:l(),sourceAmount:M,targetChain:l(),targetAsset:l(),targetAmount:M,status:v(["pending","confirming","confirmed","failed"]),txHash:l().optional(),createdAt:k(),updatedAt:k(),errorMessage:l().optional()}),xn=_({sourceChain:v(["ETH","BSC","TRON"]),sourceAsset:l(),amount:M,targetChain:v(["BFMeta","BFChain","CCChain","PMChain"]),targetAsset:l()}),Nn=_({sourceChain:v(["BFMeta","BFChain","CCChain","PMChain"]),sourceAsset:l(),amount:M,targetChain:v(["ETH","BSC","TRON"]),targetAsset:l()}),In=D("staking",e=>e.description("质押服务").api("getRechargeConfig",R(),An).api("getLogoUrls",R(),Sn).api("getOverview",R(),q(wn)).api("getTransactions",R(),q(K)).api("getTransaction",_({id:l()}),K.nullable()).api("submitMint",xn,K).api("submitBurn",Nn,K)),za=In.impl({async getRechargeConfig(){throw new Error("StakingService.getRechargeConfig not implemented")},async getLogoUrls(){throw new Error("StakingService.getLogoUrls not implemented")},async getOverview(){throw new Error("StakingService.getOverview not implemented")},async getTransactions(){throw new Error("StakingService.getTransactions not implemented")},async getTransaction(){throw new Error("StakingService.getTransaction not implemented")},async submitMint(){throw new Error("StakingService.submitMint not implemented")},async submitBurn(){throw new Error("StakingService.submitBurn not implemented")}});var Ln=Object.create,me=Object.defineProperty,kn=Object.getOwnPropertyDescriptor,Ge=Object.getOwnPropertyNames,Mn=Object.getPrototypeOf,Bn=Object.prototype.hasOwnProperty,pe=(e,t)=>function(){return t||(0,e[Ge(e)[0]])((t={exports:{}}).exports,t),t.exports},Pn=(e,t)=>{for(var n in t)me(e,n,{get:t[n],enumerable:!0})},Dn=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Ge(t))!Bn.call(e,s)&&s!==n&&me(e,s,{get:()=>t[s],enumerable:!(a=kn(t,s))||a.enumerable});return e},Un=(e,t,n)=>(n=e!=null?Ln(Mn(e)):{},Dn(me(n,"default",{value:e,enumerable:!0}),e)),Fn=pe({"node_modules/is-object/index.js"(e,t){t.exports=function(a){return typeof a=="object"&&a!==null}}}),jn=pe({"node_modules/is-window/index.js"(e,t){t.exports=function(n){if(n==null)return!1;var a=Object(n);return a===a.window}}}),Vn=pe({"node_modules/is-dom/index.js"(e,t){var n=Fn(),a=jn();function s(r){return!n(r)||!a(window)||typeof window.Node!="function"?!1:typeof r.nodeType=="number"&&typeof r.nodeName=="string"}t.exports=s}}),ze={};Pn(ze,{chromeDark:()=>Hn,chromeLight:()=>qn});var Hn={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"rgb(36, 36, 36)",BASE_COLOR:"rgb(213, 213, 213)",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(227, 110, 236)",OBJECT_VALUE_NULL_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_REGEXP_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_STRING_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_NUMBER_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_BOOLEAN_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(85, 106, 242)",HTML_TAG_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(155, 187, 220)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(242, 151, 102)",HTML_COMMENT_COLOR:"rgb(137, 137, 137)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"rgb(145, 145, 145)",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"rgb(85, 85, 85)",TABLE_TH_BACKGROUND_COLOR:"rgb(44, 44, 44)",TABLE_TH_HOVER_COLOR:"rgb(48, 48, 48)",TABLE_SORT_ICON_COLOR:"black",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 0) 50%, rgba(51, 139, 255, 0.0980392) 50%, rgba(51, 139, 255, 0.0980392))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},qn={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"white",BASE_COLOR:"black",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(136, 19, 145)",OBJECT_VALUE_NULL_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_REGEXP_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_STRING_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_NUMBER_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_BOOLEAN_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(13, 34, 170)",HTML_TAG_COLOR:"rgb(168, 148, 166)",HTML_TAGNAME_COLOR:"rgb(136, 18, 128)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(153, 69, 0)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(26, 26, 166)",HTML_COMMENT_COLOR:"rgb(35, 110, 37)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"#6e6e6e",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"#aaa",TABLE_TH_BACKGROUND_COLOR:"#eee",TABLE_TH_HOVER_COLOR:"hsla(0, 0%, 90%, 1)",TABLE_SORT_ICON_COLOR:"#6e6e6e",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(to bottom, white, white 50%, rgb(234, 243, 255) 50%, rgb(234, 243, 255))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},We=g.createContext([{},()=>{}]),ne={WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",OUserSelect:"none",userSelect:"none"},Gn=e=>({DOMNodePreview:{htmlOpenTag:{base:{color:e.HTML_TAG_COLOR},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM},htmlAttributeName:{color:e.HTML_ATTRIBUTE_NAME_COLOR},htmlAttributeValue:{color:e.HTML_ATTRIBUTE_VALUE_COLOR}},htmlCloseTag:{base:{color:e.HTML_TAG_COLOR},offsetLeft:{marginLeft:-e.TREENODE_PADDING_LEFT},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM}},htmlComment:{color:e.HTML_COMMENT_COLOR},htmlDoctype:{color:e.HTML_DOCTYPE_COLOR}},ObjectPreview:{objectDescription:{fontStyle:"italic"},preview:{fontStyle:"italic"},arrayMaxProperties:e.OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES,objectMaxProperties:e.OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES},ObjectName:{base:{color:e.OBJECT_NAME_COLOR},dimmed:{opacity:.6}},ObjectValue:{objectValueNull:{color:e.OBJECT_VALUE_NULL_COLOR},objectValueUndefined:{color:e.OBJECT_VALUE_UNDEFINED_COLOR},objectValueRegExp:{color:e.OBJECT_VALUE_REGEXP_COLOR},objectValueString:{color:e.OBJECT_VALUE_STRING_COLOR},objectValueSymbol:{color:e.OBJECT_VALUE_SYMBOL_COLOR},objectValueNumber:{color:e.OBJECT_VALUE_NUMBER_COLOR},objectValueBoolean:{color:e.OBJECT_VALUE_BOOLEAN_COLOR},objectValueFunctionPrefix:{color:e.OBJECT_VALUE_FUNCTION_PREFIX_COLOR,fontStyle:"italic"},objectValueFunctionName:{fontStyle:"italic"}},TreeView:{treeViewOutline:{padding:0,margin:0,listStyleType:"none"}},TreeNode:{treeNodeBase:{color:e.BASE_COLOR,backgroundColor:e.BASE_BACKGROUND_COLOR,lineHeight:e.TREENODE_LINE_HEIGHT,cursor:"default",boxSizing:"border-box",listStyle:"none",fontFamily:e.TREENODE_FONT_FAMILY,fontSize:e.TREENODE_FONT_SIZE},treeNodePreviewContainer:{},treeNodePlaceholder:{whiteSpace:"pre",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT,...ne},treeNodeArrow:{base:{color:e.ARROW_COLOR,display:"inline-block",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT,...parseFloat(e.ARROW_ANIMATION_DURATION)>0?{transition:`transform ${e.ARROW_ANIMATION_DURATION} ease 0s`}:{},...ne},expanded:{WebkitTransform:"rotateZ(90deg)",MozTransform:"rotateZ(90deg)",transform:"rotateZ(90deg)"},collapsed:{WebkitTransform:"rotateZ(0deg)",MozTransform:"rotateZ(0deg)",transform:"rotateZ(0deg)"}},treeNodeChildNodesContainer:{margin:0,paddingLeft:e.TREENODE_PADDING_LEFT}},TableInspector:{base:{color:e.BASE_COLOR,position:"relative",border:`1px solid ${e.TABLE_BORDER_COLOR}`,fontFamily:e.BASE_FONT_FAMILY,fontSize:e.BASE_FONT_SIZE,lineHeight:"120%",boxSizing:"border-box",cursor:"default"}},TableInspectorHeaderContainer:{base:{top:0,height:"17px",left:0,right:0,overflowX:"hidden"},table:{tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",height:"100%",width:"100%",margin:0}},TableInspectorDataContainer:{tr:{display:"table-row"},td:{boxSizing:"border-box",border:"none",height:"16px",verticalAlign:"top",padding:"1px 4px",WebkitUserSelect:"text",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px"},div:{position:"static",top:"17px",bottom:0,overflowY:"overlay",transform:"translateZ(0)",left:0,right:0,overflowX:"hidden"},table:{positon:"static",left:0,top:0,right:0,bottom:0,borderTop:"0 none transparent",margin:0,backgroundImage:e.TABLE_DATA_BACKGROUND_IMAGE,backgroundSize:e.TABLE_DATA_BACKGROUND_SIZE,tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",width:"100%",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorTH:{base:{position:"relative",height:"auto",textAlign:"left",backgroundColor:e.TABLE_TH_BACKGROUND_COLOR,borderBottom:`1px solid ${e.TABLE_BORDER_COLOR}`,fontWeight:"normal",verticalAlign:"middle",padding:"0 4px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px",":hover":{backgroundColor:e.TABLE_TH_HOVER_COLOR}},div:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorLeftBorder:{none:{borderLeft:"none"},solid:{borderLeft:`1px solid ${e.TABLE_BORDER_COLOR}`}},TableInspectorSortIcon:{display:"block",marginRight:3,width:8,height:7,marginTop:-7,color:e.TABLE_SORT_ICON_COLOR,fontSize:12,...ne}}),zn="chromeLight",Wn=g.createContext(Gn(ze[zn])),Je=e=>g.useContext(Wn)[e],Jn=({expanded:e,styles:t})=>S.createElement("span",{style:{...t.base,...e?t.expanded:t.collapsed}},"▶"),Qn=g.memo(e=>{e={expanded:!0,nodeRenderer:({name:i})=>S.createElement("span",null,i),onClick:()=>{},shouldShowArrow:!1,shouldShowPlaceholder:!0,...e};const{expanded:t,onClick:n,children:a,nodeRenderer:s,title:r,shouldShowArrow:o,shouldShowPlaceholder:u}=e,m=Je("TreeNode"),c=s;return S.createElement("li",{"aria-expanded":t,role:"treeitem",style:m.treeNodeBase,title:r},S.createElement("div",{style:m.treeNodePreviewContainer,onClick:n},o||g.Children.count(a)>0?S.createElement(Jn,{expanded:t,styles:m.treeNodeArrow}):u&&S.createElement("span",{style:m.treeNodePlaceholder}," "),S.createElement(c,{...e})),S.createElement("ol",{role:"group",style:m.treeNodeChildNodesContainer},t?a:void 0))}),ee="$",xe="*";function X(e,t){return!t(e).next().done}var $n=e=>Array.from({length:e},(t,n)=>[ee].concat(Array.from({length:n},()=>"*")).join(".")),Kn=(e,t,n,a,s)=>{const r=[].concat($n(a)).concat(n).filter(u=>typeof u=="string"),o=[];return r.forEach(u=>{const m=u.split("."),c=(i,f,p)=>{if(p===m.length){o.push(f);return}const T=m[p];if(p===0)X(i,t)&&(T===ee||T===xe)&&c(i,ee,p+1);else if(T===xe)for(const{name:b,data:h}of t(i))X(h,t)&&c(h,`${f}.${b}`,p+1);else{const b=i[T];X(b,t)&&c(b,`${f}.${T}`,p+1)}};c(e,"",0)}),o.reduce((u,m)=>(u[m]=!0,u),{...s})},Qe=g.memo(e=>{const{data:t,dataIterator:n,path:a,depth:s,nodeRenderer:r}=e,[o,u]=g.useContext(We),m=X(t,n),c=!!o[a],i=g.useCallback(()=>m&&u(f=>({...f,[a]:!c})),[m,u,a,c]);return S.createElement(Qn,{expanded:c,onClick:i,shouldShowArrow:m,shouldShowPlaceholder:s>0,nodeRenderer:r,...e},c?[...n(t)].map(({name:f,data:p,...T})=>S.createElement(Qe,{name:f,data:p,depth:s+1,path:`${a}.${f}`,key:f,dataIterator:n,nodeRenderer:r,...T})):null)});g.memo(({name:e,data:t,dataIterator:n,nodeRenderer:a,expandPaths:s,expandLevel:r})=>{const o=Je("TreeView"),u=g.useState({}),[,m]=u;return g.useLayoutEffect(()=>m(c=>Kn(t,n,s,r,c)),[t,n,s,r]),S.createElement(We.Provider,{value:u},S.createElement("ol",{role:"tree",style:o.treeViewOutline},S.createElement(Qe,{name:e,data:t,dataIterator:n,depth:0,path:ee,nodeRenderer:a})))});Un(Vn());function Zn({chainId:e,address:t,chainName:n,onTokenClick:a,onTransactionClick:s,className:r,testId:o}){const u=Yt(e,t);return d.jsx(Ve,{chainId:e,chainName:n,tokens:u.tokens,transactions:u.transactions,tokensLoading:u.tokensLoading,transactionsLoading:u.transactionsLoading,tokensRefreshing:u.tokensRefreshing,tokensSupported:u.tokensSupported,tokensFallbackReason:u.tokensFallbackReason,transactionsSupported:u.transactionsSupported,transactionsFallbackReason:u.transactionsFallbackReason,onTokenClick:a,onTransactionClick:s,className:r,testId:o})}Zn.__docgenInfo={description:`从 Provider 获取地址资产组合

使用 useAddressPortfolio Hook 获取数据，复用 WalletAddressPortfolioView 展示。
适用于 Stories 测试和任意地址查询场景。`,methods:[],displayName:"WalletAddressPortfolioFromProvider",props:{chainId:{required:!0,tsType:{name:"ChainType"},description:""},address:{required:!0,tsType:{name:"string"},description:""},chainName:{required:!1,tsType:{name:"string"},description:""},onTokenClick:{required:!1,tsType:{name:"WalletAddressPortfolioViewProps['onTokenClick']",raw:"WalletAddressPortfolioViewProps['onTokenClick']"},description:""},onTransactionClick:{required:!1,tsType:{name:"WalletAddressPortfolioViewProps['onTransactionClick']",raw:"WalletAddressPortfolioViewProps['onTransactionClick']"},description:""},className:{required:!1,tsType:{name:"string"},description:""},testId:{required:!1,tsType:{name:"string"},description:""}}};function Xn(e){return At(e.defaultTagName??"div",e,e)}const Yn=Ue("[a]:hover:bg-muted rounded-lg border text-sm w-full group/item focus-visible:border-ring focus-visible:ring-ring/50 flex items-center flex-wrap outline-none transition-colors duration-100 focus-visible:ring-[3px] [a]:transition-colors",{variants:{variant:{default:"border-transparent",outline:"border-border",muted:"bg-muted/50 border-transparent"},size:{default:"gap-2.5 px-3 py-2.5",sm:"gap-2.5 px-3 py-2.5",xs:"gap-2 px-2.5 py-2 [[data-slot=dropdown-menu-content]_&]:p-0"}},defaultVariants:{variant:"default",size:"default"}});function ea({className:e,variant:t="default",size:n="default",render:a,...s}){return Xn({defaultTagName:"div",props:St({className:w(Yn({variant:t,size:n,className:e}))},s),render:a,state:{slot:"item",variant:t,size:n}})}const ta=Ue("gap-2 group-has-[[data-slot=item-description]]/item:translate-y-0.5 group-has-[[data-slot=item-description]]/item:self-start flex shrink-0 items-center justify-center [&_svg]:pointer-events-none",{variants:{variant:{default:"bg-transparent",icon:"[&_svg:not([class*='size-'])]:size-4",image:"size-10 overflow-hidden rounded-sm group-data-[size=sm]/item:size-8 group-data-[size=xs]/item:size-6 [&_img]:size-full [&_img]:object-cover"}},defaultVariants:{variant:"default"}});function $e({className:e,variant:t="default",...n}){return d.jsx("div",{"data-slot":"item-media","data-variant":t,className:w(ta({variant:t,className:e})),...n})}function Ke({className:e,...t}){return d.jsx("div",{"data-slot":"item-content",className:w("gap-1 group-data-[size=xs]/item:gap-0 flex flex-1 flex-col [&+[data-slot=item-content]]:flex-none",e),...t})}function Ze({className:e,...t}){return d.jsx("div",{"data-slot":"item-title",className:w("gap-2 text-sm leading-snug font-medium underline-offset-4 line-clamp-1 flex w-fit items-center",e),...t})}function Xe({className:e,...t}){return d.jsx("p",{"data-slot":"item-description",className:w("text-muted-foreground text-left text-sm leading-normal group-data-[size=xs]/item:text-xs [&>a:hover]:text-primary line-clamp-2 font-normal [&>a]:underline [&>a]:underline-offset-4",e),...t})}function ce({className:e,...t}){return d.jsx("div",{"data-slot":"item-actions",className:w("gap-2 flex items-center",e),...t})}$e.__docgenInfo={description:"",methods:[],displayName:"ItemMedia",props:{variant:{defaultValue:{value:'"default"',computed:!1},required:!1}}};Ke.__docgenInfo={description:"",methods:[],displayName:"ItemContent"};ce.__docgenInfo={description:"",methods:[],displayName:"ItemActions"};Ze.__docgenInfo={description:"",methods:[],displayName:"ItemTitle"};Xe.__docgenInfo={description:"",methods:[],displayName:"ItemDescription"};const na=300*1e3,Ne=new Map;function F(e){return e.trim().toUpperCase()}function Ie(e,t){const n=F(e),a=[...new Set(t.map(F))].filter(s=>s!==n).toSorted().join(",");return`${n}|${a}`}function aa(e,t){const n=g.useMemo(()=>F(e),[e]),a=g.useMemo(()=>[...new Set(t.map(F))],[t.join(",")]),s=g.useMemo(()=>Ie(n,a),[n,a.join(",")]),[r,o]=g.useState({data:null,isLoading:a.length>0,error:null,updatedAt:null}),u=g.useCallback(async(m,c)=>{const i=F(m),f=[...new Set(c.map(F))].filter(h=>h!==i),p=Ie(i,f),T=Date.now(),b=Ne.get(p);if(b&&T-b.updatedAt<na){o({data:b.data,isLoading:!1,error:null,updatedAt:b.updatedAt});return}if(f.length===0){const h=new Date().toISOString().split("T")[0],y={base:i,date:h??new Date().toISOString().slice(0,10),rates:{}};o({data:y,isLoading:!1,error:null,updatedAt:T});return}o(h=>({...h,isLoading:!0,error:null}));try{const h=await vn.getExchangeRates({baseCurrency:i,targetCurrencies:f});Ne.set(p,{data:h,updatedAt:T}),o({data:h,isLoading:!1,error:null,updatedAt:T})}catch(h){o(y=>({...y,isLoading:!1,error:h instanceof Error?h.message:"Failed to fetch exchange rates"}))}},[]);return g.useEffect(()=>{u(n,a)},[s,n,a,u]),r}function sa(e,t){const n=F(t);return e?.rates[n]}function ra(e){const t=e.replaceAll(",","").trim();if(t.length===0)return null;const n=Number(t);return Number.isFinite(n)?n:null}const oa=new Set(["bfmeta","ccchain","pmchain","bfchainv2","btgmeta","biwmeta","ethmeta","malibu"]);function Ye({token:e,onClick:t,showChange:n=!1,loading:a=!1,className:s,testId:r,renderActions:o,mainAssetSymbol:u,menuItems:m}){const c=!!t,{t:i}=de(["currency","common"]),f=it(),p=oa.has(e.chain),T=u?e.symbol.toUpperCase()===u.toUpperCase():!1,b=p&&!T,h={chainType:e.chain,isBioforestChain:p,isMainAsset:T,canDestroy:b},y=e.fiatValue!==void 0&&f!=="USD",{data:A,isLoading:C,error:x}=aa("USD",y?[f]:[]),I=y?sa(A,f):void 0,L=e.fiatValue!==void 0?ra(e.fiatValue):null,Q=e.fiatValue!==void 0?L!==null?String(L):e.fiatValue:void 0,O=f!=="USD"&&I!==void 0&&L!==null,E=O?be[f].symbol:be.USD.symbol,U=O&&L!==null?String(L*I):Q,B=y&&!O?i(x?"exchange.error":C?"exchange.loading":"exchange.unavailable"):null,V=d.jsxs(d.Fragment,{children:[d.jsx($e,{variant:"image",className:"overflow-visible",children:d.jsxs("div",{className:"relative size-full",children:[d.jsx(ut,{symbol:e.symbol,chainId:e.chain,imageUrl:e.icon,size:"lg",className:"size-full"}),d.jsx(oe,{chain:e.chain,size:"sm",className:"bg-background ring-background absolute -right-[10%] -bottom-[10%] size-[40%]! text-[0.2em] ring-2"})]})}),d.jsxs(Ke,{children:[d.jsx(Ze,{children:e.symbol}),d.jsx(Xe,{children:e.name})]}),d.jsx(ce,{children:d.jsxs("div",{className:"text-right",children:[d.jsx(Ct,{value:e.balance,loading:a,decimals:e.decimals??8,className:"text-sm"}),U&&!a&&d.jsxs("p",{className:"text-muted-foreground text-xs",title:B??void 0,children:["≈ ",E,d.jsx(_e,{value:U,size:"xs",className:"inline"}),n&&e.change24h!==void 0&&d.jsx(_e,{value:e.change24h,sign:"always",color:"auto",size:"xs",className:"ml-1 inline"}),n&&e.change24h!==void 0&&"%"]}),a&&d.jsx("p",{className:"text-muted-foreground animate-pulse text-xs",children:"≈ --"})]})})]}),fe=m?.(e,h).filter(P=>P.show!==!1)??[];return d.jsxs(ea,{...r&&{"data-testid":r},variant:"default",size:"default",render:c?d.jsx("button",{type:"button"}):void 0,onClick:t,"aria-label":c?i("common:a11y.tokenDetails",{token:e.symbol}):void 0,className:w(c&&"hover:bg-muted/50 active:bg-muted cursor-pointer",s),children:[V,fe.length>0&&d.jsxs(wt,{children:[d.jsx(xt,{"aria-label":i("common:a11y.more","更多操作"),className:"hover:bg-muted/80 active:bg-muted flex size-11 items-center justify-center rounded-lg transition-colors [&_svg]:pointer-events-auto",children:d.jsx(kt,{variant:"ghost",size:"icon-sm",children:d.jsx(Nt,{className:"text-muted-foreground"})})}),d.jsx(It,{align:"end",sideOffset:4,children:fe.map((P,et)=>d.jsxs(Lt,{onClick:P.onClick,variant:P.variant,children:[P.icon,P.label]},et))})]}),o&&!m&&d.jsx(ce,{onClick:P=>P.stopPropagation(),children:o(e,h)})]})}Ye.__docgenInfo={description:"",methods:[],displayName:"TokenItem",props:{token:{required:!0,tsType:{name:"TokenInfo"},description:""},onClick:{required:!1,tsType:{name:"union",raw:"(() => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},showChange:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"",defaultValue:{value:"false",computed:!1}},loading:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"Whether balance is loading (shows animation)",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},testId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},renderActions:{required:!1,tsType:{name:"union",raw:"((token: TokenInfo, context: TokenItemContext) => React.ReactNode) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:`Render prop for custom actions (e.g., action buttons on the right)
Receives the token and context for conditional rendering`},mainAssetSymbol:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Main asset symbol of the chain (used to determine isMainAsset)"},menuItems:{required:!1,tsType:{name:"union",raw:"((token: TokenInfo, context: TokenItemContext) => TokenMenuItem[]) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:`Menu items for the context menu (right-click on desktop)
Function receives token and context, returns array of menu items`}}};export{Xt as C,Ye as T,Ve as W,je as a,Zn as b,Ga as c,qa as h,za as s,Ha as t,ve as u};
