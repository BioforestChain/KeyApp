import{r as m,j as n}from"./iframe-g2b0m8DI.js";import{c as x}from"./utils-CDN07tui.js";import{A as D}from"./amount-BQsqQYGO.js";import{u as $}from"./useTranslation-Cu2h0njW.js";function z(e){let a=e.replace(/[^0-9.]/g,"");const s=a.split(".");return s.length>2&&(a=s[0]+"."+s.slice(1).join("")),a}function P(e,a){const s=e.split(".");return s.length===2&&s[1].length>a?s[0]+"."+s[1].slice(0,a):e}const j=m.forwardRef(({value:e,onChange:a,decimals:s,symbol:N,balance:r,fiatValue:g,fiatSymbol:T="$",max:q,error:c,label:y,className:F,disabled:u=!1},I)=>{const{t:b}=$("common"),[f,h]=m.useState(!1),[o,d]=m.useState(""),p=s??r?.decimals??18,l=N??r?.symbol??"",i=q??r;m.useEffect(()=>{if(e){const t=e.toFormatted();t!==o&&!f&&d(t)}},[e,f]);const v=e&&i?e.gt(i):!1,w=m.useCallback(t=>!t||t==="."||t==="-"?null:D.tryFromFormatted(t,p,l||void 0),[p,l]),k=t=>{const S=t.target.value,V=z(S),A=P(V,p);d(A);const B=w(A);a?.(B)},C=()=>{if(i){const t=i.toFormatted();d(t),a?.(i)}},M=()=>{h(!1),e?d(e.toFormatted()):o&&!w(o)&&d("")},E=r?.toFormatted()??void 0;return n.jsxs("div",{className:x("@container space-y-2",F),children:[y&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"block text-sm font-medium",children:y}),r&&n.jsxs("span",{className:"text-muted-foreground text-xs",children:[b("balance"),": ",E," ",l]})]}),n.jsxs("div",{className:x("bg-background relative rounded-xl border p-4 transition-colors",f?"border-primary ring-primary/20 ring-2":"border-input",(c||v)&&"border-destructive ring-destructive/20 ring-2",u&&"cursor-not-allowed opacity-50"),children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{ref:I,type:"text",inputMode:"decimal","data-testid":"amount-input",value:o,onChange:k,onFocus:()=>h(!0),onBlur:M,className:x("placeholder:text-muted-foreground min-w-0 flex-1 bg-transparent text-2xl font-semibold outline-none @xs:text-3xl",u&&"cursor-not-allowed"),placeholder:"0",disabled:u,autoComplete:"off"}),n.jsxs("div",{className:"flex items-center gap-2",children:[i&&!u&&n.jsx("button",{type:"button",onClick:C,className:"bg-primary text-primary-foreground hover:bg-primary/90 rounded-md px-2 py-1 text-xs font-medium transition-colors",children:"MAX"}),l&&n.jsx("span",{className:"text-muted-foreground text-lg font-medium",children:l})]})]}),g&&o&&n.jsxs("p",{className:"text-muted-foreground mt-1 text-sm",children:["â‰ˆ ",T,g]})]}),(c||v)&&n.jsx("p",{className:"text-destructive -mt-0.5 text-xs",children:c||b("exceedsBalance")})]})});j.displayName="AmountInput";j.__docgenInfo={description:"",methods:[],displayName:"AmountInput",props:{value:{required:!1,tsType:{name:"union",raw:"Amount | null | undefined",elements:[{name:"Amount"},{name:"null"},{name:"undefined"}]},description:"Amount value (controlled). Pass null or undefined for empty/invalid state"},onChange:{required:!1,tsType:{name:"union",raw:"((value: Amount | null) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"Called when user input changes. Provides Amount (or null if invalid)"},decimals:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:"Decimals for Amount parsing (required if balance not provided)"},symbol:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Symbol to display (falls back to balance.symbol)"},balance:{required:!1,tsType:{name:"union",raw:"Amount | undefined",elements:[{name:"Amount"},{name:"undefined"}]},description:"Available balance as Amount"},max:{required:!1,tsType:{name:"union",raw:"Amount | undefined",elements:[{name:"Amount"},{name:"undefined"}]},description:"Max allowed amount (defaults to balance)"},fiatValue:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Fiat value to display"},fiatSymbol:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Fiat symbol (default: $)",defaultValue:{value:"'$'",computed:!1}},error:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Error message"},label:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Label text"},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Additional class names"},disabled:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"Disabled state",defaultValue:{value:"false",computed:!1}}}};export{j as A};
