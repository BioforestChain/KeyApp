import{r as o,j as r}from"./iframe-CLYHcCRY.js";import{c as y}from"./utils-CDN07tui.js";import{I as E}from"./input-D6aJBeZa.js";import{C as S}from"./checkbox-98Yt2kFa.js";import{u as _}from"./useTranslation-Cb2TYd22.js";import{I as K}from"./IconSearch-BkKI6Cti.js";import{I as P}from"./IconChevronDown-CFusJApW.js";import{I as F}from"./IconChevronRight-8wpOjaFr.js";import{c as I}from"./createReactComponent-wBEFsRbv.js";const R=[["path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z",key:"svg-0"}]],B=I("outline","star","Star",R);const L=[["path",{d:"M8.243 7.34l-6.38 .925l-.113 .023a1 1 0 0 0 -.44 1.684l4.622 4.499l-1.09 6.355l-.013 .11a1 1 0 0 0 1.464 .944l5.706 -3l5.693 3l.1 .046a1 1 0 0 0 1.352 -1.1l-1.091 -6.355l4.624 -4.5l.078 -.085a1 1 0 0 0 -.633 -1.62l-6.38 -.926l-2.852 -5.78a1 1 0 0 0 -1.794 0l-2.853 5.78z",key:"svg-0"}]],V=I("filled","star-filled","StarFilled",L),w={bioforest:{name:"生物链林",description:"BioForest 生态链"},evm:{name:"EVM 兼容链",description:"以太坊虚拟机兼容链"},bitcoin:{name:"Bitcoin",description:"Bitcoin 网络"},tron:{name:"Tron",description:"Tron 网络"},custom:{name:"自定义链",description:"用户添加的自定义链"}};function Q({chains:x,selectedChains:i,onSelectionChange:c,favoriteChains:l=[],onFavoriteChange:u,showSearch:k=!0,className:$,"data-testid":C}){const{t:p}=_(["onboarding","common"]),[f,T]=o.useState(""),[q,G]=o.useState(new Set(["bioforest"])),a=C??void 0,g=o.useMemo(()=>{const e=new Map;for(const s of x){const t=s.chainKind||"custom";e.has(t)||e.set(t,[]),e.get(t).push(s)}return["bioforest","evm","bitcoin","tron","custom"].filter(s=>e.has(s)).map(s=>({id:s,name:w[s]?.name||s,description:w[s]?.description,chains:e.get(s)}))},[x]),b=o.useMemo(()=>{if(!f.trim())return g;const e=f.toLowerCase();return g.map(n=>({...n,chains:n.chains.filter(s=>s.name.toLowerCase().includes(e)||s.symbol.toLowerCase().includes(e)||s.id.toLowerCase().includes(e))})).filter(n=>n.chains.length>0)},[g,f]),h=o.useMemo(()=>new Set(l),[l]),N=o.useMemo(()=>b.map(e=>({...e,chains:[...e.chains].sort((n,s)=>{const t=h.has(n.id),m=h.has(s.id);return t!==m?t?-1:1:n.name.localeCompare(s.name)})})),[b,h]),M=o.useCallback(e=>{G(n=>{const s=new Set(n);return s.has(e)?s.delete(e):s.add(e),s})},[]),v=o.useCallback(e=>{const n=i.includes(e);c(n?i.filter(s=>s!==e):[...i,e])},[i,c]),z=o.useCallback(e=>{const n=e.chains.map(t=>t.id);if(n.every(t=>i.includes(t)))c(i.filter(t=>!n.includes(t)));else{const t=new Set(i);n.forEach(m=>t.add(m)),c(Array.from(t))}},[i,c]),A=o.useCallback(e=>{if(!u)return;const n=l.includes(e);u(n?l.filter(s=>s!==e):[...l,e])},[l,u]),D=o.useCallback(e=>{const n=e.chains.map(t=>t.id),s=n.filter(t=>i.includes(t)).length;return s===0?"none":s===n.length?"all":"partial"},[i]);return r.jsxs("div",{className:y("space-y-4",$),"data-testid":a,children:[k&&r.jsxs("div",{className:"relative",children:[r.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),r.jsx(E,{value:f,onChange:e=>T(e.target.value),placeholder:p("chainSelector.searchPlaceholder"),className:"pl-9","data-testid":a?`${a}-search`:void 0})]}),r.jsx("div",{className:"space-y-2",children:N.map(e=>{const n=f.trim().length>0?!0:q.has(e.id),s=D(e);return r.jsxs("div",{className:"rounded-lg border overflow-hidden","data-testid":a?`${a}-group-${e.id}`:void 0,children:[r.jsxs("button",{type:"button",onClick:()=>M(e.id),className:y("w-full flex items-center gap-3 px-4 py-3 text-left","hover:bg-muted/50 transition-colors"),"aria-expanded":n,"data-testid":a?`${a}-group-toggle-${e.id}`:void 0,children:[n?r.jsx(P,{className:"size-4 text-muted-foreground"}):r.jsx(F,{className:"size-4 text-muted-foreground"}),r.jsx(S,{checked:s==="all",indeterminate:s==="partial",onCheckedChange:()=>z(e),onClick:t=>t.stopPropagation(),"aria-label":p("chainSelector.selectAll"),"data-testid":a?`${a}-group-checkbox-${e.id}`:void 0}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:e.name}),e.description&&r.jsx("div",{className:"text-xs text-muted-foreground",children:e.description})]}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.chains.filter(t=>i.includes(t.id)).length,"/",e.chains.length]})]}),n&&r.jsx("div",{className:"border-t","data-testid":a?`${a}-group-content-${e.id}`:void 0,children:e.chains.map(t=>{const m=i.includes(t.id),j=l.includes(t.id);return r.jsxs("div",{className:y("flex items-center gap-3 px-4 py-2.5 pl-11","hover:bg-muted/30 transition-colors",m&&"bg-primary/5"),role:"button",tabIndex:0,onClick:()=>v(t.id),onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),v(t.id))},"data-testid":a?`${a}-chain-${t.id}`:void 0,children:[r.jsx(S,{checked:m,onCheckedChange:()=>v(t.id),onClick:d=>d.stopPropagation(),"aria-label":t.name,"data-testid":a?`${a}-chain-checkbox-${t.id}`:void 0}),r.jsx("div",{className:"size-8 rounded-full bg-muted flex items-center justify-center text-xs font-bold",children:t.symbol.slice(0,2)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium truncate",children:t.name}),r.jsx("div",{className:"text-xs text-muted-foreground",children:t.symbol})]}),u&&r.jsx("button",{type:"button",onClick:d=>{d.stopPropagation(),A(t.id)},className:"p-1 hover:bg-muted rounded transition-colors","aria-label":p(j?"common:unfavorite":"common:favorite"),"data-testid":a?`${a}-favorite-${t.id}`:void 0,children:j?r.jsx(V,{className:"size-4 text-yellow-500"}):r.jsx(B,{className:"size-4 text-muted-foreground"})})]},t.id)})})]},e.id)})}),N.length===0&&r.jsx("div",{className:"text-center py-8 text-muted-foreground","data-testid":a?`${a}-empty`:void 0,children:p("chainSelector.noResults")})]})}function te(x){return x.filter(i=>i.chainKind==="bioforest").map(i=>i.id)}Q.__docgenInfo={description:`区块链网络选择器

二级结构：
- 第一级：技术类型（生物链林、EVM、BIP39）
- 第二级：具体网络`,methods:[],displayName:"ChainSelector",props:{chains:{required:!0,tsType:{name:"Array",elements:[{name:"ChainConfig"}],raw:"ChainConfig[]"},description:"所有可用的链配置"},selectedChains:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"已选择的链 ID 列表"},onSelectionChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(chainIds: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"chainIds"}],return:{name:"void"}}},description:"选择变化回调"},favoriteChains:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"收藏的链 ID 列表 (可选)",defaultValue:{value:"[]",computed:!1}},onFavoriteChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(chainIds: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"chainIds"}],return:{name:"void"}}},description:"收藏变化回调 (可选)"},showSearch:{required:!1,tsType:{name:"boolean"},description:"是否显示搜索框",defaultValue:{value:"true",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"额外的 className"},"data-testid":{required:!1,tsType:{name:"string"},description:"测试 ID"}}};export{Q as C,te as g};
