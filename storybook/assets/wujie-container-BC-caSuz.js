import{g as hn}from"./iframe-CW0HKnfK.js";const mn="miniapp-hidden-container";class yn{constructor(t,r){this.iframe=t,this.mountTarget=r,this.element=t}type="iframe";element;destroyed=!1;setMountTarget(t){this.mountTarget=t}destroy(){this.destroyed||(this.destroyed=!0,this.iframe.src="about:blank",this.iframe.remove())}moveToBackground(){this.destroyed||(this.iframe.style.opacity="0",this.iframe.style.pointerEvents="none")}moveToForeground(){this.destroyed||(this.iframe.isConnected||this.mountTarget.appendChild(this.iframe),this.iframe.style.opacity="1",this.iframe.style.pointerEvents="auto")}isConnected(){return this.iframe.isConnected&&!this.destroyed}getIframe(){return this.iframe}}class Ci{type="iframe";createSync(t){const{appId:r,url:n,mountTarget:o,contextParams:i,onLoad:a,permissionsPolicyAllow:l}=t,c=document.createElement("iframe");c.id=`miniapp-iframe-${r}`,c.dataset.appId=r;const u=new URL(n,window.location.origin);return i&&Object.entries(i).forEach(([s,p])=>{u.searchParams.set(s,p)}),c.src=u.toString(),c.sandbox?.add?c.sandbox.add("allow-scripts","allow-forms","allow-same-origin"):c.setAttribute("sandbox","allow-scripts allow-forms allow-same-origin"),l&&c.setAttribute("allow",l),c.style.cssText=`
      width: 100%;
      height: 100%;
      border: none;
      background: transparent;
      opacity: 1;
      pointer-events: auto;
    `,a&&c.addEventListener("load",a,{once:!0}),o.appendChild(c),new yn(c,o)}async create(t){return this.createSync(t)}}function ji(){const e=document.getElementById(mn);e&&(e.innerHTML="",e.remove())}function G(e){"@babel/helpers - typeof";return G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(e)}function gn(e,t){if(G(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(G(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rr(e){var t=gn(e,"string");return G(t)=="symbol"?t:t+""}function V(e,t,r){return(t=Rr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function At(e,t,r,n,o,i,a){try{var l=e[i](a),c=l.value}catch(u){return void r(u)}l.done?t(c):Promise.resolve(c).then(n,o)}function Q(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(c){At(i,n,o,a,l,"next",c)}function l(c){At(i,n,o,a,l,"throw",c)}a(void 0)})}}var Ze={exports:{}},Ke={exports:{}},Ut;function xr(){return Ut||(Ut=1,(function(e){function t(r,n){this.v=r,this.k=n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(Ke)),Ke.exports}var et={exports:{}},tt={exports:{}},Mt;function Lr(){return Mt||(Mt=1,(function(e){function t(r,n,o,i){var a=Object.defineProperty;try{a({},"",{})}catch{a=0}e.exports=t=function(c,u,s,p){function d(f,h){t(c,f,function(y){return this._invoke(f,h,y)})}u?a?a(c,u,{value:s,enumerable:!p,configurable:!p,writable:!p}):c[u]=s:(d("next",0),d("throw",1),d("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(tt)),tt.exports}var Dt;function Cr(){return Dt||(Dt=1,(function(e){var t=Lr();function r(){var n,o,i=typeof Symbol=="function"?Symbol:{},a=i.iterator||"@@iterator",l=i.toStringTag||"@@toStringTag";function c(v,m,g,b){var E=m&&m.prototype instanceof s?m:s,_=Object.create(E.prototype);return t(_,"_invoke",(function(R,S,x){var P,w,I,O=0,q=x||[],J=!1,N={p:0,n:0,v:n,a:k,f:k.bind(n,4),d:function(C,M){return P=C,w=0,I=n,N.n=M,u}};function k(L,C){for(w=L,I=C,o=0;!J&&O&&!M&&o<q.length;o++){var M,j=q[o],D=N.p,$=j[2];L>3?(M=$===C)&&(I=j[(w=j[4])?5:(w=3,3)],j[4]=j[5]=n):j[0]<=D&&((M=L<2&&D<j[1])?(w=0,N.v=C,N.n=j[1]):D<$&&(M=L<3||j[0]>C||C>$)&&(j[4]=L,j[5]=C,N.n=$,w=0))}if(M||L>1)return u;throw J=!0,C}return function(L,C,M){if(O>1)throw TypeError("Generator is already running");for(J&&C===1&&k(C,M),w=C,I=M;(o=w<2?n:I)||!J;){P||(w?w<3?(w>1&&(N.n=-1),k(w,I)):N.n=I:N.v=I);try{if(O=2,P){if(w||(L="next"),o=P[L]){if(!(o=o.call(P,I)))throw TypeError("iterator result is not an object");if(!o.done)return o;I=o.value,w<2&&(w=0)}else w===1&&(o=P.return)&&o.call(P),w<2&&(I=TypeError("The iterator does not provide a '"+L+"' method"),w=1);P=n}else if((o=(J=N.n<0)?I:R.call(S,N))!==u)break}catch(j){P=n,w=1,I=j}finally{O=1}}return{value:o,done:J}}})(v,g,b),!0),_}var u={};function s(){}function p(){}function d(){}o=Object.getPrototypeOf;var f=[][a]?o(o([][a]())):(t(o={},a,function(){return this}),o),h=d.prototype=s.prototype=Object.create(f);function y(v){return Object.setPrototypeOf?Object.setPrototypeOf(v,d):(v.__proto__=d,t(v,l,"GeneratorFunction")),v.prototype=Object.create(h),v}return p.prototype=d,t(h,"constructor",d),t(d,"constructor",p),p.displayName="GeneratorFunction",t(d,l,"GeneratorFunction"),t(h),t(h,l,"Generator"),t(h,a,function(){return this}),t(h,"toString",function(){return"[object Generator]"}),(e.exports=r=function(){return{w:c,m:y}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(et)),et.exports}var rt={exports:{}},nt={exports:{}},ot={exports:{}},Nt;function jr(){return Nt||(Nt=1,(function(e){var t=xr(),r=Lr();function n(o,i){function a(c,u,s,p){try{var d=o[c](u),f=d.value;return f instanceof t?i.resolve(f.v).then(function(h){a("next",h,s,p)},function(h){a("throw",h,s,p)}):i.resolve(f).then(function(h){d.value=h,s(d)},function(h){return a("throw",h,s,p)})}catch(h){p(h)}}var l;this.next||(r(n.prototype),r(n.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),r(this,"_invoke",function(c,u,s){function p(){return new i(function(d,f){a(c,s,d,f)})}return l=l?l.then(p,p):p()},!0)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(ot)),ot.exports}var Wt;function Ar(){return Wt||(Wt=1,(function(e){var t=Cr(),r=jr();function n(o,i,a,l,c){return new r(t().w(o,i,a,l),c||Promise)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(nt)),nt.exports}var Jt;function En(){return Jt||(Jt=1,(function(e){var t=Ar();function r(n,o,i,a,l){var c=t(n,o,i,a,l);return c.next().then(function(u){return u.done?u.value:c.next()})}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(rt)),rt.exports}var it={exports:{}},kt;function bn(){return kt||(kt=1,(function(e){function t(r){var n=Object(r),o=[];for(var i in n)o.unshift(i);return function a(){for(;o.length;)if((i=o.pop())in n)return a.value=i,a.done=!1,a;return a.done=!0,a}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(it)),it.exports}var at={exports:{}},ut={exports:{}},Ft;function wn(){return Ft||(Ft=1,(function(e){function t(r){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(ut)),ut.exports}var Ht;function _n(){return Ht||(Ht=1,(function(e){var t=wn().default;function r(n){if(n!=null){var o=n[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],i=0;if(o)return o.call(n);if(typeof n.next=="function")return n;if(!isNaN(n.length))return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}}}throw new TypeError(t(n)+" is not iterable")}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(at)),at.exports}var qt;function Sn(){return qt||(qt=1,(function(e){var t=xr(),r=Cr(),n=En(),o=Ar(),i=jr(),a=bn(),l=_n();function c(){var u=r(),s=u.m(c),p=(Object.getPrototypeOf?Object.getPrototypeOf(s):s.__proto__).constructor;function d(y){var v=typeof y=="function"&&y.constructor;return!!v&&(v===p||(v.displayName||v.name)==="GeneratorFunction")}var f={throw:1,return:2,break:3,continue:3};function h(y){var v,m;return function(g){v||(v={stop:function(){return m(g.a,2)},catch:function(){return g.v},abrupt:function(E,_){return m(g.a,f[E],_)},delegateYield:function(E,_,R){return v.resultName=_,m(g.d,l(E),R)},finish:function(E){return m(g.f,E)}},m=function(E,_,R){g.p=v.prev,g.n=v.next;try{return E(_,R)}finally{v.next=g.n}}),v.resultName&&(v[v.resultName]=g.v,v.resultName=void 0),v.sent=g.v,v.next=g.n;try{return y.call(this,v)}finally{g.p=v.prev,g.n=v.next}}}return(e.exports=c=function(){return{wrap:function(m,g,b,E){return u.w(h(m),g,b,E&&E.reverse())},isGeneratorFunction:d,mark:u.m,awrap:function(m,g){return new t(m,g)},AsyncIterator:i,async:function(m,g,b,E,_){return(d(g)?o:n)(h(m),g,b,E,_)},keys:a,values:l}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports})(Ze)),Ze.exports}var ct,$t;function In(){if($t)return ct;$t=1;var e=Sn()();ct=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return ct}var Pn=In();const A=hn(Pn);function On(e){if(Array.isArray(e))return e}function Tn(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(s){u=!0,o=s}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function ht(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ur(e,t){if(e){if(typeof e=="string")return ht(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ht(e,t):void 0}}function Rn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Te(e,t){return On(e)||Tn(e,t)||Ur(e,t)||Rn()}function xn(e){if(Array.isArray(e))return ht(e)}function Ln(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Cn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ge(e){return xn(e)||Ln(e)||Ur(e)||Cn()}var Ie="data-wujie-id",We="data-wujie-script-id",Mr="data-wujie-Flag",mt="data-container-position-flag",Je="data-container-overflow-flag",Tt="data-loading-flag",Bt="data-wujie-attach-css-flag",jn="wujie_iframe",je="_wujie_all_event",An="position: fixed; z-index: 2147483647; visibility: hidden; inset: 0px; backface-visibility: hidden;",Un="position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; z-index:1;",Mn=`<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="30px" viewBox="0 0 24 30">
<rect x="0" y="13" width="4" height="5" fill="#909090">
  <animate attributeName="height" attributeType="XML" values="5;21;5" begin="0s" dur="0.6s" repeatCount="indefinite"></animate>
  <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0s" dur="0.6s" repeatCount="indefinite"></animate>
</rect>
<rect x="10" y="13" width="4" height="5" fill="#909090">
  <animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate>
  <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate>
</rect>
<rect x="20" y="13" width="4" height="5" fill="#909090">
  <animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate>
  <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate>
</rect>
</svg>`,Dn="url参数为空",Dr="子应用调用reload无法生效",Nr="此报错可以忽略，iframe主动中断主应用代码在子应用运行",Nn=Nr+"，详见：https://github.com/Tencent/wujie/issues/54",Gt="事件订阅数量为空",Wn="window上不存在fetch属性，需要自行polyfill",Jn="当前浏览器不支持无界，子应用将采用iframe方式渲染",Se="脚本请求出现错误",lt="样式请求出现错误",Qt="html请求出现错误",Yt="无界组件短时间重复渲染了两次，可能存在性能问题请检查代码",kn="目标Script尚未准备好或已经被移除",Fn="不支持document.getElementById()传入特殊字符，请参考document.querySelector文档";function ne(e){return typeof e=="function"}function Hn(e){return e?.toUpperCase()==="LINK"||e?.toUpperCase()==="STYLE"||e?.toUpperCase()==="SCRIPT"||e?.toUpperCase()==="IFRAME"}var Wr=window.Proxy&&window.CustomElementRegistry,qn=typeof document.all=="function"&&typeof document.all>"u",Xt=new WeakMap,ke=function(t){if(Xt.has(t))return!0;var r=qn?typeof t=="function"&&typeof t<"u":typeof t=="function";return r&&Xt.set(t,r),r},st=new WeakMap;function Jr(e){if(st.has(e))return st.get(e);var t=e.name.indexOf("bound ")===0&&!e.hasOwnProperty("prototype");return st.set(e,t),t}var ft=new WeakMap;function Rt(e){var t=e.prototype&&e.prototype.constructor===e&&Object.getOwnPropertyNames(e.prototype).length>1;if(t)return!0;if(ft.has(e))return ft.get(e);var r=t;if(!r){var n=e.toString(),o=/^function\b\s[A-Z].*/,i=/^class\b/;r=o.test(n)||i.test(n)}return ft.set(e,r),r}var F=new WeakMap;function $n(e,t){ke(t)&&!Jr(t)&&!Rt(t)&&(F.has(e)?F.get(e).has(t)||F.get(e).set(t,t):(F.set(e,new WeakMap),F.get(e).set(t,t)))}function we(e,t){var r=e[t];if(F.has(e)&&F.get(e).has(r))return F.get(e).get(r);if(ke(r)&&!Jr(r)&&!Rt(r)){var n=Function.prototype.bind.call(r,e);F.has(e)||F.set(e,new WeakMap),F.get(e).set(r,n);for(var o in r)n[o]=r[o];return r.hasOwnProperty("prototype")&&!n.hasOwnProperty("prototype")&&Object.defineProperty(n,"prototype",{value:r.prototype,enumerable:!1,writable:!0}),n}return r}function kr(e){return window.document.querySelector("iframe[".concat(Ie,'="').concat(e,'"]'))}function Qe(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}function Fr(e){if(!e)throw Y(Dn),new Error;var t=X(e),r=t.protocol+"//"+t.host,n=t.pathname+t.search+t.hash;return n.startsWith("/")||(n="/"+n),{urlElement:t,appHostPath:r,appRoutePath:n}}function X(e){var t=window.document.createElement("a");return t.href=e,t.href=t.href,t}function Ee(e){var t=e.search||"";return Ge(new URLSearchParams(t).entries()).reduce(function(r,n){return r[n[0]]=n[1],r},{})}function Bn(e){var t=Ee(X(window.location.href));return Object.keys(t).includes(e)}function ve(e,t,r){var n=e.Element.prototype.setAttribute;t.prototype.setAttribute=function(u,s){var p=s;u===r&&(p=oe(s,this.baseURI||"",!0)),n.call(this,u,p)};var o=Object.getOwnPropertyDescriptor(t.prototype,r),i=o.enumerable,a=o.configurable,l=o.get,c=o.set;Object.defineProperty(t.prototype,r,{enumerable:i,configurable:a,get:function(){return l.call(this)},set:function(s){c.call(this,oe(s,this.baseURI,!0))}})}function Ye(e){var t=e;return t.protocol+"//"+t.host+t.pathname}function oe(e,t,r){try{return e&&(r&&e.startsWith("#")?e:new URL(e,t).href)}catch{return e}}function Gn(e,t){var r,n=X(window.location.href),o=Ee(n);n=null;var i=o[e]||"",a=(r=i.match(/^{([^}]*)}/))===null||r===void 0?void 0:r[1];return t&&a?i.replace("{".concat(a,"}"),t[a]):i}var Hr=window.requestIdleCallback||function(e){return setTimeout(e,1)};function qr(e){return typeof e=="string"?document.querySelector(e):e}function W(e,t){var r;(r=console)===null||r===void 0||r.warn("[wujie warn]: ".concat(e),t)}function Y(e,t){var r;(r=console)===null||r===void 0||r.error("[wujie error]: ".concat(e),t)}function yt(e){var t=e.indexOf(">")+1,r=e.lastIndexOf("<");return e.substring(t,r)}function Qn(e){if(G(e)==="object")return"/";try{var t=new URL(e,location.href),r=t.origin,n=t.pathname,o=n.split("/");return o.pop(),"".concat(r).concat(o.join("/"),"/")}catch(i){return console.warn(i),""}}function Xe(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return e.reduce(function(i,a){return ne(a)?a.apply(void 0,[i].concat(n)):i},t||"")}}function _e(e){Promise.resolve().then(e)}function H(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];try{e&&e.length>0&&e.map(function(i){return i[t]}).filter(function(i){return ne(i)}).forEach(function(i){return i.apply(void 0,n)})}catch(i){Y(i)}}function Ve(e){var t;return((t=e.tagName)===null||t===void 0?void 0:t.toUpperCase())==="SCRIPT"}var Yn=1;function $r(e,t){if(Ve(e)){var r=t||String(Yn++);e.setAttribute(We,r)}}function Br(e){return Ve(e)?e.getAttribute(We):null}function Xn(e,t){return{name:e.name,el:e.el||t?.el,url:e.url||t?.url,html:e.html||t?.html,exec:e.exec!==void 0?e.exec:t?.exec,replace:e.replace||t?.replace,fetch:e.fetch||t?.fetch,props:e.props||t?.props,sync:e.sync!==void 0?e.sync:t?.sync,prefix:e.prefix||t?.prefix,loading:e.loading||t?.loading,attrs:e.attrs!==void 0?e.attrs:t?.attrs||{},degradeAttrs:e.degradeAttrs!==void 0?e.degradeAttrs:t?.degradeAttrs||{},fiber:e.fiber!==void 0?e.fiber:t?.fiber!==void 0?t?.fiber:!0,alive:e.alive!==void 0?e.alive:t?.alive,degrade:e.degrade!==void 0?e.degrade:t?.degrade,plugins:e.plugins||t?.plugins,iframeAddEventListeners:e.iframeAddEventListeners||t?.iframeAddEventListeners||[],iframeOnEvents:e.iframeOnEvents||t?.iframeOnEvents||[],lifecycles:{beforeLoad:e.beforeLoad||t?.beforeLoad,beforeMount:e.beforeMount||t?.beforeMount,afterMount:e.afterMount||t?.afterMount,beforeUnmount:e.beforeUnmount||t?.beforeUnmount,afterUnmount:e.afterUnmount||t?.afterUnmount,activated:e.activated||t?.activated,deactivated:e.deactivated||t?.deactivated,loadError:e.loadError||t?.loadError}}}function Ae(e,t,r){var n;typeof window.CustomEvent=="function"?n=new CustomEvent(t,{detail:r}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!1,r)),e.dispatchEvent(n)}function Gr(){throw W(Nn),new Error(Nr)}var Vn=/(<script[\s\S]*?>)[\s\S]*?<\/script>/gi,zn=/<(script)\s+((?!type=('|")text\/ng-template\3)[^])*?>[^]*?<\/\1>/i,Vt=/.*\ssrc=('|")?([^>'"\s]+)/,Zn=/.*\stype=('|")?([^>'"\s]+)/,Kn=/.*\sentry\s*.*/,eo=/.*\sasync\s*.*/,to=/.*\sdefer\s*.*/,ro=/.*\snomodule\s*.*/,no=/.*\stype=('|")?module('|")?\s*.*/,oo=/<(link)\s+[^]*?>/gi,io=/\srel=('|")?(preload|prefetch|modulepreload)\1/,zt=/.*\shref=('|")?([^>'"\s]+)/,ao=/.*\sas=('|")?font\1.*/,uo=/<style[^>]*>[\s\S]*?<\/style>/gi,co=/\s+rel=('|")?stylesheet\1.*/,lo=/.*\shref=('|")?([^>'"\s]+)/,so=/<!--([\s\S]*?)-->/g,fo=/<link(\s+|\s+[^]+\s+)ignore(\s*|\s+[^]*|=[^]*)>/i,po=/<style(\s+|\s+[^]+\s+)ignore(\s*|\s+[^]*|=[^]*)>/i,vo=/<script(\s+|\s+[^]+\s+)ignore(\s*|\s+[^]*|=[^]*)>/i,ho=/.*\scrossorigin=?('|")?(use-credentials|anonymous)?('|")?/i;function Zt(e){return e.startsWith("//")||e.startsWith("http://")||e.startsWith("https://")}function Kt(e,t){return new URL(e,t).toString()}function mo(e){var t=["text/javascript","module","application/javascript","text/ecmascript","application/ecmascript","importmap"];return!e||t.indexOf(e)!==-1}function le(e){var t=/<[-\w]+\s+([^>]*)>/i,r=t.exec(e);if(!r)return{};for(var n=r[1],o=/([^\s=]+)\s*=\s*(['"])(.*?)\2/g,i={},a;(a=o.exec(n))!==null;){var l=a[1],c=a[3];i[l]=c}return i}function yo(){var e=window.document.createElement("script");return"noModule"in e}var gt=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return"<!-- ".concat(r?"prefetch/preload/modulepreload":""," link ").concat(t," replaced by wujie -->")},Qr=function(t){return"<!-- inline-style-".concat(t," replaced by wujie -->")},go=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"<!-- ".concat(r," script ").concat(t," replaced by wujie -->")},Eo="<!-- inline scripts replaced by wujie -->",Ue=function(t){return"<!-- ignore asset ".concat(t||"file"," replaced by wujie -->")},er=function(t,r){return"<!-- ".concat(r?"nomodule":"module"," script ").concat(t," ignored by wujie -->")};function bo(e,t,r){var n=[],o=[],i=null,a=yo(),l=e.replace(so,"").replace(oo,function(u){var s=!!u.match(co);if(s){var p=u.match(lo),d=u.match(fo);if(p){var f=p&&p[2],h=f;return f&&!Zt(f)&&(h=Kt(f,t)),d?Ue(h):(o.push({src:h}),gt(h))}}var y=u.match(io)&&u.match(zt)&&!u.match(ao);if(y){var v=u.match(zt),m=Te(v,3),g=m[2];return gt(g,!0)}return u}).replace(uo,function(u){if(po.test(u))return Ue("style file");var s=yt(u);return o.push({src:"",content:s}),Qr(o.length-1)}).replace(Vn,function(u,s){var p=s.match(vo),d=!!s.match(no),f=s.match(ho),h=f?.[2]||"",y=a&&!!s.match(ro)||!a&&d,v=s.match(Zn),m=v&&v[2];if(!mo(m))return u;if(zn.test(u)&&s.match(Vt)){var g=s.match(Kn),b=s.match(Vt),E=b&&b[2];if(i&&g)throw new SyntaxError("You should not set multiply entry script!");if(E&&!Zt(E)&&(E=Kt(E,t)),i=i||g&&E,p)return Ue(E||"js file");if(y)return er(E||"js file",a);if(E){var _=!!s.match(eo),R=!!s.match(to);return n.push(_||R?{async:_,defer:R,src:E,module:d,crossorigin:!!f,crossoriginType:h,attrs:le(u)}:{src:E,module:d,crossorigin:!!f,crossoriginType:h,attrs:le(u)}),go(E,_&&"async"||R&&"defer"||"")}return u}else{if(p)return Ue("js file");if(y)return er("js file",a);var S=yt(u),x=S.split(/[\r\n]+/).every(function(P){return!P.trim()||P.trim().startsWith("//")});return!x&&S&&n.push({src:"",content:S,module:d,crossorigin:!!f,crossoriginType:h,attrs:le(u)}),Eo}}),c={template:l,scripts:n,styles:o,entry:i||n[n.length-1]};return c}function Et(e){var t=e.plugins,r=e.replace;return function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0;return Xe(t.map(function(a){return a.cssLoader}))(r?r(n):n,o,i)}}function wo(e){var t=e.plugins,r=e.replace;return function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0;return Xe(t.map(function(a){return a.jsLoader}))(r?r(n):n,o,i)}}function Fe(e,t){var r=t.map(function(o){return o[e]}).filter(function(o){return o?.length}),n=r.reduce(function(o,i){return o.concat(i)},[]);return e==="cssBeforeLoaders"?n.reverse():n}function te(e,t){return t.map(function(r){return r[e]}).filter(function(r){return r?.length}).reduce(function(r,n){return r.concat(n)},[])}function re(e,t){return t.some(function(r){return typeof r=="string"?e===r:r.test(e)})}function _o(e,t,r){var n=t?oe(t,r):r,o=/url\((['"]?)((?:[^()]+|\((?:[^()]+|\([^()]*\))*\))*)(\1)\)/g;return e.replace(o,function(i,a,l,c){var u=/^data:/,s=u.test(l);return s?i:"url(".concat(a).concat(oe(l,n)).concat(c,")")})}var tr={cssLoader:_o,cssBeforeLoaders:[{content:"html {view-transition-name: none;}"}]};function Yr(e){return Array.isArray(e)?[tr].concat(Ge(e)):[tr]}function rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rr(Object(r),!0).forEach(function(n){V(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var So={},dt={},pt={};if(!window.fetch)throw Y(Wn),new Error;var xt=window.fetch.bind(window);function Io(e){return e}function Po(e,t,r){return bt.apply(this,arguments)}function bt(){return bt=Q(A.mark(function e(t,r,n){var o,i,a,l;return A.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=Ye(t.proxyLocation),i=Xe(t.plugins.map(function(s){return s.cssLoader})),a=n().map(function(s){var p=s.src,d=s.ignore,f=s.contentPromise;return{src:p,ignore:d,contentPromise:f.then(function(h){return i(h,p,o)})}}),u.next=5,Oo(r,a);case 5:return l=u.sent,u.abrupt("return",t.replace?t.replace(l):l);case 7:case"end":return u.stop()}},e)})),bt.apply(this,arguments)}function Oo(e,t){return wt.apply(this,arguments)}function wt(){return wt=Q(A.mark(function e(t,r){var n;return A.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=t,i.abrupt("return",Promise.all(r.map(function(a,l){return a.contentPromise.then(function(c){a.src?n=n.replace(gt(a.src),a.ignore?'<link href="'.concat(a.src,'" rel="stylesheet" type="text/css">'):"<style>/* ".concat(a.src," */").concat(c,"</style>")):c&&(n=n.replace(Qr(l),"<style>/* inline-style-".concat(l," */").concat(c,"</style>")))})})).then(function(){return n}));case 2:case"end":return i.stop()}},e)})),wt.apply(this,arguments)}var To=function(t){return t.startsWith("<")},Ne=function(t,r,n,o,i){return r[t]||(r[t]=n(t).then(function(a){if(a.status>=400){if(r[t]=null,o)return Y(lt,{src:t,response:a}),i?.(t,new Error(lt)),"";throw Y(Se,{src:t,response:a}),i?.(t,new Error(Se)),new Error(Se)}return a.text()}).catch(function(a){return r[t]=null,o?(Y(lt,t),i?.(t,a),""):(Y(Se,t),i?.(t,a),"")}))};function He(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xt,r=arguments.length>2?arguments[2]:void 0;return e.map(function(n){var o=n.src,i=n.content,a=n.ignore;return i?{src:"",contentPromise:Promise.resolve(i)}:To(o)?{src:"",contentPromise:Promise.resolve(yt(o))}:{src:o,ignore:a,contentPromise:a?Promise.resolve(""):Ne(o,So,t,!0,r)}})}function Xr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xt,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return e.map(function(o){var i=o.src,a=o.async,l=o.defer,c=o.module,u=o.ignore,s=null;return(a||l)&&i&&!c?s=new Promise(function(p,d){return n?Hr(function(){return Ne(i,dt,t,!1,r).then(p,d)}):Ne(i,dt,t,!1,r).then(p,d)}):c&&i||u?s=Promise.resolve(""):i?s=Ne(i,dt,t,!1,r):s=Promise.resolve(o.content),c&&!a&&(o.defer=!0),ye(ye({},o),{},{contentPromise:s})})}function nr(e){var t,r,n=e.url,o=e.opts,i=e.html,a=(t=o.fetch)!==null&&t!==void 0?t:xt,l=(r=o.fiber)!==null&&r!==void 0?r:!0,c=o.plugins,u=o.loadError,s=c?Xe(c.map(function(m){return m.htmlLoader})):Io,p=te("jsExcludes",c),d=te("cssExcludes",c),f=te("jsIgnores",c),h=te("cssIgnores",c),y=Qn,v=function(g,b,E){return(b?Promise.resolve(b):a(g).then(function(_){return _.status>=400?(Y(Qt,{url:g,response:_}),u?.(g,new Error(Qt)),""):_.text()}).catch(function(_){return pt[g]=null,u?.(g,_),Promise.reject(_)})).then(function(_){var R=y(g),S=bo(E(_),R),x=S.template,P=S.scripts,w=S.styles;return{template:x,assetPublicPath:R,getExternalScripts:function(){return Xr(P.filter(function(O){return!O.src||!re(O.src,p)}).map(function(O){return ye(ye({},O),{},{ignore:O.src&&re(O.src,f)})}),a,u,l)},getExternalStyleSheets:function(){return He(w.filter(function(O){return!O.src||!re(O.src,d)}).map(function(O){return ye(ye({},O),{},{ignore:O.src&&re(O.src,h)})}),a,u)}}})};return o!=null&&o.plugins.some(function(m){return m.htmlLoader})?v(n,i,s):pt[n]||(pt[n]=v(n,i,s))}function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ro(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Rr(n.key),n)}}function Ct(e,t,r){return t&&Ro(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lo(e,t){if(t&&(G(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xo(e)}function Pe(e){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pe(e)}function Oe(e,t){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Oe(e,t)}function Co(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oe(e,t)}function jo(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function Vr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vr=function(){return!!e})()}function Ao(e,t,r){if(Vr())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(e.bind.apply(e,n));return r&&Oe(o,r.prototype),o}function _t(e){var t=typeof Map=="function"?new Map:void 0;return _t=function(n){if(n===null||!jo(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(n))return t.get(n);t.set(n,o)}function o(){return Ao(n,arguments,Pe(this).constructor)}return o.prototype=Object.create(n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Oe(o,n)},_t(e)}function or(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function qe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?or(Object(r),!0).forEach(function(n){V(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):or(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Z=(function(e){if((e=window.__WUJIE_INJECT)!==null&&e!==void 0&&e.idToSandboxMap)return window.__WUJIE_INJECT.idToSandboxMap;var t=window.__POWERED_BY_WUJIE__?window.__WUJIE.inject.idToSandboxMap:new Map;return window.__WUJIE_INJECT=qe(qe({},window.__WUJIE_INJECT),{},{idToSandboxMap:t}),t})();function ie(e){var t;return((t=Z.get(e))===null||t===void 0?void 0:t.wujie)||null}function Uo(e){var t;return((t=Z.get(e))===null||t===void 0?void 0:t.options)||null}function Mo(e,t){var r=Z.get(e);r?Z.set(e,qe(qe({},r),{},{wujie:t})):Z.set(e,{wujie:t})}function Do(e){var t=Z.get(e);t!=null&&t.options&&Z.set(e,{options:t.options}),Z.delete(e)}var U={modifyLocalProperties:["createElement","createTextNode","documentURI","URL","getElementsByTagName","getElementById"],modifyProperties:["createElement","createTextNode","documentURI","URL","getElementsByTagName","getElementsByClassName","getElementsByName","getElementById","querySelector","querySelectorAll","documentElement","scrollingElement","forms","images","links"],shadowProperties:["activeElement","childElementCount","children","firstElementChild","firstChild","fullscreenElement","lastElementChild","pictureInPictureElement","pointerLockElement","styleSheets"],shadowMethods:["append","contains","getSelection","elementFromPoint","elementsFromPoint","getAnimations","replaceChildren"],documentProperties:["characterSet","compatMode","contentType","designMode","dir","doctype","embeds","fullscreenEnabled","hidden","implementation","lastModified","pictureInPictureEnabled","plugins","readyState","referrer","visibilityState","fonts"],documentMethods:["execCommand","caretPositionFromPoint","createRange","exitFullscreen","exitPictureInPicture","getElementsByTagNameNS","hasFocus","prepend"],documentEvents:["onpointerlockchange","onpointerlockerror","onbeforecopy","onbeforecut","onbeforepaste","onfreeze","onresume","onsearch","onfullscreenchange","onfullscreenerror","onsecuritypolicyviolation","onvisibilitychange"],ownerProperties:["head","body"]},ir=["DOMContentLoaded","readystatechange"],No=["onreadystatechange"],ar=["fullscreenchange","fullscreenerror","selectionchange","visibilitychange","wheel","keydown","keypress","keyup"],ur=["gotpointercapture","lostpointercapture"],cr=["hashchange","popstate","DOMContentLoaded","load","beforeunload","unload","message","error","unhandledrejection"],Wo=["onload","onbeforeunload","onunload","onerror","onunhandledrejection"],Jo={IMG:"src",A:"href",SOURCE:"src"},ko=["getComputedStyle","visualViewport","matchMedia","DOMParser"],Fo=[/animationFrame$/i,/resizeObserver$|mutationObserver$|intersectionObserver$/i,/height$|width$|left$/i,/^screen/i,/CSSStyleSheet$/i,/X$|Y$/],zr=HTMLElement.prototype.appendChild,Zr=HTMLElement.prototype.removeChild,lr=HTMLElement.prototype.contains,Ho=HTMLHeadElement.prototype.insertBefore,qo=HTMLBodyElement.prototype.insertBefore,sr=HTMLStyleElement.prototype.insertAdjacentElement,jt=Node.prototype.addEventListener,ze=Node.prototype.removeEventListener,fr=window.addEventListener,dr=window.removeEventListener,se=Node.prototype.appendChild,fe=window.__POWERED_BY_WUJIE__?window.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__:Document.prototype.querySelector;function pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pr(Object(r),!0).forEach(function(n){V(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pr(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $o(e,t){return Object.defineProperties(e,{srcElement:{get:t},target:{get:t}}),e}function Me(e,t){var r=new CustomEvent(t),n=$o(r,function(){return e});ne(e["on".concat(t)])?e["on".concat(t)](n):e.dispatchEvent(n)}function ue(e,t){if(!(!e.innerHTML||t.degrade)){var r=function(){var o=an([e.sheet]),i=Te(o,2),a=i[0],l=i[1];a&&t.shadowRoot.head.appendChild(a),l&&t.shadowRoot.host.appendChild(l),e._patcher=void 0};e._patcher&&clearTimeout(e._patcher),e._patcher=setTimeout(r,50)}}function Bo(e,t,r,n){var o;if(e._hasPatchStyle)return;var i=Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML"),a=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"innerText"),l=Object.getOwnPropertyDescriptor(Node.prototype,"textContent"),c=(o=e.sheet)===null||o===void 0?void 0:o.insertRule;function u(){c&&(e.sheet.insertRule=function(s,p){return i?e.innerHTML+=s:e.innerText+=s,c.call(e.sheet,s,p)})}u(),i&&Object.defineProperties(e,{innerHTML:{get:function(){return i.get.call(e)},set:function(p){var d=this;i.set.call(e,t(p,"",n)),_e(function(){return ue(d,r)})}}}),Object.defineProperties(e,{innerText:{get:function(){return a.get.call(e)},set:function(p){var d=this;a.set.call(e,t(p,"",n)),_e(function(){return ue(d,r)})}},textContent:{get:function(){return l.get.call(e)},set:function(p){var d=this;l.set.call(e,t(p,"",n)),_e(function(){return ue(d,r)})}},appendChild:{value:function(p){var d=this;if(_e(function(){return ue(d,r)}),p.nodeType===Node.TEXT_NODE){var f=se.call(e,e.ownerDocument.createTextNode(t(p.textContent,"",n)));return u(),f}else return se(p)}},insertAdjacentElement:{value:function(p,d){if(d.nodeName==="STYLE"){_e(function(){return ue(d,r)});var f=sr.call(this,p,d);return r.styleSheetElements.push(d),f}else return sr.call(this,p,d)}},_hasPatchStyle:{get:function(){return!0}}})}var vr=Promise.resolve();function De(e){return function(r,n){var o=this,i=r,a=e.rawDOMAppendOrInsertBefore,l=e.wujieId,c=ie(l),u=c.styleSheetElements,s=c.replace,p=c.fetch,d=c.plugins,f=c.iframe,h=c.lifecycles,y=c.proxyLocation,v=c.fiber;if(!Hn(i.tagName)||!l){var m=a.call(this,i,n);return K(i,f.contentWindow),H(d,"appendOrInsertElementHook",i,f.contentWindow),m}var g=f.contentDocument,b=Ye(y);if(i.tagName){var E;switch((E=i.tagName)===null||E===void 0?void 0:E.toUpperCase()){case"LINK":{var _=i,R=_.href,S=_.rel,x=_.type,P=S==="stylesheet"||x==="text/css"||R.endsWith(".css");if(!P){var w=a.call(this,i,n);return H(d,"appendOrInsertElementHook",i,f.contentWindow),w}R&&!re(R,te("cssExcludes",d))&&He([{src:R,ignore:re(R,te("cssIgnores",d))}],p,h.loadError).forEach(function(z){var T=z.src,ae=z.ignore,Ce=z.contentPromise;return Ce.then(function(dn){var pn=le(i.outerHTML);if(ae&&T)a.call(o,i,n);else{var be=g.createElement("style"),vn=Et({plugins:d,replace:s});be.innerHTML=vn(dn,T,b),u.push(be),Qe(be,pn),a.call(o,be,n),ue(be,c),Me(i,"load")}i=null},function(){Me(i,"error"),i=null})});var I=g.createComment("dynamic link ".concat(R," replaced by wujie"));return a.call(this,I,n)}case"STYLE":{var O=r;u.push(O);var q=O.innerHTML,J=Et({plugins:d,replace:s});q&&(O.innerHTML=J(q,"",b));var N=a.call(this,i,n);return Bo(O,J,c,b),ue(O,c),H(d,"appendOrInsertElementHook",i,f.contentWindow),N}case"SCRIPT":{$r(i);var k=i,L=k.src,C=k.text,M=k.type,j=k.crossOrigin;if(L&&!re(L,te("jsExcludes",d))){var D=function(T){if(c.iframe===null)return W(Yt);var ae=function(){Me(i,"load"),i=null};B(he(he({},T),{},{onload:ae}),c.iframe.contentWindow,i)},$={src:L,module:M==="module",crossorigin:j!==null,crossoriginType:j||"",ignore:re(L,te("jsIgnores",d)),attrs:le(i.outerHTML)};Xr([$],p,h.loadError,v).forEach(function(z){vr=vr.then(function(){return z.contentPromise.then(function(T){var ae;if(c.execQueue===null)return W(Yt);var Ce=(ae=c.execQueue)===null||ae===void 0?void 0:ae.length;c.execQueue.push(function(){return v?c.requestIdleCallback(function(){D(he(he({},z),{},{content:T}))}):D(he(he({},z),{},{content:T}))}),Ce||c.execQueue.shift()()},function(){Me(i,"error"),i=null})})})}else{var pe,Re=(pe=c.execQueue)===null||pe===void 0?void 0:pe.length;c.execQueue.push(function(){return v?c.requestIdleCallback(function(){B({src:null,content:C,attrs:le(i.outerHTML)},c.iframe.contentWindow,i)}):B({src:null,content:C,attrs:le(i.outerHTML)},c.iframe.contentWindow,i)}),Re||c.execQueue.shift()()}var xe=g.createComment("dynamic script ".concat(L," replaced by wujie"));return a.call(this,xe,n)}case"IFRAME":{if(i.getAttribute(Mr)==="")return se.call(fe.call(this.ownerDocument,"html"),i);var Le=a.call(this,i,n);return H(d,"appendOrInsertElementHook",i,f.contentWindow),Le}}}}}function Kr(e,t){var r=Br(e),n=ie(t),o=n.iframe,i=o.contentWindow.__WUJIE_RAW_DOCUMENT_HEAD__.querySelector("script[".concat(We,"='").concat(r,"']"));return i===null&&W(kn,"<script ".concat(We,"='").concat(r,"'/>")),{targetScript:i,iframe:o}}function hr(e){return function(r){var n=r,o=e.rawElementContains,i=e.wujieId;if(n&&Ve(n)){var a=Kr(n,i),l=a.targetScript;return l!==null}return o(n)}}function Go(e){return function(r){var n=r,o=e.rawElementRemoveChild,i=e.wujieId;if(n&&Ve(n)){var a=Kr(n,i),l=a.targetScript,c=a.iframe;return l!==null?c.contentWindow.__WUJIE_RAW_DOCUMENT_HEAD__.removeChild(l):null}return o(n)}}function mr(e){var t=new Map;e._cacheListeners=t,e.addEventListener=function(r,n,o){var i=t.get(r)||[];return t.set(r,[].concat(Ge(i),[n])),jt.call(e,r,n,o)},e.removeEventListener=function(r,n,o){var i=t.get(r),a=i?.indexOf(n);return i!=null&&i.length&&a!==-1&&i.splice(a,1),ze.call(e,r,n,o)}}function yr(e){var t=e._cacheListeners;Ge(t.entries()).forEach(function(r){var n=Te(r,2),o=n[0],i=n[1];i.forEach(function(a){return ze.call(e,o,a)})})}function en(e,t,r){r||(mr(e.head),mr(e.body)),e.head.appendChild=De({rawDOMAppendOrInsertBefore:se,wujieId:t}),e.head.insertBefore=De({rawDOMAppendOrInsertBefore:Ho,wujieId:t}),e.head.removeChild=Go({rawElementRemoveChild:Zr.bind(e.head),wujieId:t}),e.head.contains=hr({rawElementContains:lr.bind(e.head),wujieId:t}),e.contains=hr({rawElementContains:lr.bind(e),wujieId:t}),e.body.appendChild=De({rawDOMAppendOrInsertBefore:se,wujieId:t}),e.body.insertBefore=De({rawDOMAppendOrInsertBefore:qo,wujieId:t})}function gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gr(Object(r),!0).forEach(function(n){V(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gr(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qo(e,t,r){return t=Pe(t),Lo(e,tn()?Reflect.construct(t,r||[],Pe(e).constructor):t.apply(e,r))}function tn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tn=function(){return!!e})()}var Yo={":root":":host"};function Xo(){var e=window.customElements;if(e&&!(e!=null&&e.get("wujie-app"))){var t=(function(r){function n(){return Lt(this,n),Qo(this,n,arguments)}return Co(n,r),Ct(n,[{key:"connectedCallback",value:function(){if(!this.shadowRoot){var i=this.attachShadow({mode:"open"}),a=ie(this.getAttribute(Ie));K(i,a.iframe.contentWindow),a.shadowRoot=i}}},{key:"disconnectedCallback",value:function(){var i=ie(this.getAttribute(Ie));i?.unmount()}}])})(_t(HTMLElement));e?.define("wujie-app",t)}}function Vo(e){var t=window.document.createElement("wujie-app");return t.setAttribute(Ie,e),t.classList.add(jn),t}function de(e,t){var r=qr(t);return r&&!r.contains(e)&&(r.querySelector("div[".concat(Tt,"]"))||ce(r),e&&zr.call(r,e)),r}function rn(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=Ko(e,r),o=de(n,t),i=n.contentWindow.document;return i.open(),i.write("<!DOCTYPE html><html><head></head><body></body></html>"),i.close(),{iframe:n,container:o}}function nn(e,t){return St.apply(this,arguments)}function St(){return St=Q(A.mark(function e(t,r){var n,o,i,a,l,c,u,s;return A.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return n=t.iframe.contentDocument,o=t.plugins,i=t.replace,a=t.proxyLocation,l=Et({plugins:o,replace:i}),c=Fe("cssBeforeLoaders",o),u=Fe("cssAfterLoaders",o),s=Ye(a),d.next=8,Promise.all([Promise.all(He(c,t.fetch,t.lifecycles.loadError).map(function(f){var h=f.src,y=f.contentPromise;return y.then(function(v){return{src:h,content:v}})})).then(function(f){f.forEach(function(h){var y=h.src,v=h.content;if(v){var m=n.createElement("style");m.setAttribute("type","text/css"),m.appendChild(n.createTextNode(v&&l(v,y,s)));var g=r.querySelector("head"),b=r.querySelector("body");r.insertBefore(m,g||b||r.firstChild)}})}),Promise.all(He(u,t.fetch,t.lifecycles.loadError).map(function(f){var h=f.src,y=f.contentPromise;return y.then(function(v){return{src:h,content:v}})})).then(function(f){f.forEach(function(h){var y=h.src,v=h.content;if(v){var m=n.createElement("style");m.setAttribute("type","text/css"),m.appendChild(n.createTextNode(v&&l(v,y,s))),r.appendChild(m)}})})]).then(function(){return r},function(){return r});case 8:return d.abrupt("return",d.sent);case 9:case"end":return d.stop()}},e)})),St.apply(this,arguments)}function zo(e,t,r){var n=e.querySelector("head"),o=e.querySelector("body");if(n){for(;n.firstChild;)se.call(t,n.firstChild.cloneNode(!0)),n.removeChild(n.firstChild);n.parentNode.replaceChild(t,n)}if(o){for(;o.firstChild;)se.call(r,o.firstChild.cloneNode(!0)),o.removeChild(o.firstChild);o.parentNode.replaceChild(r,o)}return e}function on(e,t){var r=e.__WUJIE,n=r.head,o=r.body,i=r.alive,a=r.execFlag,l=e.document,c=new DOMParser,u=c.parseFromString(t,"text/html"),s=u.documentElement,p=s.attributes,d=l.createElement("html");d.innerHTML=t;for(var f=0;f<p.length;f++)d.setAttribute(p[f].name,p[f].value);!i&&a?d=zo(d,n,o):(r.head=d.querySelector("head"),r.body=d.querySelector("body"));for(var h=l.createTreeWalker(d,NodeFilter.SHOW_ELEMENT,null,!1),y=h.currentNode;y;){K(y,e);var v=Jo[y.tagName],m=y[v];v&&y.setAttribute(v,oe(m,y.baseURI||"")),y=h.nextNode()}if(!d.querySelector("head")){var g=l.createElement("head");d.appendChild(g)}if(!d.querySelector("body")){var b=l.createElement("body");d.appendChild(b)}return d}function Zo(e,t,r){return It.apply(this,arguments)}function It(){return It=Q(A.mark(function e(t,r,n){var o,i,a;return A.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=on(r,n),c.next=3,nn(r.__WUJIE,o);case 3:i=c.sent,t.appendChild(i),a=document.createElement("div"),a.setAttribute("style",An),i.insertBefore(a,i.firstChild),t.head=t.querySelector("head"),t.body=t.querySelector("body"),Object.defineProperty(t.firstChild,"parentNode",{enumerable:!0,configurable:!0,get:function(){return r.document}}),en(t,r.__WUJIE.id,!1);case 12:case"end":return c.stop()}},e)})),It.apply(this,arguments)}function Ko(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=document.createElement("iframe"),n="height:100%;width:100%";return Qe(r,Er(Er({},t),{},V({style:[n,t.style].join(";")},Ie,e))),r}function br(e,t,r){return Pt.apply(this,arguments)}function Pt(){return Pt=Q(A.mark(function e(t,r,n){var o,i;return A.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return o=on(r,n),l.next=3,nn(r.__WUJIE,o);case 3:i=l.sent,t.replaceChild(i,t.documentElement),Object.defineProperty(t.documentElement,"parentNode",{enumerable:!0,configurable:!0,get:function(){return r.document}}),en(t,r.__WUJIE.id,!0);case 7:case"end":return l.stop()}},e)})),Pt.apply(this,arguments)}function ce(e){for(;e!=null&&e.firstChild;)Zr.call(e,e.firstChild)}function ei(e,t){var r=qr(e);ce(r);var n=null;try{n=window.getComputedStyle(r)}catch{return}n.position==="static"?(r.setAttribute(mt,n.position),r.setAttribute(Je,n.overflow==="visible"?"":n.overflow),r.style.setProperty("position","relative"),r.style.setProperty("overflow","hidden")):["relative","sticky"].includes(n.position)&&(r.setAttribute(Je,n.overflow==="visible"?"":n.overflow),r.style.setProperty("overflow","hidden"));var o=document.createElement("div");o.setAttribute(Tt,""),o.setAttribute("style",Un),t?o.appendChild(t):o.innerHTML=Mn,r.appendChild(o)}function wr(e){var t=e.getAttribute(mt),r=e.getAttribute(Je);t&&e.style.removeProperty("position"),r!==null&&(r?e.style.setProperty("overflow",r):e.style.removeProperty("overflow")),e.removeAttribute(mt),e.removeAttribute(Je);var n=e.querySelector("div[".concat(Tt,"]"));n&&e.removeChild(n)}function an(e){for(var t=[],r=[],n=/:root/g,o=0;o<e.length;o++)for(var i,a,l=(i=(a=e[o])===null||a===void 0?void 0:a.cssRules)!==null&&i!==void 0?i:[],c=0;c<l.length;c++){var u=l[c].cssText;n.test(u)&&t.push(u.replace(n,function(d){return Yo[d]})),l[c].type===CSSRule.FONT_FACE_RULE&&r.push(u)}var s=null,p=null;return t.length&&(s=window.document.createElement("style"),s.innerHTML=t.join("")),r.length&&(p=window.document.createElement("style"),p.innerHTML=r.join("")),[s,p]}function ge(e){var t=e.__WUJIE,r=t.sync,n=t.id,o=t.prefix,i=X(window.location.href),a=Ee(i);if(!r&&!a[n])return i=null;var l=e.location.pathname+e.location.search+e.location.hash,c="";o&&Object.keys(o).forEach(function(s){var p=o[s];l.startsWith(p)&&(!c||p.length>o[c].length)&&(c=s)}),r?a[n]=window.encodeURIComponent(c?l.replace(o[c],"{".concat(c,"}")):l):delete a[n];var u="?"+Object.keys(a).map(function(s){return s+"="+a[s]}).join("&");i.search=u,i.href!==window.location.href&&window.history.replaceState(null,"",i.href),i=null}function ti(e){var t=e.location,r=t.pathname,n=t.search,o=t.hash,i=e.__WUJIE,a=i.id,l=i.url,c=i.sync,u=i.execFlag,s=i.prefix,p=i.inject,d=c&&!u?Gn(a,s):l,f=(/^http/.test(d)?null:d)||l,h=Fr(f),y=h.appRoutePath,v=r+n+o;v!==y&&e.history.replaceState(null,"",p.mainHostPath+y)}function ri(){var e=X(window.location.href),t=Ee(e);Object.keys(t).forEach(function(n){var o=ie(n);o&&o.execFlag&&o.sync&&!o.hrefFlag&&!o.activeFlag&&delete t[n]});var r="?"+Object.keys(t).map(function(n){return n+"="+window.decodeURIComponent(t[n])}).join("&");e.search=r,e.href!==window.location.href&&window.history.replaceState(null,"",e.href),e=null}function ni(e,t){var r=X(window.location.href),n=Ee(r);n[e]=window.encodeURIComponent(t);var o="?"+Object.keys(n).map(function(i){return i+"="+n[i]}).join("&");r.search=o,window.history.pushState(null,"",r.href),r=null}function oi(){window.addEventListener("popstate",function(){var e=X(window.location.href),t=Ee(e);e=null,Object.keys(t).map(function(r){return ie(r)}).filter(function(r){return r}).forEach(function(r){var n=t[r.id],o=fe.call(r.iframe.contentDocument,"body");if(/http/.test(n))r.degrade?(de(r.document.documentElement,o),Be(window.decodeURIComponent(n),kr(r.id).parentElement,r.degradeAttrs)):Be(window.decodeURIComponent(n),r.shadowRoot.host.parentElement,r.degradeAttrs),r.hrefFlag=!0;else if(r.hrefFlag){if(r.degrade){var i=rn(r.id,r.el,r.degradeAttrs),a=i.iframe;un(a.contentWindow,r.iframe.contentWindow),a.contentWindow.onunload=function(){r.unmount()},a.contentDocument.appendChild(o.firstElementChild),r.document=a.contentDocument}else de(r.shadowRoot.host,r.el);r.hrefFlag=!1}})})}function _r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_r(Object(r),!0).forEach(function(n){V(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_r(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ii(e){e.__WUJIE_EVENTLISTENER__=e.__WUJIE_EVENTLISTENER__||new Set,e.addEventListener=function(r,n,o){if(H(e.__WUJIE.plugins,"windowAddEventListenerHook",e,r,n,o),e.__WUJIE_EVENTLISTENER__.add({type:r,listener:n,options:o}),cr.concat(e.__WUJIE.iframeAddEventListeners).includes(r)||G(o)==="object"&&o.targetWindow){var i=G(o)==="object"&&o.targetWindow?o?.targetWindow:e;return fr.call(i,r,n,o)}fr.call(window.__WUJIE_RAW_WINDOW__||window,r,n,o)},e.removeEventListener=function(r,n,o){if(H(e.__WUJIE.plugins,"windowRemoveEventListenerHook",e,r,n,o),e.__WUJIE_EVENTLISTENER__.forEach(function(a){a.listener===n&&a.type===r&&o==a.options&&e.__WUJIE_EVENTLISTENER__.delete(a)}),cr.concat(e.__WUJIE.iframeAddEventListeners).includes(r)||G(o)==="object"&&o.targetWindow){var i=G(o)==="object"&&o.targetWindow?o?.targetWindow:e;return dr.call(i,r,n,o)}dr.call(window.__WUJIE_RAW_WINDOW__||window,r,n,o)}}function Sr(e,t,r){e.__WUJIE=t,e.__WUJIE_PUBLIC_PATH__=r+"/",e.$wujie=t.provide,e.__WUJIE_RAW_WINDOW__=e}function ai(e,t,r){var n=e.history,o=n.pushState,i=n.replaceState;n.pushState=function(a,l,c){var u=r+e.location.pathname+e.location.search+e.location.hash,s=oe(c?.replace(t,""),u),p=c===void 0;o.call(n,a,l,p?void 0:s),!p&&(Ir(e,t,r),ge(e))},n.replaceState=function(a,l,c){var u=r+e.location.pathname+e.location.search+e.location.hash,s=oe(c?.replace(t,""),u),p=c===void 0;i.call(n,a,l,p?void 0:s),!p&&(Ir(e,t,r),ge(e))}}function Ir(e,t,r){var n,o=new URL((n=e.location.href)===null||n===void 0?void 0:n.replace(r,""),t),i=fe.call(e.document,"base");i&&i.setAttribute("href",t+o.pathname)}function ui(e){function t(n){var o=e[n];try{return typeof o=="function"&&!Rt(o)?e[n]=window[n].bind(window):e[n]=window[n],!0}catch(i){return W(i.message),!1}}Object.getOwnPropertyNames(e).forEach(function(n){if(n==="getSelection"){Object.defineProperty(e,n,{get:function(){return e.document[n]}});return}if(ko.includes(n)){t(n);return}Fo.some(function(o){return o.test(n)&&n in e.parent?t(n):!1})});var r=Object.getOwnPropertyNames(window).filter(function(n){return/^on/.test(n)}).filter(function(n){return!Wo.concat(e.__WUJIE.iframeOnEvents).includes(n)});r.forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n)||{enumerable:!0,writable:!0};try{Object.defineProperty(e,n,{enumerable:o.enumerable,configurable:!0,get:function(){return window[n]},set:o.writable||o.set?function(i){window[n]=typeof i=="function"?i.bind(e):i}:void 0})}catch(i){W(i.message)}}),H(e.__WUJIE.plugins,"windowPropertyOverride",e)}function ci(e){var t=e.__WUJIE;e.Node.prototype.addEventListener=function(r,n,o){var i=t.elementEventCacheMap.get(this);return i?i.find(function(a){return a.type===r&&a.handler===n})||i.push({type:r,handler:n,options:o}):t.elementEventCacheMap.set(this,[{type:r,handler:n,options:o}]),jt.call(this,r,n,o)},e.Node.prototype.removeEventListener=function(r,n,o){var i=t.elementEventCacheMap.get(this);if(i){var a=i?.findIndex(function(l){return l.type===r&&l.handler===n});i.splice(a,1)}return i!=null&&i.length||t.elementEventCacheMap.delete(this),ze.call(this,r,n,o)}}function li(e,t){for(var r=t.__WUJIE,n=new WeakMap,o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1),i=o.currentNode;i;){var a=r.elementEventCacheMap.get(i);a!=null&&a.length&&(n.set(i,a),a.forEach(function(l){i.addEventListener(l.type,l.handler,l.options)})),i=o.nextNode()}r.elementEventCacheMap=n}function si(e,t,r){var n=r.__WUJIE,o=new WeakMap,i=n.elementEventCacheMap.get(e);i!=null&&i.length&&(o.set(t,i),i.forEach(function(a){t.addEventListener(a.type,a.handler,a.options)})),n.elementEventCacheMap=o}function un(e,t){Object.defineProperty(e.Event.prototype,"timeStamp",{get:function(){return t.document.createEvent("Event").timeStamp}})}function fi(e){var t=e.__WUJIE,r=new WeakMap,n=new WeakMap;e.Document.prototype.addEventListener=function(f,h,y){if(h){var v=r.get(h),m=n.get(h);if(v||(v=typeof h=="function"?h.bind(this):h,r.set(h,v)),m?m.includes(f)||m.push(f):n.set(h,[f]),H(e.__WUJIE.plugins,"documentAddEventListenerHook",e,f,v,y),ir.includes(f))return jt.call(this,f,v,y);if(t.degrade)return t.document.addEventListener(f,v,y);if(ar.includes(f))return window.document.addEventListener(f,v,y);if(ur.includes(f)){window.document.addEventListener(f,v,y),t.shadowRoot.addEventListener(f,v,y);return}t.shadowRoot.addEventListener(f,v,y)}},e.Document.prototype.removeEventListener=function(f,h,y){var v=r.get(h),m=n.get(h);if(v){if(m!=null&&m.includes(f)&&(m.splice(m.indexOf(f),1),m.length||(r.delete(h),n.delete(h))),H(e.__WUJIE.plugins,"documentRemoveEventListenerHook",e,f,v,y),ir.includes(f))return ze.call(this,f,v,y);if(t.degrade)return t.document.removeEventListener(f,v,y);if(ar.includes(f))return window.document.removeEventListener(f,v,y);if(ur.includes(f)){window.document.removeEventListener(f,v,y),t.shadowRoot.removeEventListener(f,v,y);return}t.shadowRoot.removeEventListener(f,v,y)}};var o=Object.keys(e.HTMLElement.prototype).filter(function(f){return/^on/.test(f)}),i=Object.keys(e.Document.prototype).filter(function(f){return/^on/.test(f)}).filter(function(f){return!No.includes(f)});o.filter(function(f){return i.includes(f)}).forEach(function(f){var h=Object.getOwnPropertyDescriptor(e.Document.prototype,f)||{enumerable:!0,writable:!0};try{Object.defineProperty(e.Document.prototype,f,{enumerable:h.enumerable,configurable:!0,get:function(){return t.degrade?t.document[f]:t.shadowRoot.firstElementChild[f]},set:h.writable||h.set?function(y){var v=typeof y=="function"?y.bind(e.document):y;t.degrade?t.document[f]=v:t.shadowRoot.firstElementChild[f]=v}:void 0})}catch(y){W(y.message)}});var a=U.ownerProperties,l=U.modifyProperties,c=U.shadowProperties,u=U.shadowMethods,s=U.documentProperties,p=U.documentMethods,d=U.documentEvents;l.concat(c,u,s,p).forEach(function(f){var h=Object.getOwnPropertyDescriptor(e.Document.prototype,f)||{enumerable:!0,writable:!0};try{Object.defineProperty(e.Document.prototype,f,{enumerable:h.enumerable,configurable:!0,get:function(){return t.proxyDocument[f]},set:void 0})}catch(y){W(y.message)}}),d.forEach(function(f){var h=Object.getOwnPropertyDescriptor(e.Document.prototype,f)||{enumerable:!0,writable:!0};try{Object.defineProperty(e.Document.prototype,f,{enumerable:h.enumerable,configurable:!0,get:function(){return(t.degrade?t:window).document[f]},set:h.writable||h.set?function(y){(t.degrade?t:window).document.removeEventListener(f,r.get(y)),(t.degrade?t:window).document.addEventListener(f,typeof y=="function"?y.bind(e.document):y),r.set(y,y.bind(e.document))}:void 0})}catch(y){W(y.message)}}),a.forEach(function(f){Object.defineProperty(e.document,f,{enumerable:!0,configurable:!0,get:function(){return t.proxyDocument[f]},set:void 0})}),H(e.__WUJIE.plugins,"documentPropertyOverride",e)}function di(e){var t=e.Node.prototype.getRootNode,r=e.Node.prototype.appendChild,n=e.Node.prototype.insertBefore,o=e.Node.prototype.removeChild;e.Node.prototype.getRootNode=function(i){var a=t.call(this,i);return a===e.__WUJIE.shadowRoot?e.document:a},e.Node.prototype.appendChild=function(i){var a=r.call(this,i);return K(i,e),a},e.Node.prototype.insertBefore=function(i,a){var l=n.call(this,i,a);return K(i,e),l},e.Node.prototype.removeChild=function(i){var a;try{a=o.call(this,i)}catch{var l;console.warn("Failed to removeChild: ".concat(i.nodeName.toLowerCase()," is not a child of ").concat(this.nodeName.toLowerCase(),", try again with parentNode attribute. ")),i.isConnected&&ne((l=i.parentNode)===null||l===void 0?void 0:l.removeChild)&&i.parentNode.removeChild(i)}return K(i,e),a}}function pi(e){ve(e,e.HTMLImageElement,"src"),ve(e,e.HTMLAnchorElement,"href"),ve(e,e.HTMLSourceElement,"src"),ve(e,e.HTMLLinkElement,"href"),ve(e,e.HTMLScriptElement,"src"),ve(e,e.HTMLMediaElement,"src")}function vi(e,t){var r=e.document,n=r.createElement("base"),o=X(e.location.href),i=X(t);n.setAttribute("href",i.protocol+"//"+i.host+o.pathname),r.head.appendChild(n)}function hi(e,t,r,n){var o=e.document,i=window.document.implementation.createHTMLDocument(""),a=o.importNode(i.documentElement,!0);o.documentElement?o.replaceChild(a,o.documentElement):o.appendChild(a),e.__WUJIE_RAW_DOCUMENT_HEAD__=o.head,e.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__=e.Document.prototype.querySelector,e.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__=e.Document.prototype.querySelectorAll,e.__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__=e.Document.prototype.createElement,e.__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__=e.Document.prototype.createTextNode,vi(e,t.url),ai(e,n,r),ii(e),t.degrade&&ci(e),mi(e),ui(e),fi(e),di(e),pi(e)}function cn(e,t){var r=e.contentWindow,n=r.document,o=Date.now()+5e3;return new Promise(function(i){function a(){setTimeout(function(){var l;try{l=r.document}catch{l=null}if((!l||l==n)&&Date.now()<o){a();return}if(t){var c=r.location.href;l.open(),l.close();var u=Date.now()+1e3,s=function(){if(Date.now()>u){Ei(),e.src=t.mainHostPath,cn(e,!1).then(i);return}r.location.href===c?setTimeout(s,1):i()};s();return}r.stop?r.stop():l.execCommand("Stop"),i()},1)}a()})}function K(e,t){var r=t.__WUJIE.proxyLocation;if(!e._hasPatch){try{Object.defineProperties(e,{baseURI:{configurable:!0,get:function(){return r.protocol+"//"+r.host+r.pathname},set:void 0},ownerDocument:{configurable:!0,get:function(){return t.document}},_hasPatch:{get:function(){return!0}}})}catch(n){console.warn(n)}H(t.__WUJIE.plugins,"patchElementHook",e,t)}}function mi(e){e.addEventListener("hashchange",function(){return ge(e)}),e.addEventListener("popstate",function(){ge(e)})}function B(e,t,r){var n=e,o=n.src,i=n.module,a=n.content,l=n.crossorigin,c=n.crossoriginType,u=n.async,s=n.attrs,p=n.callback,d=n.onload,f=t.document.createElement("script"),h=t.document.createElement("script"),y=t.__WUJIE,v=y.replace,m=y.plugins,g=y.proxyLocation,b=wo({plugins:m,replace:v}),E=b(a,o,Ye(g));if(s&&Object.keys(s).filter(function(w){return!Object.keys(e).includes(w)}).forEach(function(w){return f.setAttribute(w,String(s[w]))}),a){!t.__WUJIE.degrade&&!i&&s?.type!=="importmap"&&(E=`(function(window, self, global, location) {
      `.concat(E,`
}).bind(window.__WUJIE.proxy)(
  window.__WUJIE.proxy,
  window.__WUJIE.proxy,
  window.__WUJIE.proxy,
  window.__WUJIE.proxyLocation,
);`));var _=Object.getOwnPropertyDescriptor(f,"src");if(_!=null&&_.configurable||!_)try{Object.defineProperty(f,"src",{get:function(){return o||""}})}catch(w){console.warn(w)}}else o&&f.setAttribute("src",o),l&&f.setAttribute("crossorigin",c);i&&f.setAttribute("type","module"),f.textContent=E||"",h.textContent="if(window.__WUJIE.execQueue && window.__WUJIE.execQueue.length){ window.__WUJIE.execQueue.shift()()}";var R=fe.call(t.document,"head"),S=function(){return!u&&R.appendChild(h)},x=function(){d?.(),S()};if(/^<!DOCTYPE html/i.test(E))return Y(Se,e),S();r&&$r(f,Br(r));var P=!a&&o;P&&(f.onload=x,f.onerror=x),R.appendChild(f),p?.(t),H(m,"appendOrInsertElementHook",f,t,r),!P&&x()}function Be(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=window.document.createElement("iframe"),o="height:100%;width:100%";Qe(n,$e($e({},r),{},{src:e,style:[o,r.style].join(";")})),de(n,t)}var yi=(function(){var e="wujie:disableSandboxEmptyPageURL",t=!1;try{t=localStorage.getItem(e)==="true"}catch{}if(t||typeof URL>"u"||typeof URL.createObjectURL!="function")return[function(){return""},function(){}];var r="",n=function(){if(t)return"";if(r)return r;var a=new Blob(["<!DOCTYPE html><html><head></head><body></body></html>"],{type:"text/html"});return r=URL.createObjectURL(a),r},o=function(){t=!0;try{localStorage.setItem(e,"true")}catch{}};return[n,o]})(),ln=Te(yi,2),gi=ln[0],Ei=ln[1];function bi(e,t,r,n,o){var i=t&&t.src,a=!1;i||(i=gi(),a=!!i,i||(i=r));var l=window.document.createElement("iframe"),c=$e($e({style:"display: none"},t),{},V({src:i,name:e.id},Mr,""));Qe(l,c),window.document.body.appendChild(l);var u=l.contentWindow;return Sr(u,e,n),e.iframeReady=cn(l,a&&{mainHostPath:r}).then(function(){u.__WUJIE||Sr(u,e,n),hi(u,e,r,n),Bn(u.__WUJIE.id)||u.history.replaceState(null,"",r+o)}),l}function sn(e,t,r){var n=e.contentWindow.__WUJIE,o=n.shadowRoot,i=n.id,a=n.degrade,l=n.document,c=n.degradeAttrs,u=t;if(!/^http/.test(u)){var s=X(u);u=r+s.pathname+s.search+s.hash,s=null}if(e.contentWindow.__WUJIE.hrefFlag=!0,a){var p=fe.call(e.contentDocument,"body");de(l.documentElement,p),Be(window.decodeURIComponent(u),kr(i).parentElement,c)}else Be(u,o.host.parentElement,c);return ni(i,u),!0}function wi(e,t,r,n){var o=new Proxy(e.contentWindow,{get:function(c,u){if(u==="location")return c.__WUJIE.proxyLocation;if(u==="self"||u==="window"&&Object.getOwnPropertyDescriptor(window,"window").get)return c.__WUJIE.proxy;if(u==="__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__"||u==="__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__")return c[u];var s=Object.getOwnPropertyDescriptor(c,u);return s?.configurable===!1&&s?.writable===!1?c[u]:we(c,u)},set:function(c,u,s){return $n(c,s),c[u]=s,!0},has:function(c,u){return u in c}}),i=new Proxy({},{get:function(c,u){var s=window.document,p=e.contentWindow.__WUJIE,d=p.shadowRoot,f=p.proxyLocation;d||Gr();var h=e.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__,y=e.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__;if(u==="createElement"||u==="createTextNode")return new Proxy(s[u],{apply:function(x,P,w){var I=u==="createElement"?h:y,O=I.apply(e.contentDocument,w);return K(O,e.contentWindow),O}});if(u==="documentURI"||u==="URL")return f.href;if(u==="getElementsByTagName"||u==="getElementsByClassName"||u==="getElementsByName")return new Proxy(d.querySelectorAll,{apply:function(x,P,w){var I=w[0];if(P!==e.contentDocument)return P[u].apply(P,w);if(u==="getElementsByTagName"&&I==="script")return e.contentDocument.scripts;u==="getElementsByClassName"&&(I="."+I),u==="getElementsByName"&&(I='[name="'.concat(I,'"]'));var O;try{O=x.call(d,I)}catch{O=[]}return O}});if(u==="getElementById")return new Proxy(d.querySelector,{apply:function(x,P,w){if(P!==e.contentDocument){var I;return(I=P[u])===null||I===void 0?void 0:I.apply(P,w)}try{return x.call(d,'[id="'.concat(w[0],'"]'))||e.contentWindow.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__.call(e.contentWindow.document,"#".concat(w[0]))}catch{return W(Fn),null}}});if(u==="querySelector"||u==="querySelectorAll"){var v={querySelector:"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__",querySelectorAll:"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__"};return new Proxy(d[u],{apply:function(x,P,w){if(P!==e.contentDocument){var I;return(I=P[u])===null||I===void 0?void 0:I.apply(P,w)}return x.apply(d,w)||(w[0]==="base"?null:e.contentWindow[v[u]].call(e.contentWindow.document,w[0]))}})}if(u==="documentElement"||u==="scrollingElement")return d.firstElementChild;if(u==="forms")return d.querySelectorAll("form");if(u==="images")return d.querySelectorAll("img");if(u==="links")return d.querySelectorAll("a");var m=U.ownerProperties,g=U.shadowProperties,b=U.shadowMethods,E=U.documentProperties,_=U.documentMethods;if(m.concat(g).includes(u.toString()))return u==="activeElement"&&d.activeElement===null?d.body:d[u];if(b.includes(u.toString())){var R;return(R=we(d,u))!==null&&R!==void 0?R:we(s,u)}if(E.includes(u.toString()))return s[u];if(_.includes(u.toString()))return we(s,u)}}),a=new Proxy({},{get:function(c,u){var s=e.contentWindow.location;return u==="host"||u==="hostname"||u==="protocol"||u==="port"||u==="origin"?t[u]:u==="href"?s[u].replace(r,n):u==="reload"?(W(Dr),function(){return null}):u==="replace"?new Proxy(s[u],{apply:function(d,f,h){var y;return d.call(s,(y=h[0])===null||y===void 0?void 0:y.replace(n,r))}}):we(s,u)},set:function(c,u,s){return u==="href"?sn(e,s,n):(e.contentWindow.location[u]=s,!0)},ownKeys:function(){return Object.keys(e.contentWindow.location).filter(function(c){return c!=="reload"})},getOwnPropertyDescriptor:function(c,u){return{enumerable:!0,configurable:!0,value:this[u]}}});return{proxyWindow:o,proxyDocument:i,proxyLocation:a}}function _i(e,t,r,n){var o={},i=e.contentWindow.__WUJIE;Object.defineProperties(o,{createElement:{get:function(){return function(){for(var g=arguments.length,b=new Array(g),E=0;E<g;E++)b[E]=arguments[E];var _=e.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__.apply(e.contentDocument,b);return K(_,e.contentWindow),_}}},createTextNode:{get:function(){return function(){for(var g=arguments.length,b=new Array(g),E=0;E<g;E++)b[E]=arguments[E];var _=e.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__.apply(e.contentDocument,b);return K(_,e.contentWindow),_}}},documentURI:{get:function(){return i.proxyLocation.href}},URL:{get:function(){return i.proxyLocation.href}},getElementsByTagName:{get:function(){return function(){var g=arguments.length<=0?void 0:arguments[0];return g==="script"?e.contentDocument.scripts:i.document.getElementsByTagName(g)}}},getElementById:{get:function(){return function(){var g=arguments.length<=0?void 0:arguments[0];return i.document.getElementById(g)||e.contentWindow.__WUJIE_RAW_DOCUMENT_HEAD__.querySelector("#".concat(g))}}}});var a=U.modifyLocalProperties,l=U.modifyProperties,c=U.ownerProperties,u=U.shadowProperties,s=U.shadowMethods,p=U.documentProperties,d=U.documentMethods;l.filter(function(m){return!a.includes(m)}).concat(c,u,s,p,d).forEach(function(m){Object.defineProperty(o,m,{get:function(){var b,E=(b=i.document)===null||b===void 0?void 0:b[m];return ke(E)?E.bind(i.document):E}})});var f={},h=e.contentWindow.location,y=Object.keys(h),v=["host","hostname","port","protocol","port"];return v.forEach(function(m){f[m]=t[m]}),Object.defineProperties(f,{href:{get:function(){return h.href.replace(r,n)},set:function(g){sn(e,g,n)}},reload:{get:function(){return W(Dr),function(){return null}}}}),y.filter(function(m){return!v.concat(["href","reload"]).includes(m)}).forEach(function(m){Object.defineProperty(f,m,{get:function(){return ke(h[m])?h[m].bind(h):h[m]}})}),{proxyDocument:o,proxyLocation:f}}function Pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Or(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pr(Object(r),!0).forEach(function(n){V(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var me=(function(e){if((e=window.__WUJIE_INJECT)!==null&&e!==void 0&&e.appEventObjMap)return window.__WUJIE_INJECT.appEventObjMap;var t=window.__POWERED_BY_WUJIE__?window.__WUJIE.inject.appEventObjMap:new Map;return window.__WUJIE_INJECT=Or(Or({},window.__WUJIE_INJECT),{},{appEventObjMap:t}),t})(),fn=(function(){function e(t){Lt(this,e),this.id=t,this.$clear(),me.get(this.id)||me.set(this.id,{}),this.eventObj=me.get(this.id)}return Ct(e,[{key:"$on",value:function(r,n){var o=this.eventObj[r];return o?(o.includes(n)||o.push(n),this):(this.eventObj[r]=[n],this)}},{key:"$onAll",value:function(r){return this.$on(je,r)}},{key:"$once",value:function(r,n){var o=function(){this.$off(r,o),n.apply(void 0,arguments)}.bind(this);this.$on(r,o)}},{key:"$off",value:function(r,n){var o=this.eventObj[r];if(!r||!o||!o.length)return W("".concat(r," ").concat(Gt)),this;for(var i,a=o.length;a--;)if(i=o[a],i===n){o.splice(a,1);break}return this}},{key:"$offAll",value:function(r){return this.$off(je,r)}},{key:"$emit",value:function(r){var n=[],o=[];if(me.forEach(function(h){h[r]&&(n=n.concat(h[r])),h[je]&&(o=o.concat(h[je]))}),!r||n.length===0&&o.length===0)W("".concat(r," ").concat(Gt));else try{for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];for(var c=0,u=n.length;c<u;c++){var s;(s=n)[c].apply(s,a)}for(var p=0,d=o.length;p<d;p++){var f;(f=o)[p].apply(f,[r].concat(a))}}catch(h){Y(h)}return this}},{key:"$clear",value:function(){var r,n=(r=me.get(this.id))!==null&&r!==void 0?r:{},o=Object.keys(n);return o.forEach(function(i){return delete n[i]}),this}}])})();function Tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tr(Object(r),!0).forEach(function(n){V(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tr(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Si=(function(){function e(t){Lt(this,e),V(this,"elementEventCacheMap",new WeakMap),window.__POWERED_BY_WUJIE__?this.inject=window.__WUJIE.inject:this.inject={idToSandboxMap:Z,appEventObjMap:me,mainHostPath:window.location.protocol+"//"+window.location.host};var r=t.name,n=t.url,o=t.attrs,i=t.fiber,a=t.degradeAttrs,l=t.degrade,c=t.lifecycles,u=t.plugins;this.id=r,this.fiber=i,this.degrade=l||!Wr,this.bus=new fn(this.id),this.url=n,this.degradeAttrs=a,this.provide={bus:this.bus},this.styleSheetElements=[],this.execQueue=[],this.lifecycles=c,this.plugins=Yr(u),this.iframeAddEventListeners=t.iframeAddEventListeners,this.iframeOnEvents=t.iframeOnEvents;var s=Fr(n),p=s.urlElement,d=s.appHostPath,f=s.appRoutePath,h=this.inject.mainHostPath;if(this.iframe=bi(this,o,h,d,f),this.degrade){var y=_i(this.iframe,p,h,d),v=y.proxyDocument,m=y.proxyLocation;this.proxyDocument=v,this.proxyLocation=m}else{var g=wi(this.iframe,p,h,d),b=g.proxyWindow,E=g.proxyDocument,_=g.proxyLocation;this.proxy=b,this.proxyDocument=E,this.proxyLocation=_}this.provide.location=this.proxyLocation,Mo(this.id,this)}return Ct(e,[{key:"active",value:(function(){var t=Q(A.mark(function n(o){var i=this,a,l,c,u,s,p,d,f,h,y,v,m,g,b,E,_;return A.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return a=o.sync,l=o.url,c=o.el,u=o.template,s=o.props,p=o.alive,d=o.prefix,f=o.fetch,h=o.replace,this.url=l,this.sync=a,this.alive=p,this.hrefFlag=!1,this.prefix=d??this.prefix,this.replace=h??this.replace,this.provide.props=s??this.provide.props,this.activeFlag=!0,S.next=11,this.iframeReady;case 11:if(y=this.iframe.contentWindow,v=f?function(x,P){return f(typeof x=="string"?oe(x,i.proxyLocation.href):x,P)}:this.fetch,v&&(y.fetch=v,this.fetch=v),this.execFlag&&this.alive||ti(y),ge(y),this.template=u??this.template,!this.degrade){S.next=38;break}if(m=fe.call(y.document,"body"),g=rn(this.id,c??m,this.degradeAttrs),b=g.iframe,E=g.container,this.el=E,c&&ce(m),un(b.contentWindow,y),b.contentWindow.onunload=function(){i.unmount()},!this.document){S.next=34;break}if(!this.alive){S.next=29;break}b.contentDocument.replaceChild(this.document.documentElement,b.contentDocument.documentElement),li(b.contentDocument.documentElement,y),S.next=32;break;case 29:return S.next=31,br(b.contentDocument,this.iframe.contentWindow,this.template);case 31:si(this.document.documentElement,b.contentDocument.documentElement,y);case 32:S.next=36;break;case 34:return S.next=36,br(b.contentDocument,this.iframe.contentWindow,this.template);case 36:return this.document=b.contentDocument,S.abrupt("return");case 38:if(!this.shadowRoot){S.next=44;break}if(this.el=de(this.shadowRoot.host,c),!this.alive){S.next=42;break}return S.abrupt("return");case 42:S.next=46;break;case 44:_=fe.call(y.document,"body"),this.el=de(Vo(this.id),c??_);case 46:return S.next=48,Zo(this.shadowRoot,y,this.template);case 48:this.patchCssRules(),this.provide.shadowRoot=this.shadowRoot;case 50:case"end":return S.stop()}},n,this)}));function r(n){return t.apply(this,arguments)}return r})()},{key:"requestIdleCallback",value:function(r){var n=this;return Hr(function(){n.iframe&&r.apply(n)})}},{key:"start",value:(function(){var t=Q(A.mark(function n(o){var i=this,a,l,c,u,s,p,d,f,h;return A.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return this.execFlag=!0,v.next=3,o();case 3:if(a=v.sent,this.iframe){v.next=6;break}return v.abrupt("return");case 6:return l=this.iframe.contentWindow,l.__POWERED_BY_WUJIE__=!0,c=Fe("jsBeforeLoaders",this.plugins),u=Fe("jsAfterLoaders",this.plugins),s=[],p=[],d=[],a.forEach(function(m){m.defer?d.push(m):m.async?p.push(m):s.push(m)}),c.forEach(function(m){i.execQueue.push(function(){return i.fiber?i.requestIdleCallback(function(){return B(m,l)}):B(m,l)})}),s.concat(d).forEach(function(m){i.execQueue.push(function(){return m.contentPromise.then(function(g){return i.fiber?i.requestIdleCallback(function(){return B(ee(ee({},m),{},{content:g}),l)}):B(ee(ee({},m),{},{content:g}),l)})})}),p.forEach(function(m){m.contentPromise.then(function(g){i.fiber?i.requestIdleCallback(function(){return B(ee(ee({},m),{},{content:g}),l)}):B(ee(ee({},m),{},{content:g}),l)})}),this.execQueue.push(this.fiber?function(){return i.requestIdleCallback(function(){return i.mount()})}:function(){return i.mount()}),f=function(){var g;Ae(l.document,"DOMContentLoaded"),Ae(l,"DOMContentLoaded"),(g=i.execQueue.shift())===null||g===void 0||g()},this.execQueue.push(this.fiber?function(){return i.requestIdleCallback(f)}:f),u.forEach(function(m){i.execQueue.push(function(){return i.fiber?i.requestIdleCallback(function(){return B(m,l)}):B(m,l)})}),h=function(){var g;Ae(l.document,"readystatechange"),Ae(l,"load"),(g=i.execQueue.shift())===null||g===void 0||g()},this.execQueue.push(this.fiber?function(){return i.requestIdleCallback(h)}:h),(this.alive||!ne(this.iframe.contentWindow.__WUJIE_UNMOUNT))&&wr(this.el),this.execQueue.shift()(),v.abrupt("return",new Promise(function(m){i.execQueue.push(function(){var g;m(),(g=i.execQueue.shift())===null||g===void 0||g()})}));case 26:case"end":return v.stop()}},n,this)}));function r(n){return t.apply(this,arguments)}return r})()},{key:"mount",value:function(){var r;if(!this.mountFlag){if(ne(this.iframe.contentWindow.__WUJIE_MOUNT)){var n,o,i,a;wr(this.el),(n=this.lifecycles)===null||n===void 0||(o=n.beforeMount)===null||o===void 0||o.call(n,this.iframe.contentWindow),this.iframe.contentWindow.__WUJIE_MOUNT(),(i=this.lifecycles)===null||i===void 0||(a=i.afterMount)===null||a===void 0||a.call(i,this.iframe.contentWindow),this.mountFlag=!0}if(this.alive){var l,c;(l=this.lifecycles)===null||l===void 0||(c=l.activated)===null||c===void 0||c.call(l,this.iframe.contentWindow)}(r=this.execQueue.shift())===null||r===void 0||r()}}},{key:"unmount",value:(function(){var t=Q(A.mark(function n(){var o,i,a,l,c,u,s;return A.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this.activeFlag=!1,ri(),this.alive&&((o=this.lifecycles)===null||o===void 0||(i=o.deactivated)===null||i===void 0||i.call(o,this.iframe.contentWindow)),this.mountFlag){d.next=5;break}return d.abrupt("return");case 5:if(!(ne(this.iframe.contentWindow.__WUJIE_UNMOUNT)&&!this.alive&&!this.hrefFlag)){d.next=15;break}return(a=this.lifecycles)===null||a===void 0||(l=a.beforeUnmount)===null||l===void 0||l.call(a,this.iframe.contentWindow),d.next=9,this.iframe.contentWindow.__WUJIE_UNMOUNT();case 9:(c=this.lifecycles)===null||c===void 0||(u=c.afterUnmount)===null||u===void 0||u.call(c,this.iframe.contentWindow),this.mountFlag=!1,(s=this.bus)===null||s===void 0||s.$clear(),this.degrade||(ce(this.shadowRoot),yr(this.head),yr(this.body)),ce(this.head),ce(this.body);case 15:case"end":return d.stop()}},n,this)}));function r(){return t.apply(this,arguments)}return r})()},{key:"destroy",value:(function(){var t=Q(A.mark(function n(){var o,i;return A.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.unmount();case 2:this.bus.$clear(),this.shadowRoot=null,this.proxy=null,this.proxyDocument=null,this.proxyLocation=null,this.execQueue=null,this.provide=null,this.degradeAttrs=null,this.styleSheetElements=null,this.bus=null,this.replace=null,this.fetch=null,this.execFlag=null,this.mountFlag=null,this.hrefFlag=null,this.document=null,this.head=null,this.body=null,this.elementEventCacheMap=null,this.lifecycles=null,this.plugins=null,this.provide=null,this.inject=null,this.execQueue=null,this.prefix=null,this.iframeAddEventListeners=null,this.iframeOnEvents=null,this.el&&(ce(this.el),this.el=null),this.iframe&&(i=this.iframe.contentWindow,i!=null&&i.__WUJIE_EVENTLISTENER__&&i.__WUJIE_EVENTLISTENER__.forEach(function(c){i.removeEventListener(c.type,c.listener,c.options)}),(o=this.iframe.parentNode)===null||o===void 0||o.removeChild(this.iframe),this.iframe=null),Do(this.id);case 32:case"end":return l.stop()}},n,this)}));function r(){return t.apply(this,arguments)}return r})()},{key:"rebuildStyleSheets",value:function(){var r=this;this.styleSheetElements&&this.styleSheetElements.length&&this.styleSheetElements.forEach(function(n){zr.call(r.degrade?r.document.head:r.shadowRoot.head,n)}),this.patchCssRules()}},{key:"patchCssRules",value:function(){if(!this.degrade&&!this.shadowRoot.host.hasAttribute(Bt)){var r=an(Array.from(this.iframe.contentDocument.querySelectorAll("style")).map(function(a){return a.sheet})),n=Te(r,2),o=n[0],i=n[1];o&&(this.shadowRoot.head.appendChild(o),this.styleSheetElements.push(o)),i&&this.shadowRoot.host.appendChild(i),(o||i)&&this.shadowRoot.host.setAttribute(Bt,"")}}}])})();new fn(Date.now().toString());window.__WUJIE&&!window.__POWERED_BY_WUJIE__&&Gr();oi();Xo();Wr||W(Jn);function Ii(e){return Ot.apply(this,arguments)}function Ot(){return Ot=Q(A.mark(function e(t){var r,n,o,i,a,l,c,u,s,p,d,f,h,y,v,m,g,b,E,_,R,S,x,P,w,I,O,q,J,N,k,L,C,M,j,D,$,pe,Re,xe,Le;return A.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(o=ie(t.name),i=Uo(t.name),a=Xn(t,i),l=a.name,c=a.url,u=a.html,s=a.replace,p=a.fetch,d=a.props,f=a.attrs,h=a.degradeAttrs,y=a.fiber,v=a.alive,m=a.degrade,g=a.sync,b=a.prefix,E=a.el,_=a.loading,R=a.plugins,S=a.lifecycles,x=a.iframeAddEventListeners,P=a.iframeOnEvents,!o){T.next=41;break}if(o.plugins=Yr(R),o.lifecycles=S,w=o.iframe.contentWindow,!o.preload){T.next=11;break}return T.next=11,o.preload;case 11:if(!v){T.next=26;break}return T.next=14,o.active({url:c,sync:g,prefix:b,el:E,props:d,alive:v,fetch:p,replace:s});case 14:if(o.execFlag){T.next=22;break}return(q=o.lifecycles)===null||q===void 0||(J=q.beforeLoad)===null||J===void 0||J.call(q,o.iframe.contentWindow),T.next=18,nr({url:c,html:u,opts:{fetch:p||window.fetch,plugins:o.plugins,loadError:o.lifecycles.loadError,fiber:y}});case 18:return N=T.sent,k=N.getExternalScripts,T.next=22,o.start(k);case 22:return(I=o.lifecycles)===null||I===void 0||(O=I.activated)===null||O===void 0||O.call(I,o.iframe.contentWindow),T.abrupt("return",function(){return o.destroy()});case 26:if(!ne(w.__WUJIE_MOUNT)){T.next=39;break}return T.next=29,o.unmount();case 29:return T.next=31,o.active({url:c,sync:g,prefix:b,el:E,props:d,alive:v,fetch:p,replace:s});case 31:return o.rebuildStyleSheets(),(L=o.lifecycles)===null||L===void 0||(C=L.beforeMount)===null||C===void 0||C.call(L,o.iframe.contentWindow),w.__WUJIE_MOUNT(),(M=o.lifecycles)===null||M===void 0||(j=M.afterMount)===null||j===void 0||j.call(M,o.iframe.contentWindow),o.mountFlag=!0,T.abrupt("return",function(){return o.destroy()});case 39:return T.next=41,o.destroy();case 41:return ei(E,_),D=new Si({name:l,url:c,attrs:f,degradeAttrs:h,fiber:y,degrade:m,plugins:R,lifecycles:S,iframeAddEventListeners:x,iframeOnEvents:P}),(r=D.lifecycles)===null||r===void 0||(n=r.beforeLoad)===null||n===void 0||n.call(r,D.iframe.contentWindow),T.next=46,nr({url:c,html:u,opts:{fetch:p||window.fetch,plugins:D.plugins,loadError:D.lifecycles.loadError,fiber:y}});case 46:return $=T.sent,pe=$.template,Re=$.getExternalScripts,xe=$.getExternalStyleSheets,T.next=52,Po(D,pe,xe);case 52:return Le=T.sent,T.next=55,D.active({url:c,sync:g,prefix:b,template:Le,el:E,props:d,alive:v,fetch:p,replace:s});case 55:return T.next=57,D.start(Re);case 57:return T.abrupt("return",function(){return D.destroy()});case 58:case"end":return T.stop()}},e)})),Ot.apply(this,arguments)}function Pi(e){var t=ie(e);t&&t.destroy()}function Oi(e){const t=document.querySelector(`iframe[name="${e}"]`);if(!t?.contentWindow)return;const r=t.contentWindow,n=r.__WUJIE;if(!n?.shadowRoot||n.degrade)return;const{shadowRoot:o}=n,i={configurable:!0,enumerable:!0,get(){return o.adoptedStyleSheets},set(a){o.adoptedStyleSheets=Array.isArray(a)?[...a]:a}};try{Object.defineProperty(r.Document.prototype,"adoptedStyleSheets",i)}catch{}try{Object.defineProperty(r.document,"adoptedStyleSheets",i)}catch{}}function Ti(e,t){const n=new DOMParser().parseFromString(e,"text/html");return n.querySelectorAll("[href], [src]").forEach(i=>{if(i.hasAttribute("href")){const a=i.getAttribute("href");a.startsWith("/")&&!a.startsWith("//")&&i.setAttribute("href",new URL(a.slice(1),t).href)}if(i.hasAttribute("src")){const a=i.getAttribute("src");a.startsWith("/")&&!a.startsWith("//")&&i.setAttribute("src",new URL(a.slice(1),t).href)}}),n.documentElement.outerHTML}const vt="https://placeholder.local/";function Ri(e){const t=new URL(e),r=t.href;return{fetch:(n,o)=>{const i=new Request(n,o);let a=new URL(i.url,vt);a.origin===t.origin&&a.href.startsWith(r)===!1&&(a=new URL(a.href.replace(a.origin,""),vt));const l=a.href.replace(vt,r);return window.fetch(new Request(l,i))},plugins:[{htmlLoader:n=>Ti(n,e)}]}}class xi{constructor(t,r){this.appId=t,this.container=r,this.element=r}type="wujie";element;destroyed=!1;destroy(){this.destroyed||(this.destroyed=!0,Pi(this.appId),this.container.remove())}moveToBackground(){this.destroyed||(this.container.style.visibility="hidden",this.container.style.pointerEvents="none")}moveToForeground(){this.destroyed||(this.container.style.visibility="visible",this.container.style.pointerEvents="auto")}isConnected(){return this.container.isConnected&&!this.destroyed}getIframe(){return document.querySelector(`iframe[name="${this.appId}"]`)}}class Ai{type="wujie";async create(t){const{appId:r,url:n,mountTarget:o,contextParams:i,onLoad:a,wujieConfig:l,permissionsPolicyAllow:c}=t,u=document.createElement("div");u.id=`miniapp-wujie-${r}`,u.className="size-full *:size-full *:block *:overflow-auto",u.style.display="none",o.appendChild(u);const s=new URL(n,window.location.origin);i&&Object.entries(i).forEach(([d,f])=>{s.searchParams.set(d,f)});const p={name:r,url:s.toString(),el:u,alive:l?.alive??!0,fiber:l?.fiber??!0,sync:l?.sync??!1,afterMount:()=>{a?.()}};if(c&&(p.attrs={allow:c},p.degradeAttrs={allow:c}),l?.rewriteAbsolutePaths){const d=Ri(s.toString());p.fetch=d.fetch,p.plugins=d.plugins}return await Ii(p),Oi(r),new xi(r,u)}}export{Ci as I,Ai as W,ji as c};
