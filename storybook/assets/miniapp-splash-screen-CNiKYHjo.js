import{r as l,j as n}from"./iframe-CMX6GvDx.js";import{c as u}from"./utils-4perknFd.js";import{m as S}from"./proxy-B5s9SxoY.js";const b="_splashScreen_hwt9w_8",q="_glowLayer_hwt9w_30",j="_glowPrimary_hwt9w_37",k="_glowSecondary_hwt9w_48",L="_glowTertiary_hwt9w_59",N="_content_hwt9w_102",C="_appIcon_hwt9w_112",M="_spinner_hwt9w_129",a={splashScreen:b,glowLayer:q,glowPrimary:j,glowSecondary:k,glowTertiary:L,content:N,appIcon:C,spinner:M};function E(t){if(t===void 0)return 280;if(typeof t=="number")return i(t);const e=t.trim().toLowerCase();if(e.startsWith("oklch")){const r=e.match(/oklch\s*\(\s*[\d.]+\s+[\d.]+\s+([\d.]+)/);if(r?.[1])return i(parseFloat(r[1]))}if(e.startsWith("hsl")){const r=e.match(/hsl\s*\(\s*([\d.]+)/);if(r?.[1])return i(parseFloat(r[1]))}if(e.startsWith("#"))return P(e);if(e.startsWith("rgb")){const r=e.match(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/);if(r?.[1]&&r[2]&&r[3])return f(parseInt(r[1]),parseInt(r[2]),parseInt(r[3]))}return 280}function i(t){return(t%360+360)%360}function P(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return!e?.[1]||!e[2]||!e[3]?280:f(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16))}function f(t,e,r){t/=255,e/=255,r/=255;const c=Math.max(t,e,r),d=Math.min(t,e,r),s=c-d;if(s===0)return 0;let o=0;switch(c){case t:o=((e-r)/s+(e<r?6:0))/6;break;case e:o=((r-t)/s+2)/6;break;case r:o=((t-e)/s+4)/6;break}return Math.round(o*360)}function H(t){return[i(t),i(t+30),i(t-30)]}function V({appId:t,app:e,visible:r,animating:c=!0,onClose:d,iconLayoutId:s,showIcon:o=!0,showSpinner:m=!0,className:y}){const[g,p]=l.useState(!1),[w,h]=l.useState(!1),[_,x,v]=l.useMemo(()=>{const I=E(e.themeColor);return H(I)},[e.themeColor]);l.useEffect(()=>{p(!1),h(!1)},[e.icon]);const T={"--splash-hue-primary":_,"--splash-hue-secondary":x,"--splash-hue-tertiary":v};return n.jsxs("div",{className:u(a.splashScreen,y),style:T,"data-app-id":t,"data-visible":r,"data-animating":c,"data-testid":"miniapp-splash-screen",role:"status","aria-label":`${e.name} 正在加载`,"aria-hidden":!r,children:[n.jsx("div",{className:u(a.glowLayer,a.glowPrimary)}),n.jsx("div",{className:u(a.glowLayer,a.glowSecondary)}),n.jsx("div",{className:u(a.glowLayer,a.glowTertiary)}),(o||m)&&n.jsxs("div",{className:a.content,children:[o&&n.jsx(S.div,{...s?{layoutId:s,"data-layoutid":s}:{},className:a.appIcon,children:!w&&n.jsx("img",{src:e.icon,alt:e.name,onLoad:()=>p(!0),onError:()=>h(!0),style:{opacity:g?1:0}})}),m&&n.jsx("div",{className:a.spinner,"aria-hidden":"true"})]})]})}V.__docgenInfo={description:"",methods:[],displayName:"MiniappSplashScreen",props:{appId:{required:!1,tsType:{name:"string"},description:"可选：用于埋点/调试/定位元素"},app:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  name: string;
  icon: string;
  /** 主题色，支持 hex、rgb、oklch 或直接传 hue 数值 */
  themeColor?: string | number;
}`,signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"themeColor",value:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}],required:!1},description:"主题色，支持 hex、rgb、oklch 或直接传 hue 数值"}]}},description:"应用信息"},visible:{required:!0,tsType:{name:"boolean"},description:"是否可见"},animating:{required:!1,tsType:{name:"boolean"},description:"是否播放呼吸动画",defaultValue:{value:"true",computed:!1}},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"关闭回调"},iconLayoutId:{required:!1,tsType:{name:"string"},description:"可选：共享元素动画 layoutId（用于 icon <-> splash.icon）"},showIcon:{required:!1,tsType:{name:"boolean"},description:"是否渲染图标（默认 true）",defaultValue:{value:"true",computed:!1}},showSpinner:{required:!1,tsType:{name:"boolean"},description:"是否渲染加载指示器（默认 true）",defaultValue:{value:"true",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"自定义类名"}}};export{V as M};
