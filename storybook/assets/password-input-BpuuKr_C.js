import{r as o,j as e}from"./iframe-Cctxta_P.js";import{c as l}from"./utils-CDN07tui.js";import{u as k}from"./useTranslation-Cyi9axMr.js";import{I as S}from"./IconEyeOff-CeQs-_9n.js";import{I}from"./IconEye-B6IHLGK9.js";function P(t){if(!t||t.length<6)return"weak";let a=0;return t.length>=8&&a++,t.length>=12&&a++,/[a-z]/.test(t)&&/[A-Z]/.test(t)&&a++,/\d/.test(t)&&a++,/[^a-zA-Z0-9]/.test(t)&&a++,a>=4?"strong":a>=2?"medium":"weak"}const C={weak:{label:"弱",color:"bg-destructive",width:"w-1/3"},medium:{label:"中",color:"bg-yellow-500",width:"w-2/3"},strong:{label:"强",color:"bg-secondary",width:"w-full"}},g=o.forwardRef(({className:t,showStrength:a=!1,onStrengthChange:f,onChange:h,value:d,"data-testid":p,...x},b)=>{const[r,w]=o.useState(!1),[s,v]=o.useState("weak"),[y,j]=o.useState(!!d),{t:n}=k("common"),N=u=>{const c=u.target.value;if(j(!!c),a){const m=P(c);v(m),f?.(m)}h?.(u)},i=C[s];return e.jsxs("div",{className:"@container space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:b,type:r?"text":"password","data-testid":p,className:l("border-input bg-background flex h-11 w-full rounded-lg border px-3 py-2 pr-10 text-base","ring-offset-background placeholder:text-muted-foreground","focus-visible:ring-ring focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none","disabled:cursor-not-allowed disabled:opacity-50",t),value:d,onChange:N,...x}),e.jsx("button",{type:"button",onClick:()=>w(!r),className:"text-muted-foreground hover:text-foreground absolute top-1/2 right-3 -translate-y-1/2 transition-colors",tabIndex:-1,"aria-label":n(r?"a11y.hidePassword":"a11y.showPassword"),children:r?e.jsx(S,{className:"size-5"}):e.jsx(I,{className:"size-5"})})]}),a&&y&&e.jsxs("div",{className:"space-y-1","aria-live":"polite","aria-atomic":"true",children:[e.jsx("div",{className:"bg-muted h-1 w-full overflow-hidden rounded-full",role:"progressbar","aria-valuenow":s==="weak"?33:s==="medium"?66:100,"aria-valuemin":0,"aria-valuemax":100,children:e.jsx("div",{className:l("h-full transition-all duration-300",i.color,i.width)})}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:[e.jsx("span",{className:"sr-only",children:n("a11y.passwordStrength",{strength:i.label})}),e.jsxs("span",{"aria-hidden":"true",children:[n("passwordStrength"),"：",e.jsx("span",{className:l(s==="weak"&&"text-destructive",s==="medium"&&"text-yellow-500",s==="strong"&&"text-green-500"),children:i.label})]})]})]})]})});g.displayName="PasswordInput";g.__docgenInfo={description:"",methods:[],displayName:"PasswordInput",props:{showStrength:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onStrengthChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(strength: PasswordStrength) => void",signature:{arguments:[{type:{name:"union",raw:"'weak' | 'medium' | 'strong'",elements:[{name:"literal",value:"'weak'"},{name:"literal",value:"'medium'"},{name:"literal",value:"'strong'"}]},name:"strength"}],return:{name:"void"}}},description:""},"data-testid":{required:!1,tsType:{name:"string"},description:""}},composes:["Omit"]};export{g as P};
