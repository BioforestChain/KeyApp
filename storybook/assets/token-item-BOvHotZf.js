import{r as _,j as a,R as b,x as Ee,y as oe}from"./iframe-CyYNzbJL.js";import{c as w}from"./utils-4perknFd.js";import"./wallet-card-BplLemu5.js";import"./wallet-selector-ChHc9T9A.js";import"./address-display-ChXM8Y2Y.js";import{C as Y}from"./chain-icon-Dd7z7LzY.js";import{c as he,I as Re}from"./web-CSjpY_gv.js";import{u as Q}from"./useTranslation-BB9FXUKP.js";import{I as be}from"./IconCheck-Du9Dn1VL.js";import{T as Ae}from"./token-icon-CmS51FQR.js";import{S as Ce,E as ye,L as xe}from"./LoadingSpinner-DU1XDDLV.js";import{A as re}from"./amount-display-C0HTHpwz.js";import{a as ve}from"./animated-number-Bl9YlNyY.js";import"./time-display-Pyfc2YB1.js";import{S as ie,E as Ne}from"./service-status-alert-CEiU1wAE.js";import{I as Le,a as Se,b as Ie,c as we,d as se,e as Me}from"./item-Br3_qjCR.js";import{D as ke,a as Be,I as De,b as Ue,c as je}from"./dropdown-menu-BUkl7wPj.js";import"./user-profile-Bbet2Vmt.js";import"./service-BqCsOJfx.js";import{d as I}from"./breakpoint-DQ_qwb34.js";import{b as C,o as O,s as o,c as S,n as k,_ as h,a as H,r as M,u as Pe,g as Ve}from"./schemas-CO8_C8zP.js";import"./web-DItVtpha.js";import"./index-D0E7N0oa.js";import"./derivation-CuS4YWMX.js";import{A as Fe}from"./amount-BQsqQYGO.js";import"./notification-D6r8klB-.js";import"./index-Ck5wsex-.js";import{B as He}from"./button-BFbLYQEm.js";import{T as qe}from"./transaction-list-BF7y18ar.js";import{S as Ge}from"./swipeable-tabs-DlnlBcRM.js";function Je(e,n){const t=n==="sm"?16:20;if(e.length<=t)return e;const r=n==="sm"?6:8,s=n==="sm"?4:6;return`${e.slice(0,r)}...${e.slice(-s)}`}function We({chainId:e,chainIcon:n,chainSymbol:t,address:r,copyable:s=!0,onCopy:i,size:u="md",className:c}){const{t:l}=Q("common"),[d,p]=_.useState(!1),m=_.useCallback(async()=>{try{await he.write({text:r}),p(!0),i?.(),setTimeout(()=>p(!1),2e3)}catch{}},[r,i]),f=u==="sm"?"sm":"md",T=Je(r,u);return s?a.jsxs("button",{type:"button",onClick:m,className:w("flex items-center gap-2 transition-colors","hover:text-primary focus-visible:ring-ring rounded focus:outline-none focus-visible:ring-2",c),title:r,"aria-label":d?l("copiedToClipboard"):`${l("copy")} ${r}`,children:[a.jsx(Y,{chainId:e,iconUrl:n,symbol:t,size:f}),a.jsx("span",{className:w("font-mono",u==="sm"?"text-xs":"text-sm"),children:T}),d?a.jsx(be,{className:"size-4 shrink-0 text-green-500","aria-hidden":"true"}):a.jsx(Re,{className:"size-4 shrink-0 text-muted-foreground","aria-hidden":"true"})]}):a.jsxs("div",{className:w("flex items-center gap-2",c),children:[a.jsx(Y,{chainId:e,iconUrl:n,symbol:t,size:f}),a.jsx("span",{className:w("font-mono",u==="sm"?"text-xs":"text-sm"),title:r,children:T})]})}We.__docgenInfo={description:`链地址显示组件

组合显示链图标和地址，支持复制功能
图标自动从 ChainIconProvider context 获取

@example
// 自动获取图标（需要 ChainIconProvider）
<ChainAddressDisplay chainId="ethereum" address="0x1234...5678" />

// 手动指定图标
<ChainAddressDisplay chainId="ethereum" chainIcon="/custom.svg" address="0x1234...5678" />`,methods:[],displayName:"ChainAddressDisplay",props:{chainId:{required:!0,tsType:{name:"string"},description:"链 ID（用于从 ChainIconProvider 自动获取图标）"},chainIcon:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"链图标 URL（可选，覆盖 context）"},chainSymbol:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"链符号（可选，用于 fallback）"},address:{required:!0,tsType:{name:"string"},description:"地址"},copyable:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"是否可复制",defaultValue:{value:"true",computed:!1}},onCopy:{required:!1,tsType:{name:"union",raw:"(() => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"复制回调"},size:{required:!1,tsType:{name:"union",raw:"'sm' | 'md' | undefined",elements:[{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"undefined"}]},description:"尺寸",defaultValue:{value:"'md'",computed:!1}},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"额外样式"}}};function ue({tokens:e,loading:n=!1,refreshing:t=!1,showChange:r=!1,onTokenClick:s,emptyTitle:i="暂无资产",emptyDescription:u="转入资产后将显示在这里",emptyAction:c,className:l,testId:d,renderActions:p,mainAssetSymbol:m,onContextMenu:f,menuItems:T}){return n?a.jsx(Ce,{count:3,...l&&{className:l}}):e.length===0?a.jsx(ye,{...d&&{testId:`${d}-empty`},title:i,description:u,...c&&{action:c},icon:a.jsx("svg",{className:"size-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),...l&&{className:l}}):a.jsx("div",{...d&&{"data-testid":d},className:w("space-y-1",l),children:e.map(g=>a.jsx(_e,{token:g,testId:d?`token-item-${g.chain}-${g.symbol}`:void 0,showChange:r,loading:t,renderActions:p,mainAssetSymbol:m,onContextMenu:f,menuItems:T,...s&&{onClick:()=>s(g)}},g.contractAddress??`${g.chain}-${g.symbol}-native`))})}ue.__docgenInfo={description:"",methods:[],displayName:"TokenList",props:{tokens:{required:!0,tsType:{name:"Array",elements:[{name:"TokenInfo"}],raw:"TokenInfo[]"},description:""},loading:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"Show skeleton loading state (no tokens yet)",defaultValue:{value:"false",computed:!1}},refreshing:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"Show balance refresh animation (tokens exist but refreshing)",defaultValue:{value:"false",computed:!1}},showChange:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"",defaultValue:{value:"false",computed:!1}},onTokenClick:{required:!1,tsType:{name:"union",raw:"((token: TokenInfo) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},emptyTitle:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"",defaultValue:{value:"'暂无资产'",computed:!1}},emptyDescription:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"",defaultValue:{value:"'转入资产后将显示在这里'",computed:!1}},emptyAction:{required:!1,tsType:{name:"union",raw:"React.ReactNode | undefined",elements:[{name:"ReactReactNode",raw:"React.ReactNode"},{name:"undefined"}]},description:""},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},testId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},renderActions:{required:!1,tsType:{name:"union",raw:"((token: TokenInfo, context: TokenItemContext) => React.ReactNode) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"Render prop for custom actions per token item (deprecated: use menuItems)"},mainAssetSymbol:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Main asset symbol for the chain (used by renderActions context)"},onContextMenu:{required:!1,tsType:{name:"union",raw:"((e: React.MouseEvent, token: TokenInfo) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"Context menu handler for token items (matches TokenItem signature)"},menuItems:{required:!1,tsType:{name:"union",raw:"((token: TokenInfo, context: TokenItemContext) => TokenMenuItem[]) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"Menu items for dropdown menu (recommended approach)"}}};function ze({chainId:e,chainName:n,tokens:t,transactions:r,tokensLoading:s=!1,transactionsLoading:i=!1,tokensRefreshing:u=!1,transactionsRefreshing:c=!1,tokensSupported:l=!0,tokensFallbackReason:d,transactionsSupported:p=!0,transactionsFallbackReason:m,onTokenClick:f,onTransactionClick:T,renderTransactionFooter:g,mainAssetSymbol:E,renderTokenActions:x,onTokenContextMenu:B,tokenMenuItems:G,className:J,testId:v="wallet-address-portfolio"}){const{t:A}=Q(["home","transaction","common"]),[N,W]=_.useState("assets"),D=n??e;return a.jsx("div",{"data-testid":v,className:J,children:a.jsx(Ge,{activeTab:N,onTabChange:W,className:"h-full",testIdPrefix:`${v}-tabs`,children:z=>z==="assets"?a.jsxs("div",{className:"p-4","data-testid":`${v}-assets-panel`,children:[!l&&!s&&a.jsx(ie,{type:"notSupported",feature:A("home:wallet.tokenBalance"),reason:d,className:"mb-4"}),a.jsx(ue,{tokens:t,loading:s,refreshing:u,onTokenClick:f,emptyTitle:A("home:wallet.noAssets"),emptyDescription:A("home:wallet.noAssetsOnChain",{chain:D}),mainAssetSymbol:E,renderActions:x,onContextMenu:B,menuItems:G,testId:`${v}-token-list`})]}):a.jsxs("div",{className:"p-4","data-testid":`${v}-history-panel`,children:[!p&&!i&&a.jsx(ie,{type:"notSupported",feature:A("home:wallet.transactionHistory"),reason:m,className:"mb-4"}),c&&r.length>0&&a.jsxs("div",{className:"text-muted-foreground mb-3 flex items-center gap-2 text-xs",children:[a.jsx(xe,{className:"size-3"}),A("common:loading")]}),a.jsx(Ne,{fallback:(P,$)=>a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[a.jsx("p",{className:"text-sm text-destructive mb-2",children:A("transaction:history.loadFailed")}),a.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:P.message}),a.jsx("button",{onClick:$,className:"text-xs px-3 py-1.5 rounded-md bg-primary text-primary-foreground",children:A("common:retry")})]}),children:a.jsx(qe,{transactions:r,loading:i,onTransactionClick:T,emptyTitle:A("transaction:history.emptyTitle"),emptyDescription:A("transaction:history.emptyDesc"),testId:`${v}-transaction-list`})}),g?.()]})})})}ze.__docgenInfo={description:"",methods:[],displayName:"WalletAddressPortfolioView",props:{chainId:{required:!0,tsType:{name:"ChainType"},description:""},chainName:{required:!1,tsType:{name:"string"},description:""},tokens:{required:!0,tsType:{name:"Array",elements:[{name:"TokenInfo"}],raw:"TokenInfo[]"},description:""},transactions:{required:!0,tsType:{name:"Array",elements:[{name:"TransactionInfo"}],raw:"TransactionInfo[]"},description:""},tokensLoading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},transactionsLoading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},tokensRefreshing:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},transactionsRefreshing:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},tokensSupported:{required:!1,tsType:{name:"boolean"},description:"是否成功查询到 token 数据（false 表示 fallback）",defaultValue:{value:"true",computed:!1}},tokensFallbackReason:{required:!1,tsType:{name:"string"},description:""},transactionsSupported:{required:!1,tsType:{name:"boolean"},description:"是否成功查询到交易数据（false 表示 fallback）",defaultValue:{value:"true",computed:!1}},transactionsFallbackReason:{required:!1,tsType:{name:"string"},description:""},onTokenClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(token: TokenInfo) => void",signature:{arguments:[{type:{name:"TokenInfo"},name:"token"}],return:{name:"void"}}},description:""},onTransactionClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(tx: TransactionInfo) => void",signature:{arguments:[{type:{name:"TransactionInfo"},name:"tx"}],return:{name:"void"}}},description:""},renderTransactionFooter:{required:!1,tsType:{name:"signature",type:"function",raw:"() => React.ReactNode",signature:{arguments:[],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:'渲染交易列表底部额外内容（如"查看全部"按钮）'},mainAssetSymbol:{required:!1,tsType:{name:"string"},description:"Main asset symbol for the chain (used for renderActions context)"},renderTokenActions:{required:!1,tsType:{name:"signature",type:"function",raw:"(token: TokenInfo, context: TokenItemContext) => React.ReactNode",signature:{arguments:[{type:{name:"TokenInfo"},name:"token"},{type:{name:"TokenItemContext"},name:"context"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:"Render prop for token item actions (deprecated: use tokenMenuItems)"},onTokenContextMenu:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.MouseEvent, token: TokenInfo) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"},{type:{name:"TokenInfo"},name:"token"}],return:{name:"void"}}},description:"Context menu handler for token items (matches TokenItem signature)"},tokenMenuItems:{required:!1,tsType:{name:"signature",type:"function",raw:"(token: TokenInfo, context: TokenItemContext) => TokenMenuItem[]",signature:{arguments:[{type:{name:"TokenInfo"},name:"token"},{type:{name:"TokenItemContext"},name:"context"}],return:{name:"Array",elements:[{name:"TokenMenuItem"}],raw:"TokenMenuItem[]"}}},description:"Menu items for token dropdown menu (recommended approach)"},className:{required:!1,tsType:{name:"string"},description:""},testId:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'wallet-address-portfolio'",computed:!1}}}};const $e=C(["fingerprint","face","iris","none"]),Ze=O({isAvailable:S(),biometricType:$e,error:o().optional()}),Ke=O({title:o().optional(),description:o().optional(),cancelText:o().optional(),maxAttempts:k().optional(),fallbackToPassword:S().optional()}).optional(),Xe=O({success:S(),errorMessage:o().optional()}),Ye=I("biometric",e=>e.description("生物识别服务 - 指纹/面容验证").api("isAvailable",{description:"检查生物识别是否可用",input:h(),output:Ze}).api("verify",{description:"验证生物识别",input:Ke,output:Xe}));Ye.impl({async isAvailable(){if(window.PublicKeyCredential)try{const e=await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();return{isAvailable:e,biometricType:e?"fingerprint":"none"}}catch{return{isAvailable:!1,biometricType:"none"}}return{isAvailable:!1,biometricType:"none"}},async verify(e){return{success:!1,errorMessage:"Biometric authentication not available in web browser"}}});const Qe=C(["light","medium","heavy","success","warning","error"]).optional(),en=I("haptics",e=>e.description("触觉反馈服务").api("impact",{description:"触发触觉反馈",input:Qe,output:h()}).api("vibrate",{description:"振动指定时长",input:k().optional(),output:h()})),_t=en.impl({async impact(e){if("vibrate"in navigator){const n={light:10,medium:20,heavy:30,success:[10,50,10],warning:[20,30,20],error:[30,50,30,50,30]};navigator.vibrate(n[e??"medium"])}},async vibrate(e){"vibrate"in navigator&&navigator.vibrate(e??100)}}),nn=I("secureStorage",e=>e.description("安全存储服务 - 加密存储键值对").api("set",{description:"存储数据",input:O({key:o(),value:o()}),output:h()}).api("get",{description:"获取数据",input:O({key:o()}),output:o().nullable()}).api("remove",{description:"删除数据",input:O({key:o()}),output:h()}).api("has",{description:"检查是否存在",input:O({key:o()}),output:S()}).api("clear",{description:"清空存储",input:h(),output:h()})),U="bfm_secure_";nn.impl({async set({key:e,value:n}){localStorage.setItem(U+e,n)},async get({key:e}){return localStorage.getItem(U+e)},async remove({key:e}){localStorage.removeItem(U+e)},async has({key:e}){return localStorage.getItem(U+e)!==null},async clear(){const e=[];for(let n=0;n<localStorage.length;n++){const t=localStorage.key(n);t?.startsWith(U)&&e.push(t)}e.forEach(n=>localStorage.removeItem(n))}});const tn=O({content:o(),format:o().optional()}),an=I("camera",e=>e.description("相机服务 - 扫描二维码").api("scanQRCode",{description:"扫描二维码",input:h(),output:tn}).api("checkPermission",{description:"检查相机权限",input:h(),output:S()}).api("requestPermission",{description:"请求相机权限",input:h(),output:S()})),Ot=an.impl({async scanQRCode(){throw new Error("QR scanning not implemented in web.")},async checkPermission(){try{return(await navigator.permissions.query({name:"camera"})).state==="granted"}catch{return!1}},async requestPermission(){try{return(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(n=>n.stop()),!0}catch{return!1}}}),on=O({base:o(),date:o(),rates:M(o(),k())}),rn=I("currencyExchange",e=>e.description("货币兑换服务 - 获取汇率").api("getExchangeRates",{description:"获取汇率",input:O({baseCurrency:o(),targetCurrencies:H(o())}),output:on})),j={CNY:7.24,EUR:.95,JPY:149.5,KRW:1320,GBP:.79,AUD:1.53,CAD:1.36,CHF:.88,HKD:7.82,SGD:1.34,TWD:31.5,THB:35.2,INR:83.5,MYR:4.72,PHP:56.2};function sn(){return new Date().toISOString().split("T")[0]??new Date().toISOString().slice(0,10)}function ln(e,n){const t={};if(e==="USD"){for(const i of n)i==="USD"?t[i]=1:j[i]!==void 0&&(t[i]=j[i]);return t}const r=j[e];if(r===void 0)return t;const s=1/r;for(const i of n)i===e?t[i]=1:i==="USD"?t[i]=s:j[i]!==void 0&&(t[i]=j[i]*s);return t}const cn=rn.impl({async getExchangeRates({baseCurrency:e,targetCurrencies:n}){return await new Promise(t=>setTimeout(t,100)),{base:e,date:sn(),rates:ln(e,n)}}});_.createContext(null);const dn=O({appId:o(),appName:o(),appIcon:o(),origin:o()});I("authorize",e=>e.description("授权适配器").api("getCallerAppInfo",O({eventId:o()}),dn).api("respondWith",O({eventId:o(),path:o(),data:Pe()}),h()).api("removeEventId",O({eventId:o()}),h()).method("isAvailable",h(),S()));const y=Ve(e=>e instanceof Fe),un=M(o(),M(o(),O({assetType:o(),logo:o().optional(),supportChain:M(o(),O({assetType:o(),contract:o().optional(),decimals:k()}).optional())}))),mn=M(o(),M(o(),o())),pn=O({chain:C(["BFMeta","BFChain","CCChain","PMChain"]),assetType:o(),stakedAmount:y,stakedFiat:o(),availableChains:H(C(["ETH","BSC","TRON"])),logoUrl:o().optional(),totalMinted:y,totalCirculation:y,totalBurned:y,totalStaked:y,externalChain:C(["ETH","BSC","TRON"]),externalAssetType:o()}),V=O({id:o(),type:C(["mint","burn"]),sourceChain:o(),sourceAsset:o(),sourceAmount:y,targetChain:o(),targetAsset:o(),targetAmount:y,status:C(["pending","confirming","confirmed","failed"]),txHash:o().optional(),createdAt:k(),updatedAt:k(),errorMessage:o().optional()}),fn=O({sourceChain:C(["ETH","BSC","TRON"]),sourceAsset:o(),amount:y,targetChain:C(["BFMeta","BFChain","CCChain","PMChain"]),targetAsset:o()}),Tn=O({sourceChain:C(["BFMeta","BFChain","CCChain","PMChain"]),sourceAsset:o(),amount:y,targetChain:C(["ETH","BSC","TRON"]),targetAsset:o()}),gn=I("staking",e=>e.description("质押服务").api("getRechargeConfig",h(),un).api("getLogoUrls",h(),mn).api("getOverview",h(),H(pn)).api("getTransactions",h(),H(V)).api("getTransaction",O({id:o()}),V.nullable()).api("submitMint",fn,V).api("submitBurn",Tn,V)),Et=gn.impl({async getRechargeConfig(){throw new Error("StakingService.getRechargeConfig not implemented")},async getLogoUrls(){throw new Error("StakingService.getLogoUrls not implemented")},async getOverview(){throw new Error("StakingService.getOverview not implemented")},async getTransactions(){throw new Error("StakingService.getTransactions not implemented")},async getTransaction(){throw new Error("StakingService.getTransaction not implemented")},async submitMint(){throw new Error("StakingService.submitMint not implemented")},async submitBurn(){throw new Error("StakingService.submitBurn not implemented")}});var _n=Object.create,ee=Object.defineProperty,On=Object.getOwnPropertyDescriptor,me=Object.getOwnPropertyNames,En=Object.getPrototypeOf,hn=Object.prototype.hasOwnProperty,ne=(e,n)=>function(){return n||(0,e[me(e)[0]])((n={exports:{}}).exports,n),n.exports},Rn=(e,n)=>{for(var t in n)ee(e,t,{get:n[t],enumerable:!0})},bn=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of me(n))!hn.call(e,s)&&s!==t&&ee(e,s,{get:()=>n[s],enumerable:!(r=On(n,s))||r.enumerable});return e},An=(e,n,t)=>(t=e!=null?_n(En(e)):{},bn(ee(t,"default",{value:e,enumerable:!0}),e)),Cn=ne({"node_modules/is-object/index.js"(e,n){n.exports=function(r){return typeof r=="object"&&r!==null}}}),yn=ne({"node_modules/is-window/index.js"(e,n){n.exports=function(t){if(t==null)return!1;var r=Object(t);return r===r.window}}}),xn=ne({"node_modules/is-dom/index.js"(e,n){var t=Cn(),r=yn();function s(i){return!t(i)||!r(window)||typeof window.Node!="function"?!1:typeof i.nodeType=="number"&&typeof i.nodeName=="string"}n.exports=s}}),pe={};Rn(pe,{chromeDark:()=>vn,chromeLight:()=>Nn});var vn={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"rgb(36, 36, 36)",BASE_COLOR:"rgb(213, 213, 213)",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(227, 110, 236)",OBJECT_VALUE_NULL_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_REGEXP_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_STRING_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_NUMBER_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_BOOLEAN_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(85, 106, 242)",HTML_TAG_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(155, 187, 220)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(242, 151, 102)",HTML_COMMENT_COLOR:"rgb(137, 137, 137)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"rgb(145, 145, 145)",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"rgb(85, 85, 85)",TABLE_TH_BACKGROUND_COLOR:"rgb(44, 44, 44)",TABLE_TH_HOVER_COLOR:"rgb(48, 48, 48)",TABLE_SORT_ICON_COLOR:"black",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 0) 50%, rgba(51, 139, 255, 0.0980392) 50%, rgba(51, 139, 255, 0.0980392))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},Nn={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"white",BASE_COLOR:"black",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(136, 19, 145)",OBJECT_VALUE_NULL_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_REGEXP_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_STRING_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_NUMBER_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_BOOLEAN_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(13, 34, 170)",HTML_TAG_COLOR:"rgb(168, 148, 166)",HTML_TAGNAME_COLOR:"rgb(136, 18, 128)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(153, 69, 0)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(26, 26, 166)",HTML_COMMENT_COLOR:"rgb(35, 110, 37)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"#6e6e6e",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"#aaa",TABLE_TH_BACKGROUND_COLOR:"#eee",TABLE_TH_HOVER_COLOR:"hsla(0, 0%, 90%, 1)",TABLE_SORT_ICON_COLOR:"#6e6e6e",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(to bottom, white, white 50%, rgb(234, 243, 255) 50%, rgb(234, 243, 255))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},fe=_.createContext([{},()=>{}]),X={WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",OUserSelect:"none",userSelect:"none"},Ln=e=>({DOMNodePreview:{htmlOpenTag:{base:{color:e.HTML_TAG_COLOR},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM},htmlAttributeName:{color:e.HTML_ATTRIBUTE_NAME_COLOR},htmlAttributeValue:{color:e.HTML_ATTRIBUTE_VALUE_COLOR}},htmlCloseTag:{base:{color:e.HTML_TAG_COLOR},offsetLeft:{marginLeft:-e.TREENODE_PADDING_LEFT},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM}},htmlComment:{color:e.HTML_COMMENT_COLOR},htmlDoctype:{color:e.HTML_DOCTYPE_COLOR}},ObjectPreview:{objectDescription:{fontStyle:"italic"},preview:{fontStyle:"italic"},arrayMaxProperties:e.OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES,objectMaxProperties:e.OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES},ObjectName:{base:{color:e.OBJECT_NAME_COLOR},dimmed:{opacity:.6}},ObjectValue:{objectValueNull:{color:e.OBJECT_VALUE_NULL_COLOR},objectValueUndefined:{color:e.OBJECT_VALUE_UNDEFINED_COLOR},objectValueRegExp:{color:e.OBJECT_VALUE_REGEXP_COLOR},objectValueString:{color:e.OBJECT_VALUE_STRING_COLOR},objectValueSymbol:{color:e.OBJECT_VALUE_SYMBOL_COLOR},objectValueNumber:{color:e.OBJECT_VALUE_NUMBER_COLOR},objectValueBoolean:{color:e.OBJECT_VALUE_BOOLEAN_COLOR},objectValueFunctionPrefix:{color:e.OBJECT_VALUE_FUNCTION_PREFIX_COLOR,fontStyle:"italic"},objectValueFunctionName:{fontStyle:"italic"}},TreeView:{treeViewOutline:{padding:0,margin:0,listStyleType:"none"}},TreeNode:{treeNodeBase:{color:e.BASE_COLOR,backgroundColor:e.BASE_BACKGROUND_COLOR,lineHeight:e.TREENODE_LINE_HEIGHT,cursor:"default",boxSizing:"border-box",listStyle:"none",fontFamily:e.TREENODE_FONT_FAMILY,fontSize:e.TREENODE_FONT_SIZE},treeNodePreviewContainer:{},treeNodePlaceholder:{whiteSpace:"pre",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT,...X},treeNodeArrow:{base:{color:e.ARROW_COLOR,display:"inline-block",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT,...parseFloat(e.ARROW_ANIMATION_DURATION)>0?{transition:`transform ${e.ARROW_ANIMATION_DURATION} ease 0s`}:{},...X},expanded:{WebkitTransform:"rotateZ(90deg)",MozTransform:"rotateZ(90deg)",transform:"rotateZ(90deg)"},collapsed:{WebkitTransform:"rotateZ(0deg)",MozTransform:"rotateZ(0deg)",transform:"rotateZ(0deg)"}},treeNodeChildNodesContainer:{margin:0,paddingLeft:e.TREENODE_PADDING_LEFT}},TableInspector:{base:{color:e.BASE_COLOR,position:"relative",border:`1px solid ${e.TABLE_BORDER_COLOR}`,fontFamily:e.BASE_FONT_FAMILY,fontSize:e.BASE_FONT_SIZE,lineHeight:"120%",boxSizing:"border-box",cursor:"default"}},TableInspectorHeaderContainer:{base:{top:0,height:"17px",left:0,right:0,overflowX:"hidden"},table:{tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",height:"100%",width:"100%",margin:0}},TableInspectorDataContainer:{tr:{display:"table-row"},td:{boxSizing:"border-box",border:"none",height:"16px",verticalAlign:"top",padding:"1px 4px",WebkitUserSelect:"text",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px"},div:{position:"static",top:"17px",bottom:0,overflowY:"overlay",transform:"translateZ(0)",left:0,right:0,overflowX:"hidden"},table:{positon:"static",left:0,top:0,right:0,bottom:0,borderTop:"0 none transparent",margin:0,backgroundImage:e.TABLE_DATA_BACKGROUND_IMAGE,backgroundSize:e.TABLE_DATA_BACKGROUND_SIZE,tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",width:"100%",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorTH:{base:{position:"relative",height:"auto",textAlign:"left",backgroundColor:e.TABLE_TH_BACKGROUND_COLOR,borderBottom:`1px solid ${e.TABLE_BORDER_COLOR}`,fontWeight:"normal",verticalAlign:"middle",padding:"0 4px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px",":hover":{backgroundColor:e.TABLE_TH_HOVER_COLOR}},div:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorLeftBorder:{none:{borderLeft:"none"},solid:{borderLeft:`1px solid ${e.TABLE_BORDER_COLOR}`}},TableInspectorSortIcon:{display:"block",marginRight:3,width:8,height:7,marginTop:-7,color:e.TABLE_SORT_ICON_COLOR,fontSize:12,...X}}),Sn="chromeLight",In=_.createContext(Ln(pe[Sn])),Te=e=>_.useContext(In)[e],wn=({expanded:e,styles:n})=>b.createElement("span",{style:{...n.base,...e?n.expanded:n.collapsed}},"▶"),Mn=_.memo(e=>{e={expanded:!0,nodeRenderer:({name:p})=>b.createElement("span",null,p),onClick:()=>{},shouldShowArrow:!1,shouldShowPlaceholder:!0,...e};const{expanded:n,onClick:t,children:r,nodeRenderer:s,title:i,shouldShowArrow:u,shouldShowPlaceholder:c}=e,l=Te("TreeNode"),d=s;return b.createElement("li",{"aria-expanded":n,role:"treeitem",style:l.treeNodeBase,title:i},b.createElement("div",{style:l.treeNodePreviewContainer,onClick:t},u||_.Children.count(r)>0?b.createElement(wn,{expanded:n,styles:l.treeNodeArrow}):c&&b.createElement("span",{style:l.treeNodePlaceholder}," "),b.createElement(d,{...e})),b.createElement("ol",{role:"group",style:l.treeNodeChildNodesContainer},n?r:void 0))}),q="$",le="*";function F(e,n){return!n(e).next().done}var kn=e=>Array.from({length:e},(n,t)=>[q].concat(Array.from({length:t},()=>"*")).join(".")),Bn=(e,n,t,r,s)=>{const i=[].concat(kn(r)).concat(t).filter(c=>typeof c=="string"),u=[];return i.forEach(c=>{const l=c.split("."),d=(p,m,f)=>{if(f===l.length){u.push(m);return}const T=l[f];if(f===0)F(p,n)&&(T===q||T===le)&&d(p,q,f+1);else if(T===le)for(const{name:g,data:E}of n(p))F(E,n)&&d(E,`${m}.${g}`,f+1);else{const g=p[T];F(g,n)&&d(g,`${m}.${T}`,f+1)}};d(e,"",0)}),u.reduce((c,l)=>(c[l]=!0,c),{...s})},ge=_.memo(e=>{const{data:n,dataIterator:t,path:r,depth:s,nodeRenderer:i}=e,[u,c]=_.useContext(fe),l=F(n,t),d=!!u[r],p=_.useCallback(()=>l&&c(m=>({...m,[r]:!d})),[l,c,r,d]);return b.createElement(Mn,{expanded:d,onClick:p,shouldShowArrow:l,shouldShowPlaceholder:s>0,nodeRenderer:i,...e},d?[...t(n)].map(({name:m,data:f,...T})=>b.createElement(ge,{name:m,data:f,depth:s+1,path:`${r}.${m}`,key:m,dataIterator:t,nodeRenderer:i,...T})):null)});_.memo(({name:e,data:n,dataIterator:t,nodeRenderer:r,expandPaths:s,expandLevel:i})=>{const u=Te("TreeView"),c=_.useState({}),[,l]=c;return _.useLayoutEffect(()=>l(d=>Bn(n,t,s,i,d)),[n,t,s,i]),b.createElement(fe.Provider,{value:c},b.createElement("ol",{role:"tree",style:u.treeViewOutline},b.createElement(ge,{name:e,data:n,dataIterator:t,depth:0,path:q,nodeRenderer:r})))});An(xn());const Dn=300*1e3,ce=new Map;function L(e){return e.trim().toUpperCase()}function de(e,n){const t=L(e),r=[...new Set(n.map(L))].filter(s=>s!==t).toSorted().join(",");return`${t}|${r}`}function Un(e,n){const t=_.useMemo(()=>L(e),[e]),r=_.useMemo(()=>[...new Set(n.map(L))],[n.join(",")]),s=_.useMemo(()=>de(t,r),[t,r.join(",")]),[i,u]=_.useState({data:null,isLoading:r.length>0,error:null,updatedAt:null}),c=_.useCallback(async(l,d)=>{const p=L(l),m=[...new Set(d.map(L))].filter(E=>E!==p),f=de(p,m),T=Date.now(),g=ce.get(f);if(g&&T-g.updatedAt<Dn){u({data:g.data,isLoading:!1,error:null,updatedAt:g.updatedAt});return}if(m.length===0){const E=new Date().toISOString().split("T")[0],x={base:p,date:E??new Date().toISOString().slice(0,10),rates:{}};u({data:x,isLoading:!1,error:null,updatedAt:T});return}u(E=>({...E,isLoading:!0,error:null}));try{const E=await cn.getExchangeRates({baseCurrency:p,targetCurrencies:m});ce.set(f,{data:E,updatedAt:T}),u({data:E,isLoading:!1,error:null,updatedAt:T})}catch(E){u(x=>({...x,isLoading:!1,error:E instanceof Error?E.message:"Failed to fetch exchange rates"}))}},[]);return _.useEffect(()=>{c(t,r)},[s,t,r,c]),i}function jn(e,n){const t=L(n);return e?.rates[t]}function Pn(e){const n=e.replaceAll(",","").trim();if(n.length===0)return null;const t=Number(n);return Number.isFinite(t)?t:null}const Vn=new Set(["bfmeta","ccchain","pmchain","bfchainv2","btgmeta","biwmeta","ethmeta","malibu"]);function _e({token:e,onClick:n,showChange:t=!1,loading:r=!1,className:s,testId:i,renderActions:u,mainAssetSymbol:c,menuItems:l,onContextMenu:d}){const p=!!n,{t:m}=Q(["currency","common"]),f=Ee(),T=Vn.has(e.chain),g=c?e.symbol.toUpperCase()===c.toUpperCase():!1,E=T&&!g,x={chainType:e.chain,isBioforestChain:T,isMainAsset:g,canDestroy:E},B=e.fiatValue!==void 0&&f!=="USD",{data:G,isLoading:J,error:v}=Un("USD",B?[f]:[]),A=B?jn(G,f):void 0,N=e.fiatValue!==void 0?Pn(e.fiatValue):null,W=e.fiatValue!==void 0?N!==null?String(N):e.fiatValue:void 0,D=f!=="USD"&&A!==void 0&&N!==null,z=D?oe[f].symbol:oe.USD.symbol,P=D&&N!==null?String(N*A):W,$=B&&!D?m(v?"exchange.error":J?"exchange.loading":"exchange.unavailable"):null,te=a.jsxs(a.Fragment,{children:[a.jsx(Le,{variant:"image",className:"overflow-visible",children:a.jsxs("div",{className:"relative size-full",children:[a.jsx(Ae,{symbol:e.symbol,chainId:e.chain,imageUrl:e.icon,size:"lg",className:"size-full"}),a.jsx(Y,{chain:e.chain,size:"sm",className:"bg-background ring-background absolute -right-[10%] -bottom-[10%] size-[40%]! text-[0.2em] ring-2"})]})}),a.jsxs(Se,{children:[a.jsx(Ie,{children:e.symbol}),a.jsx(we,{children:e.name})]}),a.jsx(se,{children:a.jsxs("div",{className:"text-right",children:[a.jsx(ve,{value:e.balance,loading:r,decimals:e.decimals??8,className:"text-sm"}),P&&!r&&a.jsxs("p",{className:"text-muted-foreground text-xs",title:$??void 0,children:["≈ ",z,a.jsx(re,{value:P,size:"xs",className:"inline"}),t&&e.change24h!==void 0&&a.jsx(re,{value:e.change24h,sign:"always",color:"auto",size:"xs",className:"ml-1 inline"}),t&&e.change24h!==void 0&&"%"]}),r&&a.jsx("p",{className:"text-muted-foreground animate-pulse text-xs",children:"≈ --"})]})})]}),Z=l?.(e,x).filter(R=>R.show!==!1)??[],ae=Z.length>0,K=p&&!ae;return a.jsxs(Me,{...i&&{"data-testid":i},variant:"default",size:"default",render:K?a.jsx("button",{type:"button"}):void 0,onClick:K?n:void 0,onContextMenu:R=>d?.(R,e),"aria-label":K?m("common:a11y.tokenDetails",{token:e.symbol}):void 0,className:w(p&&"hover:bg-muted/50 active:bg-muted cursor-pointer",s),children:[ae&&p?a.jsx("div",{role:"button",tabIndex:0,onClick:n,onKeyDown:R=>{(R.key==="Enter"||R.key===" ")&&(R.preventDefault(),n?.())},"aria-label":m("common:a11y.tokenDetails",{token:e.symbol}),className:"flex flex-1 items-center gap-2.5 outline-none",children:te}):te,Z.length>0&&a.jsxs(ke,{children:[a.jsx(Be,{"aria-label":m("common:a11y.more"),render:a.jsx(He,{variant:"ghost",size:"icon",className:"size-11 rounded-lg"}),children:a.jsx(De,{className:"text-muted-foreground size-5"})}),a.jsx(Ue,{align:"end",sideOffset:4,children:Z.map((R,Oe)=>a.jsxs(je,{onClick:R.onClick,variant:R.variant,children:[R.icon,R.label]},Oe))})]}),u&&!l&&a.jsx(se,{onClick:R=>R.stopPropagation(),children:u(e,x)})]})}_e.__docgenInfo={description:"",methods:[],displayName:"TokenItem",props:{token:{required:!0,tsType:{name:"TokenInfo"},description:""},onClick:{required:!1,tsType:{name:"union",raw:"(() => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},showChange:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"",defaultValue:{value:"false",computed:!1}},loading:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"Whether balance is loading (shows animation)",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},testId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},renderActions:{required:!1,tsType:{name:"union",raw:"((token: TokenInfo, context: TokenItemContext) => React.ReactNode) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:`Render prop for custom actions (e.g., action buttons on the right)
Receives the token and context for conditional rendering`},mainAssetSymbol:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Main asset symbol of the chain (used to determine isMainAsset)"},menuItems:{required:!1,tsType:{name:"union",raw:"((token: TokenInfo, context: TokenItemContext) => TokenMenuItem[]) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:`Menu items for the context menu (right-click on desktop)
Function receives token and context, returns array of menu items`},onContextMenu:{required:!1,tsType:{name:"union",raw:"((e: React.MouseEvent, token: TokenInfo) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"Context menu handler"}}};export{We as C,_e as T,ze as W,ue as a,Ot as c,_t as h,Et as s};
