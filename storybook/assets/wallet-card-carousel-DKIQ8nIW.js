import{r as w,j as d}from"./iframe-CPG22Gvg.js";import{g as R,e as k,c as A,S as W,a as z}from"./swiper-BiAKNBcT.js";import{W as O}from"./wallet-card-Dsh5xUBo.js";import{u as _}from"./useWalletTheme-B8sQWFZQ.js";import"./user-profile-DTMlfwoF.js";import{d as D}from"./service-BVbeyLdv.js";import{c as U}from"./utils-4perknFd.js";import{D as V,a as H,I as X,b as L,c as P}from"./dropdown-menu-Cyb6mH8K.js";import{u as Q}from"./useTranslation-DCL0_HUc.js";import{I as Y}from"./IconWallet-C0FSbpM8.js";import{I as Z}from"./IconPlus-C5_YUL7L.js";import{I as F}from"./IconSearch-DA0rX1NC.js";import{c as K}from"./createReactComponent-CbQTe-Tv.js";const B=[["path",{d:"M5 21v-16a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v16l-3 -2l-2 2l-2 -2l-2 2l-2 -2l-3 2m4 -14h6m-6 4h6m-2 4h2",key:"svg-0"}]],G=K("outline","receipt","Receipt",B);function J(e){const{effect:a,swiper:t,on:u,setTranslate:p,setTransition:l,overwriteParams:n,perspective:i,recreateShadows:r,getEffectParams:m}=e;u("beforeInit",()=>{if(t.params.effect!==a)return;t.classNames.push(`${t.params.containerModifierClass}${a}`),i&&i()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const f=n?n():{};Object.assign(t.params,f),Object.assign(t.originalParams,f)}),u("setTranslate _virtualUpdated",()=>{t.params.effect===a&&p()}),u("setTransition",(f,h)=>{t.params.effect===a&&l(h)}),u("transitionEnd",()=>{if(t.params.effect===a&&r){if(!m||!m().slideShadows)return;t.slides.forEach(f=>{f.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>h.remove())}),r()}});let v;u("virtualUpdate",()=>{t.params.effect===a&&(t.slides.length||(v=!0),requestAnimationFrame(()=>{v&&t.slides&&t.slides.length&&(p(),v=!1)}))})}function ee(e,a){const t=R(a);return t!==a&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function te({swiper:e,duration:a,transformElements:t,allSlides:u}){const{activeIndex:p}=e,l=n=>n.parentElement?n.parentElement:e.slides.find(r=>r.shadowRoot&&r.shadowRoot===n.parentNode);if(e.params.virtualTranslate&&a!==0){let n=!1,i;u?i=t:i=t.filter(r=>{const m=r.classList.contains("swiper-slide-transform")?l(r):r;return e.getSlideIndex(m)===p}),i.forEach(r=>{k(r,()=>{if(n||!e||e.destroyed)return;n=!0,e.animating=!1;const m=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(m)})})}}function se(e,a,t){const u=`swiper-slide-shadow${` swiper-slide-shadow-${e}`}`,p=R(a);let l=p.querySelector(`.${u.split(" ").join(".")}`);return l||(l=A("div",u.split(" ")),p.append(l)),l}function ae({swiper:e,extendParams:a,on:t}){a({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),J({effect:"cards",swiper:e,on:t,setTranslate:()=>{const{slides:l,activeIndex:n,rtlTranslate:i}=e,r=e.params.cardsEffect,{startTranslate:m,isTouched:v}=e.touchEventsData,f=i?-e.translate:e.translate;for(let h=0;h<l.length;h+=1){const g=l[h],C=g.progress,o=Math.min(Math.max(C,-4),4);let M=g.swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&(e.wrapperEl.style.transform=`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(M-=l[0].swiperSlideOffset);let c=e.params.cssMode?-M-e.translate:-M,S=0;const q=-100*Math.abs(o);let E=1,$=-r.perSlideRotate*o,j=r.perSlideOffset-Math.abs(o)*.75;const I=e.virtual&&e.params.virtual.enabled?e.virtual.from+h:h,N=(I===n||I===n-1)&&o>0&&o<1&&(v||e.params.cssMode)&&f<m,s=(I===n||I===n+1)&&o<0&&o>-1&&(v||e.params.cssMode)&&f>m;if(N||s){const y=(1-Math.abs((Math.abs(o)-.5)/.5))**.5;$+=-28*o*y,E+=-.5*y,j+=96*y,S=`${(r.rotate||e.isHorizontal()?-25:0)*y*Math.abs(o)}%`}if(o<0?c=`calc(${c}px ${i?"-":"+"} (${j*Math.abs(o)}%))`:o>0?c=`calc(${c}px ${i?"-":"+"} (-${j*Math.abs(o)}%))`:c=`${c}px`,!e.isHorizontal()){const y=S;S=c,c=y}const x=o<0?`${1+(1-E)*o}`:`${1-(1-E)*o}`,b=`
        translate3d(${c}, ${S}, ${q}px)
        rotateZ(${r.rotate?i?-$:$:0}deg)
        scale(${x})
      `;if(r.slideShadows){let y=g.querySelector(".swiper-slide-shadow");y||(y=se("cards",g)),y&&(y.style.opacity=Math.min(Math.max((Math.abs(o)-.5)/.5,0),1))}g.style.zIndex=-Math.abs(Math.round(C))+l.length;const T=ee(r,g);T.style.transform=b}},setTransition:l=>{const n=e.slides.map(i=>R(i));n.forEach(i=>{i.style.transitionDuration=`${l}ms`,i.querySelectorAll(".swiper-slide-shadow").forEach(r=>{r.style.transitionDuration=`${l}ms`})}),te({swiper:e,duration:l,transformElements:n})},perspective:()=>!0,overwriteParams:()=>({_loopSwapReset:!1,watchSlidesProgress:!0,loopAdditionalSlides:e.params.cardsEffect.rotate?3:2,centeredSlides:!0,virtualTranslate:!e.params.cssMode})})}function re(){const e=D();return w.useMemo(()=>{const a={};for(const t of e)t.icon&&(a[t.id]=t.icon);return a},[e])}const ne=w.memo(O);function ie({wallets:e,currentWalletId:a,selectedChain:t,chainPreferences:u={},onWalletChange:p,onCopyAddress:l,onOpenChainSelector:n,onOpenSettings:i,onOpenWalletList:r,onAddWallet:m,onOpenAddressBalance:v,onOpenAddressTransactions:f,className:h}){const{t:g}=Q(["home","wallet","common"]),C=w.useRef(null),{getWalletTheme:o}=_(),M=re(),c=e.findIndex(s=>s.id===a),[S,q]=w.useState(c>=0?c:0),E=w.useRef(c>=0?c:0),$=s=>s===S?"high":Math.abs(s-S)===1?"medium":"low";w.useEffect(()=>{C.current&&c>=0&&C.current.slideTo(c,0)},[c]);const j=w.useCallback(s=>{q(s.activeIndex);const x=e[s.activeIndex];x&&x.id!==a&&p?.(x.id)},[e,a,p]),I=s=>s.id===a?t:u[s.id]??s.chain??t,N=(s,x)=>s.chainAddresses.find(T=>T.chain===x)?.address??s.address;return e.length===0?null:d.jsxs("div",{className:U("relative w-full pt-12 pb-2",h),children:[e.length>1&&d.jsxs("button",{onClick:r,className:"bg-primary text-primary-foreground hover:bg-primary/90 absolute top-0 left-4 z-10 flex items-center gap-1.5 rounded-full px-3 py-1.5 text-xs font-medium backdrop-blur-sm transition-colors",children:[d.jsx(Y,{className:"size-3.5"}),d.jsx("span",{children:g("wallet:carousel.walletCount",{count:e.length})})]}),d.jsxs("div",{className:"absolute top-0 right-4 z-10 flex items-center gap-1.5",children:[m&&d.jsx("button",{onClick:m,className:"bg-primary text-primary-foreground hover:bg-primary/90 flex items-center justify-center rounded-full p-1.5 backdrop-blur-sm transition-colors",children:d.jsx(Z,{className:"size-4"})}),(v||f)&&d.jsxs(V,{children:[d.jsx(H,{className:"bg-primary text-primary-foreground hover:bg-primary/90 flex items-center justify-center rounded-full p-1.5 backdrop-blur-sm transition-colors",children:d.jsx(X,{className:"size-4"})}),d.jsxs(L,{align:"end",sideOffset:8,children:[v&&d.jsxs(P,{onClick:v,children:[d.jsx(F,{className:"size-4"}),g("wallet:menu.addressBalanceQuery")]}),f&&d.jsxs(P,{onClick:f,children:[d.jsx(G,{className:"size-4"}),g("wallet:menu.addressTransactionsQuery")]})]})]})]}),d.jsx(W,{modules:[ae],effect:"cards",grabCursor:!0,cardsEffect:{perSlideOffset:8,perSlideRotate:2,rotate:!0,slideShadows:!1},onSwiper:s=>{C.current=s,q(s.activeIndex)},onSlideChange:j,initialSlide:E.current,className:"mx-auto h-[212px] w-[min(92vw,360px)] overflow-visible [&_.swiper-slide]:size-full [&_.swiper-slide]:overflow-visible! [&_.swiper-slide]:rounded-2xl",children:e.map((s,x)=>{const b=I(s),T=N(s,b);return d.jsx(z,{children:d.jsx(ne,{wallet:s,chain:b,chainName:g(`common:chains.${b}`,{defaultValue:b}),priority:$(x),address:T,chainIconUrl:M[b],themeHue:o(s.id),canvasKey:`${s.id}:carousel`,onCopyAddress:()=>{T&&l?.(T)},onOpenChainSelector:n?()=>n(s.id):void 0,onOpenSettings:i?()=>i(s.id):void 0})},s.id)})})]})}ie.__docgenInfo={description:`钱包卡片轮播组件
使用 Swiper 实现卡片切换效果`,methods:[],displayName:"WalletCardCarousel",props:{wallets:{required:!0,tsType:{name:"Array",elements:[{name:"Wallet"}],raw:"Wallet[]"},description:""},currentWalletId:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},selectedChain:{required:!0,tsType:{name:"ChainType"},description:""},chainPreferences:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"ChainType"}],raw:"Record<string, ChainType>"},description:"每个钱包的链偏好 (walletId -> chainId)",defaultValue:{value:"{}",computed:!1}},onWalletChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(walletId: string) => void",signature:{arguments:[{type:{name:"string"},name:"walletId"}],return:{name:"void"}}},description:""},onCopyAddress:{required:!1,tsType:{name:"signature",type:"function",raw:"(address: string) => void",signature:{arguments:[{type:{name:"string"},name:"address"}],return:{name:"void"}}},description:""},onOpenChainSelector:{required:!1,tsType:{name:"signature",type:"function",raw:"(walletId: string) => void",signature:{arguments:[{type:{name:"string"},name:"walletId"}],return:{name:"void"}}},description:""},onOpenSettings:{required:!1,tsType:{name:"signature",type:"function",raw:"(walletId: string) => void",signature:{arguments:[{type:{name:"string"},name:"walletId"}],return:{name:"void"}}},description:""},onOpenWalletList:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onAddWallet:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenAddressBalance:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenAddressTransactions:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};export{ie as W,re as u};
