import{r as T,j as t}from"./iframe-D60tT8n5.js";import{N as S}from"./NumberFlow-client-48rw3j0J-mHWvuqRS.js";import{c as v}from"./utils-4perknFd.js";let V=null,y=null;function M(a,e){return typeof document>"u"||(V||(V=document.createElement("canvas"),y=V.getContext("2d")),!y)?a.length*8:(y.font=e,y.measureText(a).width)}function A(a,e,n){return a.toLocaleString("en-US",{minimumFractionDigits:e,maximumFractionDigits:n})}function W(a,e){return a===0?0:(Math.abs(a).toFixed(e).split(".")[1]||"").replace(/0+$/,"").length}function C(a,e,n){const s=typeof a=="string"?parseFloat(a):a;if(isNaN(s))return{formatted:"0",isNegative:!1,isZero:!0,numValue:0};const r=s<0,i=s===0,l=Math.abs(s);let u;return i?u="0":n&&l>=1e9?u=(l/1e9).toFixed(2).replace(/\.?0+$/,"")+"B":n&&l>=1e6?u=(l/1e6).toFixed(2).replace(/\.?0+$/,"")+"M":n&&l>=1e3?u=(l/1e3).toFixed(2).replace(/\.?0+$/,"")+"K":u=l.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:e}),{formatted:u,isNegative:r,isZero:i,numValue:s}}const _={xs:"text-xs",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl"},K={normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold"};function R(a,e,n,s,r){const i=W(e,n),[l,u]=T.useState(i),x=T.useCallback(()=>{const d=a.current;if(!d)return;const f=getComputedStyle(d),p=`${f.fontSize} ${f.fontFamily}`,g=r?M(` ${r}`,p):0,q=s?M(s,p):0,b=d.clientWidth-g-q;if(b<=0){u(i);return}for(let m=n;m>=i;m--){const w=A(Math.abs(e),m,n);if(M(w,p)<=b){u(m);return}}u(i)},[e,n,i,s,r]);return T.useLayoutEffect(()=>{const d=a.current;if(!d)return;x();const f=new ResizeObserver(x);return f.observe(d),()=>f.disconnect()},[x]),l}function z({value:a,symbol:e,decimals:n=8,sign:s="never",color:r="default",compact:i=!1,hidden:l=!1,loading:u=!1,size:x="md",weight:d="normal",mono:f=!0,animated:p=!0,fixedDecimals:g="auto",className:q}){const b=T.useRef(null),m=v(_[x],K[d],f&&"font-mono",q),{isNegative:w,isZero:N,numValue:c}=C(a,n,i);let o="";s==="always"&&!N?o=w?"-":"+":s==="auto"&&w&&(o="-");const E=R(b,c,n,o,e),L=g==="auto"?E:g===!0?n:0,j={minimumFractionDigits:L,maximumFractionDigits:n};if(l)return t.jsxs("span",{className:m,children:["••••••",e&&t.jsx("span",{className:"text-muted-foreground ml-1 font-normal",children:e})]});if(u)return t.jsxs("span",{className:v(m,"animate-pulse"),role:"status","aria-label":"Loading...",children:[t.jsx(S,{value:c,format:j,locales:"en-US","aria-hidden":"true"}),e&&t.jsx("span",{className:"text-muted-foreground ml-1 font-normal",children:e})]});const{formatted:F}=C(a,n,i);let h="";r==="auto"&&!N?h=w?"text-destructive":"text-green-500":r==="positive"?h="text-green-500":r==="negative"&&(h="text-destructive");const $=v(m,h);if(g==="auto"){const D=A(Math.abs(c),W(c,n),n),U=`${o}${F}${e?` ${e}`:""}`;return t.jsxs("span",{ref:b,className:v($,"relative inline-block"),role:"text","aria-label":U,children:[t.jsxs("span",{className:"invisible","aria-hidden":"true",children:[o,D,e?` ${e}`:""]}),t.jsxs("span",{className:"absolute inset-0 text-right","aria-hidden":"true",children:[o,p&&!i?t.jsx(S,{value:Math.abs(c),format:j,locales:"en-US"}):A(Math.abs(c),L,n),e&&t.jsx("span",{className:"text-muted-foreground ml-1 font-normal",children:e})]})]})}if(p&&!i){const D=`${o}${F}${e?` ${e}`:""}`;return t.jsxs("span",{className:$,role:"text","aria-label":D,children:[o,t.jsx(S,{value:Math.abs(c),format:j,locales:"en-US","aria-hidden":"true"}),e&&t.jsx("span",{className:"text-muted-foreground ml-1 font-normal","aria-hidden":"true",children:e})]})}return t.jsxs("span",{className:$,children:[o,F,e&&t.jsx("span",{className:"text-muted-foreground ml-1 font-normal",children:e})]})}function Z({fiatValue:a,fiatSymbol:e="$",fiatDecimals:n=2,layout:s="vertical",className:r,...i}){const l=a!==void 0?C(a,n,!1).formatted:null;return s==="horizontal"?t.jsxs("span",{className:v("inline-flex items-baseline gap-2",r),children:[t.jsx(z,{...i}),l&&t.jsxs("span",{className:"text-muted-foreground text-sm",children:["≈ ",e,l]})]}):t.jsxs("div",{className:v("space-y-0.5",r),children:[t.jsx(z,{...i}),l&&t.jsxs("p",{className:"text-muted-foreground text-sm",children:["≈ ",e,l]})]})}z.__docgenInfo={description:"",methods:[],displayName:"AmountDisplay",props:{value:{required:!0,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},symbol:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},decimals:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:"",defaultValue:{value:"8",computed:!1}},sign:{required:!1,tsType:{name:"union",raw:"AmountSign | undefined",elements:[{name:"union",raw:"'auto' | 'always' | 'never'",elements:[{name:"literal",value:"'auto'"},{name:"literal",value:"'always'"},{name:"literal",value:"'never'"}]},{name:"undefined"}]},description:"是否显示正负号",defaultValue:{value:"'never'",computed:!1}},color:{required:!1,tsType:{name:"union",raw:"AmountColor | undefined",elements:[{name:"union",raw:"'auto' | 'default' | 'positive' | 'negative'",elements:[{name:"literal",value:"'auto'"},{name:"literal",value:"'default'"},{name:"literal",value:"'positive'"},{name:"literal",value:"'negative'"}]},{name:"undefined"}]},description:"颜色模式：auto 根据正负自动，default 不变色",defaultValue:{value:"'default'",computed:!1}},compact:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"是否使用紧凑模式（1K, 1M）",defaultValue:{value:"false",computed:!1}},hidden:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"隐藏金额（隐私模式）",defaultValue:{value:"false",computed:!1}},loading:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"是否正在加载",defaultValue:{value:"false",computed:!1}},size:{required:!1,tsType:{name:"union",raw:"'xs' | 'sm' | 'md' | 'lg' | 'xl' | undefined",elements:[{name:"literal",value:"'xs'"},{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"literal",value:"'lg'"},{name:"literal",value:"'xl'"},{name:"undefined"}]},description:"尺寸",defaultValue:{value:"'md'",computed:!1}},weight:{required:!1,tsType:{name:"union",raw:"'normal' | 'medium' | 'semibold' | 'bold' | undefined",elements:[{name:"literal",value:"'normal'"},{name:"literal",value:"'medium'"},{name:"literal",value:"'semibold'"},{name:"literal",value:"'bold'"},{name:"undefined"}]},description:"字重",defaultValue:{value:"'normal'",computed:!1}},mono:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"是否等宽字体 (默认 true)",defaultValue:{value:"true",computed:!1}},animated:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"是否启用动画 (默认 true)",defaultValue:{value:"true",computed:!1}},fixedDecimals:{required:!1,tsType:{name:"union",raw:"FixedDecimalsMode | undefined",elements:[{name:"union",raw:"boolean | 'auto'",elements:[{name:"boolean"},{name:"literal",value:"'auto'"}]},{name:"undefined"}]},description:"小数位显示模式：false=隐藏尾随零, true=显示完整, 'auto'=自适应宽度",defaultValue:{value:"'auto'",computed:!1}},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""}}};Z.__docgenInfo={description:"",methods:[],displayName:"AmountWithFiat",props:{value:{required:!0,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},symbol:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},decimals:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:""},sign:{required:!1,tsType:{name:"union",raw:"AmountSign | undefined",elements:[{name:"union",raw:"'auto' | 'always' | 'never'",elements:[{name:"literal",value:"'auto'"},{name:"literal",value:"'always'"},{name:"literal",value:"'never'"}]},{name:"undefined"}]},description:"是否显示正负号"},color:{required:!1,tsType:{name:"union",raw:"AmountColor | undefined",elements:[{name:"union",raw:"'auto' | 'default' | 'positive' | 'negative'",elements:[{name:"literal",value:"'auto'"},{name:"literal",value:"'default'"},{name:"literal",value:"'positive'"},{name:"literal",value:"'negative'"}]},{name:"undefined"}]},description:"颜色模式：auto 根据正负自动，default 不变色"},compact:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"是否使用紧凑模式（1K, 1M）"},hidden:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"隐藏金额（隐私模式）"},loading:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"是否正在加载"},size:{required:!1,tsType:{name:"union",raw:"'xs' | 'sm' | 'md' | 'lg' | 'xl' | undefined",elements:[{name:"literal",value:"'xs'"},{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"literal",value:"'lg'"},{name:"literal",value:"'xl'"},{name:"undefined"}]},description:"尺寸"},weight:{required:!1,tsType:{name:"union",raw:"'normal' | 'medium' | 'semibold' | 'bold' | undefined",elements:[{name:"literal",value:"'normal'"},{name:"literal",value:"'medium'"},{name:"literal",value:"'semibold'"},{name:"literal",value:"'bold'"},{name:"undefined"}]},description:"字重"},mono:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"是否等宽字体 (默认 true)"},animated:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"是否启用动画 (默认 true)"},fixedDecimals:{required:!1,tsType:{name:"union",raw:"FixedDecimalsMode | undefined",elements:[{name:"union",raw:"boolean | 'auto'",elements:[{name:"boolean"},{name:"literal",value:"'auto'"}]},{name:"undefined"}]},description:"小数位显示模式：false=隐藏尾随零, true=显示完整, 'auto'=自适应宽度"},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},fiatValue:{required:!1,tsType:{name:"union",raw:"string | number | undefined",elements:[{name:"string"},{name:"number"},{name:"undefined"}]},description:""},fiatSymbol:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"",defaultValue:{value:"'$'",computed:!1}},fiatDecimals:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:"",defaultValue:{value:"2",computed:!1}},layout:{required:!1,tsType:{name:"union",raw:"'vertical' | 'horizontal' | undefined",elements:[{name:"literal",value:"'vertical'"},{name:"literal",value:"'horizontal'"},{name:"undefined"}]},description:"布局方向",defaultValue:{value:"'vertical'",computed:!1}}}};export{z as A,Z as a,C as f};
