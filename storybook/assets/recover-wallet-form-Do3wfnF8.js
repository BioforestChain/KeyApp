import{j as a,r as c}from"./iframe-Cdc63axx.js";import{c as u}from"./utils-CDN07tui.js";import{s as f}from"./index-D0E7N0oa.js";import{c as v}from"./index-B_jtOnfb.js";import{B as T}from"./button-CXgo3fuS.js";import"./input-DwamVU46.js";import{u as G}from"./useTranslation-B1THGpvK.js";import{I as M}from"./IconX-6uAECJsH.js";import{I as A}from"./IconCheck-CSFX6uTb.js";import{I as h}from"./IconAlertCircle-CXTf0ayz.js";import{I as R}from"./IconLoader2-DiFzCi9w.js";function ee(t=128){return f.generateMnemonic(t).split(" ")}function q(t){const e=t.join(" ").toLowerCase().trim();return y().some(n=>f.validateMnemonic(e,n))}function B(t){const e=t.toLowerCase();return y().some(n=>n.includes(e))}function y(){return Object.values(f.wordlists).filter(t=>Array.isArray(t))}function w({className:t,...e}){return a.jsx("textarea",{"data-slot":"textarea",className:u("border-input dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 disabled:bg-input/50 dark:disabled:bg-input/80 rounded-lg border bg-transparent px-2.5 py-2 text-base transition-colors focus-visible:ring-[3px] aria-invalid:ring-[3px] md:text-sm placeholder:text-muted-foreground flex field-sizing-content min-h-16 w-full outline-none disabled:cursor-not-allowed disabled:opacity-50",t),...e})}w.__docgenInfo={description:"",methods:[],displayName:"Textarea"};function C({className:t,...e}){return a.jsx("div",{"data-slot":"input-group",role:"group",className:u("border-input dark:bg-input/30 has-[[data-slot=input-group-control]:focus-visible]:border-ring has-[[data-slot=input-group-control]:focus-visible]:ring-ring/50 has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40 has-disabled:bg-input/50 dark:has-disabled:bg-input/80 h-8 rounded-lg border transition-colors has-disabled:opacity-50 has-[[data-slot=input-group-control]:focus-visible]:ring-[3px] has-[[data-slot][aria-invalid=true]]:ring-[3px] has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3 has-[>[data-align=block-start]]:[&>input]:pb-3 has-[>[data-align=inline-end]]:[&>input]:pr-1.5 has-[>[data-align=inline-start]]:[&>input]:pl-1.5 [[data-slot=combobox-content]_&]:focus-within:border-inherit [[data-slot=combobox-content]_&]:focus-within:ring-0 group/input-group relative flex w-full min-w-0 items-center outline-none has-[>textarea]:h-auto",t),...e})}const L=v("text-muted-foreground h-auto gap-2 py-1.5 text-sm font-medium group-data-[disabled=true]/input-group:opacity-50 [&>kbd]:rounded-[calc(var(--radius)-5px)] [&>svg:not([class*='size-'])]:size-4 flex cursor-text items-center justify-center select-none",{variants:{align:{"inline-start":"pl-2 has-[>button]:ml-[-0.3rem] has-[>kbd]:ml-[-0.15rem] order-first","inline-end":"pr-2 has-[>button]:mr-[-0.3rem] has-[>kbd]:mr-[-0.15rem] order-last","block-start":"px-2.5 pt-2 group-has-[>input]/input-group:pt-2 [.border-b]:pb-2 order-first w-full justify-start","block-end":"px-2.5 pb-2 group-has-[>input]/input-group:pb-2 [.border-t]:pt-2 order-last w-full justify-start"}},defaultVariants:{align:"inline-start"}});function k({className:t,align:e="inline-start",...n}){return a.jsx("div",{role:"group","data-slot":"input-group-addon","data-align":e,className:u(L({align:e}),t),onClick:r=>{r.target.closest("button")||r.currentTarget.parentElement?.querySelector("input")?.focus()},...n})}const F=v("gap-2 text-sm shadow-none flex items-center",{variants:{size:{xs:"h-6 gap-1 rounded-[calc(var(--radius)-3px)] px-1.5 [&>svg:not([class*='size-'])]:size-3.5",sm:"","icon-xs":"size-6 rounded-[calc(var(--radius)-3px)] p-0 has-[>svg]:p-0","icon-sm":"size-8 p-0 has-[>svg]:p-0"}},defaultVariants:{size:"xs"}});function j({className:t,type:e="button",variant:n="ghost",size:r="xs",...s}){return a.jsx(T,{type:e,"data-size":r,variant:n,className:u(F({size:r}),t),...s})}function N({className:t,...e}){return a.jsx(w,{"data-slot":"input-group-control",className:u("rounded-none border-0 bg-transparent py-2 shadow-none ring-0 focus-visible:ring-0 disabled:bg-transparent aria-invalid:ring-0 dark:bg-transparent dark:disabled:bg-transparent flex-1 resize-none",t),...e})}C.__docgenInfo={description:"",methods:[],displayName:"InputGroup"};k.__docgenInfo={description:"",methods:[],displayName:"InputGroupAddon",props:{align:{defaultValue:{value:'"inline-start"',computed:!1},required:!1}}};j.__docgenInfo={description:"",methods:[],displayName:"InputGroupButton",props:{type:{required:!1,tsType:{name:"union",raw:'"button" | "submit" | "reset"',elements:[{name:"literal",value:'"button"'},{name:"literal",value:'"submit"'},{name:"literal",value:'"reset"'}]},description:"",defaultValue:{value:'"button"',computed:!1}},variant:{defaultValue:{value:'"ghost"',computed:!1},required:!1},size:{defaultValue:{value:'"xs"',computed:!1},required:!1}}};N.__docgenInfo={description:"",methods:[],displayName:"InputGroupTextarea"};const g=[12,15,18,21,24,36];function D(t){if(t<=0)return null;for(const e of g)if(t<=e)return e;return 36}function E(t){const e=t.trim().toLowerCase();if(!e)return{isValid:!1,wordCount:0,expectedWordCount:null,invalidWords:[],isValidating:!1};const n=e.split(/\s+/).filter(Boolean),r=n.length,s=D(r),p=n.filter(m=>!B(m));return{isValid:g.includes(r)&&p.length===0&&q(n),wordCount:r,expectedWordCount:s,invalidWords:p,isValidating:!1}}function O({onSubmit:t,isSubmitting:e=!1,className:n}){const{t:r}=G("onboarding"),[s,p]=c.useState(""),[l,x]=c.useState({isValid:!1,wordCount:0,expectedWordCount:null,invalidWords:[],isValidating:!1});c.useEffect(()=>{const o=setTimeout(()=>{x(E(s))},150);return()=>clearTimeout(o)},[s]);const m=c.useCallback(o=>{p(o.target.value)},[]),I=c.useCallback(o=>{if(o.preventDefault(),!l.isValid||e)return;const i=s.trim().toLowerCase().split(/\s+/).filter(Boolean);t({mnemonic:i,wordCount:i.length})},[s,l.isValid,e,t]),V=c.useCallback(()=>{p("")},[]),z=c.useCallback(o=>{const i=o.target;i.style.height="auto",i.style.height=Math.min(i.scrollHeight,200)+"px"},[]),d=c.useMemo(()=>{const{isValid:o,wordCount:i,expectedWordCount:W,invalidWords:b}=l;if(i===0)return{type:"hint",text:r("recover.form.hint")};if(b.length>0){const _=b[0];return{type:"error",text:r("recover.form.invalidWord",{word:_})}}return g.includes(i)?o?{type:"success",text:r("recover.form.validMnemonic")}:{type:"error",text:r("recover.form.checksumFailed")}:{type:"warning",text:r("recover.form.wordCountHint",{current:i,expected:W})}},[l,r]);return a.jsxs("form",{onSubmit:I,className:u("space-y-4",n),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium",children:r("recover.form.enterMnemonic")}),l.wordCount>0&&a.jsx("span",{className:"text-muted-foreground text-xs",children:r("recover.form.wordCount",{count:l.wordCount})})]}),a.jsxs(C,{className:u("h-auto",l.isValid&&"border-green-500/50",d.type==="error"&&"border-destructive/50"),children:[a.jsx(N,{"data-testid":"mnemonic-textarea",value:s,onChange:o=>{m(o),z(o)},placeholder:r("recover.form.placeholder"),disabled:e,rows:4,className:"min-h-24",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1}),s&&!e&&a.jsx(k,{align:"inline-end",className:"self-start pt-2",children:a.jsx(j,{size:"icon-xs",onClick:V,"aria-label":r("recover.form.clear"),children:a.jsx(M,{className:"size-4"})})})]}),a.jsxs("div",{className:u("flex items-start gap-2 rounded-lg px-3 py-2 text-sm",d.type==="hint"&&"bg-muted/50 text-muted-foreground",d.type==="success"&&"bg-green-500/10 text-green-600",d.type==="warning"&&"bg-yellow-500/10 text-yellow-600",d.type==="error"&&"bg-destructive/10 text-destructive"),children:[d.type==="success"&&a.jsx(A,{className:"mt-0.5 size-4 shrink-0"}),d.type==="error"&&a.jsx(h,{className:"mt-0.5 size-4 shrink-0"}),d.type==="warning"&&a.jsx(h,{className:"mt-0.5 size-4 shrink-0"}),a.jsx("span",{children:d.text})]}),a.jsx("div",{className:"bg-muted/30 text-muted-foreground rounded-lg px-3 py-2 text-xs",children:a.jsx("p",{children:r("recover.form.securityNotice")})}),a.jsxs("button",{type:"submit","data-testid":"continue-button",disabled:!l.isValid||e,className:u("flex w-full items-center justify-center gap-2 rounded-full py-3 font-medium text-primary-foreground transition-colors","bg-primary hover:bg-primary/90","disabled:cursor-not-allowed disabled:opacity-50"),children:[e&&a.jsx(R,{className:"size-4 animate-spin"}),r(e?"recover.form.verifying":"recover.form.continue")]})]})}O.__docgenInfo={description:`Recover wallet form component
Provides textarea input with real-time BIP39 validation`,methods:[],displayName:"RecoverWalletForm",props:{onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: RecoverWalletFormData) => void",signature:{arguments:[{type:{name:"RecoverWalletFormData"},name:"data"}],return:{name:"void"}}},description:"Form submit callback with validated mnemonic"},isSubmitting:{required:!1,tsType:{name:"boolean"},description:"Whether form is submitting",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"Additional class name"}}};export{O as R,ee as g,q as v};
