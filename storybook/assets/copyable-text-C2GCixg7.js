import{j as s,r as l}from"./iframe-CHpnNFF-.js";import{c as m}from"./utils-CDN07tui.js";import{B as y}from"./button-DoYcZF2P.js";import{c as g,I as x}from"./web-BxSWUboP.js";import{u as v}from"./useTranslation-Cn35rriq.js";import{I as E}from"./IconCheck-Cw9WdQrc.js";import{I as T}from"./IconX-5q83HnUG.js";function C({label:i,hint:e,error:r,required:t,children:n,className:o}){return s.jsxs("div",{className:m("space-y-2",o),children:[i&&s.jsxs("label",{className:"text-sm font-medium",children:[i,t&&s.jsx("span",{className:"ml-1 text-destructive",children:"*"})]}),n,e&&!r&&s.jsx("p",{className:"text-xs text-muted-foreground",children:e}),r&&s.jsx("p",{className:"-mt-0.5 text-xs text-destructive",children:r})]})}C.__docgenInfo={description:"",methods:[],displayName:"FormField",props:{label:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"字段标签"},hint:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"帮助文本"},error:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"错误信息"},required:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"是否必填"},children:{required:!0,tsType:{name:"ReactNode"},description:"子元素 (input, select 等)"},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"自定义类名"}}};const b=l.createContext(null),u={didCatch:!1,error:null};let N=class extends l.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=u}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var r,t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];(r=(t=this.props).onReset)===null||r===void 0||r.call(t,{args:o,reason:"imperative-api"}),this.setState(u)}}componentDidCatch(e,r){var t,n;(t=(n=this.props).onError)===null||t===void 0||t.call(n,e,r)}componentDidUpdate(e,r){const{didCatch:t}=this.state,{resetKeys:n}=this.props;if(t&&r.error!==null&&j(e.resetKeys,n)){var o,a;(o=(a=this.props).onReset)===null||o===void 0||o.call(a,{next:n,prev:e.resetKeys,reason:"keys"}),this.setState(u)}}render(){const{children:e,fallbackRender:r,FallbackComponent:t,fallback:n}=this.props,{didCatch:o,error:a}=this.state;let d=e;if(o){const c={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")d=r(c);else if(t)d=l.createElement(t,c);else if(n!==void 0)d=n;else throw a}return l.createElement(b.Provider,{value:{didCatch:o,error:a,resetErrorBoundary:this.resetErrorBoundary}},d)}};function j(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return i.length!==e.length||i.some((r,t)=>!Object.is(r,e[t]))}function q({error:i,resetErrorBoundary:e}){return s.jsxs("div",{className:"flex min-h-[200px] flex-col items-center justify-center gap-4 p-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-destructive",children:"Something went wrong"}),s.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:i.message||"An unexpected error occurred"})]}),s.jsx(y,{variant:"outline",onClick:e,children:"Try again"})]})}function B({children:i,fallback:e,onError:r}){return s.jsx(N,{FallbackComponent:e?()=>s.jsx(s.Fragment,{children:e}):q,onError:(t,n)=>{console.error("ErrorBoundary caught an error:",t,n),r?.(t,n)},children:i})}B.__docgenInfo={description:"",methods:[],displayName:"ErrorBoundary",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},fallback:{required:!1,tsType:{name:"ReactNode"},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(error: Error, info: React.ErrorInfo) => void",signature:{arguments:[{type:{name:"Error"},name:"error"},{type:{name:"ReactErrorInfo",raw:"React.ErrorInfo"},name:"info"}],return:{name:"void"}}},description:""}}};function w({text:i,displayText:e,className:r,iconClassName:t,onCopy:n,testId:o}){const{t:a}=v("common"),[d,c]=l.useState("idle"),p=l.useCallback(async()=>{try{await g.write({text:i}),c("copied"),n?.(),setTimeout(()=>c("idle"),2e3)}catch{c("failed"),setTimeout(()=>c("idle"),2e3)}},[i,n]),f=d==="copied"?E:d==="failed"?T:x,h=d==="copied"?"text-green-500":d==="failed"?"text-red-500":"text-muted-foreground";return s.jsxs("button",{type:"button",onClick:p,...o&&{"data-testid":o},className:m("inline-flex items-center gap-1.5 font-mono transition-colors","hover:text-primary focus-visible:ring-ring rounded focus:outline-none focus-visible:ring-2",r),title:i,"aria-label":a(d==="copied"?"copiedToClipboard":"clickToCopy"),children:[s.jsx("span",{className:"break-all",children:e??i}),s.jsx(f,{className:m("size-4 shrink-0",h,t),"aria-hidden":"true"}),s.jsx("span",{role:"status","aria-live":"polite",className:"sr-only",children:d==="copied"?a("copiedToClipboard"):""})]})}w.__docgenInfo={description:"",methods:[],displayName:"CopyableText",props:{text:{required:!0,tsType:{name:"string"},description:""},displayText:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},iconClassName:{required:!1,tsType:{name:"string"},description:""},onCopy:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},testId:{required:!1,tsType:{name:"string"},description:""}}};export{w as C,B as E,C as F};
