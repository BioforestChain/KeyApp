import{r as s,j as t}from"./iframe-DVFyc1Xs.js";import{c as y}from"./utils-CDN07tui.js";import{p as f,P as h}from"./pattern-lock-CwZTy0sA.js";import{I as S,G as b}from"./index-CBzETV1A.js";import"./amount-display-BlwJTbN5.js";import"./animated-number-CjXyCj6L.js";import"./time-display-Bu7QyM3W.js";import"./copyable-text-Bj5-4deP.js";import{u as L}from"./useTranslation-CY2fQRTf.js";import{I}from"./IconShieldCheck-D_aeZy7Y.js";import{I as T}from"./IconChevronRight-Cj_JX5TM.js";import{c as P}from"./createReactComponent-BBBX6Kky.js";const R=[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]],_=P("outline","refresh","Refresh",R);function q({onComplete:m,minPoints:a=4,className:x}){const{t:e}=L("security"),[r,l]=s.useState("set"),[n,p]=s.useState([]),[k,o]=s.useState([]),[d,c]=s.useState(!1),g=s.useCallback(i=>{},[]),v=s.useCallback(i=>{if(i.length>=a){const u=f(n),C=f(i);u===C?m(u):(c(!0),setTimeout(()=>{c(!1),o([])},1500))}},[n,a,m]),j=s.useCallback(()=>{l("set"),p([]),o([]),c(!1)},[]),N=n.length>=a;return t.jsxs("div",{className:y("space-y-6",x),children:[t.jsxs("div",{className:"text-center",children:[t.jsx(S,{icon:I,variant:"primary",size:"lg",className:"mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-bold",children:e(r==="set"?"patternLock.setTitle":"patternLock.confirmTitle")}),t.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:e(r==="set"?"patternLock.setDesc":"patternLock.confirmDesc")})]}),r==="set"?t.jsx(h,{value:n,onChange:p,onComplete:g,minPoints:a,"data-testid":"pattern-lock-set"}):t.jsx(h,{value:k,onChange:o,onComplete:v,minPoints:a,error:d,"data-testid":"pattern-lock-confirm"}),t.jsx("div",{className:"h-5",children:d&&t.jsx("p",{className:"text-destructive text-center text-sm animate-in fade-in","data-testid":"pattern-lock-mismatch",children:e("patternLock.mismatch")})}),t.jsxs("div",{className:"h-12",children:[r==="set"&&N&&t.jsxs(b,{variant:"mint",className:"w-full",onClick:()=>l("confirm"),"data-testid":"pattern-lock-next-button",children:[e("patternLock.confirmTitle"),t.jsx(T,{className:"ml-2 size-4"})]}),r==="confirm"&&t.jsxs("button",{type:"button",onClick:j,className:"mx-auto flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors","data-testid":"pattern-lock-reset-button",children:[t.jsx(_,{className:"size-4"}),e("patternLock.reset")]})]})]})}q.__docgenInfo={description:`图案锁设置组件

两步流程：
1. 设置图案
2. 确认图案`,methods:[],displayName:"PatternLockSetup",props:{onComplete:{required:!0,tsType:{name:"signature",type:"function",raw:"(patternKey: string) => void",signature:{arguments:[{type:{name:"string"},name:"patternKey"}],return:{name:"void"}}},description:"设置完成回调，返回图案字符串"},minPoints:{required:!1,tsType:{name:"number"},description:"最少需要连接的点数",defaultValue:{value:"4",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"额外的 className"}}};export{_ as I,q as P};
