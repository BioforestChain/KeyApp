import{r as n,j as r}from"./iframe-Dt8wZwjo.js";import{c as Ce}from"./utils-4perknFd.js";import{T as dt}from"./token-icon-de4jd_f2.js";import"./LoadingSpinner-C2l8LZ79.js";import{A as ft}from"./amount-display-BQR-FVr2.js";import"./animated-number-dSc8u9RY.js";import"./time-display-C46oP4S7.js";import"./service-status-alert-Jd_yI-IU.js";import{c as xt}from"./createReactComponent-BDIgNuTp.js";import{I as Ot}from"./IconCheck-USSEt4uX.js";import{I as zt}from"./IconChevronDown-Dp37T5Ai.js";import{c as H,u as it,h as Ft,ab as g,z as at,a as Xe,o as _t,j as Lt,n as qt,ac as Wt,ad as $t,K as Ae,g as Yt,a8 as Xt,L as ot,l as pt,q as Kt,f as Gt,Y as Jt,m as Zt,I as Qt,i as en,p as vt,a2 as tn,ae as nn,e as on,t as bt,d as sn}from"./composite-DPoRaMak.js";import{f as Ke,a as pe,b as ie,d as rn,m as yt,z as St,y as mt,u as me,j as gt}from"./useRenderElement-D_lHscCc.js";import{e as ln,u as wt,a as Rt,b as an,c as ht,d as cn,f as un}from"./useField-BxAx2kGb.js";import{c as Se,n as It,f as dn,j as fn,w as pn,h as tt}from"./useBaseUiId-Bk33Hj1D.js";import{h as mn,d as gn,e as hn,f as xn,b as vn,C as bn,a as yn,g as Sn,u as wn,I as Rn}from"./useCompositeListItem-BK39sBcw.js";import{u as Tt}from"./useButton-CdLwvVYf.js";import{r as In}from"./index-CdqI_8sU.js";import{u as Tn}from"./useTranslation-Br48bveG.js";const Mn=[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]],An=xt("outline","chevron-up","ChevronUp",Mn);const Cn=[["path",{d:"M8 9l4 -4l4 4",key:"svg-0"}],["path",{d:"M16 15l-4 4l-4 -4",key:"svg-1"}]],Vn=xt("outline","selector","Selector",Cn);function En(e){const t=n.useRef(!0);t.current&&(t.current=!1,e())}const Mt=n.createContext(null),At=n.createContext(null);function ge(){const e=n.useContext(Mt);if(e===null)throw new Error(Ke(60));return e}function Ct(){const e=n.useContext(At);if(e===null)throw new Error(Ke(61));return e}const Pn=(e,t)=>Object.is(e,t);function Ne(e,t,o){return e==null||t==null?Object.is(e,t):o(e,t)}function nt(e,t,o){return!e||e.length===0?!1:e.some(u=>u===void 0?!1:Ne(u,t,o))}function st(e,t,o){return!e||e.length===0?-1:e.findIndex(u=>u===void 0?!1:Ne(u,t,o))}function jn(e,t,o){return e.filter(u=>!Ne(u,t,o))}function rt(e){if(e==null)return"";if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function Nn(e){return e!=null&&e.length>0&&typeof e[0]=="object"&&e[0]!=null&&"items"in e[0]}function ze(e,t){if(t&&e!=null)return t(e)??"";if(e&&typeof e=="object"){if("label"in e&&e.label!=null)return String(e.label);if("value"in e)return String(e.value)}return rt(e)}function je(e,t){return t&&e!=null?t(e)??"":e&&typeof e=="object"&&"value"in e&&"label"in e?rt(e.value):rt(e)}function Hn(e,t,o){if(o&&e!=null)return o(e);if(e&&typeof e=="object"&&"label"in e&&e.label!=null)return e.label;if(t&&!Array.isArray(t))return t[e]??ze(e,o);if(Array.isArray(t)){const u=Nn(t)?t.flatMap(h=>h.items):t;if(e==null){const h=u.find(s=>s.value==null);return h&&h.label!=null?h.label:ze(e,o)}if(typeof e!="object"){const h=u.find(s=>s&&s.value===e);return h&&h.label!=null?h.label:ze(e,o)}if("value"in e){const h=u.find(s=>s&&s.value===e.value);if(h&&h.label!=null)return h.label}}return ze(e,o)}function kn(e,t){return!Array.isArray(e)||e.length===0?"":e.map(o=>ze(o,t)).join(", ")}const d={id:H(e=>e.id),modal:H(e=>e.modal),multiple:H(e=>e.multiple),items:H(e=>e.items),itemToStringLabel:H(e=>e.itemToStringLabel),itemToStringValue:H(e=>e.itemToStringValue),isItemEqualToValue:H(e=>e.isItemEqualToValue),value:H(e=>e.value),open:H(e=>e.open),mounted:H(e=>e.mounted),forceMount:H(e=>e.forceMount),transitionStatus:H(e=>e.transitionStatus),openMethod:H(e=>e.openMethod),activeIndex:H(e=>e.activeIndex),selectedIndex:H(e=>e.selectedIndex),isActive:H((e,t)=>e.activeIndex===t),isSelected:H((e,t,o)=>{const u=e.isItemEqualToValue,h=e.value;return e.multiple?Array.isArray(h)&&h.some(s=>Ne(s,o,u)):e.selectedIndex===t&&e.selectedIndex!==null?!0:Ne(h,o,u)}),isSelectedByFocus:H((e,t)=>e.selectedIndex===t),popupProps:H(e=>e.popupProps),triggerProps:H(e=>e.triggerProps),triggerElement:H(e=>e.triggerElement),positionerElement:H(e=>e.positionerElement),listElement:H(e=>e.listElement),scrollUpArrowVisible:H(e=>e.scrollUpArrowVisible),scrollDownArrowVisible:H(e=>e.scrollDownArrowVisible),hasScrollArrows:H(e=>e.hasScrollArrows),serializedValue:H(e=>{const{multiple:t,value:o,itemToStringValue:u}=e;return t&&Array.isArray(o)&&o.length===0?"":je(o,u)})};function Un(e,t){const o=n.useRef(e),u=pe(t);ie(()=>{o.current!==e&&u(o.current)},[e,u]),ie(()=>{o.current=e},[e])}function Bn(e){const{id:t,value:o,defaultValue:u=null,onValueChange:h,open:s,defaultOpen:m=!1,onOpenChange:f,name:w,disabled:T=!1,readOnly:R=!1,required:I=!1,modal:x=!0,actionsRef:z,inputRef:C,onOpenChangeComplete:D,items:v,multiple:S=!1,itemToStringLabel:N,itemToStringValue:i,isItemEqualToValue:F=Pn,highlightItemOnHover:ee=!0,children:te}=e,{clearErrors:U}=ln(),{setDirty:k,shouldValidateOnChange:ae,validityData:X,setFilled:V,name:Z,disabled:W,validation:a}=wt(),{controlId:l}=Rt(),j=an({id:t}),_=W||T,M=Z??w,[c,B]=ht({controlled:o,default:S?u??mt:u,name:"Select",state:"value"}),[E,K]=ht({controlled:s,default:m,name:"Select",state:"open"}),P=n.useRef([]),$=n.useRef([]),Y=n.useRef(null),p=n.useRef(null),b=n.useRef(0),L=n.useRef(null),q=n.useRef([]),oe=n.useRef(!1),ce=n.useRef(!1),se=n.useRef(null),re=n.useRef({allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}),we=n.useRef(!1),{mounted:le,setMounted:O,transitionStatus:ue}=it(E),{openMethod:he,triggerProps:G,reset:J}=Ft(E),y=rn(()=>new $t({id:j,modal:x,multiple:S,itemToStringLabel:N,itemToStringValue:i,isItemEqualToValue:F,value:c,open:E,mounted:le,transitionStatus:ue,items:v,forceMount:!1,openMethod:null,activeIndex:null,selectedIndex:null,popupProps:{},triggerProps:{},triggerElement:null,positionerElement:null,listElement:null,scrollUpArrowVisible:!1,scrollDownArrowVisible:!1,hasScrollArrows:!1})).current,de=g(y,d.activeIndex),xe=g(y,d.selectedIndex),ve=g(y,d.triggerElement),ne=g(y,d.positionerElement),He=n.useMemo(()=>S&&Array.isArray(c)&&c.length===0?"":je(c,i),[S,c,i]),Ge=n.useMemo(()=>S&&Array.isArray(c)?c.map(A=>je(A,i)):je(c,i),[S,c,i]),Fe=at(y.state.triggerElement);cn({id:j,commit:a.commit,value:c,controlRef:Fe,name:M,getValue:()=>Ge});const ke=n.useRef(c);ie(()=>{c!==ke.current&&y.set("forceMount",!0)},[y,c]),ie(()=>{V(c!==null)},[c,V]),ie(function(){if(E)return;const Q=q.current;if(S){const Te=Array.isArray(c)?c:[];if(Te.length===0){y.set("selectedIndex",null);return}const ye=Te[Te.length-1],qe=st(Q,ye,F);y.set("selectedIndex",qe===-1?null:qe);return}const Ie=st(Q,c,F);y.set("selectedIndex",Ie===-1?null:Ie)},[S,E,c,q,F,y]),Un(c,()=>{U(M),k(c!==X.initialValue),ae()?a.commit(c):a.commit(c,!0)});const Ve=pe((A,Q)=>{if(f?.(A,Q),!Q.isCanceled&&(K(A),!A&&y.state.activeIndex!==null)){const Ie=P.current[y.state.activeIndex];queueMicrotask(()=>{Ie?.setAttribute("tabindex","-1")})}}),Ee=pe(()=>{O(!1),y.set("activeIndex",null),J(),D?.(!1)});Xe({enabled:!z,open:E,ref:Y,onComplete(){E||Ee()}}),n.useImperativeHandle(z,()=>({unmount:Ee}),[Ee]);const Re=pe((A,Q)=>{h?.(A,Q),!Q.isCanceled&&B(A)}),fe=pe(()=>{const A=y.state.listElement||Y.current;if(!A)return;const Q=A.scrollTop,Ie=A.scrollTop+A.clientHeight,Te=Q>1,ye=Ie<A.scrollHeight-1;y.state.scrollUpArrowVisible!==Te&&y.set("scrollUpArrowVisible",Te),y.state.scrollDownArrowVisible!==ye&&y.set("scrollDownArrowVisible",ye)}),be=mn({open:E,onOpenChange:Ve,elements:{reference:ve,floating:ne}}),Ue=_t(be,{enabled:!R&&!_,event:"mousedown"}),_e=Lt(be,{bubbles:!1}),Je=gn(be,{enabled:!R&&!_,listRef:P,activeIndex:de,selectedIndex:xe,disabledIndices:mt,onNavigate(A){A===null&&!E||y.set("activeIndex",A)},focusItemOnHover:!1}),Ze=hn(be,{enabled:!R&&!_&&(E||!S),listRef:$,activeIndex:de,selectedIndex:xe,onMatch(A){E?y.set("activeIndex",A):Re(q.current[A],Se("none"))},onTypingChange(A){oe.current=A}}),{getReferenceProps:Be,getFloatingProps:Pe,getItemProps:Le}=qt([Ue,_e,Je,Ze]),De=n.useMemo(()=>yt(Be(),G),[Be,G]);En(()=>{y.update({popupProps:Pe(),triggerProps:De})}),ie(()=>{y.update({id:j,modal:x,multiple:S,value:c,open:E,mounted:le,transitionStatus:ue,popupProps:Pe(),triggerProps:De,items:v,itemToStringLabel:N,itemToStringValue:i,isItemEqualToValue:F,openMethod:he})},[y,j,x,S,c,E,le,ue,Pe,De,v,N,i,F,he]);const Me=n.useMemo(()=>({store:y,name:M,required:I,disabled:_,readOnly:R,multiple:S,itemToStringLabel:N,itemToStringValue:i,highlightItemOnHover:ee,setValue:Re,setOpen:Ve,listRef:P,popupRef:Y,scrollHandlerRef:p,handleScrollArrowVisibility:fe,scrollArrowsMountedCountRef:b,getItemProps:Le,events:be.context.events,valueRef:L,valuesRef:q,labelsRef:$,typingRef:oe,selectionRef:re,selectedItemTextRef:se,validation:a,onOpenChangeComplete:D,keyboardActiveRef:ce,alignItemWithTriggerActiveRef:we,initialValueRef:ke}),[y,M,I,_,R,S,N,i,ee,Re,Ve,Le,be.context.events,a,D,fe]),Oe=St(C,a.inputRef),Qe=S&&Array.isArray(c)&&c.length>0,et=n.useMemo(()=>!S||!Array.isArray(c)||!M?null:c.map(A=>{const Q=je(A,i);return r.jsx("input",{type:"hidden",name:M,value:Q},Q)}),[S,c,M,i]);return r.jsx(Mt.Provider,{value:Me,children:r.jsxs(At.Provider,{value:be,children:[te,r.jsx("input",{...a.getInputValidationProps({onFocus(){y.state.triggerElement?.focus()},onChange(A){if(A.nativeEvent.defaultPrevented)return;const Q=A.target.value,Ie=Se(It,A.nativeEvent);function Te(){if(S)return;const ye=q.current.find(qe=>je(qe,i).toLowerCase()===Q.toLowerCase());ye!=null&&(k(ye!==X.initialValue),Re(ye,Ie),ae()&&a.commit(ye))}y.set("forceMount",!0),queueMicrotask(Te)}}),id:t||l||void 0,name:S?void 0:M,value:He,disabled:_,required:I&&!Qe,readOnly:R,ref:Oe,style:Wt,tabIndex:-1,"aria-hidden":!0}),et]})})}const We=2,Dn={...Xt,...un,value:()=>null},On=n.forwardRef(function(t,o){const{render:u,className:h,disabled:s=!1,nativeButton:m=!0,...f}=t,{setTouched:w,setFocused:T,validationMode:R,state:I,disabled:x}=wt(),{labelId:z}=Rt(),{store:C,setOpen:D,selectionRef:v,validation:S,readOnly:N,alignItemWithTriggerActiveRef:i,disabled:F,keyboardActiveRef:ee}=ge(),te=x||F||s,U=g(C,d.open),k=g(C,d.value),ae=g(C,d.triggerProps),X=g(C,d.positionerElement),V=g(C,d.listElement),Z=g(C,d.serializedValue),W=at(X),a=n.useRef(null),l=Ae(),j=Ae(),{getButtonProps:_,buttonRef:M}=Tt({disabled:te,native:m}),c=pe(p=>{C.set("triggerElement",p)}),B=St(o,a,M,c),E=Ae(),K=Ae();n.useEffect(()=>{if(U)return K.start(200,()=>{v.current.allowUnselectedMouseUp=!0,E.start(200,()=>{v.current.allowSelectedMouseUp=!0})}),()=>{E.clear(),K.clear()};v.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1},j.clear()},[U,v,j,E,K]);const P=n.useMemo(()=>V?.id??Yt(X)?.id,[V,X]),$=yt(ae,{role:"combobox","aria-expanded":U?"true":"false","aria-haspopup":"listbox","aria-controls":U?P:void 0,"aria-labelledby":z,"aria-readonly":N||void 0,tabIndex:te?-1:0,ref:B,onFocus(p){T(!0),U&&i.current&&D(!1,Se(dn,p.nativeEvent)),l.start(0,()=>{C.set("forceMount",!0)})},onBlur(){w(!0),T(!1),R==="onBlur"&&S.commit(k)},onPointerMove(){ee.current=!1},onKeyDown(){ee.current=!0},onMouseDown(p){if(U)return;const b=ot(p.currentTarget);function L(q){if(!a.current)return;const oe=q.target;if(pt(a.current,oe)||pt(W.current,oe)||oe===a.current)return;const ce=xn(a.current);q.clientX>=ce.left-We&&q.clientX<=ce.right+We&&q.clientY>=ce.top-We&&q.clientY<=ce.bottom+We||D(!1,Se(fn,q))}j.start(0,()=>{b.addEventListener("mouseup",L,{once:!0})})}},S.getValidationProps,f,_);$.role="combobox";const Y=n.useMemo(()=>({...I,open:U,disabled:te,value:k,readOnly:N,placeholder:!Z}),[I,U,te,k,N,Z]);return me("button",t,{ref:[o,a],state:Y,stateAttributesMapping:Dn,props:$})}),zn={value:()=>null},Fn=n.forwardRef(function(t,o){const{className:u,render:h,children:s,...m}=t,{store:f,valueRef:w}=ge(),T=g(f,d.value),R=g(f,d.items),I=g(f,d.itemToStringLabel),x=g(f,d.serializedValue),z=n.useMemo(()=>({value:T,placeholder:!x}),[T,x]),C=typeof s=="function"?s(T):s??(Array.isArray(T)?kn(T,I):Hn(T,R,I));return me("span",t,{state:z,ref:[o,w],props:[{children:C},m],stateAttributesMapping:zn})}),_n=n.forwardRef(function(t,o){const{className:u,render:h,...s}=t,{store:m}=ge(),f=g(m,d.open),w=n.useMemo(()=>({open:f}),[f]);return me("span",t,{state:w,ref:o,props:[{"aria-hidden":!0,children:"▼"},s],stateAttributesMapping:Kt})}),Ln=n.createContext(void 0),qn=n.forwardRef(function(t,o){const{store:u}=ge(),h=g(u,d.mounted),s=g(u,d.forceMount);return h||s?r.jsx(Ln.Provider,{value:!0,children:r.jsx(Gt,{ref:o,...t})}):null}),Vt=n.createContext(void 0);function ct(){const e=n.useContext(Vt);if(!e)throw new Error(Ke(59));return e}function Ye(e,t){e&&Object.assign(e.style,t)}const Et={position:"relative",maxHeight:"100%",overflowX:"hidden",overflowY:"auto"},Wn={position:"fixed"},$n=n.forwardRef(function(t,o){const{anchor:u,positionMethod:h="absolute",className:s,render:m,side:f="bottom",align:w="center",sideOffset:T=0,alignOffset:R=0,collisionBoundary:I="clipping-ancestors",collisionPadding:x,arrowPadding:z=5,sticky:C=!1,disableAnchorTracking:D,alignItemWithTrigger:v=!0,collisionAvoidance:S=Jt,...N}=t,{store:i,listRef:F,labelsRef:ee,alignItemWithTriggerActiveRef:te,selectedItemTextRef:U,valuesRef:k,initialValueRef:ae,popupRef:X,setValue:V}=ge(),Z=Ct(),W=g(i,d.open),a=g(i,d.mounted),l=g(i,d.modal),j=g(i,d.value),_=g(i,d.openMethod),M=g(i,d.positionerElement),c=g(i,d.triggerElement),B=g(i,d.isItemEqualToValue),E=n.useRef(null),K=n.useRef(null),[P,$]=n.useState(v),Y=a&&P&&_!=="touch";!a&&P!==v&&$(v),ie(()=>{a||(d.scrollUpArrowVisible(i.state)&&i.set("scrollUpArrowVisible",!1),d.scrollDownArrowVisible(i.state)&&i.set("scrollDownArrowVisible",!1))},[i,a]),n.useImperativeHandle(te,()=>Y),Zt((Y||l)&&W&&_!=="touch",c);const p=vn({anchor:u,floatingRootContext:Z,positionMethod:h,mounted:a,side:f,sideOffset:T,align:w,alignOffset:R,arrowPadding:z,collisionBoundary:I,collisionPadding:x,sticky:C,disableAnchorTracking:D??Y,collisionAvoidance:S,keepMounted:!0}),b=Y?"none":p.side,L=Y?Wn:p.positionerStyles,q=n.useMemo(()=>{const O={};return W||(O.pointerEvents="none"),{role:"presentation",hidden:!a,style:{...L,...O}}},[W,a,L]),oe=n.useMemo(()=>({open:W,side:b,align:p.align,anchorHidden:p.anchorHidden}),[W,b,p.align,p.anchorHidden]),ce=pe(O=>{i.set("positionerElement",O)}),se=me("div",t,{ref:[o,ce],state:oe,stateAttributesMapping:vt,props:[q,N]}),re=n.useRef(0),we=pe(O=>{if(O.size===0&&re.current===0||k.current.length===0)return;const ue=re.current;if(re.current=O.size,O.size===ue)return;const he=Se(It);if(ue!==0&&!i.state.multiple&&j!==null&&st(k.current,j,B)===-1){const J=ae.current,de=J!=null&&nt(k.current,J,B)?J:null;V(de,he),de===null&&(i.set("selectedIndex",null),U.current=null)}if(ue!==0&&i.state.multiple&&Array.isArray(j)){const G=j.filter(J=>nt(k.current,J,B));(G.length!==j.length||G.some(J=>!nt(j,J,B)))&&(V(G,he),G.length===0&&(i.set("selectedIndex",null),U.current=null))}if(W&&Y){i.update({scrollUpArrowVisible:!1,scrollDownArrowVisible:!1});const G={height:""};Ye(M,G),Ye(X.current,G)}}),le=n.useMemo(()=>({...p,side:b,alignItemWithTriggerActive:Y,setControlledAlignItemWithTrigger:$,scrollUpArrowRef:E,scrollDownArrowRef:K}),[p,b,Y,$]);return r.jsx(bn,{elementsRef:F,labelsRef:ee,onMapChange:we,children:r.jsxs(Vt.Provider,{value:le,children:[a&&l&&r.jsx(Qt,{inert:en(!W),cutout:c}),se]})})});function Pt(e){const t=e.currentTarget.getBoundingClientRect();return t.top+1<=e.clientY&&e.clientY<=t.bottom-1&&t.left+1<=e.clientX&&e.clientX<=t.right-1}const $e="base-ui-disable-scrollbar",lt={className:$e,element:r.jsx("style",{href:$e,precedence:"base-ui:low",children:`.${$e}{scrollbar-width:none}.${$e}::-webkit-scrollbar{display:none}`})},Yn={...vt,...bt},Xn=n.forwardRef(function(t,o){const{render:u,className:h,...s}=t,{store:m,popupRef:f,onOpenChangeComplete:w,setOpen:T,valueRef:R,selectedItemTextRef:I,keyboardActiveRef:x,multiple:z,handleScrollArrowVisibility:C,scrollHandlerRef:D}=ge(),{side:v,align:S,alignItemWithTriggerActive:N,setControlledAlignItemWithTrigger:i,scrollDownArrowRef:F,scrollUpArrowRef:ee}=ct(),te=yn()!=null,U=Ct(),k=Ae(),ae=g(m,d.id),X=g(m,d.open),V=g(m,d.mounted),Z=g(m,d.popupProps),W=g(m,d.transitionStatus),a=g(m,d.triggerElement),l=g(m,d.positionerElement),j=g(m,d.listElement),_=n.useRef(0),M=n.useRef(!1),c=n.useRef(0),B=n.useRef(!1),E=n.useRef({}),K=tn(),P=pe(b=>{if(!l||!f.current||!B.current)return;if(M.current||!N){C();return}const L=l.style.top==="0px",q=l.style.bottom==="0px",oe=l.getBoundingClientRect().height,ce=ot(l),se=getComputedStyle(l),re=parseFloat(se.marginTop),we=parseFloat(se.marginBottom),le=ce.documentElement.clientHeight-re-we,O=b.scrollTop,ue=b.scrollHeight,he=b.clientHeight,G=ue-he;let J=null,y=null,de=!1;if(L){const xe=G-O,ve=oe+xe,ne=Math.min(ve,le);J=ne,ne!==le?y=G:de=!0}else if(q){const xe=O-0,ve=oe+xe,ne=Math.min(ve,le),He=ve-le;J=ne,ne!==le?y=0:(de=!0,O<G&&(y=O-(xe-He)))}J!=null&&(l.style.height=`${J}px`),y!=null&&(b.scrollTop=y),de&&(M.current=!0),C()});n.useImperativeHandle(D,()=>P,[P]),Xe({open:X,ref:f,onComplete(){X&&w?.(!0)}});const $=n.useMemo(()=>({open:X,transitionStatus:W,side:v,align:S}),[X,W,v,S]);ie(()=>{!l||!f.current||Object.keys(E.current).length||(E.current={top:l.style.top||"0",left:l.style.left||"0",right:l.style.right,height:l.style.height,bottom:l.style.bottom,minHeight:l.style.minHeight,maxHeight:l.style.maxHeight,marginTop:l.style.marginTop,marginBottom:l.style.marginBottom})},[f,l]),ie(()=>{V||N||(B.current=!1,M.current=!1,_.current=0,c.current=0,Ye(l,E.current))},[V,N,l,f]),ie(()=>{const b=f.current;if(!(!V||!a||!l||!b)){if(!N){B.current=!0,K.request(C);return}queueMicrotask(()=>{const L=getComputedStyle(l),q=getComputedStyle(b),oe=ot(a),ce=gt(l),se=a.getBoundingClientRect(),re=l.getBoundingClientRect(),we=se.left,le=se.height,O=j||b,ue=O.scrollHeight,he=parseFloat(q.borderBottomWidth),G=parseFloat(L.marginTop)||10,J=parseFloat(L.marginBottom)||10,y=parseFloat(L.minHeight)||100,de=5,xe=5,ve=20,ne=oe.documentElement.clientHeight-G-J,He=oe.documentElement.clientWidth,Ge=ne-se.bottom+le,Fe=I.current,ke=R.current;let Ve=0,Ee=0;if(Fe&&ke){const Me=ke.getBoundingClientRect(),Oe=Fe.getBoundingClientRect(),Qe=Me.left-we,et=Oe.left-re.left,A=Me.top-se.top+Me.height/2,Q=Oe.top-re.top+Oe.height/2;Ve=Qe-et,Ee=Q-A}const Re=Ge+Ee+J+he;let fe=Math.min(ne,Re);const be=ne-G-J,Ue=Re-fe,_e=Math.max(de,we+Ve),Je=He-xe,Ze=Math.max(0,_e+re.width-Je);l.style.left=`${_e-Ze}px`,l.style.height=`${fe}px`,l.style.maxHeight="auto",l.style.marginTop=`${G}px`,l.style.marginBottom=`${J}px`,b.style.height="100%";const Be=O.scrollHeight-O.clientHeight,Pe=Ue>=Be;Pe&&(fe=Math.min(ne,re.height)-(Ue-Be));const Le=se.top<ve||se.bottom>ne-ve||fe<Math.min(ue,y),De=(ce.visualViewport?.scale??1)!==1&&nn;if(Le||De){B.current=!0,Ye(l,E.current),In.flushSync(()=>i(!1));return}if(Pe){const Me=Math.max(0,ne-Re);l.style.top=re.height>=be?"0":`${Me}px`,l.style.height=`${fe}px`,O.scrollTop=O.scrollHeight-O.clientHeight,_.current=Math.max(y,fe)}else l.style.bottom="0",_.current=Math.max(y,fe),O.scrollTop=Ue;_.current===ne&&(M.current=!0),C(),setTimeout(()=>{B.current=!0})})}},[m,V,l,a,R,I,f,C,N,i,K,F,ee,j]),n.useEffect(()=>{if(!N||!l||!V)return;const b=gt(l);function L(q){T(!1,Se(pn,q))}return b.addEventListener("resize",L),()=>{b.removeEventListener("resize",L)}},[T,N,l,V]);const Y={...j?{role:"presentation","aria-orientation":void 0}:{role:"listbox","aria-multiselectable":z||void 0,id:`${ae}-list`},onKeyDown(b){x.current=!0,te&&sn.has(b.key)&&b.stopPropagation()},onMouseMove(){x.current=!1},onPointerLeave(b){if(Pt(b)||b.pointerType==="touch")return;const L=b.currentTarget;k.start(0,()=>{m.set("activeIndex",null),L.focus({preventScroll:!0})})},onScroll(b){j||D.current?.(b.currentTarget)},...N&&{style:j?{height:"100%"}:Et}},p=me("div",t,{ref:[o,f],state:$,stateAttributesMapping:Yn,props:[Z,Y,Sn(W),{className:!j&&N?lt.className:void 0},s]});return r.jsxs(n.Fragment,{children:[lt.element,r.jsx(on,{context:U,modal:!1,disabled:!V,restoreFocus:!0,children:p})]})}),Kn=n.forwardRef(function(t,o){const{className:u,render:h,...s}=t,{store:m,scrollHandlerRef:f}=ge(),{alignItemWithTriggerActive:w}=ct(),T=g(m,d.hasScrollArrows),R=g(m,d.openMethod),I=g(m,d.multiple),z={id:`${g(m,d.id)}-list`,role:"listbox","aria-multiselectable":I||void 0,onScroll(D){f.current?.(D.currentTarget)},...w&&{style:Et},className:T&&R!=="touch"?lt.className:void 0},C=pe(D=>{m.set("listElement",D)});return me("div",t,{ref:[o,C],props:[z,s]})}),jt=n.createContext(void 0);function ut(){const e=n.useContext(jt);if(!e)throw new Error(Ke(57));return e}const Gn=n.memo(n.forwardRef(function(t,o){const{render:u,className:h,value:s=null,label:m,disabled:f=!1,nativeButton:w=!1,...T}=t,R=n.useRef(null),I=wn({label:m,textRef:R,indexGuessBehavior:Rn.GuessFromOrder}),{store:x,getItemProps:z,setOpen:C,setValue:D,selectionRef:v,typingRef:S,valuesRef:N,keyboardActiveRef:i,multiple:F,highlightItemOnHover:ee}=ge(),te=Ae(),U=g(x,d.isActive,I.index),k=g(x,d.isSelected,I.index,s),ae=g(x,d.isSelectedByFocus,I.index),X=g(x,d.isItemEqualToValue),V=I.index,Z=V!==-1,W=n.useRef(null),a=at(V);ie(()=>{if(!Z)return;const p=N.current;return p[V]=s,()=>{delete p[V]}},[Z,V,s,N]),ie(()=>{if(!Z)return;const p=x.state.value;let b=p;F&&Array.isArray(p)&&p.length>0&&(b=p[p.length-1]),b!==void 0&&Ne(b,s,X)&&x.set("selectedIndex",V)},[Z,V,F,X,x,s]);const l=n.useMemo(()=>({disabled:f,selected:k,highlighted:U}),[f,k,U]),j=z({active:U,selected:k});j.onFocus=void 0,j.id=void 0;const _=n.useRef(null),M=n.useRef("mouse"),c=n.useRef(!1),{getButtonProps:B,buttonRef:E}=Tt({disabled:f,focusableWhenDisabled:!0,native:w});function K(p){const b=x.state.value;if(F){const L=Array.isArray(b)?b:[],q=k?jn(L,s,X):[...L,s];D(q,Se(tt,p))}else D(s,Se(tt,p)),C(!1,Se(tt,p))}const P={role:"option","aria-selected":k,"aria-disabled":f||void 0,tabIndex:U?0:-1,onFocus(){x.set("activeIndex",V)},onMouseEnter(){!i.current&&x.state.selectedIndex===null&&x.set("activeIndex",V)},onMouseMove(){ee&&x.set("activeIndex",V)},onMouseLeave(p){!ee||i.current||Pt(p)||te.start(0,()=>{x.state.activeIndex===V&&x.set("activeIndex",null)})},onTouchStart(){v.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}},onKeyDown(p){_.current=p.key,x.set("activeIndex",V)},onClick(p){c.current=!1,!(p.type==="keydown"&&_.current===null)&&(f||_.current===" "&&S.current||M.current!=="touch"&&!U||(_.current=null,K(p.nativeEvent)))},onPointerEnter(p){M.current=p.pointerType},onPointerDown(p){M.current=p.pointerType,c.current=!0},onMouseUp(p){if(f)return;if(c.current){c.current=!1;return}const b=!v.current.allowSelectedMouseUp&&k,L=!v.current.allowUnselectedMouseUp&&!k;b||L||M.current!=="touch"&&!U||K(p.nativeEvent)}},$=me("div",t,{ref:[E,o,I.ref,W],state:l,props:[j,P,T,B]}),Y=n.useMemo(()=>({selected:k,indexRef:a,textRef:R,selectedByFocus:ae,hasRegistered:Z}),[k,a,R,ae,Z]);return r.jsx(jt.Provider,{value:Y,children:$})})),Jn=n.forwardRef(function(t,o){const u=t.keepMounted??!1,{selected:h}=ut();return u||h?r.jsx(Zn,{...t,ref:o}):null}),Zn=n.memo(n.forwardRef((e,t)=>{const{render:o,className:u,keepMounted:h,...s}=e,{selected:m}=ut(),f=n.useRef(null),{transitionStatus:w,setMounted:T}=it(m),R=n.useMemo(()=>({selected:m,transitionStatus:w}),[m,w]),I=me("span",e,{ref:[t,f],state:R,props:[{"aria-hidden":!0,children:"✔️"},s],stateAttributesMapping:bt});return Xe({open:m,ref:f,onComplete(){m||T(!1)}}),I})),Qn=n.memo(n.forwardRef(function(t,o){const{indexRef:u,textRef:h,selectedByFocus:s,hasRegistered:m}=ut(),{selectedItemTextRef:f}=ge(),{className:w,render:T,...R}=t,I=n.useCallback(z=>{if(!z||!m)return;const C=f.current===null||!f.current.isConnected;(s||C&&u.current===0)&&(f.current=z)},[f,u,s,m]);return me("div",t,{ref:[I,o,h],props:R})})),Nt=n.forwardRef(function(t,o){const{render:u,className:h,direction:s,keepMounted:m=!1,...f}=t,{store:w,popupRef:T,listRef:R,handleScrollArrowVisibility:I,scrollArrowsMountedCountRef:x}=ge(),{side:z,scrollDownArrowRef:C,scrollUpArrowRef:D}=ct(),v=s==="up"?d.scrollUpArrowVisible:d.scrollDownArrowVisible,S=g(w,v),N=g(w,d.openMethod),i=S&&N!=="touch",F=Ae(),ee=s==="up"?D:C,{transitionStatus:te,setMounted:U}=it(i);ie(()=>(x.current+=1,w.state.hasScrollArrows||w.set("hasScrollArrows",!0),()=>{x.current=Math.max(0,x.current-1),x.current===0&&w.state.hasScrollArrows&&w.set("hasScrollArrows",!1)}),[w,x]),Xe({open:i,ref:ee,onComplete(){i||U(!1)}});const k=n.useMemo(()=>({direction:s,visible:i,side:z,transitionStatus:te}),[s,i,z,te]),X=me("div",t,{ref:[o,ee],state:k,props:[{"aria-hidden":!0,children:s==="up"?"▲":"▼",style:{position:"absolute"},onMouseMove(Z){if(Z.movementX===0&&Z.movementY===0||F.isStarted())return;w.set("activeIndex",null);function W(){const a=w.state.listElement??T.current;if(!a)return;w.set("activeIndex",null),I();const l=a.scrollTop===0,j=Math.round(a.scrollTop+a.clientHeight)>=a.scrollHeight;if(R.current.length===0&&(s==="up"?w.set("scrollUpArrowVisible",!l):w.set("scrollDownArrowVisible",!j)),s==="up"&&l||s==="down"&&j){F.clear();return}if((w.state.listElement||T.current)&&R.current&&R.current.length>0){const M=R.current,c=ee.current?.offsetHeight||0;if(s==="up"){let B=0;const E=a.scrollTop+c;for(let P=0;P<M.length;P+=1){const $=M[P];if($&&$.offsetTop>=E){B=P;break}}const K=Math.max(0,B-1);if(K<B){const P=M[K];P&&(a.scrollTop=Math.max(0,P.offsetTop-c))}else a.scrollTop=0}else{let B=M.length-1;const E=a.scrollTop+a.clientHeight-c;for(let P=0;P<M.length;P+=1){const $=M[P];if($&&$.offsetTop+$.offsetHeight>E){B=Math.max(0,P-1);break}}const K=Math.min(M.length-1,B+1);if(K>B){const P=M[K];P&&(a.scrollTop=P.offsetTop+P.offsetHeight-a.clientHeight+c)}else a.scrollTop=a.scrollHeight-a.clientHeight}}F.start(40,W)}F.start(40,W)},onMouseLeave(){F.clear()}},f]});return i||m?X:null}),eo=n.forwardRef(function(t,o){return r.jsx(Nt,{...t,ref:o,direction:"down"})}),to=n.forwardRef(function(t,o){return r.jsx(Nt,{...t,ref:o,direction:"up"})}),no=Bn;function oo({className:e,...t}){return r.jsx(Fn,{"data-slot":"select-value",className:Ce("flex flex-1 text-left",e),...t})}function Ht({className:e,size:t="default",children:o,...u}){return r.jsxs(On,{"data-slot":"select-trigger","data-size":t,className:Ce("border-input data-[placeholder]:text-muted-foreground dark:bg-input/30 dark:hover:bg-input/50 focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 gap-1.5 rounded-lg border bg-transparent py-2 pr-2 pl-2.5 text-sm transition-colors select-none focus-visible:ring-[3px] aria-invalid:ring-[3px] data-[size=default]:h-8 data-[size=sm]:h-7 data-[size=sm]:rounded-[min(var(--radius-md),10px)] *:data-[slot=select-value]:flex *:data-[slot=select-value]:gap-1.5 [&_svg:not([class*='size-'])]:size-4 flex w-fit items-center justify-between whitespace-nowrap outline-none disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center [&_svg]:pointer-events-none [&_svg]:shrink-0",e),...u,children:[o,r.jsx(_n,{render:r.jsx(Vn,{className:"text-muted-foreground size-4 pointer-events-none"})})]})}function kt({className:e,children:t,side:o="bottom",sideOffset:u=4,align:h="center",alignOffset:s=0,alignItemWithTrigger:m=!0,...f}){return r.jsx(qn,{children:r.jsx($n,{side:o,sideOffset:u,align:h,alignOffset:s,alignItemWithTrigger:m,className:"isolate z-50",children:r.jsxs(Xn,{"data-slot":"select-content",className:Ce("bg-popover text-popover-foreground data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 ring-foreground/10 min-w-36 rounded-lg shadow-md ring-1 duration-100 dark relative isolate z-50 max-h-(--available-height) w-(--anchor-width) origin-(--transform-origin) overflow-x-hidden overflow-y-auto",e),...f,children:[r.jsx(Bt,{}),r.jsx(Kn,{children:t}),r.jsx(Dt,{})]})})})}function Ut({className:e,children:t,...o}){return r.jsxs(Gn,{"data-slot":"select-item",className:Ce("focus:bg-accent focus:text-accent-foreground not-data-[variant=destructive]:focus:**:text-accent-foreground gap-1.5 rounded-md py-1 pr-8 pl-1.5 text-sm [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2 relative flex w-full cursor-default items-center outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0",e),...o,children:[r.jsx(Qn,{className:"flex flex-1 gap-2 shrink-0 whitespace-nowrap",children:t}),r.jsx(Jn,{render:r.jsx("span",{className:"pointer-events-none absolute right-2 flex size-4 items-center justify-center"}),children:r.jsx(Ot,{className:"pointer-events-none"})})]})}function Bt({className:e,...t}){return r.jsx(to,{"data-slot":"select-scroll-up-button",className:Ce("bg-popover z-10 flex cursor-default items-center justify-center py-1 [&_svg:not([class*='size-'])]:size-4 top-0 w-full",e),...t,children:r.jsx(An,{})})}function Dt({className:e,...t}){return r.jsx(eo,{"data-slot":"select-scroll-down-button",className:Ce("bg-popover z-10 flex cursor-default items-center justify-center py-1 [&_svg:not([class*='size-'])]:size-4 bottom-0 w-full",e),...t,children:r.jsx(zt,{})})}kt.__docgenInfo={description:"",methods:[],displayName:"SelectContent",props:{side:{defaultValue:{value:'"bottom"',computed:!1},required:!1},sideOffset:{defaultValue:{value:"4",computed:!1},required:!1},align:{defaultValue:{value:'"center"',computed:!1},required:!1},alignOffset:{defaultValue:{value:"0",computed:!1},required:!1},alignItemWithTrigger:{defaultValue:{value:"true",computed:!1},required:!1}}};Ut.__docgenInfo={description:"",methods:[],displayName:"SelectItem"};Dt.__docgenInfo={description:"",methods:[],displayName:"SelectScrollDownButton"};Bt.__docgenInfo={description:"",methods:[],displayName:"SelectScrollUpButton"};Ht.__docgenInfo={description:"",methods:[],displayName:"SelectTrigger",props:{size:{required:!1,tsType:{name:"union",raw:'"sm" | "default"',elements:[{name:"literal",value:'"sm"'},{name:"literal",value:'"default"'}]},description:"",defaultValue:{value:'"default"',computed:!1}}}};oo.__docgenInfo={description:"",methods:[],displayName:"SelectValue"};function so({selectedAsset:e,assets:t,onSelect:o,disabled:u=!1,excludeAssets:h=[],showBalance:s=!0,placeholder:m,className:f,testId:w}){const{t:T}=Tn("transaction"),R=n.useMemo(()=>{if(h.length===0)return t;const v=new Set(h.map(S=>S.toUpperCase()));return t.filter(S=>!v.has(S.symbol.toUpperCase()))},[t,h]),I=v=>`${v.chain}-${v.symbol}`,x=v=>{if(!v)return;const S=R.find(N=>I(N)===v);S&&o(S)},z=m??T("assetSelector.selectAsset"),C=e?I(e):"",D=()=>e?r.jsxs("div",{className:"flex items-center gap-2.5",children:[r.jsx(dt,{symbol:e.symbol,chainId:e.chain,imageUrl:e.icon,size:"sm"}),r.jsxs("div",{className:"flex flex-col items-start",children:[r.jsx("span",{className:"text-sm font-medium",children:e.symbol}),s&&r.jsxs("span",{className:"text-muted-foreground text-xs",children:[T("assetSelector.balance"),":"," ",r.jsx(ft,{value:e.balance,size:"xs",className:"inline",decimals:e.decimals??8,fixedDecimals:!0})]})]})]}):r.jsx("span",{className:"text-muted-foreground",children:z});return r.jsxs(no,{value:C,onValueChange:x,disabled:u,children:[r.jsx(Ht,{"data-testid":w,className:Ce("bg-muted/50 h-15! w-full px-3 py-2.5",f),children:D()}),r.jsx(kt,{children:R.length===0?r.jsx("div",{className:"text-muted-foreground flex flex-col items-center py-4 text-sm",children:r.jsx("p",{children:T("assetSelector.noAssets")})}):R.map(v=>r.jsx(Ut,{value:I(v),className:"py-2",children:r.jsxs("div",{className:"flex w-full items-center gap-3",children:[r.jsx(dt,{symbol:v.symbol,chainId:v.chain,imageUrl:v.icon,size:"sm"}),r.jsxs("div",{className:"flex min-w-0 flex-1 flex-col items-start",children:[r.jsx("span",{className:"font-medium",children:v.symbol}),r.jsx("span",{className:"text-muted-foreground truncate text-xs",children:v.name})]}),r.jsx("div",{className:"shrink-0 text-right",children:r.jsx(ft,{value:v.balance,size:"sm",decimals:v.decimals??8,fixedDecimals:!0})})]})},I(v)))})]})}so.__docgenInfo={description:`资产选择器

使用 Select 组件展示可选资产列表`,methods:[],displayName:"AssetSelector",props:{selectedAsset:{required:!0,tsType:{name:"union",raw:"TokenInfo | null",elements:[{name:"TokenInfo"},{name:"null"}]},description:"当前选中的资产"},assets:{required:!0,tsType:{name:"Array",elements:[{name:"TokenInfo"}],raw:"TokenInfo[]"},description:"可选资产列表"},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(asset: TokenInfo) => void",signature:{arguments:[{type:{name:"TokenInfo"},name:"asset"}],return:{name:"void"}}},description:"选择资产回调"},disabled:{required:!1,tsType:{name:"boolean"},description:"是否禁用",defaultValue:{value:"false",computed:!1}},excludeAssets:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"排除的资产符号列表 (如主资产不可销毁)",defaultValue:{value:"[]",computed:!1}},showBalance:{required:!1,tsType:{name:"boolean"},description:"是否显示余额",defaultValue:{value:"true",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:"占位文本"},className:{required:!1,tsType:{name:"string"},description:"额外的 class"},testId:{required:!1,tsType:{name:"string"},description:"测试 ID"}}};export{so as A,An as I,no as S,Ht as a,oo as b,kt as c,Ut as d};
