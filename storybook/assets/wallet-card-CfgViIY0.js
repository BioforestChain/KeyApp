import{r as n,j as t}from"./iframe-13xkpxxJ.js";import{c as U}from"./utils-CDN07tui.js";import{u as B,H}from"./hologram-canvas-CcDbYhqS.js";import{C as _}from"./chain-icon-DOcWq_MJ.js";import{A as F}from"./address-display-ftOYJgXj.js";import{I as J}from"./IconChevronDown-DklXF4t9.js";import{I as K}from"./IconSettings-8yJmXAsO.js";import{I as Q}from"./IconCheck-elmjIu2_.js";import{I as Z}from"./web-RRtXCQIV.js";function $(R={}){const{gyroStrength:d=.15,touchStrength:b=1,enableGyro:p=!0,enableTouch:h=!0,idleTimeout:q=3e3,wakeThreshold:w=.055}=R,g=n.useCallback(e=>{const r=Math.abs(e),i=Math.pow(r,.7);return Math.sign(e)*i},[]),o=n.useRef(null),[x,E]=n.useState({pointerX:0,pointerY:0,isActive:!1}),N=n.useRef({x:0,y:0}),k=n.useRef({x:0,y:0,active:!1}),C=n.useRef("dynamic"),M=n.useRef(Date.now()),y=n.useRef({x:0,y:0}),u=n.useCallback(()=>{const e=Date.now(),r=N.current,i=k.current,l=g(r.x),c=g(r.y);let a=0,s=0,T=!1;i.active&&h?(a=i.x*b+l*d*.3,s=i.y*b+c*d*.3,T=!0):p&&(Math.abs(r.x)>.01||Math.abs(r.y)>.01)&&(a=l*d,s=c*d,T=!0),a=Math.max(-1,Math.min(1,a)),s=Math.max(-1,Math.min(1,s));const j=Math.hypot(a-y.current.x,s-y.current.y);if(C.current==="static")if(j>w||i.active)C.current="dynamic",M.current=e,y.current={x:a,y:s};else return;else if(j>w||i.active)M.current=e,y.current={x:a,y:s};else if(e-M.current>q){C.current="static";return}E({pointerX:a,pointerY:s,isActive:T})},[g,d,b,p,h,q,w]);n.useEffect(()=>{if(!p)return;let e=!1;const r=l=>{const{beta:c,gamma:a}=l;c===null||a===null||(N.current={x:Math.max(-1,Math.min(1,a/45)),y:Math.max(-1,Math.min(1,(c-45)/45))},u())};return(async()=>{if(typeof DeviceOrientationEvent<"u"&&"requestPermission"in DeviceOrientationEvent&&typeof DeviceOrientationEvent.requestPermission=="function")try{e=await DeviceOrientationEvent.requestPermission()==="granted"}catch{e=!1}else e=!0;e&&window.addEventListener("deviceorientation",r)})(),()=>{window.removeEventListener("deviceorientation",r)}},[p,u]);const m=n.useCallback(e=>{if(!h||!o.current)return;const i=o.current.getBoundingClientRect();let l,c;if("touches"in e&&e.touches[0])l=e.touches[0].clientX,c=e.touches[0].clientY;else if("clientX"in e)l=e.clientX,c=e.clientY;else return;const a=((l-i.left)/i.width-.5)*2,s=((c-i.top)/i.height-.5)*2;k.current={x:a,y:s,active:!0},u()},[h,u]),f=n.useCallback(()=>{k.current={x:0,y:0,active:!1},u()},[u]),S=n.useCallback(e=>{o.current&&(o.current.removeEventListener("pointermove",m),o.current.removeEventListener("pointerleave",f),o.current.removeEventListener("touchmove",m),o.current.removeEventListener("touchend",f)),o.current=e,e&&(e.addEventListener("pointermove",m),e.addEventListener("pointerleave",f),e.addEventListener("touchmove",m,{passive:!0}),e.addEventListener("touchend",f))},[m,f]);return{...x,bindElement:S,ref:o,style:{"--pointer-x":x.pointerX,"--pointer-y":x.pointerY}}}if(typeof window<"u"&&"registerProperty"in CSS){const R=[{name:"--tilt-x",syntax:"<number>",initialValue:"0"},{name:"--tilt-y",syntax:"<number>",initialValue:"0"},{name:"--tilt-nx",syntax:"<number>",initialValue:"0"},{name:"--tilt-ny",syntax:"<number>",initialValue:"0"},{name:"--tilt-intensity",syntax:"<number>",initialValue:"0"},{name:"--tilt-direction",syntax:"<number>",initialValue:"0"}];for(const d of R)try{CSS.registerProperty({...d,inherits:!0})}catch{}}const ee=n.forwardRef(function({wallet:d,chain:b,chainName:p,walletNameTestId:h="wallet-name",priority:q="high",address:w,chainIconUrl:g,watermarkLogoSize:o=60,watermarkLogoActualSize:x=24,onCopyAddress:E,onOpenChainSelector:N,onOpenSettings:k,className:C,themeHue:M=323,disableWatermarkRefraction:y,disablePatternRefraction:u,enableGyro:m},f){const[S,e]=n.useState(!1),r=n.useRef(null),i=n.useMemo(()=>typeof window>"u"?!1:window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches??!1,[]),l=y??i,c=u??i,a=m??!i,s=i?"static":"dynamic",T=typeof window<"u"?Math.min(3,window.devicePixelRatio||1):1,j=B(g,{size:Math.round(x*T),invert:!1,contrast:1.8,targetBrightness:.85}),{pointerX:L,pointerY:V,isActive:v,bindElement:X}=$({gyroStrength:.35,touchStrength:.8,enableGyro:a});n.useEffect(()=>{X(r.current)},[X]);const D=n.useCallback(()=>{E?.(),e(!0),setTimeout(()=>e(!1),2e3)},[E]),I=15,A=v?V*-I:0,Y=v?L*I:0,P=A/I,z=Y/I,W=v?Math.min(1,Math.sqrt(P*P+z*z)):0,O=Math.atan2(-P,z)*(180/Math.PI),G={"--tilt-x":A,"--tilt-y":Y,"--tilt-nx":P,"--tilt-ny":z,"--tilt-intensity":W,"--tilt-direction":O};return t.jsx("div",{ref:f,"data-testid":"wallet-card-container",className:U("wallet-card-container h-full w-full",C),style:{perspective:"1000px"},children:t.jsxs("div",{ref:r,"data-testid":"wallet-card","data-active":v?"true":"false",className:"wallet-card relative h-full w-full transform-gpu touch-none overflow-hidden rounded-2xl select-none",style:{...G,transform:"rotateX(calc(var(--tilt-x) * 1deg)) rotateY(calc(var(--tilt-y) * 1deg))",transformStyle:"preserve-3d",transition:v?"none":"all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)",isolation:"isolate",willChange:"transform, --tilt-x, --tilt-y, --tilt-intensity"},children:[t.jsx(H,{priority:q,enabledPattern:!c,enabledWatermark:!l&&!!j,mode:s,pointerX:L,pointerY:V,active:v,themeHue:M,watermarkMaskUrl:j,watermarkCellSize:o,watermarkIconSize:x}),t.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-2xl",style:{border:"1px solid rgba(255,255,255,0.2)"}}),t.jsxs("div",{className:"relative z-10 flex h-full flex-col justify-between p-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("button",{onClick:N,"data-testid":"chain-selector",className:"flex items-center gap-1.5 rounded-full bg-black/20 px-2.5 py-1 text-xs text-white backdrop-blur-sm transition-colors hover:bg-black/30",children:[t.jsx(_,{chainId:b,size:"sm"}),t.jsx("span",{className:"font-medium",children:p}),t.jsx(J,{className:"size-3 opacity-70"})]}),t.jsx("button",{onClick:k,"data-testid":"wallet-card-settings-button",className:"rounded-full bg-black/10 p-1.5 text-white/80 backdrop-blur-sm transition-colors hover:bg-black/20 hover:text-white",children:t.jsx(K,{className:"size-4"})})]}),t.jsx("div",{className:"flex flex-1 items-center justify-center",children:t.jsx("h2",{"data-testid":h,className:"text-2xl font-bold text-white drop-shadow-lg",children:d.name})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(F,{address:w??"",copyable:!1,testId:"wallet-card-address",className:"min-w-0 flex-1 text-white/80 drop-shadow"}),t.jsx("button",{onClick:D,"data-testid":"wallet-card-copy-button","data-copied":S?"true":"false",className:"shrink-0 rounded-full bg-black/10 p-1.5 text-white/80 backdrop-blur-sm transition-all hover:bg-black/20 hover:text-white",children:S?t.jsx(Q,{className:"size-4 text-green-300"}):t.jsx(Z,{className:"size-4"})})]})]}),t.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-2xl",style:{boxShadow:`
                inset 0 1px 1px rgba(255,255,255,0.3),
                inset 0 -1px 1px rgba(0,0,0,0.2),
                0 20px 40px -15px rgba(0,0,0,0.4)
              `}})]})})});ee.__docgenInfo={description:"",methods:[],displayName:"WalletCard",props:{wallet:{required:!0,tsType:{name:"Wallet"},description:""},chain:{required:!0,tsType:{name:"ChainType"},description:""},chainName:{required:!0,tsType:{name:"string"},description:""},walletNameTestId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"",defaultValue:{value:"'wallet-name'",computed:!1}},priority:{required:!1,tsType:{name:"union",raw:"'high' | 'medium' | 'low'",elements:[{name:"literal",value:"'high'"},{name:"literal",value:"'medium'"},{name:"literal",value:"'low'"}]},description:"渲染优先级，影响帧率和分辨率",defaultValue:{value:"'high'",computed:!1}},address:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},chainIconUrl:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"链图标 URL，用于防伪水印"},watermarkLogoSize:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:"防伪水印 logo 平铺尺寸（含间距），默认 40px",defaultValue:{value:"60",computed:!1}},watermarkLogoActualSize:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:"防伪水印 logo 实际尺寸，默认 24px（与 watermarkLogoSize 差值为间距）",defaultValue:{value:"24",computed:!1}},onCopyAddress:{required:!1,tsType:{name:"union",raw:"(() => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},onOpenChainSelector:{required:!1,tsType:{name:"union",raw:"(() => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},onOpenSettings:{required:!1,tsType:{name:"union",raw:"(() => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},themeHue:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:"",defaultValue:{value:"323",computed:!1}},disableWatermarkRefraction:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:`禁用“水印 Refraction”层（Android 部分机型/浏览器组合会出现页面闪动）。
默认：在 Android 浏览器上自动禁用，其它平台启用。`},disablePatternRefraction:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:`禁用“三角纹理 Refraction”层。
默认：在 Android 浏览器上自动禁用，其它平台启用。

说明：用户反馈 Pattern 在 Android 表现正常时，可以将该值显式设为 false 以保留效果。`},enableGyro:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:`是否启用陀螺仪倾斜（deviceorientation）。
默认：在 Android 上关闭（降低高频重绘导致的闪动/掉帧风险）。`}}};export{ee as W};
