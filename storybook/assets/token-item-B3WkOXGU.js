import{r as _,j as h,R,t as pe,v as z}from"./iframe-Cdc63axx.js";import{c as D}from"./utils-CDN07tui.js";import"./wallet-card-D72Fjhtn.js";import"./wallet-selector-DyhJjCoj.js";import"./address-display-Br4bPKCM.js";import{C as j}from"./chain-icon-D4xOCR_v.js";import{c as fe}from"./web-D11Qze_b.js";import{u as ne}from"./useTranslation-B1THGpvK.js";import{I as ge}from"./IconCheck-CSFX6uTb.js";import{I as he}from"./IconCopy-Bd89ourp.js";import{T as _e}from"./token-icon-G8t5AcAW.js";import"./gradient-button-CZKG_OxC.js";import"./loading-spinner-BUGHRkCk.js";import"./empty-state-BekREkN0.js";import"./skeleton-B6q0SJ8M.js";import{A as $}from"./amount-display-CpkhKkD5.js";import{a as Oe}from"./animated-number-BzKftMU8.js";import"./time-display-Bqp2_Ej9.js";import"./qr-code-CN1BkjhE.js";import"./icon-circle-BA3rQJgu.js";import"./error-boundary-Br_PTww5.js";import{i as Y,j as Ee,k as Te,l as Ae}from"./chain-config-CVvvJPxJ.js";import{d as N}from"./breakpoint-LJlNYN6X.js";import{a as A,o as p,s as i,b as w,n as b,_ as E,c as U,r as x,d as Re,e as ae,f as be,l as Ce}from"./schemas-34eCiBJ6.js";import"./web-B0qc0cto.js";import"./index-D0E7N0oa.js";import{A as S}from"./amount-BQsqQYGO.js";import{c as K,C as L,a as B,B as Se,b as Ne,d as ve,g as Le}from"./index-DBrPxRsx.js";function ye(e,t){const n=t==="sm"?16:20;if(e.length<=n)return e;const a=t==="sm"?6:8,r=t==="sm"?4:6;return`${e.slice(0,a)}...${e.slice(-r)}`}function we({chainId:e,chainIcon:t,chainSymbol:n,address:a,copyable:r=!0,onCopy:o,size:c="md",className:d}){const{t:u}=ne("common"),[l,s]=_.useState(!1),m=_.useCallback(async()=>{try{await fe.write({text:a}),s(!0),o?.(),setTimeout(()=>s(!1),2e3)}catch{console.error("Failed to copy address")}},[a,o]),g=c==="sm"?"sm":"md",f=ye(a,c);return r?h.jsxs("button",{type:"button",onClick:m,className:D("flex items-center gap-2 transition-colors","hover:text-primary focus-visible:ring-ring rounded focus:outline-none focus-visible:ring-2",d),title:a,"aria-label":l?u("copiedToClipboard"):`${u("copy")} ${a}`,children:[h.jsx(j,{chainId:e,iconUrl:t,symbol:n,size:g}),h.jsx("span",{className:D("font-mono",c==="sm"?"text-xs":"text-sm"),children:f}),l?h.jsx(ge,{className:"size-4 shrink-0 text-green-500","aria-hidden":"true"}):h.jsx(he,{className:"size-4 shrink-0 text-muted-foreground","aria-hidden":"true"})]}):h.jsxs("div",{className:D("flex items-center gap-2",d),children:[h.jsx(j,{chainId:e,iconUrl:t,symbol:n,size:g}),h.jsx("span",{className:D("font-mono",c==="sm"?"text-xs":"text-sm"),title:a,children:f})]})}we.__docgenInfo={description:`链地址显示组件

组合显示链图标和地址，支持复制功能
图标自动从 ChainIconProvider context 获取

@example
// 自动获取图标（需要 ChainIconProvider）
<ChainAddressDisplay chainId="ethereum" address="0x1234...5678" />

// 手动指定图标
<ChainAddressDisplay chainId="ethereum" chainIcon="/custom.svg" address="0x1234...5678" />`,methods:[],displayName:"ChainAddressDisplay",props:{chainId:{required:!0,tsType:{name:"string"},description:"链 ID（用于从 ChainIconProvider 自动获取图标）"},chainIcon:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"链图标 URL（可选，覆盖 context）"},chainSymbol:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"链符号（可选，用于 fallback）"},address:{required:!0,tsType:{name:"string"},description:"地址"},copyable:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"是否可复制",defaultValue:{value:"true",computed:!1}},onCopy:{required:!1,tsType:{name:"union",raw:"(() => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"复制回调"},size:{required:!1,tsType:{name:"union",raw:"'sm' | 'md' | undefined",elements:[{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"undefined"}]},description:"尺寸",defaultValue:{value:"'md'",computed:!1}},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"额外样式"}}};const xe=A(["fingerprint","face","iris","none"]),Be=p({isAvailable:w(),biometricType:xe,error:i().optional()}),Ie=p({title:i().optional(),description:i().optional(),cancelText:i().optional(),maxAttempts:b().optional(),fallbackToPassword:w().optional()}).optional(),Me=p({success:w(),errorMessage:i().optional()}),De=N("biometric",e=>e.description("生物识别服务 - 指纹/面容验证").api("isAvailable",{description:"检查生物识别是否可用",input:E(),output:Be}).api("verify",{description:"验证生物识别",input:Ie,output:Me}));De.impl({async isAvailable(){if(window.PublicKeyCredential)try{const e=await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();return{isAvailable:e,biometricType:e?"fingerprint":"none"}}catch{return{isAvailable:!1,biometricType:"none"}}return{isAvailable:!1,biometricType:"none"}},async verify(e){return console.warn("Biometric not available in web, falling back to password"),{success:!1,errorMessage:"Biometric authentication not available in web browser"}}});const Ue=A(["light","medium","heavy","success","warning","error"]).optional(),Pe=N("haptics",e=>e.description("触觉反馈服务").api("impact",{description:"触发触觉反馈",input:Ue,output:E()}).api("vibrate",{description:"振动指定时长",input:b().optional(),output:E()})),mn=Pe.impl({async impact(e){if("vibrate"in navigator){const t={light:10,medium:20,heavy:30,success:[10,50,10],warning:[20,30,20],error:[30,50,30,50,30]};navigator.vibrate(t[e??"medium"])}},async vibrate(e){"vibrate"in navigator&&navigator.vibrate(e??100)}}),ke=N("secureStorage",e=>e.description("安全存储服务 - 加密存储键值对").api("set",{description:"存储数据",input:p({key:i(),value:i()}),output:E()}).api("get",{description:"获取数据",input:p({key:i()}),output:i().nullable()}).api("remove",{description:"删除数据",input:p({key:i()}),output:E()}).api("has",{description:"检查是否存在",input:p({key:i()}),output:w()}).api("clear",{description:"清空存储",input:E(),output:E()})),I="bfm_secure_";ke.impl({async set({key:e,value:t}){localStorage.setItem(I+e,t)},async get({key:e}){return localStorage.getItem(I+e)},async remove({key:e}){localStorage.removeItem(I+e)},async has({key:e}){return localStorage.getItem(I+e)!==null},async clear(){const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n?.startsWith(I)&&e.push(n)}e.forEach(t=>localStorage.removeItem(t))}});const He=p({content:i(),format:i().optional()}),Fe=N("camera",e=>e.description("相机服务 - 扫描二维码").api("scanQRCode",{description:"扫描二维码",input:E(),output:He}).api("checkPermission",{description:"检查相机权限",input:E(),output:w()}).api("requestPermission",{description:"请求相机权限",input:E(),output:w()})),pn=Fe.impl({async scanQRCode(){throw new Error("QR scanning not implemented in web.")},async checkPermission(){try{return(await navigator.permissions.query({name:"camera"})).state==="granted"}catch{return!1}},async requestPermission(){try{return(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(t=>t.stop()),!0}catch{return!1}}}),je=p({base:i(),date:i(),rates:x(i(),b())}),Ve=N("currencyExchange",e=>e.description("货币兑换服务 - 获取汇率").api("getExchangeRates",{description:"获取汇率",input:p({baseCurrency:i(),targetCurrencies:U(i())}),output:je})),M={CNY:7.24,EUR:.95,JPY:149.5,KRW:1320,GBP:.79,AUD:1.53,CAD:1.36,CHF:.88,HKD:7.82,SGD:1.34,TWD:31.5,THB:35.2,INR:83.5,MYR:4.72,PHP:56.2};function Ge(){return new Date().toISOString().split("T")[0]??new Date().toISOString().slice(0,10)}function We(e,t){const n={};if(e==="USD"){for(const o of t)o==="USD"?n[o]=1:M[o]!==void 0&&(n[o]=M[o]);return n}const a=M[e];if(a===void 0)return n;const r=1/a;for(const o of t)o===e?n[o]=1:o==="USD"?n[o]=r:M[o]!==void 0&&(n[o]=M[o]*r);return n}const Je=Ve.impl({async getExchangeRates({baseCurrency:e,targetCurrencies:t}){return await new Promise(n=>setTimeout(n,100)),{base:e,date:Ge(),rates:We(e,t)}}});_.createContext(null);const ze=p({appId:i(),appName:i(),appIcon:i(),origin:i()});N("authorize",e=>e.description("授权适配器").api("getCallerAppInfo",p({eventId:i()}),ze).api("respondWith",p({eventId:i(),path:i(),data:Re()}),E()).api("removeEventId",p({eventId:i()}),E()).method("isAvailable",E(),w()));const C=ae(e=>e instanceof S),$e=x(i(),x(i(),p({assetType:i(),logo:i().optional(),supportChain:x(i(),p({assetType:i(),contract:i().optional(),decimals:b()}).optional())}))),Ye=x(i(),x(i(),i())),Ke=p({chain:A(["BFMeta","BFChain","CCChain","PMChain"]),assetType:i(),stakedAmount:C,stakedFiat:i(),availableChains:U(A(["ETH","BSC","TRON"])),logoUrl:i().optional(),totalMinted:C,totalCirculation:C,totalBurned:C,totalStaked:C,externalChain:A(["ETH","BSC","TRON"]),externalAssetType:i()}),P=p({id:i(),type:A(["mint","burn"]),sourceChain:i(),sourceAsset:i(),sourceAmount:C,targetChain:i(),targetAsset:i(),targetAmount:C,status:A(["pending","confirming","confirmed","failed"]),txHash:i().optional(),createdAt:b(),updatedAt:b(),errorMessage:i().optional()}),qe=p({sourceChain:A(["ETH","BSC","TRON"]),sourceAsset:i(),amount:C,targetChain:A(["BFMeta","BFChain","CCChain","PMChain"]),targetAsset:i()}),Ze=p({sourceChain:A(["BFMeta","BFChain","CCChain","PMChain"]),sourceAsset:i(),amount:C,targetChain:A(["ETH","BSC","TRON"]),targetAsset:i()}),Xe=N("staking",e=>e.description("质押服务").api("getRechargeConfig",E(),$e).api("getLogoUrls",E(),Ye).api("getOverview",E(),U(Ke)).api("getTransactions",E(),U(P)).api("getTransaction",p({id:i()}),P.nullable()).api("submitMint",qe,P).api("submitBurn",Ze,P)),fn=Xe.impl({async getRechargeConfig(){throw new Error("StakingService.getRechargeConfig not implemented")},async getLogoUrls(){throw new Error("StakingService.getLogoUrls not implemented")},async getOverview(){throw new Error("StakingService.getOverview not implemented")},async getTransactions(){throw new Error("StakingService.getTransactions not implemented")},async getTransaction(){throw new Error("StakingService.getTransaction not implemented")},async submitMint(){throw new Error("StakingService.submitMint not implemented")},async submitBurn(){throw new Error("StakingService.submitBurn not implemented")}}),q=ae(e=>e instanceof S),ie=A(["send","receive","signature","stake","unstake","destroy","gift","grab","trust","signFor","emigrate","immigrate","exchange","issueAsset","increaseAsset","issueEntity","destroyEntity","locationName","dapp","certificate","mark","other"]),Z=p({id:i(),type:ie,status:A(["pending","confirmed","failed"]),amount:q,symbol:i(),decimals:b(),address:i(),timestamp:be(),hash:i().optional(),chain:i(),fee:q.optional(),feeSymbol:i().optional(),feeDecimals:b().optional(),blockNumber:b().optional(),confirmations:b().optional()}),Qe=p({chain:i().optional(),period:A(["7d","30d","90d","all"]).optional(),type:ie.or(Ce("all")).optional(),status:A(["pending","confirmed","failed","all"]).optional()}),et=N("transaction",e=>e.description("交易服务").api("getHistory",p({walletId:i(),filter:Qe.optional()}),U(Z)).api("getTransaction",p({id:i()}),Z.nullable()).api("refresh",p({walletId:i()}),E()));class tt{chainId;config=null;apiUrl="";apiPath="";constructor(t){this.chainId=t}getConfig(){if(!this.config){const t=K.getConfig(this.chainId);if(!t)throw new L(B.CHAIN_NOT_FOUND,`Chain config not found: ${this.chainId}`);this.config=t;const n=K.getBiowalletApi(t.id);this.apiUrl=n?.endpoint??"",this.apiPath=n?.path??t.id}return this.config}getChainInfo(){const t=this.getConfig(),n={chainId:t.id,name:t.name,symbol:t.symbol,decimals:t.decimals,blockTime:10,confirmations:1};return t.explorer?.url&&(n.explorerUrl=t.explorer.url),n}async getBlockHeight(){if(this.getConfig(),!this.apiUrl)return 0n;try{const t=await fetch(`${this.apiUrl}/wallet/${this.apiPath}/lastblock`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new L(B.NETWORK_ERROR,`Failed to fetch block height: ${t.status}`);const n=await t.json();if(!n.success)throw new L(B.NETWORK_ERROR,"API returned success=false");return BigInt(n.result.height)}catch(t){throw t instanceof L?t:new L(B.NETWORK_ERROR,"Failed to fetch block height",void 0,t instanceof Error?t:void 0)}}async getGasPrice(){const t=this.getConfig(),{decimals:n,symbol:a}=t;if(!this.apiUrl){const r=S.fromRaw("1000",n,a);return{slow:r,standard:r.mul(2),fast:r.mul(5),lastUpdated:Date.now()}}try{const r=await fetch(`${this.apiUrl}/wallet/${this.apiPath}/blockAveFee`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new L(B.NETWORK_ERROR,`Failed to fetch fee info: ${r.status}`);const o=await r.json();if(!o.success){const u=S.fromRaw("1000",n,a);return{slow:u,standard:u.mul(2),fast:u.mul(5),lastUpdated:Date.now()}}const c=S.fromRaw(o.result.minFee,n,a),d=S.fromRaw(o.result.avgFee,n,a);return{slow:c,standard:d.gt(c)?d:c,fast:d.mul(2).gt(c)?d.mul(2):c.mul(2),lastUpdated:Date.now()}}catch(r){if(r instanceof L)throw r;const o=S.fromRaw("1000",n,a);return{slow:o,standard:o.mul(2),fast:o.mul(5),lastUpdated:Date.now()}}}async healthCheck(){if(this.getConfig(),!this.apiUrl)return{isHealthy:!1,latency:0,blockHeight:0n,isSyncing:!1,lastUpdated:Date.now()};const t=Date.now();try{const n=await fetch(`${this.apiUrl}/wallet/${this.apiPath}/lastblock`,{method:"GET",headers:{"Content-Type":"application/json"}}),a=Date.now()-t;if(!n.ok)return{isHealthy:!1,latency:a,blockHeight:0n,isSyncing:!1,lastUpdated:Date.now()};const r=await n.json();return{isHealthy:r.success,latency:a,blockHeight:r.success?BigInt(r.result.height):0n,isSyncing:!1,lastUpdated:Date.now()}}catch{return{isHealthy:!1,latency:Date.now()-t,blockHeight:0n,isSyncing:!1,lastUpdated:Date.now()}}}}class nt{chainId;chainType="bioforest";identity;asset;transaction;chain;staking=null;initialized=!1;constructor(t){this.chainId=t,this.identity=new Se(t),this.asset=new Ne(t),this.transaction=new ve(t),this.chain=new tt(t)}async initialize(){this.initialized||(this.initialized=!0)}dispose(){this.initialized=!1}}function at(e){return new nt(e)}const V=new Map;async function X(e,t){await Y.initialize();const n=await Ee(),a=Te(n),r=new Map(a.map(s=>[s.id,s])),o=await Y.getWalletChainAddresses(e),c=t?.chain&&t.chain!=="all"?t.chain:null,d=o.flatMap(s=>{if(c&&s.chain!==c)return[];const m=r.get(s.chain)??Ae(n,s.chain);if(!m||!m.enabled)return[];if(m.chainKind==="bioforest")return at(m.id).transaction.getTransactionHistory(s.address,50).then(f=>f.map(O=>ot(O,m,s.address)));try{const g=Le(s.chain);return!g.supportsTransactionHistory||!g.getTransactionHistory?[]:g.getTransactionHistory(s.address,50).then(f=>f.map(O=>ct(O,m,s.address)))}catch{return[]}});let l=(await Promise.all(d)).flat();t&&(l=mt(l,t.chain),l=lt(l,t.period),l=dt(l,t.type),l=ut(l,t.status)),l.sort((s,m)=>m.timestamp.getTime()-s.timestamp.getTime()),V.clear();for(const s of l)V.set(s.id,s);return l}function it(e){return e.status==="confirmed"?"confirmed":e.status==="failed"?"failed":"pending"}function rt(e,t,n){if(n){if(n.includes("BSE-01"))return"signature";if(n.includes("AST-02"))return e.from===t?"send":"receive";if(n.includes("AST-03"))return"destroy";if(n.includes("AST-04"))return"gift";if(n.includes("AST-05"))return"grab";if(n.includes("AST-06"))return"trust";if(n.includes("AST-07"))return"signFor";if(n.includes("AST-08"))return"emigrate";if(n.includes("AST-09"))return"immigrate";if(n.includes("AST-10")||n.includes("AST-11"))return"exchange";if(n.includes("AST-12"))return"stake";if(n.includes("AST-13"))return"unstake";if(n.includes("AST-00"))return"issueAsset";if(n.includes("AST-01"))return"increaseAsset";if(n.includes("ETY-02")||n.includes("ETY-04"))return"issueEntity";if(n.includes("ETY-03"))return"destroyEntity";if(n.includes("ETY-00")||n.includes("ETY-01"))return"issueAsset";if(n.includes("ANY-00"))return e.from===t?"send":"receive";if(n.includes("ANY-01"))return"gift";if(n.includes("ANY-02"))return"grab";if(n.includes("ANY-03")||n.includes("ANY-04")||n.includes("ANY-05")||n.includes("ANY-06")||n.includes("ANY-07")||n.includes("ANY-08"))return"exchange";if(n.includes("LNS-"))return"locationName";if(n.includes("WOD-"))return"dapp";if(n.includes("CRT-"))return"certificate";if(n.includes("EXT-00"))return"mark";if(n.includes("MTP-")||n.includes("PMS-")||n.includes("MAC-"))return"other"}return e.from===t?"send":"receive"}function ot(e,t,n){const a=rt(e,n,e.rawType);return{id:`${t.id}--${e.hash}`,type:a,status:it(e.status),amount:e.amount,symbol:t.symbol,decimals:t.decimals,address:a==="send"?e.to:e.from,timestamp:new Date(e.timestamp),hash:e.hash,chain:t.id,fee:e.fee,feeSymbol:t.symbol,feeDecimals:t.decimals,blockNumber:e.blockNumber?Number(e.blockNumber):void 0,confirmations:e.status.confirmations}}function st(e,t){const n=e.trim(),a=t.trim();return n.startsWith("0x")&&a.startsWith("0x")?n.toLowerCase()===a.toLowerCase():n===a}function ct(e,t,n){const r=st(e.from,n)?"send":"receive";return{id:`${t.id}--${e.hash}`,type:r,status:e.status,amount:S.fromRaw(e.value,t.decimals,t.symbol),symbol:t.symbol,decimals:t.decimals,address:r==="send"?e.to:e.from,timestamp:new Date(e.timestamp),hash:e.hash,chain:t.id,blockNumber:e.blockNumber?Number(e.blockNumber):void 0,confirmations:void 0,fee:void 0,feeSymbol:void 0,feeDecimals:void 0}}function lt(e,t){if(!t||t==="all")return e;const n=t==="7d"?7:t==="30d"?30:90,a=Date.now()-n*24*60*60*1e3;return e.filter(r=>r.timestamp.getTime()>=a)}function dt(e,t){return!t||t==="all"?e:e.filter(n=>n.type===t)}function ut(e,t){return!t||t==="all"?e:e.filter(n=>n.status===t)}function mt(e,t){return!t||t==="all"?e:e.filter(n=>n.chain===t)}const gn=et.impl({async getHistory({walletId:e,filter:t}){return X(e,t)},async getTransaction({id:e}){return V.get(e)??null},async refresh({walletId:e}){await X(e,{chain:"all",period:"all",type:"all",status:"all"})}});var pt=Object.create,G=Object.defineProperty,ft=Object.getOwnPropertyDescriptor,re=Object.getOwnPropertyNames,gt=Object.getPrototypeOf,ht=Object.prototype.hasOwnProperty,W=(e,t)=>function(){return t||(0,e[re(e)[0]])((t={exports:{}}).exports,t),t.exports},_t=(e,t)=>{for(var n in t)G(e,n,{get:t[n],enumerable:!0})},Ot=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of re(t))!ht.call(e,r)&&r!==n&&G(e,r,{get:()=>t[r],enumerable:!(a=ft(t,r))||a.enumerable});return e},Et=(e,t,n)=>(n=e!=null?pt(gt(e)):{},Ot(G(n,"default",{value:e,enumerable:!0}),e)),Tt=W({"node_modules/is-object/index.js"(e,t){t.exports=function(a){return typeof a=="object"&&a!==null}}}),At=W({"node_modules/is-window/index.js"(e,t){t.exports=function(n){if(n==null)return!1;var a=Object(n);return a===a.window}}}),Rt=W({"node_modules/is-dom/index.js"(e,t){var n=Tt(),a=At();function r(o){return!n(o)||!a(window)||typeof window.Node!="function"?!1:typeof o.nodeType=="number"&&typeof o.nodeName=="string"}t.exports=r}}),oe={};_t(oe,{chromeDark:()=>bt,chromeLight:()=>Ct});var bt={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"rgb(36, 36, 36)",BASE_COLOR:"rgb(213, 213, 213)",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(227, 110, 236)",OBJECT_VALUE_NULL_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_REGEXP_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_STRING_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_NUMBER_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_BOOLEAN_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(85, 106, 242)",HTML_TAG_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(155, 187, 220)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(242, 151, 102)",HTML_COMMENT_COLOR:"rgb(137, 137, 137)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"rgb(145, 145, 145)",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"rgb(85, 85, 85)",TABLE_TH_BACKGROUND_COLOR:"rgb(44, 44, 44)",TABLE_TH_HOVER_COLOR:"rgb(48, 48, 48)",TABLE_SORT_ICON_COLOR:"black",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 0) 50%, rgba(51, 139, 255, 0.0980392) 50%, rgba(51, 139, 255, 0.0980392))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},Ct={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"white",BASE_COLOR:"black",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(136, 19, 145)",OBJECT_VALUE_NULL_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_REGEXP_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_STRING_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_NUMBER_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_BOOLEAN_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(13, 34, 170)",HTML_TAG_COLOR:"rgb(168, 148, 166)",HTML_TAGNAME_COLOR:"rgb(136, 18, 128)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(153, 69, 0)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(26, 26, 166)",HTML_COMMENT_COLOR:"rgb(35, 110, 37)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"#6e6e6e",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"#aaa",TABLE_TH_BACKGROUND_COLOR:"#eee",TABLE_TH_HOVER_COLOR:"hsla(0, 0%, 90%, 1)",TABLE_SORT_ICON_COLOR:"#6e6e6e",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(to bottom, white, white 50%, rgb(234, 243, 255) 50%, rgb(234, 243, 255))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},se=_.createContext([{},()=>{}]),F={WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",OUserSelect:"none",userSelect:"none"},St=e=>({DOMNodePreview:{htmlOpenTag:{base:{color:e.HTML_TAG_COLOR},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM},htmlAttributeName:{color:e.HTML_ATTRIBUTE_NAME_COLOR},htmlAttributeValue:{color:e.HTML_ATTRIBUTE_VALUE_COLOR}},htmlCloseTag:{base:{color:e.HTML_TAG_COLOR},offsetLeft:{marginLeft:-e.TREENODE_PADDING_LEFT},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM}},htmlComment:{color:e.HTML_COMMENT_COLOR},htmlDoctype:{color:e.HTML_DOCTYPE_COLOR}},ObjectPreview:{objectDescription:{fontStyle:"italic"},preview:{fontStyle:"italic"},arrayMaxProperties:e.OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES,objectMaxProperties:e.OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES},ObjectName:{base:{color:e.OBJECT_NAME_COLOR},dimmed:{opacity:.6}},ObjectValue:{objectValueNull:{color:e.OBJECT_VALUE_NULL_COLOR},objectValueUndefined:{color:e.OBJECT_VALUE_UNDEFINED_COLOR},objectValueRegExp:{color:e.OBJECT_VALUE_REGEXP_COLOR},objectValueString:{color:e.OBJECT_VALUE_STRING_COLOR},objectValueSymbol:{color:e.OBJECT_VALUE_SYMBOL_COLOR},objectValueNumber:{color:e.OBJECT_VALUE_NUMBER_COLOR},objectValueBoolean:{color:e.OBJECT_VALUE_BOOLEAN_COLOR},objectValueFunctionPrefix:{color:e.OBJECT_VALUE_FUNCTION_PREFIX_COLOR,fontStyle:"italic"},objectValueFunctionName:{fontStyle:"italic"}},TreeView:{treeViewOutline:{padding:0,margin:0,listStyleType:"none"}},TreeNode:{treeNodeBase:{color:e.BASE_COLOR,backgroundColor:e.BASE_BACKGROUND_COLOR,lineHeight:e.TREENODE_LINE_HEIGHT,cursor:"default",boxSizing:"border-box",listStyle:"none",fontFamily:e.TREENODE_FONT_FAMILY,fontSize:e.TREENODE_FONT_SIZE},treeNodePreviewContainer:{},treeNodePlaceholder:{whiteSpace:"pre",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT,...F},treeNodeArrow:{base:{color:e.ARROW_COLOR,display:"inline-block",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT,...parseFloat(e.ARROW_ANIMATION_DURATION)>0?{transition:`transform ${e.ARROW_ANIMATION_DURATION} ease 0s`}:{},...F},expanded:{WebkitTransform:"rotateZ(90deg)",MozTransform:"rotateZ(90deg)",transform:"rotateZ(90deg)"},collapsed:{WebkitTransform:"rotateZ(0deg)",MozTransform:"rotateZ(0deg)",transform:"rotateZ(0deg)"}},treeNodeChildNodesContainer:{margin:0,paddingLeft:e.TREENODE_PADDING_LEFT}},TableInspector:{base:{color:e.BASE_COLOR,position:"relative",border:`1px solid ${e.TABLE_BORDER_COLOR}`,fontFamily:e.BASE_FONT_FAMILY,fontSize:e.BASE_FONT_SIZE,lineHeight:"120%",boxSizing:"border-box",cursor:"default"}},TableInspectorHeaderContainer:{base:{top:0,height:"17px",left:0,right:0,overflowX:"hidden"},table:{tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",height:"100%",width:"100%",margin:0}},TableInspectorDataContainer:{tr:{display:"table-row"},td:{boxSizing:"border-box",border:"none",height:"16px",verticalAlign:"top",padding:"1px 4px",WebkitUserSelect:"text",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px"},div:{position:"static",top:"17px",bottom:0,overflowY:"overlay",transform:"translateZ(0)",left:0,right:0,overflowX:"hidden"},table:{positon:"static",left:0,top:0,right:0,bottom:0,borderTop:"0 none transparent",margin:0,backgroundImage:e.TABLE_DATA_BACKGROUND_IMAGE,backgroundSize:e.TABLE_DATA_BACKGROUND_SIZE,tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",width:"100%",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorTH:{base:{position:"relative",height:"auto",textAlign:"left",backgroundColor:e.TABLE_TH_BACKGROUND_COLOR,borderBottom:`1px solid ${e.TABLE_BORDER_COLOR}`,fontWeight:"normal",verticalAlign:"middle",padding:"0 4px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px",":hover":{backgroundColor:e.TABLE_TH_HOVER_COLOR}},div:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorLeftBorder:{none:{borderLeft:"none"},solid:{borderLeft:`1px solid ${e.TABLE_BORDER_COLOR}`}},TableInspectorSortIcon:{display:"block",marginRight:3,width:8,height:7,marginTop:-7,color:e.TABLE_SORT_ICON_COLOR,fontSize:12,...F}}),Nt="chromeLight",vt=_.createContext(St(oe[Nt])),ce=e=>_.useContext(vt)[e],Lt=({expanded:e,styles:t})=>R.createElement("span",{style:{...t.base,...e?t.expanded:t.collapsed}},"▶"),yt=_.memo(e=>{e={expanded:!0,nodeRenderer:({name:s})=>R.createElement("span",null,s),onClick:()=>{},shouldShowArrow:!1,shouldShowPlaceholder:!0,...e};const{expanded:t,onClick:n,children:a,nodeRenderer:r,title:o,shouldShowArrow:c,shouldShowPlaceholder:d}=e,u=ce("TreeNode"),l=r;return R.createElement("li",{"aria-expanded":t,role:"treeitem",style:u.treeNodeBase,title:o},R.createElement("div",{style:u.treeNodePreviewContainer,onClick:n},c||_.Children.count(a)>0?R.createElement(Lt,{expanded:t,styles:u.treeNodeArrow}):d&&R.createElement("span",{style:u.treeNodePlaceholder}," "),R.createElement(l,{...e})),R.createElement("ol",{role:"group",style:u.treeNodeChildNodesContainer},t?a:void 0))}),H="$",Q="*";function k(e,t){return!t(e).next().done}var wt=e=>Array.from({length:e},(t,n)=>[H].concat(Array.from({length:n},()=>"*")).join(".")),xt=(e,t,n,a,r)=>{const o=[].concat(wt(a)).concat(n).filter(d=>typeof d=="string"),c=[];return o.forEach(d=>{const u=d.split("."),l=(s,m,g)=>{if(g===u.length){c.push(m);return}const f=u[g];if(g===0)k(s,t)&&(f===H||f===Q)&&l(s,H,g+1);else if(f===Q)for(const{name:O,data:T}of t(s))k(T,t)&&l(T,`${m}.${O}`,g+1);else{const O=s[f];k(O,t)&&l(O,`${m}.${f}`,g+1)}};l(e,"",0)}),c.reduce((d,u)=>(d[u]=!0,d),{...r})},le=_.memo(e=>{const{data:t,dataIterator:n,path:a,depth:r,nodeRenderer:o}=e,[c,d]=_.useContext(se),u=k(t,n),l=!!c[a],s=_.useCallback(()=>u&&d(m=>({...m,[a]:!l})),[u,d,a,l]);return R.createElement(yt,{expanded:l,onClick:s,shouldShowArrow:u,shouldShowPlaceholder:r>0,nodeRenderer:o,...e},l?[...n(t)].map(({name:m,data:g,...f})=>R.createElement(le,{name:m,data:g,depth:r+1,path:`${a}.${m}`,key:m,dataIterator:n,nodeRenderer:o,...f})):null)});_.memo(({name:e,data:t,dataIterator:n,nodeRenderer:a,expandPaths:r,expandLevel:o})=>{const c=ce("TreeView"),d=_.useState({}),[,u]=d;return _.useLayoutEffect(()=>u(l=>xt(t,n,r,o,l)),[t,n,r,o]),R.createElement(se.Provider,{value:d},R.createElement("ol",{role:"tree",style:c.treeViewOutline},R.createElement(le,{name:e,data:t,dataIterator:n,depth:0,path:H,nodeRenderer:a})))});Et(Rt());const Bt=300*1e3,ee=new Map;function y(e){return e.trim().toUpperCase()}function te(e,t){const n=y(e),a=[...new Set(t.map(y))].filter(r=>r!==n).sort().join(",");return`${n}|${a}`}function It(e,t){const n=_.useMemo(()=>y(e),[e]),a=_.useMemo(()=>[...new Set(t.map(y))],[t.join(",")]),r=_.useMemo(()=>te(n,a),[n,a.join(",")]),[o,c]=_.useState({data:null,isLoading:a.length>0,error:null,updatedAt:null}),d=_.useCallback(async(u,l)=>{const s=y(u),m=[...new Set(l.map(y))].filter(T=>T!==s),g=te(s,m),f=Date.now(),O=ee.get(g);if(O&&f-O.updatedAt<Bt){c({data:O.data,isLoading:!1,error:null,updatedAt:O.updatedAt});return}if(m.length===0){const T=new Date().toISOString().split("T")[0],v={base:s,date:T??new Date().toISOString().slice(0,10),rates:{}};c({data:v,isLoading:!1,error:null,updatedAt:f});return}c(T=>({...T,isLoading:!0,error:null}));try{const T=await Je.getExchangeRates({baseCurrency:s,targetCurrencies:m});ee.set(g,{data:T,updatedAt:f}),c({data:T,isLoading:!1,error:null,updatedAt:f})}catch(T){c(v=>({...v,isLoading:!1,error:T instanceof Error?T.message:"Failed to fetch exchange rates"}))}},[]);return _.useEffect(()=>{d(n,a)},[r,n,a,d]),o}function Mt(e,t){const n=y(t);return e?.rates[n]}function Dt(e){const t=e.replaceAll(",","").trim();if(t.length===0)return null;const n=Number(t);return Number.isFinite(n)?n:null}function Ut({token:e,onClick:t,showChange:n=!1,loading:a=!1,className:r,testId:o}){const c=!!t,{t:d}=ne(["currency","common"]),u=pe(),l=e.fiatValue!==void 0&&u!=="USD",{data:s,isLoading:m,error:g}=It("USD",l?[u]:[]),f=l?Mt(s,u):void 0,O=e.fiatValue!==void 0?Dt(e.fiatValue):null,T=e.fiatValue!==void 0?O!==null?String(O):e.fiatValue:void 0,v=u!=="USD"&&f!==void 0&&O!==null,de=v?z[u].symbol:z.USD.symbol,J=v&&O!==null?String(O*f):T,ue=l&&!v?d(g?"exchange.error":m?"exchange.loading":"exchange.unavailable"):null;return h.jsxs("div",{...o&&{"data-testid":o},role:c?"button":void 0,tabIndex:c?0:void 0,onClick:t,onKeyDown:c?me=>me.key==="Enter"&&t?.():void 0,"aria-label":c?d("common:a11y.tokenDetails",{token:e.symbol}):void 0,className:D("@container flex items-center gap-3 rounded-xl p-3 transition-colors",c&&"hover:bg-muted/50 active:bg-muted cursor-pointer",r),children:[h.jsxs("div",{className:"relative",children:[h.jsx(_e,{symbol:e.symbol,chainId:e.chain,imageUrl:e.icon,size:"lg"}),h.jsx(j,{chain:e.chain,size:"sm",className:"ring-background absolute -right-0.5 -bottom-0.5 size-4 text-[8px] ring-2"})]}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsx("p",{className:"truncate text-sm font-medium @xs:text-base",children:e.symbol}),h.jsx("p",{className:"text-muted-foreground truncate text-xs @xs:text-sm",children:e.name})]}),h.jsxs("div",{className:"shrink-0 text-right",children:[h.jsx(Oe,{value:e.balance,loading:a,decimals:e.decimals??8,fixedDecimals:!0,className:"text-sm @xs:text-base"}),J&&!a&&h.jsxs("p",{className:"text-muted-foreground text-xs @xs:text-sm",title:ue??void 0,children:["≈ ",de,h.jsx($,{value:J,size:"xs",className:"inline"}),n&&e.change24h!==void 0&&h.jsx($,{value:e.change24h,sign:"always",color:"auto",size:"xs",className:"ml-1 inline"}),n&&e.change24h!==void 0&&"%"]}),a&&h.jsx("p",{className:"text-muted-foreground animate-pulse text-xs @xs:text-sm",children:"≈ --"})]})]})}Ut.__docgenInfo={description:"",methods:[],displayName:"TokenItem",props:{token:{required:!0,tsType:{name:"TokenInfo"},description:""},onClick:{required:!1,tsType:{name:"union",raw:"(() => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},showChange:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"",defaultValue:{value:"false",computed:!1}},loading:{required:!1,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:"Whether balance is loading (shows animation)",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},testId:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""}}};export{we as C,Ut as T,at as a,pn as c,mn as h,fn as s,gn as t};
