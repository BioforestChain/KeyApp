{"version":3,"file":"index.umd.js","sources":["../src/types.ts","../src/events.ts","../src/provider.ts","../src/ethereum-provider.ts","../src/tron-provider.ts","../src/chain-id.ts","../src/index.ts"],"sourcesContent":["/**\n * Bio SDK Types\n * EIP-1193 style provider interface for Bio ecosystem\n */\n\n/** Account information */\nexport interface BioAccount {\n  address: string\n  chain: string\n  name?: string\n  /** Public key (hex encoded) */\n  publicKey: string\n}\n\n/** Transfer parameters */\nexport interface TransferParams {\n  from: string\n  to: string\n  amount: string\n  chain: string\n  asset?: string\n}\n\n/** Unsigned transaction payload (chain-specific) */\nexport interface BioUnsignedTransaction {\n  chainId: string\n  data: unknown\n}\n\n/** Signed transaction payload (chain-specific) */\nexport interface BioSignedTransaction {\n  chainId: string\n  data: unknown\n  signature: string\n}\n\n/** Provider request arguments */\nexport interface RequestArguments {\n  method: string\n  params?: unknown[]\n}\n\n/** Provider RPC error */\nexport interface ProviderRpcError extends Error {\n  code: number\n  data?: unknown\n}\n\n/** Event handler type */\nexport type EventHandler<T = unknown> = (...args: T[]) => void\n\n/**\n * Bio Provider Interface (EIP-1193 style)\n */\nexport interface BioProvider {\n  /** Make a request to the provider */\n  request<T = unknown>(args: RequestArguments): Promise<T>\n\n  /** Subscribe to an event */\n  on(event: string, handler: EventHandler): void\n\n  /** Unsubscribe from an event */\n  off(event: string, handler: EventHandler): void\n\n  /** Check if connected */\n  isConnected(): boolean\n}\n\n/**\n * Bio method definitions\n */\nexport interface BioMethods {\n  /** Request wallet accounts (shows connection UI) */\n  bio_requestAccounts: () => Promise<BioAccount[]>\n\n  /** Get connected accounts (no UI) */\n  bio_accounts: () => Promise<BioAccount[]>\n\n  /** Select an account (shows account picker UI) */\n  bio_selectAccount: (opts?: { chain?: string }) => Promise<BioAccount>\n\n  /** Pick another wallet address (shows wallet picker UI) */\n  bio_pickWallet: (opts?: { chain?: string; exclude?: string }) => Promise<BioAccount>\n\n  /** Sign a message, returns signature and public key (hex) */\n  bio_signMessage: (params: { message: string; address: string }) => Promise<{ signature: string; publicKey: string }>\n\n  /** Sign typed data, returns signature and public key (hex) */\n  bio_signTypedData: (params: { data: object; address: string }) => Promise<{ signature: string; publicKey: string }>\n\n  /** Create an unsigned transaction (no signature, no broadcast) */\n  bio_createTransaction: (params: TransferParams) => Promise<BioUnsignedTransaction>\n\n  /** Sign an unsigned transaction (requires user confirmation) */\n  bio_signTransaction: (params: { from: string; chain: string; unsignedTx: BioUnsignedTransaction }) => Promise<BioSignedTransaction>\n\n  /** Send a transaction */\n  bio_sendTransaction: (params: TransferParams) => Promise<{ txHash: string }>\n\n  /** Get current chain ID */\n  bio_chainId: () => Promise<string>\n\n  /** Get balance */\n  bio_getBalance: (params: { address: string; chain: string }) => Promise<string>\n\n  /** Close splash screen (indicates app is ready) */\n  bio_closeSplashScreen: () => Promise<void>\n}\n\n/**\n * Bio event definitions\n */\nexport interface BioEvents {\n  /** Emitted when accounts change */\n  accountsChanged: (accounts: BioAccount[]) => void\n\n  /** Emitted when chain changes */\n  chainChanged: (chainId: string) => void\n\n  /** Emitted when connected */\n  connect: (info: { chainId: string }) => void\n\n  /** Emitted when disconnected */\n  disconnect: (error: { code: number; message: string }) => void\n}\n\n/** Method names */\nexport type BioMethodName = keyof BioMethods\n\n/** Event names */\nexport type BioEventName = keyof BioEvents\n\n/** RPC error codes */\nexport const BioErrorCodes = {\n  USER_REJECTED: 4001,\n  UNAUTHORIZED: 4100,\n  UNSUPPORTED_METHOD: 4200,\n  DISCONNECTED: 4900,\n  CHAIN_DISCONNECTED: 4901,\n  INTERNAL_ERROR: -32603,\n  INVALID_PARAMS: -32602,\n  METHOD_NOT_FOUND: -32601,\n} as const\n\n/** Create a provider RPC error */\nexport function createProviderError(code: number, message: string, data?: unknown): ProviderRpcError {\n  const error = new Error(message) as ProviderRpcError\n  error.code = code\n  error.data = data\n  return error\n}\n","/**\n * Event emitter for Bio SDK\n */\n\nimport type { EventHandler } from './types'\n\nexport class EventEmitter {\n  private handlers = new Map<string, Set<EventHandler>>()\n\n  on(event: string, handler: EventHandler): void {\n    let handlers = this.handlers.get(event)\n    if (!handlers) {\n      handlers = new Set()\n      this.handlers.set(event, handlers)\n    }\n    handlers.add(handler)\n  }\n\n  off(event: string, handler: EventHandler): void {\n    const handlers = this.handlers.get(event)\n    if (handlers) {\n      handlers.delete(handler)\n      if (handlers.size === 0) {\n        this.handlers.delete(event)\n      }\n    }\n  }\n\n  emit(event: string, ...args: unknown[]): void {\n    const handlers = this.handlers.get(event)\n    if (handlers) {\n      handlers.forEach((handler) => {\n        try {\n          handler(...args)\n        } catch (error) {\n          console.error(`[BioSDK] Error in event handler for \"${event}\":`, error)\n        }\n      })\n    }\n  }\n\n  removeAllListeners(event?: string): void {\n    if (event) {\n      this.handlers.delete(event)\n    } else {\n      this.handlers.clear()\n    }\n  }\n}\n","/**\n * Bio Provider Implementation\n * Communicates with KeyApp host via postMessage\n */\n\nimport type { BioProvider, RequestArguments, EventHandler } from './types'\nimport { BioErrorCodes, createProviderError } from './types'\nimport { EventEmitter } from './events'\n\n/** Message sent to host */\ninterface RequestMessage {\n  type: 'bio_request'\n  id: string\n  method: string\n  params?: unknown[]\n}\n\n/** Response from host */\ninterface ResponseMessage {\n  type: 'bio_response'\n  id: string\n  success: boolean\n  result?: unknown\n  error?: { code: number; message: string; data?: unknown }\n}\n\n/** Event from host */\ninterface EventMessage {\n  type: 'bio_event'\n  event: string\n  args: unknown[]\n}\n\ntype HostMessage = ResponseMessage | EventMessage\n\nexport class BioProviderImpl implements BioProvider {\n  private events = new EventEmitter()\n  private pendingRequests = new Map<string, {\n    resolve: (value: unknown) => void\n    reject: (error: Error) => void\n  }>()\n  private requestIdCounter = 0\n  private connected = false\n  private readonly targetOrigin: string\n\n  constructor(targetOrigin = '*') {\n    this.targetOrigin = targetOrigin\n    this.setupMessageListener()\n    this.connect()\n  }\n\n  private setupMessageListener(): void {\n    window.addEventListener('message', this.handleMessage.bind(this))\n  }\n\n  private handleMessage(event: MessageEvent): void {\n    const data = event.data as HostMessage\n    if (!data || typeof data !== 'object') return\n\n    if (data.type === 'bio_response') {\n      this.handleResponse(data)\n    } else if (data.type === 'bio_event') {\n      this.handleEvent(data)\n    }\n  }\n\n  private handleResponse(message: ResponseMessage): void {\n    const pending = this.pendingRequests.get(message.id)\n    if (!pending) return\n\n    this.pendingRequests.delete(message.id)\n\n    if (message.success) {\n      pending.resolve(message.result)\n    } else {\n      const error = message.error ?? { code: BioErrorCodes.INTERNAL_ERROR, message: 'Unknown error' }\n      pending.reject(createProviderError(error.code, error.message, error.data))\n    }\n  }\n\n  private handleEvent(message: EventMessage): void {\n    this.events.emit(message.event, ...message.args)\n\n    // Handle built-in events\n    if (message.event === 'connect') {\n      this.connected = true\n    } else if (message.event === 'disconnect') {\n      this.connected = false\n    }\n  }\n\n  private connect(): void {\n    // Send handshake to host\n    this.postMessage({\n      type: 'bio_request',\n      id: this.generateId(),\n      method: 'bio_connect',\n      params: [],\n    })\n  }\n\n  private generateId(): string {\n    return `bio_${Date.now()}_${++this.requestIdCounter}`\n  }\n\n  private postMessage(message: RequestMessage): void {\n    if (window.parent === window) {\n      console.warn('[BioSDK] Not running in iframe, cannot communicate with host')\n      return\n    }\n    window.parent.postMessage(message, this.targetOrigin)\n  }\n\n  async request<T = unknown>(args: RequestArguments): Promise<T> {\n    const id = this.generateId()\n\n    return new Promise<T>((resolve, reject) => {\n      this.pendingRequests.set(id, {\n        resolve: resolve as (value: unknown) => void,\n        reject,\n      })\n\n      this.postMessage({\n        type: 'bio_request',\n        id,\n        method: args.method,\n        params: args.params,\n      })\n\n      // Timeout after 5 minutes (for user interactions)\n      setTimeout(() => {\n        if (this.pendingRequests.has(id)) {\n          this.pendingRequests.delete(id)\n          reject(createProviderError(BioErrorCodes.INTERNAL_ERROR, 'Request timeout'))\n        }\n      }, 5 * 60 * 1000)\n    })\n  }\n\n  on(event: string, handler: EventHandler): void {\n    this.events.on(event, handler)\n  }\n\n  off(event: string, handler: EventHandler): void {\n    this.events.off(event, handler)\n  }\n\n  isConnected(): boolean {\n    return this.connected\n  }\n}\n","/**\n * Ethereum Provider (EIP-1193 Compatible)\n *\n * Provides window.ethereum for EVM-compatible dApps.\n * Communicates with KeyApp host via postMessage.\n */\n\nimport { EventEmitter } from './events'\nimport { BioErrorCodes, createProviderError, type ProviderRpcError } from './types'\nimport { toHexChainId, parseHexChainId, getKeyAppChainId, EVM_CHAIN_IDS } from './chain-id'\n\n/** EIP-1193 Request Arguments */\nexport interface EthRequestArguments {\n  method: string\n  params?: unknown[] | Record<string, unknown>\n}\n\n/** EIP-1193 Provider Connect Info */\nexport interface ProviderConnectInfo {\n  chainId: string\n}\n\n/** EIP-1193 Provider Message */\nexport interface ProviderMessage {\n  type: string\n  data: unknown\n}\n\n/** Transaction request (eth_sendTransaction) */\nexport interface TransactionRequest {\n  from: string\n  to?: string\n  value?: string\n  data?: string\n  gas?: string\n  gasPrice?: string\n  maxFeePerGas?: string\n  maxPriorityFeePerGas?: string\n  nonce?: string\n}\n\n/** Message sent to host */\ninterface RequestMessage {\n  type: 'eth_request'\n  id: string\n  method: string\n  params?: unknown[]\n}\n\n/** Response from host */\ninterface ResponseMessage {\n  type: 'eth_response'\n  id: string\n  success: boolean\n  result?: unknown\n  error?: { code: number; message: string; data?: unknown }\n}\n\n/** Event from host */\ninterface EventMessage {\n  type: 'eth_event'\n  event: string\n  args: unknown[]\n}\n\ntype HostMessage = ResponseMessage | EventMessage\n\n/**\n * EIP-1193 Ethereum Provider Implementation\n */\nexport class EthereumProvider {\n  private events = new EventEmitter()\n  private pendingRequests = new Map<string, {\n    resolve: (value: unknown) => void\n    reject: (error: Error) => void\n  }>()\n  private requestIdCounter = 0\n  private connected = false\n  private currentChainId: string | null = null\n  private accounts: string[] = []\n  private readonly targetOrigin: string\n\n  // EIP-1193 required properties\n  readonly isMetaMask = false\n  readonly isKeyApp = true\n\n  constructor(targetOrigin = '*') {\n    this.targetOrigin = targetOrigin\n    this.setupMessageListener()\n  }\n\n  private setupMessageListener(): void {\n    window.addEventListener('message', this.handleMessage.bind(this))\n  }\n\n  private handleMessage(event: MessageEvent): void {\n    const data = event.data as HostMessage\n    if (!data || typeof data !== 'object') return\n\n    if (data.type === 'eth_response') {\n      this.handleResponse(data)\n    } else if (data.type === 'eth_event') {\n      this.handleEvent(data)\n    }\n  }\n\n  private handleResponse(message: ResponseMessage): void {\n    const pending = this.pendingRequests.get(message.id)\n    if (!pending) return\n\n    this.pendingRequests.delete(message.id)\n\n    if (message.success) {\n      pending.resolve(message.result)\n    } else {\n      const error = message.error ?? { code: BioErrorCodes.INTERNAL_ERROR, message: 'Unknown error' }\n      pending.reject(createProviderError(error.code, error.message, error.data))\n    }\n  }\n\n  private handleEvent(message: EventMessage): void {\n    this.events.emit(message.event, ...message.args)\n\n    // Handle built-in events\n    if (message.event === 'connect') {\n      this.connected = true\n      const info = message.args[0] as ProviderConnectInfo\n      this.currentChainId = info?.chainId ?? null\n    } else if (message.event === 'disconnect') {\n      this.connected = false\n      this.accounts = []\n    } else if (message.event === 'chainChanged') {\n      this.currentChainId = message.args[0] as string\n    } else if (message.event === 'accountsChanged') {\n      this.accounts = message.args[0] as string[]\n    }\n  }\n\n  private generateId(): string {\n    return `eth_${Date.now()}_${++this.requestIdCounter}`\n  }\n\n  private postMessage(message: RequestMessage): void {\n    if (window.parent === window) {\n      console.warn('[EthereumProvider] Not running in iframe, cannot communicate with host')\n      return\n    }\n    window.parent.postMessage(message, this.targetOrigin)\n  }\n\n  /**\n   * EIP-1193 request method\n   */\n  async request<T = unknown>(args: EthRequestArguments): Promise<T> {\n    const { method, params } = args\n    const paramsArray = Array.isArray(params) ? params : params ? [params] : []\n\n    const id = this.generateId()\n\n    return new Promise<T>((resolve, reject) => {\n      this.pendingRequests.set(id, {\n        resolve: resolve as (value: unknown) => void,\n        reject,\n      })\n\n      this.postMessage({\n        type: 'eth_request',\n        id,\n        method,\n        params: paramsArray,\n      })\n\n      // Timeout after 5 minutes (for user interactions)\n      setTimeout(() => {\n        if (this.pendingRequests.has(id)) {\n          this.pendingRequests.delete(id)\n          reject(createProviderError(BioErrorCodes.INTERNAL_ERROR, 'Request timeout'))\n        }\n      }, 5 * 60 * 1000)\n    })\n  }\n\n  /**\n   * Subscribe to an event\n   */\n  on(event: string, handler: (...args: unknown[]) => void): this {\n    this.events.on(event, handler)\n    return this\n  }\n\n  /**\n   * Unsubscribe from an event\n   */\n  off(event: string, handler: (...args: unknown[]) => void): this {\n    this.events.off(event, handler)\n    return this\n  }\n\n  /**\n   * Alias for off (Node.js EventEmitter compatibility)\n   */\n  removeListener(event: string, handler: (...args: unknown[]) => void): this {\n    return this.off(event, handler)\n  }\n\n  /**\n   * Add listener that fires only once\n   */\n  once(event: string, handler: (...args: unknown[]) => void): this {\n    const wrapper = (...args: unknown[]) => {\n      this.off(event, wrapper)\n      handler(...args)\n    }\n    this.on(event, wrapper)\n    return this\n  }\n\n  /**\n   * EIP-1193 isConnected method\n   */\n  isConnected(): boolean {\n    return this.connected\n  }\n\n  /**\n   * Get current chain ID (cached)\n   */\n  get chainId(): string | null {\n    return this.currentChainId\n  }\n\n  /**\n   * Get selected address (first account)\n   */\n  get selectedAddress(): string | null {\n    return this.accounts[0] ?? null\n  }\n\n  // ============================================\n  // Legacy methods (for backwards compatibility)\n  // ============================================\n\n  /**\n   * @deprecated Use request({ method: 'eth_requestAccounts' })\n   */\n  async enable(): Promise<string[]> {\n    return this.request({ method: 'eth_requestAccounts' })\n  }\n\n  /**\n   * @deprecated Use request()\n   */\n  send(method: string, params?: unknown[]): Promise<unknown> {\n    return this.request({ method, params })\n  }\n\n  /**\n   * @deprecated Use request()\n   */\n  sendAsync(\n    payload: { method: string; params?: unknown[]; id?: number },\n    callback: (error: Error | null, result?: { result: unknown }) => void\n  ): void {\n    this.request({ method: payload.method, params: payload.params })\n      .then((result) => callback(null, { result }))\n      .catch((error) => callback(error))\n  }\n}\n\n// Extend Window interface\ndeclare global {\n  interface Window {\n    ethereum?: EthereumProvider\n  }\n}\n\n/**\n * Initialize and inject the Ethereum provider into window.ethereum\n */\nexport function initEthereumProvider(targetOrigin = '*'): EthereumProvider {\n  if (typeof window === 'undefined') {\n    throw new Error('[EthereumProvider] Cannot initialize: window is not defined')\n  }\n\n  if (window.ethereum) {\n    console.warn('[EthereumProvider] Provider already exists, returning existing instance')\n    return window.ethereum\n  }\n\n  const provider = new EthereumProvider(targetOrigin)\n  window.ethereum = provider\n\n  console.log('[EthereumProvider] Provider initialized')\n  return provider\n}\n","/**\n * Tron Provider (TronLink Compatible)\n *\n * Provides window.tronWeb and window.tronLink for Tron dApps.\n * Communicates with KeyApp host via postMessage.\n */\n\nimport { EventEmitter } from './events'\nimport { BioErrorCodes, createProviderError } from './types'\n\n/** Tron address format */\nexport interface TronAddress {\n  base58: string\n  hex: string\n}\n\n/** TronLink request arguments (EIP-1193 style) */\nexport interface TronRequestArguments {\n  method: string\n  params?: unknown\n}\n\n/** Message sent to host */\ninterface RequestMessage {\n  type: 'tron_request'\n  id: string\n  method: string\n  params?: unknown[]\n}\n\n/** Response from host */\ninterface ResponseMessage {\n  type: 'tron_response'\n  id: string\n  success: boolean\n  result?: unknown\n  error?: { code: number; message: string; data?: unknown }\n}\n\n/** Event from host */\ninterface EventMessage {\n  type: 'tron_event'\n  event: string\n  args: unknown[]\n}\n\ntype HostMessage = ResponseMessage | EventMessage\n\n/**\n * TronLink-compatible Provider\n */\nexport class TronLinkProvider {\n  private events = new EventEmitter()\n  private pendingRequests = new Map<string, {\n    resolve: (value: unknown) => void\n    reject: (error: Error) => void\n  }>()\n  private requestIdCounter = 0\n  private readonly targetOrigin: string\n\n  constructor(targetOrigin = '*') {\n    this.targetOrigin = targetOrigin\n    this.setupMessageListener()\n  }\n\n  private setupMessageListener(): void {\n    window.addEventListener('message', this.handleMessage.bind(this))\n  }\n\n  private handleMessage(event: MessageEvent): void {\n    const data = event.data as HostMessage\n    if (!data || typeof data !== 'object') return\n\n    if (data.type === 'tron_response') {\n      this.handleResponse(data)\n    } else if (data.type === 'tron_event') {\n      this.handleEvent(data)\n    }\n  }\n\n  private handleResponse(message: ResponseMessage): void {\n    const pending = this.pendingRequests.get(message.id)\n    if (!pending) return\n\n    this.pendingRequests.delete(message.id)\n\n    if (message.success) {\n      pending.resolve(message.result)\n    } else {\n      const error = message.error ?? { code: BioErrorCodes.INTERNAL_ERROR, message: 'Unknown error' }\n      pending.reject(createProviderError(error.code, error.message, error.data))\n    }\n  }\n\n  private handleEvent(message: EventMessage): void {\n    this.events.emit(message.event, ...message.args)\n  }\n\n  private generateId(): string {\n    return `tron_${Date.now()}_${++this.requestIdCounter}`\n  }\n\n  private postMessage(message: RequestMessage): void {\n    if (window.parent === window) {\n      console.warn('[TronLinkProvider] Not running in iframe, cannot communicate with host')\n      return\n    }\n    window.parent.postMessage(message, this.targetOrigin)\n  }\n\n  /**\n   * TronLink request method (EIP-1193 style)\n   */\n  async request<T = unknown>(args: TronRequestArguments): Promise<T> {\n    const { method, params } = args\n    const paramsArray = Array.isArray(params) ? params : params !== undefined ? [params] : []\n\n    const id = this.generateId()\n\n    return new Promise<T>((resolve, reject) => {\n      this.pendingRequests.set(id, {\n        resolve: resolve as (value: unknown) => void,\n        reject,\n      })\n\n      this.postMessage({\n        type: 'tron_request',\n        id,\n        method,\n        params: paramsArray,\n      })\n\n      // Timeout after 5 minutes\n      setTimeout(() => {\n        if (this.pendingRequests.has(id)) {\n          this.pendingRequests.delete(id)\n          reject(createProviderError(BioErrorCodes.INTERNAL_ERROR, 'Request timeout'))\n        }\n      }, 5 * 60 * 1000)\n    })\n  }\n\n  on(event: string, handler: (...args: unknown[]) => void): this {\n    this.events.on(event, handler)\n    return this\n  }\n\n  off(event: string, handler: (...args: unknown[]) => void): this {\n    this.events.off(event, handler)\n    return this\n  }\n}\n\n/**\n * TronWeb-compatible API\n * Provides the subset of TronWeb API that KeyApp supports\n */\nexport class TronWebProvider {\n  private tronLink: TronLinkProvider\n  private _ready = false\n  private _defaultAddress: TronAddress = { base58: '', hex: '' }\n\n  /** TRX operations */\n  readonly trx: TronWebTrx\n\n  constructor(tronLink: TronLinkProvider) {\n    this.tronLink = tronLink\n    this.trx = new TronWebTrx(tronLink)\n\n    // Listen for account changes\n    tronLink.on('accountsChanged', (accounts: unknown) => {\n      if (Array.isArray(accounts) && accounts.length > 0) {\n        const addr = accounts[0] as TronAddress\n        this._defaultAddress = addr\n        this._ready = true\n      } else {\n        this._defaultAddress = { base58: '', hex: '' }\n        this._ready = false\n      }\n    })\n  }\n\n  /** Whether TronWeb is ready (connected) */\n  get ready(): boolean {\n    return this._ready\n  }\n\n  /** Current default address */\n  get defaultAddress(): TronAddress {\n    return this._defaultAddress\n  }\n\n  /**\n   * Set default address (called by host after connection)\n   */\n  setAddress(address: TronAddress): void {\n    this._defaultAddress = address\n    this._ready = true\n  }\n\n  /**\n   * Check if an address is valid\n   */\n  isAddress(address: string): boolean {\n    // Basic validation: base58 starts with T, hex starts with 41\n    if (address.startsWith('T')) {\n      return address.length === 34\n    }\n    if (address.startsWith('41')) {\n      return address.length === 42\n    }\n    return false\n  }\n\n  /**\n   * Convert address to hex format\n   */\n  address = {\n    toHex: (base58: string): string => {\n      // This is a stub - actual conversion requires TronWeb library\n      // KeyApp will handle the conversion on the host side\n      return base58\n    },\n    fromHex: (hex: string): string => {\n      return hex\n    },\n  }\n}\n\n/**\n * TronWeb.trx operations\n */\nclass TronWebTrx {\n  private tronLink: TronLinkProvider\n\n  constructor(tronLink: TronLinkProvider) {\n    this.tronLink = tronLink\n  }\n\n  /**\n   * Sign a transaction\n   */\n  async sign(transaction: unknown): Promise<unknown> {\n    return this.tronLink.request({\n      method: 'tron_signTransaction',\n      params: transaction,\n    })\n  }\n\n  /**\n   * Send raw transaction (broadcast)\n   */\n  async sendRawTransaction(signedTransaction: unknown): Promise<unknown> {\n    return this.tronLink.request({\n      method: 'tron_sendRawTransaction',\n      params: signedTransaction,\n    })\n  }\n\n  /**\n   * Get account balance\n   */\n  async getBalance(address: string): Promise<number> {\n    return this.tronLink.request({\n      method: 'tron_getBalance',\n      params: address,\n    })\n  }\n\n  /**\n   * Get account info\n   */\n  async getAccount(address: string): Promise<unknown> {\n    return this.tronLink.request({\n      method: 'tron_getAccount',\n      params: address,\n    })\n  }\n}\n\n// Extend Window interface\ndeclare global {\n  interface Window {\n    tronLink?: TronLinkProvider\n    tronWeb?: TronWebProvider\n  }\n}\n\n/**\n * Initialize and inject the Tron providers\n */\nexport function initTronProvider(targetOrigin = '*'): { tronLink: TronLinkProvider; tronWeb: TronWebProvider } {\n  if (typeof window === 'undefined') {\n    throw new Error('[TronProvider] Cannot initialize: window is not defined')\n  }\n\n  if (window.tronLink && window.tronWeb) {\n    console.warn('[TronProvider] Providers already exist, returning existing instances')\n    return { tronLink: window.tronLink, tronWeb: window.tronWeb }\n  }\n\n  const tronLink = new TronLinkProvider(targetOrigin)\n  const tronWeb = new TronWebProvider(tronLink)\n\n  window.tronLink = tronLink\n  window.tronWeb = tronWeb\n\n  console.log('[TronProvider] Providers initialized')\n  return { tronLink, tronWeb }\n}\n","/**\n * Chain ID utilities\n * Maps between KeyApp internal chain IDs and standard chain IDs\n */\n\n/** EVM Chain ID mapping (decimal) */\nexport const EVM_CHAIN_IDS: Record<string, number> = {\n  ethereum: 1,\n  binance: 56,\n  // Future chains\n  // polygon: 137,\n  // arbitrum: 42161,\n  // optimism: 10,\n} as const\n\n/** Reverse mapping: EVM chainId -> KeyApp chain ID */\nexport const EVM_CHAIN_ID_TO_KEYAPP: Record<number, string> = Object.fromEntries(\n  Object.entries(EVM_CHAIN_IDS).map(([key, value]) => [value, key])\n)\n\n/** API chain name to KeyApp chain ID mapping */\nexport const API_CHAIN_TO_KEYAPP: Record<string, string> = {\n  ETH: 'ethereum',\n  BSC: 'binance',\n  TRON: 'tron',\n  // Lowercase variants\n  eth: 'ethereum',\n  bsc: 'binance',\n  tron: 'tron',\n} as const\n\n/** KeyApp chain ID to display name */\nexport const CHAIN_DISPLAY_NAMES: Record<string, string> = {\n  ethereum: 'Ethereum',\n  binance: 'BNB Smart Chain',\n  tron: 'Tron',\n  bfmeta: 'BFMeta',\n  bfchain: 'BFChain',\n} as const\n\n/**\n * Convert decimal chain ID to hex string (EIP-155 format)\n * @example toHexChainId(56) => '0x38'\n */\nexport function toHexChainId(chainId: number): string {\n  return `0x${chainId.toString(16)}`\n}\n\n/**\n * Parse hex chain ID to decimal\n * @example parseHexChainId('0x38') => 56\n */\nexport function parseHexChainId(hexChainId: string): number {\n  if (!hexChainId.startsWith('0x')) {\n    throw new Error(`Invalid hex chain ID: ${hexChainId}`)\n  }\n  return parseInt(hexChainId, 16)\n}\n\n/**\n * Get KeyApp chain ID from EVM hex chain ID\n * @example getKeyAppChainId('0x38') => 'binance'\n */\nexport function getKeyAppChainId(hexChainId: string): string | null {\n  const decimal = parseHexChainId(hexChainId)\n  return EVM_CHAIN_ID_TO_KEYAPP[decimal] ?? null\n}\n\n/**\n * Get EVM hex chain ID from KeyApp chain ID\n * @example getEvmChainId('binance') => '0x38'\n */\nexport function getEvmChainId(keyAppChainId: string): string | null {\n  const decimal = EVM_CHAIN_IDS[keyAppChainId]\n  return decimal ? toHexChainId(decimal) : null\n}\n\n/**\n * Check if a chain is EVM compatible\n */\nexport function isEvmChain(chainId: string): boolean {\n  return chainId in EVM_CHAIN_IDS\n}\n\n/**\n * Normalize API chain name to KeyApp chain ID\n * @example normalizeChainId('BSC') => 'binance'\n */\nexport function normalizeChainId(chainName: string): string {\n  return API_CHAIN_TO_KEYAPP[chainName] ?? chainName.toLowerCase()\n}\n","/**\n * Bio SDK - Client SDK for Bio Ecosystem MiniApps\n *\n * Injects providers for multi-chain dApp support:\n * - `window.bio` - BioChain + KeyApp wallet features\n * - `window.ethereum` - EVM-compatible chains (ETH, BSC)\n * - `window.tronWeb` / `window.tronLink` - Tron chain\n *\n * @example\n * ```typescript\n * import '@biochain/bio-sdk'\n *\n * // BioChain operations\n * const accounts = await window.bio.request({ method: 'bio_requestAccounts' })\n *\n * // EVM operations (ETH, BSC)\n * const ethAccounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n *\n * // Tron operations\n * const tronAccounts = await window.tronLink.request({ method: 'tron_requestAccounts' })\n * ```\n */\n\nimport { BioProviderImpl } from './provider'\nimport { EthereumProvider, initEthereumProvider } from './ethereum-provider'\nimport { TronLinkProvider, TronWebProvider, initTronProvider } from './tron-provider'\nimport type { BioProvider } from './types'\n\n// Re-export types\nexport * from './types'\nexport * from './chain-id'\nexport { EventEmitter } from './events'\nexport { BioProviderImpl } from './provider'\nexport { EthereumProvider, initEthereumProvider } from './ethereum-provider'\nexport { TronLinkProvider, TronWebProvider, initTronProvider } from './tron-provider'\n\n// Extend Window interface (bio is declared in types.ts already for ethereum/tron)\ndeclare global {\n  interface Window {\n    bio?: BioProvider\n  }\n}\n\n/**\n * Initialize and inject the Bio provider into window.bio\n */\nexport function initBioProvider(targetOrigin = '*'): BioProvider {\n  if (typeof window === 'undefined') {\n    throw new Error('[BioSDK] Cannot initialize: window is not defined')\n  }\n\n  if (window.bio) {\n    console.warn('[BioSDK] Provider already exists, returning existing instance')\n    return window.bio\n  }\n\n  const provider = new BioProviderImpl(targetOrigin)\n  window.bio = provider\n\n  console.log('[BioSDK] Provider initialized')\n  return provider\n}\n\n/**\n * Initialize all providers (bio, ethereum, tron)\n */\nexport function initAllProviders(targetOrigin = '*'): {\n  bio: BioProvider\n  ethereum: EthereumProvider\n  tronLink: TronLinkProvider\n  tronWeb: TronWebProvider\n} {\n  const bio = initBioProvider(targetOrigin)\n  const ethereum = initEthereumProvider(targetOrigin)\n  const { tronLink, tronWeb } = initTronProvider(targetOrigin)\n\n  return { bio, ethereum, tronLink, tronWeb }\n}\n\n// Auto-initialize if running in browser\nif (typeof window !== 'undefined') {\n  const init = () => {\n    initBioProvider()\n    initEthereumProvider()\n    initTronProvider()\n  }\n\n  // Use a slight delay to ensure DOM is ready\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init)\n  } else {\n    init()\n  }\n}\n"],"names":[],"mappings":"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"}