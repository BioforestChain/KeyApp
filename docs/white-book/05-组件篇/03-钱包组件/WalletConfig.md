# WalletConfig é’±åŒ…é…ç½®

> ç»Ÿä¸€çš„é’±åŒ…åç§°å’Œä¸»é¢˜è‰²é…ç½®ç»„ä»¶ï¼Œæ”¯æŒä¸‰ç§ä½¿ç”¨æ¨¡å¼

---

## åŠŸèƒ½æè¿°

æä¾›é’±åŒ…ä¸ªæ€§åŒ–é…ç½®ç•Œé¢ï¼ŒåŒ…æ‹¬ï¼š
- é’±åŒ…åç§°ç¼–è¾‘
- ä¸»é¢˜è‰²é€‰æ‹©ï¼ˆè‰²ç›¸æ»‘å— + é¢„è®¾é¢œè‰²ï¼‰
- å®æ—¶å¡ç‰‡é¢„è§ˆ
- é’±åŒ…ç®¡ç†æ“ä½œï¼ˆå¯¼å‡ºåŠ©è®°è¯ã€åˆ é™¤é’±åŒ…ï¼‰

---

## ä½¿ç”¨æ¨¡å¼

### æ¨¡å¼ä¸€è§ˆ

| æ¨¡å¼ | åœºæ™¯ | æ“ä½œæŒ‰é’® | å®Œæˆè¡Œä¸º |
|------|------|----------|----------|
| `edit-only` | åˆ›å»º/æ¢å¤æœ€åä¸€æ­¥ | ç¡®è®¤ | è°ƒç”¨ `onEditOnlyComplete` |
| `default` | é’±åŒ…è¯¦æƒ…é¡µ | ç¼–è¾‘/åŠ©è®°è¯/åˆ é™¤ | åˆ‡æ¢åˆ° `edit` |
| `edit` | ä» default åˆ‡æ¢ | ä¿å­˜/å–æ¶ˆ | åˆ‡å› `default` |

### æ¨¡å¼æµè½¬

```
åˆ›å»ºé’±åŒ…æµç¨‹:
  å¯†ç  â†’ åŠ©è®°è¯ â†’ é“¾é€‰æ‹© â†’ [edit-only] â†’ å®Œæˆ
                              â†“
                        onEditOnlyComplete()

é’±åŒ…è¯¦æƒ…é¡µ:
  [default] âŸ· [edit]
      â†“          â†“
   ç‚¹å‡»ç¼–è¾‘    ä¿å­˜/å–æ¶ˆ
```

---

## å±æ€§è§„èŒƒ

| å±æ€§ | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ |
|-----|------|-----|-------|------|
| mode | `'edit-only' \| 'default' \| 'edit'` | Y | - | ä½¿ç”¨æ¨¡å¼ |
| walletId | string | Y | - | é’±åŒ… ID |
| onEditOnlyComplete | () => void | N | - | edit-only æ¨¡å¼å®Œæˆå›è°ƒ |
| className | string | N | - | è‡ªå®šä¹‰æ ·å¼ç±» |

---

## å¸ƒå±€è§„èŒƒ

### edit-only / edit æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚     â”‚                             â”‚     â”‚
â”‚     â”‚       WalletCard é¢„è§ˆ       â”‚     â”‚  â† å®æ—¶é¢„è§ˆ
â”‚     â”‚                             â”‚     â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é’±åŒ…åç§°                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         è¾“å…¥æ¡†                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è‡ªå®šä¹‰é¢œè‰²                     270.5Â°  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â—â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚   â”‚  â† å½©è™¹è‰²æ¡
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚     â—‹ â—‹ â—‹ â— â—‹ â—‹ â—‹ â—‹ â—‹ â—‹ â—‹ â—‹          â”‚  â† é¢„è®¾é¢œè‰²
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   å–æ¶ˆ     â”‚  â”‚      ä¿å­˜      â”‚   â”‚  â† edit æ¨¡å¼
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚             ç¡®è®¤                 â”‚   â”‚  â† edit-only æ¨¡å¼
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### default æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚     â”‚       WalletCard é¢„è§ˆ       â”‚     â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœï¸  ç¼–è¾‘åç§°å’Œä¸»é¢˜               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”‘  æŸ¥çœ‹åŠ©è®°è¯                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ—‘ï¸  åˆ é™¤é’±åŒ…                     â”‚   â”‚  â† å±é™©æ“ä½œ
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸»é¢˜è‰²é€‰æ‹©

### è‰²ç›¸æ»‘å—

```typescript
// å½©è™¹æ¸å˜èƒŒæ™¯
background: linear-gradient(
  to right,
  oklch(0.6 0.25 0),    // çº¢
  oklch(0.6 0.25 60),   // é»„
  oklch(0.6 0.25 120),  // ç»¿
  oklch(0.6 0.25 180),  // é’
  oklch(0.6 0.25 240),  // è“
  oklch(0.6 0.25 300),  // ç´«
  oklch(0.6 0.25 360)   // çº¢
);
```

### å·²ç”¨è‰²ç›¸æ ‡è®°

æ˜¾ç¤ºå…¶ä»–é’±åŒ…å·²ä½¿ç”¨çš„è‰²ç›¸ä½ç½®ï¼Œå¸®åŠ©ç”¨æˆ·é€‰æ‹©åŒºåˆ†åº¦é«˜çš„é¢œè‰²ï¼š

```typescript
// åœ¨æ»‘å—ä¸Šæ˜¾ç¤ºå·²ç”¨è‰²ç›¸
{existingHues.map((hue) => (
  <div
    className="absolute h-full w-0.5 bg-black/30"
    style={{ left: `${(hue / 360) * 100}%` }}
  />
))}
```

### é¢„è®¾é¢œè‰²æƒé‡

ä¸ºé¿å…é¢œè‰²å†²çªï¼Œé¢„è®¾é¢œè‰²æ ¹æ®ä¸å·²ç”¨è‰²ç›¸çš„è·ç¦»æ˜¾ç¤ºä¸åŒé€æ˜åº¦ï¼š

```typescript
function calculateAvoidanceWeight(hue: number, existingHues: number[]): number {
  const minDistance = 30; // æœ€å°å®‰å…¨è·ç¦»
  let minDist = 180;
  
  for (const existing of existingHues) {
    const dist = hueDistance(hue, existing);
    if (dist < minDist) minDist = dist;
  }
  
  return minDist < minDistance ? minDist / minDistance : 1;
}
```

---

## æŒ‰é’®ä¸»é¢˜è‰²

ç¡®è®¤/ä¿å­˜æŒ‰é’®è·Ÿéšå½“å‰é€‰æ‹©çš„ä¸»é¢˜è‰²ï¼Œæä¾›è§†è§‰åé¦ˆï¼š

```tsx
<Button
  style={{
    '--primary-hue': editThemeHue,
    '--primary': `oklch(var(--primary-lightness) var(--primary-saturation) ${editThemeHue})`,
  }}
>
  ç¡®è®¤
</Button>
```

---

## è¡Œä¸ºè§„èŒƒ

### å¿…é¡» (MUST)

1. å®æ—¶é¢„è§ˆåç§°å’Œé¢œè‰²å˜åŒ–
2. åç§°ä¸èƒ½ä¸ºç©º
3. ä¿å­˜å‰éªŒè¯åç§°æœ‰æ•ˆæ€§
4. edit-only æ¨¡å¼å¿…é¡»è°ƒç”¨ `onEditOnlyComplete`

### å»ºè®® (SHOULD)

1. æ˜¾ç¤ºå·²ç”¨è‰²ç›¸æ ‡è®°
2. é™ä½ç›¸è¿‘é¢œè‰²çš„è§†è§‰æƒé‡
3. æŒ‰é’®é¢œè‰²è·Ÿéšä¸»é¢˜è‰²

### å¯é€‰ (MAY)

1. åç§°é•¿åº¦é™åˆ¶ï¼ˆé»˜è®¤ 20 å­—ç¬¦ï¼‰
2. åç§°æ ¼å¼éªŒè¯

---

## ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºé’±åŒ…æœ€åä¸€æ­¥

```tsx
// pages/wallet/create.tsx
function ThemeStep({ walletId, onComplete }: Props) {
  return (
    <WalletConfig
      mode="edit-only"
      walletId={walletId}
      onEditOnlyComplete={onComplete}
    />
  );
}
```

### é’±åŒ…è¯¦æƒ…é¡µ

```tsx
// activities/WalletConfigActivity.tsx
function WalletConfigActivity() {
  const { walletId } = useActivityParams();
  
  return (
    <AppScreen>
      <WalletConfig mode="default" walletId={walletId} />
    </AppScreen>
  );
}
```

---

## ç›¸å…³ç»„ä»¶

- [WalletCard](./WalletCard.md) - é’±åŒ…å¡ç‰‡é¢„è§ˆ
- [ProgressSteps](../01-åŸºç¡€ç»„ä»¶/ProgressSteps.md) - è¿›åº¦æŒ‡ç¤ºå™¨

---

## ç›¸å…³ Hook

### useWalletTheme

```typescript
import { WALLET_THEME_COLORS } from '@/hooks/useWalletTheme';

// é¢„è®¾é¢œè‰²åˆ—è¡¨
WALLET_THEME_COLORS = [
  { hue: 0, color: 'oklch(...)', name: 'çº¢è‰²' },
  { hue: 30, color: 'oklch(...)', name: 'æ©™è‰²' },
  // ...
];
```

### deriveThemeHue

```typescript
import { deriveThemeHue } from '@/hooks/useWalletTheme';

// ä»åœ°å€æ´¾ç”Ÿåˆå§‹ä¸»é¢˜è‰²
const initialHue = deriveThemeHue(wallet.chainAddresses[0].address);
```
