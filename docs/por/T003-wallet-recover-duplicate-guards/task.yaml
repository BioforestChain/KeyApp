id: T003
name: Wallet Recover with Duplicate Guards
goal: Implement wallet recovery wizard with mnemonic input, three-level duplicate detection, and collision handling per openspec/changes/add-wallet-recover-duplicate-guards
status: complete
steps:
  - id: S1
    name: RecoverWalletForm component
    done: Mnemonic textarea + BIP39 validation + word count (12-36) + stories + tests
    status: complete
    outputs: [{path: 'src/components/onboarding/recover-wallet-form.tsx', note: '25 tests pass'}]
  - id: S2
    name: useMultiChainAddressGeneration hook
    done: Generate addresses for all chains, Bitcoin with 4 purposes (44/49/84/86)
    status: complete
    outputs: [{path: 'src/hooks/use-multi-chain-address-generation.ts', note: '10 tests pass'}, {path: 'src/lib/crypto/derivation.ts', note: '28 tests, added Bitcoin SegWit/Taproot'}]
  - id: S3
    name: useDuplicateDetection hook
    done: Three-level check (address lookup, multi-chain gen, private key collision)
    status: complete
    outputs: [{path: 'src/hooks/use-duplicate-detection.ts', note: '10 tests pass'}, {path: 'src/services/wallet/types.ts', note: 'Wallet storage types'}]
  - id: S4
    name: CollisionConfirmDialog component
    done: Replacement confirmation UI + stories + tests
    status: complete
    outputs: [{path: 'src/components/onboarding/collision-confirm-dialog.tsx', note: '9 tests pass'}]
  - id: S5
    name: Integration and routes
    done: /onboarding/recover wizard + reuse components + wallet name auto-gen + storage
    status: complete
    outputs: [{path: 'src/pages/onboarding/recover.tsx', note: 'Recover wizard page'}, {path: 'src/routes/index.tsx', note: '/onboarding/recover route'}]
  - id: S6
    name: Validation
    done: All tests pass + stories complete + openspec validate --strict
    status: complete
    outputs: [{path: 'openspec/changes/add-wallet-recover-duplicate-guards/tasks.md', note: 'All tasks checked'}]
